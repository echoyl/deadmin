!(function(){var c4=(xt,N,F)=>new Promise(($,X)=>{var w=K=>{try{G(F.next(K))}catch(Q){X(Q)}},Y=K=>{try{G(F.throw(K))}catch(Q){X(Q)}},G=K=>K.done?$(K.value):Promise.resolve(K.value).then(w,Y);G((F=F.apply(xt,N)).next())});(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[92],{81618:function(xt){"use strict";(function(N,F){xt.exports=F()})(this,function(){function N(oe){var ee=[];return oe.AMapUI&&ee.push(F(oe.AMapUI)),oe.Loca&&ee.push($(oe.Loca)),Promise.all(ee)}function F(oe){return new Promise(function(ee,xe){var ce=[];if(oe.plugins)for(var he=0;he<oe.plugins.length;he+=1)w.AMapUI.plugins.indexOf(oe.plugins[he])==-1&&ce.push(oe.plugins[he]);if(Y.AMapUI===X.failed)xe("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(Y.AMapUI===X.notload){Y.AMapUI=X.loading,w.AMapUI.version=oe.version||w.AMapUI.version,he=w.AMapUI.version;var J=document.body||document.head,M=document.createElement("script");M.type="text/javascript",M.src="https://webapi.amap.com/ui/"+he+"/main.js",M.onerror=function(E){Y.AMapUI=X.failed,xe("\u8BF7\u6C42 AMapUI \u5931\u8D25")},M.onload=function(){if(Y.AMapUI=X.loaded,ce.length)window.AMapUI.loadUI(ce,function(){for(var E=0,fe=ce.length;E<fe;E++){var me=ce[E].split("/").slice(-1)[0];window.AMapUI[me]=arguments[E]}for(ee();G.AMapUI.length;)G.AMapUI.splice(0,1)[0]()});else for(ee();G.AMapUI.length;)G.AMapUI.splice(0,1)[0]()},J.appendChild(M)}else Y.AMapUI===X.loaded?oe.version&&oe.version!==w.AMapUI.version?xe("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):ce.length?window.AMapUI.loadUI(ce,function(){for(var E=0,fe=ce.length;E<fe;E++){var me=ce[E].split("/").slice(-1)[0];window.AMapUI[me]=arguments[E]}ee()}):ee():oe.version&&oe.version!==w.AMapUI.version?xe("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):G.AMapUI.push(function(E){E?xe(E):ce.length?window.AMapUI.loadUI(ce,function(){for(var fe=0,me=ce.length;fe<me;fe++){var ke=ce[fe].split("/").slice(-1)[0];window.AMapUI[ke]=arguments[fe]}ee()}):ee()})})}function $(oe){return new Promise(function(ee,xe){if(Y.Loca===X.failed)xe("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(Y.Loca===X.notload){Y.Loca=X.loading,w.Loca.version=oe.version||w.Loca.version;var ce=w.Loca.version,he=w.AMap.version.startsWith("2"),J=ce.startsWith("2");if(he&&!J||!he&&J)xe("JSAPI \u4E0E Loca \u7248\u672C\u4E0D\u5BF9\u5E94\uFF01\uFF01");else{he=w.key,J=document.body||document.head;var M=document.createElement("script");M.type="text/javascript",M.src="https://webapi.amap.com/loca?v="+ce+"&key="+he,M.onerror=function(E){Y.Loca=X.failed,xe("\u8BF7\u6C42 AMapUI \u5931\u8D25")},M.onload=function(){for(Y.Loca=X.loaded,ee();G.Loca.length;)G.Loca.splice(0,1)[0]()},J.appendChild(M)}}else Y.Loca===X.loaded?oe.version&&oe.version!==w.Loca.version?xe("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):ee():oe.version&&oe.version!==w.Loca.version?xe("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):G.Loca.push(function(E){E?xe(E):xe()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var X;(function(oe){oe.notload="notload",oe.loading="loading",oe.loaded="loaded",oe.failed="failed"})(X||(X={}));var w={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},Y={AMap:X.notload,AMapUI:X.notload,Loca:X.notload},G={AMap:[],AMapUI:[],Loca:[]},K=[],Q=function(oe){typeof oe=="function"&&(Y.AMap===X.loaded?oe(window.AMap):K.push(oe))};return{load:function(oe){return new Promise(function(ee,xe){if(Y.AMap==X.failed)xe("");else if(Y.AMap==X.notload){var ce=oe.key,he=oe.version,J=oe.plugins;ce?(window.AMap&&location.host!=="lbs.amap.com"&&xe("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),w.key=ce,w.AMap.version=he||w.AMap.version,w.AMap.plugins=J||w.AMap.plugins,Y.AMap=X.loading,he=document.body||document.head,window.___onAPILoaded=function(E){if(delete window.___onAPILoaded,E)Y.AMap=X.failed,xe(E);else for(Y.AMap=X.loaded,N(oe).then(function(){ee(window.AMap)}).catch(xe);K.length;)K.splice(0,1)[0]()},J=document.createElement("script"),J.type="text/javascript",J.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+w.AMap.version+"&key="+ce+"&plugin="+w.AMap.plugins.join(","),J.onerror=function(E){Y.AMap=X.failed,xe(E)},he.appendChild(J)):xe("\u8BF7\u586B\u5199key")}else if(Y.AMap==X.loaded)if(oe.key&&oe.key!==w.key)xe("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(oe.version&&oe.version!==w.AMap.version)xe("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(ce=[],oe.plugins)for(he=0;he<oe.plugins.length;he+=1)w.AMap.plugins.indexOf(oe.plugins[he])==-1&&ce.push(oe.plugins[he]);ce.length?window.AMap.plugin(ce,function(){N(oe).then(function(){ee(window.AMap)}).catch(xe)}):N(oe).then(function(){ee(window.AMap)}).catch(xe)}else if(oe.key&&oe.key!==w.key)xe("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(oe.version&&oe.version!==w.AMap.version)xe("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var M=[];if(oe.plugins)for(he=0;he<oe.plugins.length;he+=1)w.AMap.plugins.indexOf(oe.plugins[he])==-1&&M.push(oe.plugins[he]);Q(function(){M.length?window.AMap.plugin(M,function(){N(oe).then(function(){ee(window.AMap)}).catch(xe)}):N(oe).then(function(){ee(window.AMap)}).catch(xe)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,w={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},Y={AMap:X.notload,AMapUI:X.notload,Loca:X.notload},G={AMap:[],AMapUI:[],Loca:[]}}}})},25330:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};N.default=F},67303:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var F={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};N.default=F},83647:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};N.default=F},57583:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};N.default=F},29260:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};N.default=F},49787:function(xt,N,F){"use strict";F.d(N,{Z:function(){return xj}});var $={};F.r($),F.d($,{add:function(){return bi},adjoint:function(){return Yd},clone:function(){return $d},copy:function(){return gd},create:function(){return vu},determinant:function(){return jh},equals:function(){return Qa},exactEquals:function(){return Ri},frob:function(){return oi},fromQuat:function(){return ht},fromQuat2:function(){return z},fromRotation:function(){return h},fromRotationTranslation:function(){return L},fromRotationTranslationScale:function(){return He},fromRotationTranslationScaleOrigin:function(){return rt},fromScaling:function(){return m_},fromTranslation:function(){return Bp},fromValues:function(){return Lp},fromXRotation:function(){return v},fromYRotation:function(){return _},fromZRotation:function(){return R},frustum:function(){return Mt},getRotation:function(){return Se},getScaling:function(){return ae},getTranslation:function(){return j},identity:function(){return Mu},invert:function(){return Dc},lookAt:function(){return nn},mul:function(){return Ji},multiply:function(){return mc},multiplyScalar:function(){return Fi},multiplyScalarAndAdd:function(){return ca},ortho:function(){return Ur},orthoNO:function(){return _r},orthoZO:function(){return Kr},perspective:function(){return er},perspectiveFromFieldOfView:function(){return Mr},perspectiveNO:function(){return Nt},perspectiveZO:function(){return ar},rotate:function(){return g_},rotateX:function(){return Wh},rotateY:function(){return Kd},rotateZ:function(){return Ya},scale:function(){return Bu},set:function(){return Em},str:function(){return Pn},sub:function(){return Wi},subtract:function(){return Qi},targetTo:function(){return yn},translate:function(){return rl},transpose:function(){return _g}});var X=F(67294),w=F(97582),Y=F(21030),G={},K={},Q=function(a){return K[a]},oe=function(a,r){K[a]=r},ee=function(a){return G[a]},xe=function(a,r){G[a]=r},ce={},he={},J=34,M=10,E=13;function fe(e){return new Function("d","return {"+e.map(function(a,r){return JSON.stringify(a)+": d["+r+'] || ""'}).join(",")+"}")}function me(e,a){var r=fe(e);return function(o,u){return a(r(o),u,e)}}function ke(e){var a=Object.create(null),r=[];return e.forEach(function(o){for(var u in o)u in a||r.push(a[u]=u)}),r}function Pe(e,a){var r=e+"",o=r.length;return o<a?new Array(a-o+1).join(0)+r:r}function Le(e){return e<0?"-"+Pe(-e,6):e>9999?"+"+Pe(e,6):Pe(e,4)}function tt(e){var a=e.getUTCHours(),r=e.getUTCMinutes(),o=e.getUTCSeconds(),u=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Le(e.getUTCFullYear(),4)+"-"+Pe(e.getUTCMonth()+1,2)+"-"+Pe(e.getUTCDate(),2)+(u?"T"+Pe(a,2)+":"+Pe(r,2)+":"+Pe(o,2)+"."+Pe(u,3)+"Z":o?"T"+Pe(a,2)+":"+Pe(r,2)+":"+Pe(o,2)+"Z":r||a?"T"+Pe(a,2)+":"+Pe(r,2)+"Z":"")}function ft(e){var a=new RegExp('["'+e+`
\r]`),r=e.charCodeAt(0);function o(D,V){var H,ue,le=u(D,function(we,Ne){if(H)return H(we,Ne-1);ue=we,H=V?me(we,V):fe(we)});return le.columns=ue||[],le}function u(D,V){var H=[],ue=D.length,le=0,we=0,Ne,dt=ue<=0,mt=!1;D.charCodeAt(ue-1)===M&&--ue,D.charCodeAt(ue-1)===E&&--ue;function Lt(){if(dt)return he;if(mt)return mt=!1,ce;var qt,ir=le,Sr;if(D.charCodeAt(ir)===J){for(;le++<ue&&D.charCodeAt(le)!==J||D.charCodeAt(++le)===J;);return(qt=le)>=ue?dt=!0:(Sr=D.charCodeAt(le++))===M?mt=!0:Sr===E&&(mt=!0,D.charCodeAt(le)===M&&++le),D.slice(ir+1,qt-1).replace(/""/g,'"')}for(;le<ue;){if((Sr=D.charCodeAt(qt=le++))===M)mt=!0;else if(Sr===E)mt=!0,D.charCodeAt(le)===M&&++le;else if(Sr!==r)continue;return D.slice(ir,qt)}return dt=!0,D.slice(ir,ue)}for(;(Ne=Lt())!==he;){for(var Wt=[];Ne!==ce&&Ne!==he;)Wt.push(Ne),Ne=Lt();V&&(Wt=V(Wt,we++))==null||H.push(Wt)}return H}function c(D,V){return D.map(function(H){return V.map(function(ue){return O(H[ue])}).join(e)})}function p(D,V){return V==null&&(V=ke(D)),[V.map(O).join(e)].concat(c(D,V)).join(`
`)}function g(D,V){return V==null&&(V=ke(D)),c(D,V).join(`
`)}function y(D){return D.map(S).join(`
`)}function S(D){return D.map(O).join(e)}function O(D){return D==null?"":D instanceof Date?tt(D):a.test(D+="")?'"'+D.replace(/"/g,'""')+'"':D}return{parse:o,parseRows:u,format:p,formatBody:g,formatRows:y,formatRow:S,formatValue:O}}var ge=ft(","),be=ge.parse,Ce=ge.parseRows,Ye=ge.format,je=ge.formatBody,Et=ge.formatRows,Ae=ge.formatRow,Qe=ge.formatValue,te=F(1413),Ze=63710088e-1,ie={centimeters:Ze*100,centimetres:Ze*100,degrees:Ze/111325,feet:Ze*3.28084,inches:Ze*39.37,kilometers:Ze/1e3,kilometres:Ze/1e3,meters:Ze,metres:Ze,miles:Ze/1609.344,millimeters:Ze*1e3,millimetres:Ze*1e3,nauticalmiles:Ze/1852,radians:1,yards:Ze*1.0936},Oe={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Ze,yards:1.0936133},nt={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function ye(e,a,r){r===void 0&&(r={});var o={type:"Feature"};return(r.id===0||r.id)&&(o.id=r.id),r.bbox&&(o.bbox=r.bbox),o.properties=a||{},o.geometry=e,o}function Te(e,a,r){switch(r===void 0&&(r={}),e){case"Point":return Je(a).geometry;case"LineString":return De(a).geometry;case"Polygon":return Me(a).geometry;case"MultiPoint":return Ue(a).geometry;case"MultiLineString":return Ve(a).geometry;case"MultiPolygon":return Ee(a).geometry;default:throw new Error(e+" is invalid")}}function Je(e,a,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ke(e[0])||!Ke(e[1]))throw new Error("coordinates must contain numbers");var o={type:"Point",coordinates:e};return ye(o,a,r)}function pe(e,a,r){return r===void 0&&(r={}),Vt(e.map(function(o){return Je(o,a)}),r)}function Me(e,a,r){r===void 0&&(r={});for(var o=0,u=e;o<u.length;o++){var c=u[o];if(c.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var p=0;p<c[c.length-1].length;p++)if(c[c.length-1][p]!==c[0][p])throw new Error("First and last Position are not equivalent.")}var g={type:"Polygon",coordinates:e};return ye(g,a,r)}function ze(e,a,r){return r===void 0&&(r={}),Vt(e.map(function(o){return Me(o,a)}),r)}function De(e,a,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var o={type:"LineString",coordinates:e};return ye(o,a,r)}function Ct(e,a,r){return r===void 0&&(r={}),Vt(e.map(function(o){return De(o,a)}),r)}function Vt(e,a){a===void 0&&(a={});var r={type:"FeatureCollection"};return a.id&&(r.id=a.id),a.bbox&&(r.bbox=a.bbox),r.features=e,r}function Ve(e,a,r){r===void 0&&(r={});var o={type:"MultiLineString",coordinates:e};return ye(o,a,r)}function Ue(e,a,r){r===void 0&&(r={});var o={type:"MultiPoint",coordinates:e};return ye(o,a,r)}function Ee(e,a,r){r===void 0&&(r={});var o={type:"MultiPolygon",coordinates:e};return ye(o,a,r)}function et(e,a,r){r===void 0&&(r={});var o={type:"GeometryCollection",geometries:e};return ye(o,a,r)}function st(e,a){if(a===void 0&&(a=0),a&&!(a>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,a||0);return Math.round(e*r)/r}function Re(e,a){a===void 0&&(a="kilometers");var r=ie[a];if(!r)throw new Error(a+" units is invalid");return e*r}function Ie(e,a){a===void 0&&(a="kilometers");var r=ie[a];if(!r)throw new Error(a+" units is invalid");return e/r}function ct(e,a){return Qt(Ie(e,a))}function Tt(e){var a=e%360;return a<0&&(a+=360),a}function Qt(e){var a=e%(2*Math.PI);return a*180/Math.PI}function wt(e){var a=e%360;return a*Math.PI/180}function se(e,a,r){if(a===void 0&&(a="kilometers"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return Re(Ie(e,a),r)}function Ge(e,a,r){if(a===void 0&&(a="meters"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var o=nt[a];if(!o)throw new Error("invalid original units");var u=nt[r];if(!u)throw new Error("invalid final units");return e/o*u}function Ke(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function bt(e){return!!e&&e.constructor===Object}function Be(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(a){if(!Ke(a))throw new Error("bbox must only contain numbers")})}function pt(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}function It(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ot(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function zt(e){if(e.length>1&&isNumber(e[0])&&isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return zt(e[0]);throw new Error("coordinates must only contain numbers")}function Jt(e,a,r){if(!a||!r)throw new Error("type and name required");if(!e||e.type!==a)throw new Error("Invalid input to "+r+": must be a "+a+", given "+e.type)}function tr(e,a,r){if(!e)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!e||e.type!=="Feature"||!e.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!e.geometry||e.geometry.type!==a)throw new Error("Invalid input to "+r+": must be a "+a+", given "+e.geometry.type)}function pr(e,a,r){if(!e)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!e||e.type!=="FeatureCollection")throw new Error("Invalid input to "+r+", FeatureCollection required");for(var o=0,u=e.features;o<u.length;o++){var c=u[o];if(!c||c.type!=="Feature"||!c.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!c.geometry||c.geometry.type!==a)throw new Error("Invalid input to "+r+": must be a "+a+", given "+c.geometry.type)}}function br(e){return e.type==="Feature"?e.geometry:e}function Zr(e,a){return e.type==="FeatureCollection"?"FeatureCollection":e.type==="GeometryCollection"?"GeometryCollection":e.type==="Feature"&&e.geometry!==null?e.geometry.type:e.type}function Nr(e,a,r){if(e!==null)for(var o,u,c,p,g,y,S,O=0,D=0,V,H=e.type,ue=H==="FeatureCollection",le=H==="Feature",we=ue?e.features.length:1,Ne=0;Ne<we;Ne++){S=ue?e.features[Ne].geometry:le?e.geometry:e,V=S?S.type==="GeometryCollection":!1,g=V?S.geometries.length:1;for(var dt=0;dt<g;dt++){var mt=0,Lt=0;if(p=V?S.geometries[dt]:S,p!==null){y=p.coordinates;var Wt=p.type;switch(O=r&&(Wt==="Polygon"||Wt==="MultiPolygon")?1:0,Wt){case null:break;case"Point":if(a(y,D,Ne,mt,Lt)===!1)return!1;D++,mt++;break;case"LineString":case"MultiPoint":for(o=0;o<y.length;o++){if(a(y[o],D,Ne,mt,Lt)===!1)return!1;D++,Wt==="MultiPoint"&&mt++}Wt==="LineString"&&mt++;break;case"Polygon":case"MultiLineString":for(o=0;o<y.length;o++){for(u=0;u<y[o].length-O;u++){if(a(y[o][u],D,Ne,mt,Lt)===!1)return!1;D++}Wt==="MultiLineString"&&mt++,Wt==="Polygon"&&Lt++}Wt==="Polygon"&&mt++;break;case"MultiPolygon":for(o=0;o<y.length;o++){for(Lt=0,u=0;u<y[o].length;u++){for(c=0;c<y[o][u].length-O;c++){if(a(y[o][u][c],D,Ne,mt,Lt)===!1)return!1;D++}Lt++}mt++}break;case"GeometryCollection":for(o=0;o<p.geometries.length;o++)if(Nr(p.geometries[o],a,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function tn(e,a,r,o){var u=r;return Nr(e,function(c,p,g,y,S){p===0&&r===void 0?u=c:u=a(u,c,p,g,y,S)},o),u}function Dn(e,a){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&a(e.features[r].properties,r)!==!1;r++);break;case"Feature":a(e.properties,0);break}}function gn(e,a,r){var o=r;return Dn(e,function(u,c){c===0&&r===void 0?o=u:o=a(o,u,c)}),o}function Vn(e,a){if(e.type==="Feature")a(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&a(e.features[r],r)!==!1;r++);}function Un(e,a,r){var o=r;return Vn(e,function(u,c){c===0&&r===void 0?o=u:o=a(o,u,c)}),o}function mi(e){var a=[];return Nr(e,function(r){a.push(r)}),a}function qn(e,a){var r,o,u,c,p,g,y,S,O,D,V=0,H=e.type==="FeatureCollection",ue=e.type==="Feature",le=H?e.features.length:1;for(r=0;r<le;r++){for(g=H?e.features[r].geometry:ue?e.geometry:e,S=H?e.features[r].properties:ue?e.properties:{},O=H?e.features[r].bbox:ue?e.bbox:void 0,D=H?e.features[r].id:ue?e.id:void 0,y=g?g.type==="GeometryCollection":!1,p=y?g.geometries.length:1,u=0;u<p;u++){if(c=y?g.geometries[u]:g,c===null){if(a(null,V,S,O,D)===!1)return!1;continue}switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(a(c,V,S,O,D)===!1)return!1;break}case"GeometryCollection":{for(o=0;o<c.geometries.length;o++)if(a(c.geometries[o],V,S,O,D)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}V++}}function Xn(e,a,r){var o=r;return qn(e,function(u,c,p,g,y){c===0&&r===void 0?o=u:o=a(o,u,c,p,g,y)}),o}function We(e,a){qn(e,function(r,o,u,c,p){var g=r===null?null:r.type;switch(g){case null:case"Point":case"LineString":case"Polygon":return a(ye(r,u,{bbox:c,id:p}),o,0)===!1?!1:void 0}var y;switch(g){case"MultiPoint":y="Point";break;case"MultiLineString":y="LineString";break;case"MultiPolygon":y="Polygon";break}for(var S=0;S<r.coordinates.length;S++){var O=r.coordinates[S],D={type:y,coordinates:O};if(a(ye(D,u),o,S)===!1)return!1}})}function it(e,a,r){var o=r;return We(e,function(u,c,p){c===0&&p===0&&r===void 0?o=u:o=a(o,u,c,p)}),o}function _t(e,a){We(e,function(r,o,u){var c=0;if(r.geometry){var p=r.geometry.type;if(!(p==="Point"||p==="MultiPoint")){var g,y=0,S=0,O=0;if(Nr(r,function(D,V,H,ue,le){if(g===void 0||o>y||ue>S||le>O){g=D,y=o,S=ue,O=le,c=0;return}var we=lineString([g,D],r.properties);if(a(we,o,u,le,c)===!1)return!1;c++,g=D})===!1)return!1}}})}function Pt(e,a,r){var o=r,u=!1;return _t(e,function(c,p,g,y,S){u===!1&&r===void 0?o=c:o=a(o,c,p,g,y,S),u=!0}),o}function jt(e,a){if(!e)throw new Error("geojson is required");We(e,function(r,o,u){if(r.geometry!==null){var c=r.geometry.type,p=r.geometry.coordinates;switch(c){case"LineString":if(a(r,o,u,0,0)===!1)return!1;break;case"Polygon":for(var g=0;g<p.length;g++)if(a(lineString(p[g],r.properties),o,u,g)===!1)return!1;break}}})}function gr(e,a,r){var o=r;return jt(e,function(u,c,p,g){c===0&&r===void 0?o=u:o=a(o,u,c,p,g)}),o}function Cr(e,a){if(a=a||{},!isObject(a))throw new Error("options is invalid");var r=a.featureIndex||0,o=a.multiFeatureIndex||0,u=a.geometryIndex||0,c=a.segmentIndex||0,p=a.properties,g;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),p=p||e.features[r].properties,g=e.features[r].geometry;break;case"Feature":p=p||e.properties,g=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":g=e;break;default:throw new Error("geojson is invalid")}if(g===null)return null;var y=g.coordinates;switch(g.type){case"Point":case"MultiPoint":return null;case"LineString":return c<0&&(c=y.length+c-1),lineString([y[c],y[c+1]],p,a);case"Polygon":return u<0&&(u=y.length+u),c<0&&(c=y[u].length+c-1),lineString([y[u][c],y[u][c+1]],p,a);case"MultiLineString":return o<0&&(o=y.length+o),c<0&&(c=y[o].length+c-1),lineString([y[o][c],y[o][c+1]],p,a);case"MultiPolygon":return o<0&&(o=y.length+o),u<0&&(u=y[o].length+u),c<0&&(c=y[o][u].length-c-1),lineString([y[o][u][c],y[o][u][c+1]],p,a)}throw new Error("geojson is invalid")}function kt(e,a){if(a=a||{},!isObject(a))throw new Error("options is invalid");var r=a.featureIndex||0,o=a.multiFeatureIndex||0,u=a.geometryIndex||0,c=a.coordIndex||0,p=a.properties,g;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),p=p||e.features[r].properties,g=e.features[r].geometry;break;case"Feature":p=p||e.properties,g=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":g=e;break;default:throw new Error("geojson is invalid")}if(g===null)return null;var y=g.coordinates;switch(g.type){case"Point":return point(y,p,a);case"MultiPoint":return o<0&&(o=y.length+o),point(y[o],p,a);case"LineString":return c<0&&(c=y.length+c),point(y[c],p,a);case"Polygon":return u<0&&(u=y.length+u),c<0&&(c=y[u].length+c),point(y[u][c],p,a);case"MultiLineString":return o<0&&(o=y.length+o),c<0&&(c=y[o].length+c),point(y[o][c],p,a);case"MultiPolygon":return o<0&&(o=y.length+o),u<0&&(u=y[o].length+u),c<0&&(c=y[o][u].length-c),point(y[o][u][c],p,a)}throw new Error("geojson is invalid")}var at=F(43144),Rt=F(15671),mr=F(60136),Dr=F(82963),Ft=F(61120),Mn=F(89611);function yi(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch(a){return typeof e=="function"}}var gi=F(78814);function sn(e,a,r){return(0,gi.Z)()?sn=Reflect.construct.bind():sn=function(u,c,p){var g=[null];g.push.apply(g,c);var y=Function.bind.apply(u,g),S=new y;return p&&(0,Mn.Z)(S,p.prototype),S},sn.apply(null,arguments)}function hi(e){var a=typeof Map=="function"?new Map:void 0;return hi=function(o){if(o===null||!yi(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof a!="undefined"){if(a.has(o))return a.get(o);a.set(o,u)}function u(){return sn(o,arguments,(0,Ft.Z)(this).constructor)}return u.prototype=Object.create(o.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),(0,Mn.Z)(u,o)},hi(e)}var ri={REGISTERED_PROTOCOLS:{}};function ui(e){var a=ba();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function ba(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var vi=function(a){return ri.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))]},Sa=function(e){(0,mr.Z)(r,e);var a=ui(r);function r(o,u,c,p){var g;return(0,Rt.Z)(this,r),g=a.call(this,"AJAXError: ".concat(u," (").concat(o,"): ").concat(c)),g.status=o,g.statusText=u,g.url=c,g.body=p,g}return(0,at.Z)(r)}(hi(Error));function za(e,a){var r=new XMLHttpRequest,o=Array.isArray(e.url)?e.url[0]:e.url;r.open(e.method||"GET",o,!0),e.type==="arrayBuffer"&&(r.responseType="arraybuffer");for(var u in e.headers)e.headers.hasOwnProperty(u)&&r.setRequestHeader(u,e.headers[u]);return e.type==="json"&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials=e.credentials==="include",r.onerror=function(){a(new Error(r.statusText))},r.onload=function(){if((r.status>=200&&r.status<300||r.status===0)&&r.response!==null){var c=r.response;if(e.type==="json")try{c=JSON.parse(r.response)}catch(g){return a(g)}a(null,c,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"),r)}else{var p=new Blob([r.response],{type:r.getResponseHeader("Content-Type")});a(new Sa(r.status,r.statusText,o.toString(),p))}},r.cancel=r.abort,r.send(e.body),r}function _a(e){return new Promise(function(a,r){za(e,function(o,u,c,p,g){o?r({err:o,data:null,xhr:g}):a({err:null,data:u,cacheControl:c,expires:p,xhr:g})})})}function Ga(e,a){return za(e,a)}var Ea=function(a,r){var o=vi(a.url)||Ga;return o((0,te.Z)((0,te.Z)({},a),{},{type:"json"}),r)},hs=function(a,r){var o=vi(a.url)||Ga;return o((0,te.Z)((0,te.Z)({},a),{},{type:"arrayBuffer"}),r)},uo=function(a,r){return Ga(_objectSpread(_objectSpread({},a),{},{method:"POST"}),r)},Ro=function(a,r){return Ga((0,te.Z)((0,te.Z)({},a),{},{method:"GET"}),r)};function Jn(e){var a=window.document.createElement("a");return a.href=e,a.protocol===window.document.location.protocol&&a.host===window.document.location.host}var _i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function na(e,a){var r=new window.Image,o=window.URL||window.webkitURL;r.crossOrigin="anonymous",r.onload=function(){a(null,r),o.revokeObjectURL(r.src),r.onload=null,window.requestAnimationFrame(function(){r.src=_i})},r.onerror=function(){return a(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var u=new Blob([new Uint8Array(e)],{type:"image/png"});r.src=e.byteLength?o.createObjectURL(u):_i}function Xa(e,a){var r=new Blob([new Uint8Array(e)],{type:"image/png"});createImageBitmap(r).then(function(o){a(null,o)}).catch(function(o){a(new Error("Could not load image because of ".concat(o.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))})}var ps=function(a,r,o){var u=function(p,g){if(p)r(p);else if(g){var y=typeof createImageBitmap=="function",S=o?o(g):g;y?Xa(S,r):na(S,r)}};return a.type==="json"?Ea(a,u):hs(a,u)},po=function(a,r){var o=typeof createImageBitmap=="function";o?Xa(a,r):na(a,r)},Io=function(e){return e.CENTER="center",e.TOP="top",e["TOP-LEFT"]="top-left",e["TOP-RIGHT"]="top-right",e.BOTTOM="bottom",e["BOTTOM-LEFT"]="bottom-left",e["BOTTOM-RIGHT"]="bottom-right",e.LEFT="left",e.RIGHT="right",e}({}),nr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function At(e,a,r){var o=e.classList;for(var u in nr)nr.hasOwnProperty(u)&&o.remove("l7-".concat(r,"-anchor-").concat(u));o.add("l7-".concat(r,"-anchor-").concat(a))}function Xt(e,a,r){e.prototype=a.prototype=r,r.constructor=e}function yr(e,a){var r=Object.create(e.prototype);for(var o in a)r[o]=a[o];return r}function Gr(){}var Cn=.7,kn=1/Cn,_n="\\s*([+-]?\\d+)\\s*",Mi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wo=/^#([0-9a-f]{3,8})$/,Ko=new RegExp("^rgb\\("+[_n,_n,_n]+"\\)$"),su=new RegExp("^rgb\\("+[Yi,Yi,Yi]+"\\)$"),No=new RegExp("^rgba\\("+[_n,_n,_n,Mi]+"\\)$"),ro=new RegExp("^rgba\\("+[Yi,Yi,Yi,Mi]+"\\)$"),uu=new RegExp("^hsl\\("+[Mi,Yi,Yi]+"\\)$"),qo=new RegExp("^hsla\\("+[Mi,Yi,Yi,Mi]+"\\)$"),Dt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xt(Gr,ii,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Kt,formatHex:Kt,formatHsl:Or,formatRgb:xn,toString:xn});function Kt(){return this.rgb().formatHex()}function Or(){return lu(this).formatHsl()}function xn(){return this.rgb().formatRgb()}function ii(e){var a,r;return e=(e+"").trim().toLowerCase(),(a=Wo.exec(e))?(r=a[1].length,a=parseInt(a[1],16),r===6?Zi(a):r===3?new Po(a>>8&15|a>>4&240,a>>4&15|a&240,(a&15)<<4|a&15,1):r===8?lo(a>>24&255,a>>16&255,a>>8&255,(a&255)/255):r===4?lo(a>>12&15|a>>8&240,a>>8&15|a>>4&240,a>>4&15|a&240,((a&15)<<4|a&15)/255):null):(a=Ko.exec(e))?new Po(a[1],a[2],a[3],1):(a=su.exec(e))?new Po(a[1]*255/100,a[2]*255/100,a[3]*255/100,1):(a=No.exec(e))?lo(a[1],a[2],a[3],a[4]):(a=ro.exec(e))?lo(a[1]*255/100,a[2]*255/100,a[3]*255/100,a[4]):(a=uu.exec(e))?rh(a[1],a[2]/100,a[3]/100,1):(a=qo.exec(e))?rh(a[1],a[2]/100,a[3]/100,a[4]):Dt.hasOwnProperty(e)?Zi(Dt[e]):e==="transparent"?new Po(NaN,NaN,NaN,0):null}function Zi(e){return new Po(e>>16&255,e>>8&255,e&255,1)}function lo(e,a,r,o){return o<=0&&(e=a=r=NaN),new Po(e,a,r,o)}function Bs(e){return e instanceof Gr||(e=ii(e)),e?(e=e.rgb(),new Po(e.r,e.g,e.b,e.opacity)):new Po}function Eo(e,a,r,o){return arguments.length===1?Bs(e):new Po(e,a,r,o==null?1:o)}function Po(e,a,r,o){this.r=+e,this.g=+a,this.b=+r,this.opacity=+o}Xt(Po,Eo,yr(Gr,{brighter:function(e){return e=e==null?kn:Math.pow(kn,e),new Po(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Cn:Math.pow(Cn,e),new Po(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hu,formatHex:Hu,formatRgb:uf,toString:uf}));function Hu(){return"#"+th(this.r)+th(this.g)+th(this.b)}function uf(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function th(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function rh(e,a,r,o){return o<=0?e=a=r=NaN:r<=0||r>=1?e=a=NaN:a<=0&&(e=NaN),new Qs(e,a,r,o)}function lu(e){if(e instanceof Qs)return new Qs(e.h,e.s,e.l,e.opacity);if(e instanceof Gr||(e=ii(e)),!e)return new Qs;if(e instanceof Qs)return e;e=e.rgb();var a=e.r/255,r=e.g/255,o=e.b/255,u=Math.min(a,r,o),c=Math.max(a,r,o),p=NaN,g=c-u,y=(c+u)/2;return g?(a===c?p=(r-o)/g+(r<o)*6:r===c?p=(o-a)/g+2:p=(a-r)/g+4,g/=y<.5?c+u:2-c-u,p*=60):g=y>0&&y<1?0:p,new Qs(p,g,y,e.opacity)}function nc(e,a,r,o){return arguments.length===1?lu(e):new Qs(e,a,r,o==null?1:o)}function Qs(e,a,r,o){this.h=+e,this.s=+a,this.l=+r,this.opacity=+o}Xt(Qs,nc,yr(Gr,{brighter:function(e){return e=e==null?kn:Math.pow(kn,e),new Qs(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Cn:Math.pow(Cn,e),new Qs(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,a=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*a,u=2*r-o;return new Po(Sl(e>=240?e-240:e+120,u,o),Sl(e,u,o),Sl(e<120?e+240:e-120,u,o),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function Sl(e,a,r){return(e<60?a+(r-a)*e/60:e<180?r:e<240?a+(r-a)*(240-e)/60:a)*255}function ic(e){return typeof e=="string"?!!d3.color(e):!1}function no(e){var a=ii(e),r=[0,0,0,0];return a!=null&&(r[0]=a.r/255,r[1]=a.g/255,r[2]=a.b/255,r[3]=a.opacity),r}function Kl(e){var a=e&&e[0],r=e&&e[1],o=e&&e[2],u=a+r*256+o*65536-1;return u}function Es(e){return[e+1&255,e+1>>8&255,e+1>>8>>8&255]}function ds(e){var a=window.document.createElement("canvas"),r=a.getContext("2d");a.width=256,a.height=1;for(var o=null,u=r.createLinearGradient(0,0,256,1),c=e.positions[0],p=e.positions[e.positions.length-1],g=0;g<e.colors.length;++g){var y=(e.positions[g]-c)/(p-c);u.addColorStop(y,e.colors[g])}return r.fillStyle=u,r.fillRect(0,0,256,1),o=new Uint8ClampedArray(r.getImageData(0,0,256,1).data),a=null,r=null,{data:o,width:256,height:1}}function bc(e,a){var r=window.document.createElement("canvas"),o=r.getContext("2d");r.width=256,r.height=1;for(var u=o.createLinearGradient(0,0,256,1),c=a[1]-a[0],p=0;p<e.colors.length;++p){var g=Math.max((e.positions[p]-a[0])/c,0);u.addColorStop(g,e.colors[p])}o.fillStyle=u,o.fillRect(0,0,256,1);var y=o.getImageData(0,0,256,1).data,S=Nl(o,y);return r=null,o=null,S}function Sc(e){var a=window.document.createElement("canvas"),r=a.getContext("2d");a.width=256,a.height=1;var o=r.createImageData(256,1);return o.data.fill(0),e.positions.forEach(function(u,c){var p=no(e.colors[c]);o.data[u*4+0]=p[0]*255,o.data[u*4+1]=p[1]*255,o.data[u*4+2]=p[2]*255,o.data[u*4+3]=p[3]*255}),a=null,r=null,o}function Rf(e){var a=window.document.createElement("canvas"),r=a.getContext("2d");r.globalAlpha=1,a.width=256,a.height=1;for(var o=256/e.colors.length,u=0;u<e.colors.length;u++)r.beginPath(),r.lineWidth=2,r.strokeStyle=e.colors[u],r.moveTo(u*o,0),r.lineTo((u+1)*o,0),r.stroke();var c=r.getImageData(0,0,256,1).data,p=Nl(r,c);return a=null,r=null,p}function Bl(e,a){var r=window.document.createElement("canvas"),o=r.getContext("2d");o.globalAlpha=1,r.width=256,r.height=1;var u=a[1]-a[0];e.positions.length-e.colors.length!==1&&console.warn("positions \u7684\u6570\u5B57\u4E2A\u6570\u5E94\u5F53\u6BD4 colors \u7684\u6837\u5F0F\u591A\u4E00\u4E2A,poisitions \u7684\u9996\u5C3E\u503C\u4E00\u822C\u4E3A\u6570\u636E\u7684\u6700\u5927\u6700\u65B0\u503C");for(var c=0;c<e.colors.length;c++)o.beginPath(),o.lineWidth=2,o.strokeStyle=e.colors[c],o.moveTo((e.positions[c]-a[0])/u*255,0),o.lineTo((e.positions[c+1]-a[0])/u*255,0),o.stroke();var p=o.getImageData(0,0,256,1).data,g=Nl(o,p);return r=null,o=null,g}function Nl(e,a){for(var r=e.createImageData(256,1),o=0;o<r.data.length;o+=4)r.data[o+0]=a[o+0],r.data[o+1]=a[o+1],r.data[o+2]=a[o+2],r.data[o+3]=a[o+3];return r}function ql(e){switch(e.type){case"cat":return[0,255];default:return[0,1]}}var Pu={BACK:1029,FRONT:1028};function Ec(e){switch(e){case"GAODE1.x":return Pu.BACK;case"GAODE2.x":return Pu.BACK;case"MAPBOX":return Pu.FRONT;case"SIMPLE":return Pu.FRONT;case"GLOBEL":return Pu.BACK;case"DEBAULT":return Pu.FRONT;default:return Pu.FRONT}}var Sn=F(74902),Vi=F(97685),mv=F(74691),nh=F.n(mv),ac=F(50361),ed=F.n(ac),Vs=F(23279),wc=F.n(Vs),zl=F(27361),Js=F.n(zl),cu=F(51584),El=F.n(cu),oc=F(18446),Ul=F.n(oc),Cc=F(14293),Vc=F.n(Cc),ih=F(81763),td=F.n(ih),Zo=F(68630),Fd=F.n(Zo),Ih=F(47037),lf=F.n(Ih),ts=F(36719),hp=F.n(ts),pp=F(82492),Ou=F.n(pp),St=F(30236),cr=F.n(St),kr=F(97019),Hr=F.n(kr),An=F(23493),di=F.n(An),ua=F(44908),go=F.n(ua),Is=F(11700),ll=F.n(Is),Ku=F(23560),Oo=F.n(Ku),dp=F(13218),Dd=F.n(dp),Hc=F(52353),vp=F.n(Hc),cf=F(68929),rd=F.n(cf),wa={isNil:Vc(),merge:Ou(),throttle:di(),isString:lf(),debounce:wc(),pull:Hr(),isTypedArray:hp(),isPlainObject:Fd(),isNumber:td(),isBoolean:El(),isEqual:Ul(),cloneDeep:ed(),uniq:go(),clamp:nh(),upperFirst:ll(),get:Js(),mergeWith:cr(),isFunction:Oo(),isObject:Dd(),isUndefined:vp(),camelCase:rd()},ff=wa.pull;function ah(e){var a=e;return typeof e=="string"&&(a=window.document.getElementById(e)),a}function oh(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function If(e){return oh(e).split(/\s+/)}function sh(e){var a,r=(a=document)===null||a===void 0||(a=a.documentElement)===null||a===void 0?void 0:a.style;if(!r)return e[0];for(var o in e)if(e[o]&&e[o]in r)return e[o];return e[0]}function Ns(e,a,r){var o=window.document.createElement(e);return a&&(o.className=a||""),r&&r.appendChild(o),o}function sc(e){var a=e.parentNode;a&&a.removeChild(e)}function qu(e,a){if(e.classList!==void 0)for(var r=If(a),o=0,u=r.length;o<u;o++)e.classList.add(r[o]);else if(!Ld(e,a)){var c=jc(e);nd(e,(c?c+" ":"")+a)}}function gp(e,a){if(e.classList!==void 0){var r=If(a);r.forEach(function(o){e.classList.remove(o)})}else nd(e,oh((" "+jc(e)+" ").replace(" "+a+" "," ")))}function Ld(e,a){if(e.classList!==void 0)return e.classList.contains(a);var r=jc(e);return r.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(r)}function nd(e,a){e instanceof HTMLElement?e.className=a:e.className.baseVal=a}function jc(e){return e instanceof SVGElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function hf(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}var uh=sh(["transform","WebkitTransform"]);function mp(e,a){e.style[uh]=a}function Pf(){if(typeof Event=="function")window.dispatchEvent(new Event("resize"));else{var e=window.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(e)}}function fm(e){var a=["padding: "+(e.height/2-8)+"px "+e.width/2+"px;","line-height: "+e.height+"px;","background-image: url("+e.toDataURL()+");"];console.log(`%c
`,a.join(""))}function id(){var e,a=window.document.querySelector('meta[name="viewport"]');if(!a)return 1;var r=(e=a.content)===null||e===void 0?void 0:e.split(","),o=r.find(function(u){var c=u.split("="),p=(0,Vi.Z)(c,1),g=p[0];return g==="initial-scale"});return o?o.split("=")[1]*1:1}var Ps=id()<1?1:window.devicePixelRatio;function yp(e,a){e.setAttribute("style","".concat(e.style.cssText).concat(a))}function Ph(e){return e.split(";").map(function(a){return a.trim()}).filter(function(a){return a})}function Bd(e,a){var r,o=Ph((r=e.getAttribute("style"))!==null&&r!==void 0?r:""),u=Ph(a),c=ff.apply(void 0,[o].concat((0,Sn.Z)(u)));e.setAttribute("style",c.join(";"))}function _p(e){return Object.entries(e).map(function(a){var r=(0,Vi.Z)(a,2),o=r[0],u=r[1];return"".concat(o,": ").concat(u)}).join(";")}function xp(e,a){return{left:e.left-a.left,top:e.top-a.top,right:a.left+a.width-e.left-e.width,bottom:a.top+a.height-e.top-e.height}}function yv(e,a){e.checked=a,a?e.setAttribute("checked","true"):e.removeAttribute("checked")}function Wc(e){e.innerHTML=""}function Nd(e){e.setAttribute("draggable","false")}function lh(e,a){if(typeof a=="string"){var r=document.createElement("div");for(r.innerHTML=a;r.firstChild;)e.append(r.firstChild)}else Array.isArray(a)?e.append.apply(e,(0,Sn.Z)(a)):e.append(a)}function rs(e,a){for(var r=Array.isArray(a)?a:[a],o=e;o instanceof Element&&o!==window.document.body;){var u,c;if(r.find(function(p){var g;return(g=o)===null||g===void 0?void 0:g.matches(p)}))return o;o=(u=(c=o)===null||c===void 0?void 0:c.parentElement)!==null&&u!==void 0?u:null}}var ch;function Ac(e){return typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap}function uc(){return typeof importScripts=="function"}var co=uc()?function(){return self.worker&&self.worker.referrer}:function(){return(window.location.protocol==="blob:"?window.parent:window).location.href},Xo=(ch=navigator)===null||ch===void 0?void 0:ch.userAgent,mo=!!Xo.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),ad=Xo.indexOf("Android")>-1||Xo.indexOf("Adr")>-1;function Of(){for(var e=Xo,a=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],r=!0,o=0,u=a;o<u.length;o++){var c=u[o];if(e.indexOf(c)>0){r=!1;break}}return r}function bp(e,a){e.forEach(function(r){a[r]&&(a[r]=a[r].bind(a))})}var _v=null;function ga(e){var a=[1/0,1/0,-1/0,-1/0];return Nr(e,function(r){a[0]>r[0]&&(a[0]=r[0]),a[1]>r[1]&&(a[1]=r[1]),a[2]<r[0]&&(a[2]=r[0]),a[3]<r[1]&&(a[3]=r[1])}),a}ga.default=ga;var Sp=ga;function Gc(e){return typeof e=="number"}var Hs=2*Math.PI*6378137/2;function ws(e,a){var r=(0,Vi.Z)(a,4),o=r[0],u=r[1],c=r[2],p=r[3];return e.lng>o&&e.lng<=c&&e.lat>u&&e.lat<=p}function fh(e){var a=[1/0,1/0,-1/0,-1/0];return e.forEach(function(r){var o=r.coordinates;od(a,o)}),a}function od(e,a){return Array.isArray(a[0])?a.forEach(function(r){od(e,r)}):(e[0]>a[0]&&(e[0]=a[0]),e[1]>a[1]&&(e[1]=a[1]),e[2]<a[0]&&(e[2]=a[0]),e[3]<a[1]&&(e[3]=a[1])),e}function Os(e,a){return zi(e,a)}function zi(e,a){return Array.isArray(e[0])?e.map(function(r){return zi(r,a)}):a(e)}function ju(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{enable:!0,decimal:1};e=Vo(e,a);var o=e[0],u=e[1],c=o*Hs/180,p=Math.log(Math.tan((90+u)*Math.PI/360))/(Math.PI/180);return p=p*Hs/180,r.enable&&(c=Number(c.toFixed(r.decimal)),p=Number(p.toFixed(r.decimal))),e.length===3?[c,p,e[2]]:[c,p]}function Xc(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,r=e[0],o=e[1],u=r/Hs*180,c=o/Hs*180;return c=180/Math.PI*(2*Math.atan(Math.exp(c*Math.PI/180))-Math.PI/2),a!=null&&(u=Number(u.toFixed(a)),c=Number(c.toFixed(a))),e.length===3?[u,c,e[2]]:[u,c]}function kf(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function cl(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function Vo(e,a){if(a===!1)return e;var r=kf(e[0]),o=cl(e[1]);return o>85&&(o=85),o<-85&&(o=-85),e.length===3?[r,o,e[2]]:[r,o]}function fu(e){var a=85.0511287798,r=Math.max(Math.min(a,e[1]),-a),o=256<<20,u=Math.PI/180,c=e[0]*u,p=r*u;p=Math.log(Math.tan(Math.PI/4+p/2));var g=.5/Math.PI,y=.5,S=-.5/Math.PI;return u=.5,c=o*(g*c+y),p=o*(S*p+u),[Math.floor(c),Math.floor(p)]}function Si(e){var a=.5/Math.PI,r=.5,o=-.5/Math.PI,u=.5,c=256<<20,p=_slicedToArray(e,2),g=p[0],y=p[1];g=(g/c-r)/a,y=(y/c-u)/o,y=(Math.atan(Math.pow(Math.E,y))-Math.PI/4)*2,u=Math.PI/180;var S=y/u,O=g/u;return[O,S]}function Zl(e,a){var r=85.0511287798,o=Math.PI/180,u=6378137;return a=Math.max(Math.min(r,a),-r),e*=o,a*=o,a=Math.log(Math.tan(Math.PI/4+a/2)),[e*u,a*u]}function hh(e,a){var r=Math.PI/180,o=6378137,u=e/o/r,c=2*(Math.atan(Math.exp(a/o))-Math.PI/4)/r;return[u,c]}function Oh(e,a,r){var o=wt(a[1]-e[1]),u=wt(a[0]-e[0]),c=wt(e[1]),p=wt(a[1]),g=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(c)*Math.cos(p);return Re(2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)),r="meters")}function Tc(e){var a=Math.PI/180,r=85.0511287798,o=6378137,u=Math.max(Math.min(r,e[1]),-r),c=Math.sin(u*a),p=o*e[0]*a,g=o*Math.log((1+c)/(1-c))/2;return[p,g]}function bu(e,a){var r=Math.abs(e[1][1]-e[0][1])*a,o=Math.abs(e[1][0]-e[0][0])*a;return[[e[0][0]-o,e[0][1]-r],[e[1][0]+o,e[1][1]+r]]}function Ep(e,a){return e[0][0]<=a[0][0]&&e[0][1]<=a[0][1]&&e[1][0]>=a[1][0]&&e[1][1]>=a[1][1]}function Mc(e){return[[e[0],e[1]],[e[2],e[3]]]}function eu(e){var a=fl(e,[0,0]);return[e[0]/a,e[1]/a]}function fl(e,a){return Math.sqrt(Math.pow(e[0]-a[0],2)+Math.pow(e[1]-a[1],2))}function xv(e,a){return e[0]*a[0]+e[1]*a[1]}function kh(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Fh(e,a){return Math.acos(xv(e,a)/(kh(e)*kh(a)))*180/Math.PI}function zd(e,a){return a[0]>0?a[1]>0?90-Math.atan(a[1]/a[0])*180/Math.PI:90+Math.atan(-a[1]/a[0])*180/Math.PI:a[1]<0?180+(90-Math.atan(a[1]/a[0])*180/Math.PI):270+Math.atan(a[1]/-a[0])*180/Math.PI}function lc(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;if(!(!e||e.length<2)){for(var r=[0,1],o=0,u=[],c=0;c<e.length-1;c++){var p=e[c],g=e[c+1],y=fl(p,g);o+=y;var S=[p[0]-g[0],p[1]-g[1]],O=zd(r,S);if(c>0){var D=u[c-1].rotation;D-O>360-D+O&&(O=O+360)}u.push({start:p,end:g,dis:y,rotation:O,duration:0})}return u.map(function(V){V.duration=a*(V.dis/o)}),u}}function tu(e){if(Gc(e[0]))return e;if(Gc(e[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(Gc(e[0][0][0])){var a=e,r=0,o=0,u=0;return a.forEach(function(c){c.forEach(function(p){r+=p[0],o+=p[1],u++})}),[r/u,o/u,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function $a(e){for(var a=e[0],r=e[1],o=e[0],u=e[1],c=0,p=0,g=0,y=0;y<e.length;y+=2){var S=e[y],O=e[y+1];S&&O&&(a=Math.max(S,a),r=Math.max(O,r),o=Math.min(S,o),u=Math.min(O,u),c+=S,p+=O,g++)}return{center:[c/g,p/g],radius:Math.sqrt(Math.pow(a-o,2)+Math.pow(r-u,2))/2}}function Cs(e){return Sp(Vt([De(e)]))}function Ql(e){var a=131,r=137,o=0;e+="x";for(var u=Math.floor(9007199254740991/r),c=0;c<e.length;c++)o>u&&(o=Math.floor(o/r)),o=o*a+e.charCodeAt(c);return o}function Wu(e){e=e.toString();for(var a=5381,r=e.length;r;)a=a*33^e.charCodeAt(--r);return a>>>0}function Ff(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var a=Math.random()*16|0,r=e==="x"?a:a&3|8;return r.toString(16)})}var Rc=function(e){return e["GAODE1.x"]="GAODE1.x",e["GAODE2.x"]="GAODE2.x",e.MAPBOX="MAPBOX",e.DEFAULT="DEFAUlTMAP",e.SIMPLE="SIMPLE",e.GLOBEL="GLOBEL",e}({});function Qu(e,a,r,o,u){var c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:30,p=arguments.length>6?arguments[6]:void 0,g=r;return p&&(g=Math.round(r*(c-1))/(c-1)),o?Ei(e,a,g,o,u):Ei(e,a,g,.314,u)}function Su(e,a){var r=1-a;return(e[0]*r+e[1]*a)*r+(e[1]*r+e[2]*a)*a}function Dh(e,a){return Math.sqrt(Math.pow(e[0]-a[0],2)+Math.pow(e[1]-a[1],2))}function ea(e,a,r){var o=[a[0]-e[0],a[1]-e[1]],u=Dh(o,[0,0]),c=Math.atan2(o[1],o[0]),p=u/2/Math.cos(r),g=c+r,y=[p*Math.cos(g)+e[0],p*Math.sin(g)+e[1]];return y}function Ei(e,a,r,o,u){if(u===MapType["GAODE2.x"]){var c=amap2Project(e[0],e[1]),p=amap2Project(a[0],a[1]),g=ea(c,p,o),y=[c[0],g[0],p[0]],S=[c[1],g[1],p[1]];return[].concat(_toConsumableArray(amap2UnProject(Su(y,r),Su(S,r))),[0])}else{var O=ea(e,a,o),D=[e[0],O[0],a[0]],V=[e[1],O[1],a[1]];return[Su(D,r),Su(V,r),0]}}function wl(e,a,r,o,u){var c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:30,p=arguments.length>6?arguments[6]:void 0,g=r;return p&&(g=Math.round(r*29)/29),cc(e,a,g,u)}function Ju(e,a){var r=[a[0]-e[0],a[1]-e[1]],o=calDistance(r,[0,0]),u=Math.atan2(r[1],r[0]),c=.314,p=o/2/Math.cos(c),g=u+c,y=[p*Math.cos(g)+e[0],p*Math.sin(g)+e[1]];return y}function Gu(e,a){var r=1-a;return(e[0]*r+e[1]*a)*r+(e[1]*r+e[2]*a)*a}function As(e,a){var r=[e[0]-a[0],e[1]-a[1]],o=[Math.sin(r[0]/2),Math.sin(r[1]/2)],u=o[1]*o[1]+Math.cos(e[1])*Math.cos(a[1])*o[0]*o[0];return 2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}function cc(e,a,r,o){var u=[degreesToRadians(e[0]),degreesToRadians(e[1])],c=[degreesToRadians(a[0]),degreesToRadians(a[1])];if(o==="GAODE2.x"){var p=Ju(u,c),g=[u[0],p[0],c[0]],y=[u[1],p[1],c[1]];return[Gu(g,r),Gu(y,r),0]}else{var S=As(u,c);if(Math.abs(S-Math.PI)<.001)return[(1-r)*u[0]+r*c[0],(1-r)*u[1]+r*c[1]];var O=Math.sin((1-r)*S)/Math.sin(S),D=Math.sin(r*S)/Math.sin(S),V=[Math.sin(u[0]),Math.sin(u[1])],H=[Math.cos(u[0]),Math.cos(u[1])],ue=[Math.sin(c[0]),Math.sin(c[1])],le=[Math.cos(c[0]),Math.cos(c[1])],we=O*H[1]*H[0]+D*le[1]*le[0],Ne=O*H[1]*V[0]+D*le[1]*ue[0],dt=O*V[1]+D*ue[1];return[radiansToDegrees(Math.atan2(Ne,we)),radiansToDegrees(Math.atan2(dt,Math.sqrt(we*we+Ne*Ne)))]}}function Df(e,a){for(var r=0,o=[],u=0;u<e.length-1;u++){var c=e[u],p=e[u+1],g=zo(c,p),y=r;r+=g,o.push({p1:c,p2:p,totalDistance:r,distance:g,lastTotalDistance:y})}for(var S=r*a,O,D,V=0,H=o;V<H.length;V++){var ue=H[V],le=ue.totalDistance;if(le>S){var we=ue.p1,Ne=ue.p2,dt=(S-ue.lastTotalDistance)/ue.distance,mt=ph(Ne,we,dt);O=mt[0],D=mt[1];break}}return{lng:O,lat:D,height:0}}function ph(e,a,r){return[e[0]*r+a[0]*(1-r),e[1]*r+a[1]*(1-r)]}function zo(e,a){return Math.sqrt(Math.pow(e[0]-a[0],2)+Math.pow(e[1]-a[1],2))}function js(e,a){var r=a.featureId,o=e.data.dataArray;return typeof r=="number"&&(o=o.filter(function(u){var c=u.id;return c===r})),o.map(function(u){var c=dh(u,a);return _objectSpread(_objectSpread({},u),c)})}function bv(e,a){return new Promise(function(r){e.inited?r(js(e,a)):e.once("update",function(){r(js(e,a))})})}function dh(e,a){var r=a.offset,o=a.shape,u=a.thetaOffset,c=a.mapVersion,p=a.segmentNumber,g=p===void 0?30:p,y=a.autoFit,S=y===void 0?!0:y,O=e.coordinates;if(o==="line")return pathLineAtOffset(O,r);var D=O[0],V=O[1],H=typeof u=="string"?e[u]||0:u,ue;switch(o){case"arc":ue=arcLineAtOffset;break;case"greatcircle":ue=greatCircleLineAtOffset;break;default:ue=arcLineAtOffset}var le=ue(D,V,r,H,c,g,S),we=_slicedToArray(le,3),Ne=we[0],dt=we[1],mt=we[2];return{lng:Ne,lat:dt,height:mt}}var Lf=function(){function e(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,r=arguments.length>1?arguments[1]:void 0;(0,Rt.Z)(this,e),this.limit=a,this.destroy=r||this.defaultDestroy,this.order=[],this.clear()}return(0,at.Z)(e,[{key:"clear",value:function(){var r=this;this.order.forEach(function(o){r.delete(o)}),this.cache={},this.order=[]}},{key:"get",value:function(r){var o=this.cache[r];return o&&(this.deleteOrder(r),this.appendOrder(r)),o}},{key:"set",value:function(r,o){this.cache[r]?(this.delete(r),this.cache[r]=o,this.appendOrder(r)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[r]=o,this.appendOrder(r))}},{key:"delete",value:function(r){var o=this.cache[r];o&&(this.deleteCache(r),this.deleteOrder(r),this.destroy(o,r))}},{key:"deleteCache",value:function(r){delete this.cache[r]}},{key:"deleteOrder",value:function(r){var o=this.order.findIndex(function(u){return u===r});o>=0&&this.order.splice(o,1)}},{key:"appendOrder",value:function(r){this.order.push(r)}},{key:"defaultDestroy",value:function(r,o){return null}}]),e}();function fc(e){if(e.length===0)throw new Error("max requires at least one data point");for(var a=e[0],r=1;r<e.length;r++)e[r]>a&&(a=e[r]);return a*1}function Ra(e){if(e.length===0)throw new Error("min requires at least one data point");for(var a=e[0],r=1;r<e.length;r++)e[r]<a&&(a=e[r]);return a*1}function vh(e){if(e.length===0)return 0;for(var a=e[0]*1,r=1;r<e.length;r++)a+=e[r]*1;return a}function $c(e){if(e.length===0)throw new Error("mean requires at least one data point");return vh(e)/e.length}function sd(e){if(e.length===0)throw new Error("mean requires at least one data point");if(e.length<3)return e[0];e.sort();for(var a=e[0],r=NaN,o=0,u=1,c=1;c<e.length+1;c++)e[c]!==a?(u>o&&(o=u,r=a),u=1,a=e[c]):u++;return r*1}var Bf={min:Ra,max:fc,mean:$c,sum:vh,mode:sd};function Lh(e,a){return e.map(function(r){return r[a]})}function Ud(e,a){return Bf[e](a)}var fn=F(15861),vr=F(97326),Fe=F(4942),Yc=F(64687),$t=F.n(Yc);function ud(e,a){a===void 0&&(a={});var r=Number(e[0]),o=Number(e[1]),u=Number(e[2]),c=Number(e[3]);if(e.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var p=[r,o],g=[r,c],y=[u,c],S=[u,o];return Me([[p,S,y,g,p]],a.properties,{bbox:e,id:a.id})}var Ws=F(26729),Vl=F.n(Ws),Bh=function(e){return e.Realtime="realtime",e.Overlap="overlap",e.Replace="replace",e}({}),Cl=function(e){return e.Loading="Loading",e.Loaded="Loaded",e.Failure="Failure",e.Cancelled="Cancelled",e}({}),wp=0,Cp=1,b=2;function T(e){e.forEach(function(a){a.isCurrent&&(a.isVisible=a.isLoaded)})}function C(e){e.forEach(function(a){a.properties.state=wp}),e.forEach(function(a){a.isCurrent&&!Z(a)&&q(a)}),e.forEach(function(a){a.isVisible=!!(a.properties.state&b)})}function I(e){e.forEach(function(r){r.properties.state=wp}),e.forEach(function(r){r.isCurrent&&Z(r)});var a=e.slice().sort(function(r,o){return r.z-o.z});a.forEach(function(r){r.isVisible=!!(r.properties.state&b),r.children.length&&(r.isVisible||r.properties.state&Cp)?r.children.forEach(function(o){o.properties.state=Cp}):r.isCurrent&&q(r)})}function Z(e){for(;e;){if(e.isLoaded)return e.properties.state|=b,!0;e=e.parent}return!1}function q(e){e.children.forEach(function(a){a.isLoaded?a.properties.state|=b:q(a)})}var re,_e=256,qe=[-1/0,-1/0,1/0,1/0],yt=.2,Ut=5,Zt=(re={},(0,Fe.Z)(re,Bh.Realtime,T),(0,Fe.Z)(re,Bh.Overlap,C),(0,Fe.Z)(re,Bh.Replace,I),re),Ht=function(){};function sr(e,a,r){var o=Math.floor((e+180)/360*Math.pow(2,r)),u=Math.floor((1-Math.log(Math.tan(a*Math.PI/180)+1/Math.cos(a*Math.PI/180))/Math.PI)/2*Math.pow(2,r));return[o,u]}function or(e,a,r){var o=e/Math.pow(2,r)*360-180,u=Math.PI-2*Math.PI*a/Math.pow(2,r),c=180/Math.PI*Math.atan(.5*(Math.exp(u)-Math.exp(-u)));return[o,c]}var Er=function(a,r,o){var u=or(a,r,o),c=(0,Vi.Z)(u,2),p=c[0],g=c[1],y=or(a+1,r+1,o),S=(0,Vi.Z)(y,2),O=S[0],D=S[1];return[p,D,O,g]};function rr(e){var a=e.zoom,r=e.latLonBounds,o=e.maxZoom,u=o===void 0?1/0:o,c=e.minZoom,p=c===void 0?0:c,g=e.zoomOffset,y=g===void 0?0:g,S=e.extent,O=S===void 0?qe:S,D=Math.ceil(a)+y;if(Number.isFinite(p)&&D<p)return[];Number.isFinite(u)&&D>u&&(D=u);for(var V=(0,Vi.Z)(r,4),H=V[0],ue=V[1],le=V[2],we=V[3],Ne=[Math.max(H,O[0]),Math.max(ue,O[1]),Math.min(le,O[2]),Math.min(we,O[3])],dt=[],mt=sr(Ne[0],Ne[1],D),Lt=(0,Vi.Z)(mt,2),Wt=Lt[0],qt=Lt[1],ir=sr(Ne[2],Ne[3],D),Sr=(0,Vi.Z)(ir,2),Br=Sr[0],Jr=Sr[1],en=Wt;en<=Br;en++)for(var Kn=Jr;Kn<=qt;Kn++)dt.push({x:en,y:Kn,z:D});var si=(Br+Wt)/2,Pi=(qt+Jr)/2,so=function(Ss,Ru){return Math.abs(Ss-si)+Math.abs(Ru-Pi)};return dt.sort(function(bs,Ss){return so(bs.x,bs.y)-so(Ss.x,Ss.y)}),dt}var wr=function(a,r,o){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,c=Math.pow(2,o),p=c-1,g=c,y=a,S=r;return u&&(y<0?y=y+g:y>p&&(y=y%g)),{warpX:y,warpY:S}};function Fr(e){var a=Wr();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function Wr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var hn=function(e){(0,mr.Z)(r,e);var a=Fr(r);function r(o){var u;(0,Rt.Z)(this,r),u=a.call(this),(0,Fe.Z)((0,vr.Z)(u),"tileSize",256),(0,Fe.Z)((0,vr.Z)(u),"isVisible",!1),(0,Fe.Z)((0,vr.Z)(u),"isCurrent",!1),(0,Fe.Z)((0,vr.Z)(u),"isVisibleChange",!1),(0,Fe.Z)((0,vr.Z)(u),"loadedLayers",0),(0,Fe.Z)((0,vr.Z)(u),"isLayerLoaded",!1),(0,Fe.Z)((0,vr.Z)(u),"isLoad",!1),(0,Fe.Z)((0,vr.Z)(u),"isChildLoad",!1),(0,Fe.Z)((0,vr.Z)(u),"parent",null),(0,Fe.Z)((0,vr.Z)(u),"children",[]),(0,Fe.Z)((0,vr.Z)(u),"data",null),(0,Fe.Z)((0,vr.Z)(u),"properties",{}),(0,Fe.Z)((0,vr.Z)(u),"loadDataId",0);var c=o.x,p=o.y,g=o.z,y=o.tileSize,S=o.warp,O=S===void 0?!0:S;return u.x=c,u.y=p,u.z=g,u.warp=O||!0,u.tileSize=y,u}return(0,at.Z)(r,[{key:"isLoading",get:function(){return this.loadStatus===Cl.Loading}},{key:"isLoaded",get:function(){return this.loadStatus===Cl.Loaded}},{key:"isFailure",get:function(){return this.loadStatus===Cl.Failure}},{key:"setTileLayerLoaded",value:function(){this.isLayerLoaded=!0}},{key:"isCancelled",get:function(){return this.loadStatus===Cl.Cancelled}},{key:"isDone",get:function(){return[Cl.Loaded,Cl.Cancelled,Cl.Failure].includes(this.loadStatus)}},{key:"bounds",get:function(){return Er(this.x,this.y,this.z)}},{key:"bboxPolygon",get:function(){var u=(0,Vi.Z)(this.bounds,4),c=u[0],p=u[1],g=u[2],y=u[3],S=[(g-c)/2,(y-p)/2],O=ud(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:S,meta:`
      `.concat(this.key,`
      `)}});return O}},{key:"key",get:function(){var u="".concat(this.x,"_").concat(this.y,"_").concat(this.z);return u}},{key:"layerLoad",value:function(){this.loadedLayers++,this.emit("layerLoaded")}},{key:"loadData",value:function(){var o=(0,fn.Z)($t().mark(function c(p){var g,y,S,O,D,V,H,ue,le,we,Ne,dt,mt,Lt,Wt,qt,ir;return $t().wrap(function(Br){for(;;)switch(Br.prev=Br.next){case 0:return g=p.getData,y=p.onLoad,S=p.onError,this.loadDataId++,O=this.loadDataId,this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=Cl.Loading,D=null,Br.prev=7,H=this.x,ue=this.y,le=this.z,we=this.bounds,Ne=this.tileSize,dt=this.warp,mt=wr(H,ue,le,dt),Lt=mt.warpX,Wt=mt.warpY,qt=this.abortController.signal,ir={x:Lt,y:Wt,z:le,bounds:we,tileSize:Ne,signal:qt,warp:dt},Br.next=14,g(ir,this);case 14:D=Br.sent,Br.next=20;break;case 17:Br.prev=17,Br.t0=Br.catch(7),V=Br.t0;case 20:if(O===this.loadDataId){Br.next=22;break}return Br.abrupt("return");case 22:if(!(this.isCancelled&&!D)){Br.next=24;break}return Br.abrupt("return");case 24:if(!(V||!D)){Br.next=28;break}return this.loadStatus=Cl.Failure,S(V,this),Br.abrupt("return");case 28:this.loadStatus=Cl.Loaded,this.data=D,y(this);case 31:case"end":return Br.stop()}},c,this,[[7,17]])}));function u(c){return o.apply(this,arguments)}return u}()},{key:"reloadData",value:function(u){this.isLoading&&this.abortLoad(),this.loadData(u)}},{key:"abortLoad",value:function(){this.isLoaded||this.isCancelled||(this.loadStatus=Cl.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}}]),r}(Ws.EventEmitter),an=function(a,r){var o=Mc(a),u=bu(o,r),c=360*3-180,p=85.0511287798065,g=[Math.max(u[0][0],-c),Math.max(u[0][1],-p),Math.min(u[1][0],c),Math.min(u[1][1],p)];return g},bn=function(a,r){var o=Mc(a),u=Mc(r),c=Ep(o,u);return c};function In(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=pi(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function pi(e,a){if(e){if(typeof e=="string")return ei(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ei(e,a)}}function ei(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}function Ii(e){var a=ia();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function ia(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var la=wa.throttle,Ki=function(e){return e.TilesLoadStart="tiles-load-start",e.TileLoaded="tile-loaded",e.TileError="tile-error",e.TileUnload="tile-unload",e.TileUpdate="tile-update",e.TilesLoadFinished="tiles-load-finished",e}({}),bo=function(e){(0,mr.Z)(r,e);var a=Ii(r);function r(o){var u;return(0,Rt.Z)(this,r),u=a.call(this),(0,Fe.Z)((0,vr.Z)(u),"currentTiles",[]),(0,Fe.Z)((0,vr.Z)(u),"cacheTiles",new Map),(0,Fe.Z)((0,vr.Z)(u),"throttleUpdate",la(function(c,p){u.update(c,p)},16)),(0,Fe.Z)((0,vr.Z)(u),"onTileLoad",function(c){u.emit(Ki.TileLoaded,c),u.updateTileVisible(),u.loadFinished()}),(0,Fe.Z)((0,vr.Z)(u),"onTileError",function(c,p){u.emit(Ki.TileError,{error:c,tile:p}),u.updateTileVisible(),u.loadFinished()}),(0,Fe.Z)((0,vr.Z)(u),"onTileUnload",function(c){u.emit(Ki.TileUnload,c),u.loadFinished()}),u.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:qe,getTileData:Ht,warp:!0,updateStrategy:Bh.Replace},u.updateOptions(o),u}return(0,at.Z)(r,[{key:"isLoaded",get:function(){return this.currentTiles.every(function(u){return u.isDone})}},{key:"tiles",get:function(){var u=Array.from(this.cacheTiles.values()).sort(function(c,p){return c.z-p.z});return u}},{key:"updateOptions",value:function(u){var c=u.minZoom===void 0?this.options.minZoom:Math.ceil(u.minZoom),p=u.maxZoom===void 0?this.options.maxZoom:Math.floor(u.maxZoom);this.options=(0,te.Z)((0,te.Z)((0,te.Z)({},this.options),u),{},{minZoom:c,maxZoom:p})}},{key:"update",value:function(u,c){var p=this,g=Math.max(0,Math.ceil(u));if(!(this.lastViewStates&&this.lastViewStates.zoom===g&&bn(this.lastViewStates.latLonBoundsBuffer,c))){var y=an(c,yt);this.lastViewStates={zoom:g,latLonBounds:c,latLonBoundsBuffer:y},this.currentZoom=g;var S=!1,O=this.getTileIndices(g,y).filter(function(D){return p.options.warp||D.x>=0&&D.x<Math.pow(2,g)});this.emit(Ki.TilesLoadStart),this.currentTiles=O.map(function(D){var V=D.x,H=D.y,ue=D.z,le=p.getTile(V,H,ue);if(le){var we,Ne,dt=((we=le)===null||we===void 0?void 0:we.isFailure)||((Ne=le)===null||Ne===void 0?void 0:Ne.isCancelled);return dt&&le.loadData({getData:p.options.getTileData,onLoad:p.onTileLoad,onError:p.onTileError}),le}return le=p.createTile(V,H,ue),S=!0,le}),S&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}}},{key:"reloadAll",value:function(){var u=In(this.cacheTiles),c;try{for(u.s();!(c=u.n()).done;){var p=(0,Vi.Z)(c.value,2),g=p[0],y=p[1];if(!this.currentTiles.includes(y)){this.cacheTiles.delete(g),this.onTileUnload(y);return}this.onTileUnload(y),y.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}catch(S){u.e(S)}finally{u.f()}}},{key:"reloadTileById",value:function(u,c,p){var g=this.cacheTiles.get("".concat(c,",").concat(p,",").concat(u));g&&(this.onTileUnload(g),g.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}))}},{key:"reloadTileByLnglat",value:function(u,c,p){var g=this.getTileByLngLat(u,c,p);g&&this.reloadTileById(g.z,g.x,g.y)}},{key:"reloadTileByExtent",value:function(u,c){var p=this,g=this.getTileIndices(c,u);g.forEach(function(y){p.reloadTileById(y.z,y.x,y.y)})}},{key:"pruneRequests",value:function(){var u=[],c=In(this.cacheTiles.values()),p;try{for(c.s();!(p=c.n()).done;){var g=p.value;g.isLoading&&!g.isCurrent&&!g.isVisible&&u.push(g)}}catch(S){c.e(S)}finally{c.f()}for(;u.length>0;){var y=u.shift();y.abortLoad()}}},{key:"getTileByLngLat",value:function(u,c,p){var g=this.options.zoomOffset,y=Math.ceil(p)+g,S=sr(u,c,y),O=this.tiles.filter(function(D){return D.key==="".concat(S[0],"_").concat(S[1],"_").concat(y)});return O[0]}},{key:"getTileExtent",value:function(u,c){return this.getTileIndices(c,u)}},{key:"getTileByZXY",value:function(u,c,p){var g=this.tiles.filter(function(y){return y.key==="".concat(c,"_").concat(p,"_").concat(u)});return g[0]}},{key:"clear",value:function(){var u=In(this.cacheTiles.values()),c;try{for(u.s();!(c=u.n()).done;){var p=c.value;p.isLoading?p.abortLoad():this.onTileUnload(p)}}catch(g){u.e(g)}finally{u.f()}this.lastViewStates=void 0,this.cacheTiles.clear(),this.currentTiles=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners()}},{key:"updateTileVisible",value:function(){var u=this.options.updateStrategy,c=new Map,p=In(this.cacheTiles.values()),g;try{for(p.s();!(g=p.n()).done;){var y=g.value;c.set(y.key,y.isVisible),y.isCurrent=!1,y.isVisible=!1}}catch(ue){p.e(ue)}finally{p.f()}var S=In(this.currentTiles),O;try{for(S.s();!(O=S.n()).done;){var D=O.value;D.isCurrent=!0,D.isVisible=!0}}catch(ue){S.e(ue)}finally{S.f()}var V=Array.from(this.cacheTiles.values());typeof u=="function"?u(V):Zt[u](V);var H=!1;Array.from(this.cacheTiles.values()).forEach(function(ue){ue.isVisible!==c.get(ue.key)?(ue.isVisibleChange=!0,H=!0):ue.isVisibleChange=!1}),H&&this.emit(Ki.TileUpdate)}},{key:"getTileIndices",value:function(u,c){var p=this.options,g=p.tileSize,y=p.extent,S=p.zoomOffset,O=Math.floor(this.options.maxZoom),D=Math.ceil(this.options.minZoom),V=rr({maxZoom:O,minZoom:D,zoomOffset:S,tileSize:g,zoom:u,latLonBounds:c,extent:y});return V}},{key:"getTileId",value:function(u,c,p){var g="".concat(u,",").concat(c,",").concat(p);return g}},{key:"loadFinished",value:function(){var u=!this.currentTiles.some(function(c){return!c.isDone});return u&&this.emit(Ki.TilesLoadFinished),u}},{key:"getTile",value:function(u,c,p){var g=this.getTileId(u,c,p),y=this.cacheTiles.get(g);return y}},{key:"createTile",value:function(u,c,p){var g=this.getTileId(u,c,p),y=new hn({x:u,y:c,z:p,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(g,y),y.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),y}},{key:"resizeCacheTiles",value:function(){var u=Ut*this.currentTiles.length,c=this.cacheTiles.size>u;if(c){var p=In(this.cacheTiles),g;try{for(p.s();!(g=p.n()).done;){var y=(0,Vi.Z)(g.value,2),S=y[0],O=y[1];if(!O.isVisible&&!this.currentTiles.includes(O)&&(this.cacheTiles.delete(S),this.onTileUnload(O)),this.cacheTiles.size<=u)break}}catch(D){p.e(D)}finally{p.f()}}this.rebuildTileTree()}},{key:"rebuildTileTree",value:function(){var u=In(this.cacheTiles.values()),c;try{for(u.s();!(c=u.n()).done;){var p=c.value;p.parent=null,p.children.length=0}}catch(D){u.e(D)}finally{u.f()}var g=In(this.cacheTiles.values()),y;try{for(g.s();!(y=g.n()).done;){var S=y.value,O=this.getNearestAncestor(S.x,S.y,S.z);S.parent=O,O!=null&&O.children&&O.children.push(S)}}catch(D){g.e(D)}finally{g.f()}}},{key:"getNearestAncestor",value:function(u,c,p){for(;p>this.options.minZoom;){u=Math.floor(u/2),c=Math.floor(c/2),p=p-1;var g=this.getTile(u,c,p);if(g)return g}return null}}]),r}(Vl());function Ni(e){return/(?=.*{box})(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(e)}function Oa(e){var a=[],r=/\{([a-z])-([a-z])\}/.exec(e);if(r){var o=r[1].charCodeAt(0),u=r[2].charCodeAt(0),c;for(c=o;c<=u;++c)a.push(e.replace(r[0],String.fromCharCode(c)));return a}if(r=/\{(\d+)-(\d+)\}/.exec(e),r){for(var p=parseInt(r[2],10),g=parseInt(r[1],10);g<=p;g++)a.push(e.replace(r[0],g.toString()));return a}return a.push(e),a}function La(e,a){if(!e||!e.length)throw new Error("url is not allowed to be empty");var r=a.x,o=a.y,u=a.z,c=Oa(e),p=Math.abs(r+o)%c.length,g=vi(c[p])?"".concat(c[p],"/{z}/{x}/{y}"):c[p];return g.replace(/\{x\}/g,r.toString()).replace(/\{y\}/g,o.toString()).replace(/\{z\}/g,u.toString()).replace(/\{bbox\}/g,Er(r,o,u).join(",")).replace(/\{-y\}/g,(Math.pow(2,u)-o-1).toString())}function Ia(e,a){var r=a.x,o=a.y,u=a.z,c=a.layer,p=a.version,g=p===void 0?"1.0.0":p,y=a.style,S=y===void 0?"default":y,O=a.format,D=a.service,V=D===void 0?"WMTS":D,H=a.tileMatrixset,ue="".concat(e,"&SERVICE=").concat(V,"&REQUEST=GetTile&VERSION=").concat(g,"&LAYER=").concat(c,"&STYLE=").concat(S,"&TILEMATRIXSET=").concat(H,"&FORMAT=").concat(O,"&TILECOL=").concat(r,"&TILEROW=").concat(o,"&TILEMATRIX=").concat(u);return ue}function fa(e,a){if(!e)throw new Error(a||"web worker helper assertion failed.")}var Pa={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,document:typeof document!="undefined"&&document},Ca=Pa.self||Pa.window||{},pa=Pa.window||Pa.self||{},Eu=Pa.self||Pa.window||{},ks=Pa.document||{},Xu=typeof importScripts=="function",wu=typeof window!="undefined"&&typeof window.orientation!="undefined",Qo=function(){function e(a,r){var o=this;this.name=a,this.workerThread=r,this.isRunning=!0,this.resolve=function(){},this.reject=function(){},this.result=new Promise(function(u,c){o.resolve=u,o.reject=c})}return e.prototype.postMessage=function(a,r){this.workerThread.postMessage({source:"Main thread",type:a,payload:r})},e.prototype.done=function(a){fa(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.resolve(a)},e.prototype.error=function(a){fa(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.reject(a)},e}(),vs=Qo,Cu=new Map;function hu(e){fa(e.source&&!e.url||!e.source&&e.url);var a=Cu.get(e.source||e.url);return a||(e.url&&(a=Kc(e.url),Cu.set(e.url,a)),e.source&&(a=el(e.source),Cu.set(e.source,a))),fa(a),a}function Kc(e){if(!e.startsWith("http"))return e;var a=hc(e);return el(a)}function el(e){var a=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(a)}function hc(e){return`try {
  importScripts('`+e+`');
} catch (error) {
  console.error(error);
  throw error;
}`}function hl(e,a,r){a===void 0&&(a=!0);var o=r||new Set;if(e){if(Nf(e))o.add(e);else if(Nf(e.buffer))o.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(a&&typeof e=="object")for(var u in e)hl(e[u],a,o)}}return r===void 0?Array.from(o):[]}function Nf(e){return e?e instanceof ArrayBuffer||typeof MessagePort!="undefined"&&e instanceof MessagePort||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap||typeof OffscreenCanvas!="undefined"&&e instanceof OffscreenCanvas:!1}var pf=function(){},qc=function(){function e(a){this.terminated=!1,this.loadableURL="";var r=a.name,o=a.source,u=a.url;fa(o||u),this.name=r,this.source=o,this.url=u,this.onMessage=pf,this.onError=function(c){return console.log(c)},this.worker=this.createBrowserWorker()}return e.isSupported=function(){return typeof Worker!="undefined"},e.prototype.destroy=function(){this.onMessage=pf,this.onError=pf,this.worker.terminate(),this.terminated=!0},Object.defineProperty(e.prototype,"isRunning",{get:function(){return!!this.onMessage},enumerable:!1,configurable:!0}),e.prototype.postMessage=function(a,r){r=r||hl(a),this.worker.postMessage(a,r)},e.prototype.getErrorFromErrorEvent=function(a){var r="Failed to load ";return r+="worker "+this.name+" from "+this.url+". ",a.message&&(r+=a.message+" in "),a.lineno&&(r+=":"+a.lineno+":"+a.colno),new Error(r)},e.prototype.createBrowserWorker=function(){var a=this;this.loadableURL=hu({source:this.source,url:this.url});var r=new Worker(this.loadableURL,{name:this.name});return r.onmessage=function(o){o.data?a.onMessage(o.data):a.onError(new Error("No data received"))},r.onerror=function(o){a.onError(a.getErrorFromErrorEvent(o)),a.terminated=!0},r.onmessageerror=function(o){return console.error("worker "+a.name+", message error: "+o)},r},e}(),df=qc,pc=function(){return pc=Object.assign||function(e){for(var a,r=1,o=arguments.length;r<o;r++){a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},pc.apply(this,arguments)},dc=function(e,a,r,o){function u(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function g(O){try{S(o.next(O))}catch(D){p(D)}}function y(O){try{S(o.throw(O))}catch(D){p(D)}}function S(O){O.done?c(O.value):u(O.value).then(g,y)}S((o=o.apply(e,a||[])).next())})},vf=function(e,a){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,u,c,p;return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(S){return function(O){return y([S,O])}}function y(S){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,u&&(c=S[0]&2?u.return:S[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,S[1])).done)return c;switch(u=0,c&&(S=[S[0]&2,c.value]),S[0]){case 0:case 1:c=S;break;case 4:return r.label++,{value:S[1],done:!1};case 5:r.label++,u=S[1],S=[0];continue;case 7:S=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(S[0]===6||S[0]===2)){r=0;continue}if(S[0]===3&&(!c||S[1]>c[0]&&S[1]<c[3])){r.label=S[1];break}if(S[0]===6&&r.label<c[1]){r.label=c[1],c=S;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(S);break}c[2]&&r.ops.pop(),r.trys.pop();continue}S=a.call(e,r)}catch(O){S=[6,O],u=0}finally{o=c=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},ku=function(){function e(a){this.name="unnamed",this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=function(){},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=a.source,this.url=a.url,this.setProps(a)}return e.prototype.destroy=function(){this.idleQueue.forEach(function(a){return a.destroy()}),this.isDestroyed=!0},e.prototype.setProps=function(a){this.props=pc(pc({},this.props),a),a.name!==void 0&&(this.name=a.name),a.maxConcurrency!==void 0&&(this.maxConcurrency=a.maxConcurrency),a.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=a.maxMobileConcurrency),a.reuseWorkers!==void 0&&(this.reuseWorkers=a.reuseWorkers),a.onDebug!==void 0&&(this.onDebug=a.onDebug)},e.prototype.startJob=function(a,r,o){return r===void 0&&(r=function(u,c,p){return u.done(p)}),o===void 0&&(o=function(u,c){return u.error(c)}),dc(this,void 0,void 0,function(){var u,c=this;return vf(this,function(p){switch(p.label){case 0:return u=new Promise(function(g){return c.jobQueue.push({name:a,onMessage:r,onError:o,onStart:g}),c}),this.startQueuedJob(),[4,u];case 1:return[2,p.sent()]}})})},e.prototype.startQueuedJob=function(){return dc(this,void 0,void 0,function(){var a,r,o;return vf(this,function(u){switch(u.label){case 0:if(!this.jobQueue.length)return[2];if(a=this.getAvailableWorker(),!a)return[2];if(r=this.jobQueue.shift(),!r)return[3,4];this.onDebug({message:"Starting job",name:r.name,backlog:this.jobQueue.length,workerThread:a}),o=new vs(r.name,a),a.onMessage=function(c){return r.onMessage(o,c.type,c.payload)},a.onError=function(c){return r.onError(o,c)},r.onStart(o),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,o.result];case 2:return u.sent(),[3,4];case 3:return this.returnWorkerToQueue(a),[7];case 4:return[2]}})})},e.prototype.returnWorkerToQueue=function(a){var r=this.isDestroyed||!this.reuseWorkers||this.count>this.getMaxConcurrency();r?(a.destroy(),this.count--):this.idleQueue.push(a),this.isDestroyed||this.startQueuedJob()},e.prototype.getAvailableWorker=function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this.getMaxConcurrency()){this.count++;var a=this.name.toLowerCase()+" (#"+this.count+" of "+this.maxConcurrency+")";return new df({name:a,source:this.source,url:this.url})}return null},e.prototype.getMaxConcurrency=function(){return wu?this.maxMobileConcurrency:this.maxConcurrency},e}(),Ts=ku,ru=function(){return ru=Object.assign||function(e){for(var a,r=1,o=arguments.length;r<o;r++){a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},ru.apply(this,arguments)},Al=function(e){var a=typeof Symbol=="function"&&Symbol.iterator,r=a&&e[a],o=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")},Jl={maxConcurrency:3,maxMobileConcurrency:1,onDebug:function(){},reuseWorkers:!0},yo=function(){function e(a){this.workerPools=new Map,this.props=ru({},Jl),this.setProps(a),this.workerPools=new Map}return e.isSupported=function(){return df.isSupported()},e.getWorkerFarm=function(a){return a===void 0&&(a={}),e.workerFarm=e.workerFarm||new e({}),e.workerFarm.setProps(a),e.workerFarm},e.prototype.destroy=function(){var a,r;try{for(var o=Al(this.workerPools.values()),u=o.next();!u.done;u=o.next()){var c=u.value;c.destroy()}}catch(p){a={error:p}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}},e.prototype.setProps=function(a){var r,o;this.props=ru(ru({},this.props),a);try{for(var u=Al(this.workerPools.values()),c=u.next();!c.done;c=u.next()){var p=c.value;p.setProps(this.getWorkerPoolProps())}}catch(g){r={error:g}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}},e.prototype.getWorkerPool=function(a){var r=a.name,o=a.source,u=a.url,c=this.workerPools.get(r);return c||(c=new Ts({name:r,source:o,url:u}),c.setProps(this.getWorkerPoolProps()),this.workerPools.set(r,c)),c},e.prototype.getWorkerPoolProps=function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}},e}(),$u=null,Gs=new Map,gf=function(){function e(){}return Object.defineProperty(e,"onmessage",{set:function(a){self.onmessage=function(r){if(mf(r)){var o=r.data,u=o.type,c=o.payload;a(u,c)}}},enumerable:!1,configurable:!0}),e.addEventListener=function(a){var r=Gs.get(a);r||(r=function(o){if(mf(o)){var u=o.data,c=u.type,p=u.payload;a(c,p)}}),self.addEventListener("message",r)},e.removeEventListener=function(a){var r=Gs.get(a);Gs.delete(a),self.removeEventListener("message",r)},e.postMessage=function(a,r){if(self){var o={source:"Worker thread",type:a,payload:r},u=hl(r);self.postMessage(o,u)}},e}(),ld=null;function mf(e){var a=e.type,r=e.data;return a==="message"&&r&&typeof r.source=="string"&&r.source==="Main thread"}function Sv(e){return JSON.parse(Tl(e))}function Tl(e){var a=new Set;return JSON.stringify(e,function(r,o){if(typeof o=="object"&&o!==null){if(a.has(o))try{return JSON.parse(JSON.stringify(o))}catch(u){return}a.add(o)}return o})}function Hl(e){return""+e.name}function jl(e,a){a===void 0&&(a={});var r=a[e.id]||{},o=e.name+".worker.js",u=r.workerUrl;return a._workerType==="test"&&(u=e.module+"/dist/"+o),u||(u="https://unpkg.com/"+e.module+"/dist/"+o),assert(u),u}var zf=function(e,a,r,o){function u(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function g(O){try{S(o.next(O))}catch(D){p(D)}}function y(O){try{S(o.throw(O))}catch(D){p(D)}}function S(O){O.done?c(O.value):u(O.value).then(g,y)}S((o=o.apply(e,a||[])).next())})},Ap=function(e,a){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,u,c,p;return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(S){return function(O){return y([S,O])}}function y(S){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,u&&(c=S[0]&2?u.return:S[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,S[1])).done)return c;switch(u=0,c&&(S=[S[0]&2,c.value]),S[0]){case 0:case 1:c=S;break;case 4:return r.label++,{value:S[1],done:!1};case 5:r.label++,u=S[1],S=[0];continue;case 7:S=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(S[0]===6||S[0]===2)){r=0;continue}if(S[0]===3&&(!c||S[1]>c[0]&&S[1]<c[3])){r.label=S[1];break}if(S[0]===6&&r.label<c[1]){r.label=c[1],c=S;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(S);break}c[2]&&r.ops.pop(),r.trys.pop();continue}S=a.call(e,r)}catch(O){S=[6,O],u=0}finally{o=c=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}};function Uf(e,a){return WorkerFarm.isSupported()?e.worker&&(a==null?void 0:a.worker):!1}function Ml(e,a,r,o){return r===void 0&&(r={}),o===void 0&&(o={}),zf(this,void 0,void 0,function(){var u,c,p,g,y,S,O,D;return Ap(this,function(V){switch(V.label){case 0:return u=getWorkerName(e),c=getWorkerURL(e,r),p=WorkerFarm.getWorkerFarm(r),g=p.getWorkerPool({name:u,url:c}),y=r.jobName||e.name,[4,g.startJob(y,Ev.bind(null,o))];case 1:return S=V.sent(),O=removeNontransferableOptions(r),S.postMessage("process",{input:a,options:O}),[4,S.result];case 2:return D=V.sent(),[2,D.result]}})})}function Ev(e,a,r,o){return zf(this,void 0,void 0,function(){var u,c,p,g,y,S,O;return Ap(this,function(D){switch(D.label){case 0:switch(u=r,u){case"done":return[3,1];case"error":return[3,2];case"process":return[3,3]}return[3,8];case 1:return a.done(o),[3,9];case 2:return a.error(new Error(o.error)),[3,9];case 3:c=o.id,p=o.input,g=o.options,D.label=4;case 4:return D.trys.push([4,6,,7]),e.process?[4,e.process(p,g)]:(a.postMessage("error",{id:c,error:"Worker not set up to process on main thread"}),[2]);case 5:return y=D.sent(),a.postMessage("done",{id:c,result:y}),[3,7];case 6:return S=D.sent(),O=S instanceof Error?S.message:"unknown error",a.postMessage("error",{id:c,error:O}),[3,7];case 7:return[3,9];case 8:console.warn("process-on-worker: unknown message "+r),D.label=9;case 9:return[2]}})})}var cg=function(){function e(){this._values=[],this._settlers=[],this._closed=!1}return e.prototype[Symbol.asyncIterator]=function(){return this},e.prototype.push=function(a){return this.enqueue(a)},e.prototype.enqueue=function(a){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var r=this._settlers.shift();a instanceof Error?r.reject(a):r.resolve({value:a})}else this._values.push(a)},e.prototype.close=function(){for(;this._settlers.length>0;){var a=this._settlers.shift();a.resolve({done:!0})}this._closed=!0},e.prototype.next=function(){var a=this;if(this._values.length>0){var r=this._values.shift();return r instanceof Error?Promise.reject(r):Promise.resolve({done:!1,value:r})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise(function(o,u){a._settlers.push({resolve:o,reject:u})})},e}(),vc=null,P0=function(e,a,r,o){function u(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function g(O){try{S(o.next(O))}catch(D){p(D)}}function y(O){try{S(o.throw(O))}catch(D){p(D)}}function S(O){O.done?c(O.value):u(O.value).then(g,y)}S((o=o.apply(e,a||[])).next())})},O0=function(e,a){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,u,c,p;return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(S){return function(O){return y([S,O])}}function y(S){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,u&&(c=S[0]&2?u.return:S[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,S[1])).done)return c;switch(u=0,c&&(S=[S[0]&2,c.value]),S[0]){case 0:case 1:c=S;break;case 4:return r.label++,{value:S[1],done:!1};case 5:r.label++,u=S[1],S=[0];continue;case 7:S=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(S[0]===6||S[0]===2)){r=0;continue}if(S[0]===3&&(!c||S[1]>c[0]&&S[1]<c[3])){r.label=S[1];break}if(S[0]===6&&r.label<c[1]){r.label=c[1],c=S;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(S);break}c[2]&&r.ops.pop(),r.trys.pop();continue}S=a.call(e,r)}catch(O){S=[6,O],u=0}finally{o=c=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},k0=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=e[Symbol.asyncIterator],r;return a?a.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r);function o(c){r[c]=e[c]&&function(p){return new Promise(function(g,y){p=e[c](p),u(g,y,p.done,p.value)})}}function u(c,p,g,y){Promise.resolve(y).then(function(S){c({value:S,done:g})},p)}},wv=0,Cv,Zd;function F0(e,a){var r=this;if(typeof self!="undefined"){var o={process:Nh};WorkerBody.onmessage=function(u,c){return P0(r,void 0,void 0,function(){var p,g,y,S,O,D,V,H,ue,le,we;return O0(this,function(Ne){switch(Ne.label){case 0:switch(Ne.trys.push([0,19,,20]),p=u,p){case"process":return[3,1];case"process-in-batches":return[3,3];case"input-batch":return[3,16];case"input-done":return[3,17]}return[3,18];case 1:if(!e)throw new Error("Worker does not support atomic processing");return[4,e(c.input,c.options||{},o)];case 2:return g=Ne.sent(),WorkerBody.postMessage("done",{result:g}),[3,18];case 3:if(!a)throw new Error("Worker does not support batched processing");Cv=new AsyncQueue,Zd=c.options||{},y=a(Cv,Zd,o),Ne.label=4;case 4:Ne.trys.push([4,9,10,15]),S=k0(y),Ne.label=5;case 5:return[4,S.next()];case 6:if(O=Ne.sent(),!!O.done)return[3,8];D=O.value,WorkerBody.postMessage("output-batch",{result:D}),Ne.label=7;case 7:return[3,5];case 8:return[3,15];case 9:return V=Ne.sent(),le={error:V},[3,15];case 10:return Ne.trys.push([10,,13,14]),O&&!O.done&&(we=S.return)?[4,we.call(S)]:[3,12];case 11:Ne.sent(),Ne.label=12;case 12:return[3,14];case 13:if(le)throw le.error;return[7];case 14:return[7];case 15:return WorkerBody.postMessage("done",{}),[3,18];case 16:return Cv.push(c.input),[3,18];case 17:return Cv.close(),[3,18];case 18:return[3,20];case 19:return H=Ne.sent(),ue=H instanceof Error?H.message:"",WorkerBody.postMessage("error",{error:ue}),[3,20];case 20:return[2]}})})}}}function Nh(e,a){return a===void 0&&(a={}),new Promise(function(r,o){var u=wv++,c=function(g,y){if(y.id===u)switch(g){case"done":WorkerBody.removeEventListener(c),r(y.result);break;case"error":WorkerBody.removeEventListener(c),o(y.error);break;default:}};WorkerBody.addEventListener(c);var p={id:u,input:e,options:a};WorkerBody.postMessage("process",p)})}var cd=function(e,a,r,o){function u(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function g(O){try{S(o.next(O))}catch(D){p(D)}}function y(O){try{S(o.throw(O))}catch(D){p(D)}}function S(O){O.done?c(O.value):u(O.value).then(g,y)}S((o=o.apply(e,a||[])).next())})},hm=function(e,a){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,u,c,p;return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(S){return function(O){return y([S,O])}}function y(S){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,u&&(c=S[0]&2?u.return:S[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,S[1])).done)return c;switch(u=0,c&&(S=[S[0]&2,c.value]),S[0]){case 0:case 1:c=S;break;case 4:return r.label++,{value:S[1],done:!1};case 5:r.label++,u=S[1],S=[0];continue;case 7:S=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(S[0]===6||S[0]===2)){r=0;continue}if(S[0]===3&&(!c||S[1]>c[0]&&S[1]<c[3])){r.label=S[1];break}if(S[0]===6&&r.label<c[1]){r.label=c[1],c=S;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(S);break}c[2]&&r.ops.pop(),r.trys.pop();continue}S=a.call(e,r)}catch(O){S=[6,O],u=0}finally{o=c=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},zh={};function p_(e,a,r){return a===void 0&&(a=null),r===void 0&&(r={}),cd(this,void 0,void 0,function(){return hm(this,function(o){switch(o.label){case 0:return a&&(e=pm(e,a,r)),zh[e]=zh[e]||D0(e),[4,zh[e]];case 1:return[2,o.sent()]}})})}function pm(e,a,r){if(e.startsWith("http"))return e;var o=r.modules||{};return o[e]?o[e]:r.CDN?(assert(r.CDN.startsWith("http")),r.CDN+"/"+a+"/dist/libs/"+e):isWorker?"../src/libs/"+e:"modules/"+a+"/src/libs/"+e}function D0(e){return cd(this,void 0,void 0,function(){var a,r,o;return hm(this,function(u){switch(u.label){case 0:return e.endsWith("wasm")?[4,fetch(e)]:[3,3];case 1:return a=u.sent(),[4,a.arrayBuffer()];case 2:return[2,u.sent()];case 3:return isWorker?[2,importScripts(e)]:[4,fetch(e)];case 4:return r=u.sent(),[4,r.text()];case 5:return o=u.sent(),[2,fg(o,e)]}})})}function fg(e,a){if(isWorker)return eval.call(global,e),null;var r=document.createElement("script");r.id=a;try{r.appendChild(document.createTextNode(e))}catch(o){r.text=e}return document.body.appendChild(r),null}var hg="0.0.3",Vd={id:"null",name:"null",module:"web-worker-helper",options:{}};function fd(e){var a=e.color;return!a||!a.length?[1,1,1,1]:a}function gh(e,a,r){return r.length===2?[r[0],r[1],0]:[r[0],r[1],r[2]]}function Tp(e){var a=e.filter;return a?[1]:[0]}function gs(e,a){return[a]}var hd=F(9187),Ic=F.n(hd),$n=F(31437),Pc=$n.Ue(),Mp=$n.Ue(),Xs=$n.Ue(),Oc=$n.Ue(),gc=$n.Ue();function Uh(e,a,r,o,u){$n.IH(e,r,o),$n.Fv(e,e),a=$n.al(-e[1],e[0]);var c=$n.al(-r[1],r[0]);return[u/$n.AK(a,c),a]}function tl(e,a){return $n.t8(e,-a[1],a[0])}function Rp(e,a,r){return $n.lu(e,a,r),$n.Fv(e,e),e}function kc(e,a){return e[0]===a[0]&&e[1]===a[1]}function pd(e){for(var a=new Map,r=0;r<e.length;r++){var o=e[0].toString()+"-"+e[1].toString();a.get(o)?(e.splice(r,1),r++):a.set(o,o)}return e}var Av=function(){function e(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,Rt.Z)(this,e),(0,Fe.Z)(this,"lastFlip",-1),(0,Fe.Z)(this,"miter",$n.al(0,0)),(0,Fe.Z)(this,"started",!1),(0,Fe.Z)(this,"dash",!1),(0,Fe.Z)(this,"totalDistance",0),(0,Fe.Z)(this,"currentIndex",0),this.join=a.join||"miter",this.cap=a.cap||"butt",this.miterLimit=a.miterLimit||10,this.thickness=a.thickness||1,this.dash=a.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return(0,at.Z)(e,[{key:"extrude_gaode2",value:function(r,o){var u=this.complex;if(r.length<=1)return u;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var c=r.length,p=u.startIndex,g=1;g<c;g++){var y,S,O,D=r[g-1];D.push((y=o[g-1][2])!==null&&y!==void 0?y:0);var V=o[g-1],H=r[g];H.push((S=o[g][2])!==null&&S!==void 0?S:0);var ue=o[g],le=g<r.length-1?[].concat((0,Sn.Z)(r[g+1]),[(O=o[g+1][2])!==null&&O!==void 0?O:0]):null,we=g<o.length-1?o[g+1]:null,Ne=this.segment_gaode2(u,p,D,H,le,V,ue,we);p+=Ne}if(this.dash)for(var dt=0;dt<u.positions.length/6;dt++)u.positions[dt*6+5]=this.totalDistance;return u.startIndex=u.positions.length/6,u}},{key:"simpleExtrude_gaode2",value:function(r,o){var u=this.complex;if(r.length<=1)return u;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var c=r.length,p=u.startIndex,g=1;g<c;g++){var y,S,O,D=r[g-1];D.push((y=o[g-1][2])!==null&&y!==void 0?y:0);var V=o[g-1],H=r[g];H.push((S=o[g][2])!==null&&S!==void 0?S:0);var ue=o[g],le=g<r.length-1?[].concat((0,Sn.Z)(r[g+1]),[(O=o[g+1][2])!==null&&O!==void 0?O:0]):null,we=g<o.length-1?o[g+1]:null,Ne=this.simpleSegment(u,p,D,H,le,V,ue,we);p+=Ne}if(this.dash)for(var dt=0;dt<u.positions.length/6;dt++)u.positions[dt*6+5]=this.totalDistance;return u.startIndex=u.positions.length/6,u}},{key:"extrude",value:function(r){var o=this.complex;if(r.length<=1)return o;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var u=r.length,c=o.startIndex,p=1;p<u;p++){var g=r[p-1],y=r[p],S=p<r.length-1?r[p+1]:null,O=this.segment(o,c,g,y,S);c+=O}if(this.dash)for(var D=0;D<o.positions.length/6;D++)o.positions[D*6+5]=this.totalDistance;return o.startIndex=o.positions.length/6,o}},{key:"simpleExtrude",value:function(r){var o=this.complex;if(r.length<=1)return o;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var u=r.length,c=o.startIndex,p=1;p<u;p++){var g=r[p-1],y=r[p],S=p<r.length-1?r[p+1]:null,O=this.simpleSegment(o,c,g,y,S);c+=O}if(this.dash)for(var D=0;D<o.positions.length/6;D++)o.positions[D*6+5]=this.totalDistance;return o.startIndex=o.positions.length/6,o}},{key:"segment_gaode2",value:function(r,o,u,c,p,g,y,S){var O=0,D=r.indices,V=r.positions,H=r.normals,ue=this.cap==="square",le=this.join==="bevel",we=fu([y[0],y[1]]),Ne=fu([g[0],g[1]]);Rp(Xs,c,u);var dt=0;if(this.dash&&(dt=this.lineSegmentDistance(we,Ne),this.totalDistance+=dt),this.normal||(this.normal=$n.Ue(),tl(this.normal,Xs)),!this.started)if(this.started=!0,ue){var mt=$n.Ue(),Lt=$n.Ue();$n.IH(mt,this.normal,Xs),$n.IH(Lt,this.normal,Xs),H.push(Lt[0],Lt[1],0),H.push(mt[0],mt[1],0),V.push(u[0],u[1],u[2]|0,this.totalDistance-dt,-this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),V.push(u[0],u[1],u[2]|0,this.totalDistance-dt,this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(V,H,u,this.normal,this.thickness,this.totalDistance-dt);if(D.push(o+0,o+1,o+2),p){kc(c,p)&&$n.IH(p,c,$n.Fv(p,$n.$X(p,c,u))),Rp(Oc,p,c);var ir=Uh(gc,$n.Ue(),Xs,Oc,this.thickness),Sr=(0,Vi.Z)(ir,2),Br=Sr[0],Jr=Sr[1],en=$n.AK(gc,this.normal)<0?-1:1,Kn=le;if(!Kn&&this.join==="miter"){var si=Br;si>this.miterLimit&&(Kn=!0)}Kn?(H.push(this.normal[0],this.normal[1],0),H.push(Jr[0],Jr[1],0),V.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*en,c[2]|0),this.complex.indexes.push(this.currentIndex),V.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness*en,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,D.push.apply(D,(0,Sn.Z)(this.lastFlip!==-en?[o,o+2,o+3]:[o+2,o+1,o+3])),D.push(o+2,o+3,o+4),tl(Pc,Oc),$n.JG(this.normal,Pc),H.push(this.normal[0],this.normal[1],0),V.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*en,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,O+=3):(this.extrusions(V,H,c,Jr,Br,this.totalDistance),D.push.apply(D,(0,Sn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),en=-1,$n.JG(this.normal,Jr),O+=2),this.lastFlip=en}else{if(tl(this.normal,Xs),ue){var Wt=$n.Ue(),qt=$n.Ue();$n.lu(qt,Xs,this.normal),$n.IH(Wt,Xs,this.normal),H.push(qt[0],qt[1],0),H.push(Wt[0],Wt[1],0),V.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),V.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(V,H,c,this.normal,this.thickness,this.totalDistance);D.push.apply(D,(0,Sn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),O+=2}return O}},{key:"simpleSegment",value:function(r,o,u,c,p){var g=0,y=r.indices,S=r.positions,O=r.normals,D=fu([c[0],c[1]]),V=fu([u[0],u[1]]);Rp(Xs,D,V);var H=0;if(this.dash&&(H=this.lineSegmentDistance(D,V),this.totalDistance+=H),this.normal||(this.normal=$n.Ue(),tl(this.normal,Xs)),this.started||(this.started=!0,this.extrusions(S,O,u,this.normal,this.thickness,this.totalDistance-H)),y.push(o+0,o+1,o+2),!p)tl(this.normal,Xs),this.extrusions(S,O,c,this.normal,this.thickness,this.totalDistance),y.push.apply(y,(0,Sn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),g+=2;else{var ue=fu([p[0],p[1]]);kc(D,ue)&&$n.IH(ue,D,$n.Fv(ue,$n.$X(ue,D,V))),Rp(Oc,ue,D);var le=Uh(gc,$n.Ue(),Xs,Oc,this.thickness),we=(0,Vi.Z)(le,2),Ne=we[0],dt=we[1],mt=$n.AK(gc,this.normal)<0?-1:1;this.extrusions(S,O,c,dt,Ne,this.totalDistance),y.push.apply(y,(0,Sn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),mt=-1,$n.JG(this.normal,dt),g+=2,this.lastFlip=mt}return g}},{key:"segment",value:function(r,o,u,c,p){var g=0,y=r.indices,S=r.positions,O=r.normals,D=this.cap==="square",V=this.join==="bevel",H=fu([c[0],c[1]]),ue=fu([u[0],u[1]]);Rp(Xs,H,ue);var le=0;if(this.dash&&(le=this.lineSegmentDistance(H,ue),this.totalDistance+=le),this.normal||(this.normal=$n.Ue(),tl(this.normal,Xs)),!this.started)if(this.started=!0,D){var we=$n.Ue(),Ne=$n.Ue();$n.IH(we,this.normal,Xs),$n.IH(Ne,this.normal,Xs),O.push(Ne[0],Ne[1],0),O.push(we[0],we[1],0),S.push(u[0],u[1],u[2]|0,this.totalDistance-le,-this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),S.push(u[0],u[1],u[2]|0,this.totalDistance-le,this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(S,O,u,this.normal,this.thickness,this.totalDistance-le);if(y.push(o+0,o+1,o+2),p){var Lt=fu([p[0],p[1]]);kc(H,Lt)&&$n.IH(Lt,H,$n.Fv(Lt,$n.$X(Lt,H,ue))),Rp(Oc,Lt,H);var Wt=Uh(gc,$n.Ue(),Xs,Oc,this.thickness),qt=(0,Vi.Z)(Wt,2),ir=qt[0],Sr=qt[1],Br=$n.AK(gc,this.normal)<0?-1:1,Jr=V;if(!Jr&&this.join==="miter"){var en=ir;en>this.miterLimit&&(Jr=!0)}Jr?(O.push(this.normal[0],this.normal[1],0),O.push(Sr[0],Sr[1],0),S.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*Br,c[2]|0),this.complex.indexes.push(this.currentIndex),S.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness*Br,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,y.push.apply(y,(0,Sn.Z)(this.lastFlip!==-Br?[o,o+2,o+3]:[o+2,o+1,o+3])),y.push(o+2,o+3,o+4),tl(Pc,Oc),$n.JG(this.normal,Pc),O.push(this.normal[0],this.normal[1],0),S.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*Br,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,g+=3):(this.extrusions(S,O,c,Sr,ir,this.totalDistance),y.push.apply(y,(0,Sn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),Br=-1,$n.JG(this.normal,Sr),g+=2),this.lastFlip=Br}else{if(tl(this.normal,Xs),D){var dt=$n.Ue(),mt=$n.Ue();$n.lu(mt,Xs,this.normal),$n.IH(dt,Xs,this.normal),O.push(mt[0],mt[1],0),O.push(dt[0],dt[1],0),S.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),S.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(S,O,c,this.normal,this.thickness,this.totalDistance);y.push.apply(y,(0,Sn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),g+=2}return g}},{key:"extrusions",value:function(r,o,u,c,p,g){o.push(c[0],c[1],0),o.push(c[0],c[1],0),r.push(u[0],u[1],u[2]|0,g,-p,u[2]|0),this.complex.indexes.push(this.currentIndex),r.push(u[0],u[1],u[2]|0,g,p,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(r,o){var u=o[0]-r[0],c=o[1]-r[1];return Math.sqrt(u*u+c*c)}}]),e}();function Hd(e){var a=e.coordinates,r=e.originCoordinates,o=e.version,u=new Av({dash:!0,join:"bevel"});if(o==="GAODE2.x"){var c=a;Array.isArray(c[0][0])||(c=[a]);var p=r;Array.isArray(p[0][0])||(p=[r]);for(var g=0;g<c.length;g++){var y=c[g],S=p[g];u.extrude_gaode2(y,S)}}else{var O=a;O[0]&&!Array.isArray(O[0][0])&&(O=[a]),O.forEach(function(V){u.extrude(V)})}var D=u.complex;return{vertices:D.positions,indices:D.indices,normals:D.normals,indexes:D.indexes,size:6}}function dd(e){var a=tu(e.coordinates);return{vertices:[].concat((0,Sn.Z)(a),(0,Sn.Z)(a),(0,Sn.Z)(a),(0,Sn.Z)(a)),indices:[0,1,2,2,3,0],size:a.length}}function Tv(e){var a=e.coordinates,r=Ic().flatten(a),o=r.vertices,u=r.dimensions,c=r.holes,p=Ic()(o,c,u);return{indices:p,vertices:o,size:u}}var Qc=function(){var e=(0,fn.Z)($t().mark(function a(r){var o,u,c,p,g,y,S,O,D;return $t().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return o=r.descriptors,u=r.features,c=r.enablePicking,p=r.iconMap,g={a_Color:fd,a_Position:gh,filter:Tp,a_vertexId:gs,a_PickingColor:function(le){var we=le.id;return c?Es(we):[0,0,0]},a_DistanceAndIndex:function(le,we,Ne,dt,mt,Lt){return Lt===void 0?[Ne[3],10]:[Ne[3],Lt]},a_Total_Distance:function(le,we,Ne){return[Ne[5]]},a_Size:function(le){var we=le.size,Ne=we===void 0?1:we;return Array.isArray(Ne)?[Ne[0],Ne[1]]:[Ne,0]},a_Normal:function(le,we,Ne,dt,mt){return mt},a_Miter:function(le,we,Ne){return[Ne[4]]},a_iconMapUV:function(le){var we=le.texture,Ne=p[we]||{x:0,y:0},dt=Ne.x,mt=Ne.y;return[dt,mt]}},y={sizePerElement:0,elements:[]},S=0,O=[],D=3,u.forEach(function(ue,le){var we=Hd(ue),Ne=we.indices,dt=we.vertices,mt=we.normals,Lt=we.size,Wt=we.indexes;Ne.forEach(function(Br){O.push(Br+S)}),D=Lt;var qt=dt.length/Lt;y.sizePerElement=D,y.elements.push({featureIdx:le,vertices:dt,normals:mt,offset:S}),S+=qt;for(var ir=function(Jr){var en=(mt==null?void 0:mt.slice(Jr*3,Jr*3+3))||[],Kn=dt.slice(Jr*Lt,Jr*Lt+Lt),si=0;Wt&&Wt[Jr]!==void 0&&(si=Wt[Jr]),o.forEach(function(Pi){if(Pi&&g[Pi.name]){var so;(so=Pi.buffer.data).push.apply(so,(0,Sn.Z)(g[Pi.name](ue,le,Kn,Jr,en,si)))}})},Sr=0;Sr<qt;Sr++)ir(Sr)}),H.abrupt("return",{descriptors:o,featureLayout:y,indices:O});case 8:case"end":return H.stop()}},a)}));return function(r){return e.apply(this,arguments)}}(),Zh=function(){var e=(0,fn.Z)($t().mark(function a(r){var o,u,c,p,g,y,S,O,D;return $t().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return o=r.descriptors,u=r.features,c=r.enablePicking,p=r.shape2d,g={a_Color:fd,a_Position:gh,filter:Tp,a_vertexId:gs,a_PickingColor:function(le){var we=le.id;return c?Es(we):[0,0,0]},a_Shape:function(le){var we=le.shape,Ne=we===void 0?2:we,dt=p.indexOf(Ne);return[dt]},a_Extrude:function(le,we,Ne,dt){var mt=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],Lt=dt%4*3;return[mt[Lt],mt[Lt+1],mt[Lt+2]]},a_Size:function(le){var we=le.size,Ne=we===void 0?5:we;return Array.isArray(Ne)?[Ne[0]]:[Ne]}},y={sizePerElement:0,elements:[]},S=0,O=[],D=3,u.forEach(function(ue,le){var we=dd(ue),Ne=we.indices,dt=we.vertices,mt=we.normals,Lt=we.size,Wt=we.indexes;Ne.forEach(function(Br){O.push(Br+S)}),D=Lt;var qt=dt.length/Lt;y.sizePerElement=D,y.elements.push({featureIdx:le,vertices:dt,normals:mt,offset:S}),S+=qt;for(var ir=function(Jr){var en=(mt==null?void 0:mt.slice(Jr*3,Jr*3+3))||[],Kn=dt.slice(Jr*Lt,Jr*Lt+Lt),si=0;Wt&&Wt[Jr]!==void 0&&(si=Wt[Jr]),o.forEach(function(Pi){if(Pi&&g[Pi.name]){var so;(so=Pi.buffer.data).push.apply(so,(0,Sn.Z)(g[Pi.name](ue,le,Kn,Jr,en,si)))}})},Sr=0;Sr<qt;Sr++)ir(Sr)}),H.abrupt("return",{descriptors:o,featureLayout:y,indices:O});case 8:case"end":return H.stop()}},a)}));return function(r){return e.apply(this,arguments)}}(),jd=function(){var e=(0,fn.Z)($t().mark(function a(r){var o,u,c,p,g,y,S,O;return $t().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return o=r.descriptors,u=r.features,c=r.enablePicking,p={a_Color:fd,a_Position:gh,filter:Tp,a_vertexId:gs,a_PickingColor:function(ue){var le=ue.id;return c?Es(le):[0,0,0]}},g={sizePerElement:0,elements:[]},y=0,S=[],O=3,u.forEach(function(H,ue){var le=Tv(H),we=le.indices,Ne=le.vertices,dt=le.normals,mt=le.size,Lt=le.indexes;we.forEach(function(Sr){S.push(Sr+y)}),O=mt;var Wt=Ne.length/mt;g.sizePerElement=O,g.elements.push({featureIdx:ue,vertices:Ne,normals:dt,offset:y}),y+=Wt;for(var qt=function(Br){var Jr=(dt==null?void 0:dt.slice(Br*3,Br*3+3))||[],en=Ne.slice(Br*mt,Br*mt+mt),Kn=0;Lt&&Lt[Br]!==void 0&&(Kn=Lt[Br]),o.forEach(function(si){if(si&&p[si.name]){var Pi;(Pi=si.buffer.data).push.apply(Pi,(0,Sn.Z)(p[si.name](H,ue,en,Br,Jr,Kn)))}})},ir=0;ir<Wt;ir++)qt(ir)}),V.abrupt("return",{descriptors:o,featureLayout:g,indices:S});case 8:case"end":return V.stop()}},a)}));return function(r){return e.apply(this,arguments)}}(),dm={pointFill:Zh,line:Qc,polygonFill:jd},Mv=(0,te.Z)({},dm);function vm(e){return os.apply(this,arguments)}function os(){return os=_asyncToGenerator(_regeneratorRuntime.mark(function e(a){var r,o;return _regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(r=a.workerType,o=a.data,!Mv[r]){c.next=3;break}return c.abrupt("return",Mv[r](o));case 3:return c.abrupt("return",Promise.reject(new Error('Worker with type "'.concat(r,'" non-existent.'))));case 4:case"end":return c.stop()}},e)})),os.apply(this,arguments)}var mh=new Map;function Zf(e,a){mh.set(e,a)}function vd(e){var a=mh.get(e);return a}var yf="l7-worker",yh=3,Ip=!0;function Pp(e){registerWorkerSource(yf,e)}function Rl(){var e=getWorkerSource(yf);if(!e)throw new Error("get worker failed by workerName: ".concat(yf,"."));return e}function Vf(e,a){return $o.apply(this,arguments)}function $o(){return $o=_asyncToGenerator(_regeneratorRuntime.mark(function e(a,r){var o,u,c,p,g;return _regeneratorRuntime.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return o=Rl(),u=WorkerFarm.getWorkerFarm({maxConcurrency:yh,reuseWorkers:Ip}),c=u.getWorkerPool({name:yf,source:o}),S.next=5,c.startJob(yf,function(O,D,V){return O.done(V)});case 5:return p=S.sent,p.postMessage("process",{input:{workerType:a,data:r}}),S.next=9,p.result;case 9:return g=S.sent,S.abrupt("return",g.result);case 11:case"end":return S.stop()}},e)})),$o.apply(this,arguments)}var Il=F(38163),Au=F.n(Il);function pl(e,a){return e.map(function(r){return r[a]*1})}function gm(e){return e===void 0?!1:!Array.isArray(e)&&e.data!==void 0}function Op(e){return Array.isArray(e)?e.length===0?!1:!!gm(e[0]):!1}function pg(e){return Array.isArray(e)?e.length===0||typeof e[0]=="number":!1}function Vh(e){var a=Object.isFrozen(e)?wa.cloneDeep(e):e;return Au()(a,!0),a}function Rv(e,a){var r=a.x,o=a.y,u=a.x1,c=a.y1,p=a.coordinates,g=a.geometry,y=[];if(!Array.isArray(e))return{dataArray:[]};if(g)return e.filter(function(Ne){return Ne[g]&&Ne[g].type&&Ne[g].coordinates&&Ne[g].coordinates.length>0}).forEach(function(Ne,dt){var mt=Vh(Ne[g]);We(mt,function(Lt){var Wt=ot(Lt),qt=(0,te.Z)((0,te.Z)({},Ne),{},{_id:dt,coordinates:Wt});y.push(qt)})}),{dataArray:y};for(var S=0;S<e.length;S++){var O=e[S],D=[];if(p){var V="Polygon";Array.isArray(p[0])||(V="Point"),Array.isArray(p[0])&&!Array.isArray(p[0][0])&&(V="LineString");var H=Vh({type:V,coordinates:O[p]});D=H.coordinates}else if(r&&o&&u&&c){var ue=[parseFloat(O[r]),parseFloat(O[o])],le=[parseFloat(O[u]),parseFloat(O[c])];D=[ue,le]}else r&&o&&(D=[parseFloat(O[r]),parseFloat(O[o])]);var we=(0,te.Z)((0,te.Z)({},O),{},{_id:S,coordinates:D});y.push(we)}return{dataArray:y}}function mm(e,a){var r=be(e);return Rv(r,a)}var _f=F(71002);function ym(e){for(var a=e.toString(),r=5381,o=a.length;o;)r=r*33^a.charCodeAt(--o);return r>>>0}function dl(e,a){return a===void 0?null:(0,_f.Z)(e.properties[a])*1==="number"?e.properties[a]*1:e.properties&&e.properties[a]?ym(e.properties[a]+"")%1000019:null}function L0(e,a){var r=[],o={};return e.features?(e.features=e.features.filter(function(u){var c=u.geometry;return u!=null&&c&&c.type&&c.coordinates&&c.coordinates.length>0}),e=Vh(e),e.features.length===0?{dataArray:[],featureKeys:o}:(We(e,function(u,c){var p=dl(u,a==null?void 0:a.featureId);p===null&&(p=c);var g=p,y=ot(u),S=(0,te.Z)((0,te.Z)({},u.properties),{},{coordinates:y,_id:g});r.push(S)}),{dataArray:r,featureKeys:o})):(e.features=[],{dataArray:[]})}function Iv(e,a,r,o){for(var u=o,c=r-a>>1,p=r-a,g,y=e[a],S=e[a+1],O=e[r],D=e[r+1],V=a+3;V<r;V+=3){var H=kp(e[V],e[V+1],y,S,O,D);if(H>u)g=V,u=H;else if(H===u){var ue=Math.abs(V-c);ue<p&&(g=V,p=ue)}}u>o&&(g-a>3&&Iv(e,a,g,o),e[g+2]=u,r-g>3&&Iv(e,g,r,o))}function kp(e,a,r,o,u,c){var p=u-r,g=c-o;if(p!==0||g!==0){var y=((e-r)*p+(a-o)*g)/(p*p+g*g);y>1?(r=u,o=c):y>0&&(r+=p*y,o+=g*y)}return p=e-r,g=a-o,p*p+g*g}function Fp(e,a,r,o){var u={id:typeof e=="undefined"?null:e,type:a,geometry:r,tags:o,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return dg(u),u}function dg(e){var a=e.geometry,r=e.type;if(r==="Point"||r==="MultiPoint"||r==="LineString")vg(e,a);else if(r==="Polygon"||r==="MultiLineString")for(var o=0;o<a.length;o++)vg(e,a[o]);else if(r==="MultiPolygon")for(o=0;o<a.length;o++)for(var u=0;u<a[o].length;u++)vg(e,a[o][u])}function vg(e,a){for(var r=0;r<a.length;r+=3)e.minX=Math.min(e.minX,a[r]),e.minY=Math.min(e.minY,a[r+1]),e.maxX=Math.max(e.maxX,a[r]),e.maxY=Math.max(e.maxY,a[r+1])}function B0(e,a){var r=[];if(e.type==="FeatureCollection")for(var o=0;o<e.features.length;o++)Hh(r,e.features[o],a,o);else e.type==="Feature"?Hh(r,e,a):Hh(r,{geometry:e},a);return r}function Hh(e,a,r,o){if(a.geometry){var u=a.geometry.coordinates,c=a.geometry.type,p=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),g=[],y=a.id;if(r.promoteId?y=a.properties[r.promoteId]:r.generateId&&(y=o||0),c==="Point")_m(u,g);else if(c==="MultiPoint")for(var S=0;S<u.length;S++)_m(u[S],g);else if(c==="LineString")Xe(u,g,p,!1);else if(c==="MultiLineString")if(r.lineMetrics){for(S=0;S<u.length;S++)g=[],Xe(u[S],g,p,!1),e.push(Fp(y,"LineString",g,a.properties));return}else Gt(u,g,p,!1);else if(c==="Polygon")Gt(u,g,p,!0);else if(c==="MultiPolygon")for(S=0;S<u.length;S++){var O=[];Gt(u[S],O,p,!0),g.push(O)}else if(c==="GeometryCollection"){for(S=0;S<a.geometry.geometries.length;S++)Hh(e,{id:y,geometry:a.geometry.geometries[S],properties:a.properties},r,o);return}else throw new Error("Input data is not a valid GeoJSON object.");e.push(Fp(y,c,g,a.properties))}}function _m(e,a){a.push(dr(e[0])),a.push(on(e[1])),a.push(0)}function Xe(e,a,r,o){for(var u,c,p=0,g=0;g<e.length;g++){var y=dr(e[g][0]),S=on(e[g][1]);a.push(y),a.push(S),a.push(0),g>0&&(o?p+=(u*S-y*c)/2:p+=Math.sqrt(Math.pow(y-u,2)+Math.pow(S-c,2))),u=y,c=S}var O=a.length-3;a[2]=1,Iv(a,0,O,r),a[O+2]=1,a.size=Math.abs(p),a.start=0,a.end=a.size}function Gt(e,a,r,o){for(var u=0;u<e.length;u++){var c=[];Xe(e[u],c,r,o),a.push(c)}}function dr(e){return e/360+.5}function on(e){var a=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+a)/(1-a))/Math.PI;return r<0?0:r>1?1:r}function wn(e,a,r,o,u,c,p,g){if(r/=a,o/=a,c>=r&&p<o)return e;if(p<r||c>=o)return null;for(var y=[],S=0;S<e.length;S++){var O=e[S],D=O.geometry,V=O.type,H=u===0?O.minX:O.minY,ue=u===0?O.maxX:O.maxY;if(H>=r&&ue<o){y.push(O);continue}else if(ue<r||H>=o)continue;var le=[];if(V==="Point"||V==="MultiPoint")un(D,le,r,o,u);else if(V==="LineString")Yr(D,le,r,o,u,!1,g.lineMetrics);else if(V==="MultiLineString")zn(D,le,r,o,u,!1);else if(V==="Polygon")zn(D,le,r,o,u,!0);else if(V==="MultiPolygon")for(var we=0;we<D.length;we++){var Ne=[];zn(D[we],Ne,r,o,u,!0),Ne.length&&le.push(Ne)}if(le.length){if(g.lineMetrics&&V==="LineString"){for(we=0;we<le.length;we++)y.push(Fp(O.id,V,le[we],O.tags));continue}(V==="LineString"||V==="MultiLineString")&&(le.length===1?(V="LineString",le=le[0]):V="MultiLineString"),(V==="Point"||V==="MultiPoint")&&(V=le.length===3?"Point":"MultiPoint"),y.push(Fp(O.id,V,le,O.tags))}}return y.length?y:null}function un(e,a,r,o,u){for(var c=0;c<e.length;c+=3){var p=e[c+u];p>=r&&p<=o&&(a.push(e[c]),a.push(e[c+1]),a.push(e[c+2]))}}function Yr(e,a,r,o,u,c,p){for(var g=Yn(e),y=u===0?ni:ai,S=e.start,O,D,V=0;V<e.length-3;V+=3){var H=e[V],ue=e[V+1],le=e[V+2],we=e[V+3],Ne=e[V+4],dt=u===0?H:ue,mt=u===0?we:Ne,Lt=!1;p&&(O=Math.sqrt(Math.pow(H-we,2)+Math.pow(ue-Ne,2))),dt<r?mt>r&&(D=y(g,H,ue,we,Ne,r),p&&(g.start=S+O*D)):dt>o?mt<o&&(D=y(g,H,ue,we,Ne,o),p&&(g.start=S+O*D)):li(g,H,ue,le),mt<r&&dt>=r&&(D=y(g,H,ue,we,Ne,r),Lt=!0),mt>o&&dt<=o&&(D=y(g,H,ue,we,Ne,o),Lt=!0),!c&&Lt&&(p&&(g.end=S+O*D),a.push(g),g=Yn(e)),p&&(S+=O)}var Wt=e.length-3;H=e[Wt],ue=e[Wt+1],le=e[Wt+2],dt=u===0?H:ue,dt>=r&&dt<=o&&li(g,H,ue,le),Wt=g.length-3,c&&Wt>=3&&(g[Wt]!==g[0]||g[Wt+1]!==g[1])&&li(g,g[0],g[1],g[2]),g.length&&a.push(g)}function Yn(e){var a=[];return a.size=e.size,a.start=e.start,a.end=e.end,a}function zn(e,a,r,o,u,c){for(var p=0;p<e.length;p++)Yr(e[p],a,r,o,u,c,!1)}function li(e,a,r,o){e.push(a),e.push(r),e.push(o)}function ni(e,a,r,o,u,c){var p=(c-a)/(o-a);return e.push(c),e.push(r+(u-r)*p),e.push(1),p}function ai(e,a,r,o,u,c){var p=(c-r)/(u-r);return e.push(a+(o-a)*p),e.push(c),e.push(1),p}function xi(e,a){var r=a.buffer/a.extent,o=e,u=wn(e,1,-1-r,r,0,-1,2,a),c=wn(e,1,1-r,2+r,0,-1,2,a);return(u||c)&&(o=wn(e,1,-r,1+r,0,-1,2,a)||[],u&&(o=En(u,1).concat(o)),c&&(o=o.concat(En(c,-1)))),o}function En(e,a){for(var r=[],o=0;o<e.length;o++){var u=e[o],c=u.type,p;if(c==="Point"||c==="MultiPoint"||c==="LineString")p=ci(u.geometry,a);else if(c==="MultiLineString"||c==="Polygon"){p=[];for(var g=0;g<u.geometry.length;g++)p.push(ci(u.geometry[g],a))}else if(c==="MultiPolygon")for(p=[],g=0;g<u.geometry.length;g++){for(var y=[],S=0;S<u.geometry[g].length;S++)y.push(ci(u.geometry[g][S],a));p.push(y)}r.push(Fp(u.id,c,p,u.tags))}return r}function ci(e,a){var r=[];r.size=e.size,e.start!==void 0&&(r.start=e.start,r.end=e.end);for(var o=0;o<e.length;o+=3)r.push(e[o]+a,e[o+1],e[o+2]);return r}function jr(e,a){if(e.transformed)return e;var r=1<<e.z,o=e.x,u=e.y,c,p,g;for(c=0;c<e.features.length;c++){var y=e.features[c],S=y.geometry,O=y.type;if(y.geometry=[],O===1)for(p=0;p<S.length;p+=2)y.geometry.push(mn(S[p],S[p+1],a,r,o,u));else for(p=0;p<S.length;p++){var D=[];for(g=0;g<S[p].length;g+=2)D.push(mn(S[p][g],S[p][g+1],a,r,o,u));y.geometry.push(D)}}return e.transformed=!0,e}function mn(e,a,r,o,u,c){return[Math.round(r*(e*o-u)),Math.round(r*(a*o-c))]}function ti(e,a,r,o,u){for(var c=a===u.maxZoom?0:u.tolerance/((1<<a)*u.extent),p={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:o,z:a,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},g=0;g<e.length;g++){p.numFeatures++,Ci(p,e[g],c,u);var y=e[g].minX,S=e[g].minY,O=e[g].maxX,D=e[g].maxY;y<p.minX&&(p.minX=y),S<p.minY&&(p.minY=S),O>p.maxX&&(p.maxX=O),D>p.maxY&&(p.maxY=D)}return p}function Ci(e,a,r,o){var u=a.geometry,c=a.type,p=[];if(c==="Point"||c==="MultiPoint")for(var g=0;g<u.length;g+=3)p.push(u[g]),p.push(u[g+1]),e.numPoints++,e.numSimplified++;else if(c==="LineString")Vr(p,u,e,r,!1,!1);else if(c==="MultiLineString"||c==="Polygon")for(g=0;g<u.length;g++)Vr(p,u[g],e,r,c==="Polygon",g===0);else if(c==="MultiPolygon")for(var y=0;y<u.length;y++){var S=u[y];for(g=0;g<S.length;g++)Vr(p,S[g],e,r,!0,g===0)}if(p.length){var O=a.tags||null;if(c==="LineString"&&o.lineMetrics){O={};for(var D in a.tags)O[D]=a.tags[D];O.mapbox_clip_start=u.start/u.size,O.mapbox_clip_end=u.end/u.size}var V={geometry:p,type:c==="Polygon"||c==="MultiPolygon"?3:c==="LineString"||c==="MultiLineString"?2:1,tags:O};a.id!==null&&(V.id=a.id),e.features.push(V)}}function Vr(e,a,r,o,u,c){var p=o*o;if(o>0&&a.size<(u?p:o)){r.numPoints+=a.length/3;return}for(var g=[],y=0;y<a.length;y+=3)(o===0||a[y+2]>p)&&(r.numSimplified++,g.push(a[y]),g.push(a[y+1])),r.numPoints++;u&&Bi(g,c),e.push(g)}function Bi(e,a){for(var r=0,o=0,u=e.length,c=u-2;o<u;c=o,o+=2)r+=(e[o]-e[c])*(e[o+1]+e[c+1]);if(r>0===a)for(o=0,u=e.length;o<u/2;o+=2){var p=e[o],g=e[o+1];e[o]=e[u-2-o],e[o+1]=e[u-1-o],e[u-2-o]=p,e[u-1-o]=g}}function Wn(e,a){return new Ti(e,a)}function Ti(e,a){a=this.options=wi(Object.create(this.options),a);var r=a.debug;if(r&&console.time("preprocess data"),a.maxZoom<0||a.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(a.promoteId&&a.generateId)throw new Error("promoteId and generateId cannot be used together.");var o=B0(e,a);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",a.indexMaxZoom,a.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),o=xi(o,a),o.length&&this.splitTile(o,0,0,0),r&&(o.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}Ti.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ti.prototype.splitTile=function(e,a,r,o,u,c,p){for(var g=[e,a,r,o],y=this.options,S=y.debug;g.length;){o=g.pop(),r=g.pop(),a=g.pop(),e=g.pop();var O=1<<a,D=Ln(a,r,o),V=this.tiles[D];if(!V&&(S>1&&console.time("creation"),V=this.tiles[D]=ti(e,a,r,o,y),this.tileCoords.push({z:a,x:r,y:o}),S)){S>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",a,r,o,V.numFeatures,V.numPoints,V.numSimplified),console.timeEnd("creation"));var H="z"+a;this.stats[H]=(this.stats[H]||0)+1,this.total++}if(V.source=e,u){if(a===y.maxZoom||a===u)continue;var ue=1<<u-a;if(r!==Math.floor(c/ue)||o!==Math.floor(p/ue))continue}else if(a===y.indexMaxZoom||V.numPoints<=y.indexMaxPoints)continue;if(V.source=null,e.length!==0){S>1&&console.time("clipping");var le=.5*y.buffer/y.extent,we=.5-le,Ne=.5+le,dt=1+le,mt,Lt,Wt,qt,ir,Sr;mt=Lt=Wt=qt=null,ir=wn(e,O,r-le,r+Ne,0,V.minX,V.maxX,y),Sr=wn(e,O,r+we,r+dt,0,V.minX,V.maxX,y),e=null,ir&&(mt=wn(ir,O,o-le,o+Ne,1,V.minY,V.maxY,y),Lt=wn(ir,O,o+we,o+dt,1,V.minY,V.maxY,y),ir=null),Sr&&(Wt=wn(Sr,O,o-le,o+Ne,1,V.minY,V.maxY,y),qt=wn(Sr,O,o+we,o+dt,1,V.minY,V.maxY,y),Sr=null),S>1&&console.timeEnd("clipping"),g.push(mt||[],a+1,r*2,o*2),g.push(Lt||[],a+1,r*2,o*2+1),g.push(Wt||[],a+1,r*2+1,o*2),g.push(qt||[],a+1,r*2+1,o*2+1)}}},Ti.prototype.getTile=function(e,a,r){var o=this.options,u=o.extent,c=o.debug;if(e<0||e>24)return null;var p=1<<e;a=(a%p+p)%p;var g=Ln(e,a,r);if(this.tiles[g])return jr(this.tiles[g],u);c>1&&console.log("drilling down to z%d-%d-%d",e,a,r);for(var y=e,S=a,O=r,D;!D&&y>0;)y--,S=Math.floor(S/2),O=Math.floor(O/2),D=this.tiles[Ln(y,S,O)];return!D||!D.source?null:(c>1&&console.log("found parent tile z%d-%d-%d",y,S,O),c>1&&console.time("drilling down"),this.splitTile(D.source,y,S,O,e,a,r),c>1&&console.timeEnd("drilling down"),this.tiles[g]?jr(this.tiles[g],u):null)};function Ln(e,a,r){return((1<<e)*r+a)*32+e}function wi(e,a){for(var r in a)e[r]=a[r];return e}var ta=function(){function e(a,r,o,u){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"vectorLayerCache",{}),this.x=r,this.y=o,this.z=u,this.vectorTile=a}return(0,at.Z)(e,[{key:"getTileData",value:function(r){if(!r||!this.vectorTile.layers[r])return[];if(this.vectorLayerCache[r])return this.vectorLayerCache[r];var o=this.vectorTile.layers[r];return o.features}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),e}(),Ua={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function Ai(e){for(var a=0,r=0,o=e.length,u=o-1,c,p;r<o;u=r++)c=e[r],p=e[u],a+=(p.x-c.x)*(c.y+p.y);return a}function Gn(e){var a=e.length;if(a<=1)return[e];for(var r=[],o,u,c=0;c<a;c++){var p=Ai(e[c]);p!==0&&(u===void 0&&(u=p<0),u===p<0?(o&&r.push(o),o=[e[c]]):o.push(e[c]))}return o&&r.push(o),r}var Rn=["Unknown","Point","LineString","Polygon"];function aa(e,a,r,o,u){var c=u.geometry,p=u.type,g=u.tags,y=u.id,S=e*Math.pow(2,o),O=e*a,D=e*r,V=Rn[p],H,ue;function le(dt){for(var mt=0;mt<dt.length;mt++){var Lt=dt[mt];if(Lt[3])break;var Wt=180-(Lt[1]+D)*360/S,qt=(Lt[0]+O)*360/S-180,ir=360/Math.PI*Math.atan(Math.exp(Wt*Math.PI/180))-90;dt[mt]=[qt,ir,0,1]}}switch(p){case 1:var we=[];for(H=0;H<c.length;H++)we[H]=c[H][0];c=we,le(c);break;case 2:for(H=0;H<c.length;H++)le(c[H]);break;case 3:for(c=Gn(c),H=0;H<c.length;H++)for(ue=0;ue<c[H].length;ue++)le(c[H][ue]);break}c.length===1?c=c[0]:V="Multi"+V;var Ne={type:"Feature",geometry:{type:V,coordinates:c},properties:g,id:y,tileOrigin:[0,0],coord:""};return Ne}var to=function(){var e=(0,fn.Z)($t().mark(function a(r,o,u,c){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",new Promise(function(y){var S=o.getTile(r.z,r.x,r.y),O=S?S.features.map(function(H){return aa(c,u.x,u.y,u.z,H)}):[],D={layers:{defaultLayer:{features:O}}},V=new ta(D,r.x,r.y,r.z);y(V)}));case 1:case"end":return g.stop()}},a)}));return function(r,o,u,c){return e.apply(this,arguments)}}();function Oi(e){var a={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return e===void 0||typeof e.geojsonvtOptions=="undefined"?a:(0,te.Z)((0,te.Z)({},a),e.geojsonvtOptions)}function Ka(e,a){var r=Oi(a),o=r.extent||4096,u=Wn(e,r),c=function(y,S){return to(S,u,y,o)},p=(0,te.Z)((0,te.Z)((0,te.Z)({},Ua),a),{},{getTileData:c});return{data:e,dataArray:[],tilesetOptions:p,isTile:!0}}function ka(e,a){var r=a.extent,o=r===void 0?[121.168,30.2828,121.384,30.4219]:r,u=a.requestParameters,c=u===void 0?{}:u,p=new Promise(function(y){e instanceof HTMLImageElement||Ac(e)?y([e]):xa(e,c,function(S){y(S)})}),g={originData:e,images:p,_id:1,dataArray:[{_id:0,coordinates:[[o[0],o[1]],[o[2],o[3]]]}]};return g}function xa(e,a,r){var o=[];if(typeof e=="string")ps((0,te.Z)((0,te.Z)({},a),{},{url:e}),function(p,g){g&&(o.push(g),r(o))});else{var u=e.length,c=0;e.forEach(function(p){ps((0,te.Z)((0,te.Z)({},a),{},{url:p}),function(g,y){c++,y&&o.push(y),c===u&&r(o)})})}return ka}var wo=function(){var e=(0,fn.Z)($t().mark(function a(r,o,u,c){var p,g;return $t().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return p={x:o.x,y:o.y,z:o.z},g=La(r,p),S.abrupt("return",new Promise(function(O){c?c(p,function(D,V){if(D||!V){var H={layers:{defaultLayer:{features:[]}}},ue=new ta(H,o.x,o.y,o.z);O(ue)}else{var le={layers:{defaultLayer:{features:V.features}}},we=new ta(le,o.x,o.y,o.z);O(we)}}):Ro((0,te.Z)((0,te.Z)({},u),{},{url:g}),function(D,V){if(D||!V){var H={layers:{defaultLayer:{features:[]}}},ue=new ta(H,o.x,o.y,o.z);O(ue)}else{var le=JSON.parse(V),we={layers:{defaultLayer:{features:le}}},Ne=new ta(we,o.x,o.y,o.z);O(Ne)}})}));case 3:case"end":return S.stop()}},a)}));return function(r,o,u,c){return e.apply(this,arguments)}}();function pu(e,a){var r=function(c,p){return wo(e,p,a==null?void 0:a.requestParameters,a.getCustomData)},o=(0,te.Z)((0,te.Z)({},a),{},{getTileData:r});return{dataArray:[],tilesetOptions:o,isTile:!0}}var Fu=F(38929),vo=F(3614),ss=F.n(vo),Uo=function(){function e(a,r,o,u){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"vectorLayerCache",{}),this.x=r,this.y=o,this.z=u,this.vectorTile=new Fu.VectorTile(new(ss())(a))}return(0,at.Z)(e,[{key:"getTileData",value:function(r){if(!r||!this.vectorTile.layers[r])return[];if(this.vectorLayerCache[r])return this.vectorLayerCache[r];var o=this.vectorTile.layers[r];if(Array.isArray(o.features))return this.vectorLayerCache[r]=o.features,o.features;for(var u=[],c=0;c<o.length;c++){var p=o.feature(c),g=p.toGeoJSON(this.x,this.y,this.z);u.push((0,te.Z)((0,te.Z)({},g),{},{properties:(0,te.Z)({id:g.id},g.properties)}))}return this.vectorLayerCache[r]=u,u}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),e}(),du={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},zs=function(){var e=(0,fn.Z)($t().mark(function a(r,o,u,c,p){var g;return $t().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return g=La(r,o),S.abrupt("return",new Promise(function(O){if(p)p({x:u.x,y:u.y,z:u.z},function(V,H){if(V||!H)O(void 0);else{var ue=new Uo(H,u.x,u.y,u.z);O(ue)}});else{var D=hs((0,te.Z)((0,te.Z)({},c),{},{url:g}),function(V,H){if(V||!H)O(void 0);else{var ue=new Uo(H,u.x,u.y,u.z);O(ue)}});u.xhrCancel=function(){return D.cancel()}}}));case 2:case"end":return S.stop()}},a)}));return function(r,o,u,c,p){return e.apply(this,arguments)}}();function Fs(e,a){var r=Array.isArray(e)?e[0]:e,o=function(p,g){return zs(r,p,g,a==null?void 0:a.requestParameters,a==null?void 0:a.getCustomData)},u=(0,te.Z)((0,te.Z)((0,te.Z)({},du),a),{},{getTileData:o});return{data:r,dataArray:[],tilesetOptions:u,isTile:!0}}function $s(e,a,r){switch(e){case"+":return a+r;case"-":return a-r;case"*":return a*r;case"/":return a/r;case"%":return a%r;case"^":return Math.pow(a,r);case"abs":return Math.abs(a);case"floor":return Math.floor(a);case"round":return Math.round(a);case"ceil":return Math.ceil(a);case"sin":return Math.sin(a);case"cos":return Math.cos(a);case"atan":return r===-1?Math.atan(a):Math.atan2(a,r);case"min":return Math.min(a,r);case"max":return Math.max(a,r);case"log10":return Math.log(a);case"log2":return Math.log2(a);default:return console.warn("Calculate symbol err! Return default 0"),0}}function Ys(e,a){for(var r=a[0],o=r.width,u=r.height,c=a.map(function(H){return H.rasterData}),p=o*u,g=[],y=JSON.stringify(e),S=0;S<p;S++){var O=JSON.parse(y),D=Ks(O,c,S);if(typeof D=="number")g.push(D);else{var V=Tu(O);g.push(V)}}return g}function Ks(e,a,r){if(e.length===2&&e[0]==="band"&&typeof e[1]=="number")try{return a[e[1]][r]}catch(o){return console.warn("Raster Data err!"),0}e.map(function(o,u){if(Array.isArray(o)&&o.length>0)switch(o[0]){case"band":try{e[u]=a[o[1]][r]}catch(c){console.warn("Raster Data err!"),e[u]=0}break;default:Ks(o,a,r)}})}function qa(e){var a=(0,Vi.Z)(e,3),r=a[0],o=a[1],u=o===void 0?-1:o,c=a[2],p=c===void 0?-1:c;if(r===void 0)return console.warn("Express err!"),["+",0,0];var g=r.replace(/\s+/g,"");return[g,u,p]}function Tu(e){var a=qa(e),r=a[0],o=a[1],u=a[2];return Array.isArray(o)&&(o=Tu(e[1])),Array.isArray(u)&&(u=Tu(e[2])),$s(r,o,u)}var ko={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:ma}};function ma(e,a){for(var r=e[0].rasterData,o=e[1].rasterData,u=e[2].rasterData,c=[],p=(a==null?void 0:a.countCut)||[2,98],g=(0,Vi.Z)(p,2),y=g[0],S=g[1],O=(a==null?void 0:a.RMinMax)||da(r,y,S),D=(a==null?void 0:a.GMinMax)||da(o,y,S),V=(a==null?void 0:a.BMinMax)||da(u,y,S),H=0;H<r.length;H++)c.push(Math.max(0,r[H]-O[0])),c.push(Math.max(0,o[H]-D[0])),c.push(Math.max(0,u[H]-V[0]));return{rasterData:c,rMinMax:O,gMinMax:D,bMinMax:V}}function da(e,a,r){var o=e.slice().sort(function(g,y){return g-y}),u=o.length,c=o[Math.ceil(u*a/100)],p=o[Math.ceil(u*r/100)];return[c,p]}function So(e,a,r){return Us.apply(this,arguments)}function Us(){return Us=(0,fn.Z)($t().mark(function e(a,r,o){var u,c,p,g,y,S;return $t().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(a.length!==0){D.next=2;break}return D.abrupt("return",{rasterData:[0],width:1,heigh:1});case 2:return D.next=4,Promise.all(a.map(function(V){var H=V.data,ue=V.bands,le=ue===void 0?[0]:ue;return r(H,le)}));case 4:u=D.sent,c=[],u.forEach(function(V){Array.isArray(V)?c.push.apply(c,(0,Sn.Z)(V)):c.push(V)}),p=c[0],g=p.width,y=p.height,D.t0=(0,_f.Z)(o),D.next=D.t0==="function"?11:D.t0==="object"?13:15;break;case 11:return S=o(c),D.abrupt("break",16);case 13:return Array.isArray(o)?S={rasterData:Ys(o,c)}:S=Du(o,c),D.abrupt("break",16);case 15:S={rasterData:c[0].rasterData};case 16:return D.abrupt("return",(0,te.Z)((0,te.Z)({},S),{},{width:g,height:y}));case 17:case"end":return D.stop()}},e)})),Us.apply(this,arguments)}function Du(e,a){var r=ko[e.type];if(r.type==="function")return r.method(a,e==null?void 0:e.options);if(r.type==="operation")return e.type==="rgb"?ur(r.expression,a):{rasterData:Ys(r.expression,a)}}function ur(e,a){e.r===void 0&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),e.g===void 0&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),e.b===void 0&&console.warn("Channel B lost in Operation! Use band[0] to fill!");var r=Ys(e.r||["band",0],a),o=Ys(e.g||["band",0],a),u=Ys(e.b||["band",0],a);return[r,o,u]}function ln(e,a,r,o){return qr.apply(this,arguments)}function qr(){return qr=(0,fn.Z)($t().mark(function e(a,r,o,u){var c;return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,So(a,r,o);case 2:c=g.sent,u(null,{data:c});case 4:case"end":return g.stop()}},e)})),qr.apply(this,arguments)}function ki(e,a){var r=a.extent,o=a.width,u=a.height,c=a.min,p=a.max,g=a.format,y=a.operation,S,O,D;if(g===void 0||pg(e))S=Array.from(e),O=o,D=u;else{var V=Array.isArray(e)?e:[e];S=So(V,g,y)}var H={_id:1,dataArray:[{_id:1,data:S,width:O,height:D,min:c,max:p,coordinates:[[r[0],r[1]],[r[2],r[3]]]}]};return H}var Ja=F(28660),Tn=F(86700),Bt=F(84879),ut={IEventEmitter:Symbol.for("IEventEmitter"),ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),IDebugService:Symbol.for("IDebugService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),IMapService:Symbol.for("IMapService"),IMarkerService:Symbol.for("IMarkerService"),IPopupService:Symbol.for("PopupService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IPickingService:Symbol.for("IPickingService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayer:Symbol.for("ILayer"),ILayerPlugin:Symbol.for("ILayerPlugin"),INormalPass:Symbol.for("INormalPass"),IPostProcessor:Symbol.for("IPostProcessor"),IPostProcessingPass:Symbol.for("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol.for("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol.for("IMultiPassRenderer"),SceneID:Symbol.for("SceneID"),MapConfig:Symbol.for("MapConfig")},hr=F(49296),rn=F.n(hr);function $r(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Ar(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function Ar(e,a){if(e){if(typeof e=="string")return Ir(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ir(e,a)}}function Ir(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var Lr=30;function lr(e){var a=e.characterSet,r=e.getFontWidth,o=e.fontHeight,u=e.buffer,c=e.maxCanvasWidth,p=e.mapping,g=p===void 0?{}:p,y=e.xOffset,S=y===void 0?0:y,O=e.yOffset,D=O===void 0?0:O,V=0,H=S;Array.from(a).forEach(function(le,we){if(!g[le]){var Ne=r(le,we);H+Lr>c&&(H=0,V++),g[le]={x:H,y:D+V*Lr,width:Lr,height:Lr,advance:Ne},H+=Lr}});var ue=o+u*2;return{mapping:g,xOffset:H,yOffset:D+V*ue,canvasHeight:Pr(D+(V+1)*ue)}}function Rr(e,a,r){var o=0,u=0,c=0,p=[],g={},y=$r(e),S;try{for(y.s();!(S=y.n()).done;){var O=S.value;if(!g[O.id]){var D=O.size;o+D+a>r&&(Yt(g,p,u),o=0,u=c+u+a,c=0,p=[]),p.push({icon:O,xOffset:o}),o=o+D+a,c=Math.max(c,D)}}}catch(H){y.e(H)}finally{y.f()}p.length>0&&Yt(g,p,u);var V=Pr(c+u+a);return{mapping:g,canvasHeight:V}}function Yt(e,a,r){var o=$r(a),u;try{for(o.s();!(u=o.n()).done;){var c=u.value,p=c.icon,g=c.xOffset;e[p.id]=(0,te.Z)((0,te.Z)({},p),{},{x:g,y:r,image:p.image,width:p.width,height:p.height})}}catch(y){o.e(y)}finally{o.f()}}function Pr(e){return Math.pow(2,Math.ceil(Math.log2(e)))}var pn,dn;function Zn(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Bn(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function Bn(e,a){if(e){if(typeof e=="string")return Hn(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hn(e,a)}}function Hn(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}function qi(e){var a=Fn();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function Fn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var ji=d_(),ya="sans-serif",Fa="normal",Fo=24,Ha=3,Wl=.25,gg=8,Fc=1024,xm=1,xf=1,bm=3,Sm=null;function d_(){for(var e=[],a=32;a<128;a++)e.push(String.fromCharCode(a));return e}function mg(e,a,r,o){e.font="".concat(o," ").concat(r,"px ").concat(a),e.fillStyle="black",e.textBaseline="middle"}function Dp(e,a){for(var r=0;r<e.length;r++)a.data[4*r+3]=e[r]}var Wd=(pn=(0,Tn.b2)(),pn(dn=function(e){(0,mr.Z)(r,e);var a=qi(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"fontAtlas",void 0),(0,Fe.Z)((0,vr.Z)(o),"iconFontMap",void 0),(0,Fe.Z)((0,vr.Z)(o),"iconFontGlyphs",{}),(0,Fe.Z)((0,vr.Z)(o),"fontOptions",void 0),(0,Fe.Z)((0,vr.Z)(o),"key",void 0),(0,Fe.Z)((0,vr.Z)(o),"cache",new Lf(bm)),o}return(0,at.Z)(r,[{key:"scale",get:function(){return xf}},{key:"canvas",get:function(){var u=this.cache.get(this.key);return u&&u.data}},{key:"mapping",get:function(){var u=this.cache.get(this.key);return u&&u.mapping||{}}},{key:"getCanvasByKey",value:function(u){var c=this.cache.get(u);return c&&c.data}},{key:"getMappingByKey",value:function(u){var c=this.cache.get(u);return c&&c.mapping||{}}},{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:ya,fontWeight:Fa,characterSet:ji,fontSize:Fo,buffer:Ha,sdf:!0,cutoff:Wl,radius:gg,iconfont:!1},this.key="",this.iconFontMap=new Map}},{key:"addIconGlyphs",value:function(u){var c=this;u.forEach(function(p){c.iconFontGlyphs[p.name]=p.unicode})}},{key:"addIconFont",value:function(u,c){this.iconFontMap.set(u,c)}},{key:"getIconFontKey",value:function(u){return this.iconFontMap.get(u)||u}},{key:"getGlyph",value:function(u){return this.iconFontGlyphs[u]?String.fromCharCode(parseInt(this.iconFontGlyphs[u],16)):""}},{key:"setFontOptions",value:function(u){this.fontOptions=(0,te.Z)((0,te.Z)({},this.fontOptions),u),this.key=this.getKey();var c=this.getNewChars(this.key,this.fontOptions.characterSet),p=this.cache.get(this.key);if(!(p&&c.length===0)){var g=this.generateFontAtlas(this.key,c,p);this.fontAtlas=g,this.cache.set(this.key,g)}}},{key:"addFontFace",value:function(u,c){var p=this,g=document.createElement("style");g.type="text/css",g.innerText=`
        @font-face{
            font-family: '`.concat(u,`';
            src: url('`).concat(c,`') format('woff2'),
            url('`).concat(c,`') format('woff'),
            url('`).concat(c,`') format('truetype');
        }`),g.onload=function(){if(document.fonts)try{document.fonts.load("24px ".concat(u),"L7text"),document.fonts.ready.then(function(){p.emit("fontloaded",{fontFamily:u})})}catch(y){console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 document.fonts !"),console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 iconfont !"),console.warn(y)}},document.getElementsByTagName("head")[0].appendChild(g)}},{key:"destroy",value:function(){this.cache.clear(),this.iconFontMap.clear()}},{key:"generateFontAtlas",value:function(u,c,p){var g=this.fontOptions,y=g.fontFamily,S=g.fontWeight,O=g.fontSize,D=g.buffer,V=g.sdf,H=g.radius,ue=g.cutoff,le=g.iconfont,we=p&&p.data;we||(we=window.document.createElement("canvas"),we.width=Fc);var Ne=we.getContext("2d",{willReadFrequently:!0});mg(Ne,y,O,S);var dt=lr((0,te.Z)({getFontWidth:function(Iu){return Ne.measureText(Iu).width},fontHeight:O*xf,buffer:D,characterSet:c,maxCanvasWidth:Fc},p&&{mapping:p.mapping,xOffset:p.xOffset,yOffset:p.yOffset})),mt=dt.mapping,Lt=dt.canvasHeight,Wt=dt.xOffset,qt=dt.yOffset,ir=Ne.getImageData(0,0,we.width,we.height);if(we.height=Lt,Ne.putImageData(ir,0,0),mg(Ne,y,O,S),V){var Sr=new(rn())(O,D,H,ue,y,S),Br=Ne.getImageData(0,0,Sr.size,Sr.size),Jr=Zn(c),en;try{for(Jr.s();!(en=Jr.n()).done;){var Kn=en.value;if(le){var si=String.fromCharCode(parseInt(Kn.replace("&#x","").replace(";",""),16)),Pi=Sr.draw(si);Dp(Pi,Br)}else Dp(Sr.draw(Kn),Br);Ne.putImageData(Br,mt[Kn].x,mt[Kn].y)}}catch(Ru){Jr.e(Ru)}finally{Jr.f()}}else{var so=Zn(c),bs;try{for(so.s();!(bs=so.n()).done;){var Ss=bs.value;Ne.fillText(Ss,mt[Ss].x,mt[Ss].y+O*xm)}}catch(Ru){so.e(Ru)}finally{so.f()}}return{xOffset:Wt,yOffset:qt,mapping:mt,data:we,width:we.width,height:we.height}}},{key:"getKey",value:function(){var u=this.fontOptions,c=u.fontFamily,p=u.fontWeight;return"".concat(c,"_").concat(p)}},{key:"getNewChars",value:function(u,c){var p=this.cache.get(u);if(!p)return c;var g=[],y=p.mapping,S=new Set(Object.keys(y)),O=new Set(c);return O.forEach(function(D){S.has(D)||g.push(D)}),g}}]),r}(Ws.EventEmitter))||dn),yg,Gd;function N0(e){var a=Lu();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function Lu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ds=3,z0=1024,Xd=64,v_=(yg=(0,Tn.b2)(),yg(Gd=function(e){(0,mr.Z)(r,e);var a=N0(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"canvasHeight",128),(0,Fe.Z)((0,vr.Z)(o),"texture",void 0),(0,Fe.Z)((0,vr.Z)(o),"canvas",void 0),(0,Fe.Z)((0,vr.Z)(o),"iconData",void 0),(0,Fe.Z)((0,vr.Z)(o),"iconMap",void 0),(0,Fe.Z)((0,vr.Z)(o),"ctx",void 0),(0,Fe.Z)((0,vr.Z)(o),"loadingImageCount",0),o}return(0,at.Z)(r,[{key:"isLoading",value:function(){return this.loadingImageCount===0}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=window.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(){var o=(0,fn.Z)($t().mark(function c(p,g){var y,S;return $t().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return y=new Image,this.loadingImageCount++,this.hasImage(p)?console.warn("Image Id already exists"):this.iconData.push({id:p,size:Xd}),this.updateIconMap(),D.next=6,this.loadImage(g);case 6:y=D.sent,S=this.iconData.find(function(V){return V.id===p}),S&&(S.image=y,S.width=y.width,S.height=y.height),this.update();case 10:case"end":return D.stop()}},c,this)}));function u(c,p){return o.apply(this,arguments)}return u}()},{key:"addImageMini",value:function(u,c,p){var g=this,y=p.getSceneConfig().canvas,S=y.createImage();if(this.loadingImageCount++,this.hasImage(u))throw new Error("Image Id already exists");this.iconData.push({id:u,size:Xd}),this.updateIconMap(),this.loadImageMini(c,y).then(function(O){S=O;var D=g.iconData.find(function(V){return V.id===u});D&&(D.image=S,D.width=S.width,D.height=S.height),g.update()})}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(u){return this.iconMap.hasOwnProperty(u)}},{key:"removeImage",value:function(u){this.hasImage(u)&&(this.iconData=this.iconData.filter(function(c){return c.id!==u}),delete this.iconMap[u],this.update())}},{key:"destroy",value:function(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}},{key:"loadImage",value:function(u){return new Promise(function(c,p){if(u instanceof HTMLImageElement){c(u);return}var g=new Image;g.crossOrigin="anonymous",g.onload=function(){c(g)},g.onerror=function(){p(new Error("Could not load image at "+u))},g.src=u instanceof File?URL.createObjectURL(u):u})}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var u=this;this.canvas.width=z0,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(c){var p=u.iconMap[c],g=p.x,y=p.y,S=p.image,O=p.width,D=O===void 0?64:O,V=p.height,H=V===void 0?64:V,ue=Math.max(D,H),le=ue/Xd,we=H/le,Ne=D/le;S&&u.ctx.drawImage(S,g+(Xd-Ne)/2,y+(Xd-we)/2,Ne,we)})}},{key:"updateIconMap",value:function(){var u=Rr(this.iconData,Ds,z0),c=u.mapping,p=u.canvasHeight;this.iconMap=c,this.canvasHeight=p}},{key:"loadImageMini",value:function(u,c){return new Promise(function(p,g){var y=c.createImage();y.crossOrigin="anonymous",y.onload=function(){p(y)},y.onerror=function(){g(new Error("Could not load image at "+u))},y.src=u})}}]),r}(Ws.EventEmitter))||Gd),ns=F(49685);function vu(){var e=new ns.WT(16);return ns.WT!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function $d(e){var a=new ns.WT(16);return a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[4]=e[4],a[5]=e[5],a[6]=e[6],a[7]=e[7],a[8]=e[8],a[9]=e[9],a[10]=e[10],a[11]=e[11],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15],a}function gd(e,a){return e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e[4]=a[4],e[5]=a[5],e[6]=a[6],e[7]=a[7],e[8]=a[8],e[9]=a[9],e[10]=a[10],e[11]=a[11],e[12]=a[12],e[13]=a[13],e[14]=a[14],e[15]=a[15],e}function Lp(e,a,r,o,u,c,p,g,y,S,O,D,V,H,ue,le){var we=new ns.WT(16);return we[0]=e,we[1]=a,we[2]=r,we[3]=o,we[4]=u,we[5]=c,we[6]=p,we[7]=g,we[8]=y,we[9]=S,we[10]=O,we[11]=D,we[12]=V,we[13]=H,we[14]=ue,we[15]=le,we}function Em(e,a,r,o,u,c,p,g,y,S,O,D,V,H,ue,le,we){return e[0]=a,e[1]=r,e[2]=o,e[3]=u,e[4]=c,e[5]=p,e[6]=g,e[7]=y,e[8]=S,e[9]=O,e[10]=D,e[11]=V,e[12]=H,e[13]=ue,e[14]=le,e[15]=we,e}function Mu(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _g(e,a){if(e===a){var r=a[1],o=a[2],u=a[3],c=a[6],p=a[7],g=a[11];e[1]=a[4],e[2]=a[8],e[3]=a[12],e[4]=r,e[6]=a[9],e[7]=a[13],e[8]=o,e[9]=c,e[11]=a[14],e[12]=u,e[13]=p,e[14]=g}else e[0]=a[0],e[1]=a[4],e[2]=a[8],e[3]=a[12],e[4]=a[1],e[5]=a[5],e[6]=a[9],e[7]=a[13],e[8]=a[2],e[9]=a[6],e[10]=a[10],e[11]=a[14],e[12]=a[3],e[13]=a[7],e[14]=a[11],e[15]=a[15];return e}function Dc(e,a){var r=a[0],o=a[1],u=a[2],c=a[3],p=a[4],g=a[5],y=a[6],S=a[7],O=a[8],D=a[9],V=a[10],H=a[11],ue=a[12],le=a[13],we=a[14],Ne=a[15],dt=r*g-o*p,mt=r*y-u*p,Lt=r*S-c*p,Wt=o*y-u*g,qt=o*S-c*g,ir=u*S-c*y,Sr=O*le-D*ue,Br=O*we-V*ue,Jr=O*Ne-H*ue,en=D*we-V*le,Kn=D*Ne-H*le,si=V*Ne-H*we,Pi=dt*si-mt*Kn+Lt*en+Wt*Jr-qt*Br+ir*Sr;return Pi?(Pi=1/Pi,e[0]=(g*si-y*Kn+S*en)*Pi,e[1]=(u*Kn-o*si-c*en)*Pi,e[2]=(le*ir-we*qt+Ne*Wt)*Pi,e[3]=(V*qt-D*ir-H*Wt)*Pi,e[4]=(y*Jr-p*si-S*Br)*Pi,e[5]=(r*si-u*Jr+c*Br)*Pi,e[6]=(we*Lt-ue*ir-Ne*mt)*Pi,e[7]=(O*ir-V*Lt+H*mt)*Pi,e[8]=(p*Kn-g*Jr+S*Sr)*Pi,e[9]=(o*Jr-r*Kn-c*Sr)*Pi,e[10]=(ue*qt-le*Lt+Ne*dt)*Pi,e[11]=(D*Lt-O*qt-H*dt)*Pi,e[12]=(g*Br-p*en-y*Sr)*Pi,e[13]=(r*en-o*Br+u*Sr)*Pi,e[14]=(le*mt-ue*Wt-we*dt)*Pi,e[15]=(O*Wt-D*mt+V*dt)*Pi,e):null}function Yd(e,a){var r=a[0],o=a[1],u=a[2],c=a[3],p=a[4],g=a[5],y=a[6],S=a[7],O=a[8],D=a[9],V=a[10],H=a[11],ue=a[12],le=a[13],we=a[14],Ne=a[15];return e[0]=g*(V*Ne-H*we)-D*(y*Ne-S*we)+le*(y*H-S*V),e[1]=-(o*(V*Ne-H*we)-D*(u*Ne-c*we)+le*(u*H-c*V)),e[2]=o*(y*Ne-S*we)-g*(u*Ne-c*we)+le*(u*S-c*y),e[3]=-(o*(y*H-S*V)-g*(u*H-c*V)+D*(u*S-c*y)),e[4]=-(p*(V*Ne-H*we)-O*(y*Ne-S*we)+ue*(y*H-S*V)),e[5]=r*(V*Ne-H*we)-O*(u*Ne-c*we)+ue*(u*H-c*V),e[6]=-(r*(y*Ne-S*we)-p*(u*Ne-c*we)+ue*(u*S-c*y)),e[7]=r*(y*H-S*V)-p*(u*H-c*V)+O*(u*S-c*y),e[8]=p*(D*Ne-H*le)-O*(g*Ne-S*le)+ue*(g*H-S*D),e[9]=-(r*(D*Ne-H*le)-O*(o*Ne-c*le)+ue*(o*H-c*D)),e[10]=r*(g*Ne-S*le)-p*(o*Ne-c*le)+ue*(o*S-c*g),e[11]=-(r*(g*H-S*D)-p*(o*H-c*D)+O*(o*S-c*g)),e[12]=-(p*(D*we-V*le)-O*(g*we-y*le)+ue*(g*V-y*D)),e[13]=r*(D*we-V*le)-O*(o*we-u*le)+ue*(o*V-u*D),e[14]=-(r*(g*we-y*le)-p*(o*we-u*le)+ue*(o*y-u*g)),e[15]=r*(g*V-y*D)-p*(o*V-u*D)+O*(o*y-u*g),e}function jh(e){var a=e[0],r=e[1],o=e[2],u=e[3],c=e[4],p=e[5],g=e[6],y=e[7],S=e[8],O=e[9],D=e[10],V=e[11],H=e[12],ue=e[13],le=e[14],we=e[15],Ne=a*p-r*c,dt=a*g-o*c,mt=a*y-u*c,Lt=r*g-o*p,Wt=r*y-u*p,qt=o*y-u*g,ir=S*ue-O*H,Sr=S*le-D*H,Br=S*we-V*H,Jr=O*le-D*ue,en=O*we-V*ue,Kn=D*we-V*le;return Ne*Kn-dt*en+mt*Jr+Lt*Br-Wt*Sr+qt*ir}function mc(e,a,r){var o=a[0],u=a[1],c=a[2],p=a[3],g=a[4],y=a[5],S=a[6],O=a[7],D=a[8],V=a[9],H=a[10],ue=a[11],le=a[12],we=a[13],Ne=a[14],dt=a[15],mt=r[0],Lt=r[1],Wt=r[2],qt=r[3];return e[0]=mt*o+Lt*g+Wt*D+qt*le,e[1]=mt*u+Lt*y+Wt*V+qt*we,e[2]=mt*c+Lt*S+Wt*H+qt*Ne,e[3]=mt*p+Lt*O+Wt*ue+qt*dt,mt=r[4],Lt=r[5],Wt=r[6],qt=r[7],e[4]=mt*o+Lt*g+Wt*D+qt*le,e[5]=mt*u+Lt*y+Wt*V+qt*we,e[6]=mt*c+Lt*S+Wt*H+qt*Ne,e[7]=mt*p+Lt*O+Wt*ue+qt*dt,mt=r[8],Lt=r[9],Wt=r[10],qt=r[11],e[8]=mt*o+Lt*g+Wt*D+qt*le,e[9]=mt*u+Lt*y+Wt*V+qt*we,e[10]=mt*c+Lt*S+Wt*H+qt*Ne,e[11]=mt*p+Lt*O+Wt*ue+qt*dt,mt=r[12],Lt=r[13],Wt=r[14],qt=r[15],e[12]=mt*o+Lt*g+Wt*D+qt*le,e[13]=mt*u+Lt*y+Wt*V+qt*we,e[14]=mt*c+Lt*S+Wt*H+qt*Ne,e[15]=mt*p+Lt*O+Wt*ue+qt*dt,e}function rl(e,a,r){var o=r[0],u=r[1],c=r[2],p,g,y,S,O,D,V,H,ue,le,we,Ne;return a===e?(e[12]=a[0]*o+a[4]*u+a[8]*c+a[12],e[13]=a[1]*o+a[5]*u+a[9]*c+a[13],e[14]=a[2]*o+a[6]*u+a[10]*c+a[14],e[15]=a[3]*o+a[7]*u+a[11]*c+a[15]):(p=a[0],g=a[1],y=a[2],S=a[3],O=a[4],D=a[5],V=a[6],H=a[7],ue=a[8],le=a[9],we=a[10],Ne=a[11],e[0]=p,e[1]=g,e[2]=y,e[3]=S,e[4]=O,e[5]=D,e[6]=V,e[7]=H,e[8]=ue,e[9]=le,e[10]=we,e[11]=Ne,e[12]=p*o+O*u+ue*c+a[12],e[13]=g*o+D*u+le*c+a[13],e[14]=y*o+V*u+we*c+a[14],e[15]=S*o+H*u+Ne*c+a[15]),e}function Bu(e,a,r){var o=r[0],u=r[1],c=r[2];return e[0]=a[0]*o,e[1]=a[1]*o,e[2]=a[2]*o,e[3]=a[3]*o,e[4]=a[4]*u,e[5]=a[5]*u,e[6]=a[6]*u,e[7]=a[7]*u,e[8]=a[8]*c,e[9]=a[9]*c,e[10]=a[10]*c,e[11]=a[11]*c,e[12]=a[12],e[13]=a[13],e[14]=a[14],e[15]=a[15],e}function g_(e,a,r,o){var u=o[0],c=o[1],p=o[2],g=Math.hypot(u,c,p),y,S,O,D,V,H,ue,le,we,Ne,dt,mt,Lt,Wt,qt,ir,Sr,Br,Jr,en,Kn,si,Pi,so;return g<ns.Ib?null:(g=1/g,u*=g,c*=g,p*=g,y=Math.sin(r),S=Math.cos(r),O=1-S,D=a[0],V=a[1],H=a[2],ue=a[3],le=a[4],we=a[5],Ne=a[6],dt=a[7],mt=a[8],Lt=a[9],Wt=a[10],qt=a[11],ir=u*u*O+S,Sr=c*u*O+p*y,Br=p*u*O-c*y,Jr=u*c*O-p*y,en=c*c*O+S,Kn=p*c*O+u*y,si=u*p*O+c*y,Pi=c*p*O-u*y,so=p*p*O+S,e[0]=D*ir+le*Sr+mt*Br,e[1]=V*ir+we*Sr+Lt*Br,e[2]=H*ir+Ne*Sr+Wt*Br,e[3]=ue*ir+dt*Sr+qt*Br,e[4]=D*Jr+le*en+mt*Kn,e[5]=V*Jr+we*en+Lt*Kn,e[6]=H*Jr+Ne*en+Wt*Kn,e[7]=ue*Jr+dt*en+qt*Kn,e[8]=D*si+le*Pi+mt*so,e[9]=V*si+we*Pi+Lt*so,e[10]=H*si+Ne*Pi+Wt*so,e[11]=ue*si+dt*Pi+qt*so,a!==e&&(e[12]=a[12],e[13]=a[13],e[14]=a[14],e[15]=a[15]),e)}function Wh(e,a,r){var o=Math.sin(r),u=Math.cos(r),c=a[4],p=a[5],g=a[6],y=a[7],S=a[8],O=a[9],D=a[10],V=a[11];return a!==e&&(e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e[12]=a[12],e[13]=a[13],e[14]=a[14],e[15]=a[15]),e[4]=c*u+S*o,e[5]=p*u+O*o,e[6]=g*u+D*o,e[7]=y*u+V*o,e[8]=S*u-c*o,e[9]=O*u-p*o,e[10]=D*u-g*o,e[11]=V*u-y*o,e}function Kd(e,a,r){var o=Math.sin(r),u=Math.cos(r),c=a[0],p=a[1],g=a[2],y=a[3],S=a[8],O=a[9],D=a[10],V=a[11];return a!==e&&(e[4]=a[4],e[5]=a[5],e[6]=a[6],e[7]=a[7],e[12]=a[12],e[13]=a[13],e[14]=a[14],e[15]=a[15]),e[0]=c*u-S*o,e[1]=p*u-O*o,e[2]=g*u-D*o,e[3]=y*u-V*o,e[8]=c*o+S*u,e[9]=p*o+O*u,e[10]=g*o+D*u,e[11]=y*o+V*u,e}function Ya(e,a,r){var o=Math.sin(r),u=Math.cos(r),c=a[0],p=a[1],g=a[2],y=a[3],S=a[4],O=a[5],D=a[6],V=a[7];return a!==e&&(e[8]=a[8],e[9]=a[9],e[10]=a[10],e[11]=a[11],e[12]=a[12],e[13]=a[13],e[14]=a[14],e[15]=a[15]),e[0]=c*u+S*o,e[1]=p*u+O*o,e[2]=g*u+D*o,e[3]=y*u+V*o,e[4]=S*u-c*o,e[5]=O*u-p*o,e[6]=D*u-g*o,e[7]=V*u-y*o,e}function Bp(e,a){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=a[0],e[13]=a[1],e[14]=a[2],e[15]=1,e}function m_(e,a){return e[0]=a[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=a[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function h(e,a,r){var o=r[0],u=r[1],c=r[2],p=Math.hypot(o,u,c),g,y,S;return p<ns.Ib?null:(p=1/p,o*=p,u*=p,c*=p,g=Math.sin(a),y=Math.cos(a),S=1-y,e[0]=o*o*S+y,e[1]=u*o*S+c*g,e[2]=c*o*S-u*g,e[3]=0,e[4]=o*u*S-c*g,e[5]=u*u*S+y,e[6]=c*u*S+o*g,e[7]=0,e[8]=o*c*S+u*g,e[9]=u*c*S-o*g,e[10]=c*c*S+y,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function v(e,a){var r=Math.sin(a),o=Math.cos(a);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _(e,a){var r=Math.sin(a),o=Math.cos(a);return e[0]=o,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function R(e,a){var r=Math.sin(a),o=Math.cos(a);return e[0]=o,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function L(e,a,r){var o=a[0],u=a[1],c=a[2],p=a[3],g=o+o,y=u+u,S=c+c,O=o*g,D=o*y,V=o*S,H=u*y,ue=u*S,le=c*S,we=p*g,Ne=p*y,dt=p*S;return e[0]=1-(H+le),e[1]=D+dt,e[2]=V-Ne,e[3]=0,e[4]=D-dt,e[5]=1-(O+le),e[6]=ue+we,e[7]=0,e[8]=V+Ne,e[9]=ue-we,e[10]=1-(O+H),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function z(e,a){var r=new ns.WT(3),o=-a[0],u=-a[1],c=-a[2],p=a[3],g=a[4],y=a[5],S=a[6],O=a[7],D=o*o+u*u+c*c+p*p;return D>0?(r[0]=(g*p+O*o+y*c-S*u)*2/D,r[1]=(y*p+O*u+S*o-g*c)*2/D,r[2]=(S*p+O*c+g*u-y*o)*2/D):(r[0]=(g*p+O*o+y*c-S*u)*2,r[1]=(y*p+O*u+S*o-g*c)*2,r[2]=(S*p+O*c+g*u-y*o)*2),L(e,a,r),e}function j(e,a){return e[0]=a[12],e[1]=a[13],e[2]=a[14],e}function ae(e,a){var r=a[0],o=a[1],u=a[2],c=a[4],p=a[5],g=a[6],y=a[8],S=a[9],O=a[10];return e[0]=Math.hypot(r,o,u),e[1]=Math.hypot(c,p,g),e[2]=Math.hypot(y,S,O),e}function Se(e,a){var r=new ns.WT(3);ae(r,a);var o=1/r[0],u=1/r[1],c=1/r[2],p=a[0]*o,g=a[1]*u,y=a[2]*c,S=a[4]*o,O=a[5]*u,D=a[6]*c,V=a[8]*o,H=a[9]*u,ue=a[10]*c,le=p+O+ue,we=0;return le>0?(we=Math.sqrt(le+1)*2,e[3]=.25*we,e[0]=(D-H)/we,e[1]=(V-y)/we,e[2]=(g-S)/we):p>O&&p>ue?(we=Math.sqrt(1+p-O-ue)*2,e[3]=(D-H)/we,e[0]=.25*we,e[1]=(g+S)/we,e[2]=(V+y)/we):O>ue?(we=Math.sqrt(1+O-p-ue)*2,e[3]=(V-y)/we,e[0]=(g+S)/we,e[1]=.25*we,e[2]=(D+H)/we):(we=Math.sqrt(1+ue-p-O)*2,e[3]=(g-S)/we,e[0]=(V+y)/we,e[1]=(D+H)/we,e[2]=.25*we),e}function He(e,a,r,o){var u=a[0],c=a[1],p=a[2],g=a[3],y=u+u,S=c+c,O=p+p,D=u*y,V=u*S,H=u*O,ue=c*S,le=c*O,we=p*O,Ne=g*y,dt=g*S,mt=g*O,Lt=o[0],Wt=o[1],qt=o[2];return e[0]=(1-(ue+we))*Lt,e[1]=(V+mt)*Lt,e[2]=(H-dt)*Lt,e[3]=0,e[4]=(V-mt)*Wt,e[5]=(1-(D+we))*Wt,e[6]=(le+Ne)*Wt,e[7]=0,e[8]=(H+dt)*qt,e[9]=(le-Ne)*qt,e[10]=(1-(D+ue))*qt,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function rt(e,a,r,o,u){var c=a[0],p=a[1],g=a[2],y=a[3],S=c+c,O=p+p,D=g+g,V=c*S,H=c*O,ue=c*D,le=p*O,we=p*D,Ne=g*D,dt=y*S,mt=y*O,Lt=y*D,Wt=o[0],qt=o[1],ir=o[2],Sr=u[0],Br=u[1],Jr=u[2],en=(1-(le+Ne))*Wt,Kn=(H+Lt)*Wt,si=(ue-mt)*Wt,Pi=(H-Lt)*qt,so=(1-(V+Ne))*qt,bs=(we+dt)*qt,Ss=(ue+mt)*ir,Ru=(we-dt)*ir,Iu=(1-(V+le))*ir;return e[0]=en,e[1]=Kn,e[2]=si,e[3]=0,e[4]=Pi,e[5]=so,e[6]=bs,e[7]=0,e[8]=Ss,e[9]=Ru,e[10]=Iu,e[11]=0,e[12]=r[0]+Sr-(en*Sr+Pi*Br+Ss*Jr),e[13]=r[1]+Br-(Kn*Sr+so*Br+Ru*Jr),e[14]=r[2]+Jr-(si*Sr+bs*Br+Iu*Jr),e[15]=1,e}function ht(e,a){var r=a[0],o=a[1],u=a[2],c=a[3],p=r+r,g=o+o,y=u+u,S=r*p,O=o*p,D=o*g,V=u*p,H=u*g,ue=u*y,le=c*p,we=c*g,Ne=c*y;return e[0]=1-D-ue,e[1]=O+Ne,e[2]=V-we,e[3]=0,e[4]=O-Ne,e[5]=1-S-ue,e[6]=H+le,e[7]=0,e[8]=V+we,e[9]=H-le,e[10]=1-S-D,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Mt(e,a,r,o,u,c,p){var g=1/(r-a),y=1/(u-o),S=1/(c-p);return e[0]=c*2*g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c*2*y,e[6]=0,e[7]=0,e[8]=(r+a)*g,e[9]=(u+o)*y,e[10]=(p+c)*S,e[11]=-1,e[12]=0,e[13]=0,e[14]=p*c*2*S,e[15]=0,e}function Nt(e,a,r,o,u){var c=1/Math.tan(a/2),p;return e[0]=c/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,u!=null&&u!==1/0?(p=1/(o-u),e[10]=(u+o)*p,e[14]=2*u*o*p):(e[10]=-1,e[14]=-2*o),e}var er=Nt;function ar(e,a,r,o,u){var c=1/Math.tan(a/2),p;return e[0]=c/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,u!=null&&u!==1/0?(p=1/(o-u),e[10]=u*p,e[14]=u*o*p):(e[10]=-1,e[14]=-o),e}function Mr(e,a,r,o){var u=Math.tan(a.upDegrees*Math.PI/180),c=Math.tan(a.downDegrees*Math.PI/180),p=Math.tan(a.leftDegrees*Math.PI/180),g=Math.tan(a.rightDegrees*Math.PI/180),y=2/(p+g),S=2/(u+c);return e[0]=y,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=S,e[6]=0,e[7]=0,e[8]=-((p-g)*y*.5),e[9]=(u-c)*S*.5,e[10]=o/(r-o),e[11]=-1,e[12]=0,e[13]=0,e[14]=o*r/(r-o),e[15]=0,e}function _r(e,a,r,o,u,c,p){var g=1/(a-r),y=1/(o-u),S=1/(c-p);return e[0]=-2*g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*y,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*S,e[11]=0,e[12]=(a+r)*g,e[13]=(u+o)*y,e[14]=(p+c)*S,e[15]=1,e}var Ur=_r;function Kr(e,a,r,o,u,c,p){var g=1/(a-r),y=1/(o-u),S=1/(c-p);return e[0]=-2*g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*y,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=S,e[11]=0,e[12]=(a+r)*g,e[13]=(u+o)*y,e[14]=c*S,e[15]=1,e}function nn(e,a,r,o){var u,c,p,g,y,S,O,D,V,H,ue=a[0],le=a[1],we=a[2],Ne=o[0],dt=o[1],mt=o[2],Lt=r[0],Wt=r[1],qt=r[2];return Math.abs(ue-Lt)<ns.Ib&&Math.abs(le-Wt)<ns.Ib&&Math.abs(we-qt)<ns.Ib?Mu(e):(O=ue-Lt,D=le-Wt,V=we-qt,H=1/Math.hypot(O,D,V),O*=H,D*=H,V*=H,u=dt*V-mt*D,c=mt*O-Ne*V,p=Ne*D-dt*O,H=Math.hypot(u,c,p),H?(H=1/H,u*=H,c*=H,p*=H):(u=0,c=0,p=0),g=D*p-V*c,y=V*u-O*p,S=O*c-D*u,H=Math.hypot(g,y,S),H?(H=1/H,g*=H,y*=H,S*=H):(g=0,y=0,S=0),e[0]=u,e[1]=g,e[2]=O,e[3]=0,e[4]=c,e[5]=y,e[6]=D,e[7]=0,e[8]=p,e[9]=S,e[10]=V,e[11]=0,e[12]=-(u*ue+c*le+p*we),e[13]=-(g*ue+y*le+S*we),e[14]=-(O*ue+D*le+V*we),e[15]=1,e)}function yn(e,a,r,o){var u=a[0],c=a[1],p=a[2],g=o[0],y=o[1],S=o[2],O=u-r[0],D=c-r[1],V=p-r[2],H=O*O+D*D+V*V;H>0&&(H=1/Math.sqrt(H),O*=H,D*=H,V*=H);var ue=y*V-S*D,le=S*O-g*V,we=g*D-y*O;return H=ue*ue+le*le+we*we,H>0&&(H=1/Math.sqrt(H),ue*=H,le*=H,we*=H),e[0]=ue,e[1]=le,e[2]=we,e[3]=0,e[4]=D*we-V*le,e[5]=V*ue-O*we,e[6]=O*le-D*ue,e[7]=0,e[8]=O,e[9]=D,e[10]=V,e[11]=0,e[12]=u,e[13]=c,e[14]=p,e[15]=1,e}function Pn(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function oi(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function bi(e,a,r){return e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e[3]=a[3]+r[3],e[4]=a[4]+r[4],e[5]=a[5]+r[5],e[6]=a[6]+r[6],e[7]=a[7]+r[7],e[8]=a[8]+r[8],e[9]=a[9]+r[9],e[10]=a[10]+r[10],e[11]=a[11]+r[11],e[12]=a[12]+r[12],e[13]=a[13]+r[13],e[14]=a[14]+r[14],e[15]=a[15]+r[15],e}function Qi(e,a,r){return e[0]=a[0]-r[0],e[1]=a[1]-r[1],e[2]=a[2]-r[2],e[3]=a[3]-r[3],e[4]=a[4]-r[4],e[5]=a[5]-r[5],e[6]=a[6]-r[6],e[7]=a[7]-r[7],e[8]=a[8]-r[8],e[9]=a[9]-r[9],e[10]=a[10]-r[10],e[11]=a[11]-r[11],e[12]=a[12]-r[12],e[13]=a[13]-r[13],e[14]=a[14]-r[14],e[15]=a[15]-r[15],e}function Fi(e,a,r){return e[0]=a[0]*r,e[1]=a[1]*r,e[2]=a[2]*r,e[3]=a[3]*r,e[4]=a[4]*r,e[5]=a[5]*r,e[6]=a[6]*r,e[7]=a[7]*r,e[8]=a[8]*r,e[9]=a[9]*r,e[10]=a[10]*r,e[11]=a[11]*r,e[12]=a[12]*r,e[13]=a[13]*r,e[14]=a[14]*r,e[15]=a[15]*r,e}function ca(e,a,r,o){return e[0]=a[0]+r[0]*o,e[1]=a[1]+r[1]*o,e[2]=a[2]+r[2]*o,e[3]=a[3]+r[3]*o,e[4]=a[4]+r[4]*o,e[5]=a[5]+r[5]*o,e[6]=a[6]+r[6]*o,e[7]=a[7]+r[7]*o,e[8]=a[8]+r[8]*o,e[9]=a[9]+r[9]*o,e[10]=a[10]+r[10]*o,e[11]=a[11]+r[11]*o,e[12]=a[12]+r[12]*o,e[13]=a[13]+r[13]*o,e[14]=a[14]+r[14]*o,e[15]=a[15]+r[15]*o,e}function Ri(e,a){return e[0]===a[0]&&e[1]===a[1]&&e[2]===a[2]&&e[3]===a[3]&&e[4]===a[4]&&e[5]===a[5]&&e[6]===a[6]&&e[7]===a[7]&&e[8]===a[8]&&e[9]===a[9]&&e[10]===a[10]&&e[11]===a[11]&&e[12]===a[12]&&e[13]===a[13]&&e[14]===a[14]&&e[15]===a[15]}function Qa(e,a){var r=e[0],o=e[1],u=e[2],c=e[3],p=e[4],g=e[5],y=e[6],S=e[7],O=e[8],D=e[9],V=e[10],H=e[11],ue=e[12],le=e[13],we=e[14],Ne=e[15],dt=a[0],mt=a[1],Lt=a[2],Wt=a[3],qt=a[4],ir=a[5],Sr=a[6],Br=a[7],Jr=a[8],en=a[9],Kn=a[10],si=a[11],Pi=a[12],so=a[13],bs=a[14],Ss=a[15];return Math.abs(r-dt)<=ns.Ib*Math.max(1,Math.abs(r),Math.abs(dt))&&Math.abs(o-mt)<=ns.Ib*Math.max(1,Math.abs(o),Math.abs(mt))&&Math.abs(u-Lt)<=ns.Ib*Math.max(1,Math.abs(u),Math.abs(Lt))&&Math.abs(c-Wt)<=ns.Ib*Math.max(1,Math.abs(c),Math.abs(Wt))&&Math.abs(p-qt)<=ns.Ib*Math.max(1,Math.abs(p),Math.abs(qt))&&Math.abs(g-ir)<=ns.Ib*Math.max(1,Math.abs(g),Math.abs(ir))&&Math.abs(y-Sr)<=ns.Ib*Math.max(1,Math.abs(y),Math.abs(Sr))&&Math.abs(S-Br)<=ns.Ib*Math.max(1,Math.abs(S),Math.abs(Br))&&Math.abs(O-Jr)<=ns.Ib*Math.max(1,Math.abs(O),Math.abs(Jr))&&Math.abs(D-en)<=ns.Ib*Math.max(1,Math.abs(D),Math.abs(en))&&Math.abs(V-Kn)<=ns.Ib*Math.max(1,Math.abs(V),Math.abs(Kn))&&Math.abs(H-si)<=ns.Ib*Math.max(1,Math.abs(H),Math.abs(si))&&Math.abs(ue-Pi)<=ns.Ib*Math.max(1,Math.abs(ue),Math.abs(Pi))&&Math.abs(le-so)<=ns.Ib*Math.max(1,Math.abs(le),Math.abs(so))&&Math.abs(we-bs)<=ns.Ib*Math.max(1,Math.abs(we),Math.abs(bs))&&Math.abs(Ne-Ss)<=ns.Ib*Math.max(1,Math.abs(Ne),Math.abs(Ss))}var Ji=mc,Wi=Qi,fo,ja,io=(fo=(0,Tn.b2)(),fo(ja=function(){function e(){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"viewport",void 0),(0,Fe.Z)(this,"overridedViewProjectionMatrix",void 0),(0,Fe.Z)(this,"jitteredViewProjectionMatrix",void 0),(0,Fe.Z)(this,"jitteredProjectionMatrix",void 0),(0,Fe.Z)(this,"viewMatrixInverse",void 0),(0,Fe.Z)(this,"cameraPosition",void 0)}return(0,at.Z)(e,[{key:"init",value:function(){}},{key:"update",value:function(r){this.viewport=r,this.viewMatrixInverse=vu(),Dc(this.viewMatrixInverse,r.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getModelMatrix",value:function(){return this.viewport.getModelMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var r=this.viewport.getCenter(),o=(0,Vi.Z)(r,2),u=o[0],c=o[1];return[u,c]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(r,o){return this.viewport.projectFlat(r,o)}},{key:"setViewProjectionMatrix",value:function(r){this.overridedViewProjectionMatrix=r}},{key:"jitterProjectionMatrix",value:function(r,o){var u=Bp(vu(),[r,o,0]);this.jitteredProjectionMatrix=mc(vu(),u,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=mc(vu(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),e}())||ja),fi=function(e){return e.TOPRIGHT="topright",e.TOPLEFT="topleft",e.BOTTOMRIGHT="bottomright",e.BOTTOMLEFT="bottomleft",e.TOPCENTER="topcenter",e.BOTTOMCENTER="bottomcenter",e.LEFTCENTER="leftcenter",e.RIGHTCENTER="rightcenter",e.LEFTTOP="lefttop",e.RIGHTTOP="righttop",e.LEFTBOTTOM="leftbottom",e.RIGHTBOTTOM="rightbottom",e}({}),Ao,Ms;function qs(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ms(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function ms(e,a){if(e){if(typeof e=="string")return ys(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ys(e,a)}}function ys(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var nu={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"},Ls=(Ao=(0,Tn.b2)(),Ao(Ms=function(){function e(){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"container",void 0),(0,Fe.Z)(this,"controlCorners",void 0),(0,Fe.Z)(this,"controlContainer",void 0),(0,Fe.Z)(this,"scene",void 0),(0,Fe.Z)(this,"mapsService",void 0),(0,Fe.Z)(this,"controls",[]),(0,Fe.Z)(this,"unAddControls",[])}return(0,at.Z)(e,[{key:"init",value:function(r,o){this.container=r.container,this.scene=o,this.mapsService=o.get(ut.IMapService),this.initControlPos()}},{key:"addControl",value:function(r,o){var u=o.get(ut.IMapService);u.map?(r.addTo(this.scene),this.controls.push(r)):this.unAddControls.push(r)}},{key:"getControlByName",value:function(r){return this.controls.find(function(o){return o.controlOption.name===r})}},{key:"removeControl",value:function(r){var o=this.controls.indexOf(r);return o>-1&&this.controls.splice(o,1),r.remove(),this}},{key:"addControls",value:function(){var r=this;this.unAddControls.forEach(function(o){o.addTo(r.scene),r.controls.push(o)}),this.unAddControls=[]}},{key:"destroy",value:function(){var r=qs(this.controls),o;try{for(r.s();!(o=r.n()).done;){var u=o.value;u.remove()}}catch(c){r.e(c)}finally{r.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var r=this.controlCorners={},o="l7-",u=this.controlContainer=Ns("div",o+"control-container",this.container);function c(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],y=g.map(function(S){return o+S}).join(" ");r[g.filter(function(S){return!["row","column"].includes(S)}).join("")]=Ns("div",y,u)}function p(g){var y=g.replace(/^(top|bottom|left|right|center)/,"$1-").split("-");return[].concat((0,Sn.Z)(y),[nu[g]])}Object.values(fi).forEach(function(g){c(p(g))}),this.checkCornerOverlap()}},{key:"clearControlPos",value:function(){for(var r in this.controlCorners)this.controlCorners[r]&&sc(this.controlCorners[r]);this.controlContainer&&sc(this.controlContainer)}},{key:"checkCornerOverlap",value:function(){var r=this,o=window.MutationObserver;if(o)for(var u=function(){var y=p[c],S=y.match(/^(top|bottom)(left|right)$/);if(S){var O=(0,Vi.Z)(S,3),D=O[1],V=O[2],H=r.controlCorners["".concat(D).concat(V)],ue=new o(function(le){var we=(0,Vi.Z)(le,1),Ne=we[0].target;H&&(H.style[D]=Ne.clientHeight+"px")});ue.observe(r.controlCorners["".concat(V).concat(D)],{childList:!0,attributes:!0})}},c=0,p=Object.keys(this.controlCorners);c<p.length;c++)u()}}]),e}())||Ms),iu,Nu,nl=(iu=(0,Tn.b2)(),iu(Nu=function(){function e(){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"container",void 0),(0,Fe.Z)(this,"scene",void 0),(0,Fe.Z)(this,"mapsService",void 0),(0,Fe.Z)(this,"markers",[]),(0,Fe.Z)(this,"markerLayers",[]),(0,Fe.Z)(this,"unAddMarkers",[]),(0,Fe.Z)(this,"unAddMarkerLayers",[])}return(0,at.Z)(e,[{key:"addMarkerLayer",value:function(r){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(r),r.addTo(this.scene)):this.unAddMarkerLayers.push(r)}},{key:"removeMarkerLayer",value:function(r){r.destroy(),this.markerLayers.indexOf(r);var o=this.markerLayers.indexOf(r);o>-1&&this.markerLayers.splice(o,1)}},{key:"addMarker",value:function(r){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(r),r.addTo(this.scene)):this.unAddMarkers.push(r)}},{key:"addMarkers",value:function(){var r=this;this.unAddMarkers.forEach(function(o){o.addTo(r.scene),r.markers.push(o)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var r=this;this.unAddMarkerLayers.forEach(function(o){r.markerLayers.push(o),o.addTo(r.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(r){r.remove(),this.markers.indexOf(r);var o=this.markers.indexOf(r);o>-1&&this.markers.splice(o,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(r){this.scene=r,this.mapsService=r.get(ut.IMapService)}},{key:"destroy",value:function(){this.markers.forEach(function(r){r.remove()}),this.markers=[],this.markerLayers.forEach(function(r){r.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(r){r.destroy()}}]),e}())||Nu),il,gu,al=(il=(0,Tn.b2)(),il(gu=function(){function e(){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"scene",void 0),(0,Fe.Z)(this,"mapsService",void 0),(0,Fe.Z)(this,"popups",[]),(0,Fe.Z)(this,"unAddPopups",[])}return(0,at.Z)(e,[{key:"isMarkerReady",get:function(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}},{key:"removePopup",value:function(r){r!=null&&r.isOpen()&&r.remove();var o=this.popups.indexOf(r);o>-1&&this.popups.splice(o,1);var u=this.unAddPopups.indexOf(r);u>-1&&this.unAddPopups.splice(u,1)}},{key:"destroy",value:function(){this.popups.forEach(function(r){return r.remove()})}},{key:"addPopup",value:function(r){var o=this;r&&r.getOptions().autoClose&&[].concat((0,Sn.Z)(this.popups),(0,Sn.Z)(this.unAddPopups)).forEach(function(u){u.getOptions().autoClose&&o.removePopup(u)}),this.isMarkerReady?(r.addTo(this.scene),this.popups.push(r)):this.unAddPopups.push(r),r.on("close",function(){o.removePopup(r)})}},{key:"initPopup",value:function(){var r=this;this.unAddPopups.length&&this.unAddPopups.forEach(function(o){r.addPopup(o),r.unAddPopups=[]})}},{key:"init",value:function(r){this.scene=r,this.mapsService=r.get(ut.IMapService)}}]),e}())||gu),Ba=function(e){return e.normal="normal",e.additive="additive",e.subtractive="subtractive",e.min="min",e.max="max",e.none="none",e}({}),Do=function(e){return e.MULTIPLE="MULTIPLE",e.SINGLE="SINGLE",e}({}),Ho=function(e){return e.AND="and",e.OR="or",e}({}),Na=function(e){return e.INIT="init",e.UPDATE="update",e}({}),Gl={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo \u6D4B\u8BD5 Token, \u751F\u4EA7\u73AF\u5883\u52A1\u5FC5\u81EA\u884C\u6CE8\u518C Token \u786E\u4FDD\u670D\u52A1\u7A33\u5B9A \u9AD8\u5FB7\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://lbs.amap.com/api/javascript-api/guide/abc/prepare  Mapbox\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://docs.mapbox.com/help/glossary/access-token/",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"},Pl=Gl,_s,au,Ol=wa.merge,Co={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},Hf={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",maskLayers:[],enableMask:!0,maskOperation:Ho.AND,pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0},vl=(_s=(0,Tn.b2)(),_s(au=function(){function e(){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"sceneConfigCache",{}),(0,Fe.Z)(this,"layerConfigCache",{}),(0,Fe.Z)(this,"layerAttributeConfigCache",{})}return(0,at.Z)(e,[{key:"getSceneConfig",value:function(r){return this.sceneConfigCache[r]}},{key:"getSceneWarninfo",value:function(r){return Pl[r]}},{key:"setSceneConfig",value:function(r,o){this.sceneConfigCache[r]=(0,te.Z)((0,te.Z)({},Co),o)}},{key:"getLayerConfig",value:function(r){return this.layerConfigCache[r]}},{key:"setLayerConfig",value:function(r,o,u){this.layerConfigCache[o]=(0,te.Z)({},Ol({},this.sceneConfigCache[r],Hf,u))}},{key:"getAttributeConfig",value:function(r){return this.layerAttributeConfigCache[r]}},{key:"setAttributeConfig",value:function(r,o){this.layerAttributeConfigCache[r]=(0,te.Z)((0,te.Z)({},this.layerAttributeConfigCache[r]),o)}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),e}())||au);function Za(e,a,r,o){r&&Object.defineProperty(e,a,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function ra(e,a,r,o,u){var c={};return Object.keys(o).forEach(function(p){c[p]=o[p]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=r.slice().reverse().reduce(function(p,g){return g(e,a,p)||p},c),u&&c.initializer!==void 0&&(c.value=c.initializer?c.initializer.call(u):void 0,c.initializer=void 0),c.initializer===void 0&&(Object.defineProperty(e,a,c),c=null),c}function _h(){var e=new ns.WT(4);return ns.WT!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function jf(e){var a=new glMatrix.ARRAY_TYPE(4);return a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a}function Np(e,a,r,o){var u=new ns.WT(4);return u[0]=e,u[1]=a,u[2]=r,u[3]=o,u}function qd(e,a){return e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e}function xg(e,a,r,o,u){return e[0]=a,e[1]=r,e[2]=o,e[3]=u,e}function zp(e,a,r){return e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e[3]=a[3]+r[3],e}function Qd(e,a,r){return e[0]=a[0]-r[0],e[1]=a[1]-r[1],e[2]=a[2]-r[2],e[3]=a[3]-r[3],e}function wm(e,a,r){return e[0]=a[0]*r[0],e[1]=a[1]*r[1],e[2]=a[2]*r[2],e[3]=a[3]*r[3],e}function md(e,a,r){return e[0]=a[0]/r[0],e[1]=a[1]/r[1],e[2]=a[2]/r[2],e[3]=a[3]/r[3],e}function bg(e,a){return e[0]=Math.ceil(a[0]),e[1]=Math.ceil(a[1]),e[2]=Math.ceil(a[2]),e[3]=Math.ceil(a[3]),e}function Cm(e,a){return e[0]=Math.floor(a[0]),e[1]=Math.floor(a[1]),e[2]=Math.floor(a[2]),e[3]=Math.floor(a[3]),e}function mu(e,a,r){return e[0]=Math.min(a[0],r[0]),e[1]=Math.min(a[1],r[1]),e[2]=Math.min(a[2],r[2]),e[3]=Math.min(a[3],r[3]),e}function Up(e,a,r){return e[0]=Math.max(a[0],r[0]),e[1]=Math.max(a[1],r[1]),e[2]=Math.max(a[2],r[2]),e[3]=Math.max(a[3],r[3]),e}function Pv(e,a){return e[0]=Math.round(a[0]),e[1]=Math.round(a[1]),e[2]=Math.round(a[2]),e[3]=Math.round(a[3]),e}function Ov(e,a,r){return e[0]=a[0]*r,e[1]=a[1]*r,e[2]=a[2]*r,e[3]=a[3]*r,e}function yd(e,a,r,o){return e[0]=a[0]+r[0]*o,e[1]=a[1]+r[1]*o,e[2]=a[2]+r[2]*o,e[3]=a[3]+r[3]*o,e}function Sg(e,a){var r=a[0]-e[0],o=a[1]-e[1],u=a[2]-e[2],c=a[3]-e[3];return Math.hypot(r,o,u,c)}function Eg(e,a){var r=a[0]-e[0],o=a[1]-e[1],u=a[2]-e[2],c=a[3]-e[3];return r*r+o*o+u*u+c*c}function U0(e){var a=e[0],r=e[1],o=e[2],u=e[3];return Math.hypot(a,r,o,u)}function wg(e){var a=e[0],r=e[1],o=e[2],u=e[3];return a*a+r*r+o*o+u*u}function Z0(e,a){return e[0]=-a[0],e[1]=-a[1],e[2]=-a[2],e[3]=-a[3],e}function y_(e,a){return e[0]=1/a[0],e[1]=1/a[1],e[2]=1/a[2],e[3]=1/a[3],e}function V0(e,a){var r=a[0],o=a[1],u=a[2],c=a[3],p=r*r+o*o+u*u+c*c;return p>0&&(p=1/Math.sqrt(p)),e[0]=r*p,e[1]=o*p,e[2]=u*p,e[3]=c*p,e}function ec(e,a){return e[0]*a[0]+e[1]*a[1]+e[2]*a[2]+e[3]*a[3]}function xh(e,a,r,o){var u=r[0]*o[1]-r[1]*o[0],c=r[0]*o[2]-r[2]*o[0],p=r[0]*o[3]-r[3]*o[0],g=r[1]*o[2]-r[2]*o[1],y=r[1]*o[3]-r[3]*o[1],S=r[2]*o[3]-r[3]*o[2],O=a[0],D=a[1],V=a[2],H=a[3];return e[0]=D*S-V*y+H*g,e[1]=-(O*S)+V*p-H*c,e[2]=O*y-D*p+H*u,e[3]=-(O*g)+D*c-V*u,e}function Jo(e,a,r,o){var u=a[0],c=a[1],p=a[2],g=a[3];return e[0]=u+o*(r[0]-u),e[1]=c+o*(r[1]-c),e[2]=p+o*(r[2]-p),e[3]=g+o*(r[3]-g),e}function Lc(e,a){a=a||1;var r,o,u,c,p,g;do r=glMatrix.RANDOM()*2-1,o=glMatrix.RANDOM()*2-1,p=r*r+o*o;while(p>=1);do u=glMatrix.RANDOM()*2-1,c=glMatrix.RANDOM()*2-1,g=u*u+c*c;while(g>=1);var y=Math.sqrt((1-p)/g);return e[0]=a*r,e[1]=a*o,e[2]=a*u*y,e[3]=a*c*y,e}function Gh(e,a,r){var o=a[0],u=a[1],c=a[2],p=a[3];return e[0]=r[0]*o+r[4]*u+r[8]*c+r[12]*p,e[1]=r[1]*o+r[5]*u+r[9]*c+r[13]*p,e[2]=r[2]*o+r[6]*u+r[10]*c+r[14]*p,e[3]=r[3]*o+r[7]*u+r[11]*c+r[15]*p,e}function Cg(e,a,r){var o=a[0],u=a[1],c=a[2],p=r[0],g=r[1],y=r[2],S=r[3],O=S*o+g*c-y*u,D=S*u+y*o-p*c,V=S*c+p*u-g*o,H=-p*o-g*u-y*c;return e[0]=O*S+H*-p+D*-y-V*-g,e[1]=D*S+H*-g+V*-p-O*-y,e[2]=V*S+H*-y+O*-g-D*-p,e[3]=a[3],e}function Am(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function kv(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function Tm(e,a){return e[0]===a[0]&&e[1]===a[1]&&e[2]===a[2]&&e[3]===a[3]}function Fv(e,a){var r=e[0],o=e[1],u=e[2],c=e[3],p=a[0],g=a[1],y=a[2],S=a[3];return Math.abs(r-p)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(o-g)<=glMatrix.EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(u-y)<=glMatrix.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-S)<=glMatrix.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))}var _d=null,Ag=null,__=null,x_=null,b_=null,tE=null,Mm=null,yu=function(){var e=_h();return function(a,r,o,u,c,p){var g,y;for(r||(r=4),o||(o=0),u?y=Math.min(u*r+o,a.length):y=a.length,g=o;g<y;g+=r)e[0]=a[g],e[1]=a[g+1],e[2]=a[g+2],e[3]=a[g+3],c(e,e,p),a[g]=e[0],a[g+1]=e[1],a[g+2]=e[2],a[g+3]=e[3];return a}}(),Jc=Math.PI/180,kx=512,Zp=4003e4;function Rm(e){var a=e.latitude,r=a===void 0?0:a,o=e.zoom,u=o===void 0?0:o,c=e.scale,p=e.highPrecision,g=p===void 0?!1:p,y=e.flipY,S=y===void 0?!1:y;c=c!==void 0?c:Math.pow(2,u);var O={},D=kx*c,V=Math.cos(r*Jc),H=D/360,ue=H/V,le=D/Zp/V;if(O.pixelsPerMeter=[le,-le,le],O.metersPerPixel=[1/le,-1/le,1/le],O.pixelsPerDegree=[H,-ue,le],O.degreesPerPixel=[1/H,-1/ue,1/le],g){var we=Jc*Math.tan(r*Jc)/V,Ne=H*we/2,dt=D/Zp*we,mt=dt/ue*le;O.pixelsPerDegree2=[0,-Ne,dt],O.pixelsPerMeter2=[mt,0,mt],S&&(O.pixelsPerDegree2[1]=-O.pixelsPerDegree2[1],O.pixelsPerMeter2[1]=-O.pixelsPerMeter2[1])}return S&&(O.pixelsPerMeter[1]=-O.pixelsPerMeter[1],O.metersPerPixel[1]=-O.metersPerPixel[1],O.pixelsPerDegree[1]=-O.pixelsPerDegree[1],O.degreesPerPixel[1]=-O.degreesPerPixel[1]),O}var Bc=function(e){return e[e.LNGLAT=1]="LNGLAT",e[e.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",e[e.VECTOR_TILE=3]="VECTOR_TILE",e[e.IDENTITY=4]="IDENTITY",e[e.P20=5]="P20",e[e.P20_OFFSET=6]="P20_OFFSET",e[e.METER_OFFSET=7]="METER_OFFSET",e[e.P20_2=8]="P20_2",e}({}),Xh={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",Mvp:"u_Mvp"},ef,Jd,ev,Vp,xd,Dv=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Im=(ef=(0,Tn.b2)(),Jd=(0,Tn.f3)(ut.ICameraService),ef(ev=(Vp=function(){function e(){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"needRefresh",!0),Za(this,"cameraService",xd,this),(0,Fe.Z)(this,"coordinateSystem",void 0),(0,Fe.Z)(this,"viewportCenter",void 0),(0,Fe.Z)(this,"viewportCenterProjection",void 0),(0,Fe.Z)(this,"pixelsPerDegree",void 0),(0,Fe.Z)(this,"pixelsPerDegree2",void 0),(0,Fe.Z)(this,"pixelsPerMeter",void 0)}return(0,at.Z)(e,[{key:"refresh",value:function(r){var o=this.cameraService.getZoom(),u=this.cameraService.getZoomScale(),c=r||this.cameraService.getCenter(),p=Rm({latitude:c[1],zoom:o}),g=p.pixelsPerMeter,y=p.pixelsPerDegree;this.viewportCenter=c,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=g,this.pixelsPerDegree=y,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===Bc.LNGLAT||this.coordinateSystem===Bc.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===Bc.LNGLAT_OFFSET?this.calculateLnglatOffset(c,o):this.coordinateSystem===Bc.P20_OFFSET&&this.calculateLnglatOffset(c,o,u,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(r){this.coordinateSystem=r}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(r,o,u,c){var p=Rm({latitude:r[1],zoom:o,scale:u,flipY:c,highPrecision:!0}),g=p.pixelsPerMeter,y=p.pixelsPerDegree,S=p.pixelsPerDegree2,O=this.cameraService.getViewMatrix(),D=this.cameraService.getProjectionMatrix(),V=mc([],D,O),H=this.cameraService.projectFlat([Math.fround(r[0]),Math.fround(r[1])],Math.pow(2,o));this.viewportCenterProjection=Gh([],[H[0],H[1],0,1],V),O=this.cameraService.getViewMatrixUncentered()||O,V=mc([],D,O),V=mc([],V,Dv),this.cameraService.setViewProjectionMatrix(V),this.pixelsPerMeter=g,this.pixelsPerDegree=y,this.pixelsPerDegree2=S}}]),e}(),xd=ra(Vp.prototype,"cameraService",[Jd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vp))||ev),Hp,Pm;function H0(e){var a=bd();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function bd(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Om=(Hp=(0,Tn.b2)(),Hp(Pm=function(e){(0,mr.Z)(r,e);var a=H0(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"renderMap",new Map),(0,Fe.Z)((0,vr.Z)(o),"enable",!1),(0,Fe.Z)((0,vr.Z)(o),"renderEnable",!1),(0,Fe.Z)((0,vr.Z)(o),"cacheLogs",{}),o}return(0,at.Z)(r,[{key:"setEnable",value:function(u){this.enable=!!u}},{key:"log",value:function(u,c){var p=this;if(this.enable){var g=u.split("."),y=null;g.forEach(function(S,O){y!==null?(y[S]||(y[S]={}),O!==g.length-1&&(y=y[S])):(p.cacheLogs[S]||(p.cacheLogs[S]={}),O!==g.length-1&&(y=p.cacheLogs[S])),O===g.length-1&&(y[S]=(0,te.Z)((0,te.Z)({time:Date.now()},y[S]),c))})}}},{key:"getLog",value:function(u){var c=this;switch((0,_f.Z)(u)){case"string":return this.cacheLogs[u];case"object":return u.map(function(p){return c.cacheLogs[p]}).filter(function(p){return p!==void 0});case"undefined":return this.cacheLogs}}},{key:"removeLog",value:function(u){delete this.cacheLogs[u]}},{key:"generateRenderUid",value:function(){return this.renderEnable?Ff():""}},{key:"renderDebug",value:function(u){this.renderEnable=u}},{key:"renderStart",value:function(u){if(!(!this.renderEnable||!this.enable)){var c=this.renderMap.get(u)||{};this.renderMap.set(u,(0,te.Z)((0,te.Z)({},c),{},{renderUid:u,renderStart:Date.now()}))}}},{key:"renderEnd",value:function(u){if(!(!this.renderEnable||!this.enable)){var c=this.renderMap.get(u);if(c){var p=c.renderStart,g=Date.now();this.emit("renderEnd",(0,te.Z)((0,te.Z)({},c),{},{renderEnd:g,renderDuration:g-p})),this.renderMap.delete(u)}}}},{key:"destroy",value:function(){this.cacheLogs=null,this.renderMap.clear()}}]),r}(Ws.EventEmitter))||Pm),km=F(50840),kl=F.n(km),zu=function(e){return e.Hover="hover",e.Click="click",e.Select="select",e.Active="active",e.Drag="drag",e}({}),Tg,bh,Fm,Mg,$h;function Lv(e){var a=tv();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function tv(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var rv={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"},Bv=(Tg=(0,Tn.b2)(),bh=(0,Tn.f3)(ut.IMapService),Tg(Fm=(Mg=function(e){(0,mr.Z)(r,e);var a=Lv(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"indragging",!1),Za((0,vr.Z)(o),"mapService",$h,(0,vr.Z)(o)),(0,Fe.Z)((0,vr.Z)(o),"hammertime",void 0),(0,Fe.Z)((0,vr.Z)(o),"lastClickTime",0),(0,Fe.Z)((0,vr.Z)(o),"lastClickXY",[-1,-1]),(0,Fe.Z)((0,vr.Z)(o),"clickTimer",void 0),(0,Fe.Z)((0,vr.Z)(o),"$containter",void 0),(0,Fe.Z)((0,vr.Z)(o),"onDrag",function(g){var y=o.interactionEvent(g);y.type=rv[y.type],y.type==="dragging"?o.indragging=!0:o.indragging=!1,o.emit(zu.Drag,y)}),(0,Fe.Z)((0,vr.Z)(o),"onHammer",function(g){g.srcEvent.stopPropagation();var y=o.interactionEvent(g);o.emit(zu.Hover,y)}),(0,Fe.Z)((0,vr.Z)(o),"onTouch",function(g){var y=g.touches[0];o.onHover({x:y.pageX,y:y.pageY,type:"touch"})}),(0,Fe.Z)((0,vr.Z)(o),"onHover",function(g){var y=g.clientX,S=g.clientY,O=y,D=S,V=g.type,H=o.mapService.getMapContainer();if(H){var ue=H.getBoundingClientRect(),le=ue.top,we=ue.left;O=O-we-H.clientLeft,D=D-le-H.clientTop}var Ne=o.mapService.containerToLngLat([O,D]);if(V==="click"){o.isDoubleTap(O,D,Ne);return}if(V==="touch"){o.isDoubleTap(O,D,Ne);return}V!=="click"&&V!=="dblclick"&&o.emit(zu.Hover,{x:O,y:D,lngLat:Ne,type:V,target:g})}),o}return(0,at.Z)(r,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(zu.Hover)}},{key:"triggerHover",value:function(u){var c=u.x,p=u.y;this.emit(zu.Hover,{x:c,y:p})}},{key:"triggerSelect",value:function(u){this.emit(zu.Select,{featureId:u})}},{key:"triggerActive",value:function(u){this.emit(zu.Active,{featureId:u})}},{key:"handleMiniEvent",value:function(u){this.onHover({clientX:u.touches[0].pageX,clientY:u.touches[0].pageY,type:"touch"})}},{key:"addEventListenerOnMap",value:function(){var u=this.mapService.getMapContainer();if(u){var c=new(kl()).Manager(u);c.add(new(kl()).Tap({event:"dblclick",taps:2})),c.add(new(kl()).Tap({event:"click"})),c.add(new(kl()).Pan({threshold:0,pointers:0})),c.add(new(kl()).Press({})),c.on("dblclick click",this.onHammer),c.on("panstart panmove panend pancancel",this.onDrag),u.addEventListener("mousemove",this.onHover),u.addEventListener("mousedown",this.onHover,!0),u.addEventListener("mouseup",this.onHover),u.addEventListener("contextmenu",this.onHover),this.hammertime=c}}},{key:"removeEventListenerOnMap",value:function(){var u=this.mapService.getMapContainer();u&&(u.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),u.removeEventListener("mousedown",this.onHover),u.removeEventListener("mouseup",this.onHover),u.removeEventListener("contextmenu",this.onHover))}},{key:"interactionEvent",value:function(u){var c=u.type,p=u.pointerType,g,y;p==="touch"?(y=Math.floor(u.pointers[0].clientY),g=Math.floor(u.pointers[0].clientX)):(y=Math.floor(u.srcEvent.y),g=Math.floor(u.srcEvent.x));var S=this.mapService.getMapContainer();if(S){var O=S.getBoundingClientRect(),D=O.top,V=O.left;g-=V,y-=D}var H=this.mapService.containerToLngLat([g,y]);return{x:g,y,lngLat:H,type:c,target:u.srcEvent}}},{key:"isDoubleTap",value:function(u,c,p){var g=this,y=new Date().getTime(),S="click";y-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-u)<10&&Math.abs(this.lastClickXY[1]-c)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),S="dblclick",this.emit(zu.Hover,{x:u,y:c,lngLat:p,type:S})):(this.lastClickTime=y,this.lastClickXY=[u,c],this.clickTimer=setTimeout(function(){S="click",g.emit(zu.Hover,{x:u,y:c,lngLat:p,type:S})},400))}}]),r}(Vl()),$h=ra(Mg.prototype,"mapService",[bh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mg))||Fm),S_=0;function E_(e){var a=e;if(typeof e=="string"&&(a=document.getElementById(e)),a){var r=document.createElement("div");return r.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,r.id="l7-scene-".concat(S_++),r.classList.add("l7-scene"),a.appendChild(r),r}return null}function w_(e){var a,r=!0;if((e==null||(a=e.target)===null||a===void 0?void 0:a.target)instanceof HTMLElement)for(var o,u=e==null||(o=e.target)===null||o===void 0?void 0:o.target;u;){var c,p=Array.from(u.classList);if(p.includes("l7-marker")||p.includes("l7-popup")){r=!1;break}u=(c=u)===null||c===void 0?void 0:c.parentElement}return r}var gt=function(e){return e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e}({}),Dm,tf,Yh,j0,nv,Lm,W0,Kh,G0,X0,Fl,qh,Nv,C_=(Dm=(0,Tn.b2)(),tf=(0,Tn.f3)(ut.IMapService),Yh=(0,Tn.f3)(ut.IRendererService),j0=(0,Tn.f3)(ut.IGlobalConfigService),nv=(0,Tn.f3)(ut.IInteractionService),Lm=(0,Tn.f3)(ut.ILayerService),Dm(W0=(Kh=function(){function e(){var a=this;(0,Rt.Z)(this,e),(0,Fe.Z)(this,"pickedColors",void 0),(0,Fe.Z)(this,"pickedTileLayers",[]),Za(this,"mapService",G0,this),Za(this,"rendererService",X0,this),Za(this,"configService",Fl,this),Za(this,"interactionService",qh,this),Za(this,"layerService",Nv,this),(0,Fe.Z)(this,"pickingFBO",void 0),(0,Fe.Z)(this,"width",0),(0,Fe.Z)(this,"height",0),(0,Fe.Z)(this,"alreadyInPicking",!1),(0,Fe.Z)(this,"pickBufferScale",1),(0,Fe.Z)(this,"pickFromPickingFBO",function(r,o){var u=o.x,c=o.y,p=o.lngLat,g=o.type,y=o.target,S=!1,O=a.rendererService,D=O.readPixels,V=O.getContainer,H=a.getContainerSize(V()),ue=H.width,le=H.height;ue*=Ps,le*=Ps;var we=r.getLayerConfig(),Ne=we.enableHighlight,dt=we.enableSelect,mt=u*Ps,Lt=c*Ps;if(mt>ue-1*Ps||mt<0||Lt>le-1*Ps||Lt<0)return!1;var Wt=D({x:Math.floor(mt/a.pickBufferScale),y:Math.floor((le-(c+1)*Ps)/a.pickBufferScale),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:a.pickingFBO});if(a.pickedColors=Wt,Wt[0]!==0||Wt[1]!==0||Wt[2]!==0){var qt=Kl(Wt),ir=r.layerPickService.getFeatureById(qt);qt!==r.getCurrentPickId()&&g==="mousemove"&&(g="mouseenter");var Sr={x:u,y:c,type:g,lngLat:p,featureId:qt,feature:ir,target:y};ir&&(S=!0,r.setCurrentPickId(qt),a.triggerHoverOnLayer(r,Sr))}else{var Br={x:u,y:c,lngLat:p,type:r.getCurrentPickId()!==null&&g==="mousemove"?"mouseout":"un"+g,featureId:null,target:y,feature:null};a.triggerHoverOnLayer(r,(0,te.Z)((0,te.Z)({},Br),{},{type:"unpick"})),a.triggerHoverOnLayer(r,Br),r.setCurrentPickId(null)}if(Ne&&r.layerPickService.highlightPickedFeature(Wt),dt&&g==="click"&&(Wt==null?void 0:Wt.toString())!==[0,0,0,0].toString()){var Jr=Kl(Wt);r.getCurrentSelectedId()===null||Jr!==r.getCurrentSelectedId()?(r.layerPickService.selectFeature(Wt),r.setCurrentSelectedId(Jr)):(r.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),r.setCurrentSelectedId(null))}return S})}return(0,at.Z)(e,[{key:"init",value:function(r){var o=this.rendererService,u=o.createTexture2D,c=o.createFramebuffer,p=o.getContainer,g=this.getContainerSize(p()),y=g.width,S=g.height;y*=Ps,S*=Ps,this.pickBufferScale=this.configService.getSceneConfig(r).pickBufferScale||1,this.pickingFBO=c({color:u({width:Math.round(y/this.pickBufferScale),height:Math.round(S/this.pickBufferScale),wrapS:gt.CLAMP_TO_EDGE,wrapT:gt.CLAMP_TO_EDGE})}),this.interactionService.on(zu.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){var a=(0,fn.Z)($t().mark(function o(u,c,p){var g=this,y,S,O;return $t().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:y=this.rendererService,S=y.useFramebuffer,O=y.clear,this.resizePickingFBO(),S(this.pickingFBO,function(){O({framebuffer:g.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),u.hooks.beforePickingEncode.call(),u.renderModels({ispick:!0}),u.hooks.afterPickingEncode.call();var H=g.pickBox(u,c);p(H)});case 3:case"end":return V.stop()}},o,this)}));function r(o,u,c){return a.apply(this,arguments)}return r}()},{key:"pickBox",value:function(r,o){var u=this,c=o.map(function(Jr){var en=Jr<0?0:Jr;return Math.floor(en*Ps/u.pickBufferScale)}),p=(0,Vi.Z)(c,4),g=p[0],y=p[1],S=p[2],O=p[3],D=this.rendererService,V=D.readPixels,H=D.getContainer,ue=this.getContainerSize(H()),le=ue.width,we=ue.height;if(le*=Ps,we*=Ps,g>(le-1)*Ps/this.pickBufferScale||S<0||y>(we-1)*Ps/this.pickBufferScale||O<0)return[];for(var Ne=Math.min(le/this.pickBufferScale,S)-g,dt=Math.min(we/this.pickBufferScale,O)-y,mt=V({x:g,y:Math.floor(we/this.pickBufferScale-(O+1)),width:Ne,height:dt,data:new Uint8Array(Ne*dt*4),framebuffer:this.pickingFBO}),Lt=[],Wt={},qt=0;qt<mt.length/4;qt=qt+1){var ir=mt.slice(qt*4,qt*4+4),Sr=Kl(ir);if(Sr!==-1&&!Wt[Sr]){var Br=r.layerPickService.getFeatureById(Sr);Lt.push((0,te.Z)((0,te.Z)({},Br),{},{pickedFeatureIdx:Sr})),Wt[Sr]=!0}}return Lt}},{key:"handleCursor",value:function(r,o){var u=r.getLayerConfig(),c=u.cursor,p=c===void 0?"":c,g=u.cursorEnabled;if(g){var y=this.mapService.version,S=y==="GAODE2.x"?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),O=S==null?void 0:S.style.getPropertyValue("cursor");o==="unmousemove"&&O!==""?S==null||S.style.setProperty("cursor",""):o==="mousemove"&&(S==null||S.style.setProperty("cursor",p))}}},{key:"destroy",value:function(){this.pickingFBO.destroy(),this.pickingFBO=null}},{key:"getContainerSize",value:function(r){return r.getContext?{width:r.width/Ps,height:r.height/Ps}:r.getBoundingClientRect()}},{key:"pickingAllLayer",value:function(){var a=(0,fn.Z)($t().mark(function o(u){return $t().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!(!this.layerService.needPick(u.type)||!this.isPickingAllLayer())){p.next=2;break}return p.abrupt("return");case 2:return this.alreadyInPicking=!0,p.next=5,this.pickingLayers(u);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return p.stop()}},o,this)}));function r(o){return a.apply(this,arguments)}return r}()},{key:"isPickingAllLayer",value:function(){return!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.interactionService.indragging||!this.layerService.getShaderPickStat())}},{key:"resizePickingFBO",value:function(){var r=this.rendererService.getContainer,o=this.getContainerSize(r()),u=o.width,c=o.height;u*=Ps,c*=Ps,(this.width!==u||this.height!==c)&&(this.pickingFBO.resize({width:Math.round(u/this.pickBufferScale),height:Math.round(c/this.pickBufferScale)}),this.width=u,this.height=c)}},{key:"pickingLayers",value:function(){var a=(0,fn.Z)($t().mark(function o(u){var c=this,p,g,y;return $t().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:p=this.rendererService,g=p.useFramebuffer,y=p.clear,this.resizePickingFBO(),g(this.pickingFBO,function(){var D=c.layerService.getRenderList();D.filter(function(V){return V.needPick(u.type)}).reverse().some(function(V){y({framebuffer:c.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),V.layerPickService.pickRender(u);var H=c.pickFromPickingFBO(V,u);return c.layerService.pickedLayerId=H?+V.id:-1,H&&!V.getLayerConfig().enablePropagation})});case 3:case"end":return O.stop()}},o,this)}));function r(o){return a.apply(this,arguments)}return r}()},{key:"triggerHoverOnLayer",value:function(r,o){w_(o)&&(this.handleCursor(r,o.type),r.emit(o.type,o))}}]),e}(),G0=ra(Kh.prototype,"mapService",[tf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X0=ra(Kh.prototype,"rendererService",[Yh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fl=ra(Kh.prototype,"configService",[j0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qh=ra(Kh.prototype,"interactionService",[nv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nv=ra(Kh.prototype,"layerService",[Lm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kh))||W0),Bm=function(){function e(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;(0,Rt.Z)(this,e),(0,Fe.Z)(this,"autoStart",void 0),(0,Fe.Z)(this,"startTime",0),(0,Fe.Z)(this,"oldTime",0),(0,Fe.Z)(this,"running",!1),(0,Fe.Z)(this,"elapsedTime",0),this.autoStart=a}return(0,at.Z)(e,[{key:"start",value:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var r=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var o=(typeof performance=="undefined"?Date:performance).now();r=(o-this.oldTime)/1e3,this.oldTime=o,this.elapsedTime+=r}return r}}]),e}(),A_,$0,Y0,T_,Nm,Rg,K0,zv,M_;function q0(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Qh(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function Qh(e,a){if(e){if(typeof e=="string")return Ig(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ig(e,a)}}function Ig(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}function Pg(e){var a=Uv();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function Uv(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Q0=wa.throttle,Fx=(A_=(0,Tn.b2)(),$0=(0,Tn.f3)(ut.IRendererService),Y0=(0,Tn.f3)(ut.IMapService),T_=(0,Tn.f3)(ut.IDebugService),A_(Nm=(Rg=function(e){(0,mr.Z)(r,e);var a=Pg(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"pickedLayerId",-1),(0,Fe.Z)((0,vr.Z)(o),"clock",new Bm),(0,Fe.Z)((0,vr.Z)(o),"alreadyInRendering",!1),(0,Fe.Z)((0,vr.Z)(o),"layers",[]),(0,Fe.Z)((0,vr.Z)(o),"layerList",[]),(0,Fe.Z)((0,vr.Z)(o),"layerRenderID",void 0),(0,Fe.Z)((0,vr.Z)(o),"sceneInited",!1),(0,Fe.Z)((0,vr.Z)(o),"animateInstanceCount",0),(0,Fe.Z)((0,vr.Z)(o),"shaderPicking",!0),(0,Fe.Z)((0,vr.Z)(o),"enableRender",!0),Za((0,vr.Z)(o),"renderService",K0,(0,vr.Z)(o)),Za((0,vr.Z)(o),"mapService",zv,(0,vr.Z)(o)),Za((0,vr.Z)(o),"debugService",M_,(0,vr.Z)(o)),(0,Fe.Z)((0,vr.Z)(o),"reRender",Q0(function(){o.renderLayers()},32)),(0,Fe.Z)((0,vr.Z)(o),"throttleRenderLayers",Q0(function(){o.renderLayers()},16)),o}return(0,at.Z)(r,[{key:"needPick",value:function(u){return this.layerList.some(function(c){return c.needPick(u)})}},{key:"add",value:function(u){var c=this;this.layers.push(u),this.sceneInited&&u.init().then(function(){c.renderLayers()})}},{key:"addMask",value:function(u){var c=this;this.sceneInited&&u.init().then(function(){c.renderLayers()})}},{key:"initLayers",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p=this;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:this.sceneInited=!0,this.layers.forEach(function(){var S=(0,fn.Z)($t().mark(function O(D){return $t().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(D.startInit){H.next=4;break}return H.next=3,D.init();case 3:p.updateLayerRenderList();case 4:case"end":return H.stop()}},O)}));return function(O){return S.apply(this,arguments)}}());case 2:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSceneInited",value:function(){return this.sceneInited}},{key:"getRenderList",value:function(){return this.layerList}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(u){return this.layers.find(function(c){return c.id===u})}},{key:"getLayerByName",value:function(u){return this.layers.find(function(c){return c.name===u})}},{key:"remove",value:function(){var o=(0,fn.Z)($t().mark(function c(p,g){var y,S;return $t().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:g?(y=g.layerChildren.indexOf(p),y>-1&&g.layerChildren.splice(y,1)):(S=this.layers.indexOf(p),S>-1&&this.layers.splice(S,1)),p.destroy(),this.reRender(),this.emit("layerChange",this.layers);case 4:case"end":return D.stop()}},c,this)}));function u(c,p){return o.apply(this,arguments)}return u}()},{key:"removeAllLayers",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:this.destroy(),this.reRender();case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"setEnableRender",value:function(u){this.enableRender=u}},{key:"renderLayers",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S,O,D;return $t().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!(this.alreadyInRendering||!this.enableRender)){H.next=2;break}return H.abrupt("return");case 2:this.updateLayerRenderList(),p=this.debugService.generateRenderUid(),this.debugService.renderStart(p),this.alreadyInRendering=!0,this.clear(),this.renderService.beginFrame(),g=q0(this.layerList),H.prev=9,g.s();case 11:if((y=g.n()).done){H.next=24;break}if(S=y.value,O=S.getLayerConfig(),D=O.enableMask,S.masks.filter(function(ue){return ue.inited}).length>0&&D&&this.renderMask(S.masks),!S.getLayerConfig().enableMultiPassRenderer){H.next=20;break}return H.next=18,S.renderMultiPass();case 18:H.next=22;break;case 20:return H.next=22,S.render();case 22:H.next=11;break;case 24:H.next=29;break;case 26:H.prev=26,H.t0=H.catch(9),g.e(H.t0);case 29:return H.prev=29,g.f(),H.finish(29);case 32:this.renderService.endFrame(),this.debugService.renderEnd(p),this.alreadyInRendering=!1;case 35:case"end":return H.stop()}},c,this,[[9,26,29,32]])}));function u(){return o.apply(this,arguments)}return u}()},{key:"renderMask",value:function(u){var c=0;this.renderService.clear({stencil:0,depth:1,framebuffer:null});var p=u.length>1?Do.MULTIPLE:Do.SINGLE,g=q0(u),y;try{for(g.s();!(y=g.n()).done;){var S=y.value;S.render({isStencil:!0,stencilType:p,stencilIndex:c++})}}catch(O){g.e(O)}finally{g.f()}}},{key:"beforeRenderData",value:function(){var o=(0,fn.Z)($t().mark(function c(p){var g;return $t().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,p.hooks.beforeRenderData.promise();case 2:g=S.sent,g&&this.renderLayers();case 4:case"end":return S.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"renderTileLayerMask",value:function(u){var c=0,p=u.getLayerConfig(),g=p.enableMask,y=g===void 0?!0:g,S=u.tileMask?1:0,O=u.masks.filter(function(le){return le.inited});S=S+(y?O.length:1);var D=S>1?Do.MULTIPLE:Do.SINGLE;if((u.tileMask||O.length&&y)&&this.renderService.clear({stencil:0,depth:1,framebuffer:null}),O.length&&y){var V=q0(O),H;try{for(V.s();!(H=V.n()).done;){var ue=H.value;ue.render({isStencil:!0,stencilType:D,stencilIndex:c++})}}catch(le){V.e(le)}finally{V.f()}}u.tileMask&&u.tileMask.render({isStencil:!0,stencilType:D,stencilIndex:c++,stencilOperation:Ho.OR})}},{key:"renderTileLayer",value:function(){var o=(0,fn.Z)($t().mark(function c(p){return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(this.renderTileLayerMask(p),!p.getLayerConfig().enableMultiPassRenderer){y.next=6;break}return y.next=4,p.renderMultiPass();case 4:y.next=8;break;case 6:return y.next=8,p.render();case 8:case"end":return y.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"updateLayerRenderList",value:function(){var u=this;this.layerList=[],this.layers.filter(function(c){return c.inited}).filter(function(c){return c.isVisible()}).sort(function(c,p){return c.zIndex-p.zIndex}).forEach(function(c){u.layerList.push(c)})}},{key:"destroy",value:function(){this.layers.forEach(function(u){u.destroy()}),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}},{key:"startAnimate",value:function(){this.animateInstanceCount++===0&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){--this.animateInstanceCount===0&&(this.stopRender(),this.clock.stop())}},{key:"getOESTextureFloat",value:function(){return this.renderService.extensionObject.OES_texture_float}},{key:"enableShaderPick",value:function(){this.shaderPicking=!0}},{key:"disableShaderPick",value:function(){this.shaderPicking=!1}},{key:"getShaderPickStat",value:function(){return this.shaderPicking}},{key:"clear",value:function(){var u=no(this.mapService.bgColor);this.renderService.clear({color:u,depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=window.requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){window.cancelAnimationFrame(this.layerRenderID)}}]),r}(Ws.EventEmitter),K0=ra(Rg.prototype,"renderService",[$0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zv=ra(Rg.prototype,"mapService",[Y0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M_=ra(Rg.prototype,"debugService",[T_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rg))||Nm),Nc=F(91),oR=wa.isNil,sR=function(){function e(a){var r=this;(0,Rt.Z)(this,e),(0,Fe.Z)(this,"name",void 0),(0,Fe.Z)(this,"type",void 0),(0,Fe.Z)(this,"scale",void 0),(0,Fe.Z)(this,"descriptor",void 0),(0,Fe.Z)(this,"featureBufferLayout",[]),(0,Fe.Z)(this,"needRescale",!1),(0,Fe.Z)(this,"needRemapping",!1),(0,Fe.Z)(this,"needRegenerateVertices",!1),(0,Fe.Z)(this,"featureRange",{startIndex:0,endIndex:1/0}),(0,Fe.Z)(this,"vertexAttribute",void 0),(0,Fe.Z)(this,"defaultCallback",function(o){if(o.length===0){var u;return((u=r.scale)===null||u===void 0?void 0:u.defaultValues)||[]}return o.map(function(c,p){var g,y=(g=r.scale)===null||g===void 0?void 0:g.scalers[p].func,S=y(c);return S})}),this.setProps(a)}return(0,at.Z)(e,[{key:"setProps",value:function(r){Object.assign(this,r)}},{key:"mapping",value:function(r){var o;if((o=this.scale)!==null&&o!==void 0&&o.callback){var u,c=(u=this.scale)===null||u===void 0?void 0:u.callback.apply(u,(0,Sn.Z)(r));if(!oR(c))return[c]}return this.defaultCallback(r)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),e}(),uR=["buffer","update","name"],lR=["buffer","update","name"],J0,rE,nE,iE,Dx,aE,cR=(J0={},(0,Fe.Z)(J0,gt.FLOAT,4),(0,Fe.Z)(J0,gt.UNSIGNED_BYTE,1),(0,Fe.Z)(J0,gt.UNSIGNED_SHORT,2),J0),oE=(rE=(0,Tn.b2)(),nE=(0,Tn.f3)(ut.IRendererService),rE(iE=(Dx=function(){function e(){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"attributesAndIndices",void 0),Za(this,"rendererService",aE,this),(0,Fe.Z)(this,"attributes",[]),(0,Fe.Z)(this,"triangulation",void 0),(0,Fe.Z)(this,"featureLayout",{sizePerElement:0,elements:[]})}return(0,at.Z)(e,[{key:"registerStyleAttribute",value:function(r){var o=this.getLayerStyleAttribute(r.name||"");return o?o.setProps(r):(o=new sR(r),this.attributes.push(o)),o}},{key:"unRegisterStyleAttribute",value:function(r){var o=this.attributes.findIndex(function(u){return u.name===r});o>-1&&this.attributes.splice(o,1)}},{key:"updateScaleAttribute",value:function(r){this.attributes.forEach(function(o){var u,c=o.name,p=(u=o.scale)===null||u===void 0?void 0:u.field;(r[c]||p&&r[p])&&(o.needRescale=!0,o.needRemapping=!0,o.needRegenerateVertices=!0)})}},{key:"updateStyleAttribute",value:function(r,o,u){var c=this.getLayerStyleAttribute(r);c||(c=this.registerStyleAttribute((0,te.Z)((0,te.Z)({},o),{},{name:r})));var p=o.scale;p&&c&&(c.scale=p,c.needRescale=!0,c.needRemapping=!0,c.needRegenerateVertices=!0,u&&u.featureRange&&(c.featureRange=u.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(r){return this.attributes.find(function(o){return o.name===r})}},{key:"getLayerAttributeScale",value:function(r){var o,u=this.getLayerStyleAttribute(r),c=u==null||(o=u.scale)===null||o===void 0?void 0:o.scalers;return c&&c[0]?c[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(r,o){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,c=arguments.length>3?arguments[3]:void 0,p=arguments.length>4?arguments[4]:void 0,g=this.attributes.find(function(Wt){return Wt.name===r});if(g&&g.descriptor){var y=g.descriptor,S=y.update,O=y.buffer,D=y.size,V=D===void 0?0:D,H=cR[O.type||gt.FLOAT];if(S){var ue=this.featureLayout,le=ue.elements,we=ue.sizePerElement,Ne=le.slice(u,c);if(!Ne.length)return;var dt=Ne[0].offset,mt=dt*V*H,Lt=Ne.map(function(Wt,qt){for(var ir=Wt.featureIdx,Sr=Wt.vertices,Br=Wt.normals,Jr=Sr.length/we,en=[],Kn=0;Kn<Jr;Kn++){var si=Br?Br.slice(Kn*3,Kn*3+3):[];en.push.apply(en,(0,Sn.Z)(S(o[ir],ir,Sr.slice(Kn*we,Kn*we+we),qt,si)))}return en}).reduce(function(Wt,qt){return Wt.push.apply(Wt,(0,Sn.Z)(qt)),Wt},[]);g.vertexAttribute.updateBuffer({data:Lt,offset:mt}),p==null||p.emit("legend:".concat(r),{type:r,attr:g})}}}},{key:"createAttributesAndIndices",value:function(r,o,u){var c=this;this.featureLayout={sizePerElement:0,elements:[]},o&&(this.triangulation=o);var p=this.attributes.map(function(Ne){return Ne.resetDescriptor(),Ne.descriptor}),g=0,y=0,S=[],O=3;r.forEach(function(Ne,dt){var mt=c.triangulation(Ne,u),Lt=mt.indices,Wt=mt.vertices,qt=mt.normals,ir=mt.size,Sr=mt.indexes,Br=mt.count;typeof Br=="number"&&(y+=Br),Lt.forEach(function(si){S.push(si+g)}),O=ir;var Jr=Wt.length/ir;c.featureLayout.sizePerElement=O,c.featureLayout.elements.push({featureIdx:dt,vertices:Wt,normals:qt,offset:g}),g+=Jr;for(var en=function(Pi){var so=(qt==null?void 0:qt.slice(Pi*3,Pi*3+3))||[],bs=Wt.slice(Pi*ir,Pi*ir+ir),Ss=0;Sr&&Sr[Pi]!==void 0&&(Ss=Sr[Pi]),p.forEach(function(Ru,Iu){if(Ru&&Ru.update){var eh;(eh=Ru.buffer.data).push.apply(eh,(0,Sn.Z)(Ru.update(Ne,dt,bs,Pi,so,Ss)))}})},Kn=0;Kn<Jr;Kn++)en(Kn)});var D=this.rendererService,V=D.createAttribute,H=D.createBuffer,ue=D.createElements,le={};p.forEach(function(Ne,dt){if(Ne){var mt=Ne.buffer,Lt=Ne.update,Wt=Ne.name,qt=(0,Nc.Z)(Ne,uR),ir=V((0,te.Z)({buffer:H(mt)},qt));le[Ne.name||""]=ir,c.attributes[dt].vertexAttribute=ir}});var we=ue({data:S,type:gt.UNSIGNED_INT,count:S.length});return this.attributesAndIndices={attributes:le,elements:we,count:y},this.attributesAndIndices}},{key:"createAttributes",value:function(r,o){var u=this;this.featureLayout={sizePerElement:0,elements:[]},o&&(this.triangulation=o);var c=this.attributes.map(function(H){return H.resetDescriptor(),H.descriptor}),p=0,g=[],y=3;r.forEach(function(H,ue){var le=u.triangulation(H),we=le.indices,Ne=le.vertices,dt=le.normals,mt=le.size,Lt=le.indexes;we.forEach(function(Sr){g.push(Sr+p)}),y=mt;var Wt=Ne.length/mt;u.featureLayout.sizePerElement=y,u.featureLayout.elements.push({featureIdx:ue,vertices:Ne,normals:dt,offset:p}),p+=Wt;for(var qt=function(Br){var Jr=(dt==null?void 0:dt.slice(Br*3,Br*3+3))||[],en=Ne.slice(Br*mt,Br*mt+mt),Kn=0;Lt&&Lt[Br]!==void 0&&(Kn=Lt[Br]),c.forEach(function(si,Pi){if(si&&si.update){var so;(so=si.buffer.data).push.apply(so,(0,Sn.Z)(si.update(H,ue,en,Br,Jr,Kn)))}})},ir=0;ir<Wt;ir++)qt(ir)});var S=this.rendererService,O=S.createAttribute,D=S.createBuffer,V={};return c.forEach(function(H,ue){if(H){var le=H.buffer,we=H.update,Ne=H.name,dt=(0,Nc.Z)(H,lR),mt=O((0,te.Z)({buffer:D(le)},dt));V[H.name||""]=mt,u.attributes[ue].vertexAttribute=mt}}),{attributes:V}}},{key:"clearAllAttributes",value:function(){var r;this.attributes.forEach(function(o){o.vertexAttribute&&o.vertexAttribute.destroy()}),(r=this.attributesAndIndices)===null||r===void 0||r.elements.destroy(),this.attributes=[]}}]),e}(),aE=ra(Dx.prototype,"rendererService",[nE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dx))||iE),R_=F(34155);function I_(e,a,r,o){function u(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function g(O){try{S(o.next(O))}catch(D){p(D)}}function y(O){try{S(o.throw(O))}catch(D){p(D)}}function S(O){O.done?c(O.value):u(O.value).then(g,y)}S((o=o.apply(e,a||[])).next())})}function Lx(e,a){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,u,c,p;return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(S){return function(O){return y([S,O])}}function y(S){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,u&&(c=S[0]&2?u.return:S[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,S[1])).done)return c;switch(u=0,c&&(S=[S[0]&2,c.value]),S[0]){case 0:case 1:c=S;break;case 4:return r.label++,{value:S[1],done:!1};case 5:r.label++,u=S[1],S=[0];continue;case 7:S=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(S[0]===6||S[0]===2)){r=0;continue}if(S[0]===3&&(!c||S[1]>c[0]&&S[1]<c[3])){r.label=S[1];break}if(S[0]===6&&r.label<c[1]){r.label=c[1],c=S;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(S);break}c[2]&&r.ops.pop(),r.trys.pop();continue}S=a.call(e,r)}catch(O){S=[6,O],u=0}finally{o=c=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}}function P_(e,a){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var o=r.call(e),u,c=[],p;try{for(;(a===void 0||a-- >0)&&!(u=o.next()).done;)c.push(u.value)}catch(g){p={error:g}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(p)throw p.error}}return c}function O_(e,a,r){if(r||arguments.length===2)for(var o=0,u=a.length,c;o<u;o++)(c||!(o in a))&&(c||(c=Array.prototype.slice.call(a,0,o)),c[o]=a[o]);return e.concat(c||Array.prototype.slice.call(a))}function ey(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Go={exports:{}},Bx={exports:{}},rf={exports:{}};(function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;function r(o){return o&&typeof o.length=="number"&&o.length>=0&&o.length%1===0}e.exports=a.default})(rf,rf.exports);var bf={},k_={exports:{}},Nx={exports:{}};(function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(r){return function(){for(var o=[],u=arguments.length;u--;)o[u]=arguments[u];var c=o.pop();return r.call(this,o,c)}},e.exports=a.default})(Nx,Nx.exports);var Zv={};Object.defineProperty(Zv,"__esModule",{value:!0}),Zv.fallback=zx,Zv.wrap=uE;var ty=Zv.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,ry=Zv.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,sE=Zv.hasNextTick=typeof R_=="object"&&typeof R_.nextTick=="function";function zx(e){setTimeout(e,0)}function uE(e){return function(a){for(var r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];return e(function(){return a.apply(void 0,r)})}}var Og;ty?Og=queueMicrotask:ry?Og=setImmediate:sE?Og=R_.nextTick:Og=zx,Zv.default=uE(Og),function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=y;var r=Nx.exports,o=g(r),u=Zv,c=g(u),p=bf;function g(D){return D&&D.__esModule?D:{default:D}}function y(D){return(0,p.isAsync)(D)?function(){for(var V=[],H=arguments.length;H--;)V[H]=arguments[H];var ue=V.pop(),le=D.apply(this,V);return S(le,ue)}:(0,o.default)(function(V,H){var ue;try{ue=D.apply(this,V)}catch(le){return H(le)}if(ue&&typeof ue.then=="function")return S(ue,H);H(null,ue)})}function S(D,V){return D.then(function(H){O(V,null,H)},function(H){O(V,H&&H.message?H:new Error(H))})}function O(D,V,H){try{D(V,H)}catch(ue){(0,c.default)(function(le){throw le},ue)}}e.exports=a.default}(k_,k_.exports),Object.defineProperty(bf,"__esModule",{value:!0}),bf.isAsyncIterable=bf.isAsyncGenerator=bf.isAsync=void 0;var fR=k_.exports,Jh=hR(fR);function hR(e){return e&&e.__esModule?e:{default:e}}function lE(e){return e[Symbol.toStringTag]==="AsyncFunction"}function pR(e){return e[Symbol.toStringTag]==="AsyncGenerator"}function dR(e){return typeof e[Symbol.asyncIterator]=="function"}function vR(e){if(typeof e!="function")throw new Error("expected a function");return lE(e)?(0,Jh.default)(e):e}bf.default=vR,bf.isAsync=lE,bf.isAsyncGenerator=pR,bf.isAsyncIterable=dR;var kg={exports:{}};(function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;function r(o,u){if(u===void 0&&(u=o.length),!u)throw new Error("arity is undefined");function c(){for(var p=this,g=[],y=arguments.length;y--;)g[y]=arguments[y];return typeof g[u-1]=="function"?o.apply(this,g):new Promise(function(S,O){g[u-1]=function(D){for(var V=[],H=arguments.length-1;H-- >0;)V[H]=arguments[H+1];if(D)return O(D);S(V.length>1?V:V[0])},o.apply(p,g)})}return c}e.exports=a.default})(kg,kg.exports),function(e,a){Object.defineProperty(a,"__esModule",{value:!0});var r=rf.exports,o=y(r),u=bf,c=y(u),p=kg.exports,g=y(p);function y(S){return S&&S.__esModule?S:{default:S}}a.default=(0,g.default)(function(S,O,D){var V=(0,o.default)(O)?[]:{};S(O,function(H,ue,le){(0,c.default)(H)(function(we){for(var Ne,dt=[],mt=arguments.length-1;mt-- >0;)dt[mt]=arguments[mt+1];dt.length<2&&(Ne=dt,dt=Ne[0]),V[ue]=dt,le(we)})},function(H){return D(H,V)})},3),e.exports=a.default}(Bx,Bx.exports);var Ux={exports:{}},F_={exports:{}},Zx={exports:{}},ny={exports:{}};(function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;function r(o){function u(){for(var c=[],p=arguments.length;p--;)c[p]=arguments[p];if(o!==null){var g=o;o=null,g.apply(this,c)}}return Object.assign(u,o),u}e.exports=a.default})(ny,ny.exports);var zm={exports:{}},D_={exports:{}};(function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(r){return r[Symbol.iterator]&&r[Symbol.iterator]()},e.exports=a.default})(D_,D_.exports),function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=O;var r=rf.exports,o=p(r),u=D_.exports,c=p(u);function p(D){return D&&D.__esModule?D:{default:D}}function g(D){var V=-1,H=D.length;return function(){return++V<H?{value:D[V],key:V}:null}}function y(D){var V=-1;return function(){var ue=D.next();return ue.done?null:(V++,{value:ue.value,key:V})}}function S(D){var V=D?Object.keys(D):[],H=-1,ue=V.length;return function le(){var we=V[++H];return we==="__proto__"?le():H<ue?{value:D[we],key:we}:null}}function O(D){if((0,o.default)(D))return g(D);var V=(0,c.default)(D);return V?y(V):S(D)}e.exports=a.default}(zm,zm.exports);var iy={exports:{}};(function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;function r(o){return function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];if(o===null)throw new Error("Callback was already called.");var p=o;o=null,p.apply(this,u)}}e.exports=a.default})(iy,iy.exports);var Vx={exports:{}},ay={exports:{}};(function(e,a){Object.defineProperty(a,"__esModule",{value:!0});var r={};a.default=r,e.exports=a.default})(ay,ay.exports),function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var r=ay.exports,o=u(r);function u(p){return p&&p.__esModule?p:{default:p}}function c(p,g,y,S){var O=!1,D=!1,V=!1,H=0,ue=0;function le(){H>=g||V||O||(V=!0,p.next().then(function(dt){var mt=dt.value,Lt=dt.done;if(!(D||O)){if(V=!1,Lt){O=!0,H<=0&&S(null);return}H++,y(mt,ue,we),ue++,le()}}).catch(Ne))}function we(dt,mt){if(H-=1,!D){if(dt)return Ne(dt);if(dt===!1){O=!0,D=!0;return}if(mt===o.default||O&&H<=0)return O=!0,S(null);le()}}function Ne(dt){D||(V=!1,O=!0,S(dt))}le()}e.exports=a.default}(Vx,Vx.exports),function(e,a){Object.defineProperty(a,"__esModule",{value:!0});var r=ny.exports,o=H(r),u=zm.exports,c=H(u),p=iy.exports,g=H(p),y=bf,S=Vx.exports,O=H(S),D=ay.exports,V=H(D);function H(ue){return ue&&ue.__esModule?ue:{default:ue}}a.default=function(ue){return function(le,we,Ne){if(Ne=(0,o.default)(Ne),ue<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!le)return Ne(null);if((0,y.isAsyncGenerator)(le))return(0,O.default)(le,ue,we,Ne);if((0,y.isAsyncIterable)(le))return(0,O.default)(le[Symbol.asyncIterator](),ue,we,Ne);var dt=(0,c.default)(le),mt=!1,Lt=!1,Wt=0,qt=!1;function ir(Br,Jr){if(!Lt)if(Wt-=1,Br)mt=!0,Ne(Br);else if(Br===!1)mt=!0,Lt=!0;else{if(Jr===V.default||mt&&Wt<=0)return mt=!0,Ne(null);qt||Sr()}}function Sr(){for(qt=!0;Wt<ue&&!mt;){var Br=dt();if(Br===null){mt=!0,Wt<=0&&Ne(null);return}Wt+=1,we(Br.value,Br.key,(0,g.default)(ir))}qt=!1}Sr()}},e.exports=a.default}(Zx,Zx.exports),function(e,a){Object.defineProperty(a,"__esModule",{value:!0});var r=Zx.exports,o=y(r),u=bf,c=y(u),p=kg.exports,g=y(p);function y(O){return O&&O.__esModule?O:{default:O}}function S(O,D,V,H){return(0,o.default)(D)(O,(0,c.default)(V),H)}a.default=(0,g.default)(S,4),e.exports=a.default}(F_,F_.exports),function(e,a){Object.defineProperty(a,"__esModule",{value:!0});var r=F_.exports,o=p(r),u=kg.exports,c=p(u);function p(y){return y&&y.__esModule?y:{default:y}}function g(y,S,O){return(0,o.default)(y,1,S,O)}a.default=(0,c.default)(g,3),e.exports=a.default}(Ux,Ux.exports),function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=g;var r=Bx.exports,o=p(r),u=Ux.exports,c=p(u);function p(y){return y&&y.__esModule?y:{default:y}}function g(y,S){return(0,o.default)(c.default,y,S)}e.exports=a.default}(Go,Go.exports);var L_=ey(Go.exports),Sd=function(){function e(){this.args=[],this.tasks=[]}return e.prototype.call=function(){for(var a=arguments,r=[],o=0;o<arguments.length;o++)r[o]=a[o];return this.args=r,L_(this.tasks)},e.prototype.tap=function(a,r){var o=this;this.tasks.push(function(u){r.apply(void 0,O_([],P_(o.args),!1)),u(null,a)})},e}(),Hx={exports:{}},jx={exports:{}};(function(e,a){Object.defineProperty(a,"__esModule",{value:!0});var r=rf.exports,o=we(r),u=ay.exports,c=we(u),p=F_.exports,g=we(p),y=ny.exports,S=we(y),O=iy.exports,D=we(O),V=bf,H=we(V),ue=kg.exports,le=we(ue);function we(Lt){return Lt&&Lt.__esModule?Lt:{default:Lt}}function Ne(Lt,Wt,qt){qt=(0,S.default)(qt);var ir=0,Sr=0,Br=Lt.length,Jr=!1;Br===0&&qt(null);function en(Kn,si){Kn===!1&&(Jr=!0),Jr!==!0&&(Kn?qt(Kn):(++Sr===Br||si===c.default)&&qt(null))}for(;ir<Br;ir++)Wt(Lt[ir],ir,(0,D.default)(en))}function dt(Lt,Wt,qt){return(0,g.default)(Lt,1/0,Wt,qt)}function mt(Lt,Wt,qt){var ir=(0,o.default)(Lt)?Ne:dt;return ir(Lt,(0,H.default)(Wt),qt)}a.default=(0,le.default)(mt,3),e.exports=a.default})(jx,jx.exports),function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=g;var r=jx.exports,o=p(r),u=Bx.exports,c=p(u);function p(y){return y&&y.__esModule?y:{default:y}}function g(y,S){return(0,c.default)(o.default,y,S)}e.exports=a.default}(Hx,Hx.exports);var gR=ey(Hx.exports),f4=function(){function e(){this.tasks=[]}return e.prototype.promise=function(){return gR(this.tasks)},e.prototype.tapPromise=function(a,r){var o=this;this.tasks.push(function(u){return I_(o,void 0,void 0,function(){return Lx(this,function(c){switch(c.label){case 0:return[4,r()];case 1:return c.sent(),u(null,a),[2]}})})})},e}(),Wx={exports:{}};(function(e,a){Object.defineProperty(a,"__esModule",{value:!0});var r=ny.exports,o=O(r),u=iy.exports,c=O(u),p=bf,g=O(p),y=kg.exports,S=O(y);function O(V){return V&&V.__esModule?V:{default:V}}function D(V,H){if(H=(0,o.default)(H),!Array.isArray(V))return H(new Error("First argument to waterfall must be an array of functions"));if(!V.length)return H();var ue=0;function le(Ne){var dt=(0,g.default)(V[ue++]);dt.apply(void 0,Ne.concat([(0,c.default)(we)]))}function we(Ne){for(var dt=[],mt=arguments.length-1;mt-- >0;)dt[mt]=arguments[mt+1];if(Ne!==!1){if(Ne||ue===V.length)return H.apply(void 0,[Ne].concat(dt));le(dt)}}le([])}a.default=(0,S.default)(D),e.exports=a.default})(Wx,Wx.exports);var cE=ey(Wx.exports),s8=function(){function e(){this.tasks=[]}return e.prototype.call=function(){return cE(this.tasks)},e.prototype.tap=function(a,r){this.tasks.length===0?this.tasks.push(function(o){var u=r();o(u?null:!1,u)}):this.tasks.push(function(o,u){var c=r.apply(void 0,O_([],P_(o),!1));u(c?null:!1,a)})},e}(),fE=function(){function e(){this.tasks=[]}return e.prototype.call=function(){return L_(this.tasks)},e.prototype.tap=function(a,r){this.tasks.push(function(o){var u=r();o(u,a)})},e}(),mR=function(){function e(){this.args=[],this.tasks=[]}return e.prototype.promise=function(){for(var a=arguments,r=[],o=0;o<arguments.length;o++)r[o]=a[o];return this.args=r,L_(this.tasks)},e.prototype.tapPromise=function(a,r){var o=this;this.tasks.push(function(u){return I_(o,void 0,void 0,function(){return Lx(this,function(c){switch(c.label){case 0:return[4,r.apply(void 0,O_([],P_(this.args),!1))];case 1:return c.sent(),u(null,a),[2]}})})})},e}(),yR=function(){function e(){this.args=[],this.tasks=[]}return e.prototype.promise=function(){for(var a=arguments,r=[],o=0;o<arguments.length;o++)r[o]=a[o];return this.args=r,L_(this.tasks)},e.prototype.tapPromise=function(a,r){var o=this;this.tasks.push(function(u){return I_(o,void 0,void 0,function(){var c;return Lx(this,function(p){switch(p.label){case 0:return[4,r.apply(void 0,O_([],P_(this.args),!1))];case 1:return c=p.sent(),u(c,a),[2]}})})})},e}(),hE=function(){function e(){this.tasks=[]}return e.prototype.promise=function(){return cE(this.tasks)},e.prototype.tapPromise=function(a,r){this.tasks.length===0?this.tasks.push(function(o){r().then(function(u){o(null,u)})}):this.tasks.push(function(o,u){r(o).then(function(c){u(null,c)})})},e}(),pE=F(67709),_R=F.n(pE),dE,vE,gE,mE,yE,_E,Gx,xE,bE,SE,EE,wE,CE,AE,TE,ME,Xx,RE,yc,IE,PE,OE,kE,FE,DE,LE,BE,NE,B_,zE,oy,$x,xR,bR,UE;function SR(e){var a=h4();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function h4(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var p4=(dE=(0,Tn.b2)(),vE=(0,Tn.f3)(ut.SceneID),gE=(0,Tn.f3)(ut.IIconService),mE=(0,Tn.f3)(ut.IFontService),yE=(0,Tn.f3)(ut.IControlService),_E=(0,Tn.f3)(ut.IGlobalConfigService),Gx=(0,Tn.f3)(ut.IMapService),xE=(0,Tn.f3)(ut.ICoordinateSystemService),bE=(0,Tn.f3)(ut.IRendererService),SE=(0,Tn.f3)(ut.ILayerService),EE=(0,Tn.f3)(ut.IDebugService),wE=(0,Tn.f3)(ut.ICameraService),CE=(0,Tn.f3)(ut.IInteractionService),AE=(0,Tn.f3)(ut.IPickingService),TE=(0,Tn.f3)(ut.IShaderModuleService),ME=(0,Tn.f3)(ut.IMarkerService),Xx=(0,Tn.f3)(ut.IPopupService),dE(RE=(yc=function(e){(0,mr.Z)(r,e);var a=SR(r);function r(){var o;return(0,Rt.Z)(this,r),o=a.call(this),(0,Fe.Z)((0,vr.Z)(o),"destroyed",!1),(0,Fe.Z)((0,vr.Z)(o),"loaded",!1),Za((0,vr.Z)(o),"id",IE,(0,vr.Z)(o)),Za((0,vr.Z)(o),"iconService",PE,(0,vr.Z)(o)),Za((0,vr.Z)(o),"fontService",OE,(0,vr.Z)(o)),Za((0,vr.Z)(o),"controlService",kE,(0,vr.Z)(o)),Za((0,vr.Z)(o),"configService",FE,(0,vr.Z)(o)),Za((0,vr.Z)(o),"map",DE,(0,vr.Z)(o)),Za((0,vr.Z)(o),"coordinateSystemService",LE,(0,vr.Z)(o)),Za((0,vr.Z)(o),"rendererService",BE,(0,vr.Z)(o)),Za((0,vr.Z)(o),"layerService",NE,(0,vr.Z)(o)),Za((0,vr.Z)(o),"debugService",B_,(0,vr.Z)(o)),Za((0,vr.Z)(o),"cameraService",zE,(0,vr.Z)(o)),Za((0,vr.Z)(o),"interactionService",oy,(0,vr.Z)(o)),Za((0,vr.Z)(o),"pickingService",$x,(0,vr.Z)(o)),Za((0,vr.Z)(o),"shaderModuleService",xR,(0,vr.Z)(o)),Za((0,vr.Z)(o),"markerService",bR,(0,vr.Z)(o)),Za((0,vr.Z)(o),"popupService",UE,(0,vr.Z)(o)),(0,Fe.Z)((0,vr.Z)(o),"inited",!1),(0,Fe.Z)((0,vr.Z)(o),"initPromise",void 0),(0,Fe.Z)((0,vr.Z)(o),"rendering",!1),(0,Fe.Z)((0,vr.Z)(o),"$container",void 0),(0,Fe.Z)((0,vr.Z)(o),"canvas",void 0),(0,Fe.Z)((0,vr.Z)(o),"markerContainer",void 0),(0,Fe.Z)((0,vr.Z)(o),"hooks",void 0),(0,Fe.Z)((0,vr.Z)(o),"handleWindowResized",function(){o.emit("resize"),o.$container&&(o.initContainer(),Pf(),o.coordinateSystemService.needRefresh=!0,o.render())}),(0,Fe.Z)((0,vr.Z)(o),"handleMapCameraChanged",function(u){o.cameraService.update(u),o.render()}),o.hooks={init:new mR},o}return(0,at.Z)(r,[{key:"init",value:function(u){var c=this;this.configService.setSceneConfig(this.id,u),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return c.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,fn.Z)($t().mark(function p(){return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return c.debugService.log("map.mapInitStart",{type:c.map.version}),y.next=3,new Promise(function(S){c.map.onCameraChanged(function(O){c.cameraService.init(),c.cameraService.update(O),S()}),c.map.init()});case 3:c.map.onCameraChanged(c.handleMapCameraChanged),c.map.addMarkerContainer(),c.markerService.addMarkers(),c.markerService.addMarkerLayers(),c.popupService.initPopup(),c.interactionService.init(),c.interactionService.on(zu.Drag,c.addSceneEvent.bind(c));case 10:case"end":return y.stop()}},p)}))),this.hooks.init.tapPromise("initRenderer",(0,fn.Z)($t().mark(function p(){var g,y,S;return $t().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(y=((g=c.map)===null||g===void 0?void 0:g.getOverlayContainer())||void 0,y?c.$container=y:c.$container=E_(c.configService.getSceneConfig(c.id).id||""),!c.$container){D.next=13;break}return c.canvas=Ns("canvas","",c.$container),c.setCanvas(),D.next=7,c.rendererService.init(c.canvas,c.configService.getSceneConfig(c.id),u.gl);case 7:c.registerContextLost(),c.initContainer(),_R()(c.$container,c.handleWindowResized),window.matchMedia&&((S=window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||S===void 0||S.addListener(c.handleWindowResized)),D.next=14;break;case 13:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 14:c.pickingService.init(c.id);case 15:case"end":return D.stop()}},p)}))),this.render()}},{key:"registerContextLost",value:function(){var u=this,c=this.rendererService.getCanvas();c&&c.addEventListener("webglcontextlost",function(){return u.emit("webglcontextlost")})}},{key:"initMiniScene",value:function(u){var c=this;this.configService.setSceneConfig(this.id,u),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return c.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,fn.Z)($t().mark(function p(){return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,new Promise(function(S){c.map.onCameraChanged(function(O){c.cameraService.init(),c.cameraService.update(O),c.map.version!=="GAODE2.x"&&S()}),c.map.initMiniMap()});case 2:c.map.onCameraChanged(c.handleMapCameraChanged),c.interactionService.init(),c.interactionService.on(zu.Drag,c.addSceneEvent.bind(c));case 5:case"end":return y.stop()}},p)}))),this.hooks.init.tapPromise("initRenderer",(0,fn.Z)($t().mark(function p(){var g;return $t().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(g=u.canvas,c.$container=g||null,!c.$container){S.next=7;break}return S.next=5,c.rendererService.init(u.canvas,c.configService.getSceneConfig(c.id),void 0);case 5:S.next=8;break;case 7:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 8:c.pickingService.init(c.id);case 9:case"end":return S.stop()}},p)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(u){this.layerService.sceneService=this,this.layerService.add(u)}},{key:"addMask",value:function(u){this.layerService.sceneService=this,this.layerService.addMask(u)}},{key:"render",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(this.rendering||this.destroyed)){g.next=2;break}return g.abrupt("return");case 2:if(this.rendering=!0,this.inited){g.next=16;break}return g.next=6,this.hooks.init.promise();case 6:return this.destroyed&&this.destroy(),g.next=9,this.layerService.initLayers();case 9:this.layerService.renderLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0,g.next=20;break;case 16:return g.next=18,this.layerService.initLayers();case 18:return g.next=20,this.layerService.renderLayers();case 20:this.rendering=!1;case 21:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"addFontFace",value:function(u,c){this.fontService.addFontFace(u,c)}},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(){var o=(0,fn.Z)($t().mark(function c(p){var g,y,S;return $t().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return y=(g=this.$container)===null||g===void 0?void 0:g.getElementsByTagName("canvas")[0],D.next=3,this.render();case 3:return S=p==="jpg"?y==null?void 0:y.toDataURL("image/jpeg"):y==null?void 0:y.toDataURL("image/png"),D.abrupt("return",S);case 5:case"end":return D.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"getPointSizeRange",value:function(){return this.rendererService.getPointSizeRange()}},{key:"addMarkerContainer",value:function(){var u=this.$container.parentElement;u!==null&&(this.markerContainer=Ns("div","l7-marker-container",u))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){var u=this,c;if(!this.inited){this.destroyed=!0;return}if((0,pE.unbind)(this.$container,this.handleWindowResized),window.matchMedia){var p;(p=window.matchMedia("screen and (min-resolution: 2dppx)"))===null||p===void 0||p.removeListener(this.handleWindowResized)}this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout(function(){var g;(g=u.$container)===null||g===void 0||g.removeChild(u.canvas),u.canvas=null,u.rendererService.destroy()}),(c=this.$container)===null||c===void 0||(c=c.parentNode)===null||c===void 0||c.removeChild(this.$container),this.emit("destroy")}},{key:"initContainer",value:function(){var u,c,p=Ps,g=((u=this.$container)===null||u===void 0?void 0:u.clientWidth)||400,y=((c=this.$container)===null||c===void 0?void 0:c.clientHeight)||300,S=this.canvas;S&&(S.width=g*p,S.height=y*p),this.rendererService.viewport({x:0,y:0,width:p*g,height:p*y})}},{key:"setCanvas",value:function(){var u,c,p=Ps,g=((u=this.$container)===null||u===void 0?void 0:u.clientWidth)||400,y=((c=this.$container)===null||c===void 0?void 0:c.clientHeight)||300,S=this.canvas;S.width=g*p,S.height=y*p,S.style.width="100%",S.style.height="100%"}},{key:"addSceneEvent",value:function(u){this.emit(u.type,u)}}]),r}(Ws.EventEmitter),IE=ra(yc.prototype,"id",[vE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),PE=ra(yc.prototype,"iconService",[gE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),OE=ra(yc.prototype,"fontService",[mE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kE=ra(yc.prototype,"controlService",[yE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),FE=ra(yc.prototype,"configService",[_E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),DE=ra(yc.prototype,"map",[Gx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),LE=ra(yc.prototype,"coordinateSystemService",[xE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),BE=ra(yc.prototype,"rendererService",[bE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),NE=ra(yc.prototype,"layerService",[SE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B_=ra(yc.prototype,"debugService",[EE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zE=ra(yc.prototype,"cameraService",[wE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oy=ra(yc.prototype,"interactionService",[CE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$x=ra(yc.prototype,"pickingService",[AE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xR=ra(yc.prototype,"shaderModuleService",[TE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bR=ra(yc.prototype,"markerService",[ME],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),UE=ra(yc.prototype,"popupService",[Xx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yc))||RE);function ER(e){var a=0;switch(e){case"vec2":case"ivec2":a=2;break;case"vec3":case"ivec3":a=3;break;case"vec4":case"ivec4":case"mat2":a=4;break;case"mat3":a=9;break;case"mat4":a=16;break;default:}return a}var ZE=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function VE(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r={};return e=e.replace(ZE,function(o,u,c){var p=c.split(":"),g=p[0].trim(),y="";switch(p.length>1&&(y=p[1].trim()),u){case"bool":y=y==="true";break;case"float":case"int":y=Number(y);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":y?y=y.replace("[","").replace("]","").split(",").reduce(function(S,O){return S.push(Number(O.trim())),S},[]):y=new Array(ER(u)).fill(0);break;default:}return r[g]=y,"".concat(a?"uniform ":"").concat(u," ").concat(g,`;
`)}),{content:e,uniforms:r}}function Yx(e){var a=VE(e,!0),r=a.content,o=a.uniforms;return r=r.replace(/(\s*uniform\s*.*\s*){((?:\s*.*\s*)*?)};/g,function(u,c,p){p=p.trim().replace(/^.*$/gm,function(O){return"uniform ".concat(O)});var g=VE(p),y=g.content,S=g.uniforms;return Object.assign(o,S),"".concat(c,`{
`).concat(y,`
};`)}),{content:r,uniforms:o}}function N_(e){var a={};return e.replace(ZE,function(r,o,u){var c=u.trim();return a[c]?"":(a[c]=!0,"uniform ".concat(o," ").concat(c,`;
`))})}var z_,Kx,HE=wa.uniq,jE="#define PI 3.14159265359",WE=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,Um=`layout(std140) uniform SceneUniforms {
  mat4 u_ViewMatrix;
  mat4 u_ProjectionMatrix;
  mat4 u_ViewProjectionMatrix;
  mat4 u_ModelMatrix;
  mat4 u_Mvp;
  vec4 u_ViewportCenterProjection;
  vec3 u_PixelsPerDegree;
  float u_Zoom;
  vec3 u_PixelsPerDegree2;
  float u_ZoomScale;
  vec3 u_PixelsPerMeter;
  float u_CoordinateSystem;
  vec3 u_CameraPosition;
  float u_DevicePixelRatio;
  vec2 u_ViewportCenter;
  vec2 u_ViewportSize;
  vec2 u_sceneCenterMercator;
  float u_FocalDistance;
};`,GE=`layout(std140) uniform PickingUniforms {
  vec4 u_HighlightColor;
  vec4 u_SelectColor;
  vec3 u_PickingColor;
  float u_PickingStage;
  vec3 u_CurrentSelectedId;
  float u_PickingThreshold;
  float u_PickingBuffer;
  float u_shaderPick;
  float u_EnableSelect;
  float u_activeMix;
};`,d4=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,v4=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}

// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {
//   vec3 lightDir = normalize(light.position - fragPos);
//   // diffuse shading
//   float diff = max(dot(normal, lightDir), 0.0);
//   // specular shading
//   vec3 reflectDir = reflect(-lightDir, normal);
//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);
//   // attenuation
//   float distance = length(light.position - fragPos);
//   float attenuation = 1.0 / (light.constant + light.linear * distance +
//           light.quadratic * (distance * distance));

//   vec3 ambient = light.ambient * u_Ambient;
//   vec3 diffuse = light.diffuse * diff * u_Diffuse;
//   vec3 specular = light.specular * spec * u_Specular;

//   float spotEffect = dot(normalize(light.direction), -lightDir);
//   float spotCosCutoff = cos(light.angle / 180.0 * PI);
//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);
//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);
//   if (spotEffect > spotCosCutoff) {
//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);
//   } else {
//     spotEffect = 0.0;
//   }

//   return ambient + attenuation * (spotEffect * diffuse + specular);
// }

vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {
  //   if (i >= u_NumOfSpotLights) {
  //     break;
  //   }
  //   weight += calc_spot_light(u_SpotLights[i], normal, position, viewDir);
  // }
  return weight;
}
`,wR=`
in vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  // float selected = v_PickingResult.a;
  bool selected = bool(v_PickingResult.a);

  // if (selected == SELECT) {
  if (selected) {
  //   // \u70B9\u51FB\u9009\u4E2D\u72B6\u6001
  //   vec4 selectColor = u_SelectColor * COLOR_SCALE;
  //   return selectColor;
  // } else if (selected == HIGHLIGHT) {
  //   // hover \u9AD8\u4EAE\u72B6\u6001
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

vec4 filterColorAlpha(vec4 color, float alpha) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,CR=`layout(location = 2) in vec3 a_PickingColor;
out vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return distance(vertexColor,u_PickingColor.rgb) < 0.01;
}

// \u5224\u65AD\u5F53\u524D\u70B9\u662F\u5426\u5DF2\u7ECF\u88AB select \u9009\u4E2D
bool isVertexSelected(vec3 vertexColor) {
  return distance(vertexColor,u_CurrentSelectedId.rgb) < 0.01;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,qx=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,XE=`#define TILE_SIZE 512.0
#define PI 3.1415926536
#define WORLD_SCALE TILE_SIZE / (PI * 2.0)

#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0           // amap
#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0
#pragma include "scene_uniforms"


// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
   if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return lnglat;
  }
  float x = lnglat.x;
  return vec2(
    radians(x) + PI,
    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))
  );
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}


// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1., 1.);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01
    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}
// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01
// reverse Y
vec3 reverse_offset_normal(vec3 vector) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {
    return vector * vec3(1.0, -1.0, 1.0);
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return vector;
  }
  return vector;
}

vec4 project_mvt_offset_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return project_offset(vec4(0.0, 0.0, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }
  return position;
}

vec4 project_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(vec4(X, Y, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return vec4(
      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),
      project_scale(position.z),
      position.w
    );
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
   return position;
  }
  return position;

  // TODO: \u74E6\u7247\u5750\u6807\u7CFB & \u5E38\u89C4\u4E16\u754C\u5750\u6807\u7CFB
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}



float project_pixel_allmap(float pixel) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
    return pixel * pow(2.0, u_Zoom);
  }
  return pixel * u_FocalDistance ;
}

// \u9002\u914D\u7EB9\u7406\u8D34\u56FE\u7684\u7B49\u50CF\u7D20\u5927\u5C0F
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom) * u_FocalDistance ;
  }

  // amap2 zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;
  }

  // amap zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return pixel * pow(0.5, u_Zoom)* u_FocalDistance ;
  }
  
  // amap zoom < 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return pixel * pow(2.0, (20.0 - u_Zoom))* u_FocalDistance ;
  }
  return pixel * 2.0 *  u_FocalDistance;;
}

// \u5728\u4E0D\u8BBA\u4EC0\u4E48\u5E95\u56FE\u4E0B\u9700\u8981\u7EDF\u4E00\u5904\u7406\u7684\u65F6\u5019\u4F7F\u7528
float project_float_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // mapbox P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom))  * u_FocalDistance ;
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;
  }
  return pixel * u_FocalDistance;
}

float project_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;
  }
  return pixel * u_FocalDistance;
}
vec2 project_pixel(vec2 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;
  }
  return pixel * -1. * u_FocalDistance;
}
vec3 project_pixel(vec3 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) *  u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))  * u_FocalDistance ;
  }
  return pixel * -1. * u_FocalDistance;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
     pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}


bool isEqual( float a,  float b) {
    return  a< b + 0.001 && a > b - 0.001;
}

// \u652F\u6301 GaodeV2\u3001Mapbox
vec4 project_common_position_to_clipspace_v2(vec4 position) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    return u_Mvp * position;
  } else {
    return project_common_position_to_clipspace(position);
  }
}`,AR=`vec2 rotate_matrix(vec2 v, float a) {
    float b = a / 180.0 * 3.1415926535897932384626433832795;
    float s = sin(b);
    float c = cos(b);
    mat2 m = mat2(c, s, -s, c);
    return m * v;
}`,TR=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,$E=/precision\s+(high|low|medium)p\s+float/,Qx=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,MR=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,Jx=/void\s+main\s*\([^)]*\)\s*\{\n?/,u8=/}\n?[^{}]*$/,g4=(z_=(0,Tn.b2)(),z_(Kx=function(){function e(){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"moduleCache",{}),(0,Fe.Z)(this,"rawContentCache",{})}return(0,at.Z)(e,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:jE,fs:jE}),this.registerModule("decode",{vs:WE,fs:""}),this.registerModule("scene_uniforms",{vs:Um,fs:Um}),this.registerModule("picking_uniforms",{vs:GE,fs:GE}),this.registerModule("projection",{vs:XE,fs:XE}),this.registerModule("project",{vs:qx,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:TR}),this.registerModule("lighting",{vs:v4,fs:""}),this.registerModule("light",{vs:d4,fs:""}),this.registerModule("picking",{vs:CR,fs:wR}),this.registerModule("rotation_2d",{vs:AR,fs:""})}},{key:"registerModule",value:function(r,o){o.vs=o.vs.replace(/\r\n/g,`
`),o.fs=o.fs.replace(/\r\n/g,`
`);var u=o.vs,c=o.fs,p=o.uniforms,g=o.inject,y=Yx(u),S=y.content,O=y.uniforms,D=Yx(c),V=D.content,H=D.uniforms;this.rawContentCache[r]={fs:V,inject:g,uniforms:(0,te.Z)((0,te.Z)((0,te.Z)({},O),H),p),vs:S}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(r){var o=this,u=this.rawContentCache[r].vs,c=this.rawContentCache[r].fs,p=this.rawContentCache[r].inject,g={};p!=null&&p["vs:#decl"]&&(u=(p==null?void 0:p["vs:#decl"])+u,g=Yx(p==null?void 0:p["vs:#decl"]).uniforms),p!=null&&p["vs:#main-start"]&&(u=u.replace(Jx,function(Ne){return Ne+(p==null?void 0:p["vs:#main-start"])})),p!=null&&p["fs:#decl"]&&(c=(p==null?void 0:p["fs:#decl"])+c);var y=this.processModule(u,[],"vs"),S=y.content,O=y.includeList,D=this.processModule(c,[],"fs"),V=D.content,H=D.includeList,ue="",le=HE(O.concat(H).concat(r)).reduce(function(Ne,dt){return(0,te.Z)((0,te.Z)({},Ne),o.rawContentCache[dt].uniforms)},(0,te.Z)({},g));$E.test(V)||(ue=ue+Qx),ue=ue+V;var we="";return $E.test(S)||(we=we+Qx),we=we+S,this.moduleCache[r]={fs:ue.trim(),uniforms:le,vs:we.trim()},this.moduleCache[r]}},{key:"processModule",value:function(r,o,u){var c=this,p=r.replace(MR,function(g,y){var S=y.split(" "),O=S[0].replace(/"/g,"");if(o.indexOf(O)>-1)return"";var D=c.rawContentCache[O][u];o.push(O);var V=c.processModule(D,o,u),H=V.content;return H});return{content:p,includeList:o}}},{key:"injectDefines",value:function(r){var o=Object.keys(r).reduce(function(u,c){return u+"#define ".concat(c.toUpperCase()," ").concat(r[c],`;
`)},`
`);return o}}]),e}())||Kx);function RR(e,a){for(;!Object.prototype.hasOwnProperty.call(e,a)&&(e=(0,Ft.Z)(e),e!==null););return e}function nf(){return typeof Reflect!="undefined"&&Reflect.get?nf=Reflect.get.bind():nf=function(a,r,o){var u=RR(a,r);if(u){var c=Object.getOwnPropertyDescriptor(u,r);return c.get?c.get.call(arguments.length<3?a:o):c.value}},nf.apply(this,arguments)}var Zm=function(e){return e.Normal="normal",e.PostProcessing="post-processing",e}({}),IR,PR,U_=(IR=(0,Tn.b2)(),IR(PR=function(){function e(){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"shaderModuleService",void 0),(0,Fe.Z)(this,"rendererService",void 0),(0,Fe.Z)(this,"cameraService",void 0),(0,Fe.Z)(this,"mapService",void 0),(0,Fe.Z)(this,"interactionService",void 0),(0,Fe.Z)(this,"layerService",void 0),(0,Fe.Z)(this,"config",void 0)}return(0,at.Z)(e,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return Zm.Normal}},{key:"init",value:function(r,o){this.config=o,this.rendererService=r.getContainer().get(ut.IRendererService),this.cameraService=r.getContainer().get(ut.ICameraService),this.mapService=r.getContainer().get(ut.IMapService),this.interactionService=r.getContainer().get(ut.IInteractionService),this.layerService=r.getContainer().get(ut.ILayerService),this.shaderModuleService=r.getContainer().get(ut.IShaderModuleService)}},{key:"render",value:function(r){}}]),e}())||PR),YE,OR;function m4(e){var a=kR();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function kR(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var FR=(YE=(0,Tn.b2)(),YE(OR=function(e){(0,mr.Z)(r,e);var a=m4(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(u,c){nf((0,Ft.Z)(r.prototype),"init",this).call(this,u,c)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),r}(U_))||OR),KE,DR,LR,eb,qE;function tb(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=rb(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function rb(e,a){if(e){if(typeof e=="string")return QE(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QE(e,a)}}function QE(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var BR=(KE=(0,Tn.b2)(),DR=(0,Tn.f3)(ut.IPostProcessor),KE(LR=(eb=function(){function e(){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"passes",[]),Za(this,"postProcessor",qE,this),(0,Fe.Z)(this,"layer",void 0),(0,Fe.Z)(this,"renderFlag",void 0),(0,Fe.Z)(this,"width",0),(0,Fe.Z)(this,"height",0)}return(0,at.Z)(e,[{key:"setLayer",value:function(r){this.layer=r}},{key:"setRenderFlag",value:function(r){this.renderFlag=r}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var a=(0,fn.Z)($t().mark(function o(){var u,c,p;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:u=tb(this.passes),y.prev=1,u.s();case 3:if((c=u.n()).done){y.next=9;break}return p=c.value,y.next=7,p.render(this.layer);case 7:y.next=3;break;case 9:y.next=14;break;case 11:y.prev=11,y.t0=y.catch(1),u.e(y.t0);case 14:return y.prev=14,u.f(),y.finish(14);case 17:return y.next=19,this.postProcessor.render(this.layer);case 19:case"end":return y.stop()}},o,this,[[1,11,14,17]])}));function r(){return a.apply(this,arguments)}return r}()},{key:"resize",value:function(r,o){(this.width!==r||this.height!==o)&&(this.postProcessor.resize(r,o),this.width=r,this.height=o)}},{key:"add",value:function(r,o){r.getType()===Zm.PostProcessing?this.postProcessor.add(r,this.layer,o):(r.init(this.layer,o),this.passes.push(r))}},{key:"insert",value:function(r,o,u){r.init(this.layer,o),this.passes.splice(u,0,r)}},{key:"destroy",value:function(){this.passes.length=0}}]),e}(),qE=ra(eb.prototype,"postProcessor",[DR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),eb))||LR),JE,sy;function NR(e){var a=zR();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function zR(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var UR=(JE=(0,Tn.b2)(),JE(sy=function(e){(0,mr.Z)(r,e);var a=NR(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"pickingFBO",void 0),(0,Fe.Z)((0,vr.Z)(o),"layer",void 0),(0,Fe.Z)((0,vr.Z)(o),"width",0),(0,Fe.Z)((0,vr.Z)(o),"height",0),(0,Fe.Z)((0,vr.Z)(o),"alreadyInRendering",!1),(0,Fe.Z)((0,vr.Z)(o),"pickFromPickingFBO",function(g){var y=g.x,S=g.y,O=g.lngLat,D=g.type;if(!(!o.layer.isVisible()||!o.layer.needPick(D))){var V=o.rendererService,H=V.getViewportSize,ue=V.readPixels,le=V.useFramebuffer,we=H(),Ne=we.width,dt=we.height,mt=o.layer.getLayerConfig(),Lt=mt.enableHighlight,Wt=mt.enableSelect,qt=y*Ps,ir=S*Ps;if(!(qt>Ne||qt<0||ir>dt||ir<0)){var Sr;le(o.pickingFBO,function(){var Br;if(Sr=ue({x:Math.round(qt),y:Math.round(dt-(S+1)*Ps),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:o.pickingFBO}),Sr[0]!==0||Sr[1]!==0||Sr[2]!==0){var Jr=Kl(Sr),en=o.layer.getSource().getFeatureById(Jr),Kn={x:y,y:S,type:D,lngLat:O,featureId:Jr,feature:en};en&&(o.layer.setCurrentPickId(Jr),o.triggerHoverOnLayer(Kn))}else{var si={x:y,y:S,lngLat:O,type:o.layer.getCurrentPickId()===null?"un"+D:"mouseout",featureId:null,feature:null};o.triggerHoverOnLayer((0,te.Z)((0,te.Z)({},si),{},{type:"unpick"})),o.triggerHoverOnLayer(si),o.layer.setCurrentPickId(null)}Lt&&o.highlightPickedFeature(Sr),Wt&&D==="click"&&((Br=Sr)===null||Br===void 0?void 0:Br.toString())!==[0,0,0,0].toString()&&o.selectFeature(Sr)})}}}),o}return(0,at.Z)(r,[{key:"getType",value:function(){return Zm.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(u,c){nf((0,Ft.Z)(r.prototype),"init",this).call(this,u,c),this.layer=u;var p=this.rendererService,g=p.createTexture2D,y=p.createFramebuffer,S=p.getViewportSize,O=S(),D=O.width,V=O.height;this.pickingFBO=y({color:g({width:D,height:V,wrapS:gt.CLAMP_TO_EDGE,wrapT:gt.CLAMP_TO_EDGE})}),this.interactionService.on(zu.Hover,this.pickFromPickingFBO),this.interactionService.on(zu.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(zu.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(u){var c=this;if(!this.alreadyInRendering){var p=this.rendererService,g=p.getViewportSize,y=p.useFramebuffer,S=p.clear,O=g(),D=O.width,V=O.height;this.alreadyInRendering=!0,(this.width!==D||this.height!==V)&&(this.pickingFBO.resize({width:D,height:V}),this.width=D,this.height=V),y(this.pickingFBO,function(){S({framebuffer:c.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var H=c.layer.multiPassRenderer.getRenderFlag();c.layer.multiPassRenderer.setRenderFlag(!1),u.hooks.beforePickingEncode.call(),u.render(),u.hooks.afterPickingEncode.call(),c.layer.multiPassRenderer.setRenderFlag(H),c.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(u){this.layer.emit(u.type,u)}},{key:"highlightPickedFeature",value:function(u){var c=(0,Vi.Z)(u,3),p=c[0],g=c[1],y=c[2];this.layer.hooks.beforeHighlight.call([p,g,y]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(u){var c=(0,Vi.Z)(u,3),p=c[0],g=c[1],y=c[2];this.layer.hooks.beforeSelect.call([p,g,y]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(u){var c=u.featureId,p=Es(c);this.selectFeature(new Uint8Array(p))}},{key:"highlightFeatureHandle",value:function(u){var c=u.featureId,p=Es(c);this.highlightPickedFeature(new Uint8Array(p))}}]),r}(U_))||sy),ew,tw,rw,nb,nw,iw=wa.camelCase,aw=wa.isNil,ZR=wa.upperFirst,VR=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Ed=(ew=(0,Tn.b2)(),tw=(0,Tn.f3)(ut.IShaderModuleService),ew(rw=(nb=function(){function e(){(0,Rt.Z)(this,e),Za(this,"shaderModuleService",nw,this),(0,Fe.Z)(this,"rendererService",void 0),(0,Fe.Z)(this,"config",void 0),(0,Fe.Z)(this,"quad",VR),(0,Fe.Z)(this,"enabled",!0),(0,Fe.Z)(this,"renderToScreen",!1),(0,Fe.Z)(this,"model",void 0),(0,Fe.Z)(this,"name",void 0),(0,Fe.Z)(this,"optionsToUpdate",{})}return(0,at.Z)(e,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(r){this.name=r}},{key:"getType",value:function(){return Zm.PostProcessing}},{key:"init",value:function(r,o){this.config=o,this.rendererService=r.getContainer().get(ut.IRendererService),this.shaderModuleService=r.getContainer().get(ut.IShaderModuleService);var u=this.rendererService,c=u.createAttribute,p=u.createBuffer,g=u.createModel,y=this.setupShaders(),S=y.vs,O=y.fs,D=y.uniforms;this.model=g({vs:S,fs:O,attributes:{a_Position:c({buffer:p({data:[-4,-4,4,-4,0,4],type:gt.FLOAT}),size:2})},uniforms:(0,te.Z)((0,te.Z)({u_Texture:null},D),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}},{key:"render",value:function(r,o){var u=this,c=r.multiPassRenderer.getPostProcessor(),p=this.rendererService,g=p.useFramebuffer,y=p.getViewportSize,S=p.clear,O=y(),D=O.width,V=O.height;g(this.renderToScreen?null:c.getWriteFBO(),function(){S({framebuffer:c.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});var H=(0,te.Z)({u_BloomFinal:0,u_Texture:c.getReadFBO(),u_ViewportSize:[D,V]},u.convertOptionsToUniforms(u.optionsToUpdate));o&&(H.u_BloomFinal=1,H.u_Texture2=o),u.model.draw({uniforms:H})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(r){this.enabled=r}},{key:"setRenderToScreen",value:function(r){this.renderToScreen=r}},{key:"updateOptions",value:function(r){this.optionsToUpdate=(0,te.Z)((0,te.Z)({},this.optionsToUpdate),r)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(r){var o={};return Object.keys(r).forEach(function(u){aw(r[u])||(o["u_".concat(ZR(iw(u)))]=r[u])}),o}}]),e}(),nw=ra(nb.prototype,"shaderModuleService",[tw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nb))||rw),ow,sw;function HR(e){var a=jR();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function jR(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Z_=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,WR=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,V_=wa.isNil,GR=(ow=(0,Tn.b2)(),ow(sw=function(e){(0,mr.Z)(r,e);var a=HR(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:WR,fs:Z_});var u=this.shaderModuleService.getModule("blur-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),S=y.width,O=y.height;return{vs:c,fs:p,uniforms:(0,te.Z)((0,te.Z)({},g),{},{u_ViewportSize:[S,O]})}}},{key:"convertOptionsToUniforms",value:function(u){var c={};return V_(u.bloomRadius)||(c.u_radius=u.bloomRadius),V_(u.bloomIntensity)||(c.u_intensity=u.bloomIntensity),V_(u.bloomBaseRadio)||(c.u_baseRadio=u.bloomBaseRadio),c}}]),r}(Ed))||sw),uw,ib;function XR(e){var a=$R();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function $R(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var lw=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,cw=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,YR=wa.isNil,KR=(uw=(0,Tn.b2)(),uw(ib=function(e){(0,mr.Z)(r,e);var a=XR(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:cw,fs:lw});var u=this.shaderModuleService.getModule("blur-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),S=y.width,O=y.height;return{vs:c,fs:p,uniforms:(0,te.Z)((0,te.Z)({},g),{},{u_ViewportSize:[S,O]})}}},{key:"convertOptionsToUniforms",value:function(u){var c={};return YR(u.blurRadius)||(c.u_BlurDir=[u.blurRadius,0]),c}}]),r}(Ed))||ib),H_,fw;function hw(e){var a=qR();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function qR(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var QR=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,JR=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,eI=wa.isNil,tI=(H_=(0,Tn.b2)(),H_(fw=function(e){(0,mr.Z)(r,e);var a=hw(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:JR,fs:QR});var u=this.shaderModuleService.getModule("blur-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),S=y.width,O=y.height;return{vs:c,fs:p,uniforms:(0,te.Z)((0,te.Z)({},g),{},{u_ViewportSize:[S,O]})}}},{key:"convertOptionsToUniforms",value:function(u){var c={};return eI(u.blurRadius)||(c.u_BlurDir=[0,u.blurRadius]),c}}]),r}(Ed))||fw),ab,pw;function rI(e){var a=nI();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function nI(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var iI=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,aI=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,dw=(ab=(0,Tn.b2)(),ab(pw=function(e){(0,mr.Z)(r,e);var a=rI(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:aI,fs:iI});var u=this.shaderModuleService.getModule("colorhalftone-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),S=y.width,O=y.height;return{vs:c,fs:p,uniforms:(0,te.Z)((0,te.Z)({},g),{},{u_ViewportSize:[S,O]})}}}]),r}(Ed))||pw),uy,ob;function vw(e){var a=oI();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function oI(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var sI=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,gw=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,uI=(uy=(0,Tn.b2)(),uy(ob=function(e){(0,mr.Z)(r,e);var a=vw(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:gw,fs:sI}),this.shaderModuleService.getModule("copy-pass")}}]),r}(Ed))||ob),mw,yw;function lI(e){var a=cI();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function cI(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var fI=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,sb=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,ub=(mw=(0,Tn.b2)(),mw(yw=function(e){(0,mr.Z)(r,e);var a=lI(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:sb,fs:fI});var u=this.shaderModuleService.getModule("hexagonalpixelate-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),S=y.width,O=y.height;return{vs:c,fs:p,uniforms:(0,te.Z)((0,te.Z)({},g),{},{u_ViewportSize:[S,O]})}}}]),r}(Ed))||yw),lb,_w;function xw(e){var a=hI();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function hI(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var pI=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,dI=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,vI=(lb=(0,Tn.b2)(),lb(_w=function(e){(0,mr.Z)(r,e);var a=xw(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:dI,fs:pI});var u=this.shaderModuleService.getModule("ink-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),S=y.width,O=y.height;return{vs:c,fs:p,uniforms:(0,te.Z)((0,te.Z)({},g),{},{u_ViewportSize:[S,O]})}}}]),r}(Ed))||_w),bw,Sw;function gI(e){var a=mI();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function mI(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var yI=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,Ew=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,_I=(bw=(0,Tn.b2)(),bw(Sw=function(e){(0,mr.Z)(r,e);var a=gI(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:Ew,fs:yI}),this.shaderModuleService.getModule("noise-pass")}}]),r}(Ed))||Sw),cb,ww;function xI(e){var a=Cw();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function Cw(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var bI=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Aw=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`,SI=(cb=(0,Tn.b2)(),cb(ww=function(e){(0,mr.Z)(r,e);var a=xI(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:bI,fs:Aw}),this.shaderModuleService.getModule("sepia-pass")}}]),r}(Ed))||ww),j_,Tw,ly,Mw,Vm,Rw,EI=(j_=(0,Tn.b2)(),Tw=(0,Tn.f3)(ut.IRendererService),ly=(0,Tn.zY)(),j_(Mw=(Vm=function(){function e(){(0,Rt.Z)(this,e),Za(this,"rendererService",Rw,this),(0,Fe.Z)(this,"passes",[]),(0,Fe.Z)(this,"readFBO",void 0),(0,Fe.Z)(this,"writeFBO",void 0)}return(0,at.Z)(e,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"getCurrentFBOTex",value:function(){var r=this.rendererService,o=r.getViewportSize,u=r.createTexture2D,c=o(),p=c.width,g=c.height;return u({x:0,y:0,width:p,height:g,copy:!0})}},{key:"getReadFBOTex",value:function(){var r=this,o=this.rendererService.useFramebuffer;return new Promise(function(u){o(r.readFBO,(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:u(r.getCurrentFBOTex());case 1:case"end":return g.stop()}},c)})))})}},{key:"renderBloomPass",value:function(){var a=(0,fn.Z)($t().mark(function o(u,c){var p,g;return $t().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,this.getReadFBOTex();case 2:p=S.sent,g=0;case 4:if(!(g<4)){S.next=11;break}return S.next=7,c.render(u,p);case 7:this.swap(),g++,S.next=4;break;case 11:case"end":return S.stop()}},o,this)}));function r(o,u){return a.apply(this,arguments)}return r}()},{key:"render",value:function(){var a=(0,fn.Z)($t().mark(function o(u){var c,p;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:c=0;case 1:if(!(c<this.passes.length)){y.next=15;break}if(p=this.passes[c],p.setRenderToScreen(this.isLastEnabledPass(c)),p.getName()!=="bloom"){y.next=9;break}return y.next=7,this.renderBloomPass(u,p);case 7:y.next=12;break;case 9:return y.next=11,p.render(u);case 11:c!==this.passes.length-1&&this.swap();case 12:c++,y.next=1;break;case 15:case"end":return y.stop()}},o,this)}));function r(o){return a.apply(this,arguments)}return r}()},{key:"resize",value:function(r,o){this.readFBO.resize({width:r,height:o}),this.writeFBO.resize({width:r,height:o})}},{key:"add",value:function(r,o,u){r.init(o,u),this.passes.push(r)}},{key:"insert",value:function(r,o,u,c){r.init(u,c),this.passes.splice(o,0,r)}},{key:"getPostProcessingPassByName",value:function(r){return this.passes.find(function(o){return o.getName()===r})}},{key:"init",value:function(){var r=this.rendererService,o=r.createFramebuffer,u=r.createTexture2D;this.readFBO=o({color:u({width:1,height:1,wrapS:gt.CLAMP_TO_EDGE,wrapT:gt.CLAMP_TO_EDGE})}),this.writeFBO=o({color:u({width:1,height:1,wrapS:gt.CLAMP_TO_EDGE,wrapT:gt.CLAMP_TO_EDGE})})}},{key:"isLastEnabledPass",value:function(r){for(var o=r+1;o<this.passes.length;o++)if(this.passes[o].isEnabled())return!1;return!0}},{key:"swap",value:function(){var r=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=r}}]),e}(),Rw=ra(Vm.prototype,"rendererService",[Tw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ra(Vm.prototype,"init",[ly],Object.getOwnPropertyDescriptor(Vm.prototype,"init"),Vm.prototype),Vm))||Mw),Iw,W_;function wI(e){var a=CI();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function CI(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var AI=(Iw=(0,Tn.b2)(),Iw(W_=function(e){(0,mr.Z)(r,e);var a=wI(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getType",value:function(){return Zm.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(u,c){nf((0,Ft.Z)(r.prototype),"init",this).call(this,u,c)}},{key:"render",value:function(u){var c=this.rendererService,p=c.useFramebuffer,g=c.clear,y=u.multiPassRenderer.getPostProcessor().getReadFBO();p(y,function(){g({color:[0,0,0,0],depth:1,stencil:0,framebuffer:y}),u.multiPassRenderer.setRenderFlag(!1),u.models.forEach(function(S){S.draw({uniforms:u.layerModel.getUninforms()})}),u.multiPassRenderer.setRenderFlag(!0)})}}]),r}(U_))||W_),Pw,Ow,kw,fb,hb;function Fw(e){var a=Dw();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function Dw(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var TI=`uniform float u_opacity : 1.0;
uniform float u_MixRatio : 0.5;

uniform sampler2D u_Diffuse1;
uniform sampler2D u_Diffuse2;

varying vec2 v_UV;

void main() {
  vec4 texel1 = texture2D(u_Diffuse1, v_UV);
  vec4 texel2 = texture2D(u_Diffuse2, v_UV);
  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);
}
`,Lw=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,pb=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;function Bw(e,a){for(var r=0,o=1/a,u=e;u>0;)r=r+o*(u%a),u=Math.floor(u/a),o=o/a;return r}var MI=1,iv=(Pw=(0,Tn.b2)(),Ow=(0,Tn.f3)(ut.IShaderModuleService),Pw(kw=(fb=function(e){(0,mr.Z)(r,e);var a=Fw(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),Za((0,vr.Z)(o),"shaderModuleService",hb,(0,vr.Z)(o)),(0,Fe.Z)((0,vr.Z)(o),"haltonSequence",[]),(0,Fe.Z)((0,vr.Z)(o),"accumulatingId",0),(0,Fe.Z)((0,vr.Z)(o),"frame",0),(0,Fe.Z)((0,vr.Z)(o),"timer",void 0),(0,Fe.Z)((0,vr.Z)(o),"sampleRenderTarget",void 0),(0,Fe.Z)((0,vr.Z)(o),"prevRenderTarget",void 0),(0,Fe.Z)((0,vr.Z)(o),"outputRenderTarget",void 0),(0,Fe.Z)((0,vr.Z)(o),"copyRenderTarget",void 0),(0,Fe.Z)((0,vr.Z)(o),"blendModel",void 0),(0,Fe.Z)((0,vr.Z)(o),"outputModel",void 0),(0,Fe.Z)((0,vr.Z)(o),"copyModel",void 0),o}return(0,at.Z)(r,[{key:"getType",value:function(){return Zm.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(u,c){nf((0,Ft.Z)(r.prototype),"init",this).call(this,u,c);var p=this.rendererService,g=p.createFramebuffer,y=p.createTexture2D;this.sampleRenderTarget=g({color:y({width:1,height:1,wrapS:gt.CLAMP_TO_EDGE,wrapT:gt.CLAMP_TO_EDGE})}),this.prevRenderTarget=g({color:y({width:1,height:1,wrapS:gt.CLAMP_TO_EDGE,wrapT:gt.CLAMP_TO_EDGE})}),this.outputRenderTarget=g({color:y({width:1,height:1,wrapS:gt.CLAMP_TO_EDGE,wrapT:gt.CLAMP_TO_EDGE})}),this.copyRenderTarget=g({color:y({width:1,height:1,wrapS:gt.CLAMP_TO_EDGE,wrapT:gt.CLAMP_TO_EDGE})});for(var S=0;S<30;S++)this.haltonSequence.push([Bw(S,2),Bw(S,3)]);this.blendModel=this.createTriangleModel("blend-pass",TI),this.outputModel=this.createTriangleModel("copy-pass",Lw,{blend:{enable:!0,func:{srcRGB:gt.ONE,dstRGB:gt.ONE_MINUS_SRC_ALPHA,srcAlpha:gt.ONE,dstAlpha:gt.ONE_MINUS_SRC_ALPHA},equation:{rgb:gt.FUNC_ADD,alpha:gt.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",Lw)}},{key:"render",value:function(u){var c=this,p=this.rendererService,g=p.clear,y=p.getViewportSize,S=p.useFramebuffer,O=y(),D=O.width,V=O.height;this.sampleRenderTarget.resize({width:D,height:V}),this.prevRenderTarget.resize({width:D,height:V}),this.outputRenderTarget.resize({width:D,height:V}),this.copyRenderTarget.resize({width:D,height:V}),this.resetFrame(),this.stopAccumulating();var H=u.multiPassRenderer.getPostProcessor().getReadFBO();S(H,function(){g({color:[0,0,0,0],depth:1,stencil:0,framebuffer:H}),u.multiPassRenderer.setRenderFlag(!1),u.render(),u.multiPassRenderer.setRenderFlag(!0)});var ue=function le(we){!c.accumulatingId||we!==c.accumulatingId||c.isFinished()||(c.doRender(u),window.requestAnimationFrame(function(){le(we)}))};this.accumulatingId=MI++,this.timer=window.setTimeout(function(){ue(c.accumulatingId)},50)}},{key:"doRender",value:function(u){var c=this,p=this.rendererService,g=p.clear,y=p.getViewportSize,S=p.useFramebuffer,O=y(),D=O.width,V=O.height,H=u.getLayerConfig(),ue=H.jitterScale,le=ue===void 0?1:ue,we=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((we[0]*2-1)/D*le,(we[1]*2-1)/V*le),u.multiPassRenderer.setRenderFlag(!1),u.hooks.beforeRender.call(),S(this.sampleRenderTarget,function(){g({color:[0,0,0,0],depth:1,stencil:0,framebuffer:c.sampleRenderTarget}),u.render()}),u.hooks.afterRender.call(),u.multiPassRenderer.setRenderFlag(!0);var Ne=u.getLayerConfig();S(this.outputRenderTarget,function(){c.blendModel.draw({uniforms:{u_opacity:Ne.opacity||1,u_MixRatio:c.frame===0?1:.9,u_Diffuse1:c.sampleRenderTarget,u_Diffuse2:c.frame===0?u.multiPassRenderer.getPostProcessor().getReadFBO():c.prevRenderTarget}})}),this.frame===0&&g({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(S(this.copyRenderTarget,function(){c.outputModel.draw({uniforms:{u_Texture:c.outputRenderTarget}})}),S(u.multiPassRenderer.getPostProcessor().getReadFBO(),function(){c.copyModel.draw({uniforms:{u_Texture:c.copyRenderTarget}})}),u.multiPassRenderer.getPostProcessor().render(u));var dt=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=dt,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,window.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(u,c,p){this.shaderModuleService.registerModule(u,{vs:pb,fs:c});var g=this.shaderModuleService.getModule(u),y=g.vs,S=g.fs,O=g.uniforms,D=this.rendererService,V=D.createAttribute,H=D.createBuffer,ue=D.createModel;return ue((0,te.Z)({vs:y,fs:S,attributes:{a_Position:V({buffer:H({data:[-4,-4,4,-4,0,4],type:gt.FLOAT}),size:2})},uniforms:(0,te.Z)({},O),depth:{enable:!1},count:3},p))}}]),r}(U_),hb=ra(fb.prototype,"shaderModuleService",[Ow],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fb))||kw),Fg=new Tn.W2;Fg.bind(ut.IGlobalConfigService).to(vl).inSingletonScope(),(0,Tn.GW)((0,Tn.b2)(),Ws.EventEmitter),Fg.bind(ut.IEventEmitter).to(Ws.EventEmitter);var Nw=(0,Bt.Z)(Fg,!1),db=function(a){var r=Nw.lazyInject(a);return function(o,u,c){r.call(this,o,u),c&&(c.initializer=function(){return o[u]})}},y4=function(a){var r=Nw.lazyMultiInject(a);return function(o,u,c){r.call(this,o,u),c&&(c.initializer=function(){return o[u]})}},Wf=Fg,RI=0;function II(){var e=new Tn.W2;return e.parent=Fg,e.bind(ut.SceneID).toConstantValue("".concat(RI++)),e.bind(ut.IShaderModuleService).to(g4).inSingletonScope(),e.bind(ut.ILayerService).to(Fx).inSingletonScope(),e.bind(ut.IDebugService).to(Om).inSingletonScope(),e.bind(ut.ISceneService).to(p4).inSingletonScope(),e.bind(ut.ICameraService).to(io).inSingletonScope(),e.bind(ut.ICoordinateSystemService).to(Im).inSingletonScope(),e.bind(ut.IInteractionService).to(Bv).inSingletonScope(),e.bind(ut.IPickingService).to(C_).inSingletonScope(),e.bind(ut.IControlService).to(Ls).inSingletonScope(),e.bind(ut.IMarkerService).to(nl).inSingletonScope(),e.bind(ut.IIconService).to(v_).inSingletonScope(),e.bind(ut.IFontService).to(Wd).inSingletonScope(),e.bind(ut.IPopupService).to(al).inSingletonScope(),e.bind(ut.INormalPass).to(FR).whenTargetNamed("clear"),e.bind(ut.INormalPass).to(UR).whenTargetNamed("pixelPicking"),e.bind(ut.INormalPass).to(AI).whenTargetNamed("render"),e.bind(ut.INormalPass).to(iv).whenTargetNamed("taa"),e.bind(ut.IFactoryNormalPass).toFactory(function(a){return function(r){return a.container.getNamed(ut.INormalPass,r)}}),e.bind(ut.IPostProcessingPass).to(uI).whenTargetNamed("copy"),e.bind(ut.IPostProcessingPass).to(GR).whenTargetNamed("bloom"),e.bind(ut.IPostProcessingPass).to(KR).whenTargetNamed("blurH"),e.bind(ut.IPostProcessingPass).to(tI).whenTargetNamed("blurV"),e.bind(ut.IPostProcessingPass).to(_I).whenTargetNamed("noise"),e.bind(ut.IPostProcessingPass).to(SI).whenTargetNamed("sepia"),e.bind(ut.IPostProcessingPass).to(dw).whenTargetNamed("colorHalftone"),e.bind(ut.IPostProcessingPass).to(ub).whenTargetNamed("hexagonalPixelate"),e.bind(ut.IPostProcessingPass).to(vI).whenTargetNamed("ink"),e.bind(ut.IFactoryPostProcessingPass).toFactory(function(a){return function(r){var o=a.container.getNamed(ut.IPostProcessingPass,r);return o.setName(r),o}}),e}function cy(e){var a=new Tn.W2;return a.parent=e,a.bind(ut.IStyleAttributeService).to(oE).inSingletonScope(),a.bind(ut.IMultiPassRenderer).to(BR).inSingletonScope(),a.bind(ut.IPostProcessor).to(EI).inSingletonScope(),a}var PI=null;function _4(e){return PI.indexOf(e)}var zw=wa.clamp,OI=2,x4=4,Uw=64,b4=128,G_=256,X_=512,S4=8192,E4=16384,kI=32768,$_=null,Y_=131072,FI=262144,Vv=524288,DI=1048576,LI=2097152,w4=4194304,Hv=8388608,BI=16777216,Zw=null;function fy(e,a){return e=zw(Math.floor(e),0,255),a=zw(Math.floor(a),0,255),256*e+a}function C4(e){var a=e.color,r=e.radius,o=e.tileX,u=e.tileY,c=e.shape,p=e.opacity,g=e.stroke,y=e.strokeWidth,S=e.strokeOpacity,O=[],D=[],V=[],H=[fy(a[0],a[1]),fy(a[2],a[3])],ue=[fy(g[0],g[1]),fy(g[2],g[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(le){var we=_slicedToArray(le,2),Ne=we[0],dt=we[1];O.push([].concat(H,[(Ne+1)*Hv+(dt+1)*LI+getShapeIndex(c)*Y_+r,(o+512)*Vv+(u+512)*Uw])),D.push([].concat(ue,[y,S])),V.push([p,0,0,0])}),{packedBuffer:O,packedBuffer2:D,packedBuffer3:V}}function A4(e,a){if(e===0&&!a)return 0;if(e===1&&a)return 4294967295;var r=a?1:0,o=Math.floor(e*127);return o*Zw+r*BI+o*Y_+r*$_+o*X_+r*G_+o*OI+r}var Hm={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"},gl={MapInitStart:"mapInitStart",LayerInitStart:"layerInitStart",LayerInitEnd:"layerInitEnd",SourceInitStart:"sourceInitStart",SourceInitEnd:"sourceInitEnd",ScaleInitStart:"scaleInitStart",ScaleInitEnd:"scaleInitEnd",MappingStart:"mappingStart",MappingEnd:"mappingEnd",BuildModelStart:"buildModelStart",BuildModelEnd:"buildModelEnd"},xs=function(e){return e.LINEAR="linear",e.SEQUENTIAL="sequential",e.POWER="power",e.LOG="log",e.IDENTITY="identity",e.TIME="time",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.CAT="cat",e.DIVERGING="diverging",e}({}),jm=function(e){return e.CONSTANT="constant",e.VARIABLE="variable",e}({}),Gi=function(e){return e[e.Attribute=0]="Attribute",e[e.InstancedAttribute=1]="InstancedAttribute",e[e.Uniform=2]="Uniform",e}({}),vb=["mapload","mapchange","mapAfterFrameChange"],K_=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"],Xl=function(e){return e.IMAGE="image",e.CUSTOMIMAGE="customImage",e.ARRAYBUFFER="arraybuffer",e.RGB="rgb",e.TERRAINRGB="terrainRGB",e.CUSTOMRGB="customRGB",e.CUSTOMARRAYBUFFER="customArrayBuffer",e.CUSTOMTERRAINRGB="customTerrainRGB",e}({}),Vw=function(){var e=(0,fn.Z)($t().mark(function a(r,o,u,c){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",new Promise(function(y,S){o({x:r.x,y:r.y,z:r.z},function(O,D){if(O||D.length===0){S(O);return}D&&ln([{data:D,bands:[0]}],u,c,function(V,H){V?S(V):H&&y(H)})})}));case 1:case"end":return g.stop()}},a)}));return function(r,o,u,c){return e.apply(this,arguments)}}(),NI=function(){var e=(0,fn.Z)($t().mark(function a(r,o){return $t().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(p,g){o({x:r.x,y:r.y,z:r.z},function(y,S){if(y||!S){g(y);return}S instanceof ArrayBuffer?po(S,function(O,D){O&&g(O),p(D)}):S instanceof HTMLImageElement?p(S):g(y)})}));case 1:case"end":return c.stop()}},a)}));return function(r,o){return e.apply(this,arguments)}}();function zI(e,a){return Array.isArray(e)?typeof e[0]=="string"?e.map(function(r){return La(r,a)}):e.map(function(r){return{url:La(r.url,a),bands:r.bands||[0]}}):La(e,a)}function UI(e){return typeof e=="string"?[{url:e,bands:[0]}]:typeof e[0]=="string"?e.map(function(a){return{url:a,bands:[0]}}):e}function Hw(e,a){e.xhrCancel=function(){a.map(function(r){r.abort()})}}var ZI=function(){var e=(0,fn.Z)($t().mark(function a(r,o,u,c,p){var g,y,S,O,D,V;return $t().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(g=UI(o.url),!(g.length>1)){ue.next=15;break}return ue.next=4,VI(g,o);case 4:if(y=ue.sent,S=y.rasterFiles,O=y.xhrList,D=y.errList,Hw(r,O),!(D.length>0)){ue.next=12;break}return u(D,null),ue.abrupt("return");case 12:ln(S,c,p,u),ue.next=17;break;case 15:V=hs(o,function(le,we){if(le)u(le);else if(we){var Ne=[{data:we,bands:g[0].bands}];ln(Ne,c,p,u)}}),Hw(r,[V]);case 17:case"end":return ue.stop()}},a)}));return function(r,o,u,c,p){return e.apply(this,arguments)}}();function VI(e,a){return gb.apply(this,arguments)}function gb(){return gb=(0,fn.Z)($t().mark(function e(a,r){var o,u,c,p,g,y,S,O,D,V,H;return $t().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:o=[],u=[],c=[],p=0;case 4:if(!(p<a.length)){le.next=20;break}return g=a[p],y=(0,te.Z)((0,te.Z)({},r),{},{url:g.url}),S=g.bands,le.next=10,_a((0,te.Z)((0,te.Z)({},y),{},{type:"arrayBuffer"}));case 10:O=le.sent,D=O.err,V=O.data,H=O.xhr,D&&c.push(D),u.push(H),o.push({data:V,bands:S});case 17:p++,le.next=4;break;case 20:return le.abrupt("return",{rasterFiles:o,xhrList:u,errList:c});case 21:case"end":return le.stop()}},e)})),gb.apply(this,arguments)}var HI=function(){var e=(0,fn.Z)($t().mark(function a(r,o,u,c,p){var g;return $t().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return g={url:zI(r,o)},S.abrupt("return",new Promise(function(O,D){ZI(u,g,function(V,H){V?D(V):H&&O(H)},c,p)}));case 2:case"end":return S.stop()}},a)}));return function(r,o,u,c,p){return e.apply(this,arguments)}}(),jw=function(){var e=(0,fn.Z)($t().mark(function a(r,o,u,c){var p,g,y,S;return $t().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return g=Array.isArray(r)?r[0]:r,c.wmtsOptions?(y=(c==null?void 0:c.getURLFromTemplate)||Ia,p=y(g,(0,te.Z)((0,te.Z)({},o),c.wmtsOptions))):(S=(c==null?void 0:c.getURLFromTemplate)||La,p=S(g,o)),D.abrupt("return",new Promise(function(V,H){var ue,le=ps({url:p,type:(c==null||(ue=c.requestParameters)===null||ue===void 0?void 0:ue.type)||"arrayBuffer"},function(we,Ne){we?H(we):Ne&&V(Ne)},c.transformResponse);u.xhrCancel=function(){return le.cancel()}}));case 3:case"end":return D.stop()}},a)}));return function(r,o,u,c){return e.apply(this,arguments)}}(),mb=function(){return{rasterData:new Uint8Array([0]),width:1,height:1}},jI={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},T4=[Xl.ARRAYBUFFER,Xl.RGB];function WI(e){return!!(Array.isArray(e)&&e.length===0||!Array.isArray(e)&&typeof e!="string")}function GI(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(WI(e))throw new Error("tile server url is error");var r=(a==null?void 0:a.dataType)||Xl.IMAGE;r===Xl.RGB&&(r=Xl.ARRAYBUFFER);var o=function(p,g){switch(r){case Xl.IMAGE:return jw(e,p,g,a);case Xl.CUSTOMIMAGE:case Xl.CUSTOMTERRAINRGB:return NI(g,a==null?void 0:a.getCustomData);case Xl.ARRAYBUFFER:return HI(e,p,g,(a==null?void 0:a.format)||mb,a==null?void 0:a.operation);case Xl.CUSTOMARRAYBUFFER:case Xl.CUSTOMRGB:return Vw(g,a==null?void 0:a.getCustomData,(a==null?void 0:a.format)||mb,a==null?void 0:a.operation);default:return jw(e,p,g,a)}},u=(0,te.Z)((0,te.Z)((0,te.Z)({},jI),a),{},{getTileData:o});return{data:e,dataArray:[],tilesetOptions:u,isTile:!0}}var XI=["extent","min","max","width","height","format","operation"];function yb(e,a){var r=a.extent,o=a.min,u=a.max,c=a.width,p=a.height,g=a.format,y=a.operation,S=(0,Nc.Z)(a,XI),O;if(g===void 0||pg(e))O=Array.from(e);else{var D=Array.isArray(e)?e:[e];O=So(D,g,y)}var V={_id:1,dataArray:[(0,te.Z)((0,te.Z)({_id:1,data:O,width:c,height:p},S),{},{min:o,max:u,coordinates:[[r[0],r[1]],[r[2],r[3]]]})]};return V}var Ww={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},$I=function(){var e=(0,fn.Z)($t().mark(function a(r){return $t().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",new Promise(function(c){var p=(0,Vi.Z)(r.bounds,4),g=p[0],y=p[1],S=p[2],O=p[3],D={layers:{testTile:{features:[{type:"Feature",properties:{key:r.x+"/"+r.y+"/"+r.z,x:(g+S)/2,y:(y+O)/2},geometry:{type:"LineString",coordinates:[[S,O],[S,y],[g,y],[g,y]]}}]}}};c(D)}));case 1:case"end":return u.stop()}},a)}));return function(r){return e.apply(this,arguments)}}();function _b(e,a){var r=function(c){return $I(c)},o=(0,te.Z)((0,te.Z)((0,te.Z)({},Ww),a),{},{getTileData:r});return{data:e,dataArray:[],tilesetOptions:o,isTile:!0}}var YI=F(69848),KI=F.n(YI);function Gw(e,a){var r=a.radius,o=r===void 0?40:r,u=a.maxZoom,c=u===void 0?18:u,p=a.minZoom,g=p===void 0?0:p,y=a.zoom,S=y===void 0?2:y;if(e.pointIndex){var O=e.pointIndex.getClusters(e.extent,Math.floor(S));return e.dataArray=qI(O),e}var D=new(KI())({radius:o,minZoom:g,maxZoom:c}),V={type:"FeatureCollection",features:[]};return V.features=e.dataArray.map(function(H){return{type:"Feature",geometry:{type:"Point",coordinates:H.coordinates},properties:(0,te.Z)({},H)}}),D.load(V.features),D}function qI(e){return e.map(function(a,r){return(0,te.Z)({coordinates:a.geometry.coordinates,_id:r+1},a.properties)})}function QI(e){if(e.length===0)throw new Error("max requires at least one data point");for(var a=e[0],r=1;r<e.length;r++)e[r]>a&&(a=e[r]);return a}function xb(e){if(e.length===0)throw new Error("min requires at least one data point");for(var a=e[0],r=1;r<e.length;r++)e[r]<a&&(a=e[r]);return a}function Xw(e){if(e.length===0)return 0;for(var a=e[0],r=0,o,u=1;u<e.length;u++)o=a+e[u]*1,Math.abs(a)>=Math.abs(e[u])?r+=a-o+e[u]:r+=e[u]-o+a,a=o;return a+r*1}function JI(e){if(e.length===0)throw new Error("mean requires at least one data point");return Xw(e)/e.length}var eP={min:xb,max:QI,mean:JI,sum:Xw};function bb(e){var a=tP();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function tP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var rP=wa.cloneDeep,Wm=wa.isFunction,hy=wa.isString,Sb=wa.mergeWith;function $w(e,a){if(Array.isArray(a))return a}var Dg=function(e){(0,mr.Z)(r,e);var a=bb(r);function r(o,u){var c;return(0,Rt.Z)(this,r),c=a.call(this),(0,Fe.Z)((0,vr.Z)(c),"type","source"),(0,Fe.Z)((0,vr.Z)(c),"isTile",!1),(0,Fe.Z)((0,vr.Z)(c),"inited",!1),(0,Fe.Z)((0,vr.Z)(c),"hooks",{init:new Sd}),(0,Fe.Z)((0,vr.Z)(c),"parser",{type:"geojson"}),(0,Fe.Z)((0,vr.Z)(c),"transforms",[]),(0,Fe.Z)((0,vr.Z)(c),"cluster",!1),(0,Fe.Z)((0,vr.Z)(c),"clusterOptions",{enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"}),(0,Fe.Z)((0,vr.Z)(c),"invalidExtent",!1),(0,Fe.Z)((0,vr.Z)(c),"dataArrayChanged",!1),(0,Fe.Z)((0,vr.Z)(c),"cfg",{autoRender:!0}),c.originData=o,c.initCfg(u),c.init().then(function(){c.inited=!0,c.emit("update",{type:"inited"})}),c}return(0,at.Z)(r,[{key:"getSourceCfg",value:function(){return this.cfg}},{key:"getClusters",value:function(u){return this.clusterIndex.getClusters(this.caculClusterExtent(2),u)}},{key:"getClustersLeaves",value:function(u){return this.clusterIndex.getLeaves(u,1/0)}},{key:"getParserType",value:function(){return this.parser.type}},{key:"updateClusterData",value:function(u){var c=this,p=this.clusterOptions,g=p.method,y=g===void 0?"sum":g,S=p.field,O=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(u));this.clusterOptions.zoom=u,O.forEach(function(D){D.id||(D.properties.point_count=1)}),(S||Wm(y))&&(O=O.map(function(D){var V=D.id;if(V){var H=c.clusterIndex.getLeaves(V,1/0),ue=H.map(function(Ne){return Ne.properties}),le;if(hy(y)&&S){var we=pl(ue,S);le=eP[y](we)}Wm(y)&&(le=y(ue)),D.properties.stat=le}else D.properties.point_count=1;return D})),this.data=Q("geojson")({type:"FeatureCollection",features:O}),this.executeTrans()}},{key:"getFeatureById",value:function(u){var c=this.parser,p=c.type,g=p===void 0?"geojson":p,y=c.geometry;if(g==="geojson"&&!this.cluster){var S=u<this.originData.features.length?this.originData.features[u]:"null",O=rP(S);if(O!=null&&O.properties&&(this.transforms.length!==0||this.dataArrayChanged)){var D=this.data.dataArray.find(function(V){return V._id===u});O.properties=D}return O}else return g==="json"&&y?this.data.dataArray.find(function(V){return V._id===u}):u<this.data.dataArray.length?this.data.dataArray[u]:"null"}},{key:"updateFeaturePropertiesById",value:function(u,c){this.data.dataArray=this.data.dataArray.map(function(p){return p._id===u?(0,te.Z)((0,te.Z)({},p),c):p}),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}},{key:"getFeatureId",value:function(u,c){var p=this.data.dataArray.find(function(g){return g[u]===c});return p==null?void 0:p._id}},{key:"setData",value:function(u,c){var p=this;this.originData=u,this.dataArrayChanged=!1,this.initCfg(c),this.init().then(function(){p.emit("update",{type:"update"})})}},{key:"reloadAllTile",value:function(){var u;(u=this.tileset)===null||u===void 0||u.reloadAll()}},{key:"reloadTilebyId",value:function(u,c,p){var g;(g=this.tileset)===null||g===void 0||g.reloadTileById(u,c,p)}},{key:"reloadTileByLnglat",value:function(u,c,p){var g;(g=this.tileset)===null||g===void 0||g.reloadTileByLnglat(u,c,p)}},{key:"getTileExtent",value:function(u,c){var p;return(p=this.tileset)===null||p===void 0?void 0:p.getTileExtent(u,c)}},{key:"getTileByZXY",value:function(u,c,p){var g;return(g=this.tileset)===null||g===void 0?void 0:g.getTileByZXY(u,c,p)}},{key:"reloadTileByExtent",value:function(u,c){var p;(p=this.tileset)===null||p===void 0||p.reloadTileByExtent(u,c)}},{key:"destroy",value:function(){var u;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,(u=this.tileset)===null||u===void 0||u.destroy()}},{key:"processData",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p=this;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",new Promise(function(S,O){try{p.excuteParser(),p.initCluster(),p.executeTrans(),S({})}catch(D){O(D)}}));case 1:case"end":return y.stop()}},c)}));function u(){return o.apply(this,arguments)}return u}()},{key:"initCfg",value:function(u){this.cfg=Sb(this.cfg,u,$w);var c=this.cfg;c&&(c.parser&&(this.parser=c.parser),c.transforms&&(this.transforms=c.transforms),this.cluster=c.cluster||!1,c.clusterOptions&&(this.cluster=!0,this.clusterOptions=(0,te.Z)((0,te.Z)({},this.clusterOptions),c.clusterOptions)))}},{key:"init",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.inited=!1,g.next=3,this.processData();case 3:this.inited=!0;case 4:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"excuteParser",value:function(){var u=this.parser,c=u.type||"geojson",p=Q(c);this.data=p(this.originData,u),this.tileset=this.initTileset(),!u.cancelExtent&&(this.extent=fh(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}},{key:"setCenter",value:function(u){this.center=[(u[0]+u[2])/2,(u[1]+u[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}},{key:"initTileset",value:function(){var u=this.data.tilesetOptions;if(u){if(this.isTile=!0,this.tileset)return this.tileset.updateOptions(u),this.tileset;var c=new bo((0,te.Z)({},u));return c}}},{key:"executeTrans",value:function(){var u=this,c=this.transforms;c.forEach(function(p){var g=p.type,y=ee(g)(u.data,p);Object.assign(u.data,y)})}},{key:"initCluster",value:function(){if(this.cluster){var u=this.clusterOptions||{};this.clusterIndex=Gw(this.data,u)}}},{key:"caculClusterExtent",value:function(u){var c=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(c=bu(Mc(this.extent),u)),c[0].concat(c[1])}}]),r}(Ws.EventEmitter);function av(e,a){var r=a.callback;return r&&(e.dataArray=e.dataArray.filter(r)),e}function Yw(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Eb(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function Eb(e,a){if(e){if(typeof e=="string")return Kw(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kw(e,a)}}function Kw(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var wb=6378e3;function nP(e,a){var r=e.dataArray,o=a.size,u=o===void 0?10:o,c=u/(2*Math.PI*wb)*(256<<20)/2,p=iP(r,u),g=p.gridHash,y=p.gridOffset,S=oP(g,y,a);return{yOffset:c,xOffset:c,radius:c,type:"grid",dataArray:S}}function iP(e,a){var r=1/0,o=-1/0,u,c=Yw(e),p;try{for(c.s();!(p=c.n()).done;){var g=p.value;u=g.coordinates[1],Number.isFinite(u)&&(r=u<r?u:r,o=u>o?u:o)}}catch(mt){c.e(mt)}finally{c.f()}var y=(r+o)/2,S=wd(a,y);if(S.xOffset<=0||S.yOffset<=0)return{gridHash:{},gridOffset:S};var O={},D=Yw(e),V;try{for(D.s();!(V=D.n()).done;){var H=V.value,ue=H.coordinates[1],le=H.coordinates[0];if(Number.isFinite(ue)&&Number.isFinite(le)){var we=Math.floor((ue+90)/S.yOffset),Ne=Math.floor((le+180)/S.xOffset),dt="".concat(we,"-").concat(Ne);O[dt]=O[dt]||{count:0,points:[]},O[dt].count+=1,O[dt].points.push(H)}}}catch(mt){D.e(mt)}finally{D.f()}return{gridHash:O,gridOffset:S}}function wd(e,a){var r=aP(e),o=qw(a,e);return{yOffset:r,xOffset:o}}function aP(e){return e/wb*(180/Math.PI)}function qw(e,a){return a/wb*(180/Math.PI)/Math.cos(e*Math.PI/180)}function oP(e,a,r){return Object.keys(e).reduce(function(o,u,c){var p=u.split("-"),g=parseInt(p[0],10),y=parseInt(p[1],10),S={};if(r.field&&r.method){var O=Lh(e[u].points,r.field);S[r.method]=Bf[r.method](O)}return Object.assign(S,{_id:c,coordinates:fu([-180+a.xOffset*(y+.5),-90+a.yOffset*(g+.5)]),rawData:e[u].points,count:e[u].count}),o.push(S),o},[])}var Gm=Math.PI/3,sP=[0,Gm,2*Gm,3*Gm,4*Gm,5*Gm];function uP(e){return e[0]}function lP(e){return e[1]}function cP(){var e=0,a=0,r=1,o=1,u=uP,c=lP,p,g,y;function S(D){var V={},H=[],ue,le=D.length;for(ue=0;ue<le;++ue)if(!(isNaN(Ne=+u.call(null,we=D[ue],ue,D))||isNaN(dt=+c.call(null,we,ue,D)))){var we,Ne,dt,mt=Math.round(dt=dt/y),Lt=Math.round(Ne=Ne/g-(mt&1)/2),Wt=dt-mt;if(Math.abs(Wt)*3>1){var qt=Ne-Lt,ir=Lt+(Ne<Lt?-1:1)/2,Sr=mt+(dt<mt?-1:1),Br=Ne-ir,Jr=dt-Sr;qt*qt+Wt*Wt>Br*Br+Jr*Jr&&(Lt=ir+(mt&1?1:-1)/2,mt=Sr)}var en=Lt+"-"+mt,Kn=V[en];Kn?Kn.push(we):(H.push(Kn=V[en]=[we]),Kn.x=(Lt+(mt&1)/2)*g,Kn.y=mt*y)}return H}function O(D){var V=0,H=0;return sP.map(function(ue){var le=Math.sin(ue)*D,we=-Math.cos(ue)*D,Ne=le-V,dt=we-H;return V=le,H=we,[Ne,dt]})}return S.hexagon=function(D){return"m"+O(D==null?p:+D).join("l")+"z"},S.centers=function(){for(var D=[],V=Math.round(a/y),H=Math.round(e/g),ue=V*y;ue<o+p;ue+=y,++V)for(var le=H*g+(V&1)*g/2;le<r+g/2;le+=g)D.push([le,ue]);return D},S.mesh=function(){var D=O(p).slice(0,4).join("l");return S.centers().map(function(V){return"M"+V+"m"+D}).join("")},S.x=function(D){return arguments.length?(u=D,S):u},S.y=function(D){return arguments.length?(c=D,S):c},S.radius=function(D){return arguments.length?(p=+D,g=p*2*Math.sin(Gm),y=p*1.5,S):p},S.size=function(D){return arguments.length?(e=a=0,r=+D[0],o=+D[1],S):[r-e,o-a]},S.extent=function(D){return arguments.length?(e=+D[0][0],a=+D[0][1],r=+D[1][0],o=+D[1][1],S):[[e,a],[r,o]]},S.radius(1)}var fP=6378e3;function hP(e,a){var r=e.dataArray,o=a.size,u=o===void 0?10:o,c=a.method,p=c===void 0?"sum":c,g=u/(2*Math.PI*fP)*(256<<20)/2,y=r.map(function(V){var H=fu(V.coordinates),ue=(0,Vi.Z)(H,2),le=ue[0],we=ue[1];return(0,te.Z)((0,te.Z)({},V),{},{coordinates:[le,we]})}),S=cP().radius(g).x(function(V){return V.coordinates[0]}).y(function(V){return V.coordinates[1]}),O=S(y),D={dataArray:O.map(function(V,H){var ue;if(a.field&&p){var le=Lh(V,a.field);V[p]=Bf[p](le)}return ue={},(0,Fe.Z)(ue,a.method,V[p]),(0,Fe.Z)(ue,"count",V.length),(0,Fe.Z)(ue,"rawData",V),(0,Fe.Z)(ue,"coordinates",[V.x,V.y]),(0,Fe.Z)(ue,"_id",H),ue}),radius:g,xOffset:g,yOffset:g,type:"hexagon"};return D}function pP(e,a){var r=a.sourceField,o=a.targetField,u=a.data,c={};return u.forEach(function(p){c[p[r]]=p}),e.dataArray=e.dataArray.map(function(p){var g=p[o];return(0,te.Z)((0,te.Z)({},p),c[g])}),e}function Lg(e,a){var r=a.callback;return r&&(e.dataArray=e.dataArray.map(r)),e}oe("rasterTile",GI),oe("mvt",Fs),oe("geojsonvt",Ka),oe("testTile",_b),oe("geojson",L0),oe("jsonTile",pu),oe("image",ka),oe("csv",mm),oe("json",Rv),oe("raster",ki),oe("rasterRgb",yb),xe("cluster",Gw),xe("filter",av),xe("join",pP),xe("map",Lg),xe("grid",nP),xe("hexagon",hP);var q_=Dg;function dP(e){var a=Qw();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function Qw(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Cb=function(e){(0,mr.Z)(r,e);var a=dP(r);function r(o){var u;return(0,Rt.Z)(this,r),u=a.call(this),(0,Fe.Z)((0,vr.Z)(u),"added",!1),(0,Fe.Z)((0,vr.Z)(u),"eventHandle",function(c){u.polyfillEvent(c),u.emit(c.type,{target:c,data:u.markerOption.extData,lngLat:u.lngLat})}),u.markerOption=(0,te.Z)((0,te.Z)({},u.getDefault()),o),bp(["update","onMove","onMapClick"],(0,vr.Z)(u)),u.init(),u}return(0,at.Z)(r,[{key:"getMarkerLayerContainerSize",value:function(){}},{key:"getDefault",value:function(){return{element:void 0,anchor:Io.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(u){this.scene=u,this.mapsService=u.get(ut.IMapService),this.sceneSerive=u.get(ut.ISceneService);var c=this.markerOption.element;return this.mapsService.getMarkerContainer().appendChild(c),this.registerMarkerEvent(c),this.mapsService.on("camerachange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("camerachange",this.update)),this.unRegisterMarkerEvent(),this.removeAllListeners();var u=this.markerOption.element;return u&&sc(u),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(u){return this.lngLat=u,Array.isArray(u)&&(this.lngLat={lng:u[0],lat:u[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(u){var c=this;if(!this.added)return this.once("added",function(){c.setElement(u)}),this;var p=this.markerOption.element;return p&&sc(p),this.markerOption.element=u,this.init(),this.mapsService.getMarkerContainer().appendChild(u),this.registerMarkerEvent(u),this.update(),this}},{key:"openPopup",value:function(){var u=this;if(!this.added)return this.once("added",function(){u.openPopup()}),this;var c=this.popup;return c?(c.isOpen()||c.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var u=this;this.added||this.once("added",function(){u.closePopup()});var c=this.popup;return c&&c.remove(),this}},{key:"setPopup",value:function(u){return this.popup=u,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var u=this.popup;if(u)u.isOpen()?u.remove():u.addTo(this.scene);else return this;return this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(u){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(u){this.markerOption.extData=u}},{key:"update",value:function(){if(this.mapsService){var u=this.markerOption,c=u.element,p=u.anchor;this.updatePosition(),mp(c,"".concat(nr[p]))}}},{key:"onMapClick",value:function(u){var c=this.markerOption.element;this.popup&&c&&this.togglePopup()}},{key:"getCurrentContainerSize",value:function(){var u=this.mapsService.getContainer();return{containerHeight:(u==null?void 0:u.scrollHeight)||0,containerWidth:(u==null?void 0:u.scrollWidth)||0,bounds:this.mapsService.getBounds()}}},{key:"updatePosition",value:function(){if(this.mapsService){var u=this.markerOption,c=u.element,p=u.offsets,g=this.lngLat,y=g.lng,S=g.lat,O=this.mapsService.lngLatToContainer([y,S]);if(c){c.style.display="block",c.style.whiteSpace="nowrap";var D=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize(),V=D.containerHeight,H=D.containerWidth,ue=D.bounds;if(!ue)return;if(Math.abs(ue[0][0])>180||Math.abs(ue[1][0])>180){if(O.x>H){var le=this.mapsService.lngLatToContainer([y-360,S]);O.x=le.x}if(O.x<0){var we=this.mapsService.lngLatToContainer([y+360,S]);O.x=we.x}}(O.x>H||O.x<0||O.y>V||O.y<0)&&(c.style.display="none"),c.style.left=O.x+p[0]+"px",c.style.top=O.y-p[1]+"px"}}}},{key:"init",value:function(){var u=this,c=this.markerOption.element,p=this.markerOption,g=p.color,y=p.anchor;if(!c){this.defaultMarker=!0,c=Ns("div"),this.markerOption.element=c;var S=document.createElementNS("http://www.w3.org/2000/svg","svg");S.setAttributeNS(null,"display","block"),S.setAttributeNS(null,"height","48px"),S.setAttributeNS(null,"width","48px"),S.setAttributeNS(null,"viewBox","0 0 1024 1024");var O=document.createElementNS("http://www.w3.org/2000/svg","path");O.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),O.setAttributeNS(null,"fill",g),S.appendChild(O),c.appendChild(S)}qu(c,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(function(D){var V,H,ue=((V=u.markerOption)===null||V===void 0?void 0:V.style)&&((H=u.markerOption)===null||H===void 0?void 0:H.style[D]);c&&(c.style[D]=ue)}),At(c,y,"marker")}},{key:"registerMarkerEvent",value:function(u){u.addEventListener("click",this.onMapClick),u.addEventListener("mousemove",this.eventHandle),u.addEventListener("click",this.eventHandle),u.addEventListener("mousedown",this.eventHandle),u.addEventListener("mouseup",this.eventHandle),u.addEventListener("dblclick",this.eventHandle),u.addEventListener("contextmenu",this.eventHandle),u.addEventListener("mouseover",this.eventHandle),u.addEventListener("mouseout",this.eventHandle),u.addEventListener("touchstart",this.eventHandle),u.addEventListener("touchend",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var u=this.getElement();u.removeEventListener("click",this.onMapClick),u.removeEventListener("mousemove",this.eventHandle),u.removeEventListener("click",this.eventHandle),u.removeEventListener("mousedown",this.eventHandle),u.removeEventListener("mouseup",this.eventHandle),u.removeEventListener("dblclick",this.eventHandle),u.removeEventListener("contextmenu",this.eventHandle),u.removeEventListener("mouseover",this.eventHandle),u.removeEventListener("mouseout",this.eventHandle),u.removeEventListener("touchstart",this.eventHandle),u.removeEventListener("touchend",this.eventHandle)}},{key:"polyfillEvent",value:function(u){!this.mapsService||this.mapsService.version!=="GAODE2.x"||Of()||(u.type==="touchstart"&&(this.touchStartTime=Date.now()),u.type==="touchend"&&Date.now()-this.touchStartTime<300&&this.emit("click",{target:u,data:this.markerOption.extData,lngLat:this.lngLat}))}},{key:"addDragHandler",value:function(u){return null}},{key:"onUp",value:function(u){throw new Error("Method not implemented.")}}]),r}(Ws.EventEmitter);function M4(e){var a=py();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function py(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Xm=wa.merge,R4=null,Jw=F(4157);function vP(e){var a=gP();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function gP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var dy=function(e){(0,mr.Z)(r,e);var a=vP(r);function r(o){var u;return(0,Rt.Z)(this,r),u=a.call(this),r.controlCount++,u.controlOption=(0,te.Z)((0,te.Z)({},u.getDefault(o)),o||{}),u}return(0,at.Z)(r,[{key:"getOptions",value:function(){return this.controlOption}},{key:"setOptions",value:function(u){var c=this.getDefault(u);Object.entries(u).forEach(function(p){var g=(0,Vi.Z)(p,2),y=g[0],S=g[1];S===void 0&&(u[y]=c[y])}),"position"in u&&this.setPosition(u.position),"className"in u&&this.setClassName(u.className),"style"in u&&this.setStyle(u.style),this.controlOption=(0,te.Z)((0,te.Z)({},this.controlOption),u)}},{key:"addTo",value:function(u){this.mapsService=u.get(ut.IMapService),this.renderService=u.get(ut.IRendererService),this.layerService=u.get(ut.ILayerService),this.controlService=u.get(ut.IControlService),this.configService=u.get(ut.IGlobalConfigService),this.scene=u.get(ut.ISceneService),this.sceneContainer=u,this.isShow=!0,this.container=this.onAdd(),qu(this.container,"l7-control");var c=this.controlOption,p=c.className,g=c.style;return p&&this.setClassName(p),g&&this.setStyle(g),this.insertContainer(),this.emit("add",this),this}},{key:"remove",value:function(){if(!this.mapsService)return this;sc(this.container),this.onRemove(),this.emit("remove",this)}},{key:"onAdd",value:function(){return Ns("div")}},{key:"onRemove",value:function(){}},{key:"show",value:function(){var u=this.container;gp(u,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}},{key:"hide",value:function(){var u=this.container;qu(u,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}},{key:"getDefault",value:function(u){return{position:fi.TOPRIGHT,name:"".concat(r.controlCount)}}},{key:"getContainer",value:function(){return this.container}},{key:"getIsShow",value:function(){return this.isShow}},{key:"_refocusOnMap",value:function(u){if(this.mapsService&&u&&u.screenX>0&&u.screenY>0){var c=this.mapsService.getContainer();c!==null&&c.focus()}}},{key:"setPosition",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fi.TOPLEFT,c=this.controlService;return c&&c.removeControl(this),this.controlOption.position=u,c&&c.addControl(this,this.sceneContainer),this}},{key:"setClassName",value:function(u){var c=this.container,p=this.controlOption.className;p&&gp(c,p),u&&qu(c,u)}},{key:"setStyle",value:function(u){var c=this.container;u?c.setAttribute("style",u):c.removeAttribute("style")}},{key:"insertContainer",value:function(){var u=this.controlOption.position,c=this.container;if(u instanceof Element)u.appendChild(c);else{var p=this.controlService.controlCorners[u];["bottomleft","bottomright","righttop","rightbottom"].includes(u)?p.insertBefore(c,p.firstChild):p.appendChild(c)}}},{key:"checkUpdateOption",value:function(u,c){return c.some(function(p){return p in u})}}]),r}(Vl());(0,Fe.Z)(dy,"controlCount",0);function I4(e){var a=$m();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function $m(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ab=null;function mP(e){var a=yP();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function yP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ym=function(e){(0,mr.Z)(r,e);var a=mP(r);function r(o,u){var c;return(0,Rt.Z)(this,r),c=a.call(this),(0,Fe.Z)((0,vr.Z)(c),"isShow",!1),(0,Fe.Z)((0,vr.Z)(c),"timeout",null),(0,Fe.Z)((0,vr.Z)(c),"show",function(){return c.isShow||!c.contentDOM.innerHTML||(c.resetPopperPosition(),gp(c.popperDOM,"l7-popper-hide"),c.isShow=!0,c.option.unique&&r.conflictPopperList.forEach(function(p){p!==(0,vr.Z)(c)&&p.isShow&&p.hide()}),c.emit("show"),window.addEventListener("pointerdown",c.onPopperUnClick)),(0,vr.Z)(c)}),(0,Fe.Z)((0,vr.Z)(c),"hide",function(){return c.isShow&&(qu(c.popperDOM,"l7-popper-hide"),c.isShow=!1,c.emit("hide"),window.removeEventListener("pointerdown",c.onPopperUnClick)),(0,vr.Z)(c)}),(0,Fe.Z)((0,vr.Z)(c),"setHideTimeout",function(){c.timeout||(c.timeout=window.setTimeout(function(){c.isShow&&(c.hide(),c.timeout=null)},300))}),(0,Fe.Z)((0,vr.Z)(c),"clearHideTimeout",function(){c.timeout&&(window.clearTimeout(c.timeout),c.timeout=null)}),(0,Fe.Z)((0,vr.Z)(c),"onBtnClick",function(){c.isShow?c.hide():c.show()}),(0,Fe.Z)((0,vr.Z)(c),"onPopperUnClick",function(p){rs(p.target,[".l7-button-control",".l7-popper-content"])||c.hide()}),(0,Fe.Z)((0,vr.Z)(c),"onBtnMouseLeave",function(){c.setHideTimeout()}),(0,Fe.Z)((0,vr.Z)(c),"onBtnMouseMove",function(){c.clearHideTimeout(),!c.isShow&&c.show()}),c.button=o,c.option=u,c.init(),u.unique&&r.conflictPopperList.push((0,vr.Z)(c)),c}return(0,at.Z)(r,[{key:"buttonRect",get:function(){return this.button.getBoundingClientRect()}},{key:"getPopperDOM",value:function(){return this.popperDOM}},{key:"getIsShow",value:function(){return this.isShow}},{key:"getContent",value:function(){return this.content}},{key:"setContent",value:function(u){typeof u=="string"?this.contentDOM.innerHTML=u:u instanceof HTMLElement&&(Wc(this.contentDOM),this.contentDOM.appendChild(u)),this.content=u}},{key:"init",value:function(){var u=this.option.trigger;this.popperDOM=this.createPopper(),u==="click"?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}},{key:"destroy",value:function(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),sc(this.popperDOM)}},{key:"resetPopperPosition",value:function(){var u={},c=this.option,p=c.container,g=c.offset,y=g===void 0?[0,0]:g,S=c.placement,O=(0,Vi.Z)(y,2),D=O[0],V=O[1],H=this.button.getBoundingClientRect(),ue=p.getBoundingClientRect(),le=xp(H,ue),we=le.left,Ne=le.right,dt=le.top,mt=le.bottom,Lt=!1,Wt=!1;/^(left|right)/.test(S)?(S.includes("left")?u.right="".concat(H.width+Ne,"px"):S.includes("right")&&(u.left="".concat(H.width+we,"px")),S.includes("start")?u.top="".concat(dt,"px"):S.includes("end")?u.bottom="".concat(mt,"px"):(u.top="".concat(dt+H.height/2,"px"),Wt=!0,u.transform="translate(".concat(D,"px, calc(").concat(V,"px - 50%))"))):/^(top|bottom)/.test(S)&&(S.includes("top")?u.bottom="".concat(H.height+mt,"px"):S.includes("bottom")&&(u.top="".concat(H.height+dt,"px")),S.includes("start")?u.left="".concat(we,"px"):S.includes("end")?u.right="".concat(Ne,"px"):(u.left="".concat(we+H.width/2,"px"),Lt=!0,u.transform="translate(calc(".concat(D,"px - 50%), ").concat(V,"px)"))),u.transform="translate(calc(".concat(D,"px - ").concat(Lt?"50%":"0%","), calc(").concat(V,"px - ").concat(Wt?"50%":"0%",")");var qt=S.split("-");qt.length&&qu(this.popperDOM,qt.map(function(ir){return"l7-popper-".concat(ir)}).join(" ")),yp(this.popperDOM,_p(u))}},{key:"createPopper",value:function(){var u=this.option,c=u.container,p=u.className,g=p===void 0?"":p,y=u.content,S=Ns("div","l7-popper l7-popper-hide ".concat(g)),O=Ns("div","l7-popper-content"),D=Ns("div","l7-popper-arrow");return S.appendChild(O),S.appendChild(D),c.appendChild(S),this.popperDOM=S,this.contentDOM=O,y&&this.setContent(y),S}}]),r}(Ws.EventEmitter);(0,Fe.Z)(Ym,"conflictPopperList",[]);function P4(e){var a=_P();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function _P(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var xP={topleft:"right-start",topcenter:"bottom",topright:"left-start",bottomleft:"right-end",bottomcenter:"top",bottomright:"left-end",lefttop:"bottom-start",leftcenter:"right",leftbottom:"top-start",righttop:"bottom-end",rightcenter:"left",rightbottom:"top-end"},eC=null;function O4(e){var a=bP();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function bP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var SP=function(e){return e.ActiveOptionClassName="l7-select-control-item-active",e.OptionValueAttrKey="data-option-value",e.OptionIndexAttrKey="data-option-index",e}(SP||{}),tC=null,Tb=function(a){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.classList.add("l7-iconfont"),r.setAttribute("aria-hidden","true");var o=document.createElementNS("http://www.w3.org/2000/svg","use");return o.setAttributeNS("http://www.w3.org/1999/xlink","href","#".concat(a)),r.appendChild(o),r};function k4(e){var a=EP();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function EP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var wP=null;function rC(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=CP(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function CP(e,a){if(e){if(typeof e=="string")return Mb(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mb(e,a)}}function Mb(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var Rb=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Cd=function(){if(typeof document=="undefined")return!1;for(var e=Rb[0],a={},r=0,o=Rb;r<o.length;r++){var u=o[r],c=u==null?void 0:u[1];if(c in document){var p=rC(u.entries()),g;try{for(p.s();!(g=p.n()).done;){var y=(0,Vi.Z)(g.value,2),S=y[0],O=y[1];a[e[S]]=O}}catch(D){p.e(D)}finally{p.f()}return a}}return!1}(),nC={change:Cd.fullscreenchange,error:Cd.fullscreenerror},Sh={request:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.documentElement,r=arguments.length>1?arguments[1]:void 0;return new Promise(function(o,u){var c=function g(){Sh.off("change",g),o()};Sh.on("change",c);var p=a[Cd.requestFullscreen](r);p instanceof Promise&&p.then(c).catch(u)})},exit:function(){return new Promise(function(a,r){if(!Sh.isFullscreen){a();return}var o=function c(){Sh.off("change",c),a()};Sh.on("change",o);var u=document[Cd.exitFullscreen]();u instanceof Promise&&u.then(o).catch(r)})},toggle:function(a,r){return Sh.isFullscreen?Sh.exit():Sh.request(a,r)},onchange:function(a){Sh.on("change",a)},onerror:function(a){Sh.on("error",a)},on:function(a,r){var o=nC[a];o&&document.addEventListener(o,r,!1)},off:function(a,r){var o=nC[a];o&&document.removeEventListener(o,r,!1)},raw:Cd};Object.defineProperties(Sh,{isFullscreen:{get:function(){return!!document[Cd.fullscreenElement]}},element:{enumerable:!0,get:function(){var a;return(a=document[Cd.fullscreenElement])!==null&&a!==void 0?a:void 0}},isEnabled:{enumerable:!0,get:function(){return!!document[Cd.fullscreenEnabled]}}}),Cd||(Sh={isEnabled:!1});var iC=null;function AP(e){var a=TP();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function TP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var MP=null;function aC(e){var a=oC();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function oC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var F4=null;function D4(e){var a=RP();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function RP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function sC(e){return Object.keys(e!=null?e:{}).every(function(a){return["layer","name","img"].includes(a)})}var L4=null;function uC(e){var a=IP();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function IP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var lC=function(e){(0,mr.Z)(r,e);var a=uC(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getDefault",value:function(){return{position:fi.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}},{key:"onAdd",value:function(){var u=Ns("div","l7-control-logo");return this.setLogoContent(u),u}},{key:"onRemove",value:function(){return null}},{key:"setOptions",value:function(u){nf((0,Ft.Z)(r.prototype),"setOptions",this).call(this,u),this.checkUpdateOption(u,["img","href"])&&(Wc(this.container),this.setLogoContent(this.container))}},{key:"setLogoContent",value:function(u){var c=this.controlOption,p=c.href,g=c.img,y=Ns("img");if(y.setAttribute("src",g),y.setAttribute("aria-label","AntV logo"),Nd(y),p){var S=Ns("a","l7-control-logo-link");S.target="_blank",S.href=p,S.rel="noopener nofollow",S.setAttribute("rel","noopener nofollow"),S.appendChild(y),u.appendChild(S)}else u.appendChild(y)}}]),r}(dy),B4={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*qdFDSbvIalgAAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u6708\u5149\u94F6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d-vcRLzu8WIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u5E7B\u5F71\u9ED1",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*HMbRTI3XnpIAAAAAAAAAAAAADmJ7AQ/original"},fresh:{text:"\u8349\u8272\u9752",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kqaGQ5kjSiAAAAAAAAAAAAAADmJ7AQ/original"},grey:{text:"\u96C5\u58EB\u7070",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*XegrTpZIbqAAAAAAAAAAAAAADmJ7AQ/original"},graffiti:{text:"\u6D82\u9E26",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*G5g9SZ_Jg4cAAAAAAAAAAAAADmJ7AQ/original"},macaron:{text:"\u9A6C\u5361\u9F99",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*irVvQbDpQMwAAAAAAAAAAAAADmJ7AQ/original"},darkblue:{text:"\u6781\u591C\u84DD",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*lKRzQYB4iR0AAAAAAAAAAAAADmJ7AQ/original"},wine:{text:"\u9171\u7C7D",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*orY0T7QL-lwAAAAAAAAAAAAADmJ7AQ/original"}},N4={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kIyZTok4Uk0AAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u4EAE",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Z3JRQKDI-cIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u6697",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d7HCQbfmyaoAAAAAAAAAAAAADmJ7AQ/original"},satellite:{text:"\u536B\u661F",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*TytUT6pS9okAAAAAAAAAAAAADmJ7AQ/original"},outdoors:{text:"\u6237\u5916",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*hWwFSYJEFWsAAAAAAAAAAAAADmJ7AQ/original"}};function z4(e){var a=cC();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function cC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var U4=null;function Z4(e){var a=PP();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function PP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var V4=null;function OP(e){var a=kP();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function kP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var fC=function(e){(0,mr.Z)(r,e);var a=OP(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"update",function(){var g=o.mapsService,y=o.controlOption.maxWidth,S=g.getSize()[1]/2,O=g.containerToLngLat([0,S]),D=g.containerToLngLat([y,S]),V=Oh([O.lng,O.lat],[D.lng,D.lat]);o.updateScales(V)}),o}return(0,at.Z)(r,[{key:"getDefault",value:function(u){return(0,te.Z)((0,te.Z)({},nf((0,Ft.Z)(r.prototype),"getDefault",this).call(this,u)),{},{name:"scale",position:fi.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,lockWidth:!0})}},{key:"onAdd",value:function(){var u="l7-control-scale",c=Ns("div",u);this.resetScaleLines(c);var p=this.controlOption.updateWhenIdle;return this.mapsService.on(p?"moveend":"mapmove",this.update),this.mapsService.on(p?"zoomend":"zoomchange",this.update),c}},{key:"onRemove",value:function(){var u=this.controlOption.updateWhenIdle;this.mapsService.off(u?"zoomend":"zoomchange",this.update),this.mapsService.off(u?"moveend":"mapmove",this.update)}},{key:"setOptions",value:function(u){nf((0,Ft.Z)(r.prototype),"setOptions",this).call(this,u),this.checkUpdateOption(u,["lockWidth","maxWidth","metric","updateWhenIdle","imperial"])&&this.resetScaleLines(this.container)}},{key:"updateScales",value:function(u){var c=this.controlOption,p=c.metric,g=c.imperial;p&&u&&this.updateMetric(u),g&&u&&this.updateImperial(u)}},{key:"resetScaleLines",value:function(u){Wc(u);var c=this.controlOption,p=c.metric,g=c.imperial,y=c.maxWidth,S=c.lockWidth;S&&yp(u,"width: ".concat(y,"px")),p&&(this.mScale=Ns("div","l7-control-scale-line",u)),g&&(this.iScale=Ns("div","l7-control-scale-line",u)),this.update()}},{key:"updateScale",value:function(u,c,p){var g=this.controlOption.maxWidth;u.style.width=Math.round(g*p)+"px",u.innerHTML=c}},{key:"getRoundNum",value:function(u){var c=Math.pow(10,(Math.floor(u)+"").length-1),p=u/c;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,c*p}},{key:"updateMetric",value:function(u){var c=this.getRoundNum(u),p=c<1e3?c+" m":c/1e3+" km";this.updateScale(this.mScale,p,c/u)}},{key:"updateImperial",value:function(u){var c=u*3.2808399,p,g,y;c>5280?(p=c/5280,g=this.getRoundNum(p),this.updateScale(this.iScale,g+" mi",g/p)):(y=this.getRoundNum(c),this.updateScale(this.iScale,y+" ft",y/c))}}]),r}(dy);function Gf(e){var a=FP();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function FP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Q_=function(e){(0,mr.Z)(r,e);var a=Gf(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"zoomIn",function(){!o.disabled&&o.mapsService.getZoom()<o.mapsService.getMaxZoom()&&o.mapsService.zoomIn()}),(0,Fe.Z)((0,vr.Z)(o),"zoomOut",function(){!o.disabled&&o.mapsService.getZoom()>o.mapsService.getMinZoom()&&o.mapsService.zoomOut()}),(0,Fe.Z)((0,vr.Z)(o),"updateDisabled",function(){var g=o.mapsService;o.zoomInButton.removeAttribute("disabled"),o.zoomOutButton.removeAttribute("disabled"),(o.disabled||g.getZoom()<=g.getMinZoom())&&o.zoomOutButton.setAttribute("disabled","true"),o.controlOption.showZoom&&o.zoomNumDiv&&(o.zoomNumDiv.innerText=String(Math.floor(g.getZoom()))),(o.disabled||g.getZoom()>=g.getMaxZoom())&&o.zoomInButton.setAttribute("disabled","true")}),o}return(0,at.Z)(r,[{key:"getDefault",value:function(u){return(0,te.Z)((0,te.Z)({},nf((0,Ft.Z)(r.prototype),"getDefault",this).call(this,u)),{},{position:fi.BOTTOMRIGHT,name:"zoom",zoomInText:Tb("l7-icon-enlarge"),zoomInTitle:"Zoom in",zoomOutText:Tb("l7-icon-narrow"),zoomOutTitle:"Zoom out",showZoom:!1})}},{key:"setOptions",value:function(u){nf((0,Ft.Z)(r.prototype),"setOptions",this).call(this,u),this.checkUpdateOption(u,["zoomInText","zoomInTitle","zoomOutText","zoomOutTitle","showZoom"])&&this.resetButtonGroup(this.container)}},{key:"onAdd",value:function(){var u=Ns("div","l7-control-zoom");return this.resetButtonGroup(u),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),u}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"resetButtonGroup",value:function(u){Wc(u),this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,"l7-button-control",u,this.zoomIn),this.controlOption.showZoom&&(this.zoomNumDiv=this.createButton("0","","l7-button-control l7-control-zoom__number",u)),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,"l7-button-control",u,this.zoomOut),this.updateDisabled()}},{key:"createButton",value:function(u,c,p,g,y){var S=Ns("button",p,g);return typeof u=="string"?S.innerHTML=u:S.append(u),S.title=c,y&&S.addEventListener("click",y),S}}]),r}(dy);function H4(e){var a=Ib();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function Ib(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var j4=null;function W4(e){var a=DP();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function DP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var LP=wa.get,G4=null;function BP(e,a){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(a||(a=document),!!a)){var u=a.head||a.getElementsByTagName("head")[0];if(!u){u=a.createElement("head");var c=a.body||a.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):a.documentElement.appendChild(u)}var p=a.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(a.createTextNode(e)),u.appendChild(p),p}}BP(`.l7-marker-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}
.l7-marker-cluster {
  width: 40px;
  height: 40px;
  background-color: rgba(181, 226, 140, 0.6);
  background-clip: padding-box;
  border-radius: 20px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-top: 5px;
  margin-left: 5px;
  font: 12px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  text-align: center;
  background-color: rgba(110, 204, 57, 0.6);
  border-radius: 15px;
}
.l7-marker-cluster span {
  line-height: 30px;
}
.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  -webkit-box-shadow: none;
          box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  background-clip: padding-box;
  border: 2px solid rgba(0, 0, 0, 0.2);
}
.mapboxgl-ctrl-logo,
.amap-logo {
  display: none !important;
}
.l7-select-box {
  border: 3px dashed gray;
  border-radius: 2px;
  position: absolute;
  z-index: 999;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
}
.l7-control-container {
  font: 12px/1.5 'Helvetica Neue', Arial, Helvetica, sans-serif;
}
.l7-control-container .l7-control {
  position: relative;
  z-index: 999;
  float: left;
  clear: both;
  color: #595959;
  font-size: 12px;
  pointer-events: visiblePainted;
  /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control-container .l7-control.l7-control--hide {
  display: none;
}
.l7-control-container .l7-top {
  top: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {
  margin-top: 8px;
}
.l7-control-container .l7-right {
  right: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {
  margin-right: 8px;
}
.l7-control-container .l7-bottom {
  bottom: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {
  margin-bottom: 8px;
}
.l7-control-container .l7-left {
  left: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {
  margin-left: 8px;
}
.l7-control-container .l7-center {
  position: absolute;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
}
.l7-control-container .l7-center.l7-top,
.l7-control-container .l7-center.l7-bottom {
  width: 100%;
}
.l7-control-container .l7-center.l7-left,
.l7-control-container .l7-center.l7-right {
  height: 100%;
}
.l7-control-container .l7-center .l7-control {
  margin-right: 8px;
  margin-bottom: 8px;
}
.l7-control-container .l7-row {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-control-container .l7-row.l7-top {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-control-container .l7-row.l7-bottom {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-control-container .l7-column {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-control-container .l7-column.l7-left {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-control-container .l7-column.l7-right {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-button-control {
  min-width: 28px;
  height: 28px;
  background-color: #fff;
  border-width: 0;
  border-radius: 2px;
  outline: 0;
  cursor: pointer;
  -webkit-transition: all 0.2s;
  transition: all 0.2s;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  padding: 0 6px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  line-height: 16px;
}
.l7-button-control .l7-iconfont {
  fill: #595959;
  color: #595959;
  width: 16px;
  height: 16px;
}
.l7-button-control.l7-button-control--row {
  padding: 0 16px 0 13px;
}
.l7-button-control.l7-button-control--row * + .l7-button-control__text {
  margin-left: 8px;
}
.l7-button-control.l7-button-control--column {
  height: 44px;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-button-control.l7-button-control--column .l7-iconfont {
  margin-top: 3px;
}
.l7-button-control.l7-button-control--column .l7-button-control__text {
  margin-top: 3px;
  font-size: 10px;
  -webkit-transform: scale(0.83333);
          transform: scale(0.83333);
}
.l7-button-control:not(:disabled):hover {
  background-color: #f3f3f3;
}
.l7-button-control:not(:disabled):active {
  background-color: #f3f3f3;
}
.l7-button-control:disabled {
  background-color: #fafafa;
  color: #bdbdbd;
  cursor: not-allowed;
}
.l7-button-control:disabled .l7-iconfont {
  fill: #bdbdbd;
  color: #bdbdbd;
}
.l7-button-control:disabled:hover {
  background-color: #fafafa;
}
.l7-button-control:disabled:active {
  background-color: #fafafa;
}
.l7-popper {
  position: absolute;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  z-index: 5;
  color: #595959;
}
.l7-popper.l7-popper-hide {
  display: none;
}
.l7-popper .l7-popper-content {
  min-height: 28px;
  background: #fff;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper .l7-popper-arrow {
  width: 0;
  height: 0;
  border-width: 4px;
  border-style: solid;
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
  border-right-color: transparent;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper.l7-popper-left {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-popper.l7-popper-left .l7-popper-arrow {
  border-left-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-right {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: reverse;
      -ms-flex-direction: row-reverse;
          flex-direction: row-reverse;
}
.l7-popper.l7-popper-right .l7-popper-arrow {
  border-right-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-top {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-popper.l7-popper-top .l7-popper-arrow {
  border-top-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-bottom {
  -webkit-box-orient: vertical;
  -webkit-box-direction: reverse;
      -ms-flex-direction: column-reverse;
          flex-direction: column-reverse;
}
.l7-popper.l7-popper-bottom .l7-popper-arrow {
  border-bottom-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-start {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-popper.l7-popper-end {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-select-control--normal {
  padding: 4px 0;
}
.l7-select-control--normal .l7-select-control-item {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  height: 24px;
  padding: 0 16px;
  font-size: 12px;
  line-height: 24px;
}
.l7-select-control--normal .l7-select-control-item > * + * {
  margin-left: 6px;
}
.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {
  width: 14px;
  height: 14px;
}
.l7-select-control--normal .l7-select-control-item:hover {
  background-color: #f3f3f3;
}
.l7-select-control--image {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -ms-flex-wrap: wrap;
      flex-wrap: wrap;
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
  -webkit-box-sizing: content-box;
          box-sizing: content-box;
  max-width: 420px;
  max-height: 400px;
  margin: 12px 0 0 12px;
  overflow: auto;
}
.l7-select-control--image .l7-select-control-item {
  position: relative;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-sizing: content-box;
          box-sizing: content-box;
  width: 408px / 3 - 12px;
  margin-right: 12px;
  margin-bottom: 12px;
  overflow: hidden;
  font-size: 12px;
  border: 1px solid #fff;
  border-radius: 2px;
}
.l7-select-control--image .l7-select-control-item img {
  width: 100%;
  height: 80px;
}
.l7-select-control--image .l7-select-control-item input[type='checkbox'] {
  position: absolute;
  top: 0;
  right: 0;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  line-height: 26px;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {
  margin-left: 8px;
}
.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {
  border-color: #0370fe;
}
.l7-select-control-item {
  cursor: pointer;
}
.l7-select-control-item input[type='checkbox'] {
  margin: 0;
  cursor: pointer;
}
.l7-select-control--multiple .l7-select-control-item:hover {
  background-color: transparent;
}
.l7-control-logo {
  width: 89px;
  height: 16px;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.l7-control-logo img {
  height: 100%;
  width: 100%;
}
.l7-control-logo .l7-control-logo-link {
  display: block;
  cursor: pointer;
}
.l7-control-logo .l7-control-logo-link img {
  cursor: pointer;
}
.l7-control-mouse-location {
  background-color: #fff;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  padding: 2px 4px;
  min-width: 130px;
}
.l7-control-zoom {
  overflow: hidden;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-control-zoom .l7-button-control {
  font-size: 16px;
  border-bottom: 1px solid #f0f0f0;
  border-radius: 0;
  -webkit-box-shadow: 0 0 0;
          box-shadow: 0 0 0;
}
.l7-control-zoom .l7-button-control .l7-iconfont {
  width: 14px;
  height: 14px;
}
.l7-control-zoom .l7-button-control:last-child {
  border-bottom: 0;
}
.l7-control-zoom .l7-control-zoom__number {
  color: #595959;
  padding: 0;
}
.l7-control-zoom .l7-control-zoom__number:hover {
  background-color: #fff;
}
.l7-control-scale {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-control-scale .l7-control-scale-line {
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  padding: 2px 5px 1px;
  overflow: hidden;
  color: #595959;
  font-size: 10px;
  line-height: 1.1;
  white-space: nowrap;
  background: #fff;
  border: 2px solid #000;
  border-top: 0;
  -webkit-transition: width 0.1s;
  transition: width 0.1s;
}
.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {
  margin-top: -2px;
  border-top: 2px solid #777;
  border-bottom: none;
}
.l7-right .l7-control-scale {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-right .l7-control-scale .l7-control-scale-line {
  text-align: right;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  will-change: transform;
  pointer-events: none;
}
.l7-popup.l7-popup-hide {
  display: none;
}
.l7-popup .l7-popup-content {
  position: relative;
  padding: 16px;
  font-size: 14px;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.l7-popup .l7-popup-content .l7-popup-content__title {
  margin-bottom: 8px;
  font-weight: bold;
}
.l7-popup .l7-popup-content .l7-popup-close-button,
.l7-popup .l7-popup-content .l7-popup-content__title,
.l7-popup .l7-popup-content .l7-popup-content__panel {
  white-space: normal;
  -webkit-user-select: text;
     -moz-user-select: text;
      -ms-user-select: text;
          user-select: text;
  pointer-events: initial;
}
.l7-popup .l7-popup-content .l7-popup-close-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 18px;
  height: 18px;
  padding: 0;
  font-size: 14px;
  line-height: 18px;
  text-align: center;
  background-color: transparent;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
}
.l7-popup .l7-popup-tip {
  position: relative;
  z-index: 1;
  width: 0;
  height: 0;
  border: 10px solid transparent;
}
.l7-popup.l7-popup-anchor-bottom,
.l7-popup.l7-popup-anchor-bottom-left,
.l7-popup.l7-popup-anchor-bottom-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: reverse;
      -ms-flex-direction: column-reverse;
          flex-direction: column-reverse;
}
.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {
  bottom: 1px;
}
.l7-popup.l7-popup-anchor-top,
.l7-popup.l7-popup-anchor-top-left,
.l7-popup.l7-popup-anchor-top-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-popup.l7-popup-anchor-top .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {
  top: 1px;
}
.l7-popup.l7-popup-anchor-left {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-popup.l7-popup-anchor-right {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: reverse;
      -ms-flex-direction: row-reverse;
          flex-direction: row-reverse;
}
.l7-popup-anchor-top .l7-popup-tip {
  position: relative;
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-top: none;
  border-bottom-color: #fff;
  border-left: none;
}
.l7-popup-anchor-top-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-bottom .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-top-color: #fff;
  border-bottom: none;
}
.l7-popup-anchor-bottom-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-top-color: #fff;
  border-bottom: none;
  border-left: none;
}
.l7-popup-anchor-bottom-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-top-color: #fff;
  border-right: none;
  border-bottom: none;
}
.l7-popup-anchor-left .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-right-color: #fff;
  border-left: none;
}
.l7-popup-anchor-right .l7-popup-tip {
  right: 1px;
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-right: none;
  border-left-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}
.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}
.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}
.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}
.l7-popup-track-pointer {
  display: none;
}
.l7-popup-track-pointer * {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  pointer-events: none;
}
.l7-map:hover .l7-popup-track-pointer {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
}
.l7-map:active .l7-popup-track-pointer {
  display: none;
}
.l7-layer-popup__row {
  font-size: 12px;
}
.l7-layer-popup__row + .l7-layer-popup__row {
  margin-top: 4px;
}
`);var jv,hC=(jv={},(0,Fe.Z)(jv,Ba.additive,{enable:!0,func:{srcRGB:gt.ONE,dstRGB:gt.ONE,srcAlpha:1,dstAlpha:1}}),(0,Fe.Z)(jv,Ba.none,{enable:!1}),(0,Fe.Z)(jv,Ba.normal,{enable:!0,func:{srcRGB:gt.SRC_ALPHA,dstRGB:gt.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),(0,Fe.Z)(jv,Ba.subtractive,{enable:!0,func:{srcRGB:gt.ONE,dstRGB:gt.ONE,srcAlpha:gt.ZERO,dstAlpha:gt.ONE_MINUS_SRC_COLOR},equation:{rgb:gt.FUNC_SUBTRACT,alpha:gt.FUNC_SUBTRACT}}),(0,Fe.Z)(jv,Ba.max,{enable:!0,func:{srcRGB:gt.ONE,dstRGB:gt.ONE},equation:{rgb:gt.MAX_EXT}}),(0,Fe.Z)(jv,Ba.min,{enable:!0,func:{srcRGB:gt.ONE,dstRGB:gt.ONE},equation:{rgb:gt.MIN_EXT}}),jv);function pC(e){return e.map(function(a){return typeof a=="string"&&(a=[a,{}]),a})}function dC(e,a,r,o){var u=e.multiPassRenderer,c=e.getLayerConfig(),p=c.enableTAA;return p?u.add(o("taa")):u.add(o("render")),pC(a).forEach(function(g){var y=(0,Vi.Z)(g,2),S=y[0],O=y[1];u.add(r(S),O)}),u.add(r("copy")),u}var NP=function(){function e(a){(0,Rt.Z)(this,e),this.layer=a}return(0,at.Z)(e,[{key:"pickRender",value:function(r){var o=this.layer.getContainer(),u=o.get(ut.ILayerService),c=this.layer;if(c.tileLayer)return c.tileLayer.pickRender(r);c.hooks.beforePickingEncode.call(),u.renderTileLayerMask(c),c.renderModels({ispick:!0}),c.hooks.afterPickingEncode.call()}},{key:"pick",value:function(r,o){var u=this.layer.getContainer(),c=u.get(ut.IPickingService);return r.type==="RasterLayer"?this.pickRasterLayer(r,o):(this.pickRender(o),c.pickFromPickingFBO(r,o))}},{key:"pickRasterLayer",value:function(r,o,u){var c=this.layer.getContainer(),p=c.get(ut.IPickingService),g=c.get(ut.IMapService),y=this.layer.getSource().extent,S=ws(o.lngLat,y),O={x:o.x,y:o.y,type:o.type,lngLat:o.lngLat,target:o,rasterValue:null},D=u||r;if(S){var V=this.readRasterValue(r,y,g,o.x,o.y);return O.rasterValue=V,p.triggerHoverOnLayer(D,O),!0}else return O.type=o.type==="mousemove"?"mouseout":"un"+o.type,p.triggerHoverOnLayer(D,(0,te.Z)((0,te.Z)({},O),{},{type:"unpick"})),p.triggerHoverOnLayer(D,O),!1}},{key:"readRasterValue",value:function(r,o,u,c,p){var g=r.getSource().data.dataArray[0],y=(0,Vi.Z)(o,4),S=y[0],O=S===void 0?0:S,D=y[1],V=D===void 0?0:D,H=y[2],ue=H===void 0?10:H,le=y[3],we=le===void 0?-10:le,Ne=u.lngLatToContainer([O,V]),dt=u.lngLatToContainer([ue,we]),mt=dt.x-Ne.x,Lt=Ne.y-dt.y,Wt=[(c-Ne.x)/mt,(p-dt.y)/Lt],qt=g.width||1,ir=g.height||1,Sr=Math.floor(Wt[0]*qt),Br=Math.floor(Wt[1]*ir),Jr=Math.max(0,Br-1)*qt+Sr,en=g.data[Jr];return en}},{key:"selectFeature",value:function(r){var o=this.layer,u=(0,Vi.Z)(r,3),c=u[0],p=u[1],g=u[2];o.hooks.beforeSelect.call([c,p,g])}},{key:"highlightPickedFeature",value:function(r){var o=(0,Vi.Z)(r,3),u=o[0],c=o[1],p=o[2];this.layer.hooks.beforeHighlight.call([u,c,p])}},{key:"getFeatureById",value:function(r){return this.layer.getSource().getFeatureById(r)}}]),e}(),zP=function(){function e(a){(0,Rt.Z)(this,e),this.layer=a;var r=this.layer.getContainer();this.rendererService=r.get(ut.IRendererService)}return(0,at.Z)(e,[{key:"getColorTexture",value:function(r,o){var u=this.getTextureKey(r,o);return this.key===u?this.colorTexture:(this.createColorTexture(r,o),this.key=u,this.colorTexture)}},{key:"createColorTexture",value:function(r,o){var u=this.rendererService.createTexture2D,c=this.getColorRampBar(r,o),p=u({data:new Uint8Array(c.data),width:c.width,height:c.height,flipY:!1});return this.colorTexture=p,p}},{key:"setColorTexture",value:function(r,o,u){this.key=this.getTextureKey(o,u),this.colorTexture=r}},{key:"destroy",value:function(){var r;(r=this.colorTexture)===null||r===void 0||r.destroy()}},{key:"getColorRampBar",value:function(r,o){switch(r.type){case"cat":return Sc(r);case"quantize":return Rf(r);case"custom":return Bl(r,o);case"linear":return bc(r,o);default:return ds(r)}}},{key:"getTextureKey",value:function(r,o){var u;return"".concat(r.colors.join("_"),"_").concat(r==null||(u=r.positions)===null||u===void 0?void 0:u.join("_"),"_").concat(r.type,"_").concat(o==null?void 0:o.join("_"))}}]),e}(),UP=["passes"],ZP=["moduleName","vertexShader","fragmentShader","inject","triangulation","styleOption"],Pb,J_,vC;function gC(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=VP(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function VP(e,a){if(e){if(typeof e=="string")return mC(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mC(e,a)}}function mC(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}function HP(e){var a=jP();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function jP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ob=wa.isEqual,yC=wa.isFunction,_C=wa.isNumber,zc=wa.isObject,WP=wa.isPlainObject,GP=wa.isUndefined,xC=0,Xf=(Pb=db(ut.IGlobalConfigService),J_=function(e){(0,mr.Z)(r,e);var a=HP(r);function r(){var o,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,Rt.Z)(this,r),o=a.call(this),(0,Fe.Z)((0,vr.Z)(o),"id","".concat(xC++)),(0,Fe.Z)((0,vr.Z)(o),"name","".concat(xC)),(0,Fe.Z)((0,vr.Z)(o),"visible",!0),(0,Fe.Z)((0,vr.Z)(o),"zIndex",0),(0,Fe.Z)((0,vr.Z)(o),"inited",!1),(0,Fe.Z)((0,vr.Z)(o),"layerModelNeedUpdate",!1),(0,Fe.Z)((0,vr.Z)(o),"pickedFeatureID",null),(0,Fe.Z)((0,vr.Z)(o),"selectedFeatureID",null),(0,Fe.Z)((0,vr.Z)(o),"styleNeedUpdate",!1),(0,Fe.Z)((0,vr.Z)(o),"forceRender",!1),(0,Fe.Z)((0,vr.Z)(o),"clusterZoom",0),(0,Fe.Z)((0,vr.Z)(o),"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),(0,Fe.Z)((0,vr.Z)(o),"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),(0,Fe.Z)((0,vr.Z)(o),"hooks",{init:new yR,afterInit:new fE,beforeRender:new fE,beforeRenderData:new hE,afterRender:new Sd,beforePickingEncode:new Sd,afterPickingEncode:new Sd,beforeHighlight:new Sd(["pickedColor"]),afterHighlight:new Sd,beforeSelect:new Sd(["pickedColor"]),afterSelect:new Sd,beforeDestroy:new Sd,afterDestroy:new Sd}),(0,Fe.Z)((0,vr.Z)(o),"models",[]),(0,Fe.Z)((0,vr.Z)(o),"startInit",!1),(0,Fe.Z)((0,vr.Z)(o),"layerChildren",[]),(0,Fe.Z)((0,vr.Z)(o),"masks",[]),Za((0,vr.Z)(o),"configService",vC,(0,vr.Z)(o)),(0,Fe.Z)((0,vr.Z)(o),"animateOptions",{enable:!1}),(0,Fe.Z)((0,vr.Z)(o),"currentPickId",null),(0,Fe.Z)((0,vr.Z)(o),"encodeStyleAttribute",{}),(0,Fe.Z)((0,vr.Z)(o),"enableShaderEncodeStyles",[]),(0,Fe.Z)((0,vr.Z)(o),"enableDataEncodeStyles",[]),(0,Fe.Z)((0,vr.Z)(o),"enablg",[]),(0,Fe.Z)((0,vr.Z)(o),"pendingStyleAttributes",[]),(0,Fe.Z)((0,vr.Z)(o),"scaleOptions",{}),(0,Fe.Z)((0,vr.Z)(o),"animateStatus",!1),(0,Fe.Z)((0,vr.Z)(o),"isDestroyed",!1),(0,Fe.Z)((0,vr.Z)(o),"encodeDataLength",0),(0,Fe.Z)((0,vr.Z)(o),"sourceEvent",function(){o.dataState.dataSourceNeedUpdate=!0;var c=o.getLayerConfig();c&&c.autoFit&&o.fitBounds(c.fitBoundsOptions);var p=o.layerSource.getSourceCfg().autoRender;p&&o.reRender()}),o.name=u.name||o.id,o.zIndex=u.zIndex||0,o.rawConfig=u,o}return(0,at.Z)(r,[{key:"addMask",value:function(u){this.masks.push(u),this.enableMask()}},{key:"removeMask",value:function(u){var c=this.masks.indexOf(u);c>-1&&this.masks.splice(c,1)}},{key:"disableMask",value:function(){this.updateLayerConfig({enableMask:!1})}},{key:"enableMask",value:function(){this.updateLayerConfig({enableMask:!0})}},{key:"addMaskLayer",value:function(u){this.masks.push(u)}},{key:"removeMaskLayer",value:function(u){var c=this.masks.indexOf(u);c>-1&&this.masks.splice(c,1),u.destroy()}},{key:"getAttribute",value:function(u){return this.styleAttributeService.getLayerStyleAttribute(u)}},{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(u){var c=this;if(Object.keys(u).map(function(g){g in c.rawConfig&&(c.rawConfig[g]=u[g])}),!this.startInit)this.needUpdateConfig=(0,te.Z)((0,te.Z)({},this.needUpdateConfig),u);else{var p=this.container.get(ut.SceneID);this.configService.setLayerConfig(p,this.id,(0,te.Z)((0,te.Z)((0,te.Z)({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),u)),this.needUpdateConfig={}}}},{key:"setContainer",value:function(u,c){this.container=u,this.sceneContainer=c}},{key:"getContainer",value:function(){return this.container}},{key:"addPlugin",value:function(u){return this.plugins.push(u),this}},{key:"init",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p=this,g,y,S,O,D,V,H;return $t().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:g=this.container.get(ut.SceneID),this.startInit=!0,this.configService.setLayerConfig(g,this.id,this.rawConfig),this.layerType=this.rawConfig.layerType,this.iconService=this.container.get(ut.IIconService),this.fontService=this.container.get(ut.IFontService),this.rendererService=this.container.get(ut.IRendererService),this.layerService=this.container.get(ut.ILayerService),this.debugService=this.container.get(ut.IDebugService),this.interactionService=this.container.get(ut.IInteractionService),this.pickingService=this.container.get(ut.IPickingService),this.mapService=this.container.get(ut.IMapService),y=this.getLayerConfig(),S=y.enableMultiPassRenderer,O=y.passes,S&&O!==null&&O!==void 0&&O.length&&O.length>0&&this.mapService.on("mapAfterFrameChange",function(){p.renderLayers()}),this.cameraService=this.container.get(ut.ICameraService),this.coordinateService=this.container.get(ut.ICoordinateSystemService),this.shaderModuleService=this.container.get(ut.IShaderModuleService),this.postProcessingPassFactory=this.container.get(ut.IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(ut.IFactoryNormalPass),this.styleAttributeService=this.container.get(ut.IStyleAttributeService),S&&(this.multiPassRenderer=this.container.get(ut.IMultiPassRenderer),this.multiPassRenderer.setLayer(this)),this.pendingStyleAttributes.forEach(function(we){var Ne=we.attributeName,dt=we.attributeField,mt=we.attributeValues,Lt=we.updateOptions;p.styleAttributeService.updateStyleAttribute(Ne,{scale:(0,te.Z)({field:dt},p.splitValuesAndCallbackInAttribute(mt,dt?void 0:p.getLayerConfig()[Ne]))},Lt)}),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(ut.ILayerPlugin),D=gC(this.plugins);try{for(D.s();!(V=D.n()).done;)H=V.value,H.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}catch(we){D.e(we)}finally{D.f()}return this.layerPickService=new NP(this),this.textureService=new zP(this),this.log(gl.LayerInitStart),le.next=31,this.hooks.init.promise();case 31:this.log(gl.LayerInitEnd),this.inited=!0,this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this.hooks.afterInit.call();case 36:case"end":return le.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"log",value:function(u){var c,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"init";if(!(this.tileLayer||this.isTileLayer)){var g="".concat(this.id,".").concat(p,".").concat(u),y={id:this.id,type:this.type};(c=this.debugService)===null||c===void 0||c.log(g,y)}}},{key:"updateModelData",value:function(u){u.attributes&&u.elements?this.models.map(function(c){c.updateAttributesAndElements(u.attributes,u.elements)}):console.warn("data error")}},{key:"setLayerPickService",value:function(u){this.layerPickService=u}},{key:"prepareBuildModel",value:function(){Object.keys(this.needUpdateConfig||{}).length!==0&&this.updateLayerConfig({});var u=this.getLayerConfig(),c=u.animateOption;c!=null&&c.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}},{key:"color",value:function(u,c,p){return this.updateStyleAttribute("color",u,c,p),this}},{key:"texture",value:function(u,c,p){return this.updateStyleAttribute("texture",u,c,p),this}},{key:"rotate",value:function(u,c,p){return this.updateStyleAttribute("rotate",u,c,p),this}},{key:"size",value:function(u,c,p){return this.updateStyleAttribute("size",u,c,p),this}},{key:"filter",value:function(u,c,p){var g=this.updateStyleAttribute("filter",u,c,p);return this.dataState.dataSourceNeedUpdate=g&&this.inited,this}},{key:"shape",value:function(u,c,p){this.shapeOption={field:u,values:c};var g=this.updateStyleAttribute("shape",u,c,p);return this.dataState.dataSourceNeedUpdate=g&&this.inited,this}},{key:"label",value:function(u,c,p){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:u,attributeValues:c,updateOptions:p}),this}},{key:"animate",value:function(u){var c={};return zc(u)?(c.enable=!0,c=(0,te.Z)((0,te.Z)({},c),u)):c.enable=u,this.updateLayerConfig({animateOption:c}),this}},{key:"source",value:function(u,c){return(u==null?void 0:u.type)==="source"?(this.setSource(u),this):(this.sourceOption={data:u,options:c},this.clusterZoom=0,this)}},{key:"setData",value:function(u,c){var p=this;return this.inited?(this.log(gl.SourceInitStart,Na.UPDATE),this.layerSource.setData(u,c),this.log(gl.SourceInitEnd,Na.UPDATE)):this.on("inited",function(){p.log(gl.SourceInitStart,Na.UPDATE);var g=p.getSource();g?p.layerSource.setData(u,c):p.source(new q_(u,c)),p.layerSource.once("update",function(){p.log(gl.SourceInitEnd,Na.UPDATE)})}),this}},{key:"style",value:function(u){var c=this,p=u.passes,g=(0,Nc.Z)(u,UP);p&&pC(p).forEach(function(S){var O=c.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(S[0]);O&&O.updateOptions(S[1])}),g.borderColor&&(g.stroke=g.borderColor),g.borderWidth&&(g.strokeWidth=g.borderWidth);var y=g;return Object.keys(g).forEach(function(S){var O=g[S];Array.isArray(O)&&O.length===2&&!_C(O[0])&&!_C(O[1])&&(y[S]={field:O[0],value:O[1]})}),this.encodeStyle(y),this.updateLayerConfig(y),this}},{key:"encodeStyle",value:function(u){var c=this;Object.keys(u).forEach(function(p){[].concat((0,Sn.Z)(c.enableShaderEncodeStyles),(0,Sn.Z)(c.enableDataEncodeStyles)).includes(p)&&WP(u[p])&&(u[p].field||u[p].value)&&!Ob(c.encodeStyleAttribute[p],u[p])?(c.encodeStyleAttribute[p]=u[p],c.updateStyleAttribute(p,u[p].field,u[p].value),c.inited&&(c.dataState.dataMappingNeedUpdate=!0)):c.encodeStyleAttribute[p]&&(delete c.encodeStyleAttribute[p],c.dataState.dataSourceNeedUpdate=!0)})}},{key:"scale",value:function(u,c){var p=(0,te.Z)({},this.scaleOptions);if(zc(u)?this.scaleOptions=(0,te.Z)((0,te.Z)({},this.scaleOptions),u):this.scaleOptions[u]=c,this.styleAttributeService&&!Ob(p,this.scaleOptions)){var g=zc(u)?u:(0,Fe.Z)({},u,c);this.styleAttributeService.updateScaleAttribute(g)}return this}},{key:"renderLayers",value:function(){this.rendering=!0,this.layerService.reRender(),this.rendering=!1}},{key:"render",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender?this:(this.renderModels(u),this))}},{key:"renderMultiPass",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(this.encodeDataLength<=0&&!this.forceRender)){g.next=2;break}return g.abrupt("return");case 2:if(!(this.multiPassRenderer&&this.multiPassRenderer.getRenderFlag())){g.next=7;break}return g.next=5,this.multiPassRenderer.render();case 5:g.next=8;break;case 7:this.multiPassRenderer?this.renderModels():this.renderModels();case 8:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"active",value:function(u){var c={};return c.enableHighlight=zc(u)?!0:u,zc(u)?(c.enableHighlight=!0,u.color&&(c.highlightColor=u.color),u.mix&&(c.activeMix=u.mix)):c.enableHighlight=!!u,this.updateLayerConfig(c),this}},{key:"setActive",value:function(u,c){var p=this;if(zc(u)){var g=u.x,y=g===void 0?0:g,S=u.y,O=S===void 0?0:S;this.updateLayerConfig({highlightColor:zc(c)?c.color:this.getLayerConfig().highlightColor,activeMix:zc(c)?c.mix:this.getLayerConfig().activeMix}),this.pick({x:y,y:O})}else this.updateLayerConfig({pickedFeatureID:u,highlightColor:zc(c)?c.color:this.getLayerConfig().highlightColor,activeMix:zc(c)?c.mix:this.getLayerConfig().activeMix}),this.hooks.beforeHighlight.call(Es(u)).then(function(){setTimeout(function(){p.reRender()},1)})}},{key:"select",value:function(u){var c={};return c.enableSelect=zc(u)?!0:u,zc(u)?(c.enableSelect=!0,u.color&&(c.selectColor=u.color),u.mix&&(c.selectMix=u.mix)):c.enableSelect=!!u,this.updateLayerConfig(c),this}},{key:"setSelect",value:function(u,c){var p=this;if(zc(u)){var g=u.x,y=g===void 0?0:g,S=u.y,O=S===void 0?0:S;this.updateLayerConfig({selectColor:zc(c)?c.color:this.getLayerConfig().selectColor,selectMix:zc(c)?c.mix:this.getLayerConfig().selectMix}),this.pick({x:y,y:O})}else this.updateLayerConfig({pickedFeatureID:u,selectColor:zc(c)?c.color:this.getLayerConfig().selectColor,selectMix:zc(c)?c.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call(Es(u)).then(function(){setTimeout(function(){p.reRender()},1)})}},{key:"setBlend",value:function(u){return this.updateLayerConfig({blend:u}),this.reRender(),this}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}},{key:"setIndex",value:function(u){return this.zIndex=u,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}},{key:"setCurrentPickId",value:function(u){this.currentPickId=u}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(u){this.selectedFeatureID=u}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var u=this.mapService.getZoom(),c=this.getLayerConfig(),p=c.visible,g=c.minZoom,y=g===void 0?-1/0:g,S=c.maxZoom,O=S===void 0?1/0:S;return!!p&&u>=y&&u<O}},{key:"setMultiPass",value:function(u,c){if(this.updateLayerConfig({enableMultiPassRenderer:u}),c&&this.updateLayerConfig({passes:c}),u){var p=this.getLayerConfig(),g=p.passes,y=g===void 0?[]:g;this.multiPassRenderer=dC(this,y,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);var S=this.rendererService.getViewportSize(),O=S.width,D=S.height;this.multiPassRenderer.resize(O,D)}return this}},{key:"setMinZoom",value:function(u){return this.updateLayerConfig({minZoom:u}),this}},{key:"getMinZoom",value:function(){var u=this.getLayerConfig(),c=u.minZoom;return c}},{key:"getMaxZoom",value:function(){var u=this.getLayerConfig(),c=u.maxZoom;return c}},{key:"get",value:function(u){var c=this.getLayerConfig();return c[u]}},{key:"setMaxZoom",value:function(u){return this.updateLayerConfig({maxZoom:u}),this}},{key:"setAutoFit",value:function(u){return this.updateLayerConfig({autoFit:u}),this}},{key:"fitBounds",value:function(u){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var c=this.getSource(),p=c.extent,g=p.some(function(y){return Math.abs(y)===1/0});return g?this:(this.mapService.fitBounds([[p[0],p[1]],[p[2],p[3]]],u),this)}},{key:"destroy",value:function(){var u,c,p,g,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(!this.isDestroyed){this.layerModel.uniformBuffers.forEach(function(D){D.destroy()}),this.layerChildren.map(function(D){return D.destroy(!1)}),this.layerChildren=[];var S=this.getLayerConfig(),O=S.maskfence;O&&(this.masks.map(function(D){return D.destroy(!1)}),this.masks=[]),this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),(u=this.multiPassRenderer)===null||u===void 0||u.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),(c=this.layerModel)===null||c===void 0||c.clearModels(y),(p=this.tileLayer)===null||p===void 0||p.destroy(),this.models=[],(g=this.debugService)===null||g===void 0||g.removeLog(this.id),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0}}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){var u;this.models.forEach(function(c){return c.destroy()}),(u=this.layerModel)===null||u===void 0||u.clearModels(),this.models=[]}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(function(u){return u.needRescale||u.needRemapping||u.needRegenerateVertices}).length}},{key:"setSource",value:function(u){var c=this;if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=u,this.clusterZoom=0,this.inited&&this.layerSource.cluster){var p=this.mapService.getZoom();this.layerSource.updateClusterData(p)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",function(g){var y=g.type;if(c.coordCenter===void 0){var S,O=c.layerSource.center;c.coordCenter=O,(S=c.mapService)!==null&&S!==void 0&&S.setCoordCenter&&c.mapService.setCoordCenter(O)}if(y==="update"){if(c.tileLayer){c.tileLayer.reload();return}c.sourceEvent()}})}},{key:"getSource",value:function(){return this.layerSource}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(u){this.encodedData=u,this.encodeDataLength=u.length}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getScale",value:function(u){return this.styleAttributeService.getLayerAttributeScale(u)}},{key:"getLegend",value:function(u){var c,p,g,y=this.styleAttributeService.getLayerStyleAttribute(u),S=(y==null||(c=y.scale)===null||c===void 0?void 0:c.scalers)||[];return{type:(p=S[0].option)===null||p===void 0?void 0:p.type,field:y==null||(g=y.scale)===null||g===void 0?void 0:g.field,items:this.getLegendItems(u)}}},{key:"getLegendItems",value:function(u){var c=this.styleAttributeService.getLayerAttributeScale(u);if(!c)return[];if(c.invertExtent){var p=c.range().map(function(S){return(0,Fe.Z)({value:c.invertExtent(S)},u,S)});return p}else if(c.ticks){var g=c.ticks().map(function(S){return(0,Fe.Z)({value:S},u,c(S))});return g}else if(c!=null&&c.domain){var y=c.domain().filter(function(S){return!GP(S)}).map(function(S){return(0,Fe.Z)({value:S},u,c(S))});return y}return[]}},{key:"pick",value:function(u){var c=u.x,p=u.y;this.interactionService.triggerHover({x:c,y:p})}},{key:"boxSelect",value:function(u,c){this.pickingService.boxPickLayer(this,u,c)}},{key:"buildLayerModel",value:function(){var o=(0,fn.Z)($t().mark(function c(p){var g=this,y,S,O,D,V,H,ue,le,we,Ne,dt,mt;return $t().wrap(function(Wt){for(;;)switch(Wt.prev=Wt.next){case 0:return y=p.moduleName,S=p.vertexShader,O=p.fragmentShader,D=p.inject,V=p.triangulation,H=p.styleOption,ue=(0,Nc.Z)(p,ZP),this.shaderModuleService.registerModule(y,{vs:S,fs:O,inject:D}),le=this.shaderModuleService.getModule(y),we=le.vs,Ne=le.fs,dt=le.uniforms,mt=this.rendererService.createModel,Wt.abrupt("return",new Promise(function(qt){var ir=g.styleAttributeService.createAttributesAndIndices(g.encodedData,V,H),Sr=ir.attributes,Br=ir.elements,Jr=ir.count,en=(0,te.Z)({attributes:Sr,uniforms:dt,fs:Ne,vs:we,elements:Br,blend:hC[Ba.normal],uniformBuffers:[].concat((0,Sn.Z)(g.layerModel.uniformBuffers),(0,Sn.Z)(g.rendererService.uniformBuffers)),textures:g.layerModel.textures},ue);Jr&&(en.count=Jr);var Kn=mt(en);qt(Kn)}));case 5:case"end":return Wt.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"createAttributes",value:function(u){var c=u.triangulation,p=this.styleAttributeService.createAttributes(this.encodedData,c),g=p.attributes;return g}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(u){var c=this.getLayerConfig(),p=c.enableHighlight,g=p===void 0?!0:p,y=c.enableSelect,S=y===void 0?!0:y,O=this.eventNames().indexOf(u)!==-1||this.eventNames().indexOf("un"+u)!==-1;return(u==="click"||u==="dblclick")&&S&&(O=!0),u==="mousemove"&&(g||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(O=!0),this.isVisible()&&O}},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return g.stop()}},c)}));function u(){return o.apply(this,arguments)}return u}()},{key:"rebuildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.buildModels();case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"renderMulPass",value:function(){var o=(0,fn.Z)($t().mark(function c(p){return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,p.render();case 2:case"end":return y.stop()}},c)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"renderModels",value:function(){var u=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.encodeDataLength<=0&&!this.forceRender?(this.clearModels(),this):(this.hooks.beforeRender.call(),this.models.forEach(function(p){p.draw({uniforms:u.layerModel.getUninforms(),blend:u.layerModel.getBlend(),stencil:u.layerModel.getStencil(c)},(c==null?void 0:c.ispick)||!1)}),this.hooks.afterRender.call(),this)}},{key:"updateStyleAttribute",value:function(u,c,p,g){var y=this.configService.getAttributeConfig(this.id)||{};return Ob(y[u],{field:c,values:p})?!1:(["color","size","texture","rotate","filter","label","shape"].indexOf(u)!==-1&&this.configService.setAttributeConfig(this.id,(0,Fe.Z)({},u,{field:c,values:p})),this.startInit?this.styleAttributeService.updateStyleAttribute(u,{scale:(0,te.Z)({field:c},this.splitValuesAndCallbackInAttribute(p,this.getLayerConfig()[c]))},g):this.pendingStyleAttributes.push({attributeName:u,attributeField:c,attributeValues:p,updateOptions:g}),!0)}},{key:"getLayerAttributeConfig",value:function(){return this.configService.getAttributeConfig(this.id)}},{key:"getShaderPickStat",value:function(){return this.layerService.getShaderPickStat()}},{key:"setEarthTime",value:function(u){console.warn("empty fn")}},{key:"processData",value:function(u){return u}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"initLayerModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.models.forEach(function(y){return y.destroy()}),this.models=[],g.next=4,this.layerModel.initModels();case 4:this.models=g.sent;case 5:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"reRender",value:function(){this.inited&&this.layerService.reRender()}},{key:"splitValuesAndCallbackInAttribute",value:function(u){return{values:yC(u)?void 0:u,callback:yC(u)?u:void 0}}}]),r}(Ws.EventEmitter),vC=ra(J_.prototype,"configService",[Pb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J_);function bC(e,a){return{enable:e,mask:255,func:{cmp:gt.EQUAL,ref:a?1:0,mask:1}}}function Sf(e){return e.maskOperation===Ho.OR?{enable:!0,mask:255,func:{cmp:gt.ALWAYS,ref:1,mask:255},opFront:{fail:gt.KEEP,zfail:gt.REPLACE,zpass:gt.REPLACE}}:{enable:!0,mask:255,func:{cmp:e.stencilType===Do.SINGLE||e.stencilIndex===0?gt.ALWAYS:gt.LESS,ref:e.stencilType===Do.SINGLE?1:e.stencilIndex===0?2:1,mask:255},opFront:{fail:gt.KEEP,zfail:gt.REPLACE,zpass:gt.REPLACE}}}var jp={opacity:1,stroke:[1,0,0,1],offsets:[0,0],rotation:0,extrusionBase:0,strokeOpacity:1,thetaOffset:.314},vy={opacity:"float",stroke:"vec4",offsets:"vec2",textOffset:"vec2",rotation:"float",extrusionBase:"float",strokeOpacity:"float",thetaOffset:"float"},tc=function(e){return e[e.POSITION=0]="POSITION",e[e.COLOR=1]="COLOR",e[e.VERTEX_ID=2]="VERTEX_ID",e[e.PICKING_COLOR=3]="PICKING_COLOR",e[e.STROKE=4]="STROKE",e[e.OPACITY=5]="OPACITY",e[e.OFFSETS=6]="OFFSETS",e[e.ROTATION=7]="ROTATION",e[e.EXTRUSION_BASE=8]="EXTRUSION_BASE",e[e.SIZE=9]="SIZE",e[e.SHAPE=10]="SHAPE",e[e.EXTRUDE=11]="EXTRUDE",e[e.MAX=12]="MAX",e}({});function X4(e){switch(e){case"rotation":return{name:"Rotation",type:Gi.Attribute,descriptor:{name:"a_Rotation",shaderLocation:tc.ROTATION,buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(r){var o=r.rotation,u=o===void 0?0:o;return Array.isArray(u)?[u[0]]:[u]}}};case"stroke":return{name:"stroke",type:Gi.Attribute,descriptor:{name:"a_Stroke",shaderLocation:tc.STROKE,buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:4,update:function(r){var o=r.stroke,u=o===void 0?[1,1,1,1]:o;return u}}};case"opacity":return{name:"opacity",type:Gi.Attribute,descriptor:{name:"a_Opacity",shaderLocation:tc.OPACITY,buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(r){var o=r.opacity,u=o===void 0?1:o;return[u]}}};case"extrusionBase":return{name:"extrusionBase",type:Gi.Attribute,descriptor:{name:"a_ExtrusionBase",shaderLocation:tc.EXTRUSION_BASE,buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(r){var o=r.extrusionBase,u=o===void 0?0:o;return[u]}}};case"offsets":return{name:"offsets",type:Gi.Attribute,descriptor:{name:"a_Offsets",shaderLocation:tc.OFFSETS,buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(r){var o=r.offsets;return o}}};case"thetaOffset":return{name:"thetaOffset",type:Gi.Attribute,descriptor:{name:"a_ThetaOffset",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(r){var o=r.thetaOffset,u=o===void 0?1:o;return[u]}}};default:return}}var Ad,es,e1,kb={opacity:tc.OPACITY,stroke:tc.STROKE,offsets:tc.OFFSETS,rotation:tc.ROTATION,extrusionBase:tc.EXTRUSION_BASE},us=(Ad=db(ut.IGlobalConfigService),es=function(){function e(a){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"uniformBuffers",[]),(0,Fe.Z)(this,"textures",[]),(0,Fe.Z)(this,"preStyleAttribute",{}),(0,Fe.Z)(this,"encodeStyleAttribute",{}),Za(this,"configService",e1,this),this.layer=a,this.rendererService=a.getContainer().get(ut.IRendererService),this.pickingService=a.getContainer().get(ut.IPickingService),this.shaderModuleService=a.getContainer().get(ut.IShaderModuleService),this.styleAttributeService=a.getContainer().get(ut.IStyleAttributeService),this.mapService=a.getContainer().get(ut.IMapService),this.iconService=a.getContainer().get(ut.IIconService),this.fontService=a.getContainer().get(ut.IFontService),this.cameraService=a.getContainer().get(ut.ICameraService),this.layerService=a.getContainer().get(ut.ILayerService),this.registerStyleAttribute(),this.registerBuiltinAttributes(),this.startModelAnimate();var r=this.rendererService.createTexture2D;this.createTexture2D=r}return(0,at.Z)(e,[{key:"getBlend",value:function(){var r=this.layer.getLayerConfig(),o=r.blend,u=o===void 0?"normal":o;return hC[Ba[u]]}},{key:"getStencil",value:function(r){var o=this.layer.getLayerConfig(),u=o.mask,c=u===void 0?!1:u,p=o.maskInside,g=p===void 0?!0:p,y=o.enableMask,S=o.maskOperation,O=S===void 0?Ho.AND:S;if(this.layer.type==="MaskLayer")return Sf({isStencil:!0,stencilType:Do.SINGLE});if(r.isStencil)return Sf((0,te.Z)((0,te.Z)({},r),{},{maskOperation:O}));var D=c||y&&this.layer.masks.length!==0||this.layer.tileMask!==void 0;return bC(D,g)}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){var a=(0,fn.Z)($t().mark(function o(){return $t().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",!1);case 1:case"end":return c.stop()}},o)}));function r(){return a.apply(this,arguments)}return r}()},{key:"buildModels",value:function(){var a=(0,fn.Z)($t().mark(function o(){return $t().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return c.stop()}},o)}));function r(){return a.apply(this,arguments)}return r}()},{key:"initModels",value:function(){var a=(0,fn.Z)($t().mark(function o(){return $t().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return c.stop()}},o)}));function r(){return a.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"render",value:function(r){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(r){return[r.enable?0:1,r.duration||4,r.interval||.2,r.trailLength||.1]}},{key:"startModelAnimate",value:function(){var r=this.layer.getLayerConfig(),o=r.animateOption;o.enable&&this.layer.setAnimateStartTime()}},{key:"getInject",value:function(){var r=this.layer.encodeStyleAttribute,o="",u=[];this.layer.enableShaderEncodeStyles.forEach(function(g){r[g]?o+="#define USE_ATTRIBUTE_".concat(g.toUpperCase(),` 0.0; 

`):u.push("  ".concat(vy[g]," u_").concat(g,";")),o+=`
          #ifdef USE_ATTRIBUTE_`.concat(g.toUpperCase(),`
          layout(location = `).concat(kb[g],") in ").concat(vy[g]," a_").concat(g.charAt(0).toUpperCase()+g.slice(1),`;
        #endif

        `)});var c=u.length?`
layout(std140) uniform AttributeUniforms {
`.concat(u.join(`
`),`
};
    `):"";o+=c;var p="";return this.layer.enableShaderEncodeStyles.forEach(function(g){p+=`

    #ifdef USE_ATTRIBUTE_`.concat(g.toUpperCase(),`
      `).concat(vy[g]," ").concat(g,"  = a_").concat(g.charAt(0).toUpperCase()+g.slice(1),`;
    #else
      `).concat(vy[g]," ").concat(g," = u_").concat(g,`;
    #endif

    `)}),{"vs:#decl":o,"fs:#decl":c,"vs:#main-start":p}}},{key:"getStyleAttribute",value:function(){var r=this,o={};return this.layer.enableShaderEncodeStyles.forEach(function(u){if(!r.layer.encodeStyleAttribute[u]){var c=r.layer.getLayerConfig()[u],p=typeof c=="undefined"?jp[u]:c;u==="stroke"&&(p=no(p)),o["u_"+u]=p}}),o}},{key:"registerStyleAttribute",value:function(){var r=this;Object.keys(this.layer.encodeStyleAttribute).forEach(function(o){var u=X4(o);u&&(r.styleAttributeService.registerStyleAttribute(u),u.descriptor&&(u.descriptor.shaderLocation=kb[o]))})}},{key:"updateEncodeAttribute",value:function(r,o){this.encodeStyleAttribute[r]=o}}]),e}(),e1=ra(es.prototype,"configService",[Ad],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),es),Fb=100,$4=36,XP=40;function SC(e){return e/180*Math.acos(-1)}function EC(e){var a=SC(e[0])+Math.PI/2,r=SC(e[1]),o=Fb+Math.random()*.4,u=o*Math.cos(r)*Math.cos(a),c=o*Math.cos(r)*Math.sin(a),p=o*Math.sin(r);return[c,p,u]}function $P(e,a){var r=mat4.create(),o=mat4.create(),u=vec3.fromValues(0,1,0),c=vec3.fromValues(0,0,0);a=a||{},e=typeof e!="undefined"?e:1;for(var p=typeof a.segments!="undefined"?a.segments:32,g=2+p,y=2*g,S=[],O=[],D=[],V=[],H=[],ue=[],le=0;le<=g;le++){for(var we=le/g,Ne=we*Math.PI,dt=0;dt<=y;dt++){var mt=dt/y,Lt=mt*Math.PI*2;mat4.identity(o),mat4.rotateZ(o,o,-Ne),mat4.identity(r),mat4.rotateY(r,r,Lt),vec3.transformMat4(c,u,o),vec3.transformMat4(c,c,r),vec3.scale(c,c,-e),D.push(c.slice()),V.push.apply(V,_toConsumableArray(c.slice())),vec3.normalize(c,c),H.push.apply(H,_toConsumableArray(c.slice())),ue.push([mt,1-we]),V.push(mt,1-we)}if(le>0)for(var Wt=D.length,qt=Wt-2*(y+1);qt+y+2<Wt;qt++)S.push([qt,qt+1,qt+y+1]),O.push(qt,qt+1,qt+y+1),S.push([qt+y+1,qt+1,qt+y+2]),O.push(qt+y+1,qt+1,qt+y+2)}return{cells:S,positions:D,uvs:ue,positionsArr:V,indicesArr:O,normalArr:H}}var gy=$n.Ue(),vn=$n.Ue(),ml=$n.Ue(),Aa=$n.Ue(),yl=$n.Ue();function Km(e,a,r,o,u){$n.IH(e,r,o),$n.Fv(e,e),a=$n.al(-e[1],e[0]);var c=$n.al(-r[1],r[0]);return[u/$n.AK(a,c),a]}function ep(e,a){return $n.t8(e,-a[1],a[0])}function qm(e,a,r){return $n.lu(e,a,r),$n.Fv(e,e),e}function Dl(e,a){return e[0]===a[0]&&e[1]===a[1]}function wC(e){for(var a=new Map,r=0;r<e.length;r++){var o=e[0].toString()+"-"+e[1].toString();a.get(o)?(e.splice(r,1),r++):a.set(o,o)}return e}var YP=function(){function e(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,Rt.Z)(this,e),(0,Fe.Z)(this,"lastFlip",-1),(0,Fe.Z)(this,"miter",$n.al(0,0)),(0,Fe.Z)(this,"started",!1),(0,Fe.Z)(this,"dash",!1),(0,Fe.Z)(this,"totalDistance",0),(0,Fe.Z)(this,"currentIndex",0),this.join=a.join||"miter",this.cap=a.cap||"butt",this.miterLimit=a.miterLimit||10,this.thickness=a.thickness||1,this.dash=a.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return(0,at.Z)(e,[{key:"simpleExtrude",value:function(r){var o=this.complex;if(r.length<=1)return o;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var u=r.length,c=o.startIndex,p=1;p<u;p++){var g=r[p-1],y=r[p],S=p<r.length-1?r[p+1]:null,O=this.simpleSegment(o,c,g,y,S);c+=O}if(this.dash)for(var D=0;D<o.positions.length/6;D++)o.positions[D*6+5]=this.totalDistance;return o.startIndex=o.positions.length/6,o}},{key:"simpleExtrude_gaode2",value:function(r,o){var u=this.complex;if(r.length<=1)return u;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var c=r.length,p=u.startIndex,g=1;g<c;g++){var y,S,O,D=r[g-1];D.push((y=o[g-1][2])!==null&&y!==void 0?y:0);var V=o[g-1],H=r[g];H.push((S=o[g][2])!==null&&S!==void 0?S:0);var ue=o[g],le=g<r.length-1?[].concat((0,Sn.Z)(r[g+1]),[(O=o[g+1][2])!==null&&O!==void 0?O:0]):null,we=g<o.length-1?o[g+1]:null,Ne=this.simpleSegment(u,p,D,H,le,V,ue,we);p+=Ne}if(this.dash)for(var dt=0;dt<u.positions.length/6;dt++)u.positions[dt*6+5]=this.totalDistance;return u.startIndex=u.positions.length/6,u}},{key:"extrude_gaode2",value:function(r,o){var u=this.complex;if(r.length<=1)return u;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var c=r.length,p=u.startIndex,g=1;g<c;g++){var y,S,O,D=r[g-1];D.push((y=o[g-1][2])!==null&&y!==void 0?y:0);var V=o[g-1],H=r[g];H.push((S=o[g][2])!==null&&S!==void 0?S:0);var ue=o[g],le=g<r.length-1?[].concat((0,Sn.Z)(r[g+1]),[(O=o[g+1][2])!==null&&O!==void 0?O:0]):null,we=g<o.length-1?o[g+1]:null,Ne=this.segment_gaode2(u,p,D,H,le,V,ue,we);p+=Ne}if(this.dash)for(var dt=0;dt<u.positions.length/6;dt++)u.positions[dt*6+5]=this.totalDistance;return u.startIndex=u.positions.length/6,u}},{key:"extrude",value:function(r){var o=this.complex;if(r.length<=1)return o;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var u=r.length,c=o.startIndex,p=1;p<u;p++){var g=r[p-1],y=r[p],S=p<r.length-1?r[p+1]:null,O=this.segment(o,c,g,y,S);c+=O}if(this.dash)for(var D=0;D<o.positions.length/6;D++)o.positions[D*6+5]=this.totalDistance;return o.startIndex=o.positions.length/6,o}},{key:"simpleSegment",value:function(r,o,u,c,p){var g=0,y=r.indices,S=r.positions,O=r.normals,D=fu([c[0],c[1]]),V=fu([u[0],u[1]]);qm(ml,D,V);var H=0;if(this.dash&&(H=this.lineSegmentDistance(D,V),this.totalDistance+=H),this.normal||(this.normal=$n.Ue(),ep(this.normal,ml)),this.started||(this.started=!0,this.extrusions(S,O,u,this.normal,this.thickness,this.totalDistance-H)),y.push(o+0,o+1,o+2),!p)ep(this.normal,ml),this.extrusions(S,O,c,this.normal,this.thickness,this.totalDistance),y.push.apply(y,(0,Sn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),g+=2;else{var ue=fu([p[0],p[1]]);Dl(D,ue)&&$n.IH(ue,D,$n.Fv(ue,$n.$X(ue,D,V))),qm(Aa,ue,D);var le=Km(yl,$n.Ue(),ml,Aa,this.thickness),we=(0,Vi.Z)(le,2),Ne=we[0],dt=we[1],mt=$n.AK(yl,this.normal)<0?-1:1;this.extrusions(S,O,c,dt,Ne,this.totalDistance),y.push.apply(y,(0,Sn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),mt=-1,$n.JG(this.normal,dt),g+=2,this.lastFlip=mt}return g}},{key:"segment_gaode2",value:function(r,o,u,c,p,g,y,S){var O=0,D=r.indices,V=r.positions,H=r.normals,ue=this.cap==="square",le=this.join==="bevel",we=fu([y[0],y[1]]),Ne=fu([g[0],g[1]]);qm(ml,c,u);var dt=0;if(this.dash&&(dt=this.lineSegmentDistance(we,Ne),this.totalDistance+=dt),this.normal||(this.normal=$n.Ue(),ep(this.normal,ml)),!this.started)if(this.started=!0,ue){var mt=$n.Ue(),Lt=$n.Ue();$n.IH(mt,this.normal,ml),$n.IH(Lt,this.normal,ml),H.push(Lt[0],Lt[1],0),H.push(mt[0],mt[1],0),V.push(u[0],u[1],u[2]|0,this.totalDistance-dt,-this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),V.push(u[0],u[1],u[2]|0,this.totalDistance-dt,this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(V,H,u,this.normal,this.thickness,this.totalDistance-dt);if(D.push(o+0,o+1,o+2),p){Dl(c,p)&&$n.IH(p,c,$n.Fv(p,$n.$X(p,c,u))),qm(Aa,p,c);var ir=Km(yl,$n.Ue(),ml,Aa,this.thickness),Sr=(0,Vi.Z)(ir,2),Br=Sr[0],Jr=Sr[1],en=$n.AK(yl,this.normal)<0?-1:1,Kn=le;if(!Kn&&this.join==="miter"){var si=Br;si>this.miterLimit&&(Kn=!0)}Kn?(H.push(this.normal[0],this.normal[1],0),H.push(Jr[0],Jr[1],0),V.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*en,c[2]|0),this.complex.indexes.push(this.currentIndex),V.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness*en,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,D.push.apply(D,(0,Sn.Z)(this.lastFlip!==-en?[o,o+2,o+3]:[o+2,o+1,o+3])),D.push(o+2,o+3,o+4),ep(gy,Aa),$n.JG(this.normal,gy),H.push(this.normal[0],this.normal[1],0),V.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*en,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,O+=3):(this.extrusions(V,H,c,Jr,Br,this.totalDistance),D.push.apply(D,(0,Sn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),en=-1,$n.JG(this.normal,Jr),O+=2),this.lastFlip=en}else{if(ep(this.normal,ml),ue){var Wt=$n.Ue(),qt=$n.Ue();$n.lu(qt,ml,this.normal),$n.IH(Wt,ml,this.normal),H.push(qt[0],qt[1],0),H.push(Wt[0],Wt[1],0),V.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),V.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(V,H,c,this.normal,this.thickness,this.totalDistance);D.push.apply(D,(0,Sn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),O+=2}return O}},{key:"segment",value:function(r,o,u,c,p){var g=0,y=r.indices,S=r.positions,O=r.normals,D=this.cap==="square",V=this.join==="bevel",H=fu([c[0],c[1]]),ue=fu([u[0],u[1]]);qm(ml,H,ue);var le=0;if(this.dash&&(le=this.lineSegmentDistance(H,ue),this.totalDistance+=le),this.normal||(this.normal=$n.Ue(),ep(this.normal,ml)),!this.started)if(this.started=!0,D){var we=$n.Ue(),Ne=$n.Ue();$n.IH(we,this.normal,ml),$n.IH(Ne,this.normal,ml),O.push(Ne[0],Ne[1],0),O.push(we[0],we[1],0),S.push(u[0],u[1],u[2]|0,this.totalDistance-le,-this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),S.push(u[0],u[1],u[2]|0,this.totalDistance-le,this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(S,O,u,this.normal,this.thickness,this.totalDistance-le);if(y.push(o+0,o+1,o+2),p){var Lt=fu([p[0],p[1]]);Dl(H,Lt)&&$n.IH(Lt,H,$n.Fv(Lt,$n.$X(Lt,H,ue))),qm(Aa,Lt,H);var Wt=Km(yl,$n.Ue(),ml,Aa,this.thickness),qt=(0,Vi.Z)(Wt,2),ir=qt[0],Sr=qt[1],Br=$n.AK(yl,this.normal)<0?-1:1,Jr=V;if(!Jr&&this.join==="miter"){var en=ir;en>this.miterLimit&&(Jr=!0)}Jr?(O.push(this.normal[0],this.normal[1],0),O.push(Sr[0],Sr[1],0),S.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*Br,c[2]|0),this.complex.indexes.push(this.currentIndex),S.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness*Br,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,y.push.apply(y,(0,Sn.Z)(this.lastFlip!==-Br?[o,o+2,o+3]:[o+2,o+1,o+3])),y.push(o+2,o+3,o+4),ep(gy,Aa),$n.JG(this.normal,gy),O.push(this.normal[0],this.normal[1],0),S.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*Br,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,g+=3):(this.extrusions(S,O,c,Sr,ir,this.totalDistance),y.push.apply(y,(0,Sn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),Br=-1,$n.JG(this.normal,Sr),g+=2),this.lastFlip=Br}else{if(ep(this.normal,ml),D){var dt=$n.Ue(),mt=$n.Ue();$n.lu(mt,ml,this.normal),$n.IH(dt,ml,this.normal),O.push(mt[0],mt[1],0),O.push(dt[0],dt[1],0),S.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),S.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(S,O,c,this.normal,this.thickness,this.totalDistance);y.push.apply(y,(0,Sn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),g+=2}return g}},{key:"extrusions",value:function(r,o,u,c,p,g){o.push(c[0],c[1],0),o.push(c[0],c[1],0),r.push(u[0],u[1],u[2]|0,g,-p,u[2]|0),this.complex.indexes.push(this.currentIndex),r.push(u[0],u[1],u[2]|0,g,p,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(r,o){var u=o[0]-r[0],c=o[1]-r[1];return Math.sqrt(u*u+c*c)}}]),e}(),ao=F(77160);function Qm(e){var a=e[0][0],r=e[0][e[0].length-1];a[0]===r[0]&&a[1]===r[1]&&(e[0]=e[0].slice(0,e[0].length-1));for(var o=e[0].length,u=earcut.flatten(e),c=u.vertices,p=u.dimensions,g=[],y=[],S=0;S<c.length/p;S++)p===2?g.push(c[S*2],c[S*2+1],1):g.push(c[S*3],c[S*3+1],1);var O=earcut(u.vertices,u.holes,u.dimensions);y.push.apply(y,_toConsumableArray(O));for(var D=function(){var ue=u.vertices.slice(V*p,(V+1)*p),le=u.vertices.slice((V+1)*p,(V+2)*p);le.length===0&&(le=u.vertices.slice(0,p));var we=g.length/3;g.push(ue[0],ue[1],1,le[0],le[1],1,ue[0],ue[1],0,le[0],le[1],0),y.push.apply(y,_toConsumableArray([0,2,1,2,3,1].map(function(Ne){return Ne+we})))},V=0;V<o;V++)D();return{positions:g,index:y}}function Y4(e){var a=earcut.flatten(e),r=earcut(a.vertices,a.holes,a.dimensions);return{positions:a.vertices,index:r}}function ov(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=e[0][0],o=e[0][e[0].length-1];r[0]===o[0]&&r[1]===o[1]&&(e[0]=e[0].slice(0,e[0].length-1));for(var u=e[0].length,c=Ic().flatten(e),p=c.vertices,g=c.dimensions,y=[],S=[],O=[],D=0;D<p.length/g;D++)y.push(p[D*g],p[D*g+1],1,-1,-1),O.push(0,0,1);var V=Ic()(c.vertices,c.holes,c.dimensions);S.push.apply(S,(0,Sn.Z)(V));for(var H=function(){var we=c.vertices.slice(ue*g,(ue+1)*g),Ne=c.vertices.slice((ue+1)*g,(ue+2)*g);Ne.length===0&&(Ne=c.vertices.slice(0,g));var dt=y.length/5;y.push(we[0],we[1],1,0,0,Ne[0],Ne[1],1,.1,0,we[0],we[1],0,0,.8,Ne[0],Ne[1],0,.1,.8);var mt=t1([Ne[0],Ne[1],1],[we[0],we[1],0],[we[0],we[1],1],a);O.push.apply(O,(0,Sn.Z)(mt).concat((0,Sn.Z)(mt),(0,Sn.Z)(mt),(0,Sn.Z)(mt))),S.push.apply(S,(0,Sn.Z)([1,2,0,3,2,1].map(function(Lt){return Lt+dt})))},ue=0;ue<u;ue++)H();return{positions:y,index:S,normals:O}}function t1(e,a,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=ao.create(),c=ao.create(),p=ao.create();o&&(e=ju(e),a=ju(a),r=ju(r));var g=ao.fromValues.apply(ao,(0,Sn.Z)(e)),y=ao.fromValues.apply(ao,(0,Sn.Z)(a)),S=ao.fromValues.apply(ao,(0,Sn.Z)(r));ao.sub(u,S,y),ao.sub(c,g,y),ao.cross(p,u,c);var O=ao.create();return ao.normalize(O,p),O}var $f,yy=function(e){return e.CYLINDER="cylinder",e.SQUARECOLUMN="squareColumn",e.TRIANGLECOLUMN="triangleColumn",e.HEXAGONCOLUMN="hexagonColumn",e.PENTAGONCOLUMN="pentagonColumn",e}({}),_y=function(e){return e.CIRCLE="circle",e.SQUARE="square",e.TRIANGLE="triangle",e.HEXAGON="hexagon",e.PENTAGON="pentagon",e}({});function xy(e){for(var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=Math.PI*2/e,o=[],u=0;u<e;u++)o.push(r*u+a*Math.PI/12);var c=o.map(function(p){var g=Math.sin(p+Math.PI/4),y=Math.cos(p+Math.PI/4);return[g,y,0]});return c}function Db(){return xy(30)}function Lb(){return xy(4)}function Bb(){return xy(3)}function Nb(){return xy(6,1)}function by(){return xy(5)}var zb=($f={},(0,Fe.Z)($f,_y.CIRCLE,Db),(0,Fe.Z)($f,_y.HEXAGON,Nb),(0,Fe.Z)($f,_y.TRIANGLE,Bb),(0,Fe.Z)($f,_y.SQUARE,Lb),(0,Fe.Z)($f,_y.PENTAGON,by),(0,Fe.Z)($f,yy.CYLINDER,Db),(0,Fe.Z)($f,yy.HEXAGONCOLUMN,Nb),(0,Fe.Z)($f,yy.TRIANGLECOLUMN,Bb),(0,Fe.Z)($f,yy.SQUARECOLUMN,Lb),(0,Fe.Z)($f,yy.PENTAGONCOLUMN,by),$f),Sy={};function ho(e){var a=tu(e.coordinates);return{vertices:[].concat((0,Sn.Z)(a),(0,Sn.Z)(a),(0,Sn.Z)(a),(0,Sn.Z)(a)),indices:[0,1,2,2,3,0],size:a.length}}function Jm(e){var a=tu(e.coordinates),r=EC(a);return{vertices:[].concat((0,Sn.Z)(r),(0,Sn.Z)(r),(0,Sn.Z)(r),(0,Sn.Z)(r)),indices:[0,1,2,2,3,0],size:r.length}}function Ub(e){var a=e.shape,r=Eh(a,!1),o=r.positions,u=r.index,c=r.normals;return{vertices:o,indices:u,normals:c,size:5}}function Ey(e){var a=tu(e.coordinates);return{vertices:(0,Sn.Z)(a),indices:[0],size:a.length}}function e0(e){var a=e.coordinates,r=e.originCoordinates,o=e.version,u=new YP({dash:!0,join:"bevel"});if(o==="GAODE2.x"){var c=a;Array.isArray(c[0][0])||(c=[a]);var p=r;Array.isArray(p[0][0])||(p=[r]);for(var g=0;g<c.length;g++){var y=c[g],S=p[g];u.extrude_gaode2(y,S)}}else{var O=a;O[0]&&!Array.isArray(O[0][0])&&(O=[a]),O.forEach(function(V){u.extrude(V)})}var D=u.complex;return{vertices:D.positions,indices:D.indices,normals:D.normals,indexes:D.indexes,size:6}}function CC(e){var a=e.coordinates.flat(),r=1,o=1;return{vertices:[1,0,0].concat(_toConsumableArray(a),[1,2,-3],_toConsumableArray(a),[1,1,-3],_toConsumableArray(a),[0,1,0],_toConsumableArray(a),[0,0,0],_toConsumableArray(a),[1,0,0],_toConsumableArray(a),[1,2,-3],_toConsumableArray(a),[1,1,-3],_toConsumableArray(a),[0,1,0],_toConsumableArray(a),[0,0,0],_toConsumableArray(a)),normals:[-r,2*o,1,2*o,-o,1,o,-o,1,o,-o,1,-r,-o,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function Zb(e){var a=e.coordinates,r=[];if(!Array.isArray(a[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};var o=qP(a),u=o.results,c=o.totalDistance;return u.map(function(p){r.push(p[0],p[1],p[2],p[3],0,c)}),{vertices:r,indices:[],normals:[],size:6,count:u.length}}function KP(e){var a=e.coordinates,r=[];if(!Array.isArray(a[0]))return{vertices:[],indices:[],size:4,count:0};var o=QP(a),u=o.results;return u.map(function(c){r.push(c[0],c[1],c[2],c[3])}),{vertices:r,indices:[],size:4,count:u.length}}function Vb(e,a){var r=a[0]-e[0],o=a[1]-e[1];return Math.sqrt(r*r+o*o)}function Wv(e,a){return e.length<3&&e.push(0),a!==void 0&&e.push(a),e}function qP(e){var a=e;Array.isArray(a)&&Array.isArray(a[0])&&Array.isArray(a[0][0])&&(a=e.flat());var r=0;if(a.length<2)return{results:a,totalDistance:0};var o=[],u=Wv(a[0],r);o.push(u);for(var c=1;c<a.length-1;c++){var p=Vb(a[c-1],a[c]);r+=p;var g=Wv(a[c],r);o.push(g),o.push(g)}var y=Vb(a[a.length-2],a[a.length-1]);return r+=y,o.push(Wv(a[a.length-1],r)),{results:o,totalDistance:r}}function QP(e){if(e.length<2)return{results:e};var a=[],r=Wv(e[0]);a.push(r);for(var o=1;o<e.length-1;o++){var u=Wv(e[o]);a.push(u),a.push(u)}return a.push(Wv(e[e.length-1])),{results:a}}function Hb(e){var a=e.coordinates,r=Ic().flatten(a),o=r.vertices,u=r.dimensions,c=r.holes;return{indices:Ic()(o,c,u),vertices:o,size:u}}function JP(e){var a=e.coordinates,r=Ic().flatten(a),o=r.vertices,u=r.dimensions,c=r.holes;return{indices:Ic()(o,c,u),vertices:eO(o),size:u+4}}function eO(e){for(var a=[],r=$a(e),o=r.center,u=r.radius,c=0;c<e.length;c+=2){var p=e[c],g=e[c+1];a.push.apply(a,[p,g,0].concat((0,Sn.Z)(o),[u]))}return a}function AC(e){var a=e.coordinates,r=ov(a,!0),o=r.positions,u=r.index,c=r.normals;return{vertices:o,indices:u,normals:c,size:5}}function K4(e){var a=e.shape,r=ls(a),o=r.positions,u=r.index;return{vertices:o,indices:u,size:3}}function r1(e){var a=e.coordinates,r=[].concat((0,Sn.Z)(a[0]),[0,0,1,a[1][0],a[0][1],0,1,1],(0,Sn.Z)(a[1]),[0,1,0],(0,Sn.Z)(a[0]),[0,0,1],(0,Sn.Z)(a[1]),[0,1,0,a[0][0],a[1][1],0,0,0]),o=[0,1,2,3,4,5];return{vertices:r,indices:o,size:5}}function n1(e,a){for(var r=a.segmentNumber,o=r===void 0?30:r,u=e.coordinates,c=[],p=[],g=function(O){c.push(O,1,O,u[0][0],u[0][1],u[1][0],u[1][1],O,-1,O,u[0][0],u[0][1],u[1][0],u[1][1]),O!==o-1&&p.push.apply(p,(0,Sn.Z)([0,1,2,1,3,2].map(function(D){return O*2+D})))},y=0;y<o;y++)g(y);return{vertices:c,indices:p,size:7}}function q4(e){var a=e.coordinates;a.length===2&&a.push(0);var r=Lo(-1,1),o=Lo(1,1),u=Lo(-1,-1),c=Lo(1,-1),p=[].concat(_toConsumableArray(a),_toConsumableArray(r),_toConsumableArray(a),_toConsumableArray(u),_toConsumableArray(a),_toConsumableArray(c),_toConsumableArray(a),_toConsumableArray(o)),g=[0,1,2,3,0,2];return{vertices:p,indices:g,size:5}}function Eh(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Sy&&Sy[e])return Sy[e];var r=zb[e]?zb[e]():zb.cylinder(),o=ov([r],a);return Sy[e]=o,o}function t0(e,a){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=new Float32Array(e.length/r*3),c,p,g,y=vec3.create(),S=vec3.create(),O=vec3.create(),D=0,V=a.length;D<V;D+=3){c=a[D+0]*3,p=a[D+1]*3,g=a[D+2]*3;var H=[e[c],e[c+1]],ue=[e[p],e[p+1]],le=[e[g],e[g+1]];o&&(H=lngLatToMeters(H),ue=lngLatToMeters(ue),le=lngLatToMeters(le));var we=H,Ne=_slicedToArray(we,2),dt=Ne[0],mt=Ne[1],Lt=vec3.fromValues(dt,mt,e[c+2]),Wt=ue,qt=_slicedToArray(Wt,2),ir=qt[0],Sr=qt[1],Br=vec3.fromValues(ir,Sr,e[p+2]),Jr=le,en=_slicedToArray(Jr,2),Kn=en[0],si=en[1],Pi=vec3.fromValues(Kn,si,e[g+2]);vec3.sub(y,Pi,Br),vec3.sub(S,Lt,Br),vec3.cross(O,y,S),u[c]+=y[0],u[c+1]+=y[1],u[c+2]+=y[2],u[p]+=y[0],u[p+1]+=y[1],u[p+2]+=y[2],u[g]+=y[0],u[g+1]+=y[1],u[g+2]+=y[2]}return Ll(u),u}function Ll(e){for(var a=0,r=e.length;a<r;a+=3){var o=vec3.fromValues(e[a],e[a+1],e[a+2]),u=vec3.create();vec3.normalize(u,o),e.set(u,a)}}function _u(e){var a=e[0][0],r=e[0][e[0].length-1];return a[0]===r[0]&&a[1]===r[1]}function ls(e){var a=["cylinder","triangleColumn","hexagonColumn","squareColumn"],r=geometryShape[e]?geometryShape[e]():geometryShape.circle(),o=a.indexOf(e)===-1?fillPolygon([r]):extrudePolygon([r]);return o}function Lo(e,a){var r=(e+1)/2,o=(a+1)/2;return[r,o]}function Bg(){var e=primitiveSphere(EARTH_RADIUS,{segments:EARTH_SEGMENTS}),a=e.positionsArr,r=e.indicesArr,o=e.normalArr;return{vertices:a,indices:r,size:5,normals:o}}function i1(){var e=primitiveSphere(EARTH_RADIUS+EARTH_RADIUS_OUTER,{segments:EARTH_SEGMENTS}),a=e.positionsArr,r=e.indicesArr,o=e.normalArr;return{vertices:a,indices:r,size:5,normals:o}}function jb(e){var a=Uu();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function Uu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var xu=`varying vec4 v_dash_array;
varying vec4 v_color;
varying float v_distance_ratio;

uniform float segmentNumber;


#pragma include "picking"

void main() {
  gl_FragColor = v_color;

  float flag = 0.;
  float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
  if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
    flag = 1.;
  };
  gl_FragColor.a *=flag;
  
  gl_FragColor = filterColor(gl_FragColor);
}`,Ng=`
attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;

uniform float segmentNumber;
varying vec4 v_color;


uniform vec4 u_dash_array: [10.0, 5., 0, 0];
uniform float u_lineDir: 1.0;
varying vec4 v_dash_array;
varying float v_distance_ratio;
#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
  // dash: index / (segmentNumber - 1.);
  // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
  return index / (segmentNumber - 1.);
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);

  vec2 s = source;
  vec2 t = target;
  
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    s = unProjCustomCoord(source);
    t = unProjCustomCoord(target);
  }
  float total_Distance = pixelDistance(s, t) / 2.0 * PI;
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;

  v_distance_ratio = segmentIndex / segmentNumber;

  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, thetaOffset), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, thetaOffset), 0.0, 1.0));
 
  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));

  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + offset, 0, 1.0));

  gl_PointSize = 5.0;
  setPickingColor(a_PickingColor);
}
`,TC=`
#define Animate 0.0
#define LineTexture 1.0
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;

uniform float segmentNumber;
varying vec2 v_iconMapUV;
varying vec4 v_lineData;


#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  gl_FragColor = v_color;
  

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_lineData.b, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;
  }

  // \u5F53\u5B58\u5728\u8D34\u56FE\u65F6\u5728\u5E95\u8272\u4E0A\u8D34\u4E0A\u8D34\u56FE
  if(u_line_texture == LineTexture) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (v_lineData.r / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);

    float count = v_lineData.g; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);
    float v = v_lineData.a; // \u6A2A\u5411 v
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture2D(u_texture, uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = filterColor(pattern);
    }
    
  } else {
     gl_FragColor = filterColor(gl_FragColor);
  }
}`,MC=`#define Animate 0.0
#define LineTexture 1.0

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;

uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
varying vec4 v_color;

uniform float u_lineDir: 1.0;

uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;
varying vec4 v_lineData;
varying vec2 v_distance_ratio;


#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
    // dash: index / (segmentNumber - 1.);
    // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    //  return index / (segmentNumber - 1.);
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;
  v_color.a = v_color.a * opacity;

  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;
  
  if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        d_distance_ratio = 1.0 - d_distance_ratio;
      }
  }

 v_lineData.b = d_distance_ratio;

  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, thetaOffset), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, thetaOffset), 0.0, 1.0));

  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));


  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
 v_lineData.r = d_segmentIndex;

  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F

    float arcDistrance = length(source - target); // \u8D77\u59CB\u70B9\u548C\u7EC8\u70B9\u7684\u8DDD\u79BB
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      arcDistrance *= 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      // arcDistrance *= 8.0;
      arcDistrance = project_pixel_allmap(arcDistrance);
    }
    v_iconMapUV = a_iconMapUV;

    float pixelLen = project_pixel_texture(u_icon_step); // \u8D34\u56FE\u6CBF\u5F27\u7EBF\u65B9\u5411\u7684\u957F\u5EA6 - \u968F\u5730\u56FE\u7F29\u653E\u6539\u53D8
    float texCount = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    v_lineData.g = texCount;

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB
    v_lineData.a = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + offset, 0, 1.0));

  setPickingColor(a_PickingColor);
}
`,Q4=`varying vec4 v_color;

#pragma include "picking"

void main() {
// \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E

  gl_FragColor = v_color;
  gl_FragColor = filterColor(gl_FragColor);
}`,a1=`
attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;

uniform float segmentNumber;
varying vec4 v_color;
varying float v_segmentIndex;

uniform float u_lineDir: 1.0;

uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;




#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;

  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;
  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, thetaOffset), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, thetaOffset), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  //unProjCustomCoord
  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));


  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E

  v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  v_color.a *= opacity;

  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + offset, 0, 1.0));

  setPickingColor(a_PickingColor);
}
`,RC={solid:0,dash:1},Wb=wa.isNumber,tO=function(e){(0,mr.Z)(r,e);var a=jb(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas()}),o.layer.render();return}o.texture=g({data:o.iconService.getCanvas(),mag:gt.NEAREST,min:gt.NEAREST,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128})}),o}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=c===void 0?1:c,g=u.sourceColor,y=u.targetColor,S=u.textureBlend,O=S===void 0?"normal":S,D=u.lineType,V=D===void 0?"solid":D,H=u.dashArray,ue=H===void 0?[10,5]:H,le=u.forward,we=le===void 0?!0:le,Ne=u.lineTexture,dt=Ne===void 0?!1:Ne,mt=u.iconStep,Lt=mt===void 0?100:mt,Wt=u.segmentNumber,qt=Wt===void 0?30:Wt;ue.length===2&&ue.push(0,0);var ir=0,Sr=[0,0,0,0],Br=[0,0,0,0];return g&&y&&(Sr=no(g),Br=no(y),ir=1),this.rendererService.getDirty()&&this.texture.bind(),(0,te.Z)({u_textureBlend:O==="normal"?0:1,segmentNumber:qt,u_line_type:RC[V||"solid"],u_dash_array:ue,u_blur:.9,u_lineDir:we?1:-1,u_texture:this.texture,u_line_texture:dt?1:0,u_icon_step:Lt,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:ir,u_sourceColor:Sr,u_targetColor:Br},this.getStyleAttribute())}},{key:"getAnimateUniforms",value:function(){var u=this.layer.getLayerConfig(),c=u.animateOption;return{u_animate:this.animateOption2Array(c),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.lineType;return g==="dash"?{frag:xu,vert:Ng,type:"Dash"}:c&&p?{frag:Q4,vert:a1,type:"Linear"}:{frag:TC,vert:MC,type:""}}},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S,O,D,V,H;return $t().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return p=this.layer.getLayerConfig(),g=p.segmentNumber,y=g===void 0?30:g,S=this.getShaders(),O=S.frag,D=S.vert,V=S.type,le.next=4,this.layer.buildLayerModel({moduleName:"lineArc2d"+V,vertexShader:D,fragmentShader:O,inject:this.getInject(),triangulation:n1,depth:{enable:!1},styleOption:{segmentNumber:y}});case 4:return H=le.sent,le.abrupt("return",[H]);case 6:case"end":return le.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Gi.Attribute,descriptor:{name:"a_Size",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?1:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Gi.Attribute,descriptor:{name:"a_Instance",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:4,update:function(p,g,y){return[y[3],y[4],y[5],y[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Gi.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.texture,S=g[y]||{x:0,y:0},O=S.x,D=S.y;return[O,D]}}})}}]),r}(us);function rO(e){var a=tp();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function tp(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var o1=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying vec4 v_color;
varying vec4 v_line_data;

uniform float u_line_texture: 0.0;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
varying float v_segmentIndex;
uniform float segmentNumber;


varying vec2 v_iconMapUV;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];


#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_line_data.g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = v_color;

  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = v_line_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          gl_FragColor = filterColor(pattern);
        }
    }

  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,r0=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;

uniform float u_globel;
uniform float u_globel_radius;
uniform float u_global_height: 10;
uniform mat4 u_ModelMatrix;

uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
varying vec4 v_color;

uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
varying float v_segmentIndex;

attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;
varying vec4 v_line_data;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {

  v_color = a_Color;
  v_color.a = v_color.a * opacity;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  v_line_data.g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    v_line_data.b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }


  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + project_pixel(offset), curr.z * thetaOffset, 1.0));

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,Yf=`
#define Animate 0.0
uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
varying vec4 v_Color;

varying float v_distance_ratio;
#pragma include "picking"

void main() {

  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  gl_FragColor = v_Color;

  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,s1=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;
attribute vec2 a_iconMapUV;

uniform float u_globel;
uniform float u_globel_radius;
uniform float u_global_height: 10;
uniform mat4 u_ModelMatrix;

uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
varying float v_distance_ratio;

varying vec4 v_dash_array;
varying vec4 v_color;
varying vec2 v_iconMapUV;
varying vec4 v_Color;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }


  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);

  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  v_Color = mix(u_sourceColor, u_targetColor, a_Position.x/segmentNumber);

  v_Color.a *= opacity;

  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,IC={solid:0,dash:1},nO=function(e){(0,mr.Z)(r,e);var a=rO(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas()}),o.layer.render();return}o.texture=g({data:o.iconService.getCanvas(),mag:gt.NEAREST,min:gt.NEAREST,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128})}),o}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.textureBlend,y=g===void 0?"normal":g,S=u.lineType,O=S===void 0?"solid":S,D=u.dashArray,V=D===void 0?[10,5]:D,H=u.lineTexture,ue=H===void 0?!1:H,le=u.iconStep,we=le===void 0?100:le,Ne=u.segmentNumber,dt=Ne===void 0?30:Ne,mt=u.globalArcHeight,Lt=mt===void 0?10:mt;V.length===2&&V.push(0,0);var Wt=0,qt=[0,0,0,0],ir=[0,0,0,0];return c&&p&&(qt=no(c),ir=no(p),Wt=1),this.rendererService.getDirty()&&this.texture.bind(),(0,te.Z)({u_globel:this.mapService.version==="GLOBEL"?1:0,u_globel_radius:Fb,u_global_height:Lt,u_textureBlend:y==="normal"?0:1,segmentNumber:dt,u_line_type:IC[O]||0,u_dash_array:V,u_texture:this.texture,u_line_texture:ue?1:0,u_icon_step:we,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:Wt,u_sourceColor:qt,u_targetColor:ir},this.getStyleAttribute())}},{key:"getAnimateUniforms",value:function(){var u=this.layer.getLayerConfig(),c=u.animateOption;return{u_animate:this.animateOption2Array(c),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor;return c&&p?{frag:Yf,vert:s1,type:"Linear"}:{frag:o1,vert:r0,type:""}}},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S,O,D,V,H;return $t().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return p=this.layer.getLayerConfig(),g=p.segmentNumber,y=g===void 0?30:g,S=this.getShaders(),O=S.frag,D=S.vert,V=S.type,le.next=4,this.layer.buildLayerModel({moduleName:"lineArc3d"+V,vertexShader:D,fragmentShader:O,inject:this.getInject(),triangulation:n1,styleOption:{segmentNumber:y}});case 4:return H=le.sent,le.abrupt("return",[H]);case 6:case"end":return le.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Gi.Attribute,descriptor:{name:"a_Size",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?1:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Gi.Attribute,descriptor:{name:"a_Instance",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:4,update:function(p,g,y){return[y[3],y[4],y[5],y[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Gi.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.texture,S=g[y]||{x:0,y:0},O=S.x,D=S.y;return[O,D]}}})}}]),r}(us);function Uc(e){var a=n0();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function n0(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var wh=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying vec4 v_color;
varying vec4 v_line_data;

uniform float u_line_texture: 0.0;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
varying float v_segmentIndex;
uniform float segmentNumber;


varying vec2 v_iconMapUV;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];


#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_line_data.g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = v_color;

  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = v_line_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          gl_FragColor = filterColor(pattern);
        }
    }

  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,u1=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;

uniform float u_globel;
uniform float u_globel_radius;
uniform float u_global_height: 10;
uniform mat4 u_ModelMatrix;

uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
varying vec4 v_color;

uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
varying float v_segmentIndex;

attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;
varying vec4 v_line_data;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {

  v_color = a_Color;
  v_color.a = v_color.a * opacity;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  v_line_data.g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    v_line_data.b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }


  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + project_pixel(offset), curr.z * thetaOffset, 1.0));

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,Gb=`
#define Animate 0.0
uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
varying vec4 v_Color;

varying float v_distance_ratio;
#pragma include "picking"

void main() {

  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  gl_FragColor = v_Color;

  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,iO=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;
attribute vec2 a_iconMapUV;

uniform float u_globel;
uniform float u_globel_radius;
uniform float u_global_height: 10;
uniform mat4 u_ModelMatrix;

uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
varying float v_distance_ratio;

varying vec4 v_dash_array;
varying vec4 v_color;
varying vec2 v_iconMapUV;
varying vec4 v_Color;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }


  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);

  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  v_Color = mix(u_sourceColor, u_targetColor, a_Position.x/segmentNumber);

  v_Color.a *= opacity;

  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,aO={solid:0,dash:1},PC=function(e){(0,mr.Z)(r,e);var a=Uc(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas()}),o.layer.render();return}o.texture=g({data:o.iconService.getCanvas(),mag:gt.NEAREST,min:gt.NEAREST,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128})}),o}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=c===void 0?1:c,g=u.sourceColor,y=u.targetColor,S=u.textureBlend,O=S===void 0?"normal":S,D=u.lineType,V=D===void 0?"solid":D,H=u.dashArray,ue=H===void 0?[10,5]:H,le=u.lineTexture,we=le===void 0?!1:le,Ne=u.iconStep,dt=Ne===void 0?100:Ne,mt=u.segmentNumber,Lt=mt===void 0?30:mt,Wt=u.globalArcHeight,qt=Wt===void 0?10:Wt;ue.length===2&&ue.push(0,0);var ir=0,Sr=[0,0,0,0],Br=[0,0,0,0];return g&&y&&(Sr=no(g),Br=no(y),ir=1),this.rendererService.getDirty()&&this.texture.bind(),{u_globel:1,u_globel_radius:Fb,u_global_height:qt,u_opacity:p,u_textureBlend:O==="normal"?0:1,segmentNumber:Lt,u_line_type:aO[V]||0,u_dash_array:ue,u_texture:this.texture,u_line_texture:we?1:0,u_icon_step:dt,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:ir,u_sourceColor:Sr,u_targetColor:Br}}},{key:"getAnimateUniforms",value:function(){var u=this.layer.getLayerConfig(),c=u.animateOption;return{u_animate:this.animateOption2Array(c),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor;return c&&p?{frag:Gb,vert:iO,type:"Linear"}:{frag:wh,vert:u1,type:""}}},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S,O,D,V,H;return $t().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return p=this.layer.getLayerConfig(),g=p.segmentNumber,y=g===void 0?30:g,S=this.getShaders(),O=S.frag,D=S.vert,V=S.type,le.next=4,this.layer.buildLayerModel({moduleName:"lineEarthArc3d"+V,vertexShader:D,fragmentShader:O,triangulation:n1,depth:{enable:!0},styleOption:{segmentNumber:y}});case 4:return H=le.sent,le.abrupt("return",[H]);case 6:case"end":return le.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Gi.Attribute,descriptor:{name:"a_Size",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?1:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Gi.Attribute,descriptor:{name:"a_Instance",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:4,update:function(p,g,y){return[y[3],y[4],y[5],y[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Gi.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.texture,S=g[y]||{x:0,y:0},O=S.x,D=S.y;return[O,D]}}})}}]),r}(us),Xb={circle:2,triangle:2,diamond:4,rect:2,classic:3,halfTriangle:2,none:0},Ta=1/2;function OC(e,a){var r=a.width,o=r===void 0?2:r,u=a.height,c=u===void 0?1:u;return{vertices:[0,Ta*e,1*e*o,-(c+Ta)*e,1*e*o,(c-Ta)*e,0,Ta*e,1*e*o,-(c+Ta)*e,1*e*o,(c-Ta)*e],indices:[3,4,5],outLineIndices:[0,1,2],normals:[1*e,-2*e,1,-2*e,1.5*e,1,1*e,1.5*e,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function oO(e,a){var r=a.width,o=r===void 0?2:r,u=a.height,c=u===void 0?3:u;return{vertices:[0,0,1*e*o,1*c,1*e*o,-1*c,0,0,1*e*o,1*c,1*e*o,-1*c],outLineIndices:[0,1,2],indices:[3,4,5],normals:[0,-1.5*e,1,2,1*e,1,-2,1*e,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function wy(e,a){var r=a.width,o=r===void 0?2:r,u=a.height,c=u===void 0?2:u;return{vertices:[0,c/2,e*o*1,c/2,e*o*1,-c/2,0,-c/2,0,c/2,e*o*1,c/2,e*o*1,-c/2,0,-c/2],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-e,1,1,0,1,0,-e,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function sO(e,a){var r=a.width,o=r===void 0?2:r,u=a.height,c=u===void 0?3:u;return{vertices:[0,0,1*o*e,.5*c,2*o*e,0,1*o*e,-.5*c,0,0,1*o*e,.5*c,2*o*e,0,1*o*e,-.5*c],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-e,1,1,0,1,0,-e,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function l1(e,a){var r=a.width,o=r===void 0?2:r,u=a.height,c=u===void 0?3:u;return{vertices:[0,0,2*e*o,1*c,1.5*e*o,0,2*e*o,-1*c,0,0,2*e*o,1*c,1.5*e*o,0,2*e*o,-1*c],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-e,1,1,0,1,0,-e,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function uO(e,a){var r=a.width,o=r===void 0?2:r,u=a.height,c=u===void 0?2:u,p=Db(),g=Ic().flatten([p]),y=Ic()(g.vertices,g.holes,g.dimensions),S=p.map(function(O){return[O[0]*o*e,O[1]*c]}).flat();return{vertices:[].concat((0,Sn.Z)(S),(0,Sn.Z)(S)),dimensions:2,indices:y.map(function(O){return O+p.length}),outLineIndices:y,normals:[].concat((0,Sn.Z)(p.map(function(O){return[O[1]*c,O[0]*o*e,1]}).flat()),(0,Sn.Z)(new Array(p.length*3).fill(0)))}}function kC(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,o=(0,_f.Z)(r.source)==="object"?r.source.type:r.source,u=(0,_f.Z)(r.target)==="object"?r.target.type:r.target,c=(0,_f.Z)(r.source)==="object"?r.source:{},p=c.width,g=p===void 0?o?Xb[o]:0:p,y=c.height,S=y===void 0?2:y,O=(0,_f.Z)(r.target)==="object"?r.target:{},D=O.width,V=D===void 0?u?Xb[u]:0:D,H=O.height,ue=H===void 0?2:H;return{vertices:[0,Ta,1*g].concat((0,Sn.Z)(e),[1,Ta,-1*V],(0,Sn.Z)(e),[1,-Ta,-1*V],(0,Sn.Z)(e),[0,-Ta,1*g],(0,Sn.Z)(e),[0,Ta,1*g],(0,Sn.Z)(e),[1,Ta,-1*V],(0,Sn.Z)(e),[1,-Ta,-1*V],(0,Sn.Z)(e),[0,-Ta,1*g],(0,Sn.Z)(e)),outLineIndices:[0,1,2,0,2,3].map(function(le){return le+a}),indices:[4,5,6,4,6,7].map(function(le){return le+a}),normals:[1,-1,1,1,1,1,-1,0,1,-1,0,1,0,0,0,0,0,0,0,0,0,0,0,0],dimensions:2}}function $b(e,a){var r=(0,_f.Z)(e)==="object"?e.type:e,o=a==="source"?1:-1,u=(0,_f.Z)(e)==="object"?e:{};switch(r){case"circle":return uO(o,u);case"triangle":return oO(o,u);case"diamond":return sO(o,u);case"rect":return wy(o,u);case"classic":return l1(o,u);case"halfTriangle":return OC(o,u);default:return{vertices:[],indices:[],normals:[],dimensions:2,outLineIndices:[],outLineNormals:[]}}}function lO(e){var a=e.coordinates.flat(),r=1,o=1;return{vertices:[1,0,0].concat((0,Sn.Z)(a),[1,2,-3],(0,Sn.Z)(a),[1,1,-3],(0,Sn.Z)(a),[0,1,0],(0,Sn.Z)(a),[0,0,0],(0,Sn.Z)(a),[1,0,0],(0,Sn.Z)(a),[1,2,-3],(0,Sn.Z)(a),[1,1,-3],(0,Sn.Z)(a),[0,1,0],(0,Sn.Z)(a),[0,0,0],(0,Sn.Z)(a)),normals:[-r,2*o,1,2*o,-o,1,o,-o,1,o,-o,1,-r,-o,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function cO(e,a){return a?FC(e,a):lO(e)}function FC(e,a){var r=e.coordinates.flat(),o=a,u=o.target,c=u===void 0?"classic":u,p=o.source,g=p===void 0?"circle":p,y=DC($b(g,"source"),r,0,0),S=kC(r,y.vertices.length/7,a),O=DC($b(c,"target"),r,1,y.vertices.length/7+S.vertices.length/7),D={vertices:[].concat((0,Sn.Z)(y.vertices),(0,Sn.Z)(S.vertices),(0,Sn.Z)(O.vertices)),indices:[].concat((0,Sn.Z)(y.outLineIndices),(0,Sn.Z)(S.outLineIndices),(0,Sn.Z)(O.outLineIndices),(0,Sn.Z)(y.indices),(0,Sn.Z)(S.indices),(0,Sn.Z)(O.indices)),normals:[].concat((0,Sn.Z)(y.normals),(0,Sn.Z)(S.normals),(0,Sn.Z)(O.normals)),size:7};return D}function DC(e,a){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,u=[],c=e.vertices,p=e.indices,g=e.dimensions,y=e.outLineIndices,S=0;S<c.length;S+=g)u.push.apply(u,[r,c[S+1],c[S]].concat((0,Sn.Z)(a)));return(0,te.Z)((0,te.Z)({},e),{},{vertices:u,indices:p.map(function(O){return O+o}),outLineIndices:y.map(function(O){return O+o})})}function fO(e){var a=hO();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function hO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var LC=`#extension GL_OES_standard_derivatives : enable

varying vec4 v_color;


// line texture

#pragma include "picking"

void main() {
gl_FragColor = v_color;
gl_FragColor = filterColor(gl_FragColor);
}
`,pO=`attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec4 a_Instance;
attribute vec3 a_Normal;
attribute vec3 a_Position;

uniform mat4 u_ModelMatrix;


#pragma include "projection"
#pragma include "project"
#pragma include "picking"
varying vec4 v_color;
uniform float u_gap_width: 1.0;
uniform float u_stroke_width: 1.0;
uniform float u_stroke_opacity: 1.0;

vec2 project_pixel_offset(vec2 offsets) {

   vec2 data = project_pixel(offsets);
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return data;
  }

  return vec2(data.x, -data.y);;
}

vec2 line_dir(vec2 target, vec2 source) {

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
     return normalize(target - source);
  }
  return normalize(ProjectFlat(target) - ProjectFlat(source));
}

float flag_gap() {
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
     return 1.;
  }
  return -1.;

}


void main() {

// \u900F\u660E\u5EA6\u8BA1\u7B97
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  vec2 flowlineDir = line_dir(target,source);
  vec2 perpendicularDir = vec2(flowlineDir.y, flowlineDir.x); // mapbox || \u9AD8\u5FB7


  vec2 position = mix(source, target, a_Position.x);
  
  float lengthCommon = length(project_position(vec4(target,0,1)) - project_position(vec4(source,0,1)));  //    
  vec2 offsetDistances = a_Size.x * project_pixel_offset(vec2(a_Position.y, a_Position.z)); // Mapbox || \u9AD8\u5FB7
  vec2 limitedOffsetDistances = clamp(   
   offsetDistances,
   project_pixel(-lengthCommon*.2), project_pixel(lengthCommon*.2)
  );


  float startOffsetCommon = project_pixel(offsets[0]);
  float endOffsetCommon = project_pixel(offsets[1]);
  float endpointOffset = mix(
    clamp(startOffsetCommon, 0.0, lengthCommon*.2),
    -clamp(endOffsetCommon, 0.0, lengthCommon*.2),
    a_Position.x
  );

  vec2 normalsCommon =  u_stroke_width * project_pixel_offset(vec2(a_Normal.x, a_Normal.y)); // mapbox || \u9AD8\u5FB7

  float gapCommon = flag_gap() * project_pixel(u_gap_width);
  vec3 offsetCommon = vec3(
    flowlineDir * (limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -
    perpendicularDir * (limitedOffsetDistances[0] + gapCommon + normalsCommon.x),
    0.0
  );


  vec4 project_pos = project_position(vec4(position.xy, 0, 1.0));

  vec4 fillColor = vec4(a_Color.rgb, a_Color.a * opacity);
  v_color = mix(fillColor, vec4(u_stroke.xyz, u_stroke.w * fillColor.w * u_stroke_opacity), a_Normal.z);

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offsetCommon.xy, 0., 1.0));



  setPickingColor(a_PickingColor);
}
`,dO=function(e){(0,mr.Z)(r,e);var a=fO(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.gapWidth,p=c===void 0?2:c,g=u.strokeWidth,y=g===void 0?1:g,S=u.stroke,O=S===void 0?"#000":S,D=u.strokeOpacity,V=D===void 0?1:D;return(0,te.Z)({u_gap_width:p,u_stroke_width:y,u_stroke:no(O),u_stroke_opacity:V},this.getStyleAttribute())}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.layer.buildLayerModel({moduleName:"flow_line",vertexShader:pO,fragmentShader:LC,inject:this.getInject(),triangulation:cO,styleOption:this.layer.getLayerConfig().symbol,primitive:gt.TRIANGLES,depth:{enable:!1},pick:!1});case 2:return p=y.sent,y.abrupt("return",[p]);case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Gi.Attribute,descriptor:{name:"a_Size",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(c){var p=c.size,g=p===void 0?1:p;return Array.isArray(g)?[g[0],g[1]]:[g,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Gi.Attribute,descriptor:{name:"a_Instance",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:4,update:function(c,p,g){return[g[3],g[4],g[5],g[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Gi.Attribute,descriptor:{name:"a_Normal",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:3,update:function(c,p,g,y,S){return S}}})}}]),r}(us);function vO(e){var a=gO();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function gO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var mO=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying float v_distance_ratio;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_line_texture: 0.0;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
uniform float segmentNumber;

varying vec2 v_iconMapUV;

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
varying vec4 v_line_data;

#pragma include "picking"
#pragma include "project"
#pragma include "projection"

void main() {

  float animateSpeed = 0.0;
  float d_segmentIndex = v_line_data.g;
  
  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
     gl_FragColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  if(u_line_type == LineTypeDash) {
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      // \u5B9E\u7EBF\u90E8\u5206
    } else {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u52A8\u753B\u6A21\u5F0F
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u8D34\u56FE
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { 
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_animate.x == Animate) {
      u = gl_FragColor.a/v_color.a;
    }

    float v = v_line_data.a; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);
    
    // \u8BBE\u7F6E\u8D34\u56FE\u548C\u5E95\u8272\u7684\u53E0\u52A0\u6A21\u5F0F
    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = filterColor(pattern);
    }
  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}`,yO=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;

uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
varying vec4 v_color;

varying float v_distance_ratio;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;

attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;
varying vec4 v_line_data;


#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
    return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
    return index / (segmentNumber - 1.);
}

float paraboloid(vec2 source, vec2 target, float ratio) {
    vec2 x = mix(source, target, ratio);
    vec2 center = mix(source, target, 0.5);
    float dSourceCenter = distance(source, center);
    float dXCenter = distance(x, center);
    return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
     float vertex_height = paraboloid(source, target, segmentRatio);

    return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
    );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}
float getAngularDist (vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) *
    sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    vec2 mid = midPoint(source, target);
    vec3 x = vec3(source.x, mid.x, target.x);
    vec3 y = vec3(source.y, mid.y, target.y);
    return vec2(bezier3(x ,t), bezier3(y,t));
  }else {
    if(abs(angularDist - PI) < 0.001) {
      return (1.0 - t) * source + t * target;
    }
    float a = sin((1.0 - t) * angularDist) / sin(angularDist);
    float b = sin(t * angularDist) / sin(angularDist);
    vec2 sin_source = sin(source);
    vec2 cos_source = cos(source);
    vec2 sin_target = sin(target);
    vec2 cos_target = cos(target);
    float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
    float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
    float z = a * sin_source.y + b * sin_target.y;
    return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));
  }
}

void main() {
  v_color = a_Color;
  v_color.a = v_color.a * opacity;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    total_Distance = total_Distance*16.0; // total_Distance*16.0 \u8C03\u6574\u9ED8\u8BA4\u7684\u6548\u679C
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  }

  if(u_animate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;
  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

v_line_data.g = a_Position.x; // \u8BE5\u9876\u70B9\u5728\u5F27\u7EBF\u4E0A\u7684\u5206\u6BB5\u6392\u5E8F
  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  
    // float mapZoomScale = u_CoordinateSystem !== COORDINATE_SYSTEM_P20_2?10000000.0:1.0;
    float d_arcDistrance = length(source - target);
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      d_arcDistrance = d_arcDistrance * 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      d_arcDistrance = project_pixel_allmap(d_arcDistrance);
    }
    float d_pixelLen = project_pixel(u_icon_step)/8.0;
v_line_data.b = floor(d_arcDistrance/d_pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }



  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + offset, 0, 1.0));
  setPickingColor(a_PickingColor);
}

`,sv={solid:0,dash:1},zg=function(e){(0,mr.Z)(r,e);var a=vO(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas()}),o.layer.render();return}o.texture=g({data:o.iconService.getCanvas(),mag:gt.NEAREST,min:gt.NEAREST,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128})}),o}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.textureBlend,y=g===void 0?"normal":g,S=u.lineType,O=S===void 0?"solid":S,D=u.dashArray,V=D===void 0?[10,5]:D,H=u.lineTexture,ue=H===void 0?!1:H,le=u.iconStep,we=le===void 0?100:le,Ne=u.segmentNumber,dt=Ne===void 0?30:Ne;V.length===2&&V.push(0,0),this.rendererService.getDirty()&&this.texture.bind();var mt=0,Lt=[0,0,0,0],Wt=[0,0,0,0];return c&&p&&(Lt=no(c),Wt=no(p),mt=1),(0,te.Z)({u_textureBlend:y==="normal"?0:1,segmentNumber:dt,u_line_type:sv[O]||0,u_dash_array:V,u_texture:this.texture,u_line_texture:ue?1:0,u_icon_step:we,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:mt,u_sourceColor:Lt,u_targetColor:Wt},this.getStyleAttribute())}},{key:"getAnimateUniforms",value:function(){var u=this.layer.getLayerConfig(),c=u.animateOption;return{u_animate:this.animateOption2Array(c),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:yO,fragmentShader:mO,triangulation:n1,inject:this.getInject(),depth:{enable:!1}});case 2:return p=y.sent,y.abrupt("return",[p]);case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Gi.Attribute,descriptor:{name:"a_Size",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?1:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Gi.Attribute,descriptor:{name:"a_Instance",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:4,update:function(p,g,y){return[y[3],y[4],y[5],y[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Gi.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.texture,S=g[y]||{x:0,y:0},O=S.x,D=S.y;return[O,D]}}})}}]),r}(us),_O=function(e){return e[e.solid=0]="solid",e[e.dash=1]="dash",e}({}),Cy=function(e){return e.VERTICAL="vertical",e.HORIZONTAL="horizontal",e}({}),Ug=function(e){return e.NORMAL="normal",e.REPLACE="replace",e}({}),Ay=function(e){return e[e.pixel=0]="pixel",e[e.meter=1]="meter",e}({}),J4=function(e){return e.ALWAYS="always",e.DRAGEND="dragend",e}({});function BC(e){var a=xO();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function xO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var c1=`#define LineTypeSolid 0.0
varying vec4 v_color;

// dash
varying vec4 v_dash_array;
varying float v_d_distance_ratio;

#pragma include "picking"

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ]; // \u63A7\u5236\u8FD0\u52A8

// [animate, duration, interval, trailLength],
void main() {

  gl_FragColor = v_color;

  float dashLength = mod(v_d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
  if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
    // \u5B9E\u7EBF\u90E8\u5206
  } else {
    // \u865A\u7EBF\u90E8\u5206
    discard;
  };

  gl_FragColor = filterColor(gl_FragColor);
}
`,bO=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

attribute vec2 a_iconMapUV;

// dash line
attribute float a_Total_Distance;
attribute vec2 a_DistanceAndIndex;
uniform float u_raisingHeight: 0.0;
uniform float u_heightfixed: 0.0;

uniform mat4 u_ModelMatrix;

uniform vec4 u_dash_array: [10.0, 5., 0, 0];

uniform float u_vertexScale: 1.0;

#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;
varying vec4 v_dash_array;
varying float v_d_distance_ratio;


void main() {

  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  vec2 offset = project_pixel(size.xy);
  v_d_distance_ratio = a_DistanceAndIndex.x / a_Total_Distance;


  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));
  
 float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    h *= 0.2;
    if(u_heightfixed < 1.0) {
      lineHeight = project_pixel(a_Size.y);
    }
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));
  } else {
    // mapbox -  amap
    
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      h *= mapboxZoomScale;
      h += u_raisingHeight * mapboxZoomScale;
      if(u_heightfixed > 0.0) {
        lineHeight *= mapboxZoomScale;
      }
      
    } else {
      // amap
      h += u_raisingHeight;
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        lineHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,SO=`#extension GL_OES_standard_derivatives : enable
#define Animate 0.0
#define LineTexture 1.0
uniform float u_textureBlend;

uniform float u_strokeWidth: 0.0;

uniform vec3 u_blur;
varying vec4 v_color;
varying vec4 v_stroke;

// line texture
uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
varying vec2 v_iconMapUV;
varying vec4 v_texture_data;


#pragma include "picking"

uniform float u_time;
uniform vec4 u_animate: [ 1, 2., 1.0, 0.2 ]; // \u63A7\u5236\u8FD0\u52A8
// [animate, duration, interval, trailLength],
void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_texture_data.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = v_color;
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_texture_data.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_texture_data.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_texture_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
     vec4 pattern = texture2D(u_texture, uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor += pattern;
    } else { // replace
        pattern.a *= v_color.a;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = pattern;
    }
  } 

  float v = v_texture_data.a;
  float strokeWidth = min(0.5, u_strokeWidth);
  // \u7ED8\u5236 border
  if(strokeWidth > 0.01) {
    float borderOuterWidth = strokeWidth / 2.0;


    if(v >= 1.0 - strokeWidth || v <= strokeWidth) {
      if(v > strokeWidth) { // \u5916\u4FA7
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - strokeWidth))/strokeWidth);
        //  float linear = step(0.0, (v - (1.0 - borderWidth))/borderWidth);
        gl_FragColor.rgb = mix(gl_FragColor.rgb, v_stroke.rgb, linear);
      } else if(v <= strokeWidth) {
        float linear = smoothstep(0.0, 1.0, v/strokeWidth);
        gl_FragColor.rgb = mix(v_stroke.rgb, gl_FragColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      gl_FragColor.a = mix(0.0, gl_FragColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      gl_FragColor.a = mix(gl_FragColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  // blur
  float blurV = v_texture_data.a;
  if(blurV < 0.5) {
    gl_FragColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);
  } else {
    gl_FragColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);
  }
  
  gl_FragColor = filterColor(gl_FragColor);
}
`,NC=`
#define Animate 0.0

attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

attribute vec2 a_iconMapUV;

// dash line
attribute float a_Total_Distance;
attribute vec2 a_DistanceAndIndex;

uniform mat4 u_ModelMatrix;

uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
uniform float u_icon_step: 100;

uniform float u_heightfixed: 0.0;
uniform float u_vertexScale: 1.0;
uniform float u_raisingHeight: 0.0;

#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;
varying vec4 v_stroke;

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
varying vec2 v_iconMapUV;


uniform float u_linearColor: 0;
uniform float u_arrow: 0.0;
uniform float u_arrowHeight: 3.0;
uniform float u_arrowWidth: 2.0;
uniform float u_tailWidth: 1.0;

varying vec4 v_texture_data;

vec2 calculateArrow(vec2 offset) {
  /*
  * \u5728\u652F\u6301\u7BAD\u5934\u7684\u65F6\u5019\uFF0C\u7B2C\u4E8C\u3001\u7B2C\u4E09\u7EC4\u9876\u70B9\u662F\u989D\u5916\u63D2\u5165\u7528\u4E8E\u6784\u5EFA\u9876\u70B9\u7684
  */
  float arrowFlag = -1.0;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // \u9AD8\u5FB7 2.0 \u7684\u65CB\u8F6C\u89D2\u5EA6\u4E0D\u540C
    arrowFlag = 1.0;
  }
  float pi = arrowFlag * 3.1415926/2.;
  if(a_Miter < 0.) {
    // \u6839\u636E\u7EBF\u7684\u4E24\u4FA7\u504F\u79FB\u4E0D\u540C\u3001\u65CB\u8F6C\u7684\u65B9\u5411\u76F8\u53CD
    pi = -pi;
  }
  highp float angle_sin = sin(pi);
  highp float angle_cos = cos(pi);
  // \u8BA1\u7B97\u5782\u76F4\u4E0E\u7EBF\u65B9\u5411\u7684\u65CB\u8F6C\u77E9\u9635
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  float arrowWidth = u_arrowWidth;
  float arrowHeight = u_arrowHeight;

  vec2 arrowOffset = vec2(0.0);
  /*
  * a_DistanceAndIndex.y \u7528\u4E8E\u6807\u8BB0\u5F53\u524D\u9876\u70B9\u5C5E\u4E8E\u54EA\u4E00\u7EC4\uFF08\u4E24\u4E2A\u9876\u70B9\u4E00\u7EC4\uFF0C\u6784\u6210\u7EBF\u7684\u5176\u5B9E\u662F\u77E9\u5F62\uFF0C\u6700\u7B80\u9700\u8981\u56DB\u4E2A\u9876\u70B9\u3001\u4E24\u7EC4\u9876\u70B9\u6784\u6210\uFF09
  */
  if(a_DistanceAndIndex.y == 0.0) {
    // \u7BAD\u5934\u5C16\u90E8
    offset = vec2(0.0);
  } else if(a_DistanceAndIndex.y == 1.0) {
    // \u7BAD\u5934\u4E24\u4FA7
    arrowOffset = rotation_matrix*(offset * arrowHeight);
    offset += arrowOffset; // \u6CBF\u7EBF\u504F\u79FB
    offset = offset * arrowWidth; // \u5782\u76F4\u7EBF\u5411\u5916\u504F\u79FB\uFF08\u662F\u6784\u5EFA\u7BAD\u5934\u4E24\u4FA7\u7684\u9876\u70B9\uFF09
  } else if(a_DistanceAndIndex.y == 2.0 || a_DistanceAndIndex.y == 3.0 || a_DistanceAndIndex.y == 4.0) {
    // \u504F\u79FB\u5176\u4F59\u7684\u70B9\u4F4D\uFF08\u5C06\u957F\u5EA6\u8BA9\u4F4D\u7ED9\u7BAD\u5934\uFF09
    arrowOffset = rotation_matrix*(offset * arrowHeight) * arrowWidth;
    offset += arrowOffset;// \u6CBF\u7EBF\u504F\u79FB
  }

  return offset;
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  
  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  v_color = a_Color;
  v_color.a *= opacity;
  v_stroke = stroke;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;
 
  if(u_arrow > 0.0) {
      //  \u8BA1\u7B97\u7BAD\u5934
    offset = calculateArrow(offset);

    if(a_DistanceAndIndex.y > 4.0) {
      offset *= mix(1.0, u_tailWidth, currentLinePointRatio);
    }
  }

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  
  v_texture_data = vec4(currentLinePointRatio, lineDistance, d_texPixelLen, texV);
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    h *= 0.2;
    if(u_heightfixed < 1.0) {
      lineHeight = project_pixel(a_Size.y);
    }
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));
  } else {
    // mapbox -  amap
    
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      h *= mapboxZoomScale;
      h += u_raisingHeight * mapboxZoomScale;
      if(u_heightfixed > 0.0) {
        lineHeight *= mapboxZoomScale;
      }
      
    } else {
      // amap
      h += u_raisingHeight;
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        lineHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,EO=`varying vec4 v_color;
varying vec4 v_texture_data;
uniform float u_linearDir: 1.0;
uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

#pragma include "picking"


void main() {
  float linearRadio = v_texture_data.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  if(u_linearDir < 1.0) {
    linearRadio = v_texture_data.a;
  }

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, linearRadio);
    gl_FragColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,wO={solid:0,dash:1},zC=function(e){(0,mr.Z)(r,e);var a=BC(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"textureEventFlag",!1),(0,Fe.Z)((0,vr.Z)(o),"texture",o.createTexture2D({data:[0,0,0,0],mag:gt.NEAREST,min:gt.NEAREST,premultiplyAlpha:!1,width:1,height:1})),(0,Fe.Z)((0,vr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas()}),o.layer.render();return}o.texture=g({data:o.iconService.getCanvas(),mag:gt.NEAREST,min:gt.NEAREST,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128})}),o}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.textureBlend,y=g===void 0?"normal":g,S=u.lineType,O=S===void 0?"solid":S,D=u.dashArray,V=D===void 0?[10,5,0,0]:D,H=u.lineTexture,ue=H===void 0?!1:H,le=u.iconStep,we=le===void 0?100:le,Ne=u.vertexHeightScale,dt=Ne===void 0?20:Ne,mt=u.strokeWidth,Lt=mt===void 0?0:mt,Wt=u.raisingHeight,qt=Wt===void 0?0:Wt,ir=u.heightfixed,Sr=ir===void 0?!1:ir,Br=u.linearDir,Jr=Br===void 0?Cy.VERTICAL:Br,en=u.blur,Kn=en===void 0?[1,1,1]:en;V.length===2&&V.push(0,0),this.rendererService.getDirty()&&this.texture&&this.texture.bind();var si=0,Pi=[0,0,0,0],so=[0,0,0,0];return c&&p&&(Pi=no(c),so=no(p),si=1),(0,te.Z)({u_textureBlend:y===Ug.NORMAL?0:1,u_line_type:wO[O],u_dash_array:V,u_blur:Kn,u_texture:this.texture,u_line_texture:ue?1:0,u_icon_step:we,u_textSize:[1024,this.iconService.canvasHeight||128],u_strokeWidth:Lt,u_linearDir:Jr===Cy.VERTICAL?1:0,u_linearColor:si,u_sourceColor:Pi,u_targetColor:so,u_heightfixed:Number(Sr),u_vertexScale:dt,u_raisingHeight:Number(qt)},this.getStyleAttribute())}},{key:"getAnimateUniforms",value:function(){var u=this.layer.getLayerConfig(),c=u.animateOption;return{u_animate:this.animateOption2Array(c),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.textureEventFlag||(this.textureEventFlag=!0,this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture)),g.abrupt("return",this.buildModels());case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S,O,D,V,H;return $t().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return p=this.layer.getLayerConfig(),g=p.depth,y=g===void 0?!1:g,S=this.getShaders(),O=S.frag,D=S.vert,V=S.type,this.layer.triangulation=Hd,le.next=5,this.layer.buildLayerModel({moduleName:"line"+V,vertexShader:D,fragmentShader:O,triangulation:Hd,inject:this.getInject(),depth:{enable:y}});case 5:return H=le.sent,le.abrupt("return",[H]);case 7:case"end":return le.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getShaders",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.lineType;return g==="dash"?{frag:c1,vert:bO,type:"Dash"}:c&&p?{frag:EO,vert:NC,type:"Linear"}:{frag:SO,vert:NC,type:""}}},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:Gi.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(p,g,y,S,O,D){return D===void 0?[y[3],10]:[y[3],D]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:Gi.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(p,g,y){return[y[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Gi.Attribute,descriptor:{name:"a_Size",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(p){var g=p.size,y=g===void 0?1:g;return Array.isArray(y)?[y[0],y[1]]:[y,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Gi.Attribute,descriptor:{name:"a_Normal",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:3,update:function(p,g,y,S,O){return O}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:Gi.Attribute,descriptor:{name:"a_Miter",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(p,g,y){return[y[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Gi.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.texture,S=g[y]||{x:0,y:0},O=S.x,D=S.y;return[O,D]}}})}}]),r}(us);function Yb(e){var a=CO();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function CO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var AO=`
varying vec4 v_Color;
#pragma include "picking"
void main() {

  gl_FragColor = v_Color; // \u5168\u5C40\u900F\u660E\u5EA6
  gl_FragColor = filterColor(gl_FragColor);
}
`,TO=`
attribute float a_Miter;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

// dash line
attribute float a_Total_Distance;
attribute vec2 a_DistanceAndIndex;

uniform mat4 u_ModelMatrix;


uniform float u_heightfixed: 0.0;
uniform float u_vertexScale: 1.0;
uniform float u_raisingHeight: 0.0;
uniform sampler2D u_texture;
uniform float u_linearDir: 1.0;
varying vec4 v_Color;


#pragma include "projection"
#pragma include "picking"


void main() {


  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;
 

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  float linearRadio =currentLinePointRatio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  if(u_linearDir < 1.0) {
    linearRadio = texV;
  }

  v_Color = texture2D(u_texture, vec2(linearRadio, 0.5));

  v_Color.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6



  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    h *= 0.2;
    if(u_heightfixed < 1.0) {
      lineHeight = project_pixel(a_Size.y);
    }
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));
  } else {
    // mapbox -  amap
    
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      h *= mapboxZoomScale;
      h += u_raisingHeight * mapboxZoomScale;
      if(u_heightfixed > 0.0) {
        lineHeight *= mapboxZoomScale;
      }
      
    } else {
      // amap
      h += u_raisingHeight;
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        lineHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,eB=wa.isNumber,f1=function(e){(0,mr.Z)(r,e);var a=Yb(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;o.colorTexture&&o.colorTexture.destroy();var y=o.layer.getLayerConfig(),S=y.rampColors,O=ds(S);o.colorTexture=g({data:new Uint8Array(O.data),width:O.width,height:O.height,wrapS:gt.CLAMP_TO_EDGE,wrapT:gt.CLAMP_TO_EDGE,min:gt.NEAREST,mag:gt.NEAREST,flipY:!1})}),o}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=c===void 0?1:c,g=u.vertexHeightScale,y=g===void 0?20:g,S=u.raisingHeight,O=S===void 0?0:S,D=u.heightfixed,V=D===void 0?!1:D,H=u.linearDir,ue=H===void 0?Cy.VERTICAL:H;return this.rendererService.getDirty()&&this.colorTexture.bind(),(0,te.Z)({u_linearDir:ue===Cy.VERTICAL?1:0,u_texture:this.colorTexture,u_heightfixed:Number(V),u_vertexScale:y,u_raisingHeight:Number(O)},this.getStyleAttribute())}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.updateTexture(),g.abrupt("return",this.buildModels());case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.colorTexture)===null||u===void 0||u.destroy()}},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S;return $t().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=this.layer.getLayerConfig(),g=p.depth,y=g===void 0?!1:g,this.layer.triangulation=e0,D.next=4,this.layer.buildLayerModel({moduleName:"lineRampColors",vertexShader:TO,fragmentShader:AO,triangulation:e0,inject:this.getInject(),depth:{enable:y}});case 4:return S=D.sent,D.abrupt("return",[S]);case 6:case"end":return D.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:Gi.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(c,p,g,y,S,O){return O===void 0?[g[3],10]:[g[3],O]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:Gi.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(c,p,g){return[g[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Gi.Attribute,descriptor:{name:"a_Size",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(c){var p=c.size,g=p===void 0?1:p;return Array.isArray(g)?[g[0],g[1]]:[g,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Gi.Attribute,descriptor:{name:"a_Normal",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:3,update:function(c,p,g,y,S){return S}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:Gi.Attribute,descriptor:{name:"a_Miter",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(c,p,g){return[g[4]]}}})}}]),r}(us);function MO(e){var a=RO();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function RO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var IO=`
varying vec4 v_color;
void main() {
  gl_FragColor = v_color;

}
`,PO=`uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
varying float v_distanceScale;
varying vec4 v_color;
void main() {
  gl_FragColor = mix(u_sourceColor, u_targetColor, v_distanceScale);
  gl_FragColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
}
`,UC=`attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Position;

attribute float a_Total_Distance;
attribute float a_Distance;

uniform mat4 u_ModelMatrix;


uniform float u_vertexScale: 1.0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;



#pragma include "projection"

varying vec4 v_color;
varying float v_distanceScale;

void main() {

  v_color = a_Color; 
  v_distanceScale = a_Distance / a_Total_Distance;
  v_color.a = v_color.a * opacity;
  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, project_pixel(a_Size.y) + h * 0.2, 1.0));
  } else {
    float lineHeight = a_Size.y;
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      h *= 2.0/pow(2.0, 20.0 - u_Zoom);
    }

    // amap1.x
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      lineHeight *= pow(2.0, 20.0 - u_Zoom);
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));
    gl_PointSize = 10.0;
  }
}
`,OO=wa.isNumber,kO=function(e){(0,mr.Z)(r,e);var a=MO(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=c===void 0?1:c,g=u.sourceColor,y=u.targetColor,S=u.vertexHeightScale,O=S===void 0?20:S,D=0,V=[0,0,0,0],H=[0,0,0,0];return g&&y&&(V=no(g),H=no(y),D=1),(0,te.Z)({u_linearColor:D,u_sourceColor:V,u_targetColor:H,u_vertexScale:O},this.getStyleAttribute())}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getShaders",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor;return c&&p?{frag:PO,vert:UC,type:"lineSimpleLinear"}:{frag:IO,vert:UC,type:"lineSimpleNormal"}}},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S,O;return $t().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return p=this.getShaders(),g=p.frag,y=p.vert,S=p.type,V.next=3,this.layer.buildLayerModel({moduleName:S,vertexShader:y,fragmentShader:g,triangulation:Zb,inject:this.getInject(),primitive:gt.LINES,depth:{enable:!1},pick:!1});case 3:return O=V.sent,V.abrupt("return",[O]);case 5:case"end":return V.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distance",type:Gi.Attribute,descriptor:{name:"a_Distance",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(c,p,g){return[g[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:Gi.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(c,p,g){return[g[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Gi.Attribute,descriptor:{name:"a_Size",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(c){var p=c.size,g=p===void 0?1:p;return Array.isArray(g)?[g[0],g[1]]:[g,0]}}})}}]),r}(us);function ZC(e){var a=FO();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function FO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var VC=`#define Animate 0.0
#define LineTexture 1.0

// line texture
uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_opacity : 1.0;
uniform float u_textureBlend;
uniform float u_iconStepCount;
uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ]; // \u63A7\u5236\u8FD0\u52A8

varying vec2 v_iconMapUV;
varying float v_blur;
varying float v_radio;
varying vec4 v_color;
varying vec4 v_dataset;

#pragma include "picking"

void main() {
  float opacity = u_opacity;
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_dataset.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float v = v_dataset.a;

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, v);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_dataset.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_dataset.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_dataset.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 start
    float flag = 0.0;
    if(u > 1.0/u_iconStepCount) {
      flag = 1.0;
    }
    u = fract(u*u_iconStepCount);
    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 end

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);

    // Tip: \u5224\u65AD\u7EB9\u7406\u95F4\u9694
    if(flag > 0.0) {
      pattern = vec4(0.0);
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = filterColor(pattern);
    }
  }
  

  // blur - AA
  if(v < v_blur) {
    gl_FragColor.a = mix(0.0, gl_FragColor.a, v/v_blur);
  } else if(v > 1.0 - v_blur) {
    gl_FragColor.a = mix(gl_FragColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,Kb=`#define Animate 0.0

attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;
attribute vec2 a_iconMapUV;
attribute float a_Total_Distance;
attribute float a_Distance;

uniform mat4 u_ModelMatrix;

uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
uniform float u_icon_step: 100;
uniform float u_heightfixed;
uniform float u_linearColor: 0;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
varying vec2 v_iconMapUV;
varying vec4 v_color;
varying float v_blur;
varying float v_radio;
varying vec4 v_dataset;

void main() {


  float d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  if(u_heightfixed < 1.0) {     // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    d_texPixelLen = project_pixel(u_icon_step);
  } else {
    d_texPixelLen = u_icon_step;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  if(u_animate.x == Animate || u_linearColor == 1.0) {
      d_distance_ratio = a_Distance / a_Total_Distance;
  }

  float miter = (a_Miter + 1.0)/2.0;
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  v_dataset[0] = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  v_dataset[1] = a_Distance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  v_dataset[2] = d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_dataset[3] = miter;          // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C 0 - 1

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float originSize = a_Size.x;  // \u56FA\u5B9A\u9AD8\u5EA6
  if(u_heightfixed < 1.0) {     // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    originSize = project_float_pixel(a_Size.x);
  }

  float wallHeight = originSize * miter;
  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));

  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, wallHeight, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,Zg=wa.isNumber,Gv=function(e){(0,mr.Z)(r,e);var a=ZC(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas()}),o.layer.render();return}o.texture=g({data:o.iconService.getCanvas(),mag:gt.NEAREST,min:gt.NEAREST,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128})}),o}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.textureBlend,y=g===void 0?"normal":g,S=u.heightfixed,O=S===void 0?!1:S,D=u.lineTexture,V=D===void 0?!1:D,H=u.iconStep,ue=H===void 0?100:H,le=u.iconStepCount,we=le===void 0?1:le;this.rendererService.getDirty()&&this.texture.bind();var Ne=0,dt=[0,0,0,0],mt=[0,0,0,0];return c&&p&&(dt=no(c),mt=no(p),Ne=1),(0,te.Z)({u_heightfixed:Number(O),u_textureBlend:y==="normal"?0:1,u_texture:this.texture,u_line_texture:V?1:0,u_iconStepCount:we,u_icon_step:ue,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:Ne,u_sourceColor:dt,u_targetColor:mt},this.getStyleAttribute())}},{key:"getAnimateUniforms",value:function(){var u=this.layer.getLayerConfig(),c=u.animateOption;return{u_animate:this.animateOption2Array(c),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.layer.buildLayerModel({moduleName:"lineWall",vertexShader:Kb,fragmentShader:VC,triangulation:e0,inject:this.getInject(),depth:{enable:!1},blend:this.getBlend()});case 2:return p=y.sent,y.abrupt("return",[p]);case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"distance",type:Gi.Attribute,descriptor:{name:"a_Distance",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(p,g,y){return[y[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:Gi.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(p,g,y){return[y[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Gi.Attribute,descriptor:{name:"a_Size",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(p){var g=p.size,y=g===void 0?1:g;return Array.isArray(y)?[y[0],y[1]]:[y,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Gi.Attribute,descriptor:{name:"a_Normal",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:3,update:function(p,g,y,S,O){return O}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:Gi.Attribute,descriptor:{name:"a_Miter",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(p,g,y){return[y[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Gi.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.texture,S=g[y]||{x:0,y:0},O=S.x,D=S.y;return[O,D]}}})}}]),r}(us),uv={arc:tO,arc3d:nO,greatcircle:zg,wall:Gv,line:zC,simple:kO,linearline:f1,earthArc3d:PC,flowline:dO},qb=uv;function Ty(e){var a=My();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function My(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ry=function(e){(0,mr.Z)(r,e);var a=Ty(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"type","LineLayer"),(0,Fe.Z)((0,vr.Z)(o),"enableShaderEncodeStyles",["opacity","offsets","stroke","thetaOffset"]),(0,Fe.Z)((0,vr.Z)(o),"arrowInsertCount",0),(0,Fe.Z)((0,vr.Z)(o),"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}}),o}return(0,at.Z)(r,[{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel=new qb[p](this),y.next=4,this.initLayerModels();case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getDefaultConfig",value:function(){var u=this.getModelType(),c={line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},earthArc3d:{},flowline:{},arrow:{}};return c[u]}},{key:"getModelType",value:function(){var u;if(this.layerType)return this.layerType;var c=this.styleAttributeService.getLayerStyleAttribute("shape"),p=c==null||(u=c.scale)===null||u===void 0?void 0:u.field;return p||"line"}},{key:"processData",value:function(u){if(this.getModelType()!=="simple")return u;var c=[];return u.map(function(p){if(Array.isArray(p.coordinates)&&Array.isArray(p.coordinates[0])&&Array.isArray(p.coordinates[0][0])){var g=(0,te.Z)({},p);p.coordinates.map(function(y){c.push((0,te.Z)((0,te.Z)({},g),{},{coordinates:y}))})}else c.push(p)}),c}}]),r}(Xf);function HC(e){var a=Qb();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function Qb(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Jb=`
uniform float u_additive;
uniform float u_stroke_opacity : 1;

uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];

varying vec4 v_color;
varying float v_blur;
varying float v_innerRadius;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  // Tip: \u7247\u5143\u5230\u4E2D\u5FC3\u70B9\u7684\u8DDD\u79BB 0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: \u7247\u5143\u7684\u526A\u5207\u6210\u5706\u5F62
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    // \u5F53\u5B58\u5728 stroke \u4E14 stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      gl_FragColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      gl_FragColor = mix(v_color, stroke, mixR);
    } else {
      gl_FragColor = v_color;
    }
  } else {
    // \u5F53\u4E0D\u5B58\u5728 stroke \u6216 stroke <= 0.01
    gl_FragColor = v_color;
  }

  gl_FragColor = filterColor(gl_FragColor);
  
  if(u_additive > 0.0) {
    gl_FragColor *= circleClipOpacity;
  } else {
    gl_FragColor.a *= circleClipOpacity;
  }

}
`,DO=`
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;

attribute float a_Size;
attribute vec4 a_Color;
varying vec4 v_color;

uniform float u_opacity : 1;
uniform vec2 u_offsets;
uniform float u_stroke_width;

varying float v_blur;
varying float v_innerRadius;



#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * u_opacity);
  v_blur = 1.0 - max(2.0/a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);
  
  vec2 offset = project_pixel(u_offsets);
  
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);
  } else { // else
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  }
  
  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function jC(e){var a=e.coordinates;return{vertices:(0,Sn.Z)(a),indices:[0],size:a.length}}var LO=function(e){(0,mr.Z)(r,e);var a=HC(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=c===void 0?1:c,g=u.offsets,y=g===void 0?[0,0]:g,S=u.blend,O=u.strokeOpacity,D=O===void 0?1:O,V=u.strokeWidth,H=V===void 0?0:V,ue=u.stroke,le=ue===void 0?"#fff":ue;return{u_additive:S==="additive"?1:0,u_opacity:p,u_offsets:y,u_stroke_opacity:D,u_stroke_width:H,u_stroke_color:no(le)}}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.layer.triangulation=jC,y.next=3,this.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:DO,fragmentShader:Jb,triangulation:jC,depth:{enable:!1},primitive:gt.POINTS});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Gi.Attribute,descriptor:{name:"a_Size",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(c){var p=c.size,g=p===void 0?1:p;return Array.isArray(g)?[g[0]]:[g]}}})}}]),r}(us);function WC(e){var a=GC();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function GC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var BO=`varying vec4 v_color;
uniform float u_opacity: 1.0;

uniform float u_pickLight: 0.0;

#pragma include "picking"


uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

uniform float u_opacitylinear: 0.0;
uniform float u_opacitylinear_dir: 1.0;
varying float v_lightWeight;
varying float v_barLinearZ;
void main() {

   gl_FragColor = v_color;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    gl_FragColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - v_barLinearZ): v_barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    gl_FragColor = filterColorAlpha(gl_FragColor, v_lightWeight);
  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,NO=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec3 a_Position;
attribute vec3 a_Pos;
attribute vec4 a_Color;
attribute vec3 a_Size;
attribute vec3 a_Normal;

uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_globel;
uniform float u_r;
uniform mat4 u_ModelMatrix;

varying vec4 v_color;

uniform float u_opacity : 1;
uniform float u_lightEnable: 1;
varying float v_lightWeight;
varying float v_barLinearZ;
// \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143


#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  v_barLinearZ =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  v_lightWeight = lightWeight;
  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, barLinearZ);
    v_color.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     v_color = a_Color;
  }
  v_color.a *= u_opacity;

    
  // \u5728\u5730\u7403\u6A21\u5F0F\u4E0B\uFF0C\u5C06\u539F\u672C\u5782\u76F4\u4E8E xy \u5E73\u9762\u7684\u5706\u67F1\u8C03\u6574\u59FF\u6001\u5230\u9002\u5E94\u5706\u7684\u89D2\u5EA6
  //\u65CB\u8F6C\u77E9\u9635mx\uFF0C\u521B\u5EFA\u7ED5x\u8F74\u65CB\u8F6C\u77E9\u9635
  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
  float xRadian = getXRadian(a_Pos.y, r);
  float xcos = cos(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float xsin = sin(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 mx = mat4(
    1,0,0,0,  
    0,xcos,-xsin,0,  
    0,xsin,xcos,0,  
    0,0,0,1);

  //\u65CB\u8F6C\u77E9\u9635my\uFF0C\u521B\u5EFA\u7ED5y\u8F74\u65CB\u8F6C\u77E9\u9635
  float yRadian = getYRadian(a_Pos.x, a_Pos.z);
  float ycos = cos(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float ysin = sin(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 my = mat4(
    ycos,0,-ysin,0,  
    0,1,0,0,  
    ysin,0,ycos,0,  
    0,0,0,1);

  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);
  

  setPickingColor(a_PickingColor);
}
`,XC=wa.isNumber,zO=function(e){(0,mr.Z)(r,e);var a=WC(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"raiseCount",0),(0,Fe.Z)((0,vr.Z)(o),"raiseRepeat",0),o}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.animateOption,p=c===void 0?{enable:!1,speed:.01,repeat:!1}:c,g=u.opacity,y=g===void 0?1:g,S=u.sourceColor,O=u.targetColor,D=u.pickLight,V=D===void 0?!1:D,H=u.heightfixed,ue=H===void 0?!1:H,le=u.opacityLinear,we=le===void 0?{enable:!1,dir:"up"}:le,Ne=u.lightEnable,dt=Ne===void 0?!0:Ne,mt=0,Lt=[0,0,0,0],Wt=[0,0,0,0];if(S&&O&&(Lt=no(S),Wt=no(O),mt=1),this.raiseCount<1&&this.raiseRepeat>0&&p.enable){var qt=p.speed,ir=qt===void 0?.01:qt;this.raiseCount+=ir,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}return{u_pickLight:Number(V),u_heightfixed:Number(ue),u_r:p.enable&&this.raiseRepeat>0?this.raiseCount:1,u_opacity:XC(y)?y:1,u_linearColor:mt,u_sourceColor:Lt,u_targetColor:Wt,u_opacitylinear:Number(we.enable),u_opacitylinear_dir:we.dir==="up"?1:0,u_lightEnable:Number(dt)}}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S;return $t().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=this.layer.getLayerConfig(),g=p.animateOption.repeat,y=g===void 0?1:g,this.raiseRepeat=y,D.next=4,this.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:NO,fragmentShader:BO,triangulation:Ub,depth:{enable:!0},cull:{enable:!0,face:Ec(this.mapService.version)},blend:this.getBlend()});case 4:return S=D.sent,D.abrupt("return",[S]);case 6:case"end":return D.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Gi.Attribute,descriptor:{name:"a_Size",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:3,update:function(c){var p=c.size;if(p){var g=[];return Array.isArray(p)&&(g=p.length===2?[p[0],p[0],p[1]]:p),Array.isArray(p)||(g=[p,p,p]),g}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Gi.Attribute,descriptor:{name:"a_Normal",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:3,update:function(c,p,g,y,S){return S}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:Gi.Attribute,descriptor:{name:"a_Pos",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:3,update:function(c){var p=tu(c.coordinates);return EC([p[0],p[1]])}}})}}]),r}(us);function UO(e){var a=ZO();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function ZO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var VO=`uniform float u_additive;
uniform float u_opacity : 1;
uniform float u_stroke_opacity : 1;
uniform float u_stroke_width : 2;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

#pragma include "sdf_2d"
#pragma include "picking"


void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 strokeColor = textrueStroke == vec4(0) ? v_color : textrueStroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + strokeWidth);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(outer_df > antialiasblur + 0.018) discard;

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = strokeWidth < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(strokeWidth < 0.01) {
    gl_FragColor = vec4(v_color.rgb, v_color.a * u_opacity);
  } else {
    gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), u_stroke_color * u_stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    gl_FragColor *= opacity_t;
    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);
  } else {
    gl_FragColor.a *= opacity_t;
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,HO=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute float a_Shape;
uniform mat4 u_ModelMatrix;


varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

uniform float u_opacity : 1;
uniform float u_stroke_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
uniform vec2 u_offsets;

uniform float u_blur : 0.0;

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);


  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1 + u_offsets, 1.0);

  setPickingColor(a_PickingColor);
}
`,jO=function(e){(0,mr.Z)(r,e);var a=UO(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=c===void 0?1:c,g=u.strokeOpacity,y=g===void 0?1:g,S=u.strokeWidth,O=S===void 0?0:S,D=u.stroke,V=D===void 0?"rgba(0,0,0,0)":D,H=u.blend,ue=u.blur,le=ue===void 0?0:ue;return{u_blur:le,u_additive:H==="additive"?1:0,u_opacity:p,u_stroke_opacity:y,u_stroke_width:O,u_stroke_color:no(V)}}},{key:"getAnimateUniforms",value:function(){var u=this.layer.getLayerConfig(),c=u.animateOption,p=c===void 0?{enable:!1}:c;return{u_animate:this.animateOption2Array(p),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.layer.triangulation=Jm,y.next=3,this.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:HO,fragmentShader:VO,triangulation:Jm,depth:{enable:!0},blend:this.getBlend()});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"animateOption2Array",value:function(u){return[u.enable?0:1,u.speed||1,u.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Gi.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:3,update:function(p,g,y,S){var O=(0,Vi.Z)(y,3),D=O[0],V=O[1],H=O[2],ue=ao.fromValues(0,0,1),le=ao.fromValues(D,0,H),we=D>=0?ao.angle(ue,le):Math.PI*2-ao.angle(ue,le),Ne=Math.PI*2-Math.asin(V/100),dt=vu();Kd(dt,dt,we),Wh(dt,dt,Ne);var mt=ao.fromValues(1,1,0);ao.transformMat4(mt,mt,dt),ao.normalize(mt,mt);var Lt=ao.fromValues(-1,1,0);ao.transformMat4(Lt,Lt,dt),ao.normalize(Lt,Lt);var Wt=ao.fromValues(-1,-1,0);ao.transformMat4(Wt,Wt,dt),ao.normalize(Wt,Wt);var qt=ao.fromValues(1,-1,0);ao.transformMat4(qt,qt,dt),ao.normalize(qt,qt);var ir=[].concat((0,Sn.Z)(mt),(0,Sn.Z)(Lt),(0,Sn.Z)(Wt),(0,Sn.Z)(qt)),Sr=S%4*3;return[ir[Sr],ir[Sr+1],ir[Sr+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Gi.Attribute,descriptor:{name:"a_Size",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?5:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:Gi.Attribute,descriptor:{name:"a_Shape",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(p){var g=p.shape,y=g===void 0?2:g,S=u.layer.getLayerConfig().shape2d,O=S.indexOf(y);return[O]}}})}}]),r}(us);function WO(e){var a=GO();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function GO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var XO=`varying vec4 v_color;
varying float v_lightWeight;
uniform float u_pickLight: 0.0;

#pragma include "picking"


void main() {

  gl_FragColor = v_color;
  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  // picking
  if(u_pickLight > 0.0) {
    gl_FragColor = filterColorAlpha(gl_FragColor, v_lightWeight);
  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,$O=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec3 a_Position;
attribute vec3 a_Pos;
attribute vec4 a_Color;
attribute vec3 a_Size;
attribute vec3 a_Normal;

uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_r;
uniform mat4 u_ModelMatrix;

varying vec4 v_color;
varying float v_lightWeight;
varying float v_barLinearZ;

uniform float u_opacity : 1;
uniform float u_lightEnable: 1;
uniform float u_opacitylinear: 0.0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_opacitylinear_dir: 1.0;
uniform float  u_linearColor: 0.0;


#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {


  vec3 size = a_Size * a_Position;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB

  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;

  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }

  v_lightWeight = lightWeight;

  v_color = a_Color;

    // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, a_Position.z);
    v_color.a =  v_color.a * u_opacity;
  } else {
    v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * u_opacity);
  }

    if(u_opacitylinear > 0.0) {
    v_color.a *= u_opacitylinear_dir > 0.0 ? (1.0 - a_Position.z): a_Position.z;
  }


  // gl_Position = project_common_position_to_clipspace(pos);

  gl_Position = project_common_position_to_clipspace_v2(pos);

  setPickingColor(a_PickingColor);
}
`,$C=function(e){(0,mr.Z)(r,e);var a=WO(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"raiseCount",0),(0,Fe.Z)((0,vr.Z)(o),"raiseRepeat",0),o}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.animateOption,p=c===void 0?{enable:!1,speed:.01,repeat:!1}:c,g=u.opacity,y=g===void 0?1:g,S=u.sourceColor,O=u.targetColor,D=u.pickLight,V=D===void 0?!1:D,H=u.heightfixed,ue=H===void 0?!1:H,le=u.opacityLinear,we=le===void 0?{enable:!1,dir:"up"}:le,Ne=u.lightEnable,dt=Ne===void 0?!0:Ne,mt=0,Lt=[0,0,0,0],Wt=[0,0,0,0];if(S&&O&&(Lt=no(S),Wt=no(O),mt=1),this.raiseCount<1&&this.raiseRepeat>0&&p.enable){var qt=p.speed,ir=qt===void 0?.01:qt;this.raiseCount+=ir,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}return{u_pickLight:Number(V),u_heightfixed:Number(ue),u_r:p.enable&&this.raiseRepeat>0?this.raiseCount:1,u_opacity:y,u_linearColor:mt,u_sourceColor:Lt,u_targetColor:Wt,u_opacitylinear:Number(we.enable),u_opacitylinear_dir:we.dir==="up"?1:0,u_lightEnable:Number(dt)}}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S,O,D;return $t().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return p=this.layer.getLayerConfig(),g=p.depth,y=g===void 0?!0:g,S=p.animateOption.repeat,O=S===void 0?1:S,this.raiseRepeat=O,H.next=4,this.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:$O,fragmentShader:XO,triangulation:Ub,cull:{enable:!0,face:Ec(this.mapService.version)},depth:{enable:y}});case 4:return D=H.sent,H.abrupt("return",[D]);case 6:case"end":return H.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Gi.Attribute,descriptor:{name:"a_Size",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:3,update:function(c){var p=c.size;if(p){var g=[];return Array.isArray(p)&&(g=p.length===2?[p[0],p[0],p[1]]:p),Array.isArray(p)||(g=[p,p,p]),g}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Gi.Attribute,descriptor:{name:"a_Normal",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:3,update:function(c,p,g,y,S){return S}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:Gi.Attribute,descriptor:{name:"a_Pos",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:3,update:function(c){var p=tu(c.coordinates);return[p[0],p[1],0]}}})}}]),r}(us);function YC(e){var a=e2();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function e2(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var t2=`
uniform float u_additive;


varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

#pragma include "sdf_2d"
#pragma include "picking"

void main() {

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  
  outer_df = sdCircle(v_data.xy, 1.0);
  inner_df = sdCircle(v_data.xy, r);


  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );
  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  gl_FragColor = v_color;

  float d = length(v_data.xy);
  if(d > 0.5) {
    discard;
  }
  float intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);
  
  // \u6839\u636E\u53E0\u52A0\u6A21\u5F0F\u9009\u62E9\u6548\u679C
  if(u_additive > 0.0) {
    gl_FragColor *= intensity;
    // \u4F18\u5316\u6C34\u6CE2\u70B9 blend additive \u6A21\u5F0F\u4E0B\u6709\u7684\u62FE\u53D6\u6548\u679C 
    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);
  } else {
    gl_FragColor = vec4(gl_FragColor.xyz, gl_FragColor.a * intensity);
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,YO=`
layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
};

in vec4 v_color;
in vec4 v_stroke;
in vec4 v_data;
in float v_radius;

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));
  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(u_stroke_width < 0.01) {
    outputColor = v_color;
  } else {
    outputColor = mix(v_color, v_stroke * u_stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor = filterColor(outputColor);
  }
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if(outputColor.a < 0.01) {
    discard;
  } 
}
`,r2=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 11) in vec3 a_Extrude;
layout(location = 10) in float a_Shape;

layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
};

out vec4 v_color;
out vec4 v_stroke;
out vec4 v_data;
out float v_radius;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // \u900F\u660E\u5EA6\u8BA1\u7B97
   v_stroke = stroke;  
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  *  u_meter2coord \u5728\u7B49\u9762\u79EF\u5927\u5C0F\u7684\u65F6\u5019\u8BBE\u7F6E\u5355\u4F4D
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;



  // unpack color(vec2)
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

   v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur_height_fixed.x);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + u_offsets);
  vec3 aPosition = a_Position;

  offset = project_pixel(offset);
  offset = rotate_matrix(offset,rotation);
  
  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);


  // vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));
  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raisingHeight = u_blur_height_fixed.y;

  if(u_blur_height_fixed.z < 1.0) { // false
    raisingHeight = project_pixel(u_blur_height_fixed.y);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_blur_height_fixed.y * mapboxZoomScale;
    }
  }
  
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`,KC=function(e){(0,mr.Z)(r,e);var a=YC(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.strokeOpacity,p=c===void 0?1:c,g=u.strokeWidth,y=g===void 0?0:g,S=u.blend,O=u.blur,D=O===void 0?0:O,V=u.raisingHeight,H=V===void 0?0:V,ue=u.heightfixed,le=ue===void 0?!1:ue,we=u.unit,Ne=we===void 0?"pixel":we,dt=(0,te.Z)({u_blur_height_fixed:[D,Number(H),Number(le)],u_additive:S==="additive"?1:0,u_stroke_opacity:p,u_stroke_width:y,u_size_unit:Ay[Ne]},this.getStyleAttribute()),mt=this.getStyleAttribute();return this.uniformBuffers[0].subData({offset:0,data:new Uint8Array(new Float32Array([].concat((0,Sn.Z)(mt.u_stroke),(0,Sn.Z)(mt.u_offsets),[mt.u_opacity,mt.u_rotation])).buffer)}),this.uniformBuffers[1].subData({offset:0,data:new Uint8Array(new Float32Array([].concat((0,Sn.Z)(dt.u_blur_height_fixed),[dt.u_stroke_width,dt.u_stroke_opacity,dt.u_additive,dt.u_size_unit])).buffer)}),dt}},{key:"getAnimateUniforms",value:function(){var u=this.layer.getLayerConfig(),c=u.animateOption,p=c===void 0?{enable:!1}:c;return{u_animate:this.animateOption2Array(p),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),dd)}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S,O,D,V,H,ue,le;return $t().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return p=this.layer.getLayerConfig(),g=p.animateOption,y=g===void 0?{enable:!1}:g,S=this.getShaders(y),O=S.frag,D=S.vert,V=S.type,this.layer.triangulation=dd,H=this.rendererService.createBuffer({data:new Float32Array(8),isUBO:!0}),ue=this.rendererService.createBuffer({data:new Float32Array(8),isUBO:!0}),this.uniformBuffers.push(H,ue),Ne.next=8,this.layer.buildLayerModel({moduleName:V,vertexShader:D,fragmentShader:O,inject:this.getInject(),triangulation:dd,depth:{enable:!1}});case 8:return le=Ne.sent,Ne.abrupt("return",[le]);case 10:case"end":return Ne.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getShaders",value:function(u){if(u.enable)switch(u.type){case"wave":return{frag:t2,vert:r2,type:"pointWave"};default:return{frag:t2,vert:r2,type:"pointWave"}}else return{frag:YO,vert:r2,type:"pointFill"}}},{key:"animateOption2Array",value:function(u){return[u.enable?0:1,u.speed||1,u.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var u=this.layer.getLayerConfig().shape2d;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Gi.Attribute,descriptor:{name:"a_Extrude",shaderLocation:tc.EXTRUDE,buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:3,update:function(p,g,y,S){var O=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],D=S%4*3;return[O[D],O[D+1],O[D+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Gi.Attribute,descriptor:{name:"a_Size",shaderLocation:tc.SIZE,buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?5:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:Gi.Attribute,descriptor:{name:"a_Shape",shaderLocation:tc.SHAPE,buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(p){var g=p.shape,y=g===void 0?2:g,S=u.indexOf(y);return[S]}}})}}]),r}(us);function KO(e){var a=qO();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function qO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var QO=`uniform sampler2D u_texture;
uniform vec2 u_textSize;
uniform float u_opacity : 1;

#pragma include "sdf_2d"
#pragma include "picking"
varying vec2 v_uv; // \u672C\u8EAB\u7684 uv \u5750\u6807
varying vec2 v_Iconuv;
varying float v_opacity;

void main() {

  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  gl_FragColor = texture2D(u_texture, pos);
  gl_FragColor.a *= v_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,qC=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute vec2 a_Uv;

uniform mat4 u_ModelMatrix;

uniform mat2 u_RotateMatrix;
uniform int u_size_unit;

varying vec2 v_uv; // \u672C\u8EAB\u7684 uv \u5750\u6807
varying vec2 v_Iconuv; // icon \u8D34\u56FE\u7684 uv \u5750\u6807

uniform float u_raisingHeight: 0.0;
uniform float u_heightfixed: 0.0;
varying float v_opacity;
// uniform vec2 u_offsets; // shader \u6CE8\u5165


#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  vec3 extrude = a_Extrude;
  v_uv = (a_Extrude.xy + 1.0)/2.0;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;
  v_opacity = opacity;
  float newSize = a_Size;
  if(u_size_unit == 1) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  
  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = (extrude.xy * (newSize) + offsets);

  offset = rotate_matrix(offset,rotation);

  vec3 aPosition = a_Position;

  offset = project_pixel(offset);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // height fixed
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`,JO=function(e){(0,mr.Z)(r,e);var a=KO(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"meter2coord",1),(0,Fe.Z)((0,vr.Z)(o),"isMeter",!1),(0,Fe.Z)((0,vr.Z)(o),"radian",0),(0,Fe.Z)((0,vr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),o.layerService.throttleRenderLayers();return}o.texture=g({data:o.iconService.getCanvas(),mag:gt.LINEAR,min:gt.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128,mipmap:!0})}),o}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.raisingHeight,p=c===void 0?0:c,g=u.heightfixed,y=g===void 0?!1:g,S=u.unit,O=S===void 0?"pixel":S;return this.rendererService.getDirty()&&this.texture.bind(),(0,te.Z)({u_raisingHeight:Number(p),u_heightfixed:Number(y),u_size_unit:Ay[O],u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128]},this.getStyleAttribute())}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),ho)}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:qC,fragmentShader:QO,triangulation:ho,depth:{enable:!1},inject:this.getInject(),cull:{enable:!0,face:Ec(this.mapService.version)}});case 2:return p=y.sent,y.abrupt("return",[p]);case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;this.iconService.off("imageUpdate",this.updateTexture),(u=this.texture)===null||u===void 0||u.destroy()}},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"uv",type:Gi.Attribute,descriptor:{name:"a_Uv",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.shape,S=g[y]||{x:-64,y:-64},O=S.x,D=S.y;return[O,D]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Gi.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:3,update:function(p,g,y,S){var O=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],D=S%4*3;return[O[D],O[D+1],O[D+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Gi.Attribute,descriptor:{name:"a_Size",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?5:g;return Array.isArray(y)?[y[0]]:[y]}}})}}]),r}(us);function h1(e){var a=n2();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function n2(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var QC=`
uniform sampler2D u_texture;
varying vec4 v_color;
varying vec2 v_uv;
varying float v_opacity;
uniform vec2 u_textSize;

#pragma include "picking"

void main(){
      vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
      vec4 textureColor;

      // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
     
      textureColor = texture2D(u_texture, pos);

      // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
      float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
      if(fragmengTocenter >= 0.5) {
            float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
            textureColor.a *= luma;
      }
      
      

      if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
            gl_FragColor= textureColor;
      }else {
            gl_FragColor= step(0.01, textureColor.z) * v_color;
      }
      gl_FragColor.a *= v_opacity;
      if (gl_FragColor.a < 0.01) {
         discard;
      }
      gl_FragColor = filterColor(gl_FragColor);
}
`,lv=`precision highp float;
attribute vec3 a_Position;
attribute vec4 a_Color;
attribute vec2 a_Uv;
attribute float a_Size;
varying vec4 v_color;
varying vec2 v_uv;
varying float v_opacity;
uniform mat4 u_ModelMatrix;


uniform float u_raisingHeight: 0.0;
uniform float u_heightfixed: 0.0;

#pragma include "projection"
#pragma include "picking"

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  v_color = a_Color;
  v_opacity = opacity;
  v_uv = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
   
  vec2 offset = project_pixel(offsets);

  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }


  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`,JC=function(e){(0,mr.Z)(r,e);var a=h1(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),setTimeout(function(){o.layerService.throttleRenderLayers()});return}o.texture=g({data:o.iconService.getCanvas(),mag:gt.LINEAR,min:gt.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128,mipmap:!0})}),o}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=c===void 0?1:c,g=u.offsets,y=g===void 0?[0,0]:g,S=u.raisingHeight,O=S===void 0?0:S,D=u.heightfixed,V=D===void 0?!1:D;return this.rendererService.getDirty()&&this.texture.bind(),(0,te.Z)({u_raisingHeight:Number(O),u_heightfixed:Number(V),u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128]},this.getStyleAttribute())}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:lv,fragmentShader:QC,triangulation:Ey,inject:this.getInject(),depth:{enable:!1},primitive:gt.POINTS});case 2:return p=y.sent,y.abrupt("return",[p]);case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Gi.Attribute,descriptor:{name:"a_Size",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?5:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Gi.Attribute,descriptor:{name:"a_Uv",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.shape,S=g[y]||{x:-64,y:-64},O=S.x,D=S.y;return[O,D]}}})}}]),r}(us);function eA(e){var a=tA();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function tA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var ek=`in vec4 v_color;
out vec4 outputColor;
void main() {
  outputColor = v_color;
}`,tk=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;

layout(std140) uniform u_Common {
  float u_size_scale;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"

void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position, 1.0);
  } else {
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2., -a_Size /2., 0., 0.);
    gl_Position = project_common_position_to_clipspace(project_pos);
  }

  gl_PointSize = a_Size * u_size_scale *  2.0  * u_DevicePixelRatio;
}
`;function i2(e){var a=e.coordinates;return{vertices:(0,Sn.Z)(a),indices:[0],size:a.length}}var a2=function(e){(0,mr.Z)(r,e);var a=eA(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var u=this.getStyleAttribute();return this.uniformBuffers[0].subData({offset:0,data:new Uint8Array(new Float32Array([].concat((0,Sn.Z)(u.u_stroke),(0,Sn.Z)(u.u_offsets),[u.u_opacity,u.u_rotation])).buffer)}),this.uniformBuffers[1].subData({offset:0,data:new Uint8Array(new Float32Array([.5]).buffer)}),(0,te.Z)({u_size_scale:.5},u)}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y;return $t().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return this.layer.triangulation=i2,p=this.rendererService.createBuffer({data:new Float32Array(8),isUBO:!0}),g=this.rendererService.createBuffer({data:new Float32Array(4),isUBO:!0}),this.uniformBuffers.push(p,g),O.next=6,this.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:tk,fragmentShader:ek,triangulation:i2,inject:this.getInject(),depth:{enable:!1},primitive:gt.POINTS,pick:!1});case 6:return y=O.sent,O.abrupt("return",[y]);case 8:case"end":return O.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Gi.Attribute,descriptor:{name:"a_Size",shaderLocation:tc.SIZE,buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(c){var p=c.size,g=p===void 0?1:p;return Array.isArray(g)?[g[0]]:[g]}}})}}]),r}(us);function rk(e){var a=nk();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function nk(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var rA=`
uniform float u_additive;
uniform float u_opacity: 1.0;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
varying vec2 v_exteude;
#pragma include "sdf_2d"
#pragma include "picking"

void main() {

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  gl_FragColor = vec4(v_color.rgb, v_color.a * u_opacity);

  if(u_additive > 0.0) {
    gl_FragColor *= opacity_t;
  } else {
    gl_FragColor.a *= opacity_t;
  }

  if(gl_FragColor.a > 0.0) {
    gl_FragColor = filterColor(gl_FragColor);
  }

  vec2 extrude =  v_exteude;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  gl_FragColor.a *= radar_v;
}
`,ik=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
uniform float u_speed: 1.0;
uniform float u_time;

uniform mat4 u_ModelMatrix;

uniform int u_size_unit;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
varying vec2 v_exteude;

#pragma include "projection"
#pragma include "picking"

void main() {
  vec3 extrude = a_Extrude;
  float newSize = setPickingSize(a_Size);

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2( 
    cos(time), sin(time), 
    -sin(time), cos(time)
  );
  v_exteude = rotateMatrix * a_Extrude.xy;

  // unpack color(vec2)
  v_color = a_Color;

  // anti-alias
  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);

  if(u_size_unit == 1) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  // radius(16-bit)
  v_radius = newSize;

  vec2 offset = (extrude.xy * (newSize));
  vec3 aPosition = a_Position;
  
    // \u4E0D\u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
  offset = project_pixel(offset);
  
  v_data = vec4(extrude.x, extrude.y, antialiasblur, -1.0);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  setPickingColor(a_PickingColor);
}
`,ak=function(e){(0,mr.Z)(r,e);var a=rk(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=c===void 0?1:c,g=u.blend,y=u.speed,S=y===void 0?1:y,O=u.unit,D=O===void 0?"pixel":O;return{u_size_unit:Ay[D],u_speed:S,u_additive:g==="additive"?1:0,u_opacity:p}}},{key:"getAnimateUniforms",value:function(){var u=this.layer.getLayerConfig(),c=u.animateOption,p=c===void 0?{enable:!1}:c;return{u_animate:this.animateOption2Array(p),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),ho)}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:ik,fragmentShader:rA,triangulation:ho,depth:{enable:!1}});case 2:return p=y.sent,y.abrupt("return",[p]);case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"animateOption2Array",value:function(u){return[u.enable?0:1,u.speed||1,u.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Gi.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:3,update:function(c,p,g,y){var S=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],O=y%4*3;return[S[O],S[O+1],S[O+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Gi.Attribute,descriptor:{name:"a_Size",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(c){var p=c.size,g=p===void 0?5:p;return Array.isArray(g)?[g[0]]:[g]}}})}}]),r}(us);function nA(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ok(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function ok(e,a){if(e){if(typeof e=="string")return o2(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o2(e,a)}}function o2(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var sk=function(){function e(a,r,o){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"boxCells",[]);var u=this.boxCells;this.xCellCount=Math.ceil(a/o),this.yCellCount=Math.ceil(r/o);for(var c=0;c<this.xCellCount*this.yCellCount;c++)u.push([]);this.boxKeys=[],this.bboxes=[],this.width=a,this.height=r,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/r,this.boxUid=0}return(0,at.Z)(e,[{key:"insert",value:function(r,o,u,c,p){this.forEachCell(o,u,c,p,this.insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(o),this.bboxes.push(u),this.bboxes.push(c),this.bboxes.push(p)}},{key:"query",value:function(r,o,u,c,p){return this.queryHitTest(r,o,u,c,!1,p)}},{key:"hitTest",value:function(r,o,u,c,p){return this.queryHitTest(r,o,u,c,!0,p)}},{key:"insertBoxCell",value:function(r,o,u,c,p,g){this.boxCells[p].push(g)}},{key:"queryHitTest",value:function(r,o,u,c,p,g){if(u<0||r>this.width||c<0||o>this.height)return p?!1:[];var y=[];if(r<=0&&o<=0&&this.width<=u&&this.height<=c){if(p)return!0;for(var S=0;S<this.boxKeys.length;S++)y.push({key:this.boxKeys[S],x1:this.bboxes[S*4],y1:this.bboxes[S*4+1],x2:this.bboxes[S*4+2],y2:this.bboxes[S*4+3]});return g?y.filter(g):y}var O={hitTest:p,seenUids:{box:{},circle:{}}};return this.forEachCell(r,o,u,c,this.queryCell,y,O,g),p?y.length>0:y}},{key:"queryCell",value:function(r,o,u,c,p,g,y,S){var O=y.seenUids,D=this.boxCells[p];if(D!==null){var V=this.bboxes,H=nA(D),ue;try{for(H.s();!(ue=H.n()).done;){var le=ue.value;if(!O.box[le]){O.box[le]=!0;var we=le*4;if(r<=V[we+2]&&o<=V[we+3]&&u>=V[we+0]&&c>=V[we+1]&&(!S||S(this.boxKeys[le]))){if(y.hitTest)return g.push(!0),!0;g.push({key:this.boxKeys[le],x1:V[we],y1:V[we+1],x2:V[we+2],y2:V[we+3]})}}}}catch(Ne){H.e(Ne)}finally{H.f()}}return!1}},{key:"forEachCell",value:function(r,o,u,c,p,g,y,S){for(var O=this.convertToXCellCoord(r),D=this.convertToYCellCoord(o),V=this.convertToXCellCoord(u),H=this.convertToYCellCoord(c),ue=O;ue<=V;ue++)for(var le=D;le<=H;le++){var we=this.xCellCount*le+ue;if(p.call(this,r,o,u,c,we,g,y,S))return}}},{key:"convertToXCellCoord",value:function(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}},{key:"convertToYCellCoord",value:function(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}}]),e}(),iA=sk,p1=function(){function e(a,r){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"viewportPadding",100),this.width=a,this.height=r,this.viewportPadding=Math.max(a,r),this.grid=new iA(a+this.viewportPadding,r+this.viewportPadding,25),this.screenRightBoundary=a+this.viewportPadding,this.screenBottomBoundary=r+this.viewportPadding,this.gridRightBoundary=a+2*this.viewportPadding,this.gridBottomBoundary=r+2*this.viewportPadding}return(0,at.Z)(e,[{key:"placeCollisionBox",value:function(r){var o=r.x1+r.anchorPointX+this.viewportPadding,u=r.y1+r.anchorPointY+this.viewportPadding,c=r.x2+r.anchorPointX+this.viewportPadding,p=r.y2+r.anchorPointY+this.viewportPadding;return!this.isInsideGrid(o,u,c,p)||this.grid.hitTest(o,u,c,p)?{box:[]}:{box:[o,u,c,p]}}},{key:"insertCollisionBox",value:function(r,o){var u={featureIndex:o};this.grid.insert(u,r[0],r[1],r[2],r[3])}},{key:"project",value:function(r,o,u){var c=Np(o,u,0,1),p=_h(),g=Lp.apply($,(0,Sn.Z)(r));return Gh(p,c,g),{x:(p[0]/p[3]+1)/2*this.width+this.viewportPadding,y:(-p[1]/p[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(r,o,u,c){return u>=0&&r<this.gridRightBoundary&&c>=0&&o<this.gridBottomBoundary}}]),e}();function i0(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=uk(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function uk(e,a){if(e){if(typeof e=="string")return aA(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aA(e,a)}}function aA(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}function oA(e){var a=.5,r=.5;switch(e){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0;break;default:a=.5}switch(e){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0;break;default:r=.5}return{horizontalAlign:a,verticalAlign:r}}function sA(e,a,r,o,u){if(u){var c=e[o],p=c.glyph;if(p)for(var g=a[p].advance*c.scale,y=(e[o].x+g)*u,S=r;S<=o;S++)e[S].x-=y}}function uA(e,a,r,o,u,c,p){var g=(a-r)*u,y=(-o*p+.5)*c,S=i0(e),O;try{for(S.s();!(O=S.n()).done;){var D=O.value;D.x+=g,D.y+=y}}catch(V){S.e(V)}finally{S.f()}}function lA(e,a,r,o,u,c,p){var g=-8,y=0,S=g,O=0,D=e.positionedGlyphs,V=c==="right"?1:c==="left"?0:.5,H=D.length;r.forEach(function(dt){if(dt.split("").forEach(function(Lt){var Wt=a[Lt],qt=0;Wt&&(D.push({glyph:Lt,x:y,y:S+qt,vertical:!1,scale:1,metrics:Wt}),y+=Wt.advance+p)}),D.length!==H){var mt=y-p;O=Math.max(mt,O),sA(D,a,H,D.length-1,V)}y=0,S-=o+5});var ue=oA(u),le=ue.horizontalAlign,we=ue.verticalAlign;uA(D,V,le,we,O,o,r.length);var Ne=S-g;e.top+=-we*Ne,e.bottom=e.top-Ne,e.left+=-le*O,e.right=e.left+O}function lk(e,a,r,o,u,c,p){var g=-8,y=0,S=g,O=0,D=e.positionedGlyphs,V=c==="right"?1:c==="left"?0:.5,H=D.length;r.forEach(function(dt){var mt=a[dt],Lt=0;if(mt&&(D.push({glyph:dt,x:mt.advance/2,y:S+Lt,vertical:!1,scale:1,metrics:mt}),y+=mt.advance+p),D.length!==H){var Wt=y-p;O=Math.max(Wt,O),sA(D,a,H,D.length-1,V)}y=0,S-=o+5});var ue=oA(u),le=ue.horizontalAlign,we=ue.verticalAlign;uA(D,V,le,we,O,o,r.length);var Ne=S-g;e.top+=-we*Ne,e.bottom=e.top-Ne,e.left+=-le*O,e.right=e.left+O}function ck(e,a,r,o,u,c){var p=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[0,0],g=arguments.length>7?arguments[7]:void 0,y=e.split(`
`),S=[],O={positionedGlyphs:S,top:p[1],bottom:p[1],left:p[0],right:p[0],lineCount:y.length,text:e};return g?lk(O,a,y,r,o,u,c):lA(O,a,y,r,o,u,c),S.length?O:!1}function fk(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0],r=arguments.length>2?arguments[2]:void 0,o=e.positionedGlyphs,u=o===void 0?[]:o,c=[],p=i0(u),g;try{for(p.s();!(g=p.n()).done;){var y=g.value,S=y.metrics,O=4,D=S.advance*y.scale/2,V=r?[y.x+D,y.y]:[0,0],H=r?[0,0]:[y.x+D+a[0],y.y+a[1]],ue=(0-O)*y.scale-D+H[0],le=(0-O)*y.scale+H[1],we=ue+S.width*y.scale,Ne=le+S.height*y.scale,dt={x:ue,y:le},mt={x:we,y:le},Lt={x:ue,y:Ne},Wt={x:we,y:Ne};c.push({tl:dt,tr:mt,bl:Lt,br:Wt,tex:S,glyphOffset:V})}}catch(qt){p.e(qt)}finally{p.f()}return c}function cA(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=fA(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function fA(e,a){if(e){if(typeof e=="string")return hA(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hA(e,a)}}function hA(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}function s2(e){var a=hk();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function hk(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var pA=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0
uniform sampler2D u_sdf_map;
uniform float u_gamma_scale : 0.5;
uniform float u_stroke_width : 2.0;
uniform float u_halo_blur : 0.5;
uniform float u_DevicePixelRatio;

varying vec4 v_color;
varying vec4 v_stroke_color;
varying vec2 v_uv;
varying float v_gamma_scale;
varying float v_fontScale;


#pragma include "picking"
void main() {
  // get style data mapping

  // get sdf from atlas
  float dist = texture2D(u_sdf_map, v_uv).a;

  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);

  gl_FragColor = mix(v_color, v_stroke_color, smoothstep(0., 0.5, 1.- dist));

  gl_FragColor.a *= alpha;
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if (gl_FragColor.a < 0.01) {
    discard;
  }
  gl_FragColor = filterColor(gl_FragColor);
}
`,dA=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0
attribute vec3 a_Position;
attribute vec2 a_tex;
attribute vec2 a_textOffsets;
attribute vec4 a_Color;
attribute float a_Size;

uniform vec2 u_sdf_map_size;
uniform mat4 u_ModelMatrix;

uniform float u_raisingHeight: 0.0;

varying vec2 v_uv;
varying float v_gamma_scale;
varying vec4 v_color;
varying vec4 v_stroke_color;
varying float v_fontScale;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];



#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  
  v_uv = a_tex / u_sdf_map_size;



  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_stroke_color = vec4(u_stroke_color.xyz, u_stroke_color.w * opacity);

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  vec2 offset = rotate_matrix(a_textOffsets,rotation);
  
  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));

  gl_Position = vec4(
    projected_position.xy / projected_position.w + offset * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`,a0=wa.isEqual;function vA(e){var a=this,r=e.id,o=[],u=[];if(!a.glyphInfoMap||!a.glyphInfoMap[r])return{vertices:[],indices:[],size:7};var c=a.glyphInfoMap[r].centroid,p=c.length===2?[c[0],c[1],0]:c;return a.glyphInfoMap[r].glyphQuads.forEach(function(g,y){o.push.apply(o,(0,Sn.Z)(p).concat([g.tex.x,g.tex.y+g.tex.height,g.tl.x,g.tl.y],(0,Sn.Z)(p),[g.tex.x+g.tex.width,g.tex.y+g.tex.height,g.tr.x,g.tr.y],(0,Sn.Z)(p),[g.tex.x+g.tex.width,g.tex.y,g.br.x,g.br.y],(0,Sn.Z)(p),[g.tex.x,g.tex.y,g.bl.x,g.bl.y])),u.push(0+y*4,1+y*4,2+y*4,2+y*4,3+y*4,0+y*4)}),{vertices:o,indices:u,size:7}}var gA=function(e){(0,mr.Z)(r,e);var a=s2(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"glyphInfoMap",{}),(0,Fe.Z)((0,vr.Z)(o),"currentZoom",-1),(0,Fe.Z)((0,vr.Z)(o),"textureHeight",0),(0,Fe.Z)((0,vr.Z)(o),"textCount",0),(0,Fe.Z)((0,vr.Z)(o),"preTextStyle",{}),(0,Fe.Z)((0,vr.Z)(o),"mapping",(0,fn.Z)($t().mark(function g(){return $t().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return o.initGlyph(),o.updateTexture(),S.next=4,o.reBuildModel();case 4:case"end":return S.stop()}},g)}))),o}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.stroke,p=c===void 0?"#fff":c,g=u.strokeWidth,y=g===void 0?0:g,S=u.halo,O=S===void 0?.5:S,D=u.gamma,V=D===void 0?2:D,H=u.raisingHeight,ue=H===void 0?0:H,le=this.getFontServiceMapping(),we=this.getFontServiceCanvas();return le&&Object.keys(le).length!==this.textCount&&we&&(this.updateTexture(),this.textCount=Object.keys(le).length),this.preTextStyle=this.getTextStyle(),(0,te.Z)({u_raisingHeight:Number(ue),u_stroke_width:y,u_stroke_color:no(p),u_sdf_map:this.texture,u_halo_blur:O,u_gamma_scale:V,u_sdf_map_size:[(we==null?void 0:we.width)||1,(we==null?void 0:we.height)||1]},this.getStyleAttribute())}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.bindEvent(),this.extent=this.textExtent(),this.rawEncodeData=this.layer.getEncodedData(),this.preTextStyle=this.getTextStyle(),g.abrupt("return",this.buildModels());case 5:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S;return $t().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=this.layer.getLayerConfig(),g=p.textAllowOverlap,y=g===void 0?!1:g,this.initGlyph(),this.updateTexture(),y||this.filterGlyphs(),D.next=6,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:dA,fragmentShader:pA,inject:this.getInject(),triangulation:vA.bind(this),depth:{enable:!1}});case 6:return S=D.sent,D.abrupt("return",[S]);case 8:case"end":return D.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"needUpdate",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S,O,D,V,H,ue,le,we,Ne;return $t().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:if(p=this.getTextStyle(),g=p.textAllowOverlap,y=g===void 0?!1:g,S=p.textAnchor,O=S===void 0?"center":S,D=p.textOffset,V=p.padding,H=p.fontFamily,ue=p.fontWeight,!(!a0(V,this.preTextStyle.padding)||!a0(D,this.preTextStyle.textOffset)||!a0(O,this.preTextStyle.textAnchor)||!a0(H,this.preTextStyle.fontFamily)||!a0(ue,this.preTextStyle.fontWeight))){mt.next=5;break}return mt.next=4,this.mapping();case 4:return mt.abrupt("return",!0);case 5:if(!y){mt.next=7;break}return mt.abrupt("return",!1);case 7:if(le=this.mapService.getZoom(),we=this.mapService.getBounds(),Ne=Ep(this.extent,we),!(Math.abs(this.currentZoom-le)>.5||!Ne||y!==this.preTextStyle.textAllowOverlap)){mt.next=14;break}return mt.next=13,this.reBuildModel();case 13:return mt.abrupt("return",!0);case 14:return mt.abrupt("return",!1);case 15:case"end":return mt.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.layer.off("remapping",this.mapping)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:Gi.Attribute,descriptor:{name:"a_textOffsets",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(c,p,g){return[g[5],g[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Gi.Attribute,descriptor:{name:"a_Size",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(c){var p=c.size,g=p===void 0?12:p;return Array.isArray(g)?[g[0]]:[g]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:Gi.Attribute,descriptor:{name:"a_tex",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(c,p,g){return[g[3],g[4]]}}})}},{key:"bindEvent",value:function(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}},{key:"textExtent",value:function(){var u=this.mapService.getBounds();return bu(u,.5)}},{key:"initTextFont",value:function(){var u=this.getTextStyle(),c=u.fontWeight,p=u.fontFamily,g=this.rawEncodeData,y=[];g.forEach(function(S){var O=S.shape,D=O===void 0?"":O;D=D.toString();var V=cA(D),H;try{for(V.s();!(H=V.n()).done;){var ue=H.value;y.indexOf(ue)===-1&&y.push(ue)}}catch(le){V.e(le)}finally{V.f()}}),this.fontService.setFontOptions({characterSet:y,fontWeight:c,fontFamily:p,iconfont:!1})}},{key:"initIconFontTex",value:function(){var u=this.getTextStyle(),c=u.fontWeight,p=u.fontFamily,g=this.rawEncodeData,y=[];g.forEach(function(S){var O=S.shape,D=O===void 0?"":O;D="".concat(D),y.indexOf(D)===-1&&y.push(D)}),this.fontService.setFontOptions({characterSet:y,fontWeight:c,fontFamily:p,iconfont:!0})}},{key:"getTextStyle",value:function(){var u=this.layer.getLayerConfig(),c=u.fontWeight,p=c===void 0?"400":c,g=u.fontFamily,y=g===void 0?"sans-serif":g,S=u.textAllowOverlap,O=S===void 0?!1:S,D=u.padding,V=D===void 0?[0,0]:D,H=u.textAnchor,ue=H===void 0?"center":H,le=u.textOffset,we=le===void 0?[0,0]:le,Ne=u.opacity,dt=Ne===void 0?1:Ne,mt=u.strokeOpacity,Lt=mt===void 0?1:mt,Wt=u.strokeWidth,qt=Wt===void 0?0:Wt,ir=u.stroke,Sr=ir===void 0?"#000":ir;return{fontWeight:p,fontFamily:y,textAllowOverlap:O,padding:V,textAnchor:ue,textOffset:we,opacity:dt,strokeOpacity:Lt,strokeWidth:qt,stroke:Sr}}},{key:"generateGlyphLayout",value:function(u){var c=this,p=this.getFontServiceMapping(),g=this.layer.getLayerConfig(),y=g.spacing,S=y===void 0?2:y,O=g.textAnchor,D=O===void 0?"center":O,V=g.textOffset,H=this.rawEncodeData;this.glyphInfo=H.map(function(ue){var le=ue.shape,we=le===void 0?"":le,Ne=ue.id,dt=ue.size,mt=dt===void 0?1:dt,Lt=ue.textOffset?ue.textOffset:V||[0,0],Wt=ue.textAnchor?ue.textAnchor:D||"center",qt=ck(we.toString(),p,mt,Wt,"left",S,Lt,u),ir=fk(qt,Lt,!1);return ue.shaping=qt,ue.glyphQuads=ir,ue.centroid=tu(ue.coordinates),ue.originCentroid=ue.version==="GAODE2.x"?tu(ue.originCoordinates):ue.originCentroid=ue.centroid,c.glyphInfoMap[Ne]={shaping:qt,glyphQuads:ir,centroid:tu(ue.coordinates)},ue})}},{key:"getFontServiceMapping",value:function(){var u=this.layer.getLayerConfig(),c=u.fontWeight,p=c===void 0?"400":c,g=u.fontFamily,y=g===void 0?"sans-serif":g;return this.fontService.getMappingByKey("".concat(y,"_").concat(p))}},{key:"getFontServiceCanvas",value:function(){var u=this.layer.getLayerConfig(),c=u.fontWeight,p=c===void 0?"400":c,g=u.fontFamily,y=g===void 0?"sans-serif":g;return this.fontService.getCanvasByKey("".concat(y,"_").concat(p))}},{key:"filterGlyphs",value:function(){var u=this,c=this.layer.getLayerConfig(),p=c.padding,g=p===void 0?[0,0]:p,y=c.textAllowOverlap,S=y===void 0?!1:y;if(!S){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var O=this.rendererService.getViewportSize(),D=O.width,V=O.height,H=new p1(D,V),ue=this.glyphInfo.filter(function(le){var we=le.shaping,Ne=le.id,dt=Ne===void 0?0:Ne,mt=le.version==="GAODE2.x"?le.originCentroid:le.centroid,Lt=le.size,Wt=Lt/16,qt=u.mapService.lngLatToContainer(mt),ir=H.placeCollisionBox({x1:we.left*Wt-g[0],x2:we.right*Wt+g[0],y1:we.top*Wt-g[1],y2:we.bottom*Wt+g[1],anchorPointX:qt.x,anchorPointY:qt.y}),Sr=ir.box;return Sr&&Sr.length?(H.insertCollisionBox(Sr,dt),!0):!1});ue.forEach(function(le){u.glyphInfoMap[le.id]=le})}}},{key:"initGlyph",value:function(){var u=this.layer.getLayerConfig(),c=u.iconfont,p=c===void 0?!1:c;p?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(p)}},{key:"updateTexture",value:function(){var u=this.rendererService.createTexture2D,c=this.getFontServiceCanvas();this.textureHeight=c.height,this.texture&&this.texture.destroy(),this.texture=u({data:c,mag:gt.LINEAR,min:gt.LINEAR,width:c.width,height:c.height})}},{key:"reBuildModel",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.filterGlyphs(),y.next=3,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:dA,fragmentShader:pA,triangulation:vA.bind(this),inject:this.getInject(),depth:{enable:!1}});case 3:p=y.sent,this.layer.models=[p];case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()}]),r}(us),d1={fillImage:JO,fill:KC,radar:ak,image:JC,normal:a2,simplePoint:LO,extrude:$C,text:gA,earthFill:jO,earthExtrude:zO},pk=d1;function dk(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=vk(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function vk(e,a){if(e){if(typeof e=="string")return mA(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mA(e,a)}}function mA(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}function yA(e){var a=_A();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function _A(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var v1=function(e){(0,mr.Z)(r,e);var a=yA(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"type","PointLayer"),(0,Fe.Z)((0,vr.Z)(o),"enableShaderEncodeStyles",["stroke","offsets","opacity","rotation"]),(0,Fe.Z)((0,vr.Z)(o),"enableDataEncodeStyles",["textOffset","textAnchor"]),(0,Fe.Z)((0,vr.Z)(o),"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}}),o}return(0,at.Z)(r,[{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel&&this.layerModel.clearModels(),this.layerModel=new pk[p](this),y.next=5,this.initLayerModels();case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"rebuildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.buildModels();case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getModelTypeWillEmptyData",value:function(){if(this.shapeOption){var u=this.shapeOption,c=u.field,p=u.values,g=this.getLayerConfig(),y=g.shape2d,S=this.iconService.getIconMap();if(c&&(y==null?void 0:y.indexOf(c))!==-1)return"fill";if(p==="text")return"text";if(p&&p instanceof Array){var O=dk(p),D;try{for(O.s();!(D=O.n()).done;){var V=D.value;if(typeof V=="string"&&S.hasOwnProperty(V))return"image"}}catch(H){O.e(H)}finally{O.f()}}}return"normal"}},{key:"getDefaultConfig",value:function(){var u=this.getModelType(),c={fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}};return c[u]}},{key:"getModelType",value:function(){var u=this.getEncodedData(),c=this.getLayerConfig(),p=c.shape2d,g=c.shape3d,y=c.billboard,S=y===void 0?!0:y,O=this.iconService.getIconMap(),D=u.find(function(H){return H.hasOwnProperty("shape")});if(D){var V=D.shape;return V==="dot"?"normal":V==="simple"?"simplePoint":V==="radar"?"radar":this.layerType==="fillImage"||S===!1?"fillImage":(p==null?void 0:p.indexOf(V))!==-1?this.mapService.version==="GLOBEL"?"earthFill":"fill":(g==null?void 0:g.indexOf(V))!==-1?this.mapService.version==="GLOBEL"?"earthExtrude":"extrude":O.hasOwnProperty(V)?"image":"text"}else return this.getModelTypeWillEmptyData()}}]),r}(Xf);function gk(e){var a=xA();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function xA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var bA=`uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_linearColor: 0;

uniform float u_topsurface: 1.0;
uniform float u_sidesurface: 1.0;

varying vec4 v_Color;

#pragma include "picking"

void main() {


     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    gl_FragColor = v_Color;
  

  gl_FragColor = filterColor(gl_FragColor);
}
`,SA=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
attribute vec3 a_uvs;
uniform mat4 u_ModelMatrix;

uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_linearColor: 0;

uniform float u_topsurface: 1.0;
uniform float u_sidesurface: 1.0;

varying vec4 v_Color;
uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_raisingHeight: 0.0;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
  float isSide = a_Position.z;
 float topU = a_uvs[0];
 float topV = 1.0 - a_uvs[1];
 float sidey = a_uvs[2];

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  float lightWeight = calc_lighting(pos);

  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }


 gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    // if(u_sidesurface < 1.0) {
    //   discard;
    // }

    if(u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      v_Color = linearColor;
    } else {
      v_Color = a_Color;
    }

  } else {
    v_Color = a_Color;
  }

  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);


  setPickingColor(a_PickingColor);
}
`,mk=`uniform sampler2D u_texture;
uniform float u_opacity: 1.0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_linearColor: 0;

uniform float u_topsurface: 1.0;
uniform float u_sidesurface: 1.0;

varying vec4 v_Color;
varying vec3 v_uvs;
varying vec2 v_texture_data;


#pragma include "picking"

void main() {
  float opacity = u_opacity;
  float isSide = v_texture_data.x;
  float lightWeight = v_texture_data.y;
  float topU = v_uvs[0];
  float topV = 1.0 - v_uvs[1];
  float sidey = v_uvs[2];
  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {// \u662F\u5426\u662F\u8FB9\u7F18
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }

    if(u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      gl_FragColor = linearColor;
    } else {
      gl_FragColor = v_Color;
    }
  } else {

     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    gl_FragColor = texture2D(u_texture, vec2(topU, topV));
    // gl_FragColor = vec4(1.0, 0., 0., 1.0);
  }
  

  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,u2=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
attribute vec3 a_uvs;
uniform mat4 u_ModelMatrix;

uniform sampler2D u_texture;


uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_topsurface: 1.0;
uniform float u_sidesurface: 1.0;
varying vec4 v_Color;
uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_raisingHeight: 0.0;
uniform float u_linearColor: 0.0;

varying vec2 v_texture_data;
varying vec3 v_uvs;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  float lightWeight = calc_lighting(pos);
  vec4 project_pos = project_position(pos);
  v_uvs = a_uvs;

  v_texture_data = vec2(a_Position.z, lightWeight);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }


    gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));



  setPickingColor(a_PickingColor);
}
`,EA=`uniform float u_opacity: 1.0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_linearColor: 0;

uniform float u_topsurface: 1.0;
uniform float u_sidesurface: 1.0;

varying vec4 v_Color;
varying vec3 v_uvs;
varying vec2 v_texture_data;

#pragma include "picking"

void main() {
  float opacity = u_opacity;
  float isSide =  v_texture_data.x;
  float sidey = v_uvs[2];
  float lightWeight = v_texture_data.y;

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }
    
    if( u_linearColor == 1.0) {
      // side use linear
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      gl_FragColor = linearColor;
    } else {
      // side notuse linear
       gl_FragColor = v_Color;
    }
  } else {
    // top face
    if(u_topsurface < 1.0) {
      discard;
    }
    gl_FragColor = v_Color;
  }

  gl_FragColor.a *= opacity;
  gl_FragColor = filterColorAlpha(gl_FragColor, lightWeight);
}
`,yk=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
attribute vec3 a_uvs;
uniform mat4 u_ModelMatrix;


uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_raisingHeight: 0.0;

varying vec2 v_texture_data;
varying vec3 v_uvs;
varying vec4 v_Color;


#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {


  v_uvs = a_uvs;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
  float lightWeight = calc_lighting(pos);
  v_texture_data = vec2(a_Position.z,lightWeight);

  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  setPickingColor(a_PickingColor);
}
`,wA=function(e){(0,mr.Z)(r,e);var a=gk(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.heightfixed,p=c===void 0?!1:c,g=u.raisingHeight,y=g===void 0?0:g,S=u.topsurface,O=S===void 0?!0:S,D=u.sidesurface,V=D===void 0?!0:D,H=u.sourceColor,ue=u.targetColor,le=0,we=[1,1,1,1],Ne=[1,1,1,1];return H&&ue&&(we=no(H),Ne=no(ue),le=1),(0,te.Z)({u_topsurface:Number(O),u_sidesurface:Number(V),u_heightfixed:Number(p),u_raisingHeight:Number(y),u_linearColor:le,u_sourceColor:we,u_targetColor:Ne,u_texture:this.texture},this.getStyleAttribute())}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.loadTexture();case 2:return g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S,O;return $t().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return p=this.getShaders(),g=p.frag,y=p.vert,S=p.type,V.next=3,this.layer.buildLayerModel({moduleName:S,vertexShader:y,fragmentShader:g,inject:this.getInject(),triangulation:AC});case 3:return O=V.sent,V.abrupt("return",[O]);case 5:case"end":return V.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getShaders",value:function(){var u=this.layer.getLayerConfig(),c=u.pickLight,p=u.mapTexture;return p?{frag:mk,vert:u2,type:"polygonExtrudeTexture"}:c?{frag:EA,vert:yk,type:"polygonExtrudePickLight"}:{frag:bA,vert:SA,type:"polygonExtrude"}}},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy()}},{key:"registerBuiltinAttributes",value:function(){var u=this.layer.getSource().extent,c=u,p=this.layer.coordCenter||this.layer.getSource().center,g=c[2]-c[0],y=c[3]-c[1];if(this.mapService.version==="GAODE2.x"){var S=this.mapService.coordToAMap2RelativeCoordinates([u[0],u[1]],p),O=(0,Vi.Z)(S,2),D=O[0],V=O[1],H=this.mapService.coordToAMap2RelativeCoordinates([u[2],u[3]],p),ue=(0,Vi.Z)(H,2),le=ue[0],we=ue[1];g=le-D,y=we-V,c=[D,V,le,we]}this.styleAttributeService.registerStyleAttribute({name:"uvs",type:Gi.Attribute,descriptor:{name:"a_uvs",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:3,update:function(dt,mt,Lt){var Wt=Lt[0],qt=Lt[1];return[(Wt-c[0])/g,(qt-c[1])/y,Lt[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Gi.Attribute,descriptor:{name:"a_Normal",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:3,update:function(dt,mt,Lt,Wt,qt){return qt}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Gi.Attribute,descriptor:{name:"a_Size",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(dt){var mt=dt.size,Lt=mt===void 0?10:mt;return Array.isArray(Lt)?[Lt[0]]:[Lt]}}})}},{key:"loadTexture",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p=this,g,y,S;return $t().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(g=this.layer.getLayerConfig(),y=g.mapTexture,S=this.rendererService.createTexture2D,this.texture=S({height:0,width:0}),!y){D.next=5;break}return D.abrupt("return",new Promise(function(V,H){var ue=new Image;ue.crossOrigin="anonymous",ue.src=y,ue.onload=function(){return p.texture=S({data:ue,width:ue.width,height:ue.height,wrapS:gt.CLAMP_TO_EDGE,wrapT:gt.CLAMP_TO_EDGE,min:gt.LINEAR,mag:gt.LINEAR}),V(null)},ue.onerror=function(){H(new Error("image load error"))}}));case 5:case"end":return D.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()}]),r}(us);function _k(e){var a=xk();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function xk(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var CA=`
uniform float u_opacity: 1.0;
varying vec4 v_Color;
varying vec2 v_texture_data;


#pragma include "picking"

void main() {

  gl_FragColor = v_Color;
  gl_FragColor = filterColor(gl_FragColor);
}
`,AA=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
uniform mat4 u_ModelMatrix;




varying vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size + (1.0 - a_Position.z) * extrusionBase, 1.0);
  float lightWeight = calc_lighting(pos);
  vec4 project_pos = project_position(pos);
  v_Color = a_Color;
  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`,bk=function(e){(0,mr.Z)(r,e);var a=_k(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getUninforms",value:function(){return(0,te.Z)({},this.getStyleAttribute())}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S,O;return $t().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return p=this.getShaders(),g=p.frag,y=p.vert,S=p.type,V.next=3,this.layer.buildLayerModel({moduleName:S,vertexShader:y,fragmentShader:g,inject:this.getInject(),triangulation:AC});case 3:return O=V.sent,V.abrupt("return",[O]);case 5:case"end":return V.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getShaders",value:function(){return{frag:CA,vert:AA,type:"polygonExtrude"}}},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:Gi.Attribute,descriptor:{name:"a_Normal",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:3,update:function(c,p,g,y,S){return S}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Gi.Attribute,descriptor:{name:"a_Size",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(c){var p=c.size,g=p===void 0?10:p;return Array.isArray(g)?[g[0]]:[g]}}})}}]),r}(us);function Sk(e){var a=Vg();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function Vg(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ek=`varying vec4 v_color;
#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor = filterColor(gl_FragColor);
}
`,wk=`#pragma include "picking"
uniform float u_opacitylinear: 0.0;
uniform float u_dir: 1.0;
varying vec3 v_linear;
varying vec2 v_pos;
varying vec4 v_Color;


void main() {
   gl_FragColor = v_Color;
  if(u_opacitylinear > 0.0) {
    gl_FragColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;
  }
  gl_FragColor = filterColor(gl_FragColor);
}
`,Ck=`attribute vec4 a_Color;
attribute vec3 a_Position;

uniform mat4 u_ModelMatrix;

uniform float u_raisingHeight: 0.0;

varying vec4 v_Color;


#pragma include "projection"
#pragma include "picking"

uniform float u_opacitylinear: 0.0;

attribute vec3 a_linear;
varying vec3 v_linear;
varying vec2 v_pos;

void main() {
  if(u_opacitylinear > 0.0) {
    v_linear = a_linear;
    v_pos = a_Position.xy;
  }
  v_Color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  project_pos.z += u_raisingHeight;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
  setPickingColor(a_PickingColor);
}`,Ak=`attribute vec4 a_Color;
attribute vec3 a_Position;

uniform mat4 u_ModelMatrix;


uniform float u_raisingHeight: 0.0;

varying vec4 v_color;


#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  project_pos.z += u_raisingHeight;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

 
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}

`,Tk=function(e){(0,mr.Z)(r,e);var a=Sk(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.raisingHeight,p=c===void 0?0:c,g=u.opacityLinear,y=g===void 0?{enable:!1,dir:"in"}:g;return(0,te.Z)({u_raisingHeight:Number(p),u_opacitylinear:Number(y.enable),u_dir:y.dir==="in"?1:0},this.getStyleAttribute())}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S,O,D;return $t().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return p=this.getModelParams(),g=p.frag,y=p.vert,S=p.triangulation,O=p.type,this.layer.triangulation=S,H.next=4,this.layer.buildLayerModel({moduleName:O,vertexShader:y,fragmentShader:g,inject:this.getInject(),triangulation:S,primitive:gt.TRIANGLES,depth:{enable:!1}});case 4:return D=H.sent,H.abrupt("return",[D]);case 6:case"end":return H.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this.layer.getLayerConfig(),c=u.opacityLinear,p=c===void 0?{enable:!1,dir:"in"}:c;p.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:Gi.Attribute,descriptor:{name:"a_linear",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:3,update:function(y,S,O){return[O[3],O[4],O[5]]}}})}},{key:"getModelParams",value:function(){var u=this.layer.getLayerConfig(),c=u.opacityLinear,p=c===void 0?{enable:!1}:c;return p.enable?{frag:wk,vert:Ck,type:"polygonLinear",triangulation:JP}:{frag:Ek,vert:Ak,type:"polygonFill",triangulation:Tv}}}]),r}(us);function Mk(e){var a=TA();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function TA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Rk=`
uniform float u_time: 0.0;
uniform float u_opacity: 1.0;

varying vec2 v_uv;

float coast2water_fadedepth = 0.10;
float large_waveheight      = .750; // change to adjust the "heavy" waves
float large_wavesize        = 3.4;  // factor to adjust the large wave size
float small_waveheight      = 0.6;  // change to adjust the small random waves
float small_wavesize        = 0.5;   // factor to ajust the small wave size
float water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)
float water_glossylight_fact= 120.; // range [1..200]
float particle_amount       = 70.;
// vec3 watercolor             = vec3(0.43, 0.60, 0.66); // 'transparent' low-water color (RGB)
// vec3 watercolor2            = vec3(0.06, 0.07, 0.11); // deep-water color (RGB, should be darker than the low-water color)
uniform vec4 u_watercolor;
uniform vec4 u_watercolor2;
vec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights
#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun

uniform sampler2D u_texture1;
uniform sampler2D u_texture2;
uniform sampler2D u_texture3;

  

float hash( float n ) {
    return fract(sin(n)*43758.5453123);
}

// 2d noise function
float noise1( in vec2 x ) {
  vec2 p  = floor(x);
  vec2 f  = smoothstep(0.0, 1.0, fract(x));
  float n = p.x + p.y*57.0;
  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),
    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);
}

float noise(vec2 p) {
    return texture2D(u_texture2,p*vec2(1./256.)).x;
}

vec4 highness(vec2 p) {
    vec4 t = texture2D(u_texture1,fract(p));
    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;
    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);
}

float height_map( vec2 p ) {
    vec4 height=highness(p);
    /*
    height = -0.5+
        0.5*smoothstep(-100.,0.,-height)+
        2.75*smoothstep(0.,2.,height)+
        1.75*smoothstep(2.,4.,height)+
        2.75*smoothstep(4.,16.,height)+
        1.5*smoothstep(16.,1000.,height);
    */

    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );
    //p = p*6.;
    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;
    f += 0.2500*noise( p ); p = m*p*1.32;
    f += 0.1666*noise( p ); p = m*p*1.11;
    f += 0.0834*noise( p ); p = m*p*1.12;
    f += 0.0634*noise( p ); p = m*p*1.13;
    f += 0.0444*noise( p ); p = m*p*1.14;
    f += 0.0274*noise( p ); p = m*p*1.15;
    f += 0.0134*noise( p ); p = m*p*1.16;
    f += 0.0104*noise( p ); p = m*p*1.17;
    f += 0.0084*noise( p );
    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;
        const float FLAT_LEVEL = 0.92525;
        //f = f*0.25+height*0.75;
    if (f<FLAT_LEVEL)
        f = f;
    else
        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase
    return clamp(f, 0., 10.);
}

vec3 plasma_quintic( float x ) {
    x = clamp( x, 0.0, 1.0);
    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3
    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7
    return vec3(
        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),
        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),
        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );
}

vec4 color(vec2 p){
    vec4 c1 = vec4(1.7,1.6,.9,1);
    vec4 c2 = vec4(.2,.94,.1,1);
    vec4 c3 = vec4(.3,.2,.0,1);
    vec4 c4 = vec4(.99,.99,1.6,1);
    vec4 v = highness(p);
    float los = smoothstep(0.1,1.1,v.b);
    float his = smoothstep(3.5,6.5,v.b);
    float ces = smoothstep(1.,5.,v.a);
    vec4 lo = mix(c1,c2,los);
    vec4 hi = mix(c3,c4,his);
    vec4 ce = mix(lo,hi,ces);

    return vec4(plasma_quintic(ces),1).ragb;
}

vec3 terrain_map( vec2 p )
{
  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture2D(u_texture3, fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'
}

const mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );

float water_map( vec2 p, float height ) {
    vec2 p2 = p*large_wavesize;
    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );
    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );

    // coarse crossing 'ocean' waves...
    float f = 0.6000*noise( p );
    f += 0.2500*noise( p*m );
    f += 0.1666*noise( p*m*m );
    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;

    p *= small_wavesize;
    f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<9; i++)
    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }
    
    return wave+f*small_waveheight;
}

float nautic(vec2 p) {
    p *= 18.;
    float f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }
    return pow(1.-f, 5.);
}

float particles(vec2 p) {
    p *= 200.;
    float f = 0.;
    float amp = 1.0, s = 1.5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }
    return pow(f*.35, 7.)*particle_amount;
}

float test_shadow( vec2 xy, float height) {
    vec3 r0 = vec3(xy, height);
    vec3 rd = normalize( light - r0 );
    
    float hit = 1.0;
    float t   = 0.001;
    for (int j=1; j<25; j++)
    {
        vec3 p = r0 + t*rd;
        float h = height_map( p.xy );
        float height_diff = p.z - h;
        if (height_diff<0.0)
        {
            return 0.0;
        }
        t += 0.01+height_diff*.02;
        hit = min(hit, 2.*height_diff/t); // soft shaddow   
    }
    return hit;
}

vec3 CalcTerrain(vec2 uv, float height) {
    vec3 col = terrain_map( uv );
    vec2 iResolution = vec2(512.);
    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);
    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);
    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);
    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);
    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));
    vec3 r0 = vec3(uv, height);
    vec3 rd = normalize( light - r0 );
    float grad = dot(norm, rd);
    col *= grad+pow(grad, 8.);
    float terrainshade = test_shadow( uv, height );
    col = mix(col*.25, col, terrainshade);
    return col;
}


void main() {
  vec3 watercolor = u_watercolor.rgb;
  vec3 watercolor2 = u_watercolor2.rgb;
  vec2 uv = v_uv;
  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)
  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;
  float height = height_map( uv );
  vec3 col;

    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);
    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);
    if (height > level)
    {
        col = CalcTerrain(uv, height);
    }
    if (height <= level)
    {
        vec2 dif = vec2(.0, .01);
        vec2 pos = uv*15. + vec2(u_time*.01);
        float h1 = water_map(pos-dif,waveheight);
        float h2 = water_map(pos+dif,waveheight);
        float h3 = water_map(pos-dif.yx,waveheight);
        float h4 = water_map(pos+dif.yx,waveheight);
        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane
        uv += normwater.xy*.002*(level-height);
        
        col = CalcTerrain(uv, height);

        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);
        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);
        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;
        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));

        vec3 r0 = vec3(uv, WATER_LEVEL);
        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position
        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction
        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          
        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights
        float gradpos  = dot(vec3(0., 0., 1.), rd);
        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          
        float watershade  = test_shadow( uv, level );
        watercolor *= 2.2+watershade;
        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;
        watercolor /= (1.+specular1*1.25);
        watercolor += watershade*specular2*water_specularcolor;
        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));
        
        col = mix(col, watercolor, coastfade);
    }
    

  float opacity = u_opacity;
  gl_FragColor = vec4(col, opacity);  
}
`,g1=`attribute vec2 a_uv;
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;


varying vec2 v_uv;

#pragma include "projection"

void main() {
  v_uv = a_uv;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
}

`,Ik=wa.isNumber,Pk=function(e){(0,mr.Z)(r,e);var a=Mk(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=c===void 0?1:c,g=u.watercolor,y=g===void 0?"#6D99A8":g,S=u.watercolor2,O=S===void 0?"#0F121C":S;return{u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3,u_watercolor:no(y),u_watercolor2:no(O),u_opacity:Ik(p)?p:1}}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.loadTexture(),g.abrupt("return",this.buildModels());case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:g1,fragmentShader:Rk,triangulation:Hb,primitive:gt.TRIANGLES,depth:{enable:!1}});case 2:return p=y.sent,y.abrupt("return",[p]);case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u,c,p;(u=this.texture1)===null||u===void 0||u.destroy(),(c=this.texture2)===null||c===void 0||c.destroy(),(p=this.texture3)===null||p===void 0||p.destroy()}},{key:"registerBuiltinAttributes",value:function(){var u=this.layer.getSource().extent,c=(0,Vi.Z)(u,4),p=c[0],g=c[1],y=c[2],S=c[3],O=y-p,D=S-g;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:Gi.Attribute,descriptor:{name:"a_uv",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(H,ue,le,we){var Ne=H.version==="GAODE2.x"?H.originCoordinates[0][we]:le,dt=(0,Vi.Z)(Ne,2),mt=dt[0],Lt=dt[1];return[(mt-p)/O,(Lt-g)/D]}}})}},{key:"loadTexture",value:function(){var u=this,c=this.rendererService.createTexture2D,p={height:0,width:0};this.texture1=c(p),this.texture2=c(p),this.texture3=c(p),g(function(S){u.texture1=y(S[0]),u.texture2=y(S[1]),u.texture3=y(S[2]),u.layerService.reRender()});function g(S){var O=0,D=[],V=["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"];V.map(function(H){var ue=new Image;ue.crossOrigin="",ue.src=H,D.push(ue),ue.onload=function(){O++,O===3&&S(D)}})}function y(S){return c({data:S,width:S.width,height:S.height,wrapS:gt.MIRRORED_REPEAT,wrapT:gt.MIRRORED_REPEAT,min:gt.LINEAR,mag:gt.LINEAR})}}}]),r}(us);function Ok(e){var a=kk();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function kk(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Fk=`uniform sampler2D u_texture;
uniform float u_time: 0.0;
uniform float u_speed: 1.0;
uniform float u_opacity: 1.0;

varying vec4 v_Color;
varying vec2 v_uv;

float rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }

float water(vec3 p) {
  float t = u_time * u_speed;
  p.z += t * 2.; p.x += t * 2.;
  vec3 c1 = texture2D(u_texture, p.xz / 30.).xyz;
  p.z += t * 3.; p.x += t * 0.52;
  vec3 c2 = texture2D(u_texture, p.xz / 30.).xyz;
  p.z += t * 4.; p.x += t * 0.8;
  vec3 c3 = texture2D(u_texture, p.xz / 30.).xyz;
  c1 += c2 - c3;
  float z = (c1.x + c1.y + c1.z) / 3.;
  return p.y + z / 4.;
}

float map(vec3 p) {
  float d = 100.0;
  d = water(p);
  return d;
}

float intersect(vec3 ro, vec3 rd) {
  float d = 0.0;
  for (int i = 0; i <= 100; i++) {
    float h = map(ro + rd * d);
    if (h < 0.1) return  d;
    d += h;
  }
  return 0.0;
}

vec3 norm(vec3 p) {
  float eps = .1;
  return normalize(vec3(
    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),
    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),
    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))
  ));
} 

float calSpc() {
  vec3 l1 = normalize(vec3(1, 1, 1));
  vec3 ro = vec3(-3, 20, -8);
  vec3 rc = vec3(0, 0, 0);
  vec3 ww = normalize(rc - ro);
  vec3 uu = normalize(cross(vec3(0,1,0), ww));
  vec3 vv = normalize(cross(rc - ro, uu));
  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);
  float d = intersect(ro, rd);
  vec3 p = ro + rd * d;
  vec3 n = norm(p);
  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);
  return spc;
}

void main() {
  float opacity = u_opacity;
  gl_FragColor = v_Color;
  gl_FragColor.a *= opacity;

  float spc = calSpc();
  gl_FragColor += spc * 0.4;
}
`,Dk=`attribute vec4 a_Color;
attribute vec2 a_uv;
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;


varying vec4 v_Color;
varying vec2 v_uv;
uniform float u_opacity: 1.0;


#pragma include "projection"

void main() {
  v_uv = a_uv;

  v_Color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
}

`,MA=wa.isNumber,Lk=function(e){(0,mr.Z)(r,e);var a=Ok(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=c===void 0?1:c,g=u.speed,y=g===void 0?.5:g;return{u_texture:this.texture,u_speed:y,u_opacity:MA(p)?p:1}}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.loadTexture(),g.abrupt("return",this.buildModels());case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:Dk,fragmentShader:Fk,triangulation:Hb,primitive:gt.TRIANGLES,depth:{enable:!1}});case 2:return p=y.sent,y.abrupt("return",[p]);case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy()}},{key:"registerBuiltinAttributes",value:function(){var u=this.layer.getSource().extent,c=(0,Vi.Z)(u,4),p=c[0],g=c[1],y=c[2],S=c[3],O=y-p,D=S-g;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:Gi.Attribute,descriptor:{name:"a_uv",buffer:{usage:gt.STATIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(H,ue,le,we){var Ne=H.version==="GAODE2.x"?H.originCoordinates[0][we]:le,dt=(0,Vi.Z)(Ne,2),mt=dt[0],Lt=dt[1];return[(mt-p)/O,(Lt-g)/D]}}})}},{key:"loadTexture",value:function(){var u=this,c=this.layer.getLayerConfig(),p=c.waterTexture,g=this.rendererService.createTexture2D;this.texture=g({height:0,width:0});var y=new Image;y.crossOrigin="",p?(console.warn("L7 recommend\uFF1Ahttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),y.src=p):y.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",y.onload=function(){u.texture=g({data:y,width:y.width,height:y.height,wrapS:gt.MIRRORED_REPEAT,wrapT:gt.MIRRORED_REPEAT,min:gt.LINEAR,mag:gt.LINEAR}),u.layerService.reRender()}}}]),r}(us),Bk={fill:Tk,line:zC,extrude:wA,text:gA,point_fill:KC,point_image:JC,point_normal:a2,point_extrude:$C,water:Lk,ocean:Pk,extrusion:bk},Iy=Bk;function m1(e){var a=RA();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function RA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Py=function(e){(0,mr.Z)(r,e);var a=m1(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"type","PolygonLayer"),(0,Fe.Z)((0,vr.Z)(o),"enableShaderEncodeStyles",["opacity","extrusionBase","rotation","offsets","stroke"]),o}return(0,at.Z)(r,[{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel=new Iy[p](this),y.next=4,this.initLayerModels();case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getModelType",value:function(){var u,c=this.styleAttributeService.getLayerStyleAttribute("shape"),p=c==null||(u=c.scale)===null||u===void 0?void 0:u.field;return p==="fill"||!p?"fill":p==="extrude"?"extrude":p==="extrusion"?"extrusion":p==="water"?"water":p==="ocean"?"ocean":p==="line"?"line":this.getPointModelType()}},{key:"getPointModelType",value:function(){var u=this.getEncodedData(),c=this.getLayerConfig(),p=c.shape2d,g=c.shape3d,y=this.iconService.getIconMap(),S=u.find(function(D){return D.hasOwnProperty("shape")});if(S){var O=S.shape;return O==="dot"?"point_normal":(p==null?void 0:p.indexOf(O))!==-1?"point_fill":(g==null?void 0:g.indexOf(O))!==-1?"point_extrude":y.hasOwnProperty(O)?"point_image":"text"}else return"fill"}}]),r}(Xf);function Nk(e){var a=zk();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function zk(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var IA=`uniform float u_opacity : 1.0;
uniform vec4 u_color;

void main() {
  gl_FragColor = u_color;
  gl_FragColor.a *= u_opacity;
}
`,Uk=`attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;


#pragma include "projection"

void main() {
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}

`,Zk=wa.isNumber,Vk=function(e){(0,mr.Z)(r,e);var a=Nk(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=c===void 0?1:c,g=u.color,y=g===void 0?"#000":g;return{u_opacity:Zk(p)?p:0,u_color:no(y)}}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.layer.buildLayerModel({moduleName:"mask",vertexShader:Uk,fragmentShader:IA,triangulation:Hb,depth:{enable:!1},pick:!1});case 2:return p=y.sent,y.abrupt("return",[p]);case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;u&&this.layerService.clear()}},{key:"registerBuiltinAttributes",value:function(){return""}}]),r}(us),Hk={fill:Vk},jk=Hk;function PA(e){var a=Wk();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function Wk(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Xv=function(e){(0,mr.Z)(r,e);var a=PA(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"type","MaskLayer"),o}return(0,at.Z)(r,[{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel=new jk[p](this),y.next=4,this.initLayerModels();case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getModelType",value:function(){return"fill"}}]),r}(Xf),o0,Hg,l2,OA,y1,jg,c2,Gk=wa.cloneDeep,Xk=(o0=(0,Tn.b2)(),Hg=(0,Tn.f3)(ut.IMapService),l2=(0,Tn.f3)(ut.IFontService),o0(OA=(y1=function(){function e(){(0,Rt.Z)(this,e),Za(this,"mapService",jg,this),Za(this,"fontService",c2,this)}return(0,at.Z)(e,[{key:"apply",value:function(r,o){var u=this,c=o.styleAttributeService;r.hooks.init.tapPromise("DataMappingPlugin",(0,fn.Z)($t().mark(function p(){return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:r.log(gl.MappingStart,Na.INIT),u.generateMaping(r,{styleAttributeService:c}),r.log(gl.MappingEnd,Na.INIT);case 3:case"end":return y.stop()}},p)}))),r.hooks.beforeRenderData.tapPromise("DataMappingPlugin",function(){var p=(0,fn.Z)($t().mark(function g(y){var S;return $t().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(y){D.next=2;break}return D.abrupt("return",y);case 2:return r.dataState.dataMappingNeedUpdate=!1,r.log(gl.MappingStart,Na.UPDATE),S=u.generateMaping(r,{styleAttributeService:c}),r.log(gl.MappingEnd,Na.UPDATE),D.abrupt("return",S);case 7:case"end":return D.stop()}},g)}));return function(g){return p.apply(this,arguments)}}()),r.hooks.beforeRender.tap("DataMappingPlugin",function(){var p=r.getSource();if(!(r.layerModelNeedUpdate||!p||!p.inited)){var g=c.getLayerStyleAttributes()||[],y=c.getLayerStyleAttribute("filter"),S=p.data.dataArray;if(!(Array.isArray(S)&&S.length===0)){var O=g.filter(function(H){return H.needRemapping}),D=S;if(y!=null&&y.needRemapping&&y!==null&&y!==void 0&&y.scale&&(D=S.filter(function(H){return u.applyAttributeMapping(y,H)[0]})),O.length){var V=u.mapping(r,O,D,r.getEncodedData());r.setEncodedData(V)}}}})}},{key:"generateMaping",value:function(r,o){var u=this,c=o.styleAttributeService,p=c.getLayerStyleAttributes()||[],g=c.getLayerStyleAttribute("filter"),y=r.getSource().data.dataArray,S=y;g!=null&&g.scale&&(S=y.filter(function(D){return u.applyAttributeMapping(g,D)[0]})),S=r.processData(S);var O=this.mapping(r,p,S,void 0);return r.setEncodedData(O),y.length===0&&r.encodeDataLength===0?!1:(r.emit("dataUpdate",null),!0)}},{key:"mapping",value:function(r,o,u,c){var p=this,g=o.filter(function(S){return S.scale!==void 0}).filter(function(S){return S.name!=="filter"}),y=u.map(function(S,O){var D=c?c[O]:{},V=(0,te.Z)({id:S._id,coordinates:S.coordinates},D);return g.forEach(function(H){var ue=p.applyAttributeMapping(H,S);(H.name==="color"||H.name==="stroke")&&(ue=ue.map(function(le){return no(le)})),V[H.name]=Array.isArray(ue)&&ue.length===1?ue[0]:ue,H.name==="shape"&&(V.shape=p.fontService.getIconFontKey(V[H.name]))}),V});return o.forEach(function(S){S.needRemapping=!1}),this.adjustData2Amap2Coordinates(y,r),this.adjustData2SimpleCoordinates(y),y}},{key:"adjustData2Amap2Coordinates",value:function(r,o){var u=this;if(r.length>0&&this.mapService.version==="GAODE2.x"){var c=o.coordCenter||o.getSource().center;r.filter(function(p){return!p.originCoordinates}).map(function(p){p.version="GAODE2.x",p.originCoordinates=Gk(p.coordinates),p.coordinates=u.mapService.coordToAMap2RelativeCoordinates(p.coordinates,c)})}}},{key:"adjustData2SimpleCoordinates",value:function(r){var o=this;r.length>0&&this.mapService.version==="SIMPLE"&&r.map(function(u){u.simpleCoordinate||(u.coordinates=o.unProjectCoordinates(u.coordinates),u.simpleCoordinate=!0)})}},{key:"unProjectCoordinates",value:function(r){var o=this;if(typeof r[0]=="number")return this.mapService.simpleMapCoord.unproject(r);if(r[0]&&r[0][0]instanceof Array){var u=[];return r.map(function(p){var g=[];p.map(function(y){g.push(o.mapService.simpleMapCoord.unproject(y))}),u.push(g)}),u}else{var c=[];return r.map(function(p){c.push(o.mapService.simpleMapCoord.unproject(p))}),c}}},{key:"applyAttributeMapping",value:function(r,o){var u;if(!r.scale)return[];var c=(r==null||(u=r.scale)===null||u===void 0?void 0:u.scalers)||[],p=[];c.forEach(function(y){var S,O=y.field;(o.hasOwnProperty(O)||((S=r.scale)===null||S===void 0?void 0:S.type)==="variable")&&p.push(o[O])});var g=r.mapping?r.mapping(p):[];return g}},{key:"getArrowPoints",value:function(r,o){var u=[o[0]-r[0],o[1]-r[1]],c=eu(u),p=[r[0]+c[0]*1e-4,r[1]+c[1]*1e-4];return p}}]),e}(),jg=ra(y1.prototype,"mapService",[Hg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c2=ra(y1.prototype,"fontService",[l2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y1))||OA),kA,f2,$k=(kA=(0,Tn.b2)(),kA(f2=function(){function e(){(0,Rt.Z)(this,e)}return(0,at.Z)(e,[{key:"apply",value:function(r){var o=this;this.mapService=r.getContainer().get(ut.IMapService),r.hooks.init.tapPromise("DataSourcePlugin",(0,fn.Z)($t().mark(function u(){var c,p,g,y;return $t().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(r.log(gl.SourceInitStart,Na.INIT),c=r.getSource(),c||(p=r.sourceOption||r.defaultSourceConfig,g=p.data,y=p.options,c=new q_(g,y),r.setSource(c)),!c.inited){O.next=8;break}o.updateClusterData(r),r.log(gl.SourceInitEnd,Na.INIT),O.next=10;break;case 8:return O.next=10,new Promise(function(D){c.on("update",function(V){V.type==="inited"&&(o.updateClusterData(r),r.log(gl.SourceInitEnd,Na.INIT)),D(null)})});case 10:case"end":return O.stop()}},u)}))),r.hooks.beforeRenderData.tapPromise("DataSourcePlugin",(0,fn.Z)($t().mark(function u(){var c,p,g;return $t().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return c=o.updateClusterData(r),p=r.dataState.dataSourceNeedUpdate,r.dataState.dataSourceNeedUpdate=!1,g=c||p,S.abrupt("return",g);case 5:case"end":return S.stop()}},u)})))}},{key:"updateClusterData",value:function(r){if(r.isTileLayer||r.tileLayer||!r.getSource())return!1;var o=r.getSource(),u=o.cluster,c=o.clusterOptions.zoom,p=c===void 0?0:c,g=this.mapService.getZoom()-1,y=r.dataState.dataSourceNeedUpdate;return u&&y&&o.updateClusterData(Math.floor(g)),u&&Math.abs(r.clusterZoom-g)>=1?(p!==Math.floor(g)&&o.updateClusterData(Math.floor(g)),r.clusterZoom=g,!0):!1}}]),e}())||f2);function h2(e,a){return e<a?-1:e>a?1:e>=a?0:NaN}function FA(e){return e.length===1&&(e=Yk(e)),{left:function(a,r,o,u){for(o==null&&(o=0),u==null&&(u=a.length);o<u;){var c=o+u>>>1;e(a[c],r)<0?o=c+1:u=c}return o},right:function(a,r,o,u){for(o==null&&(o=0),u==null&&(u=a.length);o<u;){var c=o+u>>>1;e(a[c],r)>0?u=c:o=c+1}return o}}}function Yk(e){return function(a,r){return h2(e(a),r)}}var p2=FA(h2),Kk=p2.right,tB=p2.left,_1=Kk;function DA(e,a){var r=e.length,o=-1,u,c,p;if(a==null){for(;++o<r;)if((u=e[o])!=null&&u>=u)for(c=p=u;++o<r;)(u=e[o])!=null&&(c>u&&(c=u),p<u&&(p=u))}else for(;++o<r;)if((u=a(e[o],o,e))!=null&&u>=u)for(c=p=u;++o<r;)(u=a(e[o],o,e))!=null&&(c>u&&(c=u),p<u&&(p=u));return[c,p]}var x1=Array.prototype,rB=x1.slice,nB=x1.map,d2=Math.sqrt(50),v2=Math.sqrt(10),g2=Math.sqrt(2);function LA(e,a,r){var o,u=-1,c,p,g;if(a=+a,e=+e,r=+r,e===a&&r>0)return[e];if((o=a<e)&&(c=e,e=a,a=c),(g=b1(e,a,r))===0||!isFinite(g))return[];if(g>0)for(e=Math.ceil(e/g),a=Math.floor(a/g),p=new Array(c=Math.ceil(a-e+1));++u<c;)p[u]=(e+u)*g;else for(e=Math.floor(e*g),a=Math.ceil(a*g),p=new Array(c=Math.ceil(e-a+1));++u<c;)p[u]=(e-u)/g;return o&&p.reverse(),p}function b1(e,a,r){var o=(a-e)/Math.max(0,r),u=Math.floor(Math.log(o)/Math.LN10),c=o/Math.pow(10,u);return u>=0?(c>=d2?10:c>=v2?5:c>=g2?2:1)*Math.pow(10,u):-Math.pow(10,-u)/(c>=d2?10:c>=v2?5:c>=g2?2:1)}function m2(e,a,r){var o=Math.abs(a-e)/Math.max(0,r),u=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),c=o/u;return c>=d2?u*=10:c>=v2?u*=5:c>=g2&&(u*=2),a<e?-u:u}function Oy(){var e=identity,a=extent,r=sturges;function o(u){var c,p=u.length,g,y=new Array(p);for(c=0;c<p;++c)y[c]=e(u[c],c,u);var S=a(y),O=S[0],D=S[1],V=r(y,O,D);Array.isArray(V)||(V=tickStep(O,D,V),V=range(Math.ceil(O/V)*V,D,V));for(var H=V.length;V[0]<=O;)V.shift(),--H;for(;V[H-1]>D;)V.pop(),--H;var ue=new Array(H+1),le;for(c=0;c<=H;++c)le=ue[c]=[],le.x0=c>0?V[c-1]:O,le.x1=c<H?V[c]:D;for(c=0;c<p;++c)g=y[c],O<=g&&g<=D&&ue[bisect(V,g,0,H)].push(u[c]);return ue}return o.value=function(u){return arguments.length?(e=typeof u=="function"?u:constant(u),o):e},o.domain=function(u){return arguments.length?(a=typeof u=="function"?u:constant([u[0],u[1]]),o):a},o.thresholds=function(u){return arguments.length?(r=typeof u=="function"?u:Array.isArray(u)?constant(slice.call(u)):constant(u),o):r},o}function iB(e,a,r){return e=map.call(e,number).sort(ascending),Math.ceil((r-a)/(2*(quantile(e,.75)-quantile(e,.25))*Math.pow(e.length,-1/3)))}function aB(e){return e===null?NaN:+e}function Td(e,a,r){if(r==null&&(r=aB),!!(o=e.length)){if((a=+a)<=0||o<2)return+r(e[0],0,e);if(a>=1)return+r(e[o-1],o-1,e);var o,u=(o-1)*a,c=Math.floor(u),p=+r(e[c],c,e),g=+r(e[c+1],c+1,e);return p+(g-p)*(u-c)}}function Wp(e,a,r,o,u){var c=e*e,p=c*e;return((1-3*e+3*c-p)*a+(4-6*c+3*p)*r+(1+3*e+3*c-3*p)*o+p*u)/6}function Wg(e){var a=e.length-1;return function(r){var o=r<=0?r=0:r>=1?(r=1,a-1):Math.floor(r*a),u=e[o],c=e[o+1],p=o>0?e[o-1]:2*u-c,g=o<a-1?e[o+2]:2*c-u;return Wp((r-o/a)*a,p,u,c,g)}}function BA(e){var a=e.length;return function(r){var o=Math.floor(((r%=1)<0?++r:r)*a),u=e[(o+a-1)%a],c=e[o%a],p=e[(o+1)%a],g=e[(o+2)%a];return Wp((r-o/a)*a,u,c,p,g)}}function Gp(e){return function(){return e}}function NA(e,a){return function(r){return e+r*a}}function qk(e,a,r){return e=Math.pow(e,r),a=Math.pow(a,r)-e,r=1/r,function(o){return Math.pow(e+o*a,r)}}function oB(e,a){var r=a-e;return r?NA(e,r>180||r<-180?r-360*Math.round(r/360):r):constant(isNaN(e)?a:e)}function Qk(e){return(e=+e)==1?zA:function(a,r){return r-a?qk(a,r,e):Gp(isNaN(a)?r:a)}}function zA(e,a){var r=a-e;return r?NA(e,r):Gp(isNaN(e)?a:e)}var UA=function e(a){var r=Qk(a);function o(u,c){var p=r((u=Eo(u)).r,(c=Eo(c)).r),g=r(u.g,c.g),y=r(u.b,c.b),S=zA(u.opacity,c.opacity);return function(O){return u.r=p(O),u.g=g(O),u.b=y(O),u.opacity=S(O),u+""}}return o.gamma=e,o}(1);function ZA(e){return function(a){var r=a.length,o=new Array(r),u=new Array(r),c=new Array(r),p,g;for(p=0;p<r;++p)g=Eo(a[p]),o[p]=g.r||0,u[p]=g.g||0,c[p]=g.b||0;return o=e(o),u=e(u),c=e(c),g.opacity=1,function(y){return g.r=o(y),g.g=u(y),g.b=c(y),g+""}}}var Jk=ZA(Wg),sB=ZA(BA),rp="$";function y2(){}y2.prototype=S1.prototype={constructor:y2,has:function(e){return rp+e in this},get:function(e){return this[rp+e]},set:function(e,a){return this[rp+e]=a,this},remove:function(e){var a=rp+e;return a in this&&delete this[a]},clear:function(){for(var e in this)e[0]===rp&&delete this[e]},keys:function(){var e=[];for(var a in this)a[0]===rp&&e.push(a.slice(1));return e},values:function(){var e=[];for(var a in this)a[0]===rp&&e.push(this[a]);return e},entries:function(){var e=[];for(var a in this)a[0]===rp&&e.push({key:a.slice(1),value:this[a]});return e},size:function(){var e=0;for(var a in this)a[0]===rp&&++e;return e},empty:function(){for(var e in this)if(e[0]===rp)return!1;return!0},each:function(e){for(var a in this)a[0]===rp&&e(this[a],a.slice(1),this)}};function S1(e,a){var r=new y2;if(e instanceof y2)e.each(function(g,y){r.set(y,g)});else if(Array.isArray(e)){var o=-1,u=e.length,c;if(a==null)for(;++o<u;)r.set(o,e[o]);else for(;++o<u;)r.set(a(c=e[o],o,e),c)}else if(e)for(var p in e)r.set(p,e[p]);return r}var $v=S1;function uB(){var e=[],a=[],r,o,u;function c(g,y,S,O){if(y>=e.length)return r!=null&&g.sort(r),o!=null?o(g):g;for(var D=-1,V=g.length,H=e[y++],ue,le,we=map(),Ne,dt=S();++D<V;)(Ne=we.get(ue=H(le=g[D])+""))?Ne.push(le):we.set(ue,[le]);return we.each(function(mt,Lt){O(dt,Lt,c(mt,y,S,O))}),dt}function p(g,y){if(++y>e.length)return g;var S,O=a[y-1];return o!=null&&y>=e.length?S=g.entries():(S=[],g.each(function(D,V){S.push({key:V,values:p(D,y)})})),O!=null?S.sort(function(D,V){return O(D.key,V.key)}):S}return u={object:function(g){return c(g,0,eF,VA)},map:function(g){return c(g,0,HA,_2)},entries:function(g){return p(c(g,0,HA,_2),0)},key:function(g){return e.push(g),u},sortKeys:function(g){return a[e.length-1]=g,u},sortValues:function(g){return r=g,u},rollup:function(g){return o=g,u}}}function eF(){return{}}function VA(e,a,r){e[a]=r}function HA(){return map()}function _2(e,a,r){e.set(a,r)}function E1(){}var Gg=$v.prototype;E1.prototype=tF.prototype={constructor:E1,has:Gg.has,add:function(e){return e+="",this[rp+e]=e,this},remove:Gg.remove,clear:Gg.clear,values:Gg.keys,size:Gg.size,empty:Gg.empty,each:Gg.each};function tF(e,a){var r=new E1;if(e instanceof E1)e.each(function(c){r.add(c)});else if(e){var o=-1,u=e.length;if(a==null)for(;++o<u;)r.add(e[o]);else for(;++o<u;)r.add(a(e[o],o,e))}return r}var lB=null,jA=Array.prototype,WA=jA.map,s0=jA.slice;function cv(e,a){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(a).domain(e);break}return this}function x2(e,a){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(a).domain(e);break}return this}var GA={name:"implicit"};function ky(){var e=$v(),a=[],r=[],o=GA;function u(c){var p=c+"",g=e.get(p);if(!g){if(o!==GA)return o;e.set(p,g=a.push(c))}return r[(g-1)%r.length]}return u.domain=function(c){if(!arguments.length)return a.slice();a=[],e=$v();for(var p=-1,g=c.length,y,S;++p<g;)e.has(S=(y=c[p])+"")||e.set(S,a.push(y));return u},u.range=function(c){return arguments.length?(r=s0.call(c),u):r.slice()},u.unknown=function(c){return arguments.length?(o=c,u):o},u.copy=function(){return ky(a,r).unknown(o)},cv.apply(u,arguments),u}function XA(){var e=ordinal().unknown(void 0),a=e.domain,r=e.range,o=[0,1],u,c,p=!1,g=0,y=0,S=.5;delete e.unknown;function O(){var D=a().length,V=o[1]<o[0],H=o[V-0],ue=o[1-V];u=(ue-H)/Math.max(1,D-g+y*2),p&&(u=Math.floor(u)),H+=(ue-H-u*(D-g))*S,c=u*(1-g),p&&(H=Math.round(H),c=Math.round(c));var le=sequence(D).map(function(we){return H+u*we});return r(V?le.reverse():le)}return e.domain=function(D){return arguments.length?(a(D),O()):a()},e.range=function(D){return arguments.length?(o=[+D[0],+D[1]],O()):o.slice()},e.rangeRound=function(D){return o=[+D[0],+D[1]],p=!0,O()},e.bandwidth=function(){return c},e.step=function(){return u},e.round=function(D){return arguments.length?(p=!!D,O()):p},e.padding=function(D){return arguments.length?(g=Math.min(1,y=+D),O()):g},e.paddingInner=function(D){return arguments.length?(g=Math.min(1,D),O()):g},e.paddingOuter=function(D){return arguments.length?(y=+D,O()):y},e.align=function(D){return arguments.length?(S=Math.max(0,Math.min(1,D)),O()):S},e.copy=function(){return XA(a(),o).round(p).paddingInner(g).paddingOuter(y).align(S)},initRange.apply(O(),arguments)}function $A(e){var a=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return $A(a())},e}function cB(){return $A(XA.apply(null,arguments).paddingInner(1))}function fB(e,a){return(isNumberArray(a)?numberArray:YA)(e,a)}function YA(e,a){var r=a?a.length:0,o=e?Math.min(r,e.length):0,u=new Array(o),c=new Array(r),p;for(p=0;p<o;++p)u[p]=C1(e[p],a[p]);for(;p<r;++p)c[p]=a[p];return function(g){for(p=0;p<o;++p)c[p]=u[p](g);return c}}function hB(e,a){var r=new Date;return e=+e,a=+a,function(o){return r.setTime(e*(1-o)+a*o),r}}function w1(e,a){return e=+e,a=+a,function(r){return e*(1-r)+a*r}}function rF(e,a){var r={},o={},u;(e===null||typeof e!="object")&&(e={}),(a===null||typeof a!="object")&&(a={});for(u in a)u in e?r[u]=C1(e[u],a[u]):o[u]=a[u];return function(c){for(u in r)o[u]=r[u](c);return o}}var b2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,S2=new RegExp(b2.source,"g");function nF(e){return function(){return e}}function iF(e){return function(a){return e(a)+""}}function aF(e,a){var r=b2.lastIndex=S2.lastIndex=0,o,u,c,p=-1,g=[],y=[];for(e=e+"",a=a+"";(o=b2.exec(e))&&(u=S2.exec(a));)(c=u.index)>r&&(c=a.slice(r,c),g[p]?g[p]+=c:g[++p]=c),(o=o[0])===(u=u[0])?g[p]?g[p]+=u:g[++p]=u:(g[++p]=null,y.push({i:p,x:w1(o,u)})),r=S2.lastIndex;return r<a.length&&(c=a.slice(r),g[p]?g[p]+=c:g[++p]=c),g.length<2?y[0]?iF(y[0].x):nF(a):(a=y.length,function(S){for(var O=0,D;O<a;++O)g[(D=y[O]).i]=D.x(S);return g.join("")})}function KA(e,a){a||(a=[]);var r=e?Math.min(a.length,e.length):0,o=a.slice(),u;return function(c){for(u=0;u<r;++u)o[u]=e[u]*(1-c)+a[u]*c;return o}}function qA(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function C1(e,a){var r=typeof a,o;return a==null||r==="boolean"?Gp(a):(r==="number"?w1:r==="string"?(o=ii(a))?(a=o,UA):aF:a instanceof ii?UA:a instanceof Date?hB:qA(a)?KA:Array.isArray(a)?YA:typeof a.valueOf!="function"&&typeof a.toString!="function"||isNaN(a)?rF:w1)(e,a)}function QA(e,a){return e=+e,a=+a,function(r){return Math.round(e*(1-r)+a*r)}}function oF(e){return function(){return e}}function sF(e){return+e}var JA=[0,1];function af(e){return e}function E2(e,a){return(a-=e=+e)?function(r){return(r-e)/a}:oF(isNaN(a)?NaN:.5)}function eT(e){var a=e[0],r=e[e.length-1],o;return a>r&&(o=a,a=r,r=o),function(u){return Math.max(a,Math.min(r,u))}}function uF(e,a,r){var o=e[0],u=e[1],c=a[0],p=a[1];return u<o?(o=E2(u,o),c=r(p,c)):(o=E2(o,u),c=r(c,p)),function(g){return c(o(g))}}function lF(e,a,r){var o=Math.min(e.length,a.length)-1,u=new Array(o),c=new Array(o),p=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),a=a.slice().reverse());++p<o;)u[p]=E2(e[p],e[p+1]),c[p]=r(a[p],a[p+1]);return function(g){var y=_1(e,g,1,o)-1;return c[y](u[y](g))}}function A1(e,a){return a.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function w2(){var e=JA,a=JA,r=C1,o,u,c,p=af,g,y,S;function O(){return g=Math.min(e.length,a.length)>2?lF:uF,y=S=null,D}function D(V){return isNaN(V=+V)?c:(y||(y=g(e.map(o),a,r)))(o(p(V)))}return D.invert=function(V){return p(u((S||(S=g(a,e.map(o),w1)))(V)))},D.domain=function(V){return arguments.length?(e=WA.call(V,sF),p===af||(p=eT(e)),O()):e.slice()},D.range=function(V){return arguments.length?(a=s0.call(V),O()):a.slice()},D.rangeRound=function(V){return a=s0.call(V),r=QA,O()},D.clamp=function(V){return arguments.length?(p=V?eT(e):af,D):p!==af},D.interpolate=function(V){return arguments.length?(r=V,O()):r},D.unknown=function(V){return arguments.length?(c=V,D):c},function(V,H){return o=V,u=H,O()}}function tT(e,a){return w2()(e,a)}var pB=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function T1(e){if(!(a=pB.exec(e)))throw new Error("invalid format: "+e);var a;return new C2({fill:a[1],align:a[2],sign:a[3],symbol:a[4],zero:a[5],width:a[6],comma:a[7],precision:a[8]&&a[8].slice(1),trim:a[9],type:a[10]})}T1.prototype=C2.prototype;function C2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}C2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function rT(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function M1(e,a){if((r=(e=a?e.toExponential(a-1):e.toExponential()).indexOf("e"))<0)return null;var r,o=e.slice(0,r);return[o.length>1?o[0]+o.slice(2):o,+e.slice(r+1)]}function Xg(e){return e=M1(Math.abs(e)),e?e[1]:NaN}function nT(e,a){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Xg(a)/3)))*3-Xg(Math.abs(e)))}function cF(e,a){return function(r,o){for(var u=r.length,c=[],p=0,g=e[0],y=0;u>0&&g>0&&(y+g+1>o&&(g=Math.max(1,o-y)),c.push(r.substring(u-=g,u+g)),!((y+=g+1)>o));)g=e[p=(p+1)%e.length];return c.reverse().join(a)}}function Fy(e){return function(a){return a.replace(/[0-9]/g,function(r){return e[+r]})}}function fF(e){e:for(var a=e.length,r=1,o=-1,u;r<a;++r)switch(e[r]){case".":o=u=r;break;case"0":o===0&&(o=r),u=r;break;default:if(!+e[r])break e;o>0&&(o=0);break}return o>0?e.slice(0,o)+e.slice(u+1):e}var iT;function hF(e,a){var r=M1(e,a);if(!r)return e+"";var o=r[0],u=r[1],c=u-(iT=Math.max(-8,Math.min(8,Math.floor(u/3)))*3)+1,p=o.length;return c===p?o:c>p?o+new Array(c-p+1).join("0"):c>0?o.slice(0,c)+"."+o.slice(c):"0."+new Array(1-c).join("0")+M1(e,Math.max(0,a+c-1))[0]}function A2(e,a){var r=M1(e,a);if(!r)return e+"";var o=r[0],u=r[1];return u<0?"0."+new Array(-u).join("0")+o:o.length>u+1?o.slice(0,u+1)+"."+o.slice(u+1):o+new Array(u-o.length+2).join("0")}var aT={"%":function(e,a){return(e*100).toFixed(a)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:rT,e:function(e,a){return e.toExponential(a)},f:function(e,a){return e.toFixed(a)},g:function(e,a){return e.toPrecision(a)},o:function(e){return Math.round(e).toString(8)},p:function(e,a){return A2(e*100,a)},r:A2,s:hF,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function Dy(e){return e}var T2=Array.prototype.map,R1=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function pF(e){var a=e.grouping===void 0||e.thousands===void 0?Dy:cF(T2.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",o=e.currency===void 0?"":e.currency[1]+"",u=e.decimal===void 0?".":e.decimal+"",c=e.numerals===void 0?Dy:Fy(T2.call(e.numerals,String)),p=e.percent===void 0?"%":e.percent+"",g=e.minus===void 0?"-":e.minus+"",y=e.nan===void 0?"NaN":e.nan+"";function S(D){D=T1(D);var V=D.fill,H=D.align,ue=D.sign,le=D.symbol,we=D.zero,Ne=D.width,dt=D.comma,mt=D.precision,Lt=D.trim,Wt=D.type;Wt==="n"?(dt=!0,Wt="g"):aT[Wt]||(mt===void 0&&(mt=12),Lt=!0,Wt="g"),(we||V==="0"&&H==="=")&&(we=!0,V="0",H="=");var qt=le==="$"?r:le==="#"&&/[boxX]/.test(Wt)?"0"+Wt.toLowerCase():"",ir=le==="$"?o:/[%p]/.test(Wt)?p:"",Sr=aT[Wt],Br=/[defgprs%]/.test(Wt);mt=mt===void 0?6:/[gprs]/.test(Wt)?Math.max(1,Math.min(21,mt)):Math.max(0,Math.min(20,mt));function Jr(en){var Kn=qt,si=ir,Pi,so,bs;if(Wt==="c")si=Sr(en)+si,en="";else{en=+en;var Ss=en<0||1/en<0;if(en=isNaN(en)?y:Sr(Math.abs(en),mt),Lt&&(en=fF(en)),Ss&&+en==0&&ue!=="+"&&(Ss=!1),Kn=(Ss?ue==="("?ue:g:ue==="-"||ue==="("?"":ue)+Kn,si=(Wt==="s"?R1[8+iT/3]:"")+si+(Ss&&ue==="("?")":""),Br){for(Pi=-1,so=en.length;++Pi<so;)if(bs=en.charCodeAt(Pi),48>bs||bs>57){si=(bs===46?u+en.slice(Pi+1):en.slice(Pi))+si,en=en.slice(0,Pi);break}}}dt&&!we&&(en=a(en,1/0));var Ru=Kn.length+en.length+si.length,Iu=Ru<Ne?new Array(Ne-Ru+1).join(V):"";switch(dt&&we&&(en=a(Iu+en,Iu.length?Ne-si.length:1/0),Iu=""),H){case"<":en=Kn+en+si+Iu;break;case"=":en=Kn+Iu+en+si;break;case"^":en=Iu.slice(0,Ru=Iu.length>>1)+Kn+en+si+Iu.slice(Ru);break;default:en=Iu+Kn+en+si;break}return c(en)}return Jr.toString=function(){return D+""},Jr}function O(D,V){var H=S((D=T1(D),D.type="f",D)),ue=Math.max(-8,Math.min(8,Math.floor(Xg(V)/3)))*3,le=Math.pow(10,-ue),we=R1[8+ue/3];return function(Ne){return H(le*Ne)+we}}return{format:S,formatPrefix:O}}var I1,$g,M2;oT({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function oT(e){return I1=pF(e),$g=I1.format,M2=I1.formatPrefix,I1}function sT(e,a){return e=Math.abs(e),a=Math.abs(a)-e,Math.max(0,Xg(a)-Xg(e))+1}function uT(e){return Math.max(0,-Xg(Math.abs(e)))}function P1(e,a,r,o){var u=m2(e,a,r),c;switch(o=T1(o==null?",f":o),o.type){case"s":{var p=Math.max(Math.abs(e),Math.abs(a));return o.precision==null&&!isNaN(c=nT(u,p))&&(o.precision=c),M2(o,p)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(c=sT(u,Math.max(Math.abs(e),Math.abs(a))))&&(o.precision=c-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(c=uT(u))&&(o.precision=c-(o.type==="%")*2);break}}return $g(o)}function u0(e){var a=e.domain;return e.ticks=function(r){var o=a();return LA(o[0],o[o.length-1],r==null?10:r)},e.tickFormat=function(r,o){var u=a();return P1(u[0],u[u.length-1],r==null?10:r,o)},e.nice=function(r){r==null&&(r=10);var o=a(),u=0,c=o.length-1,p=o[u],g=o[c],y;return g<p&&(y=p,p=g,g=y,y=u,u=c,c=y),y=b1(p,g,r),y>0?(p=Math.floor(p/y)*y,g=Math.ceil(g/y)*y,y=b1(p,g,r)):y<0&&(p=Math.ceil(p*y)/y,g=Math.floor(g*y)/y,y=b1(p,g,r)),y>0?(o[u]=Math.floor(p/y)*y,o[c]=Math.ceil(g/y)*y,a(o)):y<0&&(o[u]=Math.ceil(p*y)/y,o[c]=Math.floor(g*y)/y,a(o)),e},e}function lT(){var e=tT(af,af);return e.copy=function(){return A1(e,lT())},cv.apply(e,arguments),u0(e)}function dF(e){var a;function r(o){return isNaN(o=+o)?a:o}return r.invert=r,r.domain=r.range=function(o){return arguments.length?(e=map.call(o,number),r):e.slice()},r.unknown=function(o){return arguments.length?(a=o,r):a},r.copy=function(){return dF(e).unknown(a)},e=arguments.length?map.call(e,number):[0,1],linearish(r)}function Ly(e,a){e=e.slice();var r=0,o=e.length-1,u=e[r],c=e[o],p;return c<u&&(p=r,r=o,o=p,p=u,u=c,c=p),e[r]=a.floor(u),e[o]=a.ceil(c),e}function Yv(e){return Math.log(e)}function Yg(e){return Math.exp(e)}function vF(e){return-Math.log(-e)}function cT(e){return-Math.exp(-e)}function fT(e){return isFinite(e)?+("1e"+e):e<0?0:e}function R2(e){return e===10?fT:e===Math.E?Math.exp:function(a){return Math.pow(e,a)}}function hT(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),function(a){return Math.log(a)/e})}function pT(e){return function(a){return-e(-a)}}function gF(e){var a=e(Yv,Yg),r=a.domain,o=10,u,c;function p(){return u=hT(o),c=R2(o),r()[0]<0?(u=pT(u),c=pT(c),e(vF,cT)):e(Yv,Yg),a}return a.base=function(g){return arguments.length?(o=+g,p()):o},a.domain=function(g){return arguments.length?(r(g),p()):r()},a.ticks=function(g){var y=r(),S=y[0],O=y[y.length-1],D;(D=O<S)&&(V=S,S=O,O=V);var V=u(S),H=u(O),ue,le,we,Ne=g==null?10:+g,dt=[];if(!(o%1)&&H-V<Ne){if(V=Math.round(V)-1,H=Math.round(H)+1,S>0){for(;V<H;++V)for(le=1,ue=c(V);le<o;++le)if(we=ue*le,!(we<S)){if(we>O)break;dt.push(we)}}else for(;V<H;++V)for(le=o-1,ue=c(V);le>=1;--le)if(we=ue*le,!(we<S)){if(we>O)break;dt.push(we)}}else dt=LA(V,H,Math.min(H-V,Ne)).map(c);return D?dt.reverse():dt},a.tickFormat=function(g,y){if(y==null&&(y=o===10?".0e":","),typeof y!="function"&&(y=$g(y)),g===1/0)return y;g==null&&(g=10);var S=Math.max(1,o*g/a.ticks().length);return function(O){var D=O/c(Math.round(u(O)));return D*o<o-.5&&(D*=o),D<=S?y(O):""}},a.nice=function(){return r(Ly(r(),{floor:function(g){return c(Math.floor(u(g)))},ceil:function(g){return c(Math.ceil(u(g)))}}))},a}function dT(){var e=gF(w2()).domain([1,10]);return e.copy=function(){return A1(e,dT()).base(e.base())},cv.apply(e,arguments),e}function vT(e){return function(a){return Math.sign(a)*Math.log1p(Math.abs(a/e))}}function gT(e){return function(a){return Math.sign(a)*Math.expm1(Math.abs(a))*e}}function mT(e){var a=1,r=e(vT(a),gT(a));return r.constant=function(o){return arguments.length?e(vT(a=+o),gT(a)):a},linearish(r)}function mF(){var e=mT(transformer());return e.copy=function(){return copy(e,mF()).constant(e.constant())},initRange.apply(e,arguments)}function yT(e){return function(a){return a<0?-Math.pow(-a,e):Math.pow(a,e)}}function yF(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function _F(e){return e<0?-e*e:e*e}function xF(e){var a=e(af,af),r=1;function o(){return r===1?e(af,af):r===.5?e(yF,_F):e(yT(r),yT(1/r))}return a.exponent=function(u){return arguments.length?(r=+u,o()):r},u0(a)}function I2(){var e=xF(w2());return e.copy=function(){return A1(e,I2()).exponent(e.exponent())},cv.apply(e,arguments),e}function dB(){return I2.apply(null,arguments).exponent(.5)}function _T(){var e=[],a=[],r=[],o;function u(){var p=0,g=Math.max(1,a.length);for(r=new Array(g-1);++p<g;)r[p-1]=Td(e,p/g);return c}function c(p){return isNaN(p=+p)?o:a[_1(r,p)]}return c.invertExtent=function(p){var g=a.indexOf(p);return g<0?[NaN,NaN]:[g>0?r[g-1]:e[0],g<r.length?r[g]:e[e.length-1]]},c.domain=function(p){if(!arguments.length)return e.slice();e=[];for(var g=0,y=p.length,S;g<y;++g)S=p[g],S!=null&&!isNaN(S=+S)&&e.push(S);return e.sort(h2),u()},c.range=function(p){return arguments.length?(a=s0.call(p),u()):a.slice()},c.unknown=function(p){return arguments.length?(o=p,c):o},c.quantiles=function(){return r.slice()},c.copy=function(){return _T().domain(e).range(a).unknown(o)},cv.apply(c,arguments)}function xT(){var e=0,a=1,r=1,o=[.5],u=[0,1],c;function p(y){return y<=y?u[_1(o,y,0,r)]:c}function g(){var y=-1;for(o=new Array(r);++y<r;)o[y]=((y+1)*a-(y-r)*e)/(r+1);return p}return p.domain=function(y){return arguments.length?(e=+y[0],a=+y[1],g()):[e,a]},p.range=function(y){return arguments.length?(r=(u=s0.call(y)).length-1,g()):u.slice()},p.invertExtent=function(y){var S=u.indexOf(y);return S<0?[NaN,NaN]:S<1?[e,o[0]]:S>=r?[o[r-1],a]:[o[S-1],o[S]]},p.unknown=function(y){return arguments.length&&(c=y),p},p.thresholds=function(){return o.slice()},p.copy=function(){return xT().domain([e,a]).range(u).unknown(c)},cv.apply(u0(p),arguments)}function bT(){var e=[.5],a=[0,1],r,o=1;function u(c){return c<=c?a[_1(e,c,0,o)]:r}return u.domain=function(c){return arguments.length?(e=s0.call(c),o=Math.min(e.length,a.length-1),u):e.slice()},u.range=function(c){return arguments.length?(a=s0.call(c),o=Math.min(e.length,a.length-1),u):a.slice()},u.invertExtent=function(c){var p=a.indexOf(c);return[e[p-1],e[p]]},u.unknown=function(c){return arguments.length?(r=c,u):r},u.copy=function(){return bT().domain(e).range(a).unknown(r)},cv.apply(u,arguments)}var P2=new Date,O2=new Date;function Ef(e,a,r,o){function u(c){return e(c=arguments.length===0?new Date:new Date(+c)),c}return u.floor=function(c){return e(c=new Date(+c)),c},u.ceil=function(c){return e(c=new Date(c-1)),a(c,1),e(c),c},u.round=function(c){var p=u(c),g=u.ceil(c);return c-p<g-c?p:g},u.offset=function(c,p){return a(c=new Date(+c),p==null?1:Math.floor(p)),c},u.range=function(c,p,g){var y=[],S;if(c=u.ceil(c),g=g==null?1:Math.floor(g),!(c<p)||!(g>0))return y;do y.push(S=new Date(+c)),a(c,g),e(c);while(S<c&&c<p);return y},u.filter=function(c){return Ef(function(p){if(p>=p)for(;e(p),!c(p);)p.setTime(p-1)},function(p,g){if(p>=p)if(g<0)for(;++g<=0;)for(;a(p,-1),!c(p););else for(;--g>=0;)for(;a(p,1),!c(p););})},r&&(u.count=function(c,p){return P2.setTime(+c),O2.setTime(+p),e(P2),e(O2),Math.floor(r(P2,O2))},u.every=function(c){return c=Math.floor(c),!isFinite(c)||!(c>0)?null:c>1?u.filter(o?function(p){return o(p)%c===0}:function(p){return u.count(0,p)%c===0}):u}),u}var O1=Ef(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,a){e.setFullYear(e.getFullYear()+a)},function(e,a){return a.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});O1.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Ef(function(a){a.setFullYear(Math.floor(a.getFullYear()/e)*e),a.setMonth(0,1),a.setHours(0,0,0,0)},function(a,r){a.setFullYear(a.getFullYear()+r*e)})};var l0=O1,bF=O1.range,Kg=Ef(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,a){e.setMonth(e.getMonth()+a)},function(e,a){return a.getMonth()-e.getMonth()+(a.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()}),SF=Kg,vB=Kg.range,k1=1e3,By=6e4,k2=36e5,qg=864e5,F2=6048e5;function Kv(e){return Ef(function(a){a.setDate(a.getDate()-(a.getDay()+7-e)%7),a.setHours(0,0,0,0)},function(a,r){a.setDate(a.getDate()+r*7)},function(a,r){return(r-a-(r.getTimezoneOffset()-a.getTimezoneOffset())*By)/F2})}var Ny=Kv(0),c0=Kv(1),D2=Kv(2),L2=Kv(3),f0=Kv(4),EF=Kv(5),ST=Kv(6),wF=Ny.range,gB=c0.range,mB=D2.range,yB=L2.range,_B=f0.range,xB=EF.range,bB=ST.range,ET=Ef(function(e){e.setHours(0,0,0,0)},function(e,a){e.setDate(e.getDate()+a)},function(e,a){return(a-e-(a.getTimezoneOffset()-e.getTimezoneOffset())*By)/qg},function(e){return e.getDate()-1}),B2=ET,SB=ET.range,N2=Ef(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*k1-e.getMinutes()*By)},function(e,a){e.setTime(+e+a*k2)},function(e,a){return(a-e)/k2},function(e){return e.getHours()}),wT=N2,l8=N2.range,Kf=Ef(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*k1)},function(e,a){e.setTime(+e+a*By)},function(e,a){return(a-e)/By},function(e){return e.getMinutes()}),Ch=Kf,CF=Kf.range,CT=Ef(function(e){e.setTime(e-e.getMilliseconds())},function(e,a){e.setTime(+e+a*k1)},function(e,a){return(a-e)/k1},function(e){return e.getUTCSeconds()}),AF=CT,zy=CT.range,Md=Ef(function(){},function(e,a){e.setTime(+e+a)},function(e,a){return a-e});Md.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ef(function(a){a.setTime(Math.floor(a/e)*e)},function(a,r){a.setTime(+a+r*e)},function(a,r){return(r-a)/e}):Md};var z2=Md,AT=Md.range;function qv(e){return Ef(function(a){a.setUTCDate(a.getUTCDate()-(a.getUTCDay()+7-e)%7),a.setUTCHours(0,0,0,0)},function(a,r){a.setUTCDate(a.getUTCDate()+r*7)},function(a,r){return(r-a)/F2})}var U2=qv(0),Uy=qv(1),TF=qv(2),TT=qv(3),Qg=qv(4),MF=qv(5),RF=qv(6),EB=U2.range,wB=Uy.range,CB=TF.range,AB=TT.range,TB=Qg.range,MB=MF.range,RB=RF.range,MT=Ef(function(e){e.setUTCHours(0,0,0,0)},function(e,a){e.setUTCDate(e.getUTCDate()+a)},function(e,a){return(a-e)/qg},function(e){return e.getUTCDate()-1}),RT=MT,IB=MT.range,Z2=Ef(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,a){e.setUTCFullYear(e.getUTCFullYear()+a)},function(e,a){return a.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});Z2.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Ef(function(a){a.setUTCFullYear(Math.floor(a.getUTCFullYear()/e)*e),a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0)},function(a,r){a.setUTCFullYear(a.getUTCFullYear()+r*e)})};var Zy=Z2,PB=Z2.range;function IT(e){if(0<=e.y&&e.y<100){var a=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return a.setFullYear(e.y),a}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function V2(e){if(0<=e.y&&e.y<100){var a=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return a.setUTCFullYear(e.y),a}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Vy(e,a,r){return{y:e,m:a,d:r,H:0,M:0,S:0,L:0}}function IF(e){var a=e.dateTime,r=e.date,o=e.time,u=e.periods,c=e.days,p=e.shortDays,g=e.months,y=e.shortMonths,S=Hy(u),O=jy(u),D=Hy(c),V=jy(c),H=Hy(p),ue=jy(p),le=Hy(g),we=jy(g),Ne=Hy(y),dt=jy(y),mt={a:Ss,A:Ru,b:Iu,B:eh,c:null,d:LT,e:LT,f:XF,g:UT,G:nD,H:GF,I:BT,j:FB,L:NT,m:$F,M:YF,p:nR,q:Ox,Q:XT,s:$T,S:KF,u:qF,U:QF,V:DB,w:JF,W:eD,x:null,X:null,y:tD,Y:rD,Z:iD,"%":GT},Lt={a:u4,A:l4,b:bl,B:cp,c:null,d:ZT,e:ZT,f:sD,g:D1,G:vD,H:aD,I:LB,j:oD,L:VT,m:uD,M:lD,p:iR,q:aR,Q:XT,s:$T,S:cD,u:fD,U:hD,V:HT,w:jT,W:WT,x:null,X:null,y:F1,Y:dD,Z:gD,"%":GT},Wt={a:Jr,A:en,b:Kn,B:si,c:Pi,d:j2,e:j2,f:VF,g:OT,G:H2,H:DT,I:DT,j:FT,L:ZF,m:NF,M:zF,p:Br,q:BF,Q:jF,s:WF,S:UF,u:FF,U:DF,V:kB,w:kF,W:LF,x:so,X:bs,y:OT,Y:H2,Z:kT,"%":HF};mt.x=qt(r,mt),mt.X=qt(o,mt),mt.c=qt(a,mt),Lt.x=qt(r,Lt),Lt.X=qt(o,Lt),Lt.c=qt(a,Lt);function qt(Va,fs){return function(Zs){var Ui=[],fp=-1,Yu=0,Qp=Va.length,Jp,h_,o8;for(Zs instanceof Date||(Zs=new Date(+Zs));++fp<Qp;)Va.charCodeAt(fp)===37&&(Ui.push(Va.slice(Yu,fp)),(h_=PT[Jp=Va.charAt(++fp)])!=null?Jp=Va.charAt(++fp):h_=Jp==="e"?" ":"0",(o8=fs[Jp])&&(Jp=o8(Zs,h_)),Ui.push(Jp),Yu=fp+1);return Ui.push(Va.slice(Yu,fp)),Ui.join("")}}function ir(Va,fs){return function(Zs){var Ui=Vy(1900,void 0,1),fp=Sr(Ui,Va,Zs+="",0),Yu,Qp;if(fp!=Zs.length)return null;if("Q"in Ui)return new Date(Ui.Q);if("s"in Ui)return new Date(Ui.s*1e3+("L"in Ui?Ui.L:0));if(fs&&!("Z"in Ui)&&(Ui.Z=0),"p"in Ui&&(Ui.H=Ui.H%12+Ui.p*12),Ui.m===void 0&&(Ui.m="q"in Ui?Ui.q:0),"V"in Ui){if(Ui.V<1||Ui.V>53)return null;"w"in Ui||(Ui.w=1),"Z"in Ui?(Yu=V2(Vy(Ui.y,0,1)),Qp=Yu.getUTCDay(),Yu=Qp>4||Qp===0?Uy.ceil(Yu):Uy(Yu),Yu=RT.offset(Yu,(Ui.V-1)*7),Ui.y=Yu.getUTCFullYear(),Ui.m=Yu.getUTCMonth(),Ui.d=Yu.getUTCDate()+(Ui.w+6)%7):(Yu=IT(Vy(Ui.y,0,1)),Qp=Yu.getDay(),Yu=Qp>4||Qp===0?c0.ceil(Yu):c0(Yu),Yu=B2.offset(Yu,(Ui.V-1)*7),Ui.y=Yu.getFullYear(),Ui.m=Yu.getMonth(),Ui.d=Yu.getDate()+(Ui.w+6)%7)}else("W"in Ui||"U"in Ui)&&("w"in Ui||(Ui.w="u"in Ui?Ui.u%7:"W"in Ui?1:0),Qp="Z"in Ui?V2(Vy(Ui.y,0,1)).getUTCDay():IT(Vy(Ui.y,0,1)).getDay(),Ui.m=0,Ui.d="W"in Ui?(Ui.w+6)%7+Ui.W*7-(Qp+5)%7:Ui.w+Ui.U*7-(Qp+6)%7);return"Z"in Ui?(Ui.H+=Ui.Z/100|0,Ui.M+=Ui.Z%100,V2(Ui)):IT(Ui)}}function Sr(Va,fs,Zs,Ui){for(var fp=0,Yu=fs.length,Qp=Zs.length,Jp,h_;fp<Yu;){if(Ui>=Qp)return-1;if(Jp=fs.charCodeAt(fp++),Jp===37){if(Jp=fs.charAt(fp++),h_=Wt[Jp in PT?fs.charAt(fp++):Jp],!h_||(Ui=h_(Va,Zs,Ui))<0)return-1}else if(Jp!=Zs.charCodeAt(Ui++))return-1}return Ui}function Br(Va,fs,Zs){var Ui=S.exec(fs.slice(Zs));return Ui?(Va.p=O[Ui[0].toLowerCase()],Zs+Ui[0].length):-1}function Jr(Va,fs,Zs){var Ui=H.exec(fs.slice(Zs));return Ui?(Va.w=ue[Ui[0].toLowerCase()],Zs+Ui[0].length):-1}function en(Va,fs,Zs){var Ui=D.exec(fs.slice(Zs));return Ui?(Va.w=V[Ui[0].toLowerCase()],Zs+Ui[0].length):-1}function Kn(Va,fs,Zs){var Ui=Ne.exec(fs.slice(Zs));return Ui?(Va.m=dt[Ui[0].toLowerCase()],Zs+Ui[0].length):-1}function si(Va,fs,Zs){var Ui=le.exec(fs.slice(Zs));return Ui?(Va.m=we[Ui[0].toLowerCase()],Zs+Ui[0].length):-1}function Pi(Va,fs,Zs){return Sr(Va,a,fs,Zs)}function so(Va,fs,Zs){return Sr(Va,r,fs,Zs)}function bs(Va,fs,Zs){return Sr(Va,o,fs,Zs)}function Ss(Va){return p[Va.getDay()]}function Ru(Va){return c[Va.getDay()]}function Iu(Va){return y[Va.getMonth()]}function eh(Va){return g[Va.getMonth()]}function nR(Va){return u[+(Va.getHours()>=12)]}function Ox(Va){return 1+~~(Va.getMonth()/3)}function u4(Va){return p[Va.getUTCDay()]}function l4(Va){return c[Va.getUTCDay()]}function bl(Va){return y[Va.getUTCMonth()]}function cp(Va){return g[Va.getUTCMonth()]}function iR(Va){return u[+(Va.getUTCHours()>=12)]}function aR(Va){return 1+~~(Va.getUTCMonth()/3)}return{format:function(Va){var fs=qt(Va+="",mt);return fs.toString=function(){return Va},fs},parse:function(Va){var fs=ir(Va+="",!1);return fs.toString=function(){return Va},fs},utcFormat:function(Va){var fs=qt(Va+="",Lt);return fs.toString=function(){return Va},fs},utcParse:function(Va){var fs=ir(Va+="",!0);return fs.toString=function(){return Va},fs}}}var PT={"-":"",_:" ",0:"0"},_c=/^\s*\d+/,OB=/^%/,PF=/[\\^$*+?|[\]().{}]/g;function Rs(e,a,r){var o=e<0?"-":"",u=(o?-e:e)+"",c=u.length;return o+(c<r?new Array(r-c+1).join(a)+u:u)}function OF(e){return e.replace(PF,"\\$&")}function Hy(e){return new RegExp("^(?:"+e.map(OF).join("|")+")","i")}function jy(e){for(var a={},r=-1,o=e.length;++r<o;)a[e[r].toLowerCase()]=r;return a}function kF(e,a,r){var o=_c.exec(a.slice(r,r+1));return o?(e.w=+o[0],r+o[0].length):-1}function FF(e,a,r){var o=_c.exec(a.slice(r,r+1));return o?(e.u=+o[0],r+o[0].length):-1}function DF(e,a,r){var o=_c.exec(a.slice(r,r+2));return o?(e.U=+o[0],r+o[0].length):-1}function kB(e,a,r){var o=_c.exec(a.slice(r,r+2));return o?(e.V=+o[0],r+o[0].length):-1}function LF(e,a,r){var o=_c.exec(a.slice(r,r+2));return o?(e.W=+o[0],r+o[0].length):-1}function H2(e,a,r){var o=_c.exec(a.slice(r,r+4));return o?(e.y=+o[0],r+o[0].length):-1}function OT(e,a,r){var o=_c.exec(a.slice(r,r+2));return o?(e.y=+o[0]+(+o[0]>68?1900:2e3),r+o[0].length):-1}function kT(e,a,r){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(a.slice(r,r+6));return o?(e.Z=o[1]?0:-(o[2]+(o[3]||"00")),r+o[0].length):-1}function BF(e,a,r){var o=_c.exec(a.slice(r,r+1));return o?(e.q=o[0]*3-3,r+o[0].length):-1}function NF(e,a,r){var o=_c.exec(a.slice(r,r+2));return o?(e.m=o[0]-1,r+o[0].length):-1}function j2(e,a,r){var o=_c.exec(a.slice(r,r+2));return o?(e.d=+o[0],r+o[0].length):-1}function FT(e,a,r){var o=_c.exec(a.slice(r,r+3));return o?(e.m=0,e.d=+o[0],r+o[0].length):-1}function DT(e,a,r){var o=_c.exec(a.slice(r,r+2));return o?(e.H=+o[0],r+o[0].length):-1}function zF(e,a,r){var o=_c.exec(a.slice(r,r+2));return o?(e.M=+o[0],r+o[0].length):-1}function UF(e,a,r){var o=_c.exec(a.slice(r,r+2));return o?(e.S=+o[0],r+o[0].length):-1}function ZF(e,a,r){var o=_c.exec(a.slice(r,r+3));return o?(e.L=+o[0],r+o[0].length):-1}function VF(e,a,r){var o=_c.exec(a.slice(r,r+6));return o?(e.L=Math.floor(o[0]/1e3),r+o[0].length):-1}function HF(e,a,r){var o=OB.exec(a.slice(r,r+1));return o?r+o[0].length:-1}function jF(e,a,r){var o=_c.exec(a.slice(r));return o?(e.Q=+o[0],r+o[0].length):-1}function WF(e,a,r){var o=_c.exec(a.slice(r));return o?(e.s=+o[0],r+o[0].length):-1}function LT(e,a){return Rs(e.getDate(),a,2)}function GF(e,a){return Rs(e.getHours(),a,2)}function BT(e,a){return Rs(e.getHours()%12||12,a,2)}function FB(e,a){return Rs(1+B2.count(l0(e),e),a,3)}function NT(e,a){return Rs(e.getMilliseconds(),a,3)}function XF(e,a){return NT(e,a)+"000"}function $F(e,a){return Rs(e.getMonth()+1,a,2)}function YF(e,a){return Rs(e.getMinutes(),a,2)}function KF(e,a){return Rs(e.getSeconds(),a,2)}function qF(e){var a=e.getDay();return a===0?7:a}function QF(e,a){return Rs(Ny.count(l0(e)-1,e),a,2)}function zT(e){var a=e.getDay();return a>=4||a===0?f0(e):f0.ceil(e)}function DB(e,a){return e=zT(e),Rs(f0.count(l0(e),e)+(l0(e).getDay()===4),a,2)}function JF(e){return e.getDay()}function eD(e,a){return Rs(c0.count(l0(e)-1,e),a,2)}function tD(e,a){return Rs(e.getFullYear()%100,a,2)}function UT(e,a){return e=zT(e),Rs(e.getFullYear()%100,a,2)}function rD(e,a){return Rs(e.getFullYear()%1e4,a,4)}function nD(e,a){var r=e.getDay();return e=r>=4||r===0?f0(e):f0.ceil(e),Rs(e.getFullYear()%1e4,a,4)}function iD(e){var a=e.getTimezoneOffset();return(a>0?"-":(a*=-1,"+"))+Rs(a/60|0,"0",2)+Rs(a%60,"0",2)}function ZT(e,a){return Rs(e.getUTCDate(),a,2)}function aD(e,a){return Rs(e.getUTCHours(),a,2)}function LB(e,a){return Rs(e.getUTCHours()%12||12,a,2)}function oD(e,a){return Rs(1+RT.count(Zy(e),e),a,3)}function VT(e,a){return Rs(e.getUTCMilliseconds(),a,3)}function sD(e,a){return VT(e,a)+"000"}function uD(e,a){return Rs(e.getUTCMonth()+1,a,2)}function lD(e,a){return Rs(e.getUTCMinutes(),a,2)}function cD(e,a){return Rs(e.getUTCSeconds(),a,2)}function fD(e){var a=e.getUTCDay();return a===0?7:a}function hD(e,a){return Rs(U2.count(Zy(e)-1,e),a,2)}function pD(e){var a=e.getUTCDay();return a>=4||a===0?Qg(e):Qg.ceil(e)}function HT(e,a){return e=pD(e),Rs(Qg.count(Zy(e),e)+(Zy(e).getUTCDay()===4),a,2)}function jT(e){return e.getUTCDay()}function WT(e,a){return Rs(Uy.count(Zy(e)-1,e),a,2)}function F1(e,a){return Rs(e.getUTCFullYear()%100,a,2)}function D1(e,a){return e=pD(e),Rs(e.getUTCFullYear()%100,a,2)}function dD(e,a){return Rs(e.getUTCFullYear()%1e4,a,4)}function vD(e,a){var r=e.getUTCDay();return e=r>=4||r===0?Qg(e):Qg.ceil(e),Rs(e.getUTCFullYear()%1e4,a,4)}function gD(){return"+0000"}function GT(){return"%"}function XT(e){return+e}function $T(e){return Math.floor(+e/1e3)}var Qv,YT,L1,W2,G2;mD({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function mD(e){return Qv=IF(e),YT=Qv.format,L1=Qv.parse,W2=Qv.utcFormat,G2=Qv.utcParse,Qv}var h0=1e3,p0=h0*60,Jv=p0*60,Jg=Jv*24,yD=Jg*7,KT=Jg*30,X2=Jg*365;function qT(e){return new Date(e)}function QT(e){return e instanceof Date?+e:+new Date(+e)}function JT(e,a,r,o,u,c,p,g,y){var S=tT(af,af),O=S.invert,D=S.domain,V=y(".%L"),H=y(":%S"),ue=y("%I:%M"),le=y("%I %p"),we=y("%a %d"),Ne=y("%b %d"),dt=y("%B"),mt=y("%Y"),Lt=[[p,1,h0],[p,5,5*h0],[p,15,15*h0],[p,30,30*h0],[c,1,p0],[c,5,5*p0],[c,15,15*p0],[c,30,30*p0],[u,1,Jv],[u,3,3*Jv],[u,6,6*Jv],[u,12,12*Jv],[o,1,Jg],[o,2,2*Jg],[r,1,yD],[a,1,KT],[a,3,3*KT],[e,1,X2]];function Wt(ir){return(p(ir)<ir?V:c(ir)<ir?H:u(ir)<ir?ue:o(ir)<ir?le:a(ir)<ir?r(ir)<ir?we:Ne:e(ir)<ir?dt:mt)(ir)}function qt(ir,Sr,Br,Jr){if(ir==null&&(ir=10),typeof ir=="number"){var en=Math.abs(Br-Sr)/ir,Kn=FA(function(si){return si[2]}).right(Lt,en);Kn===Lt.length?(Jr=m2(Sr/X2,Br/X2,ir),ir=e):Kn?(Kn=Lt[en/Lt[Kn-1][2]<Lt[Kn][2]/en?Kn-1:Kn],Jr=Kn[1],ir=Kn[0]):(Jr=Math.max(m2(Sr,Br,ir),1),ir=g)}return Jr==null?ir:ir.every(Jr)}return S.invert=function(ir){return new Date(O(ir))},S.domain=function(ir){return arguments.length?D(WA.call(ir,QT)):D().map(qT)},S.ticks=function(ir,Sr){var Br=D(),Jr=Br[0],en=Br[Br.length-1],Kn=en<Jr,si;return Kn&&(si=Jr,Jr=en,en=si),si=qt(ir,Jr,en,Sr),si=si?si.range(Jr,en+1):[],Kn?si.reverse():si},S.tickFormat=function(ir,Sr){return Sr==null?Wt:y(Sr)},S.nice=function(ir,Sr){var Br=D();return(ir=qt(ir,Br[0],Br[Br.length-1],Sr))?D(Ly(Br,ir)):S},S.copy=function(){return A1(S,JT(e,a,r,o,u,c,p,g,y))},S}function _D(){return cv.apply(JT(l0,SF,Ny,B2,wT,Ch,AF,z2,YT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function BB(){return initRange.apply(calendar(utcYear,utcMonth,utcWeek,utcDay,utcHour,utcMinute,utcSecond,utcMillisecond,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function B1(){var e=0,a=1,r,o,u,c,p=af,g=!1,y;function S(O){return isNaN(O=+O)?y:p(u===0?.5:(O=(c(O)-r)*u,g?Math.max(0,Math.min(1,O)):O))}return S.domain=function(O){return arguments.length?(r=c(e=+O[0]),o=c(a=+O[1]),u=r===o?0:1/(o-r),S):[e,a]},S.clamp=function(O){return arguments.length?(g=!!O,S):g},S.interpolator=function(O){return arguments.length?(p=O,S):p},S.unknown=function(O){return arguments.length?(y=O,S):y},function(O){return c=O,r=O(e),o=O(a),u=r===o?0:1/(o-r),S}}function Wy(e,a){return a.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function eM(){var e=u0(B1()(af));return e.copy=function(){return Wy(e,eM())},x2.apply(e,arguments)}function xD(){var e=loggish(B1()).domain([1,10]);return e.copy=function(){return Wy(e,xD()).base(e.base())},initInterpolator.apply(e,arguments)}function bD(){var e=symlogish(B1());return e.copy=function(){return Wy(e,bD()).constant(e.constant())},initInterpolator.apply(e,arguments)}function tM(){var e=powish(B1());return e.copy=function(){return Wy(e,tM()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function SD(){return tM.apply(null,arguments).exponent(.5)}function ED(){var e=[],a=identity;function r(o){if(!isNaN(o=+o))return a((bisect(e,o)-1)/(e.length-1))}return r.domain=function(o){if(!arguments.length)return e.slice();e=[];for(var u=0,c=o.length,p;u<c;++u)p=o[u],p!=null&&!isNaN(p=+p)&&e.push(p);return e.sort(ascending),r},r.interpolator=function(o){return arguments.length?(a=o,r):a},r.copy=function(){return ED(a).domain(e)},initInterpolator.apply(r,arguments)}function N1(){var e=0,a=.5,r=1,o,u,c,p,g,y=af,S,O=!1,D;function V(H){return isNaN(H=+H)?D:(H=.5+((H=+S(H))-u)*(H<u?p:g),y(O?Math.max(0,Math.min(1,H)):H))}return V.domain=function(H){return arguments.length?(o=S(e=+H[0]),u=S(a=+H[1]),c=S(r=+H[2]),p=o===u?0:.5/(u-o),g=u===c?0:.5/(c-u),V):[e,a,r]},V.clamp=function(H){return arguments.length?(O=!!H,V):O},V.interpolator=function(H){return arguments.length?(y=H,V):y},V.unknown=function(H){return arguments.length?(D=H,V):D},function(H){return S=H,o=H(e),u=H(a),c=H(r),p=o===u?0:.5/(u-o),g=u===c?0:.5/(c-u),V}}function rM(){var e=u0(N1()(af));return e.copy=function(){return Wy(e,rM())},x2.apply(e,arguments)}function wD(){var e=loggish(N1()).domain([.1,1,10]);return e.copy=function(){return copy(e,wD()).base(e.base())},initInterpolator.apply(e,arguments)}function CD(){var e=symlogish(N1());return e.copy=function(){return copy(e,CD()).constant(e.constant())},initInterpolator.apply(e,arguments)}function nM(){var e=powish(N1());return e.copy=function(){return copy(e,nM()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function NB(){return nM.apply(null,arguments).exponent(.5)}function AD(e){var a,r=[];function o(u){return u==null?a:u}return o.invert=o,o.domain=o.range=function(u){return u?(r=u,u):r},o.unknown=function(u){return u?(a=u,u):a},o.copy=function(){return AD(e).unknown(a)},o}var wf,$2,d0,Y2=wa.isNil,TD=wa.isString,iM=wa.uniq,Gy=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,aM=(wf={},(0,Fe.Z)(wf,xs.LINEAR,lT),(0,Fe.Z)(wf,xs.POWER,I2),(0,Fe.Z)(wf,xs.LOG,dT),(0,Fe.Z)(wf,xs.IDENTITY,AD),(0,Fe.Z)(wf,xs.SEQUENTIAL,eM),(0,Fe.Z)(wf,xs.TIME,_D),(0,Fe.Z)(wf,xs.QUANTILE,_T),(0,Fe.Z)(wf,xs.QUANTIZE,xT),(0,Fe.Z)(wf,xs.THRESHOLD,bT),(0,Fe.Z)(wf,xs.CAT,ky),(0,Fe.Z)(wf,xs.DIVERGING,rM),wf),MD=($2=(0,Tn.b2)(),$2(d0=function(){function e(){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"scaleOptions",{})}return(0,at.Z)(e,[{key:"apply",value:function(r,o){var u=this,c=o.styleAttributeService;r.hooks.init.tapPromise("FeatureScalePlugin",(0,fn.Z)($t().mark(function p(){var g,y,S;return $t().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(r.log(gl.ScaleInitStart,Na.INIT),u.scaleOptions=r.getScaleOptions(),y=c.getLayerStyleAttributes(),S=(g=r.getSource())===null||g===void 0?void 0:g.data.dataArray,!(Array.isArray(S)&&S.length===0)){D.next=8;break}return D.abrupt("return");case 8:u.caculateScalesForAttributes(y||[],S);case 9:r.log(gl.ScaleInitEnd,Na.INIT);case 10:case"end":return D.stop()}},p)}))),r.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",function(){var p=(0,fn.Z)($t().mark(function g(y){var S,O;return $t().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(y){V.next=2;break}return V.abrupt("return",y);case 2:if(r.log(gl.ScaleInitStart,Na.UPDATE),u.scaleOptions=r.getScaleOptions(),S=c.getLayerStyleAttributes(),O=r.getSource().data.dataArray,!(Array.isArray(O)&&O.length===0)){V.next=8;break}return V.abrupt("return",!0);case 8:return u.caculateScalesForAttributes(S||[],O),r.log(gl.ScaleInitEnd,Na.UPDATE),r.layerModelNeedUpdate=!0,V.abrupt("return",!0);case 12:case"end":return V.stop()}},g)}));return function(g){return p.apply(this,arguments)}}()),r.hooks.beforeRender.tap("FeatureScalePlugin",function(){if(!r.layerModelNeedUpdate){u.scaleOptions=r.getScaleOptions();var p=c.getLayerStyleAttributes(),g=r.getSource().data.dataArray;if(!(Array.isArray(g)&&g.length===0)&&p){var y=p.filter(function(S){return S.needRescale});y.length&&u.caculateScalesForAttributes(y,g)}}})}},{key:"isNumber",value:function(r){return!isNaN(parseFloat(r))&&isFinite(r)}},{key:"caculateScalesForAttributes",value:function(r,o){var u=this;r.forEach(function(c){if(c.scale){var p=c.scale,g=c.scale.field;p.names=u.parseFields(Y2(g)?[]:g);var y=[];p.names.forEach(function(S){var O;y.push(u.createScale(S,c.name,(O=c.scale)===null||O===void 0?void 0:O.values,o))}),y.some(function(S){return S.type===jm.VARIABLE})?(p.type=jm.VARIABLE,y.forEach(function(S){if(!p.callback&&p.values!=="text"){var O;switch((O=S.option)===null||O===void 0?void 0:O.type){case xs.LOG:case xs.LINEAR:case xs.POWER:if(p.values&&p.values.length>2){var D=S.scale.ticks(p.values.length);S.scale.domain(D)}p.values?S.scale.range(p.values):S.scale.range(S.option.domain);break;case xs.QUANTILE:case xs.QUANTIZE:case xs.THRESHOLD:S.scale.range(p.values);break;case xs.IDENTITY:break;case xs.CAT:p.values?S.scale.range(p.values):S.scale.range(S.option.domain);break;case xs.DIVERGING:case xs.SEQUENTIAL:S.scale.interpolator(Jk(p.values));break}}if(p.values==="text"){var V;S.scale.range((V=S.option)===null||V===void 0?void 0:V.domain)}})):(p.type=jm.CONSTANT,p.defaultValues=y.map(function(S,O){return S.scale(p.names[O])})),p.scalers=y.map(function(S){return{field:S.field,func:S.scale,option:S.option}}),c.needRescale=!1}})}},{key:"parseFields",value:function(r){return Array.isArray(r)?r:TD(r)?r.split("*"):[r]}},{key:"createScale",value:function(r,o,u,c){var p,g,y=this.scaleOptions[o]&&((p=this.scaleOptions[o])===null||p===void 0?void 0:p.field)===r?this.scaleOptions[o]:this.scaleOptions[r],S={field:r,scale:void 0,type:jm.VARIABLE,option:y};if(!c||!c.length)return y&&y.type?S.scale=this.createDefaultScale(y):(S.scale=ky([r]),S.type=jm.CONSTANT),S;var O=(g=c.find(function(H){return!Y2(H[r])}))===null||g===void 0?void 0:g[r];if(this.isNumber(r)||Y2(O)&&!y)S.scale=ky([r]),S.type=jm.CONSTANT;else{var D=y&&y.type||this.getDefaultType(O);u==="text"&&(D=xs.CAT),u===void 0&&(D=xs.IDENTITY);var V=this.createScaleConfig(D,r,y,c);S.scale=this.createDefaultScale(V),S.option=V}return S}},{key:"getDefaultType",value:function(r){var o=xs.LINEAR;return typeof r=="string"&&(o=Gy.test(r)?xs.TIME:xs.CAT),o}},{key:"createScaleConfig",value:function(r,o,u,c){var p={type:r},g=(c==null?void 0:c.map(function(O){return O[o]}))||[];if(u!=null&&u.domain)p.domain=u==null?void 0:u.domain;else if(r===xs.CAT||r===xs.IDENTITY)p.domain=iM(g);else if(r===xs.QUANTILE)p.domain=g;else if(r===xs.DIVERGING){var y=DA(g),S=(u==null?void 0:u.neutral)!==void 0?u==null?void 0:u.neutral:(y[0]+y[1])/2;p.domain=[y[0],S,y[1]]}else p.domain=DA(g);return(0,te.Z)((0,te.Z)({},p),u)}},{key:"createDefaultScale",value:function(r){var o=r.type,u=r.domain,c=r.unknown,p=r.clamp,g=r.nice,y=aM[o]();return u&&y.domain&&y.domain(u),c&&y.unknown(c),p!==void 0&&y.clamp&&y.clamp(p),g!==void 0&&y.nice&&y.nice(g),y}}]),e}())||d0),oM,sM,RD=(oM=(0,Tn.b2)(),oM(sM=function(){function e(){(0,Rt.Z)(this,e)}return(0,at.Z)(e,[{key:"apply",value:function(r){r.hooks.beforeRender.tap("LayerAnimateStylePlugin",function(){var o=r.animateStatus;o&&r.models.forEach(function(u){u.addUniforms((0,te.Z)({},r.layerModel.getAnimateUniforms()))})})}}]),e}())||sM),uM,lM,ID=(uM=(0,Tn.b2)(),uM(lM=function(){function e(){(0,Rt.Z)(this,e)}return(0,at.Z)(e,[{key:"apply",value:function(r){r.hooks.afterInit.tap("LayerMaskPlugin",function(){var o=r.getLayerConfig(),u=o.maskLayers,c=o.enableMask;if(!r.tileLayer&&u&&u.length>0){var p;(p=r.masks).push.apply(p,(0,Sn.Z)(u)),r.updateLayerConfig({mask:c})}})}}]),e}())||lM),PD=function(){function e(a){var r=a.rendererService,o=a.layerService,u=a.parent;(0,Rt.Z)(this,e),(0,Fe.Z)(this,"tileResource",new Map),(0,Fe.Z)(this,"layerTiles",[]),this.rendererService=r,this.layerService=o,this.parent=u}return(0,at.Z)(e,[{key:"tiles",get:function(){return this.layerTiles}},{key:"hasTile",value:function(r){return this.layerTiles.some(function(o){return o.key===r})}},{key:"addTile",value:function(r){this.layerTiles.push(r)}},{key:"getTile",value:function(r){return this.layerTiles.find(function(o){return o.key===r})}},{key:"getVisibleTileBylngLat",value:function(r){return this.layerTiles.find(function(o){return o.isLoaded&&o.visible&&o.lnglatInBounds(r)})}},{key:"removeTile",value:function(r){var o=this.layerTiles.findIndex(function(c){return c.key===r}),u=this.layerTiles.splice(o,1);u[0]&&u[0].destroy()}},{key:"updateTileVisible",value:function(r){var o=this.getTile(r.key);if(r.isVisible)if(r.parent){var u=this.isChildrenLoaded(r.parent);o==null||o.updateVisible(u)}else o==null||o.updateVisible(!0);else if(r.parent){var c=this.isChildrenLoaded(r.parent);o==null||o.updateVisible(!c)}else o==null||o.updateVisible(!1)}},{key:"isParentLoaded",value:function(r){var o=r.parent;if(!o)return!0;var u=this.getTile(o==null?void 0:o.key);return!!(u!=null&&u.isLoaded)}},{key:"isChildrenLoaded",value:function(r){var o=this,u=r==null?void 0:r.children;return u.length===0?!0:u.every(function(c){var p=o.getTile(c==null?void 0:c.key);return p?(p==null?void 0:p.isLoaded)===!0:!0})}},{key:"render",value:function(){var a=(0,fn.Z)($t().mark(function o(){var u=this,c,p;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return c=this.getRenderLayers(),p=c.map(function(){var S=(0,fn.Z)($t().mark(function O(D){return $t().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,u.layerService.renderTileLayer(D);case 2:case"end":return H.stop()}},O)}));return function(O){return S.apply(this,arguments)}}()),y.next=4,Promise.all(p);case 4:case"end":return y.stop()}},o,this)}));function r(){return a.apply(this,arguments)}return r}()},{key:"getRenderLayers",value:function(){var r=this.layerTiles.filter(function(u){return u.visible&&u.isLoaded}),o=[];return r.map(function(u){return o.push.apply(o,(0,Sn.Z)(u.getLayers()))}),o}},{key:"getLayers",value:function(){var r=this.layerTiles.filter(function(u){return u.isLoaded}),o=[];return r.map(function(u){return o.push.apply(o,(0,Sn.Z)(u.getLayers()))}),o}},{key:"getTiles",value:function(){return this.layerTiles}},{key:"destroy",value:function(){this.layerTiles.forEach(function(r){return r.destroy()}),this.tileResource.clear()}}]),e}(),OD=F(32676);function kD(e,a,r){r===void 0&&(r={});var o=br(e),u=br(a),c=OD.union(o.coordinates,u.coordinates);return c.length===0?null:c.length===1?Me(c[0],r.properties):Ee(c,r.properties)}var FD=kD,cM=function(){function e(){(0,Rt.Z)(this,e)}return(0,at.Z)(e,[{key:"getCombineFeature",value:function(r){var o=null,u=r[0];return r.map(function(c){var p=Me(c.coordinates);o===null?o=p:o=FD(o,p)}),u&&(o.properties=(0,te.Z)({},u)),o}}]),e}(),Xy="select",$y="active",DD=function(){function e(a){var r=a.layerService,o=a.tileLayerService,u=a.parent;(0,Rt.Z)(this,e),(0,Fe.Z)(this,"tilePickID",new Map),this.layerService=r,this.tileLayerService=o,this.parent=u,this.tileSourceService=new cM}return(0,at.Z)(e,[{key:"pickRender",value:function(r){var o=this.tileLayerService.getVisibleTileBylngLat(r.lngLat);if(o){var u=o.getMainLayer();u==null||u.layerPickService.pickRender(r)}}},{key:"pick",value:function(r,o){var u=this.parent.getContainer(),c=u.get(ut.IPickingService);if(r.type==="RasterLayer"){var p=this.tileLayerService.getVisibleTileBylngLat(o.lngLat);if(p&&p.getMainLayer()!==void 0){var g=p.getMainLayer();return g.layerPickService.pickRasterLayer(g,o,this.parent)}return!1}return this.pickRender(o),c.pickFromPickingFBO(r,o)}},{key:"selectFeature",value:function(r){var o=(0,Vi.Z)(r,3),u=o[0],c=o[1],p=o[2],g=this.color2PickId(u,c,p);this.tilePickID.set(Xy,g),this.updateHighLight(u,c,p,Xy)}},{key:"highlightPickedFeature",value:function(r){var o=(0,Vi.Z)(r,3),u=o[0],c=o[1],p=o[2],g=this.color2PickId(u,c,p);this.tilePickID.set($y,g),this.updateHighLight(u,c,p,$y)}},{key:"updateHighLight",value:function(r,o,u,c){this.tileLayerService.tiles.map(function(p){var g=p.getMainLayer();switch(c){case Xy:g==null||g.hooks.beforeSelect.call([r,o,u]);break;case $y:g==null||g.hooks.beforeHighlight.call([r,o,u]);break}})}},{key:"setPickState",value:function(){var r=this.tilePickID.get(Xy),o=this.tilePickID.get($y);if(r){var u=this.pickId2Color(r),c=(0,Vi.Z)(u,3),p=c[0],g=c[1],y=c[2];this.updateHighLight(p,g,y,Xy);return}if(o){var S=this.pickId2Color(o),O=(0,Vi.Z)(S,3),D=O[0],V=O[1],H=O[2];this.updateHighLight(D,V,H,$y);return}}},{key:"color2PickId",value:function(r,o,u){return Kl(new Uint8Array([r,o,u]))}},{key:"pickId2Color",value:function(r){return Es(r)}},{key:"getFeatureById",value:function(r){var o=this.tileLayerService.getTiles().filter(function(c){return c.visible}),u=[];return o.forEach(function(c){u.push.apply(u,(0,Sn.Z)(c.getFeatureById(r)))}),u}},{key:"pickRasterLayer",value:function(r,o,u){return!1}}]),e}();function LD(e){return e==="PolygonLayer"?Py:e==="LineLayer"?Ry:v1}function K2(e){return["PolygonLayer","LineLayer"].indexOf(e)!==-1}function q2(e){var a=BD();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function BD(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var em=function(e){(0,mr.Z)(r,e);var a=q2(r);function r(o,u){var c;return(0,Rt.Z)(this,r),c=a.call(this),(0,Fe.Z)((0,vr.Z)(c),"visible",!0),(0,Fe.Z)((0,vr.Z)(c),"layers",[]),(0,Fe.Z)((0,vr.Z)(c),"isLoaded",!1),(0,Fe.Z)((0,vr.Z)(c),"tileMaskLayers",[]),c.parent=u,c.sourceTile=o,c.x=o.x,c.y=o.y,c.z=o.z,c.key="".concat(c.x,"_").concat(c.y,"_").concat(c.z),c}return(0,at.Z)(r,[{key:"getLayers",value:function(){return this.layers}},{key:"styleUpdate",value:function(){}},{key:"lnglatInBounds",value:function(u){var c=(0,Vi.Z)(this.sourceTile.bounds,4),p=c[0],g=c[1],y=c[2],S=c[3],O=u.lng,D=u.lat;return O>=p&&O<=y&&D>=g&&D<=S}},{key:"getLayerOptions",value:function(){var u,c=this.parent.getLayerConfig();return(0,te.Z)((0,te.Z)({},c),{},{textAllowOverlap:!0,autoFit:!1,maskLayers:this.getMaskLayer(),tileMask:K2(this.parent.type),mask:c.mask||((u=c.maskLayers)===null||u===void 0?void 0:u.length)!==0&&c.enableMask})}},{key:"getMaskLayer",value:function(){var u=this,c=this.parent.getLayerConfig(),p=c.maskLayers,g=[];return p==null||p.forEach(function(y){if(!y.tileLayer)return g.push(y),y;var S=y.tileLayer,O=S.getTile(u.sourceTile.key),D=O==null?void 0:O.getLayers()[0];D&&g.push(D)}),g}},{key:"addTileMask",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y;return $t().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return p=new Py({visible:!1,enablePicking:!1}).source({type:"FeatureCollection",features:[this.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}).shape("fill").style({opacity:.5}),g=cy(this.parent.sceneContainer),p.setContainer(g,this.parent.sceneContainer),O.next=5,p.init();case 5:return this.tileMask=p,y=this.getMainLayer(),y!==void 0&&(y.tileMask=p),O.abrupt("return",p);case 9:case"end":return O.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"addMask",value:function(){var o=(0,fn.Z)($t().mark(function c(p,g){var y;return $t().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return y=cy(this.parent.sceneContainer),g.setContainer(y,this.parent.sceneContainer),O.next=4,g.init();case 4:p.addMask(g),this.tileMaskLayers.push(g);case 6:case"end":return O.stop()}},c,this)}));function u(c,p){return o.apply(this,arguments)}return u}()},{key:"addLayer",value:function(){var o=(0,fn.Z)($t().mark(function c(p){var g;return $t().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return p.isTileLayer=!0,g=cy(this.parent.sceneContainer),p.setContainer(g,this.parent.sceneContainer),this.layers.push(p),S.next=6,p.init();case 6:case"end":return S.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"updateVisible",value:function(u){this.visible=u,this.updateOptions("visible",u)}},{key:"updateOptions",value:function(u,c){this.layers.forEach(function(p){p.updateLayerConfig((0,Fe.Z)({},u,c))})}},{key:"getMainLayer",value:function(){return this.layers[0]}},{key:"getFeatures",value:function(u){return[]}},{key:"getFeatureById",value:function(u){return[]}},{key:"destroy",value:function(){var u;(u=this.tileMask)===null||u===void 0||u.destroy(),this.layers.forEach(function(c){return c.destroy()})}}]),r}(Ws.EventEmitter);function ND(e){var a=z1();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function z1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var zD=function(e){(0,mr.Z)(r,e);var a=ND(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S;return $t().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=this.getSourceOption(),g=p.data.features[0].properties,y=new Ry().source(p.data,p.options).size(1).shape("line").color("red"),S=new v1({minZoom:this.z-1,maxZoom:this.z+1,textAllowOverlap:!0}).source([g],{parser:{type:"json",x:"x",y:"y"}}).size(20).color("red").shape(this.key).style({stroke:"#fff",strokeWidth:2}),D.next=6,this.addLayer(y);case 6:return D.next=8,this.addLayer(S);case 8:this.isLoaded=!0;case 9:case"end":return D.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource(),c=this.sourceTile.data.layers.testTile.features;return{data:{type:"FeatureCollection",features:c},options:{parser:{type:"geojson"},transforms:u.transforms}}}}]),r}(em);function UD(e){var a=U1();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function U1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var fM=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
void main() {
  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));
  gl_FragColor = color;
  gl_FragColor.a *= u_opacity;
  if(gl_FragColor.a < 0.01)
    discard;
}
`,hM=`precision highp float;
uniform mat4 u_ModelMatrix;

attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
 
}
`,pM=function(e){(0,mr.Z)(r,e);var a=UD(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity;return{u_opacity:c||1,u_texture:this.texture}}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S;return $t().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=this.layer.getSource(),g=this.rendererService.createTexture2D,this.texture=g({height:0,width:0}),D.next=5,p.data.images;case 5:return y=D.sent,this.texture=g({data:y[0],width:y[0].width,height:y[0].height,mag:gt.LINEAR,min:gt.LINEAR}),D.next=9,this.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:hM,fragmentShader:fM,triangulation:r1,primitive:gt.TRIANGLES,blend:{enable:!0},depth:{enable:!1}});case 9:return S=D.sent,D.abrupt("return",[S]);case 11:case"end":return D.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy()}},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.initModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Gi.Attribute,descriptor:{name:"a_Uv",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(c,p,g){return[g[3],g[4]]}}})}}]),r}(us),dM={image:pM},ZD=dM;function VD(e){var a=HD();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function HD(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var jD=function(e){(0,mr.Z)(r,e);var a=VD(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"type","ImageLayer"),o}return(0,at.Z)(r,[{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel=new ZD[p](this),y.next=4,this.initLayerModels();case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getDefaultConfig",value:function(){var u=this.getModelType(),c={image:{}};return c[u]}},{key:"getModelType",value:function(){return"image"}}]),r}(Xf);function WD(e){var a=vM();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function vM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var gM=function(e){(0,mr.Z)(r,e);var a=WD(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S;return $t().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=this.getSourceOption(),S=new jD((0,te.Z)({},g)).source(y.data,y.options),p&&Object.keys(p).forEach(function(V){var H,ue,le=V;S[le]((H=p[le])===null||H===void 0?void 0:H.field,(ue=p[le])===null||ue===void 0?void 0:ue.values)}),D.next=7,this.addLayer(S);case 7:this.isLoaded=!0;case 8:case"end":return D.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:u.transforms}}}}]),r}(em);function GD(e){var a=XD();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function XD(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var $D=function(e){(0,mr.Z)(r,e);var a=GD(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S;return $t().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=this.getSourceOption(),S=new Xv((0,te.Z)({},g)).source(y.data,y.options),p&&Object.keys(p).forEach(function(V){var H,ue,le=V;S[le]((H=p[le])===null||H===void 0?void 0:H.field,(ue=p[le])===null||ue===void 0?void 0:ue.values)}),D.next=7,this.addLayer(S);case 7:this.isLoaded=!0;case 8:case"end":return D.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getFeatures",value:function(u){if(!u)return[];var c=this.sourceTile.data;return c.getTileData(u)}},{key:"getSourceOption",value:function(){var u=this.parent.getSource(),c=this.parent.getLayerConfig(),p=c.sourceLayer,g=c.featureId,y=this.getFeatures(p);return{data:{type:"FeatureCollection",features:y},options:{parser:{type:"geojson",featureId:g},transforms:u.transforms}}}}]),r}(em);function YD(e){var a=KD();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function KD(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var qD=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_min;
uniform float u_max;
uniform vec2 u_domain;
uniform float u_noDataValue;
uniform bool u_clampLow: true;
uniform bool u_clampHigh: true;
varying vec2 v_texCoord;
bool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }


void main() {

  float value = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).r;
  if (value == u_noDataValue || isnan_emu(value))
      discard;
  else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1]))
     discard;
  else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] -u_domain[0]);
    vec4 color = texture2D(u_colorTexture,vec2(normalisedValue, 0));
    
    gl_FragColor = color;
    gl_FragColor.a =  gl_FragColor.a * u_opacity ;
    if(gl_FragColor.a < 0.01)
      discard;
   
  }
}
`,QD=`precision highp float;
uniform mat4 u_ModelMatrix;

attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));

    gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`,mM=function(e){(0,mr.Z)(r,e);var a=YD(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=c===void 0?1:c,g=u.clampLow,y=g===void 0?!0:g,S=u.clampHigh,O=S===void 0?!0:S,D=u.noDataValue,V=D===void 0?-9999999:D,H=u.domain,ue=u.rampColors,le=H||ql(ue);return this.colorTexture=this.layer.textureService.getColorTexture(ue,le),{u_opacity:p||1,u_texture:this.texture,u_domain:le,u_clampLow:y,u_clampHigh:typeof O!="undefined"?O:y,u_noDataValue:V,u_colorTexture:this.colorTexture}}},{key:"getRasterData",value:function(){var o=(0,fn.Z)($t().mark(function c(p){var g,y,S,O;return $t().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(!Array.isArray(p.data)){V.next=4;break}return V.abrupt("return",{data:p.data,width:p.width,height:p.height});case 4:return V.next=6,p.data;case 6:return g=V.sent,y=g.rasterData,S=g.width,O=g.height,V.abrupt("return",{data:Array.from(y),width:S,height:O});case 11:case"end":return V.stop()}},c)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S,O,D,V,H;return $t().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return p=this.layer.getSource(),g=this.rendererService.createTexture2D,y=p.data.dataArray[0],le.next=5,this.getRasterData(y);case 5:return S=le.sent,O=S.data,D=S.width,V=S.height,this.texture=g({data:O,width:D,height:V,format:gt.LUMINANCE,type:gt.FLOAT}),le.next=12,this.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:QD,fragmentShader:qD,triangulation:r1,primitive:gt.TRIANGLES,depth:{enable:!1}});case 12:return H=le.sent,le.abrupt("return",[H]);case 14:case"end":return le.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.initModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u,c;(u=this.texture)===null||u===void 0||u.destroy(),(c=this.colorTexture)===null||c===void 0||c.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Gi.Attribute,descriptor:{name:"a_Uv",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(c,p,g){return[g[3],g[4]]}}})}}]),r}(us),JD=["data"],zB=["rasterData"];function yM(e){var a=_M();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function _M(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Q2=`precision highp float;
uniform mat4 u_ModelMatrix;

attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));

    gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`,eL=`precision mediump float;
uniform vec2 u_rminmax: vec2(0,255); 
uniform vec2 u_gminmax: vec2(0,255);
uniform vec2 u_bminmax: vec2(0,255);
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
uniform float u_noDataValue : 0.0;
varying vec2 v_texCoord;

void main() {
  vec3 rgb = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).rgb;
  if(rgb == vec3(u_noDataValue)) {
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  } else {
    gl_FragColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);
  }
  if(gl_FragColor.a < 0.01)
    discard;
 
}`,J2=function(e){(0,mr.Z)(r,e);var a=yM(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"dataOption",{}),o}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=c===void 0?1:c,g=u.noDataValue,y=g===void 0?0:g,S=this.dataOption,O=S.rMinMax,D=S.gMinMax,V=S.bMinMax;return{u_opacity:p||1,u_texture:this.texture,u_noDataValue:y,u_rminmax:O,u_gminmax:D,u_bminmax:V}}},{key:"getRasterData",value:function(){var o=(0,fn.Z)($t().mark(function c(p){var g,y,S,O,D;return $t().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!Array.isArray(p.data)){H.next=4;break}return g=p.data,y=(0,Nc.Z)(p,JD),this.dataOption=y,H.abrupt("return",(0,te.Z)({data:g},y));case 4:return H.next=6,p.data;case 6:if(S=H.sent,O=S.rasterData,D=(0,Nc.Z)(S,zB),this.dataOption=D,!Array.isArray(O)){H.next=14;break}return H.abrupt("return",(0,te.Z)({data:O},D));case 14:return H.abrupt("return",(0,te.Z)({data:Array.from(O)},D));case 15:case"end":return H.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S,O,D,V,H;return $t().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return p=this.layer.getSource(),g=this.rendererService.createTexture2D,y=p.data.dataArray[0],le.next=5,this.getRasterData(y);case 5:return S=le.sent,O=S.data,D=S.width,V=S.height,this.texture=g({data:O,width:D,height:V,format:gt.RGB,type:gt.FLOAT}),le.next=12,this.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:Q2,fragmentShader:eL,triangulation:r1,primitive:gt.TRIANGLES,depth:{enable:!1}});case 12:return H=le.sent,le.abrupt("return",[H]);case 14:case"end":return le.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.initModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Gi.Attribute,descriptor:{name:"a_Uv",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(c,p,g){return[g[3],g[4]]}}})}}]),r}(us);function tL(e){var a=rL();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function rL(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var nL=`precision mediump float;
uniform float u_opacity: 1.0;

uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

varying vec2 v_texCoord;

uniform vec2 u_domain;
uniform float u_noDataValue;
uniform bool u_clampLow: true;
uniform bool u_clampHigh: true;
uniform vec4 u_unpack;

float getElevation(vec2 coord, float bias) {
    // Convert encoded elevation value to meters
    vec4 data = texture2D(u_texture, coord,bias) * 255.0;
    data.a = -1.0;
    return dot(data, u_unpack);
}

vec4 getColor(float value) {
   float normalisedValue =(value- u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec2 coord = vec2(normalisedValue, 0);
    return texture2D(u_colorTexture, coord);
}

void main() {
  float value = getElevation(v_texCoord,0.0);
  if (value == u_noDataValue) {
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  } else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1])) {
     gl_FragColor = vec4(0.0, 0, 0, 0.0);
  } else {
   
    gl_FragColor = getColor(value);
    gl_FragColor.a =  gl_FragColor.a * u_opacity ;
      if(gl_FragColor.a < 0.01)
      discard;
  }
}
`,iL=`precision highp float;
uniform mat4 u_ModelMatrix;

attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`,aL=function(e){(0,mr.Z)(r,e);var a=tL(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=u.clampLow,g=p===void 0?!0:p,y=u.clampHigh,S=y===void 0?!0:y,O=u.noDataValue,D=O===void 0?-9999999:O,V=u.domain,H=u.rampColors,ue=u.colorTexture,le=u.rScaler,we=le===void 0?6553.6:le,Ne=u.gScaler,dt=Ne===void 0?25.6:Ne,mt=u.bScaler,Lt=mt===void 0?.1:mt,Wt=u.offset,qt=Wt===void 0?1e4:Wt,ir=V||ql(H),Sr=ue;return ue?this.layer.textureService.setColorTexture(ue,H,ir):Sr=this.layer.textureService.getColorTexture(H,ir),{u_opacity:c||1,u_texture:this.texture,u_domain:ir,u_clampLow:g,u_clampHigh:typeof S!="undefined"?S:g,u_noDataValue:D,u_unpack:[we,dt,Lt,qt],u_colorTexture:Sr}}},{key:"initModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S;return $t().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=this.layer.getSource(),g=this.rendererService.createTexture2D,D.next=4,p.data.images;case 4:return y=D.sent,this.texture=g({data:y[0],width:y[0].width,height:y[0].height,min:gt.LINEAR,mag:gt.LINEAR}),D.next=8,this.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:iL,fragmentShader:nL,triangulation:r1,primitive:gt.TRIANGLES,depth:{enable:!1}});case 8:return S=D.sent,D.abrupt("return",[S]);case 10:case"end":return D.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy()}},{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.initModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Gi.Attribute,descriptor:{name:"a_Uv",buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:2,update:function(c,p,g){return[g[3],g[4]]}}})}}]),r}(us),oL={raster:mM,rasterRgb:J2,raster3d:mM,rasterTerrainRgb:aL},sL=oL;function UB(e){var a=fv();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function fv(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Yy=function(e){(0,mr.Z)(r,e);var a=UB(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"type","RasterLayer"),o}return(0,at.Z)(r,[{key:"buildModels",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel=new sL[p](this),y.next=4,this.initLayerModels();case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getDefaultConfig",value:function(){var u=this.getModelType(),c={raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}};return c[u]}},{key:"getModelType",value:function(){var u=this.layerSource.getParserType();switch(u){case"raster":return"raster";case"rasterRgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}}]),r}(Xf),uL=["rasterData"];function Z1(e){var a=lL();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function lL(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var cL=function(e){(0,mr.Z)(r,e);var a=Z1(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S;return $t().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=this.getSourceOption(),S=new Yy((0,te.Z)({},g)).source(y.data,y.options),p&&Object.keys(p).forEach(function(V){var H,ue,le=V;S[le]((H=p[le])===null||H===void 0?void 0:H.field,(ue=p[le])===null||ue===void 0?void 0:ue.values)}),D.next=7,this.addLayer(S);case 7:this.isLoaded=!0;case 8:case"end":return D.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource(),c=this.sourceTile.data.data,p=c.rasterData,g=(0,Nc.Z)(c,uL);return{data:p,options:{parser:(0,te.Z)({type:"rasterRgb",extent:this.sourceTile.bounds},g),transforms:u.transforms}}}}]),r}(em);function fL(e){var a=hL();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function hL(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var pL=function(e){(0,mr.Z)(r,e);var a=fL(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S;return $t().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=this.getSourceOption(),S=new Yy((0,te.Z)({},g)).source(y.data,y.options),p&&Object.keys(p).forEach(function(V){var H,ue,le=V;S[le]((H=p[le])===null||H===void 0?void 0:H.field,(ue=p[le])===null||ue===void 0?void 0:ue.values)}),D.next=7,this.addLayer(S);case 7:this.isLoaded=!0;case 8:case"end":return D.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:u.transforms}}}}]),r}(em),dL=["rasterData"];function vL(e){var a=gL();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function gL(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var mL={positions:[0,1],colors:["#000","#fff"]},yL=function(e){(0,mr.Z)(r,e);var a=vL(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S,O,D,V;return $t().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=this.getSourceOption(),S=this.getLayerOptions(),O=S.rampColors,D=S.domain,this.colorTexture=this.parent.textureService.getColorTexture(O,D),V=new Yy((0,te.Z)((0,te.Z)({},g),{},{colorTexture:this.colorTexture})).source(y.data,y.options),p&&Object.keys(p).forEach(function(le){var we,Ne,dt=le;V[dt]((we=p[dt])===null||we===void 0?void 0:we.field,(Ne=p[dt])===null||Ne===void 0?void 0:Ne.values)}),ue.next=9,this.addLayer(V);case 9:this.isLoaded=!0;case 10:case"end":return ue.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource(),c=this.sourceTile.data.data,p=c.rasterData,g=(0,Nc.Z)(c,dL);return{data:p,options:{parser:(0,te.Z)({type:"raster",extent:this.sourceTile.bounds},g),transforms:u.transforms}}}},{key:"styleUpdate",value:function(){for(var u=this,c=arguments.length,p=new Array(c),g=0;g<c;g++)p[g]=arguments[g];var y=p,S=y.rampColors,O=S===void 0?mL:S,D=y.domain;this.colorTexture=this.parent.textureService.getColorTexture(O,D||ql(O)),this.layers.forEach(function(V){return V.style({colorTexture:u.colorTexture})})}},{key:"destroy",value:function(){this.layers.forEach(function(u){return u.destroy()})}}]),r}(em);function Ky(e){var a=_L();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function _L(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var V1=function(e){(0,mr.Z)(r,e);var a=Ky(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S,O;return $t().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=LD(this.parent.type),S=this.getSourceOption(),S){V.next=8;break}return this.isLoaded=!0,this.emit("loaded"),V.abrupt("return");case 8:return O=new y((0,te.Z)({},g)).source(S.data,S.options),Object.keys(p).forEach(function(H){var ue,le,we=H;O[we]((ue=p[we])===null||ue===void 0?void 0:ue.field,(le=p[we])===null||le===void 0?void 0:le.values)}),V.next=12,this.addLayer(O);case 12:if(!g.tileMask){V.next=15;break}return V.next=15,this.addTileMask();case 15:this.setLayerMinMaxZoom(O),this.isLoaded=!0,this.emit("loaded");case 18:case"end":return V.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource(),c=this.parent.getLayerConfig(),p=c.sourceLayer,g=p===void 0?"defaultLayer":p,y=c.featureId,S=y===void 0?"id":y,O=this.getFeatures(g);return{data:{type:"FeatureCollection",features:O},options:{parser:{type:"geojson",featureId:S},transforms:u.transforms}}}},{key:"setLayerMinMaxZoom",value:function(u){u.getModelType()==="text"&&u.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}},{key:"getFeatures",value:function(u){var c=this.sourceTile.data;return c.getTileData(u)}},{key:"getFeatureById",value:function(u){var c=this.getMainLayer();if(!c)return[];var p=c.getSource().data.dataArray.filter(function(g){return g._id===u});return p}}]),r}(em);function xL(e){var a=e.type;switch(a){case"PolygonLayer":return V1;case"LineLayer":return V1;case"PointLayer":return V1;case"TileDebugLayer":return zD;case"MaskLayer":return $D;case"RasterLayer":var r=e.getSource().parser.dataType;switch(r){case Xl.RGB:case Xl.CUSTOMRGB:return cL;case Xl.ARRAYBUFFER:case Xl.CUSTOMARRAYBUFFER:return yL;case Xl.TERRAINRGB:case Xl.CUSTOMTERRAINRGB:return pL;default:return gM}default:return V1}}var bL=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive","disableMask","enableMask"],xM=wa.debounce,SL=function(){function e(a){var r=this;(0,Rt.Z)(this,e),(0,Fe.Z)(this,"initedTileset",!1),(0,Fe.Z)(this,"mapchange",function(){var u;if(r.parent.isVisible()!==!1){var c=r.getCurrentView(),p=c.latLonBounds,g=c.zoom;if(r.mapService.version==="GAODE1.x"){var y=r.parent.getLayerConfig(),S=y.visible;g<2&&S?(r.parent.updateLayerConfig({visible:!1}),r.layerService.reRender()):g>=2&&!S&&(r.parent.updateLayerConfig({visible:!0}),r.layerService.reRender())}r.lastViewStates&&r.lastViewStates.zoom===g&&r.lastViewStates.latLonBounds.toString()===p.toString()||(r.lastViewStates={zoom:g,latLonBounds:p},(u=r.tilesetManager)===null||u===void 0||u.throttleUpdate(g,p))}}),(0,Fe.Z)(this,"viewchange",xM(this.mapchange,24)),this.parent=a;var o=this.parent.getContainer();this.rendererService=o.get(ut.IRendererService),this.layerService=o.get(ut.ILayerService),this.mapService=o.get(ut.IMapService),this.pickingService=o.get(ut.IPickingService),this.tileLayerService=new PD({rendererService:this.rendererService,layerService:this.layerService,parent:a}),this.tilePickService=new DD({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:a}),this.parent.setLayerPickService(this.tilePickService),this.proxy(a),this.initTileSetManager()}return(0,at.Z)(e,[{key:"initTileSetManager",value:function(){var r,o=this.parent.getSource();if(this.tilesetManager=o.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0),this.parent.isVisible()!==!1){var u=this.getCurrentView(),c=u.latLonBounds,p=u.zoom;(r=this.tilesetManager)===null||r===void 0||r.update(p,c)}}},{key:"getCurrentView",value:function(){var r=this.mapService.getBounds(),o=[r[0][0],r[0][1],r[1][0],r[1][1]],u=this.mapService.getZoom();return{latLonBounds:o,zoom:u}}},{key:"bindTilesetEvent",value:function(){var r=this;this.tilesetManager.on("tile-loaded",function(o){}),this.tilesetManager.on("tile-unload",function(o){r.tileUnLoad(o)}),this.tilesetManager.on("tile-error",function(o,u){r.tileError(o)}),this.tilesetManager.on("tile-update",function(){r.tileUpdate()}),this.mapService.on("zoomend",this.mapchange),this.mapService.on("moveend",this.viewchange)}},{key:"render",value:function(){this.tileLayerService.render()}},{key:"getLayers",value:function(){return this.tileLayerService.getLayers()}},{key:"getTiles",value:function(){return this.tileLayerService.getTiles()}},{key:"getTile",value:function(r){return this.tileLayerService.getTile(r)}},{key:"tileLoaded",value:function(r){}},{key:"tileError",value:function(r){console.warn("error:",r)}},{key:"destroy",value:function(){var r;this.mapService.off("zoomend",this.mapchange),this.mapService.off("moveend",this.viewchange),(r=this.tilesetManager)===null||r===void 0||r.destroy(),this.tileLayerService.destroy()}},{key:"reload",value:function(){var r;this.tilesetManager.clear();var o=this.getCurrentView(),u=o.latLonBounds,c=o.zoom;(r=this.tilesetManager)===null||r===void 0||r.update(c,u)}},{key:"tileUnLoad",value:function(r){this.tileLayerService.removeTile(r.key)}},{key:"tileUpdate",value:function(){var a=(0,fn.Z)($t().mark(function o(){var u=this,c,p;return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(this.tilesetManager){y.next=2;break}return y.abrupt("return");case 2:return c=this.parent.getMinZoom(),p=this.parent.getMaxZoom(),y.next=6,Promise.all(this.tilesetManager.tiles.filter(function(S){return S.isLoaded}).filter(function(S){return S.isVisibleChange}).filter(function(S){return S.data}).filter(function(S){return S.z>=c&&S.z<p}).map(function(){var S=(0,fn.Z)($t().mark(function O(D){var V,H;return $t().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(u.tileLayerService.hasTile(D.key)){le.next=9;break}return V=xL(u.parent),H=new V(D,u.parent),le.next=5,H.initTileLayer();case 5:u.tilePickService.setPickState(),H.getLayers().length!==0&&(u.tileLayerService.addTile(H),u.tileLayerService.updateTileVisible(D),u.layerService.reRender()),le.next=12;break;case 9:u.tileLayerService.updateTileVisible(D),u.tilePickService.setPickState(),u.layerService.reRender();case 12:case"end":return le.stop()}},O)}));return function(O){return S.apply(this,arguments)}}()));case 6:this.tilesetManager.isLoaded&&this.parent.emit("tiles-loaded",this.tilesetManager.currentTiles);case 7:case"end":return y.stop()}},o,this)}));function r(){return a.apply(this,arguments)}return r}()},{key:"setPickState",value:function(r){}},{key:"pickRender",value:function(r){this.tilePickService.pickRender(r)}},{key:"selectFeature",value:function(r){this.tilePickService.selectFeature(r)}},{key:"highlightPickedFeature",value:function(r){this.tilePickService.highlightPickedFeature(r)}},{key:"proxy",value:function(r){var o=this;bL.forEach(function(u){var c=r[u].bind(r);r[u]=function(){for(var p=arguments.length,g=new Array(p),y=0;y<p;y++)g[y]=arguments[y];return c.apply(void 0,g),o.getLayers().map(function(S){S[u].apply(S,g)}),u==="style"&&o.getTiles().forEach(function(S){return S.styleUpdate.apply(S,g)}),r}})}}]),e}(),v0,H1,EL=(v0=(0,Tn.b2)(),v0(H1=function(){function e(){(0,Rt.Z)(this,e)}return(0,at.Z)(e,[{key:"build",value:function(){var a=(0,fn.Z)($t().mark(function o(u){return $t().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return u.prepareBuildModel(),p.next=3,u.buildModels();case 3:case"end":return p.stop()}},o)}));function r(o){return a.apply(this,arguments)}return r}()},{key:"initLayerModel",value:function(){var a=(0,fn.Z)($t().mark(function o(u){return $t().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.build(u);case 2:u.styleNeedUpdate=!1;case 3:case"end":return p.stop()}},o,this)}));function r(o){return a.apply(this,arguments)}return r}()},{key:"prepareLayerModel",value:function(){var a=(0,fn.Z)($t().mark(function o(u){return $t().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.build(u);case 2:u.styleNeedUpdate=!1;case 3:case"end":return p.stop()}},o,this)}));function r(o){return a.apply(this,arguments)}return r}()},{key:"apply",value:function(r){var o=this;r.hooks.init.tapPromise("LayerModelPlugin",(0,fn.Z)($t().mark(function u(){return $t().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!r.getSource().isTile){p.next=4;break}return r.prepareBuildModel(),r.tileLayer=new SL(r),p.abrupt("return");case 4:return r.log(gl.BuildModelStart,Na.INIT),p.next=7,o.initLayerModel(r);case 7:r.log(gl.BuildModelEnd,Na.INIT);case 8:case"end":return p.stop()}},u)}))),r.hooks.beforeRenderData.tapPromise("LayerModelPlugin",function(){var u=(0,fn.Z)($t().mark(function c(p){return $t().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(p){y.next=2;break}return y.abrupt("return",!1);case 2:if(!r.getSource().isTile){y.next=5;break}return r.tileLayer=new SL(r),y.abrupt("return",!1);case 5:return r.log(gl.BuildModelStart,Na.UPDATE),y.next=8,o.prepareLayerModel(r);case 8:return r.log(gl.BuildModelEnd,Na.UPDATE),y.abrupt("return",!0);case 10:case"end":return y.stop()}},c)}));return function(c){return u.apply(this,arguments)}}())}}]),e}())||H1),eS,bM,wL=(eS=(0,Tn.b2)(),eS(bM=function(){function e(){(0,Rt.Z)(this,e)}return(0,at.Z)(e,[{key:"apply",value:function(r){r.hooks.afterInit.tap("LayerStylePlugin",function(){var o=r.getLayerConfig(),u=o.autoFit,c=o.fitBoundsOptions;u&&r.fitBounds(c),r.styleNeedUpdate=!1})}}]),e}())||bM),CL,AL,ZB=["type"],SM={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},EM={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},wM={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},TL={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function ML(e){var a={u_DirectionalLights:new Array(3).fill((0,te.Z)({},wM)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill((0,te.Z)({},TL)),u_NumOfSpotLights:0};return(!e||!e.length)&&(e=[EM]),e.forEach(function(r){var o=r.type,u=o===void 0?"directional":o,c=(0,Nc.Z)(r,ZB),p=SM[u].lights,g=SM[u].num,y=a[g];a[p][y]=(0,te.Z)((0,te.Z)({},a[p][y]),c),a[g]++}),a}var eg=(CL=(0,Tn.b2)(),CL(AL=function(){function e(){(0,Rt.Z)(this,e)}return(0,at.Z)(e,[{key:"apply",value:function(r){r.hooks.beforeRender.tap("LightingPlugin",function(){var o=r.getLayerConfig(),u=o.enableLighting;u&&r.models.forEach(function(c){return c.addUniforms((0,te.Z)({},ML()))})})}}]),e}())||AL),j1,CM,AM=(j1=(0,Tn.b2)(),j1(CM=function(){function e(){(0,Rt.Z)(this,e)}return(0,at.Z)(e,[{key:"apply",value:function(r,o){var u=this,c=o.rendererService,p=o.postProcessingPassFactory,g=o.normalPassFactory;r.hooks.init.tapPromise("MultiPassRendererPlugin",function(){var y=r.getLayerConfig(),S=y.enableMultiPassRenderer,O=y.passes,D=O===void 0?[]:O;u.enabled=!!S&&r.getLayerConfig().enableMultiPassRenderer!==!1,u.enabled&&(r.multiPassRenderer=dC(r,D,p,g),r.multiPassRenderer.setRenderFlag(!0))}),r.hooks.beforeRender.tap("MultiPassRendererPlugin",function(){if(u.enabled){var y=c.getViewportSize(),S=y.width,O=y.height;r.multiPassRenderer.resize(S,O)}})}}]),e}())||CM),tS,TM,g0={NONE:0,ENCODE:1,HIGHLIGHT:2},VB=(tS=(0,Tn.b2)(),tS(TM=function(){function e(){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"PickOption",{u_HighlightColor:[1,0,0,1],u_SelectColor:[1,0,0,1],u_PickingColor:[0,0,0],u_PickingStage:0,u_CurrentSelectedId:[0,0,0],u_PickingThreshold:10,u_PickingBuffer:0,u_shaderPick:0,u_EnableSelect:0,u_activeMix:0})}return(0,at.Z)(e,[{key:"pickOption2Array",value:function(){return Object.values(this.PickOption).flat()}},{key:"updatePickOption",value:function(r,o){var u=this;Object.keys(r).forEach(function(c){u.PickOption[c]=r[c]}),o.uniformBuffers[1].subData({offset:0,data:new Uint8Array(new Float32Array(this.pickOption2Array()))})}},{key:"apply",value:function(r,o){var u=this,c=o.rendererService,p=o.styleAttributeService;if(!c.uniformBuffers[1]){var g=c.createBuffer({data:new Float32Array(this.pickOption2Array().length),isUBO:!0});c.uniformBuffers[1]=g,this.updatePickOption({},c)}r.hooks.init.tapPromise("PixelPickingPlugin",function(){var y=r.getLayerConfig(),S=y.enablePicking;p.registerStyleAttribute({name:"pickingColor",type:Gi.Attribute,descriptor:{name:"a_PickingColor",shaderLocation:tc.PICKING_COLOR,buffer:{data:[],type:gt.FLOAT},size:3,update:function(D){var V=D.id;return S?Es(V):[0,0,0]}}})}),r.hooks.beforePickingEncode.tap("PixelPickingPlugin",function(){var y=r.getLayerConfig(),S=y.enablePicking;S&&r.isVisible()&&(u.updatePickOption({u_PickingStage:g0.ENCODE},c),r.models.forEach(function(O){return O.addUniforms({u_PickingStage:g0.ENCODE})}))}),r.hooks.afterPickingEncode.tap("PixelPickingPlugin",function(){var y=r.getLayerConfig(),S=y.enablePicking;S&&r.isVisible()&&(u.updatePickOption({u_PickingStage:g0.HIGHLIGHT},c),r.models.forEach(function(O){return O.addUniforms({u_PickingStage:g0.HIGHLIGHT})}))}),r.hooks.beforeHighlight.tap("PixelPickingPlugin",function(y){var S=r.getLayerConfig(),O=S.highlightColor,D=S.activeMix,V=D===void 0?0:D,H=typeof O=="string"?no(O):O||[1,0,0,1];r.updateLayerConfig({pickedFeatureID:Kl(new Uint8Array(y))});var ue={u_PickingStage:g0.HIGHLIGHT,u_PickingColor:y,u_HighlightColor:H.map(function(le){return le*255}),u_activeMix:V};u.updatePickOption(ue,c),r.models.forEach(function(le){return le.addUniforms(ue)})}),r.hooks.beforeSelect.tap("PixelPickingPlugin",function(y){var S=r.getLayerConfig(),O=S.selectColor,D=S.selectMix,V=D===void 0?0:D,H=typeof O=="string"?no(O):O||[1,0,0,1];r.updateLayerConfig({pickedFeatureID:Kl(new Uint8Array(y))});var ue={u_PickingStage:g0.HIGHLIGHT,u_PickingColor:y,u_HighlightColor:H.map(function(le){return le*255}),u_activeMix:V,u_CurrentSelectedId:y,u_SelectColor:H.map(function(le){return le*255}),u_EnableSelect:1};console.log(ue),u.updatePickOption(ue,c),r.models.forEach(function(le){return le.addUniforms(ue)})})}}]),e}())||TM),RL=["mvt","geojsonvt","testTile"];function IL(e){var a=e.getSource();return RL.includes(a.parser.type)}function PL(e){return e.getContext?{width:e.width/DOM.DPR,height:e.height/DOM.DPR}:e.getBoundingClientRect()}var MM,RM,W1=(MM=(0,Tn.b2)(),MM(RM=function(){function e(){(0,Rt.Z)(this,e)}return(0,at.Z)(e,[{key:"apply",value:function(r,o){var u=this,c=o.styleAttributeService;r.hooks.init.tapPromise("RegisterStyleAttributePlugin",function(){IL(r)||u.registerBuiltinAttributes(c,r)})}},{key:"registerBuiltinAttributes",value:function(r,o){if(o.type==="MaskLayer"){this.registerPositionAttribute(r);return}this.registerPositionAttribute(r),this.registerColorAttribute(r),this.registerVertexIdAttribute(r)}},{key:"registerPositionAttribute",value:function(r){r.registerStyleAttribute({name:"position",type:Gi.Attribute,descriptor:{name:"a_Position",shaderLocation:tc.POSITION,buffer:{data:[],type:gt.FLOAT},size:3,update:function(u,c,p){return p.length===2?[p[0],p[1],0]:[p[0],p[1],p[2]]}}})}},{key:"registerColorAttribute",value:function(r){r.registerStyleAttribute({name:"color",type:Gi.Attribute,descriptor:{name:"a_Color",shaderLocation:tc.COLOR,buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:4,update:function(u){var c=u.color;return!c||!c.length?[1,1,1,1]:c}}})}},{key:"registerVertexIdAttribute",value:function(r){r.registerStyleAttribute({name:"vertexId",type:Gi.Attribute,descriptor:{name:"a_vertexId",shaderLocation:tc.VERTEX_ID,buffer:{usage:gt.DYNAMIC_DRAW,data:[],type:gt.FLOAT},size:1,update:function(u,c){return[c]}}})}}]),e}())||RM),Xp,rS,G1,IM,PM,X1,np,tg,nS,iS,$1,aS,OM,OL=(Xp=(0,Tn.b2)(),rS=(0,Tn.f3)(ut.ICameraService),G1=(0,Tn.f3)(ut.ICoordinateSystemService),IM=(0,Tn.f3)(ut.IRendererService),PM=(0,Tn.f3)(ut.IMapService),X1=(0,Tn.f3)(ut.ILayerService),Xp(np=(tg=function(){function e(){(0,Rt.Z)(this,e),Za(this,"cameraService",nS,this),Za(this,"coordinateSystemService",iS,this),Za(this,"rendererService",$1,this),Za(this,"mapService",aS,this),Za(this,"layerService",OM,this)}return(0,at.Z)(e,[{key:"apply",value:function(r){var o=this,u=this.mapService.version,c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],p=[0,0],g;this.rendererService.uniformBuffers[0]||(g=this.rendererService.createBuffer({data:new Float32Array(16*5+4*6+4),isUBO:!0}),this.rendererService.uniformBuffers[0]=g),r.hooks.beforeRender.tap("ShaderUniformPlugin",function(){var y=r.getLayerConfig().tileOrigin;o.coordinateSystemService.refresh(y),u==="GAODE2.x"&&(o.setLayerCenter(r),c=o.mapService.map.customCoords.getMVPMatrix(),p=o.mapService.getCustomCoordCenter());var S=o.rendererService.getViewportSize(),O=S.width,D=S.height,V=o.generateUBO(c,p,O,D),H=V.data,ue=V.uniforms;o.layerService.alreadyInRendering&&g&&g.subData({offset:0,data:H}),r.models.forEach(function(le){le.addUniforms((0,te.Z)((0,te.Z)({},ue),{},{u_PickingBuffer:r.getLayerConfig().pickingBuffer||0,u_shaderPick:Number(r.getShaderPickStat())}))})})}},{key:"setLayerCenter",value:function(r){r.coordCenter===void 0&&(r.coordCenter=r.getSource().center),this.mapService.setCoordCenter&&this.mapService.setCoordCenter(r.coordCenter)}},{key:"generateUBO",value:function(r,o,u,c){var p,g=this.cameraService.getProjectionMatrix(),y=this.cameraService.getViewMatrix(),S=this.cameraService.getViewProjectionMatrix(),O=this.cameraService.getModelMatrix(),D=this.coordinateSystemService.getViewportCenterProjection(),V=this.coordinateSystemService.getPixelsPerDegree(),H=this.cameraService.getZoom(),ue=this.coordinateSystemService.getPixelsPerDegree2(),le=this.cameraService.getZoomScale(),we=this.coordinateSystemService.getPixelsPerMeter(),Ne=this.coordinateSystemService.getCoordinateSystem(),dt=this.cameraService.getCameraPosition(),mt=window.devicePixelRatio,Lt=this.coordinateSystemService.getViewportCenter(),Wt=[u,c],qt=this.cameraService.getFocalDistance(),ir=[].concat((0,Sn.Z)(y),(0,Sn.Z)(g),(0,Sn.Z)(S),(0,Sn.Z)(O),(0,Sn.Z)(r),(0,Sn.Z)(D),(0,Sn.Z)(V),[H],(0,Sn.Z)(ue),[le],(0,Sn.Z)(we),[Ne],(0,Sn.Z)(dt),[mt],(0,Sn.Z)(Lt),Wt,(0,Sn.Z)(o),[qt,0]);return{data:ir,uniforms:(p={},(0,Fe.Z)(p,Hm.ProjectionMatrix,g),(0,Fe.Z)(p,Hm.ViewMatrix,y),(0,Fe.Z)(p,Hm.ViewProjectionMatrix,S),(0,Fe.Z)(p,Hm.Zoom,H),(0,Fe.Z)(p,Hm.ZoomScale,le),(0,Fe.Z)(p,Hm.FocalDistance,qt),(0,Fe.Z)(p,Hm.CameraPosition,dt),(0,Fe.Z)(p,Xh.CoordinateSystem,Ne),(0,Fe.Z)(p,Xh.ViewportCenter,Lt),(0,Fe.Z)(p,Xh.ViewportCenterProjection,D),(0,Fe.Z)(p,Xh.PixelsPerDegree,V),(0,Fe.Z)(p,Xh.PixelsPerDegree2,ue),(0,Fe.Z)(p,Xh.PixelsPerMeter,we),(0,Fe.Z)(p,Xh.Mvp,r),(0,Fe.Z)(p,"u_sceneCenterMercator",o),(0,Fe.Z)(p,"u_ViewportSize",Wt),(0,Fe.Z)(p,"u_ModelMatrix",O),(0,Fe.Z)(p,"u_DevicePixelRatio",mt),p)}}}]),e}(),nS=ra(tg.prototype,"cameraService",[rS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iS=ra(tg.prototype,"coordinateSystemService",[G1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$1=ra(tg.prototype,"rendererService",[IM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aS=ra(tg.prototype,"mapService",[PM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),OM=ra(tg.prototype,"layerService",[X1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tg))||np),kM,kL,FL=(kM=(0,Tn.b2)(),kM(kL=function(){function e(){(0,Rt.Z)(this,e)}return(0,at.Z)(e,[{key:"apply",value:function(r){r.hooks.beforeRender.tap("UpdateModelPlugin",function(){r.layerModel&&r.layerModel.needUpdate().then(function(o){o&&r.renderLayers()})}),r.hooks.afterRender.tap("UpdateModelPlugin",function(){r.layerModelNeedUpdate=!1})}}]),e}())||kL),FM,oS,sS=(FM=(0,Tn.b2)(),FM(oS=function(){function e(){(0,Rt.Z)(this,e)}return(0,at.Z)(e,[{key:"apply",value:function(r,o){var u=this,c=o.styleAttributeService;r.hooks.init.tapPromise("UpdateStyleAttributePlugin",function(){u.initStyleAttribute(r,{styleAttributeService:c})}),r.hooks.beforeRender.tap("UpdateStyleAttributePlugin",function(){r.layerModelNeedUpdate||r.inited&&u.updateStyleAttribute(r,{styleAttributeService:c})})}},{key:"updateStyleAttribute",value:function(r,o){var u=o.styleAttributeService,c=u.getLayerStyleAttributes()||[],p=u.getLayerStyleAttribute("filter");if(p&&p.needRegenerateVertices){r.layerModelNeedUpdate=!0,c.forEach(function(g){return g.needRegenerateVertices=!1});return}c.filter(function(g){return g.needRegenerateVertices}).forEach(function(g){u.updateAttributeByFeatureRange(g.name,r.getEncodedData(),g.featureRange.startIndex,g.featureRange.endIndex,r),g.needRegenerateVertices=!1})}},{key:"initStyleAttribute",value:function(r,o){var u=o.styleAttributeService,c=u.getLayerStyleAttributes()||[];c.filter(function(p){return p.needRegenerateVertices}).forEach(function(p){u.updateAttributeByFeatureRange(p.name,r.getEncodedData(),p.featureRange.startIndex,p.featureRange.endIndex),p.needRegenerateVertices=!1})}}]),e}())||oS);Wf.bind(ut.ILayerPlugin).to($k).inRequestScope(),Wf.bind(ut.ILayerPlugin).to(W1).inRequestScope(),Wf.bind(ut.ILayerPlugin).to(MD).inRequestScope(),Wf.bind(ut.ILayerPlugin).to(Xk).inRequestScope(),Wf.bind(ut.ILayerPlugin).to(wL).inRequestScope(),Wf.bind(ut.ILayerPlugin).to(ID).inRequestScope(),Wf.bind(ut.ILayerPlugin).to(sS).inRequestScope(),Wf.bind(ut.ILayerPlugin).to(FL).inRequestScope(),Wf.bind(ut.ILayerPlugin).to(AM).inRequestScope(),Wf.bind(ut.ILayerPlugin).to(OL).inRequestScope(),Wf.bind(ut.ILayerPlugin).to(RD).inRequestScope(),Wf.bind(ut.ILayerPlugin).to(eg).inRequestScope(),Wf.bind(ut.ILayerPlugin).to(VB).inRequestScope(),Wf.bind(ut.ILayerPlugin).to(EL).inRequestScope();var DM,uS,LM,Y1=(DM=db(ut.IGlobalConfigService),uS=function(){function e(a){(0,Rt.Z)(this,e),Za(this,"configService",LM,this),this.config=a}return(0,at.Z)(e,[{key:"setContainer",value:function(r,o,u,c){r.bind(ut.MapConfig).toConstantValue((0,te.Z)((0,te.Z)({},this.config),{},{id:o,canvas:u,hasBaseMap:c})),r.bind(ut.IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),e}(),LM=ra(uS.prototype,"configService",[DM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uS),DL=F(81618),BM=F.n(DL);function tm(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function K1(e,a){var r=Gh([],a,e);return Ov(r,r,1/r[3]),r}function HB(e,a){var r=e%a;return r<0?a+r:r}function NM(e,a,r){return r*a+(1-r)*e}function m0(e,a){if(!e)throw new Error(a||"viewport-mercator-project: assertion failed.")}var $p=Math.PI,zM=$p/4,hv=$p/180,UM=180/$p,lS=512,q1=4003e4,LL=1.5;function ZM(e){return Math.pow(2,e)}function BL(e){return Math.log2(e)}function Q1(e,a){var r=(0,Vi.Z)(e,2),o=r[0],u=r[1];m0(Number.isFinite(o)&&Number.isFinite(a)),m0(Number.isFinite(u)&&u>=-90&&u<=90,"invalid latitude"),a*=lS;var c=o*hv,p=u*hv,g=a*(c+$p)/(2*$p),y=a*($p-Math.log(Math.tan(zM+p*.5)))/(2*$p);return[g,y]}function cS(e,a){var r=(0,Vi.Z)(e,2),o=r[0],u=r[1];a*=lS;var c=o/a*(2*$p)-$p,p=2*(Math.atan(Math.exp($p-u/a*(2*$p)))-zM);return[c*UM,p*UM]}function jB(e){var a=e.latitude;assert(Number.isFinite(a));var r=Math.cos(a*hv);return BL(q1*r)-9}function VM(e){var a=e.latitude,r=e.longitude,o=e.zoom,u=e.scale,c=e.highPrecision,p=c===void 0?!1:c;u=u!==void 0?u:ZM(o),m0(Number.isFinite(a)&&Number.isFinite(r)&&Number.isFinite(u));var g={},y=lS*u,S=Math.cos(a*hv),O=y/360,D=O/S,V=y/q1/S;if(g.pixelsPerMeter=[V,-V,V],g.metersPerPixel=[1/V,-1/V,1/V],g.pixelsPerDegree=[O,-D,V],g.degreesPerPixel=[1/O,-1/D,1/V],p){var H=hv*Math.tan(a*hv)/S,ue=O*H/2,le=y/q1*H,we=le/D*V;g.pixelsPerDegree2=[0,-ue,le],g.pixelsPerMeter2=[we,0,we]}return g}function WB(e,a){var r=_slicedToArray(e,3),o=r[0],u=r[1],c=r[2],p=_slicedToArray(a,3),g=p[0],y=p[1],S=p[2],O=1,D=VM({longitude:o,latitude:u,scale:O,highPrecision:!0}),V=D.pixelsPerMeter,H=D.pixelsPerMeter2,ue=Q1(e,O);ue[0]+=g*(V[0]+H[0]*y),ue[1]+=y*(V[1]+H[1]*y);var le=cS(ue,O),we=(c||0)+(S||0);return Number.isFinite(c)||Number.isFinite(S)?[le[0],le[1],we]:le}function NL(e){var a=e.height,r=e.pitch,o=e.bearing,u=e.altitude,c=e.center,p=c===void 0?null:c,g=e.flipY,y=g===void 0?!1:g,S=tm();return rl(S,S,[0,0,-u]),Bu(S,S,[1,1,1/a]),Wh(S,S,-r*hv),Ya(S,S,o*hv),y&&Bu(S,S,[1,-1,1]),p&&rl(S,S,ao.negate([],p)),S}function GB(e){var a=e.width,r=e.height,o=e.altitude,u=o===void 0?LL:o,c=e.pitch,p=c===void 0?0:c,g=e.nearZMultiplier,y=g===void 0?1:g,S=e.farZMultiplier,O=S===void 0?1:S,D=p*hv,V=Math.atan(.5/u),H=Math.sin(V)*u/Math.sin(Math.PI/2-D-V),ue=Math.cos(Math.PI/2-D)*H+u;return{fov:2*Math.atan(r/2/u),aspect:a/r,focalDistance:u,near:y,far:ue*O}}function ip(e){var a=e.width,r=e.height,o=e.pitch,u=e.altitude,c=e.nearZMultiplier,p=e.farZMultiplier,g=GB({width:a,height:r,altitude:u,pitch:o,nearZMultiplier:c,farZMultiplier:p}),y=g.fov,S=g.aspect,O=g.near,D=g.far,V=er([],y,S,O,D);return V}function rm(e,a){var r=(0,Vi.Z)(e,3),o=r[0],u=r[1],c=r[2],p=c===void 0?0:c;return m0(Number.isFinite(o)&&Number.isFinite(u)&&Number.isFinite(p)),K1(a,[o,u,p,1])}function HM(e,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=(0,Vi.Z)(e,3),u=o[0],c=o[1],p=o[2];if(m0(Number.isFinite(u)&&Number.isFinite(c),"invalid pixel coordinate"),Number.isFinite(p)){var g=K1(a,[u,c,p,1]);return g}var y=K1(a,[u,c,0,1]),S=K1(a,[u,c,1,1]),O=y[2],D=S[2],V=O===D?0:((r||0)-O)/(D-O);return $n.t7([],y,S,V)}var fS=tm(),jM=function(){function e(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=a.width,o=a.height,u=a.viewMatrix,c=u===void 0?fS:u,p=a.projectionMatrix,g=p===void 0?fS:p;(0,Rt.Z)(this,e),this.width=r||1,this.height=o||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=c,this.projectionMatrix=g;var y=tm();mc(y,y,this.projectionMatrix),mc(y,y,this.viewMatrix),this.viewProjectionMatrix=y;var S=tm();Bu(S,S,[this.width/2,-this.height/2,1]),rl(S,S,[1,-1,0]),mc(S,S,this.viewProjectionMatrix);var O=Dc(tm(),S);if(!O)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=S,this.pixelUnprojectionMatrix=O,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return(0,at.Z)(e,[{key:"equals",value:function(r){return r instanceof e?r.width===this.width&&r.height===this.height&&Qa(r.projectionMatrix,this.projectionMatrix)&&Qa(r.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=o.topLeft,c=u===void 0?!0:u,p=this.projectPosition(r),g=rm(p,this.pixelProjectionMatrix),y=(0,Vi.Z)(g,2),S=y[0],O=y[1],D=c?O:this.height-O;return r.length===2?[S,D]:[S,D,g[2]]}},{key:"unproject",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=o.topLeft,c=u===void 0?!0:u,p=o.targetZ,g=(0,Vi.Z)(r,3),y=g[0],S=g[1],O=g[2],D=c?S:this.height-S,V=p&&p*this.pixelsPerMeter,H=HM([y,D,O],this.pixelUnprojectionMatrix,V),ue=this.unprojectPosition(H),le=(0,Vi.Z)(ue,3),we=le[0],Ne=le[1],dt=le[2];return Number.isFinite(O)?[we,Ne,dt]:Number.isFinite(p)?[we,Ne,p]:[we,Ne]}},{key:"projectPosition",value:function(r){var o=this.projectFlat(r),u=(0,Vi.Z)(o,2),c=u[0],p=u[1],g=(r[2]||0)*this.pixelsPerMeter;return[c,p,g]}},{key:"unprojectPosition",value:function(r){var o=this.unprojectFlat(r),u=(0,Vi.Z)(o,2),c=u[0],p=u[1],g=(r[2]||0)/this.pixelsPerMeter;return[c,p,g]}},{key:"projectFlat",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return r}},{key:"unprojectFlat",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return r}}]),e}();function WM(e){var a=e.width,r=e.height,o=e.bounds,u=e.minExtent,c=u===void 0?0:u,p=e.maxZoom,g=p===void 0?24:p,y=e.padding,S=y===void 0?0:y,O=e.offset,D=O===void 0?[0,0]:O,V=(0,Vi.Z)(o,2),H=(0,Vi.Z)(V[0],2),ue=H[0],le=H[1],we=(0,Vi.Z)(V[1],2),Ne=we[0],dt=we[1];if(Number.isFinite(S)){var mt=S;S={top:mt,bottom:mt,left:mt,right:mt}}else m0(Number.isFinite(S.top)&&Number.isFinite(S.bottom)&&Number.isFinite(S.left)&&Number.isFinite(S.right));var Lt=new qy({width:a,height:r,longitude:0,latitude:0,zoom:0}),Wt=Lt.project([ue,dt]),qt=Lt.project([Ne,le]),ir=[Math.max(Math.abs(qt[0]-Wt[0]),c),Math.max(Math.abs(qt[1]-Wt[1]),c)],Sr=[a-S.left-S.right-Math.abs(D[0])*2,r-S.top-S.bottom-Math.abs(D[1])*2];m0(Sr[0]>0&&Sr[1]>0);var Br=Sr[0]/ir[0],Jr=Sr[1]/ir[1],en=(S.right-S.left)/2/Br,Kn=(S.bottom-S.top)/2/Jr,si=[(qt[0]+Wt[0])/2+en,(qt[1]+Wt[1])/2+Kn],Pi=Lt.unproject(si),so=Lt.zoom+Math.log2(Math.abs(Math.min(Br,Jr)));return{longitude:Pi[0],latitude:Pi[1],zoom:Math.min(so,g)}}var qy=function(e){(0,mr.Z)(a,e);function a(){var r,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=o.width,c=o.height,p=o.latitude,g=p===void 0?0:p,y=o.longitude,S=y===void 0?0:y,O=o.zoom,D=O===void 0?0:O,V=o.pitch,H=V===void 0?0:V,ue=o.bearing,le=ue===void 0?0:ue,we=o.altitude,Ne=we===void 0?1.5:we,dt=o.nearZMultiplier,mt=o.farZMultiplier;(0,Rt.Z)(this,a),u=u||1,c=c||1;var Lt=ZM(D);Ne=Math.max(.75,Ne);var Wt=Q1([S,g],Lt);Wt[2]=0;var qt=ip({width:u,height:c,pitch:H,bearing:le,altitude:Ne,nearZMultiplier:dt||1/c,farZMultiplier:mt||1.01}),ir=NL({height:c,center:Wt,pitch:H,bearing:le,altitude:Ne,flipY:!0});return r=(0,Dr.Z)(this,(0,Ft.Z)(a).call(this,{width:u,height:c,viewMatrix:ir,projectionMatrix:qt})),r.latitude=g,r.longitude=S,r.zoom=D,r.pitch=H,r.bearing=le,r.altitude=Ne,r.scale=Lt,r.center=Wt,r.pixelsPerMeter=VM((0,vr.Z)((0,vr.Z)(r))).pixelsPerMeter[2],Object.freeze((0,vr.Z)((0,vr.Z)(r))),r}return(0,at.Z)(a,[{key:"projectFlat",value:function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Q1(o,u)}},{key:"unprojectFlat",value:function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return cS(o,u)}},{key:"getMapCenterByLngLatPosition",value:function(o){var u=o.lngLat,c=o.pos,p=HM(c,this.pixelUnprojectionMatrix),g=Q1(u,this.scale),y=$n.IH([],g,$n.tk([],p)),S=$n.IH([],this.center,y);return cS(S,this.scale)}},{key:"getLocationAtPoint",value:function(o){var u=o.lngLat,c=o.pos;return this.getMapCenterByLngLatPosition({lngLat:u,pos:c})}},{key:"fitBounds",value:function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=this.width,p=this.height,g=WM(Object.assign({width:c,height:p,bounds:o},u)),y=g.longitude,S=g.latitude,O=g.zoom;return new a({width:c,height:p,longitude:y,latitude:S,zoom:O})}}]),a}(jM),hS=function(){function e(){(0,Rt.Z)(this,e)}return(0,at.Z)(e,[{key:"syncWithMapCamera",value:function(r){var o=r.center,u=r.zoom,c=r.pitch,p=r.bearing,g=r.viewportHeight,y=r.viewportWidth,S=this.viewport?{width:this.viewport.width,height:this.viewport.height,longitude:this.viewport.center[0],latitude:this.viewport.center[1],zoom:this.viewport.zoom,pitch:this.viewport.pitch,bearing:this.viewport.bearing}:{};this.viewport=new qy((0,te.Z)((0,te.Z)({},S),{},{width:y,height:g,longitude:o&&o[0],latitude:o&&o[1],zoom:u,pitch:c,bearing:p}))}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(r,o){return this.viewport.projectFlat(r,o)}}]),e}(),GM=function(){function e(a){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"size",1e4),this.size=a||1e4}return(0,at.Z)(e,[{key:"setSize",value:function(r){this.size=r}},{key:"getSize",value:function(){return[this.size,this.size]}},{key:"mercatorXfromLng",value:function(r){return(180+r)/360*this.size}},{key:"mercatorYfromLat",value:function(r){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360)*this.size}},{key:"lngFromMercatorX",value:function(r){return r/this.size*360-180}},{key:"latFromMercatorY",value:function(r){var o=180-(1-r/this.size)*360;return 360/Math.PI*Math.atan(Math.exp(o*Math.PI/180))-90}},{key:"project",value:function(r){var o=this.mercatorXfromLng(r[0]),u=this.mercatorYfromLat(r[1]);return[o,u]}},{key:"unproject",value:function(r){var o=this.lngFromMercatorX(r[0]),u=this.latFromMercatorY(r[1]);return[o,u]}}]),e}();function XM(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a={top:0,right:0,bottom:0,left:0};if(typeof e=="number")return{top:e,right:e,bottom:e,left:e};if(Array.isArray(e)){if(e.length===4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]}}return(0,te.Z)((0,te.Z)({},a),e)}var zL={normal:"amap://styles/normal",light:"amap://styles/c422f5c0cfced5be9fe3a83f05f28a68?isPublic=true",dark:"amap://styles/c9f1d10cae34f8ab05e425462c5a58d7?isPublic=true",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true",fresh:"amap://styles/fresh",grey:"amap://styles/grey",graffiti:"amap://styles/graffiti",macaron:"amap://styles/macaron",darkblue:"amap://styles/darkblue",wine:"amap://styles/wine"},UL=["id","style","minZoom","maxZoom","token","mapInstance","plugin"],$M,pS,y0,Qy,_0,dS,x0,YM,vS,gS,mS;function KM(e,a){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(a||(a=document),!!a)){var u=a.head||a.getElementsByTagName("head")[0];if(!u){u=a.createElement("head");var c=a.body||a.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):a.documentElement.appendChild(u)}var p=a.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(a.createTextNode(e)),u.appendChild(p),p}}KM(`.amap-logo{
 display: none !important;
}
`);var J1={contextmenu:"rightclick"},ex={contextmenu:"rightclick",camerachange:"viewchange"},qM={"GAODE1.x":J1,"GAODE2.x":ex},ZL=0;window.forceWebGL=!0;var QM="15cd8a57710d40c9b7c0e3cc120f1200",VL="1.4.15",HL="amap-script",yS=!1,tx=[],jL=12,JM=($M=(0,Tn.b2)(),pS=(0,Tn.f3)(ut.IGlobalConfigService),y0=(0,Tn.f3)(ut.MapConfig),Qy=(0,Tn.f3)(ut.ICoordinateSystemService),_0=(0,Tn.f3)(ut.IEventEmitter),$M(dS=(x0=function(){function e(){var a=this;(0,Rt.Z)(this,e),(0,Fe.Z)(this,"version",Rc["GAODE1.x"]),(0,Fe.Z)(this,"simpleMapCoord",new GM),(0,Fe.Z)(this,"bgColor","rgba(0, 0, 0, 0)"),Za(this,"configService",YM,this),Za(this,"config",vS,this),Za(this,"coordinateSystemService",gS,this),Za(this,"eventEmitter",mS,this),(0,Fe.Z)(this,"handleCameraChanged",function(r){var o=r.camera,u=o.fov,c=o.near,p=o.far,g=o.height,y=o.pitch,S=o.rotation,O=o.aspect,D=o.position,V=a.getCenter(),H=V.lng,ue=V.lat;if(a.emit("mapchange"),a.cameraChangedCallback){a.viewport.syncWithMapCamera({aspect:O,bearing:360-S,far:p,fov:u,cameraHeight:g,near:c,pitch:y,zoom:a.map.getZoom()-1,center:[H,ue],offsetOrigin:[D.x,D.y]});var le=a.config.offsetZoom,we=le===void 0?jL:le;a.viewport.getZoom()>we?a.coordinateSystemService.setCoordinateSystem(Bc.P20_OFFSET):a.coordinateSystemService.setCoordinateSystem(Bc.P20),a.cameraChangedCallback(a.viewport)}})}return(0,at.Z)(e,[{key:"setBgColor",value:function(r){this.bgColor=r}},{key:"addMarkerContainer",value:function(){var r=this.map.getContainer();if(r!==null){var o=r.getElementsByClassName("amap-maps")[0];this.markerContainer=Ns("div","l7-marker-container",o)}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(r,o){vb.indexOf(r)!==-1?this.eventEmitter.on(r,o):this.map.on(qM[this.version][r]||r,o)}},{key:"off",value:function(r,o){vb.indexOf(r)!==-1?this.eventEmitter.off(r,o):this.map.off(qM[this.version][r]||r,o)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){var r;return(r=this.map.getContainer())===null||r===void 0?void 0:r.getElementsByClassName("amap-maps")[0]}},{key:"getSize",value:function(){var r=this.map.getSize();return[r.getWidth(),r.getHeight()]}},{key:"getType",value:function(){return"amap"}},{key:"getZoom",value:function(){return this.map.getZoom()-1}},{key:"setZoom",value:function(r){return this.map.setZoom(r+1)}},{key:"getCenter",value:function(r){if(r!=null&&r.padding){var o=this.getCenter(),u=XM(r.padding),c=this.lngLatToPixel([o.lng,o.lat]),p=[(u.right-u.left)/2,(u.bottom-u.top)/2],g=this.pixelToLngLat([c.x-p[0],c.y-p[1]]);return g}var y=this.map.getCenter();return{lng:y.getLng(),lat:y.getLat()}}},{key:"setCenter",value:function(r,o){if(o!=null&&o.padding){var u=XM(o.padding),c=this.lngLatToPixel(r),p=[(u.right-u.left)/2,(u.bottom-u.top)/2],g=this.pixelToLngLat([c.x+p[0],c.y+p[1]]);this.map.setCenter([g.lng,g.lat])}else this.map.setCenter(r)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var r=this.map.getBounds().toBounds(),o=r.getNorthEast(),u=r.getSouthWest(),c=this.getCenter(),p=c.lng>o.getLng()||c.lng<u.getLng()?180-o.getLng():o.getLng(),g=c.lng<u.getLng()?u.getLng()-180:u.getLng();return[[g,u.getLat()],[p,o.getLat()]]}},{key:"getMinZoom",value:function(){var r=this.map.get("zooms");return r[0]-1}},{key:"getMaxZoom",value:function(){var r=this.map.get("zooms");return r[1]-1}},{key:"setRotation",value:function(r){return this.map.setRotation(r)}},{key:"setPitch",value:function(r){return this.map.setPitch(r)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(r){this.map.panTo(r)}},{key:"panBy",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.map.panBy(r,o)}},{key:"fitBounds",value:function(r){this.map.setBounds(new AMap.Bounds([r[0][0],r[0][1],r[1][0],r[1][1]]))}},{key:"setZoomAndCenter",value:function(r,o){this.map.setZoomAndCenter(r+1,o)}},{key:"setMapStyle",value:function(r){this.map.setMapStyle(this.getMapStyleValue(r))}},{key:"setMapStatus",value:function(r){this.map.setStatus(r)}},{key:"getMapStyleConfig",value:function(){return zL}},{key:"getMapStyleValue",value:function(r){return this.getMapStyleConfig()[r]||r}},{key:"getMapStyle",value:function(){return this.map.getMapStyle()}},{key:"pixelToLngLat",value:function(r){var o=this.map.pixelToLngLat(new AMap.Pixel(r[0],r[1]));return{lng:o.getLng(),lat:o.getLat()}}},{key:"lngLatToPixel",value:function(r){var o=this.map.lnglatToPixel(new AMap.LngLat(r[0],r[1]));return{x:o.getX(),y:o.getY()}}},{key:"containerToLngLat",value:function(r){var o=new AMap.Pixel(r[0],r[1]),u=this.map.containerToLngLat(o);return{lng:u==null?void 0:u.getLng(),lat:u==null?void 0:u.getLat()}}},{key:"lngLatToContainer",value:function(r){var o=new AMap.LngLat(r[0],r[1]),u=this.map.lngLatToContainer(o);return{x:u.getX(),y:u.getY()}}},{key:"lngLatToCoord",value:function(r){var o=this.map.lngLatToGeodeticCoord(r),u=o.x,c=o.y;return[u,-c]}},{key:"lngLatToMercator",value:function(r,o){return{x:0,y:0,z:0}}},{key:"getModelMatrix",value:function(r,o,u){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],p=this.viewport.projectFlat(r),g=vu();return rl(g,g,ao.fromValues(p[0],p[1],o)),Bu(g,g,ao.fromValues(c[0],c[1],c[2])),Wh(g,g,u[0]),Kd(g,g,u[1]),Ya(g,g,u[2]),g}},{key:"init",value:function(){var a=(0,fn.Z)($t().mark(function o(){var u=this,c,p,g,y,S,O,D,V,H,ue,le,we,Ne,dt;return $t().wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return c=this.config,p=c.id,g=c.style,y=g===void 0?"light":g,S=c.minZoom,O=S===void 0?0:S,D=c.maxZoom,V=D===void 0?18:D,H=c.token,ue=H===void 0?QM:H,le=c.mapInstance,we=c.plugin,Ne=we===void 0?[]:we,dt=(0,Nc.Z)(c,UL),Lt.next=3,new Promise(function(Wt){var qt=function(){if(le)u.map=le,u.$mapContainer=u.map.getContainer(),setTimeout(function(){u.map.on("camerachange",u.handleCameraChanged),Wt()},30);else{u.$mapContainer=u.creatMapContainer(p);var Sr=(0,te.Z)({mapStyle:u.getMapStyleValue(y),zooms:[O,V],viewMode:"3D"},dt);Sr.zoom&&(Sr.zoom+=1);var Br=new AMap.Map(u.$mapContainer,Sr);Br.on("camerachange",u.handleCameraChanged),Br.on("camerachange",function(){setTimeout(function(){return u.handleAfterMapChange()})}),u.map=Br,setTimeout(function(){Wt()},10)}};!yS&&!le?(ue===QM&&console.warn("%c".concat(u.configService.getSceneWarninfo("MapToken"),"!"),"color: #873bf4;font-weigh:900;font-size: 16px;"),yS=!0,Ne.push("Map3D"),BM().load({key:ue,version:VL,plugins:Ne}).then(function(){qt(),tx.length&&(tx.forEach(function(ir){return ir()}),tx=[])}).catch(function(ir){throw new Error(ir)})):yS&&window.AMap||le?qt():tx.push(qt)});case 3:this.viewport=new hS;case 4:case"end":return Lt.stop()}},o,this)}));function r(){return a.apply(this,arguments)}return r}()},{key:"meterToCoord",value:function(r,o){var u=AMap.GeometryUtil.distance(sn(AMap.LngLat,(0,Sn.Z)(r)),sn(AMap.LngLat,(0,Sn.Z)(o))),c=this.lngLatToCoord(r),p=(0,Vi.Z)(c,2),g=p[0],y=p[1],S=this.lngLatToCoord(o),O=(0,Vi.Z)(S,2),D=O[0],V=O[1],H=Math.sqrt(Math.pow(g-D,2)+Math.pow(y-V,2));return H/u}},{key:"updateView",value:function(r){}},{key:"getOverlayContainer",value:function(){}},{key:"exportMap",value:function(r){var o,u=(o=this.getContainer())===null||o===void 0?void 0:o.getElementsByClassName("amap-layer")[0],c=r==="jpg"?u==null?void 0:u.toDataURL("image/jpeg"):u==null?void 0:u.toDataURL("image/png");return c}},{key:"emit",value:function(r){for(var o,u=arguments.length,c=new Array(u>1?u-1:0),p=1;p<u;p++)c[p-1]=arguments[p];(o=this.eventEmitter).emit.apply(o,[r].concat(c))}},{key:"once",value:function(r){for(var o,u=arguments.length,c=new Array(u>1?u-1:0),p=1;p<u;p++)c[p-1]=arguments[p];(o=this.eventEmitter).once.apply(o,[r].concat(c))}},{key:"destroy",value:function(){var r;(r=this.$mapContainer)===null||r===void 0||(r=r.parentNode)===null||r===void 0||r.removeChild(this.$mapContainer),delete window.initAMap;var o=document.getElementById(HL);o&&document.head.removeChild(o),this.map.destroy()}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(r){this.cameraChangedCallback=r}},{key:"handleAfterMapChange",value:function(){this.emit("mapAfterFrameChange")}},{key:"creatMapContainer",value:function(r){var o=r;typeof r=="string"&&(o=document.getElementById(r));var u=document.createElement("div");return u.style.cssText+=`
       position: absolute;
       top: 0;
       height: 100%;
       width: 100%;
     `,u.id="l7_amap_div"+ZL++,o.appendChild(u),u}}]),e}(),YM=ra(x0.prototype,"configService",[pS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vS=ra(x0.prototype,"config",[y0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gS=ra(x0.prototype,"coordinateSystemService",[Qy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mS=ra(x0.prototype,"eventEmitter",[_0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x0))||dS);if(!window)throw Error("AMap JSAPI can only be used in Browser.");var Rd=function(e){return e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed",e}(Rd||{}),Zu={key:"",AMap:{version:"2.0",plugins:[]}},ap={AMap:Rd.notload},_S=[],xS=function(a){if(typeof a=="function"){if(ap.AMap===Rd.loaded){a(window.AMap);return}_S.push(a)}},WL=function(){var e=(0,fn.Z)($t().mark(function a(r){return $t().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",new Promise(function(c,p){if(ap.AMap===Rd.failed)p("");else if(ap.AMap===Rd.notload){var g=r.key,y=r.version,S=r.plugins;if(!g){p("\u8BF7\u586B\u5199key");return}window.AMap&&location.host!=="lbs.amap.com"&&p("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),Zu.key=g,Zu.AMap.version=y||Zu.AMap.version,Zu.AMap.plugins=S||Zu.AMap.plugins,ap.AMap=Rd.loading;var O=document.body||document.head;window._onAPILoaded=function(ue){ue?(ap.AMap=Rd.failed,p(ue)):(ap.AMap=Rd.loaded,c(null))};var D=document.createElement("script");D.type="text/javascript",D.async=!1,D.src="https://webapi.amap.com/maps?callback=_onAPILoaded&v="+Zu.AMap.version+"&key="+g+"&plugin="+Zu.AMap.plugins.join(","),D.onerror=function(ue){ap.AMap=Rd.failed,p(ue)},O.appendChild(D)}else if(ap.AMap===Rd.loaded){if(r.key&&r.key!==Zu.key){p("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");return}if(r.version&&r.version!==Zu.AMap.version){p("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");return}var V=[];r.plugins&&r.plugins.forEach(function(ue){Zu.AMap.plugins.indexOf(ue)===-1&&V.push(ue)}),V.length&&window.AMap.plugin(V,function(){c(window.AMap)})}else{if(r.key&&r.key!==Zu.key){p("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");return}if(r.version&&r.version!==Zu.AMap.version){p("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");return}var H=[];r.plugins&&r.plugins.forEach(function(ue){Zu.AMap.plugins.indexOf(ue)===-1&&H.push(ue)}),xS(function(){H.length&&window.AMap.plugin(H,function(){c(window.AMap)})})}}));case 1:case"end":return u.stop()}},a)}));return function(r){return e.apply(this,arguments)}}();function GL(){delete window.AMap,Zu={key:"",AMap:{version:"1.4.15",plugins:[]}},ap={AMap:Rd.notload}}var XL={load:WL,reset:GL},e3=Math.PI/180,t3=function(){function e(){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"projectionMatrix",vu()),(0,Fe.Z)(this,"viewMatrix",vu()),(0,Fe.Z)(this,"viewProjectionMatrix",vu()),(0,Fe.Z)(this,"ViewProjectionMatrixUncentered",vu()),(0,Fe.Z)(this,"viewUncenteredMatrix",vu())}return(0,at.Z)(e,[{key:"syncWithMapCamera",value:function(r){var o=r.zoom,u=o===void 0?1:o,c=r.pitch,p=c===void 0?0:c,g=r.bearing,y=g===void 0?0:g,S=r.center,O=S===void 0?[0,0]:S,D=r.offsetOrigin,V=D===void 0?[0,0]:D,H=r.cameraHeight,ue=H===void 0?1:H,le=r.aspect,we=le===void 0?1:le,Ne=r.near,dt=Ne===void 0?.1:Ne,mt=r.far,Lt=mt===void 0?1e3:mt,Wt=r.fov,qt=Wt===void 0?0:Wt;this.zoom=u,this.center=O;var ir=p*e3,Sr=(360-y)*e3;er(this.projectionMatrix,qt,we,dt,Lt);var Br=ao.fromValues(ue*Math.sin(ir)*Math.sin(Sr),-ue*Math.sin(ir)*Math.cos(Sr),ue*Math.cos(ir)),Jr=ao.fromValues(-Math.cos(ir)*Math.sin(Sr),Math.cos(ir)*Math.cos(Sr),Math.sin(ir));nn(this.viewMatrix,Br,ao.fromValues(0,0,0),Jr),this.viewUncenteredMatrix=$d(this.viewMatrix),rl(this.viewMatrix,this.viewMatrix,ao.fromValues(-V[0],V[1],0)),mc(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),mc(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 524288}},{key:"getCenter",value:function(){var r=(0,Vi.Z)(this.center,2),o=r[0],u=r[1];return[o,u]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(r){var o=85.0511287798,u=Math.max(Math.min(o,r[1]),-o),c=256<<20,p=Math.PI/180,g=r[0]*p,y=u*p;y=Math.log(Math.tan(Math.PI/4+y/2));var S=.5/Math.PI,O=.5,D=-.5/Math.PI;return p=.5,g=c*(S*g+O)-215440491,y=-(c*(D*y+p)-106744817),[g,y]}}]),e}(),$L=["id","style","minZoom","maxZoom","token","mapInstance","plugin"],r3,n3;function YL(e){var a=KL();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function KL(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}window.forceWebGL=!0;var i3="15cd8a57710d40c9b7c0e3cc120f1200",qL="1.4.15",bS=!1,SS=[],ES=12,QL=(r3=(0,Tn.b2)(),r3(n3=function(e){(0,mr.Z)(r,e);var a=YL(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"version","GAODE1.x"),(0,Fe.Z)((0,vr.Z)(o),"handleCameraChanged",function(g){var y=g.camera,S=y.fov,O=y.near,D=y.far,V=y.height,H=y.pitch,ue=y.rotation,le=y.aspect,we=y.position,Ne=o.getCenter(),dt=Ne.lng,mt=Ne.lat;if(o.emit("mapchange"),o.cameraChangedCallback){o.viewport.syncWithMapCamera({aspect:le,bearing:360-ue,far:D,fov:S,cameraHeight:V,near:O,pitch:H,zoom:o.map.getZoom()-1,center:[dt,mt],offsetOrigin:[we.x,we.y]});var Lt=o.config.offsetZoom,Wt=Lt===void 0?ES:Lt;o.viewport.getZoom()>Wt?o.coordinateSystemService.setCoordinateSystem(Bc.P20_OFFSET):o.coordinateSystemService.setCoordinateSystem(Bc.P20),o.cameraChangedCallback(o.viewport)}}),o}return(0,at.Z)(r,[{key:"getModelMatrix",value:function(u,c,p){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],y=this.viewport.projectFlat(u),S=vu();return rl(S,S,ao.fromValues(y[0],y[1],c)),Bu(S,S,ao.fromValues(g[0],g[1],g[2])),Wh(S,S,p[0]),Kd(S,S,p[1]),Ya(S,S,p[2]),S}},{key:"init",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p=this,g,y,S,O,D,V,H,ue,le,we,Ne,dt,mt,Lt;return $t().wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:return g=this.config,y=g.id,S=g.style,O=S===void 0?"light":S,D=g.minZoom,V=D===void 0?0:D,H=g.maxZoom,ue=H===void 0?18:H,le=g.token,we=le===void 0?i3:le,Ne=g.mapInstance,dt=g.plugin,mt=dt===void 0?[]:dt,Lt=(0,Nc.Z)(g,$L),qt.next=3,new Promise(function(ir){var Sr=function(){if(Ne)p.map=Ne,p.$mapContainer=p.map.getContainer(),setTimeout(function(){p.map.on("camerachange",p.handleCameraChanged),ir()},30);else{p.$mapContainer=p.creatMapContainer(y);var Jr=(0,te.Z)({mapStyle:p.getMapStyleValue(O),zooms:[V,ue],viewMode:"3D"},Lt);Jr.zoom&&(Jr.zoom+=1);var en=new AMap.Map(p.$mapContainer,Jr);en.on("camerachange",p.handleCameraChanged),en.on("camerachange",function(){setTimeout(function(){return p.handleAfterMapChange()})}),p.map=en,setTimeout(function(){ir()},10)}};!bS&&!Ne?(we===i3&&console.warn(p.configService.getSceneWarninfo("MapToken")),bS=!0,mt.push("Map3D"),XL.load({key:we,version:qL,plugins:mt}).then(function(Br){Sr(),SS.length&&(SS.forEach(function(Jr){return Jr()}),SS=[])}).catch(function(Br){throw new Error(Br)})):bS&&window.AMap||Ne?Sr():SS.push(Sr)});case 3:this.viewport=new t3;case 4:case"end":return qt.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"meterToCoord",value:function(u,c){var p=AMap.GeometryUtil.distance(sn(AMap.LngLat,(0,Sn.Z)(u)),sn(AMap.LngLat,(0,Sn.Z)(c))),g=this.lngLatToCoord(u),y=(0,Vi.Z)(g,2),S=y[0],O=y[1],D=this.lngLatToCoord(c),V=(0,Vi.Z)(D,2),H=V[0],ue=V[1],le=Math.sqrt(Math.pow(S-H,2)+Math.pow(O-ue,2));return le/p}},{key:"updateView",value:function(u){}},{key:"getOverlayContainer",value:function(){}},{key:"exportMap",value:function(u){var c,p=(c=this.getContainer())===null||c===void 0?void 0:c.getElementsByClassName("amap-layer")[0],g=u==="jpg"?p==null?void 0:p.toDataURL("image/jpeg"):p==null?void 0:p.toDataURL("image/png");return g}},{key:"onCameraChanged",value:function(u){this.cameraChangedCallback=u}}]),r}(JM))||n3);function JL(e){var a=e5();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function e5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var t5=function(e){(0,mr.Z)(r,e);var a=JL(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getServiceConstructor",value:function(){return QL}}]),r}(Y1),wS=function(){function e(){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"projectionMatrix",vu()),(0,Fe.Z)(this,"viewMatrix",vu()),(0,Fe.Z)(this,"viewProjectionMatrix",vu()),(0,Fe.Z)(this,"ViewProjectionMatrixUncentered",vu()),(0,Fe.Z)(this,"viewUncenteredMatrix",vu())}return(0,at.Z)(e,[{key:"syncWithMapCamera",value:function(r){var o=r.zoom,u=o===void 0?1:o,c=r.center,p=c===void 0?[0,0]:c,g=r.offsetOrigin,y=g===void 0?[0,0]:g,S=r.cameraPosition,O=S===void 0?[0,0,0]:S,D=r.up,V=D===void 0?[0,1,0]:D,H=r.lookAt,ue=H===void 0?[0,0,0]:H,le=r.aspect,we=le===void 0?1:le,Ne=r.near,dt=Ne===void 0?.1:Ne,mt=r.far,Lt=mt===void 0?1e3:mt,Wt=r.fov,qt=Wt===void 0?45:Wt;this.zoom=u,this.center=p,er(this.projectionMatrix,qt/180*Math.PI,we,dt,Lt);var ir=ao.fromValues.apply(ao,(0,Sn.Z)(O)),Sr=ao.fromValues.apply(ao,(0,Sn.Z)(ue)),Br=ao.fromValues.apply(ao,(0,Sn.Z)(V));nn(this.viewMatrix,ir,Sr,Br),this.viewUncenteredMatrix=$d(this.viewMatrix),rl(this.viewMatrix,this.viewMatrix,ao.fromValues(-y[0],y[1],0)),mc(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),mc(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 1048576}},{key:"getCenter",value:function(){var r=(0,Vi.Z)(this.center,2),o=r[0],u=r[1];return[o,u]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1.2}},{key:"projectFlat",value:function(r){var o=85.0511287798,u=Math.max(Math.min(o,r[1]),-o),c=256<<20,p=Math.PI/180,g=r[0]*p,y=u*p;y=Math.log(Math.tan(Math.PI/4+y/2));var S=.5/Math.PI,O=.5,D=-.5/Math.PI;return p=.5,g=c*(S*g+O)-215440491,y=-(c*(D*y+p)-106744817),[g,y]}}]),e}(),Jy=["id","style","minZoom","maxZoom","token","mapInstance","plugin","version"],e_,a3;function r5(e){var a=o3();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function o3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function n5(e,a){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(a||(a=document),!!a)){var u=a.head||a.getElementsByTagName("head")[0];if(!u){u=a.createElement("head");var c=a.body||a.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):a.documentElement.appendChild(u)}var p=a.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(a.createTextNode(e)),u.appendChild(p),p}}n5(`.amap-logo{
 display: none !important;
}
`);var s3=[108.92361,34.54083];window.forceWebGL=!0;var u3="f59bcf249433f8b05caaee19f349b3d7",l3="2.0",XB=!1,$B=null,i5=(e_=(0,Tn.b2)(),e_(a3=function(e){(0,mr.Z)(r,e);var a=r5(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"version","GAODE2.x"),(0,Fe.Z)((0,vr.Z)(o),"handleViewChanged",function(g){var y=o.map.customCoords.getCameraParams(),S=y.fov,O=y.near,D=y.far,V=y.aspect,H=y.position,ue=y.lookAt,le=y.up;o.emit("mapchange");var we=o.map.customCoords.getCenter();o.cameraChangedCallback&&(o.viewport.syncWithMapCamera({aspect:V,far:D,fov:S,cameraPosition:H,lookAt:ue,up:le,near:O,zoom:o.map.getZoom()-1,center:we,offsetOrigin:[H[0],H[1]]}),o.coordinateSystemService.setCoordinateSystem(Bc.P20_2),o.cameraChangedCallback(o.viewport))}),o}return(0,at.Z)(r,[{key:"setCustomCoordCenter",value:function(u){this.sceneCenter=u,this.sceneCenterMercator=Zl.apply(void 0,(0,Sn.Z)(u))}},{key:"getCustomCoordCenter",value:function(){return this.sceneCenterMercator}},{key:"lngLatToCoordByLayer",value:function(u,c){var p=c||this.sceneCenterMercator,g=this._sub(Zl(u[0],u[1]),p);return u[2]&&g.push(u[2]),g}},{key:"coordToAMap2RelativeCoordinates",value:function(u,c){var p=this,g=Zl(c[0],c[1]);return typeof u[0]=="number"?this.lngLatToCoordByLayer(u,g):u.map(function(y){return Array.isArray(y)&&typeof y[0]=="number"?p.lngLatToCoordByLayer(y,g):y.map(function(S){return p.lngLatToCoordByLayer(S,g)})})}},{key:"setCoordCenter",value:function(u){this.map.customCoords.setCenter(u||s3),this.setCustomCoordCenter(u||s3)}},{key:"lngLatToCoord",value:function(u){return this.sceneCenter||(this.map.customCoords.setCenter(u),this.setCustomCoordCenter(u)),this._sub(Zl(u[0],u[1]),this.sceneCenterMercator)}},{key:"lngLatToCoords",value:function(u){var c=this;return u.map(function(p){return typeof p[0]=="number"?c.lngLatToCoord(p):p.map(function(g){return c.lngLatToCoord(g)})})}},{key:"addMarkerContainer",value:function(){if(this.map){var u=this.map.getContainer();if(u!==null){var c=u.getElementsByClassName("amap-maps")[0];c.style.zIndex="auto",this.markerContainer=Ns("div","l7-marker-container2",c)}}}},{key:"updateView",value:function(u){}},{key:"getOverlayContainer",value:function(){}},{key:"getType",value:function(){return"amap2"}},{key:"getBounds",value:function(){var u=this.map.getBounds(),c=u.getNorthEast(),p=u.getSouthWest(),g=this.getCenter(),y=g.lng>c.getLng()||g.lng<p.getLng()?180-c.getLng():c.getLng(),S=g.lng<p.getLng()?p.getLng()-180:p.getLng();return[[S,p.getLat()],[y,c.getLat()]]}},{key:"getMinZoom",value:function(){var u=this.map.getZooms();return u[0]-1}},{key:"getMaxZoom",value:function(){var u=this.map.getZooms();return u[1]-1}},{key:"lngLatToContainer",value:function(u){var c=this.map.lngLatToContainer(u);return{x:c.getX(),y:c.getY()}}},{key:"lngLatToPixel",value:function(u){var c=this.map.lngLatToPixel(new AMap.LngLat(u[0],u[1]));return{x:c.getX(),y:c.getY()}}},{key:"getModelMatrix",value:function(u,c,p){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],y=this.map.customCoords.lngLatToCoord(u),S=vu();return rl(S,S,ao.fromValues(y[0],y[1],c)),Bu(S,S,ao.fromValues(g[0],g[1],g[2])),Wh(S,S,p[0]),Kd(S,S,p[1]),Ya(S,S,p[2]),S}},{key:"init",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p,g,y,S,O,D,V,H,ue,le,we,Ne,dt,mt,Lt,Wt,qt,ir,Sr,Br,Jr,en;return $t().wrap(function(si){for(;;)switch(si.prev=si.next){case 0:if(p=this.config,g=p.id,y=p.style,S=y===void 0?"light":y,O=p.minZoom,D=O===void 0?0:O,V=p.maxZoom,H=V===void 0?18:V,ue=p.token,le=ue===void 0?u3:ue,we=p.mapInstance,Ne=p.plugin,dt=Ne===void 0?[]:Ne,mt=p.version,Lt=mt===void 0?l3:mt,Wt=(0,Nc.Z)(p,Jy),this.viewport=new wS,window.AMap||we){si.next=6;break}return dt.push("Map3D"),si.next=6,BM().load({key:le,version:l3,plugins:dt});case 6:we?(this.map=we,this.$mapContainer=this.map.getContainer(),ir=this.map.getCenter(),(qt=this.map.customCoords)===null||qt===void 0||qt.setCenter([ir.lng,ir.lat]),this.setCustomCoordCenter([ir.lng,ir.lat]),this.map.on("viewchange",this.handleViewChanged)):(this.$mapContainer=this.creatMapContainer(g),Br=(0,te.Z)({mapStyle:this.getMapStyleValue(S),zooms:[D,H],viewMode:"3D"},Wt),Br.zoom&&(Br.zoom+=1),le===u3&&(window._AMapSecurityConfig={securityJsCode:"2653011adeb04230b3a26cc9a780a800"},console.warn("%c".concat(this.configService.getSceneWarninfo("MapToken"),"!"),"color: #873bf4;font-weigh:900;font-size: 16px;")),Jr=new AMap.Map(this.$mapContainer,Br),this.map=Jr,en=Jr.getCenter(),(Sr=this.map.customCoords)===null||Sr===void 0||Sr.setCenter([en.lng,en.lat]),this.setCustomCoordCenter([en.lng,en.lat]),Jr.on("viewchange",this.handleViewChanged)),this.initViewPort();case 8:case"end":return si.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(u){this.cameraChangedCallback=u}},{key:"initViewPort",value:function(){var u,c=(u=this.map.customCoords)===null||u===void 0?void 0:u.getCameraParams(),p=c.fov,g=c.near,y=c.far,S=c.aspect,O=c.position,D=c.lookAt,V=c.up;this.emit("mapchange");var H=this.map.customCoords.getCenter(),ue=this.map.getZoom();this.cameraChangedCallback&&(this.viewport.syncWithMapCamera({aspect:S,far:y,fov:p,cameraPosition:O,lookAt:D,near:g,up:V,zoom:ue-1,center:H,offsetOrigin:[O[0],O[1]]}),this.coordinateSystemService.setCoordinateSystem(Bc.P20_2),this.cameraChangedCallback(this.viewport))}},{key:"_sub",value:function(u,c){var p=[0,0];return p[0]=u[0]-c[0],p[1]=u[1]-c[1],p}}]),r}(JM))||a3);function c3(e){var a=a5();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function a5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var CS=function(e){(0,mr.Z)(r,e);var a=c3(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getServiceConstructor",value:function(){return i5}}]),r}(Y1),o5=F(99874),Id=F.n(o5);function s5(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=u5(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function u5(e,a){if(e){if(typeof e=="string")return AS(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AS(e,a)}}function AS(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var TS;function MS(e,a,r){var o=r-a,u=((e-a)%o+o)%o+a;return u===a?r:u}function pv(e,a,r){return Math.min(r,Math.max(a,e))}function op(e,a,r){return e*(1-r)+a*r}function RS(e,a,r,o){var u=new(Id())(e,a,r,o);return function(c){return u.solve(c)}}var IS=RS(.25,.1,.25,1);function f3(){return TS==null&&(TS=window.matchMedia("(prefers-reduced-motion: reduce)")),TS.matches}function l5(e,a){var r={},o=s5(a),u;try{for(o.s();!(u=o.n()).done;){var c=u.value;c in e&&(r[c]=e[c])}}catch(p){o.e(p)}finally{o.f()}return r}var rg=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date),c5=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,f5=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame;function h3(e){var a=c5(e);return{cancel:function(){return f5(a)}}}function h5(e){for(var a=arguments.length,r=new Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];for(var u=0,c=r;u<c.length;u++){var p=c[u];for(var g in p)p[g]!==void 0&&(e[g]=p[g])}return e}var p3=63710088e-1,Vu=function(){function e(a,r){if((0,Rt.Z)(this,e),isNaN(a)||isNaN(r))throw new Error("Invalid LngLat object: (".concat(a,", ").concat(r,")"));if(this.lng=+a,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return(0,at.Z)(e,[{key:"wrap",value:function(){return new e(MS(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(r){var o=Math.PI/180,u=this.lat*o,c=r.lat*o,p=Math.sin(u)*Math.sin(c)+Math.cos(u)*Math.cos(c)*Math.cos((r.lng-this.lng)*o),g=p3*Math.acos(Math.min(p,1));return g}}],[{key:"convert",value:function(r){if(r instanceof e)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new e(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&(0,_f.Z)(r)==="object"&&r!==null){var o="lng"in r?r.lng:r.lon;return new e(Number(o),Number(r.lat))}throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),e}(),PS=function(){function e(a,r){(0,Rt.Z)(this,e),a&&(r?this.setSouthWest(a).setNorthEast(r):a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1]))}return(0,at.Z)(e,[{key:"setNorthEast",value:function(r){return this.ne=r instanceof Vu?new Vu(r.lng,r.lat):Vu.convert(r),this}},{key:"setSouthWest",value:function(r){return this.sw=r instanceof Vu?new Vu(r.lng,r.lat):Vu.convert(r),this}},{key:"extend",value:function(r){var o=this.sw,u=this.ne,c,p;if(r instanceof Vu)c=r,p=r;else if(r instanceof e){if(c=r.sw,p=r.ne,!c||!p)return this}else{if(Array.isArray(r))if(r.length===4||r.every(Array.isArray)){var g=r;return this.extend(e.convert(g))}else{var y=r;return this.extend(Vu.convert(y))}return this}return!o&&!u?(this.sw=new Vu(c.lng,c.lat),this.ne=new Vu(p.lng,p.lat)):(o.lng=Math.min(c.lng,o.lng),o.lat=Math.min(c.lat,o.lat),u.lng=Math.max(p.lng,u.lng),u.lat=Math.max(p.lat,u.lat)),this}},{key:"getCenter",value:function(){return new Vu((this.sw.lng+this.ne.lng)/2,(this.sw.lat+this.ne.lat)/2)}},{key:"getSouthWest",value:function(){return this.sw}},{key:"getNorthEast",value:function(){return this.ne}},{key:"getNorthWest",value:function(){return new Vu(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new Vu(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this.sw.lng}},{key:"getSouth",value:function(){return this.sw.lat}},{key:"getEast",value:function(){return this.ne.lng}},{key:"getNorth",value:function(){return this.ne.lat}},{key:"toArray",value:function(){return[this.sw.toArray(),this.ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this.sw.toString(),", ").concat(this.ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this.sw&&this.ne)}},{key:"contains",value:function(r){var o=Vu.convert(r),u=o.lng,c=o.lat,p=this.sw.lat<=c&&c<=this.ne.lat,g=this.sw.lng<=u&&u<=this.ne.lng;return this.sw.lng>this.ne.lng&&(g=this.sw.lng>=u&&u>=this.ne.lng),p&&g}}],[{key:"convert",value:function(r){return r instanceof e?r:new e(r)}}]),e}(),is=function(){function e(a,r){(0,Rt.Z)(this,e),this.x=a,this.y=r}return(0,at.Z)(e,[{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"_add",value:function(r){return this.x+=r.x,this.y+=r.y,this}},{key:"add",value:function(r){return this.clone()._add(r)}},{key:"_sub",value:function(r){return this.x-=r.x,this.y-=r.y,this}},{key:"sub",value:function(r){return this.clone()._sub(r)}},{key:"_multByPoint",value:function(r){return this.x*=r.x,this.y*=r.y,this}},{key:"multByPoint",value:function(r){return this.clone()._multByPoint(r)}},{key:"_divByPoint",value:function(r){return this.x/=r.x,this.y/=r.y,this}},{key:"divByPoint",value:function(r){return this.clone()._divByPoint(r)}},{key:"_mult",value:function(r){return this.x*=r,this.y*=r,this}},{key:"mult",value:function(r){return this.clone()._mult(r)}},{key:"_div",value:function(r){return this.x/=r,this.y/=r,this}},{key:"div",value:function(r){return this.clone()._div(r)}},{key:"_rotate",value:function(r){var o=Math.cos(r),u=Math.sin(r),c=o*this.x-u*this.y,p=u*this.x+o*this.y;return this.x=c,this.y=p,this}},{key:"rotate",value:function(r){return this.clone()._rotate(r)}},{key:"_rotateAround",value:function(r,o){var u=Math.cos(r),c=Math.sin(r),p=o.x+u*(this.x-o.x)-c*(this.y-o.y),g=o.y+c*(this.x-o.x)+u*(this.y-o.y);return this.x=p,this.y=g,this}},{key:"roateAround",value:function(r,o){return this.clone()._rotateAround(r,o)}},{key:"_matMult",value:function(r){var o=r[0]*this.x+r[1]*this.y,u=r[2]*this.x+r[3]*this.y;return this.x=o,this.y=u,this}},{key:"matMult",value:function(r){return this.clone()._matMult(r)}},{key:"_unit",value:function(){return this.div(this.mag()),this}},{key:"unit",value:function(){return this.clone()._unit()}},{key:"_perp",value:function(){var r=this.y;return this.y=this.x,this.x=-r,this}},{key:"perp",value:function(){return this.clone()._perp()}},{key:"_round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"round",value:function(){return this.clone()._round()}},{key:"mag",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"equals",value:function(r){return this.x===r.x&&this.y===r.y}},{key:"dist",value:function(r){return Math.sqrt(this.distSqr(r))}},{key:"distSqr",value:function(r){var o=r.x-this.x,u=r.y-this.y;return o*o+u*u}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"angleTo",value:function(r){return Math.atan2(this.y-r.y,this.x-r.x)}},{key:"angleWith",value:function(r){return this.angleWithSep(r.x,r.y)}},{key:"angleWithSep",value:function(r,o){return Math.atan2(this.x*o-this.y*r,this.x*r+this.y*o)}}],[{key:"convert",value:function(r){return r instanceof e?r:Array.isArray(r)?new e(r[0],r[1]):r}}]),e}();function YB(){var e=new ns.WT(4);return ns.WT!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function i(e){var a=new glMatrix.ARRAY_TYPE(4);return a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a}function n(e,a){return e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e}function t(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function s(e,a,r,o){var u=new glMatrix.ARRAY_TYPE(4);return u[0]=e,u[1]=a,u[2]=r,u[3]=o,u}function l(e,a,r,o,u){return e[0]=a,e[1]=r,e[2]=o,e[3]=u,e}function f(e,a){if(e===a){var r=a[1];e[1]=a[2],e[2]=r}else e[0]=a[0],e[1]=a[2],e[2]=a[1],e[3]=a[3];return e}function d(e,a){var r=a[0],o=a[1],u=a[2],c=a[3],p=r*c-u*o;return p?(p=1/p,e[0]=c*p,e[1]=-o*p,e[2]=-u*p,e[3]=r*p,e):null}function m(e,a){var r=a[0];return e[0]=a[3],e[1]=-a[1],e[2]=-a[2],e[3]=r,e}function x(e){return e[0]*e[3]-e[2]*e[1]}function A(e,a,r){var o=a[0],u=a[1],c=a[2],p=a[3],g=r[0],y=r[1],S=r[2],O=r[3];return e[0]=o*g+c*y,e[1]=u*g+p*y,e[2]=o*S+c*O,e[3]=u*S+p*O,e}function P(e,a,r){var o=a[0],u=a[1],c=a[2],p=a[3],g=Math.sin(r),y=Math.cos(r);return e[0]=o*y+c*g,e[1]=u*y+p*g,e[2]=o*-g+c*y,e[3]=u*-g+p*y,e}function k(e,a,r){var o=a[0],u=a[1],c=a[2],p=a[3],g=r[0],y=r[1];return e[0]=o*g,e[1]=u*g,e[2]=c*y,e[3]=p*y,e}function B(e,a){var r=Math.sin(a),o=Math.cos(a);return e[0]=o,e[1]=r,e[2]=-r,e[3]=o,e}function U(e,a){return e[0]=a[0],e[1]=0,e[2]=0,e[3]=a[1],e}function W(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function ne(e){return Math.hypot(e[0],e[1],e[2],e[3])}function de(e,a,r,o){return e[2]=o[2]/o[0],r[0]=o[0],r[1]=o[1],r[3]=o[3]-e[2]*r[1],[e,a,r]}function ve(e,a,r){return e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e[3]=a[3]+r[3],e}function $e(e,a,r){return e[0]=a[0]-r[0],e[1]=a[1]-r[1],e[2]=a[2]-r[2],e[3]=a[3]-r[3],e}function lt(e,a){return e[0]===a[0]&&e[1]===a[1]&&e[2]===a[2]&&e[3]===a[3]}function vt(e,a){var r=e[0],o=e[1],u=e[2],c=e[3],p=a[0],g=a[1],y=a[2],S=a[3];return Math.abs(r-p)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(o-g)<=glMatrix.EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(u-y)<=glMatrix.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-S)<=glMatrix.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))}function Ot(e,a,r){return e[0]=a[0]*r,e[1]=a[1]*r,e[2]=a[2]*r,e[3]=a[3]*r,e}function fr(e,a,r,o){return e[0]=a[0]+r[0]*o,e[1]=a[1]+r[1]*o,e[2]=a[2]+r[2]*o,e[3]=a[3]+r[3]*o,e}var Tr=null,zr=null,cn=function(){function e(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if((0,Rt.Z)(this,e),isNaN(a)||a<0||isNaN(r)||r<0||isNaN(o)||o<0||isNaN(u)||u<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=r,this.left=o,this.right=u}return(0,at.Z)(e,[{key:"interpolate",value:function(r,o,u){return o.top!=null&&r.top!=null&&(this.top=op(r.top,o.top,u)),o.bottom!=null&&r.bottom!=null&&(this.bottom=op(r.bottom,o.bottom,u)),o.left!=null&&r.left!=null&&(this.left=op(r.left,o.left,u)),o.right!=null&&r.right!=null&&(this.right=op(r.right,o.right,u)),this}},{key:"getCenter",value:function(r,o){var u=pv((this.left+r-this.right)/2,0,r),c=pv((this.top+o-this.bottom)/2,0,o);return new is(u,c)}},{key:"equals",value:function(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}},{key:"clone",value:function(){return new e(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),e}(),Qr=2*Math.PI*p3;function On(e){return Qr*Math.cos(e*Math.PI/180)}function Qn(e){return(180+e)/360}function Hi(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function oa(e,a){return e/On(a)}function eo(e){return e*360-180}function Nn(e){var a=180-e*360;return 360/Math.PI*Math.atan(Math.exp(a*Math.PI/180))-90}function Di(e,a){return e*On(Nn(a))}function sa(e){return 1/Math.cos(e*Math.PI/180)}var Li=function(){function e(a,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;(0,Rt.Z)(this,e),this.x=+a,this.y=+r,this.z=+o}return(0,at.Z)(e,[{key:"toLngLat",value:function(){return new Vu(eo(this.x),Nn(this.y))}},{key:"toAltitude",value:function(){return Di(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/Qr*sa(Nn(this.y))}}],[{key:"fromLngLat",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=Vu.convert(r);return new e(Qn(u.lng),Hi(u.lat),oa(o,u.lat))}}]),e}();function $i(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Da(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function Da(e,a){if(e){if(typeof e=="string")return xo(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xo(e,a)}}function xo(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var Bo=8192,oo=function(){function e(a,r,o,u,c){(0,Rt.Z)(this,e),this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=c===void 0?!0:c,this._minZoom=a||0,this._maxZoom=r||22,this._minPitch=o==null?0:o,this._maxPitch=u==null?60:u,this.setMaxBounds(),this.width=0,this.height=0,this._center=new Vu(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this.unmodified=!0,this.edgeInsets=new cn,this.posMatrixCache={},this.alignedPosMatrixCache={}}return(0,at.Z)(e,[{key:"minZoom",get:function(){return this._minZoom},set:function(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}},{key:"minPitch",get:function(){return this._minPitch},set:function(r){this._minPitch!==r&&(this._minPitch=r,this._pitch=Math.max(this._pitch,r))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(r){this._maxPitch!==r&&(this._maxPitch=r,this._pitch=Math.min(this._pitch,r))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new is(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(r){var o=-MS(r,-180,180)*Math.PI/180;this.angle!==o&&(this.unmodified=!1,this.angle=o,this.calcMatrices(),this.rotationMatrix=YB(),P(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(r){var o=pv(r,this._minPitch,this._maxPitch)/180*Math.PI;this._pitch!==o&&(this.unmodified=!1,this._pitch=o,this.calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this.unmodified=!1,this._fov=r/180*Math.PI,this.calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(r){var o=Math.min(Math.max(r,this._minZoom),this._maxZoom);this._zoom!==o&&(this.unmodified=!1,this._zoom=o,this.scale=this.zoomScale(o),this.tileZoom=Math.floor(o),this.zoomFraction=o-this.tileZoom,this.constrain(),this.calcMatrices())}},{key:"center",get:function(){return this._center},set:function(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this.unmodified=!1,this._center=r,this.constrain(),this.calcMatrices())}},{key:"padding",get:function(){return this.edgeInsets.toJSON()},set:function(r){this.edgeInsets.equals(r)||(this.unmodified=!1,this.edgeInsets.interpolate(this.edgeInsets,r,1),this.calcMatrices())}},{key:"centerPoint",get:function(){return this.edgeInsets.getCenter(this.width,this.height)}},{key:"point",get:function(){return this.project(this.center)}},{key:"clone",value:function(){var r=new e(this._minZoom,this._maxZoom,this._minPitch,this._maxPitch,this._renderWorldCopies);return r.tileSize=this.tileSize,r.latRange=this.latRange,r.width=this.width,r.height=this.height,r.center=this._center,r.zoom=this.zoom,r.angle=this.angle,r.fov=this._fov,r.pitch=this._pitch,r.unmodified=this.unmodified,r.edgeInsets=this.edgeInsets.clone(),r.calcMatrices(),r}},{key:"isPaddingEqual",value:function(r){return this.edgeInsets.equals(r)}},{key:"interpolatePadding",value:function(r,o,u){this.unmodified=!1,this.edgeInsets.interpolate(r,o,u),this.constrain(),this.calcMatrices()}},{key:"coveringZoomLevel",value:function(r){var o=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,o)}},{key:"resize",value:function(r,o){this.width=r,this.height=o,this.pixelsToGLUnits=[2/r,-2/o],this.constrain(),this.calcMatrices()}},{key:"zoomScale",value:function(r){return Math.pow(2,r)}},{key:"scaleZoom",value:function(r){return Math.log(r)/Math.LN2}},{key:"project",value:function(r){var o=pv(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new is(Qn(r.lng)*this.worldSize,Hi(o)*this.worldSize)}},{key:"unproject",value:function(r){return new Li(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}},{key:"setLocationAtPoint",value:function(r,o){var u=this.pointCoordinate(o),c=this.pointCoordinate(this.centerPoint),p=this.locationCoordinate(r),g=new Li(p.x-(u.x-c.x),p.y-(u.y-c.y));this.center=this.coordinateLocation(g),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"pointCoordinate",value:function(r){var o=0,u=new Float64Array([r.x,r.y,0,1]),c=new Float64Array([r.x,r.y,1,1]);Gh(u,u,this.pixelMatrixInverse),Gh(c,c,this.pixelMatrixInverse);var p=u[3],g=c[3],y=u[0]/p,S=c[0]/g,O=u[1]/p,D=c[1]/g,V=u[2]/p,H=c[2]/g,ue=V===H?0:(o-V)/(H-V);return new Li(op(y,S,ue)/this.worldSize,op(O,D,ue)/this.worldSize)}},{key:"getBounds",value:function(){return new PS().extend(this.pointLocation(new is(0,0))).extend(this.pointLocation(new is(this.width,0))).extend(this.pointLocation(new is(this.width,this.height))).extend(this.pointLocation(new is(0,this.height)))}},{key:"getMaxBounds",value:function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new PS([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])}},{key:"setMaxBounds",value:function(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this.constrain()):(this.lngRange=void 0,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"maxPitchScaleFactor",value:function(){if(!this.pixelMatrixInverse)return 1;var r=this.pointCoordinate(new is(0,0)),o=new Float32Array([r.x*this.worldSize,r.y*this.worldSize,0,1]),u=Gh(o,o,this.pixelMatrix);return u[3]/this.cameraToCenterDistance}},{key:"getCameraPoint",value:function(){var r=this._pitch,o=Math.tan(r)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new is(0,o))}},{key:"getCameraQueryGeometry",value:function(r){var o=this.getCameraPoint();if(r.length===1)return[r[0],o];var u=o.x,c=o.y,p=o.x,g=o.y,y=$i(r),S;try{for(y.s();!(S=y.n()).done;){var O=S.value;u=Math.min(u,O.x),c=Math.min(c,O.y),p=Math.max(p,O.x),g=Math.max(g,O.y)}}catch(D){y.e(D)}finally{y.f()}return[new is(u,c),new is(p,c),new is(p,g),new is(u,g),new is(u,c)]}},{key:"coordinatePoint",value:function(r){var o=Np(r.x*this.worldSize,r.y*this.worldSize,0,1);return Gh(o,o,this.pixelMatrix),new is(o[0]/o[3],o[1]/o[3])}},{key:"locationPoint",value:function(r){return this.coordinatePoint(this.locationCoordinate(r))}},{key:"pointLocation",value:function(r){return this.coordinateLocation(this.pointCoordinate(r))}},{key:"locationCoordinate",value:function(r){return Li.fromLngLat(r)}},{key:"coordinateLocation",value:function(r){return r.toLngLat()}},{key:"getProjectionMatrix",value:function(){return this.projMatrix}},{key:"constrain",value:function(){if(!(!this.center||!this.width||!this.height||this.constraining)){this.constraining=!0;var r=-90,o=90,u=-180,c=180,p,g,y,S,O=this.size,D=this.unmodified;if(this.latRange){var V=this.latRange;r=Hi(V[1])*this.worldSize,o=Hi(V[0])*this.worldSize,p=o-r<O.y?O.y/(o-r):0}if(this.lngRange){var H=this.lngRange;u=Qn(H[0])*this.worldSize,c=Qn(H[1])*this.worldSize,g=c-u<O.x?O.x/(c-u):0}var ue=this.point,le=Math.max(g||0,p||0);if(le){this.center=this.unproject(new is(g?(c+u)/2:ue.x,p?(o+r)/2:ue.y)),this.zoom+=this.scaleZoom(le),this.unmodified=D,this.constraining=!1;return}if(this.latRange){var we=ue.y,Ne=O.y/2;we-Ne<r&&(S=r+Ne),we+Ne>o&&(S=o-Ne)}if(this.lngRange){var dt=ue.x,mt=O.x/2;dt-mt<u&&(y=u+mt),dt+mt>c&&(y=c-mt)}(y!==void 0||S!==void 0)&&(this.center=this.unproject(new is(y!==void 0?y:ue.x,S!==void 0?S:ue.y))),this.unmodified=D,this.constraining=!1}}},{key:"calcMatrices",value:function(){if(this.height){var r=this._fov/2,o=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(r)*this.height;var u=Math.PI/2+this._pitch,c=this._fov*(.5+o.y/this.height),p=Math.sin(c)*this.cameraToCenterDistance/Math.sin(pv(Math.PI-u-c,.01,Math.PI-.01)),g=this.point,y=g.x,S=g.y,O=Math.cos(Math.PI/2-this._pitch)*p+this.cameraToCenterDistance,D=O*1.01,V=this.height/50,H=new Float64Array(16);er(H,this._fov,this.width/this.height,V,D),H[8]=-o.x*2/this.width,H[9]=o.y*2/this.height,Bu(H,H,[1,-1,1]),rl(H,H,[0,0,-this.cameraToCenterDistance]),Wh(H,H,this._pitch),Ya(H,H,this.angle),rl(H,H,[-y,-S,0]),this.mercatorMatrix=Bu([],H,[this.worldSize,this.worldSize,this.worldSize]),Bu(H,H,[1,1,oa(1,this.center.lat)*this.worldSize,1]),this.projMatrix=H,this.invProjMatrix=Dc([],this.projMatrix);var ue=this.width%2/2,le=this.height%2/2,we=Math.cos(this.angle),Ne=Math.sin(this.angle),dt=y-Math.round(y)+we*ue+Ne*le,mt=S-Math.round(S)+we*le+Ne*ue,Lt=new Float64Array(H);if(rl(Lt,Lt,[dt>.5?dt-1:dt,mt>.5?mt-1:mt,0]),this.alignedProjMatrix=Lt,H=vu(),Bu(H,H,[this.width/2,-this.height/2,1]),rl(H,H,[1,-1,0]),this.labelPlaneMatrix=H,H=vu(),Bu(H,H,[1,-1,1]),rl(H,H,[-1,-1,0]),Bu(H,H,[2/this.width,2/this.height,1]),this.glCoordMatrix=H,this.pixelMatrix=mc(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),H=Dc(new Float64Array(16),this.pixelMatrix),!H)throw new Error("failed to invert matrix");this.pixelMatrixInverse=H,this.posMatrixCache={},this.alignedPosMatrixCache={}}}}]),e}(),To=wa.merge,Ma=(0,at.Z)(function e(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,Rt.Z)(this,e),To(this,r),this.type=a});function _l(e){var a=xl();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function xl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var rc=wa.merge,nm=function(e){(0,mr.Z)(r,e);var a=_l(r);function r(o){var u;(0,Rt.Z)(this,r),u=a.call(this),(0,Fe.Z)((0,vr.Z)(u),"renderFrameCallback",function(){var O=Math.min((rg()-u.easeStart)/u.easeOptions.duration,1);u.onEaseFrame(u.easeOptions.easing(O)),O<1?u.easeFrameId=u.requestRenderFrame(u.renderFrameCallback):u.stop()}),u.options=o;var c=o.minZoom,p=o.maxZoom,g=o.minPitch,y=o.maxPitch,S=o.renderWorldCopies;return u.moving=!1,u.zooming=!1,u.bearingSnap=o.bearingSnap,u.pitchEnabled=o.pitchEnabled,u.rotateEnabled=o.rotateEnabled,u.transform=new oo(c,p,g,y,S),u}return(0,at.Z)(r,[{key:"requestRenderFrame",value:function(u){return 0}},{key:"cancelRenderFrame",value:function(u){}},{key:"getCenter",value:function(){var u=this.transform.center,c=u.lng,p=u.lat;return new Vu(c,p)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setCenter",value:function(u,c){return this.jumpTo({center:u},c)}},{key:"setPitch",value:function(u,c){return this.jumpTo({pitch:u},c),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"panTo",value:function(u,c,p){return this.easeTo(rc({center:u},c),p)}},{key:"panBy",value:function(u,c,p){return u=is.convert(u).mult(-1),this.panTo(this.transform.center,h5({offset:u},c||{}),p)}},{key:"zoomOut",value:function(u,c){return this.zoomTo(this.getZoom()-1,u,c),this}},{key:"setBearing",value:function(u,c){return this.jumpTo({bearing:u},c),this}},{key:"setZoom",value:function(u,c){return this.jumpTo({zoom:u},c),this}},{key:"zoomIn",value:function(u,c){return this.zoomTo(this.getZoom()+1,u,c),this}},{key:"zoomTo",value:function(u,c,p){return this.easeTo(rc({zoom:u},c),p)}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(u,c){return this.jumpTo({padding:u},c),this}},{key:"rotateTo",value:function(u,c,p){return this.easeTo(rc({bearing:u},c),p)}},{key:"resetNorth",value:function(u,c){return this.rotateTo(0,rc({duration:1e3},u),c),this}},{key:"resetNorthPitch",value:function(u,c){return this.easeTo(rc({bearing:0,pitch:0,duration:1e3},u),c),this}},{key:"fitBounds",value:function(u,c,p){return this.fitInternal(this.cameraForBounds(u,c),c,p)}},{key:"cameraForBounds",value:function(u,c){return u=PS.convert(u),this.cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),0,c)}},{key:"snapToNorth",value:function(u,c){return Math.abs(this.getBearing())<this.bearingSnap?this.resetNorth(u,c):this}},{key:"jumpTo",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0;this.stop();var p=this.transform,g=!1,y=!1,S=!1;return u.zoom!==void 0&&p.zoom!==+u.zoom&&(g=!0,p.zoom=+u.zoom),u.center!==void 0&&(p.center=Vu.convert(u.center)),u.bearing!==void 0&&p.bearing!==+u.bearing&&(y=!0,p.bearing=+u.bearing),u.pitch!==void 0&&p.pitch!==+u.pitch&&(S=!0,p.pitch=+u.pitch),u.padding!==void 0&&!p.isPaddingEqual(u.padding)&&(p.padding=u.padding),this.emit("movestart",new Ma("movestart",c)),this.emit("move",new Ma("move",c)),g&&(this.emit("zoomstart",new Ma("zoomstart",c)),this.emit("zoom",new Ma("zoom",c)),this.emit("zoomend",new Ma("zoomend",c))),y&&(this.emit("rotatestart",new Ma("rotatestart",c)),this.emit("rotate",new Ma("rotate",c)),this.emit("rotateend",new Ma("rotateend",c))),S&&(this.emit("pitchstart",new Ma("pitchstart",c)),this.emit("pitch",new Ma("pitch",c)),this.emit("pitchend",new Ma("pitchend",c))),this.emit("moveend",new Ma("moveend",c))}},{key:"easeTo",value:function(){var u=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=arguments.length>1?arguments[1]:void 0;c=rc({offset:[0,0],duration:500,easing:IS},c),(c.animate===!1||!c.essential&&f3())&&(c.duration=0);var g=this.transform,y=this.getZoom(),S=this.getBearing(),O=this.getPitch(),D=this.getPadding(),V=c.zoom?+c.zoom:y,H=c.bearing?this.normalizeBearing(c.bearing,S):S,ue=c.pitch?+c.pitch:O,le=c.padding?c.padding:g.padding,we=is.convert(c.offset),Ne=g.centerPoint.add(we),dt=g.pointLocation(Ne),mt=Vu.convert(c.center||dt);this.normalizeCenter(mt);var Lt=g.project(dt),Wt=g.project(mt).sub(Lt),qt=g.zoomScale(V-y),ir,Sr;c.around&&(ir=Vu.convert(c.around),Sr=g.locationPoint(ir));var Br={moving:this.moving,zooming:this.zooming,rotating:this.rotating,pitching:this.pitching};return this.zooming=this.zooming||V!==y,this.rotating=this.rotating||S!==H,this.pitching=this.pitching||ue!==O,this.padding=!g.isPaddingEqual(le),this.easeId=c.easeId,this.prepareEase(p,c.noMoveStart,Br),clearTimeout(this.easeEndTimeoutID),this.ease(function(Jr){if(u.zooming&&(g.zoom=op(y,V,Jr)),u.rotating&&u.rotateEnabled&&(g.bearing=op(S,H,Jr)),u.pitching&&u.pitchEnabled&&(g.pitch=op(O,ue,Jr)),u.padding&&(g.interpolatePadding(D,le,Jr),Ne=g.centerPoint.add(we)),ir)g.setLocationAtPoint(ir,Sr);else{var en=g.zoomScale(g.zoom-y),Kn=V>y?Math.min(2,qt):Math.max(.5,qt),si=Math.pow(Kn,1-Jr),Pi=g.unproject(Lt.add(Wt.mult(Jr*si)).mult(en));g.setLocationAtPoint(g.renderWorldCopies?Pi.wrap():Pi,Ne)}u.fireMoveEvents(p)},function(Jr){u.afterEase(p,Jr)},c),this}},{key:"flyTo",value:function(){var u=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=arguments.length>1?arguments[1]:void 0;if(!c.essential&&f3()){var g=l5(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(g,p)}this.stop(),c=rc({offset:[0,0],speed:1.2,curve:1.42,easing:IS},c);var y=this.transform,S=this.getZoom(),O=this.getBearing(),D=this.getPitch(),V=this.getPadding(),H=c.zoom?pv(+c.zoom,y.minZoom,y.maxZoom):S,ue=c.bearing?this.normalizeBearing(c.bearing,O):O,le=c.pitch?+c.pitch:D,we="padding"in c?c.padding:y.padding,Ne=y.zoomScale(H-S),dt=is.convert(c.offset),mt=y.centerPoint.add(dt),Lt=y.pointLocation(mt),Wt=Vu.convert(c.center||Lt);this.normalizeCenter(Wt);var qt=y.project(Lt),ir=y.project(Wt).sub(qt),Sr=c.curve,Br=Math.max(y.width,y.height),Jr=Br/Ne,en=ir.mag();if("minZoom"in c){var Kn=pv(Math.min(c.minZoom,S,H),y.minZoom,y.maxZoom),si=Br/y.zoomScale(Kn-S);Sr=Math.sqrt(si/en*2)}var Pi=Sr*Sr;function so(bl){var cp=(Jr*Jr-Br*Br+(bl?-1:1)*Pi*Pi*en*en)/(2*(bl?Jr:Br)*Pi*en);return Math.log(Math.sqrt(cp*cp+1)-cp)}function bs(bl){return(Math.exp(bl)-Math.exp(-bl))/2}function Ss(bl){return(Math.exp(bl)+Math.exp(-bl))/2}function Ru(bl){return bs(bl)/Ss(bl)}var Iu=so(0),eh=function(cp){return Ss(Iu)/Ss(Iu+Sr*cp)},nR=function(cp){return Br*((Ss(Iu)*Ru(Iu+Sr*cp)-bs(Iu))/Pi)/en},Ox=(so(1)-Iu)/Sr;if(Math.abs(en)<1e-6||!isFinite(Ox)){if(Math.abs(Br-Jr)<1e-6)return this.easeTo(c,p);var u4=Jr<Br?-1:1;Ox=Math.abs(Math.log(Jr/Br))/Sr,nR=function(){return 0},eh=function(cp){return Math.exp(u4*Sr*cp)}}if("duration"in c)c.duration=+c.duration;else{var l4="screenSpeed"in c?+c.screenSpeed/Sr:+c.speed;c.duration=1e3*Ox/l4}return c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0),this.zooming=!0,this.rotating=O!==ue,this.pitching=le!==D,this.padding=!y.isPaddingEqual(we),this.prepareEase(p,!1),this.ease(function(bl){var cp=bl*Ox,iR=1/eh(cp);y.zoom=bl===1?H:S+y.scaleZoom(iR),u.rotating&&(y.bearing=op(O,ue,bl)),u.pitching&&(y.pitch=op(D,le,bl)),u.padding&&(y.interpolatePadding(V,we,bl),mt=y.centerPoint.add(dt));var aR=bl===1?Wt:y.unproject(qt.add(ir.mult(nR(cp))).mult(iR));y.setLocationAtPoint(y.renderWorldCopies?aR.wrap():aR,mt),u.fireMoveEvents(p)},function(){return u.afterEase(p)},c),this}},{key:"fitScreenCoordinates",value:function(u,c,p,g,y){return this.fitInternal(this.cameraForBoxAndBearing(this.transform.pointLocation(is.convert(u)),this.transform.pointLocation(is.convert(c)),p,g),g,y)}},{key:"stop",value:function(u,c){if(this.easeFrameId&&(this.cancelRenderFrame(this.easeFrameId),delete this.easeFrameId,delete this.onEaseFrame),this.onEaseEnd){var p=this.onEaseEnd;delete this.onEaseEnd,p.call(this,c)}return this}},{key:"normalizeBearing",value:function(u,c){u=MS(u,-180,180);var p=Math.abs(u-c);return Math.abs(u-360-c)<p&&(u-=360),Math.abs(u+360-c)<p&&(u+=360),u}},{key:"normalizeCenter",value:function(u){var c=this.transform;if(!(!c.renderWorldCopies||c.lngRange)){var p=u.lng-c.center.lng;u.lng+=p>180?-360:p<-180?360:0}}},{key:"fireMoveEvents",value:function(u){this.emit("move",new Ma("move",u)),this.zooming&&this.emit("zoom",new Ma("zoom",u)),this.rotating&&this.emit("rotate",new Ma("rotate",u)),this.pitching&&this.emit("rotate",new Ma("pitch",u))}},{key:"prepareEase",value:function(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.moving=!0,!c&&!p.moving&&this.emit("movestart",new Ma("movestart",u)),this.zooming&&!p.zooming&&this.emit("zoomstart",new Ma("zoomstart",u)),this.rotating&&!p.rotating&&this.emit("rotatestart",new Ma("rotatestart",u)),this.pitching&&!p.pitching&&this.emit("pitchstart",new Ma("pitchstart",u))}},{key:"afterEase",value:function(u,c){if(!(this.easeId&&c&&this.easeId===c)){delete this.easeId;var p=this.zooming,g=this.rotating,y=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,this.padding=!1,p&&this.emit("zoomend",new Ma("zoomend",u)),g&&this.emit("rotateend",new Ma("rotateend",u)),y&&this.emit("pitchend",new Ma("pitchend",u)),this.emit("moveend",new Ma("moveend",u))}}},{key:"ease",value:function(u,c,p){p.animate===!1||p.duration===0?(u(1),c()):(this.easeStart=rg(),this.easeOptions=p,this.onEaseFrame=u,this.onEaseEnd=c,this.easeFrameId=this.requestRenderFrame(this.renderFrameCallback))}},{key:"cameraForBoxAndBearing",value:function(u,c,p,g){var y={top:0,bottom:0,right:0,left:0};if(g=rc({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},g),typeof g.padding=="number"){var S=g.padding;g.padding={top:S,bottom:S,right:S,left:S}}g.padding=rc(y,g.padding);var O=this.transform,D=O.padding,V=O.project(Vu.convert(u)),H=O.project(Vu.convert(c)),ue=V.rotate(-p*Math.PI/180),le=H.rotate(-p*Math.PI/180),we=new is(Math.max(ue.x,le.x),Math.max(ue.y,le.y)),Ne=new is(Math.min(ue.x,le.x),Math.min(ue.y,le.y)),dt=we.sub(Ne),mt=(O.width-(D.left+D.right+g.padding.left+g.padding.right))/dt.x,Lt=(O.height-(D.top+D.bottom+g.padding.top+g.padding.bottom))/dt.y;if(!(Lt<0||mt<0)){var Wt=Math.min(O.scaleZoom(O.scale*Math.min(mt,Lt)),g.maxZoom),qt=is.convert(g.offset),ir=(g.padding.left-g.padding.right)/2,Sr=(g.padding.top-g.padding.bottom)/2,Br=new is(qt.x+ir,qt.y+Sr),Jr=Br.mult(O.scale/O.zoomScale(Wt)),en=O.unproject(V.add(H).div(2).sub(Jr));return{center:en,zoom:Wt,bearing:p}}}},{key:"fitInternal",value:function(u,c,p){return u?(c=rc(u,c),delete c.padding,c.linear?this.easeTo(c,p):this.flyTo(c,p)):this}}]),r}(Ws.EventEmitter);function Pd(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=b0(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function b0(e,a){if(e){if(typeof e=="string")return im(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return im(e,a)}}function im(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var qf={},Zc=qf;qf.create=function(e,a,r){var o=window.document.createElement(e);return a!==void 0&&(o.className=a),r&&r.appendChild(o),o},qf.createNS=function(e,a){var r=window.document.createElementNS(e,a);return r};var am=window.document&&window.document.documentElement.style;function OS(e){if(!am)return e[0];var a=Pd(e),r;try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o in am)return o}}catch(u){a.e(u)}finally{a.f()}return e[0]}var om=OS(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),kS;qf.disableDrag=function(){am&&om&&(kS=am[om],am[om]="none")},qf.enableDrag=function(){am&&om&&(am[om]=kS)};var p5=OS(["transform","WebkitTransform"]);qf.setTransform=function(e,a){e.style[p5]=a};var S0=!1;try{var rx=Object.defineProperty({},"passive",{get:function(){S0=!0}});window.addEventListener("test",rx,rx),window.removeEventListener("test",rx,rx)}catch(e){S0=!1}qf.addEventListener=function(e,a,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in o&&S0?e.addEventListener(a,r,o):e.addEventListener(a,r,o.capture)},qf.removeEventListener=function(e,a,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in o&&S0?e.removeEventListener(a,r,o):e.removeEventListener(a,r,o.capture)};var nx=function e(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",e,!0)};qf.suppressClick=function(){window.addEventListener("click",nx,!0),setTimeout(function(){window.removeEventListener("click",nx,!0)},0)},qf.mousePos=function(e,a){var r=e.getBoundingClientRect();return new is(a.clientX-r.left-e.clientLeft,a.clientY-r.top-e.clientTop)},qf.touchPos=function(e,a){var r=e.getBoundingClientRect(),o=[],u=Pd(a),c;try{for(u.s();!(c=u.n()).done;){var p=c.value;o.push(new is(p.clientX-r.left-e.clientLeft,p.clientY-r.top-e.clientTop))}}catch(g){u.e(g)}finally{u.f()}return o},qf.mouseButton=function(e){return e.button},qf.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};function FS(e){var a=KB();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function KB(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var d5=wa.merge,of=function(e){(0,mr.Z)(r,e);var a=FS(r);function r(o,u,c){var p,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};(0,Rt.Z)(this,r);var y=Zc.mousePos(u.getCanvasContainer(),c),S=u.unproject(y);return p=a.call(this,o,d5({point:y,lngLat:S,originalEvent:c},g)),p.defaultPrevented=!1,p.target=u,p}return(0,at.Z)(r,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),r}(Ma);function v5(e){var a=Od();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function Od(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var ng=function(e){(0,mr.Z)(r,e);var a=v5(r);function r(o,u,c){var p;(0,Rt.Z)(this,r);var g=o==="touchend"?c.changedTouches:c.touches,y=Zc.touchPos(u.getCanvasContainer(),g),S=y.map(function(V){return u.unproject(V)}),O=y.reduce(function(V,H,ue,le){return V.add(H.div(le.length))},new is(0,0)),D=u.unproject(O);return p=a.call(this,o,{points:y,point:O,lngLats:S,lngLat:D,originalEvent:c}),p.defaultPrevented=!1,p}return(0,at.Z)(r,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),r}(Ma);function c8(e){var a=f8();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function f8(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var h8=function(e){(0,mr.Z)(r,e);var a=c8(r);function r(o,u,c){var p;return(0,Rt.Z)(this,r),p=a.call(this,o,{originalEvent:c}),p.defaultPrevented=!1,p}return(0,at.Z)(r,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),r}(Ma),p8=function(){function e(a){(0,Rt.Z)(this,e),this.map=a}return(0,at.Z)(e,[{key:"reset",value:function(){this.delayContextMenu=!1,delete this.contextMenuEvent}},{key:"mousemove",value:function(r){this.map.emit(r.type,new of(r.type,this.map,r))}},{key:"mousedown",value:function(){this.delayContextMenu=!0}},{key:"mouseup",value:function(){this.delayContextMenu=!1,this.contextMenuEvent&&(this.map.emit("contextmenu",new of("contextmenu",this.map,this.contextMenuEvent)),delete this.contextMenuEvent)}},{key:"contextmenu",value:function(r){this.delayContextMenu?this.contextMenuEvent=r:this.map.emit(r.type,new of(r.type,this.map,r)),this.map.listeners("contextmenu")&&r.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!0}},{key:"disable",value:function(){return!1}}]),e}(),d8=function(){function e(a,r){(0,Rt.Z)(this,e),this.map=a,this.el=a.getCanvasContainer(),this.container=a.getContainer(),this.clickTolerance=r.clickTolerance||1}return(0,at.Z)(e,[{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active}},{key:"enable",value:function(){this.isEnabled()||(this.enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this.enabled=!1)}},{key:"mousedown",value:function(r,o){this.isEnabled()&&r.shiftKey&&r.button===0&&(Zc.disableDrag(),this.startPos=this.lastPos=o,this.active=!0)}},{key:"mousemoveWindow",value:function(r,o){if(this.active){var u=o;if(!(this.lastPos.equals(u)||!this.box&&u.dist(this.startPos)<this.clickTolerance)){var c=this.startPos;this.lastPos=u,this.box||(this.box=Zc.create("div","l7-boxzoom",this.container),this.container.classList.add("l7-crosshair"),this.fireEvent("boxzoomstart",r));var p=Math.min(c.x,u.x),g=Math.max(c.x,u.x),y=Math.min(c.y,u.y),S=Math.max(c.y,u.y);Zc.setTransform(this.box,"translate(".concat(p,"px,").concat(y,"px)")),this.box&&(this.box.style.width="".concat(g-p,"px"),this.box.style.height="".concat(S-y,"px"))}}}},{key:"mouseupWindow",value:function(r,o){var u=this;if(this.active&&r.button===0){var c=this.startPos,p=o;if(this.reset(),Zc.suppressClick(),c.x===p.x&&c.y===p.y)this.fireEvent("boxzoomcancel",r);else return this.map.emit("boxzoomend",new Ma("boxzoomend",{originalEvent:r})),{cameraAnimation:function(y){return y.fitScreenCoordinates(c,p,u.map.getBearing(),{linear:!0})}}}}},{key:"keydown",value:function(r){this.active&&r.keyCode===27&&(this.reset(),this.fireEvent("boxzoomcancel",r))}},{key:"reset",value:function(){this.active=!1,this.container.classList.remove("l7-crosshair"),this.box&&(Zc.remove(this.box),this.box=null),Zc.enableDrag(),delete this.startPos,delete this.lastPos}},{key:"fireEvent",value:function(r,o){return this.map.emit(r,new Ma(r,{originalEvent:o}))}}]),e}(),v8=d8,g8=function(){function e(){(0,Rt.Z)(this,e),this.reset()}return(0,at.Z)(e,[{key:"reset",value:function(){this.active=!1}},{key:"dblclick",value:function(r,o){return r.preventDefault(),{cameraAnimation:function(c){c.easeTo({duration:300,zoom:c.getZoom()+(r.shiftKey?-1:1),around:c.unproject(o)},{originalEvent:r})}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}();function m8(e){var a=y8();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function y8(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var _8=function(e){(0,mr.Z)(r,e);var a=m8(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"type","renderFrame"),o}return(0,at.Z)(r)}(Ma);function x8(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=b8(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function b8(e,a){if(e){if(typeof e=="string")return qB(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qB(e,a)}}function qB(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var ix=wa.merge,v3={linearity:.3,easing:RS(0,0,.3,1)},S8=ix({deceleration:2500,maxSpeed:1400},v3),E8=ix({deceleration:20,maxSpeed:1400},v3),w8=ix({deceleration:1e3,maxSpeed:360},v3),C8=ix({deceleration:1e3,maxSpeed:90},v3),A8=function(){function e(a){(0,Rt.Z)(this,e),this.map=a,this.clear()}return(0,at.Z)(e,[{key:"clear",value:function(){this.inertiaBuffer=[]}},{key:"record",value:function(r){this.drainInertiaBuffer(),this.inertiaBuffer.push({time:rg(),settings:r})}},{key:"drainInertiaBuffer",value:function(){for(var r=this.inertiaBuffer,o=rg(),u=160;r.length>0&&o-r[0].time>u;)r.shift()}},{key:"onMoveEnd",value:function(r){if(this.drainInertiaBuffer(),!(this.inertiaBuffer.length<2)){var o={zoom:0,bearing:0,pitch:0,pan:new is(0,0),pinchAround:void 0,around:void 0},u=x8(this.inertiaBuffer),c;try{for(u.s();!(c=u.n()).done;){var p=c.value.settings;o.zoom+=p.zoomDelta||0,o.bearing+=p.bearingDelta||0,o.pitch+=p.pitchDelta||0,p.panDelta&&o.pan._add(p.panDelta),p.around&&(o.around=p.around),p.pinchAround&&(o.pinchAround=p.pinchAround)}}catch(le){u.e(le)}finally{u.f()}var g=this.inertiaBuffer[this.inertiaBuffer.length-1],y=g.time-this.inertiaBuffer[0].time,S={};if(o.pan.mag()){var O=m3(o.pan.mag(),y,ix({},S8,r||{}));S.offset=o.pan.mult(O.amount/o.pan.mag()),S.center=this.map.transform.center,g3(S,O)}if(o.zoom){var D=m3(o.zoom,y,E8);S.zoom=this.map.transform.zoom+D.amount,g3(S,D)}if(o.bearing){var V=m3(o.bearing,y,w8);S.bearing=this.map.transform.bearing+pv(V.amount,-179,179),g3(S,V)}if(o.pitch){var H=m3(o.pitch,y,C8);S.pitch=this.map.transform.pitch+H.amount,g3(S,H)}if(S.zoom||S.bearing){var ue=o.pinchAround===void 0?o.around:o.pinchAround;S.around=ue?this.map.unproject(ue):this.map.getCenter()}return this.clear(),ix(S,{noMoveStart:!0})}}}]),e}();function g3(e,a){(!e.duration||e.duration<a.duration)&&(e.duration=a.duration,e.easing=a.easing)}function m3(e,a,r){var o=r.maxSpeed,u=r.linearity,c=r.deceleration,p=pv(e*u/(a/1e3),-o,o),g=Math.abs(p)/(c*u);return{easing:r.easing,duration:g*1e3,amount:p*(g/2)}}var T8={panStep:100,bearingStep:15,pitchStep:10},M8=function(){function e(){(0,Rt.Z)(this,e);var a=T8;this.panStep=a.panStep,this.bearingStep=a.bearingStep,this.pitchStep=a.pitchStep}return(0,at.Z)(e,[{key:"reset",value:function(){this.active=!1}},{key:"keydown",value:function(r){var o=this;if(!(r.altKey||r.ctrlKey||r.metaKey)){var u=0,c=0,p=0,g=0,y=0;switch(r.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:r.shiftKey?c=-1:(r.preventDefault(),g=-1);break;case 39:r.shiftKey?c=1:(r.preventDefault(),g=1);break;case 38:r.shiftKey?p=1:(r.preventDefault(),y=-1);break;case 40:r.shiftKey?p=-1:(r.preventDefault(),y=1);break;default:return}return{cameraAnimation:function(O){var D=O.getZoom();O.easeTo({duration:300,easeId:"keyboardHandler",easing:R8,zoom:u?Math.round(D)+u*(r.shiftKey?2:1):D,bearing:O.getBearing()+c*o.bearingStep,pitch:O.getPitch()+p*o.pitchStep,offset:[-g*o.panStep,-y*o.panStep],center:O.getCenter()},{originalEvent:r})}}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}();function R8(e){return e*(2-e)}var I8=M8,P8=function(){function e(a,r){(0,Rt.Z)(this,e),this.map=a,this.clickTolerance=r.clickTolerance}return(0,at.Z)(e,[{key:"reset",value:function(){delete this.mousedownPos}},{key:"wheel",value:function(r){return this.firePreventable(new h8(r.type,this.map,r))}},{key:"mousedown",value:function(r,o){return this.mousedownPos=o,this.firePreventable(new of(r.type,this.map,r))}},{key:"mouseup",value:function(r){this.map.emit(r.type,new of(r.type,this.map,r))}},{key:"click",value:function(r,o){this.mousedownPos&&this.mousedownPos.dist(o)>=this.clickTolerance||this.map.emit(r.type,new of(r.type,this.map,r))}},{key:"dblclick",value:function(r){return this.firePreventable(new of(r.type,this.map,r))}},{key:"mouseover",value:function(r){this.map.emit(r.type,new of(r.type,this.map,r))}},{key:"mouseout",value:function(r){this.map.emit(r.type,new of(r.type,this.map,r))}},{key:"touchstart",value:function(r){return this.firePreventable(new ng(r.type,this.map,r))}},{key:"touchmove",value:function(r){this.map.emit(r.type,new ng(r.type,this.map,r))}},{key:"touchend",value:function(r){this.map.emit(r.type,new ng(r.type,this.map,r))}},{key:"touchcancel",value:function(r){this.map.emit(r.type,new ng(r.type,this.map,r))}},{key:"firePreventable",value:function(r){if(this.map.emit(r.type,r),r.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!1}},{key:"disable",value:function(){return!1}}]),e}(),y3,_3=0,g5=2,O8=(y3={},(0,Fe.Z)(y3,_3,1),(0,Fe.Z)(y3,g5,2),y3);function k8(e,a){var r=O8[a];return e.buttons===void 0||(e.buttons&r)!==r}var m5=function(){function e(a){(0,Rt.Z)(this,e),this.reset(),this.clickTolerance=a.clickTolerance||1}return(0,at.Z)(e,[{key:"reset",value:function(){this.active=!1,this.moved=!1,delete this.lastPoint,delete this.eventButton}},{key:"mousedown",value:function(r,o){if(!this.lastPoint){var u=Zc.mouseButton(r);this.correctButton(r,u)&&(this.lastPoint=o,this.eventButton=u)}}},{key:"mousemoveWindow",value:function(r,o){var u=this.lastPoint;if(u){if(r.preventDefault(),k8(r,this.eventButton)){this.reset();return}if(!(!this.moved&&o.dist(u)<this.clickTolerance))return this.moved=!0,this.lastPoint=o,this.move(u,o)}}},{key:"mouseupWindow",value:function(r){if(this.lastPoint){var o=Zc.mouseButton(r);o===this.eventButton&&(this.moved&&Zc.suppressClick(),this.reset())}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"correctButton",value:function(r,o){return!1}},{key:"move",value:function(r,o){}}]),e}();function F8(e){var a=D8();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function D8(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var L8=function(e){(0,mr.Z)(r,e);var a=F8(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"mousedown",value:function(u,c){nf((0,Ft.Z)(r.prototype),"mousedown",this).call(this,u,c),this.lastPoint&&(this.active=!0)}},{key:"move",value:function(u,c){return{around:c,panDelta:c.sub(u)}}},{key:"correctButton",value:function(u,c){return c===_3&&!u.ctrlKey}}]),r}(m5);function B8(e){var a=N8();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function N8(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var z8=function(e){(0,mr.Z)(r,e);var a=B8(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"correctButton",value:function(u,c){return c===_3&&u.ctrlKey||c===g5}},{key:"move",value:function(u,c){var p=-.5,g=(c.y-u.y)*p;if(g)return this.active=!0,{pitchDelta:g}}},{key:"contextmenu",value:function(u){u.preventDefault()}}]),r}(m5);function U8(e){var a=Z8();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function Z8(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var V8=function(e){(0,mr.Z)(r,e);var a=U8(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"contextmenu",value:function(u){u.preventDefault()}},{key:"correctButton",value:function(u,c){return c===_3&&u.ctrlKey||c===g5}},{key:"move",value:function(u,c){var p=.8,g=(c.x-u.x)*p;if(g)return this.active=!0,{bearingDelta:g}}}]),r}(m5),QB=4.000244140625,H8=1/100,j8=1/450,W8=2,G8=function(){function e(a,r){var o=this;(0,Rt.Z)(this,e),(0,Fe.Z)(this,"onScrollFrame",function(){if(o.frameId&&(o.frameId=null,!!o.isActive())){var u=o.map.transform;if(o.delta!==0){var c=o.type==="wheel"&&Math.abs(o.delta)>QB?o.wheelZoomRate:o.defaultZoomRate,p=W8/(1+Math.exp(-Math.abs(o.delta*c)));o.delta<0&&p!==0&&(p=1/p);var g=typeof o.targetZoom=="number"?u.zoomScale(o.targetZoom):u.scale;o.targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(g*p))),o.type==="wheel"&&(o.startZoom=u.zoom,o.easing=o.smoothOutEasing(200)),o.delta=0}var y=typeof o.targetZoom=="number"?o.targetZoom:u.zoom,S=o.startZoom,O=o.easing,D=!1,V;if(o.type==="wheel"&&S&&O){var H=Math.min((rg()-o.lastWheelEventTime)/200,1),ue=O(H);V=op(S,y,ue),H<1?o.frameId||(o.frameId=!0):D=!0}else V=y,D=!0;return o.active=!0,D&&(o.active=!1,o.finishTimeout=setTimeout(function(){o.zooming=!1,o.handler.triggerRenderFrame(),delete o.targetZoom,delete o.finishTimeout},200)),{noInertia:!0,needsRenderFrame:!D,zoomDelta:V-u.zoom,around:o.aroundPoint,originalEvent:o.lastWheelEvent}}}),this.map=a,this.el=a.getCanvasContainer(),this.handler=r,this.delta=0,this.defaultZoomRate=H8,this.wheelZoomRate=j8}return(0,at.Z)(e,[{key:"setZoomRate",value:function(r){this.defaultZoomRate=r}},{key:"setWheelZoomRate",value:function(r){this.wheelZoomRate=r}},{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active||this.finishTimeout!==void 0}},{key:"isZooming",value:function(){return!!this.zooming}},{key:"enable",value:function(r){this.isEnabled()||(this.enabled=!0,this.aroundCenter=r&&r.around==="center")}},{key:"disable",value:function(){this.isEnabled()&&(this.enabled=!1)}},{key:"wheel",value:function(r){if(this.isEnabled()){var o=r.deltaMode===window.WheelEvent.DOM_DELTA_LINE?r.deltaY*40:r.deltaY,u=rg(),c=u-(this.lastWheelEventTime||0);this.lastWheelEventTime=u,o!==0&&o%QB===0?this.type="wheel":o!==0&&Math.abs(o)<4?this.type="trackpad":c>400?(this.type=null,this.lastValue=o,this.timeout=setTimeout(this.onTimeout,40,r)):this.type||(this.type=Math.abs(c*o)<200?"trackpad":"wheel",this.timeout&&(clearTimeout(this.timeout),this.timeout=null,o+=this.lastValue)),r.shiftKey&&o&&(o=o/4),this.type&&(this.lastWheelEvent=r,this.delta-=o,this.active||this.start(r)),r.preventDefault()}}},{key:"renderFrame",value:function(){return this.onScrollFrame()}},{key:"reset",value:function(){this.active=!1}},{key:"onTimeout",value:function(r){this.type="wheel",this.delta-=this.lastValue,!this.active&&this.start&&this.start(r)}},{key:"start",value:function(r){if(this.delta){this.frameId&&(this.frameId=null),this.active=!0,this.isZooming()||(this.zooming=!0),this.finishTimeout&&(clearTimeout(this.finishTimeout),delete this.finishTimeout);var o=Zc.mousePos(this.el,r);this.around=Vu.convert(this.aroundCenter?this.map.getCenter():this.map.unproject(o)),this.aroundPoint=this.map.transform.locationPoint(this.around),this.frameId||(this.frameId=!0,this.handler.triggerRenderFrame())}}},{key:"smoothOutEasing",value:function(r){var o=IS;if(this.prevEase){var u=this.prevEase,c=(rg()-u.start)/u.duration,p=u.easing(c+.01)-u.easing(c),g=.27/Math.sqrt(p*p+1e-4)*.01,y=Math.sqrt(.27*.27-g*g);o=RS(g,y,.25,1)}return this.prevEase={start:rg(),duration:r,easing:o},o}}]),e}(),X8=G8,$8=function(){function e(a,r){(0,Rt.Z)(this,e),this.clickZoom=a,this.tapZoom=r}return(0,at.Z)(e,[{key:"enable",value:function(){this.clickZoom.enable(),this.tapZoom.enable()}},{key:"disable",value:function(){this.clickZoom.disable(),this.tapZoom.disable()}},{key:"isEnabled",value:function(){return this.clickZoom.isEnabled()&&this.tapZoom.isEnabled()}},{key:"isActive",value:function(){return this.clickZoom.isActive()||this.tapZoom.isActive()}}]),e}(),Y8=function(){function e(a,r,o){(0,Rt.Z)(this,e),this.el=a,this.mousePan=r,this.touchPan=o}return(0,at.Z)(e,[{key:"enable",value:function(r){this.inertiaOptions=r||{},this.mousePan.enable(),this.touchPan.enable(),this.el.classList.add("l7-touch-drag-pan")}},{key:"disable",value:function(){this.mousePan.disable(),this.touchPan.disable(),this.el.classList.remove("l7-touch-drag-pan")}},{key:"isEnabled",value:function(){return this.mousePan.isEnabled()&&this.touchPan.isEnabled()}},{key:"isActive",value:function(){return this.mousePan.isActive()||this.touchPan.isActive()}}]),e}(),K8=function(){function e(a,r,o){(0,Rt.Z)(this,e),this.pitchWithRotate=a.pitchWithRotate,this.mouseRotate=r,this.mousePitch=o}return(0,at.Z)(e,[{key:"enable",value:function(){this.mouseRotate.enable(),this.pitchWithRotate&&this.mousePitch.enable()}},{key:"disable",value:function(){this.mouseRotate.disable(),this.mousePitch.disable()}},{key:"isEnabled",value:function(){return this.mouseRotate.isEnabled()&&(!this.pitchWithRotate||this.mousePitch.isEnabled())}},{key:"isActive",value:function(){return this.mouseRotate.isActive()||this.mousePitch.isActive()}}]),e}(),q8=function(){function e(a,r,o,u){(0,Rt.Z)(this,e),this.el=a,this.touchZoom=r,this.touchRotate=o,this.tapDragZoom=u,this.rotationDisabled=!1,this.enabled=!0}return(0,at.Z)(e,[{key:"enable",value:function(r){this.touchZoom.enable(r),this.rotationDisabled||this.touchRotate.enable(r),this.tapDragZoom.enable(),this.el.classList.add("l7-touch-zoom-rotate")}},{key:"disable",value:function(){this.touchZoom.disable(),this.touchRotate.disable(),this.tapDragZoom.disable(),this.el.classList.remove("l7-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this.touchZoom.isEnabled()&&(this.rotationDisabled||this.touchRotate.isEnabled())&&this.tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this.touchZoom.isActive()||this.touchRotate.isActive()||this.tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this.rotationDisabled=!0,this.touchRotate.disable()}},{key:"enableRotation",value:function(){this.rotationDisabled=!1,this.touchZoom.isEnabled()&&this.touchRotate.enable()}}]),e}();function y5(e,a){for(var r={},o=0;o<e.length;o++)r[e[o].identifier]=a[o];return r}function Q8(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=J8(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function J8(e,a){if(e){if(typeof e=="string")return JB(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JB(e,a)}}function JB(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}function e7(e){var a=new is(0,0),r=Q8(e),o;try{for(r.s();!(o=r.n()).done;){var u=o.value;a._add(u)}}catch(c){r.e(c)}finally{r.f()}return a.div(e.length)}var e6=500,t7=500,t6=30,r7=function(){function e(a){(0,Rt.Z)(this,e),this.reset(),this.numTouches=a.numTouches}return(0,at.Z)(e,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(r,o,u){(this.centroid||u.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=r.timeStamp),u.length===this.numTouches&&(this.centroid=e7(o),this.touches=y5(u,o)))}},{key:"touchmove",value:function(r,o,u){if(!(this.aborted||!this.centroid)){var c=y5(u,o);for(var p in this.touches)if(this.touches[p]){var g=this.touches[p],y=c[p];(!y||y.dist(g)>t6)&&(this.aborted=!0)}}}},{key:"touchend",value:function(r,o,u){if((!this.centroid||r.timeStamp-this.startTime>t7)&&(this.aborted=!0),u.length===0){var c=!this.aborted&&this.centroid;if(this.reset(),c)return c}}}]),e}(),_5=function(){function e(a){(0,Rt.Z)(this,e),this.singleTap=new r7(a),this.numTaps=a.numTaps,this.reset()}return(0,at.Z)(e,[{key:"reset",value:function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(r,o,u){this.singleTap.touchstart(r,o,u)}},{key:"touchmove",value:function(r,o,u){this.singleTap.touchmove(r,o,u)}},{key:"touchend",value:function(r,o,u){var c=this.singleTap.touchend(r,o,u);if(c){var p=r.timeStamp-this.lastTime<e6,g=!this.lastTap||this.lastTap.dist(c)<t6;if((!p||!g)&&this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=c,this.count===this.numTaps)return this.reset(),c}}}]),e}(),n7=function(){function e(){(0,Rt.Z)(this,e),this.tap=new _5({numTouches:1,numTaps:1}),this.reset()}return(0,at.Z)(e,[{key:"reset",value:function(){this.active=!1,delete this.swipePoint,delete this.swipeTouch,delete this.tapTime,this.tap.reset()}},{key:"touchstart",value:function(r,o,u){this.swipePoint||(this.tapTime&&r.timeStamp-this.tapTime>e6&&this.reset(),this.tapTime?u.length>0&&(this.swipePoint=o[0],this.swipeTouch=u[0].identifier):this.tap.touchstart(r,o,u))}},{key:"touchmove",value:function(r,o,u){if(!this.tapTime)this.tap.touchmove(r,o,u);else if(this.swipePoint){if(u[0].identifier!==this.swipeTouch)return;var c=o[0],p=c.y-this.swipePoint.y;return this.swipePoint=c,r.preventDefault(),this.active=!0,{zoomDelta:p/128}}}},{key:"touchend",value:function(r,o,u){if(this.tapTime)this.swipePoint&&u.length===0&&this.reset();else{var c=this.tap.touchend(r,o,u);c&&(this.tapTime=r.timeStamp)}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}(),i7=function(){function e(){(0,Rt.Z)(this,e),this.zoomIn=new _5({numTouches:1,numTaps:2}),this.zoomOut=new _5({numTouches:2,numTaps:1}),this.reset()}return(0,at.Z)(e,[{key:"reset",value:function(){this.active=!1,this.zoomIn.reset(),this.zoomOut.reset()}},{key:"touchstart",value:function(r,o,u){this.zoomIn.touchstart(r,o,u),this.zoomOut.touchstart(r,o,u)}},{key:"touchmove",value:function(r,o,u){this.zoomIn.touchmove(r,o,u),this.zoomOut.touchmove(r,o,u)}},{key:"touchend",value:function(r,o,u){var c=this,p=this.zoomIn.touchend(r,o,u),g=this.zoomOut.touchend(r,o,u);if(p)return this.active=!0,r.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(S){return S.easeTo({duration:300,zoom:S.getZoom()+1,around:S.unproject(p)},{originalEvent:r})}};if(g)return this.active=!0,r.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(S){return S.easeTo({duration:300,zoom:S.getZoom()-1,around:S.unproject(g)},{originalEvent:r})}}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}(),a7=function(){function e(a){(0,Rt.Z)(this,e),this.minTouches=1,this.clickTolerance=a.clickTolerance||1,this.reset()}return(0,at.Z)(e,[{key:"reset",value:function(){this.active=!1,this.touches={},this.sum=new is(0,0)}},{key:"touchstart",value:function(r,o,u){return this.calculateTransform(r,o,u)}},{key:"touchmove",value:function(r,o,u){if(this.active)return r.preventDefault(),this.calculateTransform(r,o,u)}},{key:"touchend",value:function(r,o,u){this.calculateTransform(r,o,u),this.active&&u.length<this.minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"calculateTransform",value:function(r,o,u){u.length>0&&(this.active=!0);var c=y5(u,o),p=new is(0,0),g=new is(0,0),y=0;for(var S in c)if(c[S]){var O=c[S],D=this.touches[S];D&&(p._add(O),g._add(O.sub(D)),y++,c[S]=O)}if(this.touches=c,!(y<this.minTouches||!g.mag())){var V=g.div(y);if(this.sum._add(V),!(this.sum.mag()<this.clickTolerance)){var H=p.div(y);return{around:H,panDelta:V}}}}}]),e}(),x5=function(){function e(){(0,Rt.Z)(this,e),this.reset()}return(0,at.Z)(e,[{key:"reset",value:function(){this.active=!1,delete this.firstTwoTouches}},{key:"start",value:function(r){}},{key:"move",value:function(r,o,u){}},{key:"touchstart",value:function(r,o,u){this.firstTwoTouches||u.length<2||(this.firstTwoTouches=[u[0].identifier,u[1].identifier],this.start([o[0],o[1]]))}},{key:"touchmove",value:function(r,o,u){if(this.firstTwoTouches){r.preventDefault();var c=(0,Vi.Z)(this.firstTwoTouches,2),p=c[0],g=c[1],y=x3(u,o,p),S=x3(u,o,g);if(!(!y||!S)){var O=this.aroundCenter?null:y.add(S).div(2);return this.move([y,S],O,r)}}}},{key:"touchend",value:function(r,o,u){if(this.firstTwoTouches){var c=(0,Vi.Z)(this.firstTwoTouches,2),p=c[0],g=c[1],y=x3(u,o,p),S=x3(u,o,g);y&&S||(this.active&&Zc.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(r){this.enabled=!0,this.aroundCenter=!!r&&r.around==="center"}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}();function x3(e,a,r){for(var o=0;o<e.length;o++)if(e[o].identifier===r)return a[o]}function o7(e){var a=s7();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function s7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function b5(e){return Math.abs(e.y)>Math.abs(e.x)}var u7=100,l7=function(e){(0,mr.Z)(r,e);var a=o7(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"reset",value:function(){nf((0,Ft.Z)(r.prototype),"reset",this).call(this),this.valid=void 0,delete this.firstMove,delete this.lastPoints}},{key:"start",value:function(u){this.lastPoints=u,b5(u[0].sub(u[1]))&&(this.valid=!1)}},{key:"move",value:function(u,c,p){var g=u[0].sub(this.lastPoints[0]),y=u[1].sub(this.lastPoints[1]);if(this.valid=this.gestureBeginsVertically(g,y,p.timeStamp),!!this.valid){this.lastPoints=u,this.active=!0;var S=(g.y+y.y)/2,O=-.5;return{pitchDelta:S*O}}}},{key:"gestureBeginsVertically",value:function(u,c,p){if(this.valid!==void 0)return this.valid;var g=2,y=u.mag()>=g,S=c.mag()>=g;if(!(!y&&!S)){if(!y||!S)return this.firstMove===void 0&&(this.firstMove=p),p-this.firstMove<u7?void 0:!1;var O=u.y>0==c.y>0;return b5(u)&&b5(c)&&O}}}]),r}(x5);function c7(e){var a=f7();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function f7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var h7=25;function r6(e,a){return e.angleWith(a)*180/Math.PI}var p7=function(e){(0,mr.Z)(r,e);var a=c7(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"reset",value:function(){nf((0,Ft.Z)(r.prototype),"reset",this).call(this),delete this.minDiameter,delete this.startVector,delete this.vector}},{key:"start",value:function(u){this.startVector=this.vector=u[0].sub(u[1]),this.minDiameter=u[0].dist(u[1])}},{key:"move",value:function(u,c){var p=this.vector;if(this.vector=u[0].sub(u[1]),!(!this.active&&this.isBelowThreshold(this.vector)))return this.active=!0,{bearingDelta:r6(this.vector,p),pinchAround:c}}},{key:"isBelowThreshold",value:function(u){this.minDiameter=Math.min(this.minDiameter,u.mag());var c=Math.PI*this.minDiameter,p=h7/c*360,g=r6(u,this.startVector);return Math.abs(g)<p}}]),r}(x5);function d7(e){var a=v7();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function v7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var g7=.1;function n6(e,a){return Math.log(e/a)/Math.LN2}var m7=function(e){(0,mr.Z)(r,e);var a=d7(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"reset",value:function(){nf((0,Ft.Z)(r.prototype),"reset",this).call(this),delete this.distance,delete this.startDistance}},{key:"start",value:function(u){this.startDistance=this.distance=u[0].dist(u[1])}},{key:"move",value:function(u,c){var p=this.distance;if(this.distance=u[0].dist(u[1]),!(!this.active&&Math.abs(n6(this.distance,this.startDistance))<g7))return this.active=!0,{zoomDelta:n6(this.distance,p),pinchAround:c}}}]),r}(x5);function t_(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=y7(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function y7(e,a){if(e){if(typeof e=="string")return i6(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i6(e,a)}}function i6(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var S5=wa.merge,b3=function(a){return a.zoom||a.drag||a.pitch||a.rotate};function E5(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}var _7=function(){function e(a,r){var o=this;(0,Rt.Z)(this,e),(0,Fe.Z)(this,"handleWindowEvent",function(D){o.handleEvent(D,"".concat(D.type,"Window"))}),(0,Fe.Z)(this,"handleEvent",function(D,V){if(D.type==="blur"){o.stop();return}o.updatingCamera=!0;var H=D.type==="renderFrame"?void 0:D,ue={needsRenderFrame:!1},le={},we={},Ne=D.touches?o.getMapTouches(D.touches):void 0,dt=Ne?Zc.touchPos(o.el,Ne):Zc.mousePos(o.el,D),mt=t_(o.handlers),Lt;try{for(mt.s();!(Lt=mt.n()).done;){var Wt=Lt.value,qt=Wt.handlerName,ir=Wt.handler,Sr=Wt.allowed;if(ir.isEnabled()){var Br=void 0;if(o.blockedByActive(we,Sr,qt))ir.reset();else{var Jr=V||D.type;ir&&ir[Jr]&&(Br=ir[Jr](D,dt,Ne),o.mergeIHandlerResult(ue,le,Br,qt,H),Br&&Br.needsRenderFrame&&o.triggerRenderFrame())}(Br||ir.isActive())&&(we[qt]=ir)}}}catch(Pi){mt.e(Pi)}finally{mt.f()}var en={};for(var Kn in o.previousActiveHandlers)we[Kn]||(en[Kn]=H);o.previousActiveHandlers=we,(Object.keys(en).length||E5(ue))&&(o.changes.push([ue,le,en]),o.triggerRenderFrame()),(Object.keys(we).length||E5(ue))&&o.map.stop(!0),o.updatingCamera=!1;var si=ue.cameraAnimation;si&&(o.inertia.clear(),o.fireEvents({},{}),o.changes=[],si(o.map))}),this.map=a,this.el=this.map.getCanvasContainer(),this.handlers=[],this.handlersById={},this.changes=[],this.inertia=new A8(a),this.bearingSnap=r.bearingSnap,this.rotateEnabled=r.rotateEnabled,this.pitchEnabled=r.pitchEnabled,this.previousActiveHandlers={},this.eventsInProgress={},this.addDefaultHandlers(r);var u=this.el;this.listeners=[],this.listeners=[[u,"touchstart",{passive:!1}],[u,"touchmove",{passive:!1}],[u,"touchend",void 0],[u,"touchcancel",void 0],[u,"mousedown",void 0],[u,"mousemove",void 0],[u,"mouseup",void 0],[window.document,"mousemove",{capture:!0}],[window.document,"mouseup",void 0],[u,"mouseover",void 0],[u,"mouseout",void 0],[u,"dblclick",void 0],[u,"click",void 0],[u,"keydown",{capture:!1}],[u,"keyup",void 0],[u,"wheel",{passive:!1}],[u,"contextmenu",void 0],[window,"blur",void 0]];var c=t_(this.listeners),p;try{for(c.s();!(p=c.n()).done;){var g=(0,Vi.Z)(p.value,3),y=g[0],S=g[1],O=g[2];Zc.addEventListener(y,S,y===window.document?this.handleWindowEvent:this.handleEvent,O)}}catch(D){c.e(D)}finally{c.f()}}return(0,at.Z)(e,[{key:"destroy",value:function(){var r=t_(this.listeners),o;try{for(r.s();!(o=r.n()).done;){var u=(0,Vi.Z)(o.value,3),c=u[0],p=u[1],g=u[2];Zc.removeEventListener(c,p,c===window.document?this.handleWindowEvent:this.handleEvent,g)}}catch(y){r.e(y)}finally{r.f()}}},{key:"stop",value:function(){if(!this.updatingCamera){var r=t_(this.handlers),o;try{for(r.s();!(o=r.n()).done;){var u=o.value.handler;u.reset()}}catch(c){r.e(c)}finally{r.f()}this.inertia.clear(),this.fireEvents({},{}),this.changes=[]}}},{key:"isActive",value:function(){var r=t_(this.handlers),o;try{for(r.s();!(o=r.n()).done;){var u=o.value.handler;if(u.isActive())return!0}}catch(c){r.e(c)}finally{r.f()}return!1}},{key:"isZooming",value:function(){return!!this.eventsInProgress.zoom||this.map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this.eventsInProgress.rotate}},{key:"isMoving",value:function(){return!!b3(this.eventsInProgress)||this.isZooming()}},{key:"mergeIHandlerResult",value:function(r,o,u,c,p){if(u){S5(r,u);var g={handlerName:c,originalEvent:u.originalEvent||p};u.zoomDelta!==void 0&&(o.zoom=g),u.panDelta!==void 0&&(o.drag=g),u.pitchDelta!==void 0&&(o.pitch=g),u.bearingDelta!==void 0&&(o.rotate=g)}}},{key:"triggerRenderFrame",value:function(){var r=this;this.frameId===void 0&&(this.frameId=this.map.requestRenderFrame(function(o){delete r.frameId,r.handleEvent(new _8("renderFrame",{timeStamp:o})),r.applyChanges()}))}},{key:"addDefaultHandlers",value:function(r){var o=this.map,u=o.getCanvasContainer();this.add("mapEvent",new P8(o,r));var c=o.boxZoom=new v8(o,r);this.add("boxZoom",c);var p=new i7,g=new g8;o.doubleClickZoom=new $8(g,p),this.add("tapZoom",p),this.add("clickZoom",g);var y=new n7;this.add("tapDragZoom",y);var S=o.touchPitch=new l7;this.add("touchPitch",S);var O=new z8(r),D=new V8(r);o.dragRotate=new K8(r,O,D),this.add("mouseRotate",O,["mousePitch"]),this.add("mousePitch",D,["mouseRotate"]);var V=new L8(r),H=new a7(r);o.dragPan=new Y8(u,V,H),this.add("mousePan",V),this.add("touchPan",H,["touchZoom","touchRotate"]);var ue=new p7,le=new m7;o.touchZoomRotate=new q8(u,le,ue,y),this.add("touchRotate",ue,["touchPan","touchZoom"]),this.add("touchZoom",le,["touchPan","touchRotate"]);var we=o.scrollZoom=new X8(o,this);this.add("scrollZoom",we,["mousePan"]);var Ne=o.keyboard=new I8;this.add("keyboard",Ne),this.add("blockableMapEvent",new p8(o));for(var dt=0,mt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];dt<mt.length;dt++){var Lt=mt[dt];r.interactive&&r[Lt]&&o[Lt].enable(r[Lt])}}},{key:"add",value:function(r,o,u){this.handlers.push({handlerName:r,handler:o,allowed:u}),this.handlersById[r]=o}},{key:"blockedByActive",value:function(r,o,u){for(var c in r)if(c!==u&&(!o||o.indexOf(c)<0))return!0;return!1}},{key:"getMapTouches",value:function(r){var o=[],u=t_(r),c;try{for(u.s();!(c=u.n()).done;){var p=c.value,g=p.target;this.el.contains(g)&&o.push(p)}}catch(y){u.e(y)}finally{u.f()}return o}},{key:"applyChanges",value:function(){var r={},o={},u={},c=t_(this.changes),p;try{for(c.s();!(p=c.n()).done;){var g=(0,Vi.Z)(p.value,3),y=g[0],S=g[1],O=g[2];y.panDelta&&(r.panDelta=(r.panDelta||new is(0,0))._add(y.panDelta)),y.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(r.around=y.around),y.pinchAround!==void 0&&(r.pinchAround=y.pinchAround),y.noInertia&&(r.noInertia=y.noInertia),S5(o,S),S5(u,O)}}catch(D){c.e(D)}finally{c.f()}this.updateMapTransform(r,o,u),this.changes=[]}},{key:"updateMapTransform",value:function(r,o,u){var c=this.map,p=c.transform;if(!E5(r))return this.fireEvents(o,u);var g=r.panDelta,y=r.zoomDelta,S=r.bearingDelta,O=r.pitchDelta,D=r.pinchAround,V=r.around;D!==void 0&&(V=D),c.stop(!0),V=V||c.transform.centerPoint;var H=p.pointLocation(g?V.sub(g):V);S&&this.rotateEnabled&&(p.bearing+=S),O&&this.pitchEnabled&&(p.pitch+=O),y&&(p.zoom+=y),p.setLocationAtPoint(H,V),this.map.update(),r.noInertia||this.inertia.record(r),this.fireEvents(o,u)}},{key:"fireEvents",value:function(r,o){var u=this,c=b3(this.eventsInProgress),p=b3(r),g={};for(var y in r)if(r[y]){var S=r[y].originalEvent;this.eventsInProgress[y]||(g["".concat(y,"start")]=S),this.eventsInProgress[y]=r[y]}!c&&p&&this.fireEvent("movestart",p.originalEvent);for(var O in g)g[O]&&this.fireEvent(O,g[O]);r.rotate&&(this.bearingChanged=!0),p&&this.fireEvent("move",p.originalEvent);for(var D in r)if(r[D]){var V=r[D].originalEvent;this.fireEvent(D,V)}var H={},ue;for(var le in this.eventsInProgress)if(this.eventsInProgress[le]){var we=this.eventsInProgress[le],Ne=we.handlerName,dt=we.originalEvent;this.handlersById[Ne].isActive()||(delete this.eventsInProgress[le],ue=o[Ne]||dt,H["".concat(le,"end")]=ue)}for(var mt in H)H[mt]&&this.fireEvent(mt,H[mt]);var Lt=b3(this.eventsInProgress);if((c||p)&&!Lt){this.updatingCamera=!0;var Wt=this.inertia.onMoveEnd(this.map.dragPan.inertiaOptions),qt=function(Sr){return Sr!==0&&-u.bearingSnap<Sr&&Sr<u.bearingSnap};Wt?(qt(Wt.bearing||this.map.getBearing())&&(Wt.bearing=0),this.map.easeTo(Wt,{originalEvent:ue})):(this.map.emit("moveend",new Ma("moveend",{originalEvent:ue})),qt(this.map.getBearing())&&this.map.resetNorth()),this.bearingChanged=!1,this.updatingCamera=!1}}},{key:"fireEvent",value:function(r,o){this.map.emit(r,new Ma(r,o?{originalEvent:o}:{}))}}]),e}(),x7=_7,S3=null,DS=[],b7=30,w5=1e3/b7,ax=window.performance,ox={create:"create",load:"load",fullLoad:"fullLoad"},a6={mark:function(a){ax.mark(a)},frame:function(a){var r=a;if(S3!=null){var o=r-S3;DS.push(o)}S3=r},clearMetrics:function(){S3=null,DS=[],ax.clearMeasures("loadTime"),ax.clearMeasures("fullLoadTime");for(var a in ox)ax.clearMarks(ox[a])},getPerformanceMetrics:function(){var a=ax.measure("loadTime",ox.create,ox.load).duration,r=ax.measure("fullLoadTime",ox.create,ox.fullLoad).duration,o=DS.length,u=DS.reduce(function(y,S){return y+S},0)/o/1e3,c=1/u,p=DS.filter(function(y){return y>w5}).reduce(function(y,S){return y+(S-w5)/w5},0),g=p/(o+p)*100;return{loadTime:a,fullLoadTime:r,fps:c,percentDroppedFrames:g}}};function o6(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=S7(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function S7(e,a){if(e){if(typeof e=="string")return s6(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s6(e,a)}}function s6(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var E7=function(){function e(){(0,Rt.Z)(this,e),this.queue=[],this.id=0,this.cleared=!1,this.currentlyRunning=!1}return(0,at.Z)(e,[{key:"add",value:function(r){var o=++this.id,u=this.queue;return u.push({callback:r,id:o,cancelled:!1}),o}},{key:"remove",value:function(r){var o=this.currentlyRunning,u=o?this.queue.concat(o):this.queue,c=o6(u),p;try{for(c.s();!(p=c.n()).done;){var g=p.value;if(g.id===r){g.cancelled=!0;return}}}catch(y){c.e(y)}finally{c.f()}}},{key:"run",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=this.currentlyRunning=this.queue;this.queue=[];var u=o6(o),c;try{for(u.s();!(c=u.n()).done;){var p=c.value;if(!p.cancelled&&(p.callback(r),this.cleared))break}}catch(g){u.e(g)}finally{u.f()}this.cleared=!1,this.currentlyRunning=!1}},{key:"clear",value:function(){this.currentlyRunning&&(this.cleared=!0),this.queue=[]}}]),e}(),w7=E7;function bj(e){var a=C7();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function C7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function A7(e,a){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(a||(a=document),!!a)){var u=a.head||a.getElementsByTagName("head")[0];if(!u){u=a.createElement("head");var c=a.body||a.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):a.documentElement.appendChild(u)}var p=a.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(a.createTextNode(e)),u.appendChild(p),p}}A7(`.l7-map {
  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:-webkit-full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: -webkit-grab;
  cursor: grab;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: -webkit-grabbing;
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  -ms-touch-action: pan-x pan-y;
      touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: pinch-zoom;
      touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: none;
      touch-action: none;
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }
.l7-ctrl-top-left     { top: 0; left: 0; }
.l7-ctrl-top-right    { top: 0; right: 0; }
.l7-ctrl-bottom-left  { bottom: 0; left: 0; }
.l7-ctrl-bottom-right { right: 0; bottom: 0; }

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}
.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }
.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }
.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }
.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }


.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
    cursor: crosshair;
}

.l7-boxzoom {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    background: #fff;
    border: 2px dotted #202020;
    opacity: 0.5;
    z-index: 10;
}
`);var T7=-2,M7=22,Sj=wa.merge,R7=0,I7=60,Ej={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:T7,maxZoom:M7,minPitch:R7,maxPitch:I7,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0,pitchEnabled:!0,rotateEnabled:!0},wj=null,P7=wa.throttle,O7=function(){function e(a){var r=this;(0,Rt.Z)(this,e),(0,Fe.Z)(this,"onHashChange",function(){var o=r.getCurrentHash();if(o.length>=3&&!o.some(function(c){return isNaN(+c)})){var u=r.map.dragRotate.isEnabled()&&r.map.touchZoomRotate.isEnabled()?+(o[3]||0):r.map.getBearing();return r.map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:u,pitch:+(o[4]||0)}),!0}return!1}),(0,Fe.Z)(this,"getCurrentHash",function(){var o=window.location.hash.replace("#","");if(r.hashName){var u;return o.split("&").map(function(c){return c.split("=")}).forEach(function(c){c[0]===r.hashName&&(u=c)}),(u&&u[1]||"").split("/")}return o.split("/")}),(0,Fe.Z)(this,"updateHashUnthrottled",function(){var o=r.getHashString();try{window.history.replaceState(window.history.state,"",o)}catch(u){}}),this.hashName=a&&encodeURIComponent(a),this.updateHash=P7(this.updateHashUnthrottled,30*1e3/100)}return(0,at.Z)(e,[{key:"addTo",value:function(r){return this.map=r,window.addEventListener("hashchange",this.onHashChange,!1),this.map.on("moveend",this.updateHash),this}},{key:"remove",value:function(){return window.removeEventListener("hashchange",this.onHashChange,!1),this.map.off("moveend",this.updateHash),delete this.map,this}},{key:"getHashString",value:function(r){var o=this.map.getCenter(),u=Math.round(this.map.getZoom()*100)/100,c=Math.ceil((u*Math.LN2+Math.log(512/360/.5))/Math.LN10),p=Math.pow(10,c),g=Math.round(o.lng*p)/p,y=Math.round(o.lat*p)/p,S=this.map.getBearing(),O=this.map.getPitch(),D="";if(r?D+="/".concat(g,"/").concat(y,"/").concat(u):D+="".concat(u,"/").concat(y,"/").concat(g),(S||O)&&(D+="/".concat(Math.round(S*10)/10)),O&&(D+="/".concat(Math.round(O))),this.hashName){var V=this.hashName,H=!1,ue=window.location.hash.slice(1).split("&").map(function(le){var we=le.split("=")[0];return we===V?(H=!0,"".concat(we,"=").concat(D)):le}).filter(function(le){return le});return H||ue.push("".concat(V,"=").concat(D)),"#".concat(ue.join("&"))}return"#".concat(D)}}]),e}(),k7=O7;function F7(e){var a=D7();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function D7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function L7(e,a){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(a||(a=document),!!a)){var u=a.head||a.getElementsByTagName("head")[0];if(!u){u=a.createElement("head");var c=a.body||a.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):a.documentElement.appendChild(u)}var p=a.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(a.createTextNode(e)),u.appendChild(p),p}}L7(`.l7-map {
  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:-webkit-full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: -webkit-grab;
  cursor: grab;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: -webkit-grabbing;
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  -ms-touch-action: pan-x pan-y;
      touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: pinch-zoom;
      touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: none;
      touch-action: none;
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }
.l7-ctrl-top-left     { top: 0; left: 0; }
.l7-ctrl-top-right    { top: 0; right: 0; }
.l7-ctrl-bottom-left  { bottom: 0; left: 0; }
.l7-ctrl-bottom-right { right: 0; bottom: 0; }

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}
.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }
.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }
.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }
.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }


.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
    cursor: crosshair;
}

.l7-boxzoom {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    background: #fff;
    border: 2px dotted #202020;
    opacity: 0.5;
    z-index: 10;
}
`),function(){if(typeof window.CustomEvent=="function")return!1;function e(a,r){r=r||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(a,r.bubbles,r.cancelable,r.detail),o}e.prototype=window.Event.prototype,window.CustomEvent=e}();var E3=-2,u6=22,l6=wa.merge,sx=0,w3=60,B7={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:E3,maxZoom:u6,minPitch:sx,maxPitch:w3,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0,pitchEnabled:!0,rotateEnabled:!0},c6=function(e){(0,mr.Z)(r,e);var a=F7(r);function r(o){var u;(0,Rt.Z)(this,r),u=a.call(this,l6({},B7,o)),(0,Fe.Z)((0,vr.Z)(u),"renderTaskQueue",new w7),(0,Fe.Z)((0,vr.Z)(u),"trackResize",!0),(0,Fe.Z)((0,vr.Z)(u),"onWindowOnline",function(){u.update()}),(0,Fe.Z)((0,vr.Z)(u),"onWindowResize",function(p){u.trackResize&&u.resize({originalEvent:p}).update()}),u.initContainer(),u.resize(),u.handlers=new x7((0,vr.Z)(u),u.options),typeof window!="undefined"&&(window.addEventListener("online",u.onWindowOnline,!1),window.addEventListener("resize",u.onWindowResize,!1),window.addEventListener("orientationchange",u.onWindowResize,!1));var c=typeof o.hash=="string"&&o.hash||void 0;return o.hash&&(u.hash=new k7(c).addTo((0,vr.Z)(u))),(!u.hash||!u.hash.onHashChange())&&(u.jumpTo({center:o.center,zoom:o.zoom,bearing:o.bearing,pitch:o.pitch}),o.bounds&&(u.resize(),u.fitBounds(o.bounds,l6({},o.fitBoundsOptions,{duration:0})))),u}return(0,at.Z)(r,[{key:"resize",value:function(u){var c=this.containerDimensions(),p=(0,Vi.Z)(c,2),g=p[0],y=p[1];this.transform.resize(g,y);var S=!this.moving;return S&&(this.stop(),this.emit("movestart",new window.CustomEvent("movestart",u)),this.emit("move",new window.CustomEvent("move",u))),this.emit("resize",new window.CustomEvent("resize",u)),S&&this.emit("moveend",new window.CustomEvent("moveend",u)),this}},{key:"getContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getCanvasContainer",value:function(){return this.canvasContainer}},{key:"project",value:function(u){return this.transform.locationPoint(Vu.convert(u))}},{key:"unproject",value:function(u){return this.transform.pointLocation(is.convert(u))}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(u){this.transform.setMaxBounds(PS.convert(u))}},{key:"setStyle",value:function(u){}},{key:"setMinZoom",value:function(u){if(u=u==null?E3:u,u>=E3&&u<=this.transform.maxZoom)return this.transform.minZoom=u,this.getZoom()<u&&this.setZoom(u),this;throw new Error("minZoom must be between ".concat(E3," and the current maxZoom, inclusive"))}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(u){if(u=u==null?u6:u,u>=this.transform.minZoom)return this.transform.maxZoom=u,this.getZoom()>u&&this.setZoom(u),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(u){if(u=u==null?sx:u,u<sx)throw new Error("minPitch must be greater than or equal to ".concat(sx));if(u>=sx&&u<=this.transform.maxPitch)return this.transform.minPitch=u,this.getPitch()<u&&this.setPitch(u),this;throw new Error("minPitch must be between ".concat(sx," and the current maxPitch, inclusive"))}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(u){if(u=u==null?w3:u,u>w3)throw new Error("maxPitch must be less than or equal to ".concat(w3));if(u>=this.transform.minPitch)return this.transform.maxPitch=u,this.getPitch()>u&&this.setPitch(u),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(u){this.transform.renderWorldCopies=!!u}},{key:"remove",value:function(){this.container.removeChild(this.canvasContainer),this.canvasContainer=null,this.frame&&(this.frame.cancel(),this.frame=null),this.renderTaskQueue.clear()}},{key:"requestRenderFrame",value:function(u){return this.update(),this.renderTaskQueue.add(u)}},{key:"cancelRenderFrame",value:function(u){return this.renderTaskQueue.remove(u)}},{key:"triggerRepaint",value:function(){var u=this;this.frame||(this.frame=h3(function(c){a6.frame(c),u.frame=null,u.update(c)}))}},{key:"update",value:function(u){var c=this;this.frame||(this.frame=h3(function(p){a6.frame(p),c.frame=null,c.renderTaskQueue.run(u)}))}},{key:"initContainer",value:function(){if(typeof this.options.container=="string"){if(this.container=window.document.getElementById(this.options.container),!this.container)throw new Error("Container '".concat(this.options.container,"' not found."))}else if(this.options.container instanceof HTMLElement)this.container=this.options.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");var u=this.container;u.classList.add("l7-map");var c=this.canvasContainer=Ns("div","l7-canvas-container",u);this.options.interactive&&c.classList.add("l7-interactive")}},{key:"initMiniContainer",value:function(){this.container=this.options.canvas,this.canvasContainer=this.container}},{key:"containerDimensions",value:function(){var u=0,c=0;return this.container&&(u=this.container.clientWidth,c=this.container.clientHeight,u=u===0?400:u,c=c===0?300:c),[u,c]}}]),r}(nm),N7={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},f6,h6,p6,d6,v6,g6,ux,m6,y6,_6,x6,b6={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},z7=12,S6=(f6=(0,Tn.b2)(),h6=(0,Tn.f3)(ut.MapConfig),p6=(0,Tn.f3)(ut.IGlobalConfigService),d6=(0,Tn.f3)(ut.ICoordinateSystemService),v6=(0,Tn.f3)(ut.IEventEmitter),f6(g6=(ux=function(){function e(){var a=this;(0,Rt.Z)(this,e),(0,Fe.Z)(this,"version","DEFAUlTMAP"),(0,Fe.Z)(this,"simpleMapCoord",new GM),(0,Fe.Z)(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),Za(this,"config",m6,this),Za(this,"configService",y6,this),Za(this,"coordinateSystemService",_6,this),Za(this,"eventEmitter",x6,this),(0,Fe.Z)(this,"handleCameraChanged",function(r){var o=a.map.getCenter(),u=o.lat,c=o.lng;a.emit("mapchange"),a.viewport.syncWithMapCamera({bearing:a.map.getBearing(),center:[c,u],viewportHeight:a.map.transform.height,pitch:a.map.getPitch(),viewportWidth:a.map.transform.width,zoom:a.map.getZoom(),cameraHeight:0}),a.updateCoordinateSystemService(),a.cameraChangedCallback(a.viewport)})}return(0,at.Z)(e,[{key:"setBgColor",value:function(r){this.bgColor=r}},{key:"addMarkerContainer",value:function(){var r=this.map.getCanvasContainer();this.markerContainer=Ns("div","l7-marker-container",r),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"getOverlayContainer",value:function(){}},{key:"on",value:function(r,o){vb.indexOf(r)!==-1?this.eventEmitter.on(r,o):this.map.on(b6[r]||r,o)}},{key:"off",value:function(r,o){this.map.off(b6[r]||r,o),this.eventEmitter.off(r,o)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){if(this.version==="SIMPLE")return this.simpleMapCoord.getSize();var r=this.map.transform;return[r.width,r.height]}},{key:"getType",value:function(){return"default"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(r){return this.map.setZoom(r)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(r){this.map.setCenter(r)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(r){this.map.setBearing(r)}},{key:"zoomIn",value:function(r,o){this.map.zoomIn(r,o)}},{key:"zoomOut",value:function(r,o){this.map.zoomOut(r,o)}},{key:"setPitch",value:function(r){return this.map.setPitch(r)}},{key:"panTo",value:function(r){this.map.panTo(r)}},{key:"panBy",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.map.panBy([r,o])}},{key:"fitBounds",value:function(r,o){this.map.fitBounds(r,o)}},{key:"setMaxZoom",value:function(r){this.map.setMaxZoom(r)}},{key:"setMinZoom",value:function(r){this.map.setMinZoom(r)}},{key:"setMapStatus",value:function(r){r.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),r.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),r.dragEnable===!1&&this.map.dragPan.disable(),r.dragEnable===!0&&this.map.dragPan.enable(),r.rotateEnable===!1&&this.map.dragRotate.disable(),r.dragEnable===!0&&this.map.dragRotate.enable(),r.keyboardEnable===!1&&this.map.keyboard.disable(),r.keyboardEnable===!0&&this.map.keyboard.enable(),r.zoomEnable===!1&&this.map.scrollZoom.disable(),r.zoomEnable===!0&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(r,o){this.map.flyTo({zoom:r,center:o})}},{key:"setMapStyle",value:function(r){this.map.setStyle(this.getMapStyleValue(r))}},{key:"meterToCoord",value:function(r,o){return 1}},{key:"pixelToLngLat",value:function(r){return this.map.unproject(r)}},{key:"lngLatToPixel",value:function(r){return this.map.project(r)}},{key:"containerToLngLat",value:function(r){return this.map.unproject(r)}},{key:"lngLatToContainer",value:function(r){return this.map.project(r)}},{key:"getMapStyle",value:function(){try{var r,o=(r=this.map.getStyle().sprite)!==null&&r!==void 0?r:"";return/^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(o)?o==null?void 0:o.replace(/\/\w+$/,"").replace(/sprites/,"styles"):o}catch(u){return""}}},{key:"getMapStyleConfig",value:function(){return N7}},{key:"getMapStyleValue",value:function(r){var o;return(o=this.getMapStyleConfig()[r])!==null&&o!==void 0?o:r}},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(r){for(var o,u=arguments.length,c=new Array(u>1?u-1:0),p=1;p<u;p++)c[p-1]=arguments[p];(o=this.eventEmitter).emit.apply(o,[r].concat(c))}},{key:"once",value:function(r){for(var o,u=arguments.length,c=new Array(u>1?u-1:0),p=1;p<u;p++)c[p-1]=arguments[p];(o=this.eventEmitter).once.apply(o,[r].concat(c))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(r){var o=this.map.getCanvas(),u=r==="jpg"?o==null?void 0:o.toDataURL("image/jpeg"):o==null?void 0:o.toDataURL("image/png");return u}},{key:"onCameraChanged",value:function(r){this.cameraChangedCallback=r}},{key:"creatMapContainer",value:function(r){var o=r;return typeof r=="string"&&(o=document.getElementById(r)),o}},{key:"updateView",value:function(r){this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:r.bearing,center:r.center,viewportHeight:r.viewportHeight,pitch:r.pitch,viewportWidth:r.viewportWidth,zoom:r.zoom,cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}},{key:"updateCoordinateSystemService",value:function(){var r=this.config.offsetCoordinate,o=r===void 0?!0:r;this.viewport.getZoom()>z7&&o?this.coordinateSystemService.setCoordinateSystem(Bc.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(Bc.LNGLAT)}}]),e}(),m6=ra(ux.prototype,"config",[h6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y6=ra(ux.prototype,"configService",[p6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_6=ra(ux.prototype,"coordinateSystemService",[d6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x6=ra(ux.prototype,"eventEmitter",[v6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ux))||g6),U7=["id","style","rotation","mapInstance","version","mapSize","interactive"],Z7=["id","style","rotation","mapInstance","canvas","hasBaseMap"],E6,w6;function V7(e){var a=H7();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function H7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var j7=12,W7=(E6=(0,Tn.b2)(),E6(w6=function(e){(0,mr.Z)(r,e);var a=V7(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"version",Rc.DEFAULT),(0,Fe.Z)((0,vr.Z)(o),"handleMiniCameraChanged",function(g,y,S,O,D){var V=o.config.offsetCoordinate,H=V===void 0?!0:V;o.viewport.syncWithMapCamera({bearing:O,center:[g,y],viewportHeight:o.map.transform.height,pitch:D,viewportWidth:o.map.transform.width,zoom:S,cameraHeight:0}),o.viewport.getZoom()>j7&&H?o.coordinateSystemService.setCoordinateSystem(Bc.LNGLAT_OFFSET):o.coordinateSystemService.setCoordinateSystem(Bc.LNGLAT),o.cameraChangedCallback(o.viewport)}),o}return(0,at.Z)(r,[{key:"lngLatToCoord",value:function(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0,z:0},p=this.lngLatToMercator(u,0),g=p.x,y=p.y;return[g-c.x,y-c.y]}},{key:"lngLatToMercator",value:function(u,c){var p=Li.fromLngLat(u,c),g=p.x,y=g===void 0?0:g,S=p.y,O=S===void 0?0:S,D=p.z,V=D===void 0?0:D;return{x:y,y:O,z:V}}},{key:"getModelMatrix",value:function(u,c,p){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},S=Li.fromLngLat(u,c),O=S.meterInMercatorCoordinateUnits(),D=vu();return rl(D,D,ao.fromValues(S.x-y.x,S.y-y.y,S.z||0-y.z)),Bu(D,D,ao.fromValues(O*g[0],-O*g[1],O*g[2])),Wh(D,D,p[0]),Kd(D,D,p[1]),Ya(D,D,p[2]),D}},{key:"init",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p=this,g,y,S,O,D,V,H,ue,le,we,Ne,dt,mt,Lt,Wt;return $t().wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:g=this.config,y=g.id,S=y===void 0?"map":y,O=g.style,D=O===void 0?"light":O,V=g.rotation,H=V===void 0?0:V,ue=g.mapInstance,le=g.version,we=le===void 0?"DEFAULTMAP":le,Ne=g.mapSize,dt=Ne===void 0?1e4:Ne,mt=g.interactive,Lt=mt===void 0?!0:mt,Wt=(0,Nc.Z)(g,U7),this.viewport=new hS,this.version=we,this.simpleMapCoord.setSize(dt),we==="SIMPLE"&&Wt.center&&(Wt.center=this.simpleMapCoord.unproject(Wt.center)),ue?(this.map=ue,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatMapContainer(S),this.map=new c6((0,te.Z)({container:this.$mapContainer,style:this.getMapStyleValue(D),bearing:H},Wt))),this.map.on("load",function(){p.handleCameraChanged()}),Lt&&this.map.on("move",this.handleCameraChanged),setTimeout(function(){p.handleCameraChanged()},100),this.handleCameraChanged();case 10:case"end":return ir.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"initMiniMap",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p=this,g,y,S,O,D,V,H,ue,le,we,Ne,dt,mt,Lt;return $t().wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:g=this.config,y=g.id,S=y===void 0?"map":y,O=g.style,D=O===void 0?"light":O,V=g.rotation,H=V===void 0?0:V,ue=g.mapInstance,le=g.canvas,we=le===void 0?null:le,Ne=g.hasBaseMap,dt=Ne===void 0?!1:Ne,mt=(0,Nc.Z)(g,Z7),this.viewport=new hS,this.$mapContainer=we,this.map=new c6((0,te.Z)({container:this.$mapContainer,style:this.getMapStyleValue(D),bearing:H,canvas:we},mt)),dt?(Lt=this.map.getCenter(),this.handleMiniCameraChanged(Lt.lng,Lt.lat,this.map.getZoom(),this.map.getBearing(),this.map.getPitch()),window.document.addEventListener("mapCameaParams",function(ir){var Sr=ir.e,Br=Sr.longitude,Jr=Sr.latitude,en=Sr.scale,Kn=Sr.bearing,si=Sr.pitch;p.handleMiniCameraChanged(Br,Jr,en-1.25,Kn,si)})):(this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged());case 5:case"end":return qt.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"exportMap",value:function(u){var c=this.map.getCanvas(),p=u==="jpg"?c==null?void 0:c.toDataURL("image/jpeg"):c==null?void 0:c.toDataURL("image/png");return p}}]),r}(S6))||w6);function G7(e){var a=X7();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function X7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var $7=function(e){(0,mr.Z)(r,e);var a=G7(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getServiceConstructor",value:function(){return W7}}]),r}(Y1),Y7=F(6158),LS=F.n(Y7),K7=function(){function e(){(0,Rt.Z)(this,e)}return(0,at.Z)(e,[{key:"syncWithMapCamera",value:function(r){var o=r.center,u=r.zoom,c=r.pitch,p=r.bearing,g=r.viewportHeight,y=r.viewportWidth;this.viewport=new qy({width:y,height:g,longitude:o&&o[0],latitude:o&&o[1],zoom:u,pitch:c,bearing:p})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(r,o){return this.viewport.projectFlat(r,o)}}]),e}(),q7=["id","attributionControl","style","token","rotation","mapInstance"],C6,A6;function Q7(e){var a=J7();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function J7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function ez(e,a){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(a||(a=document),!!a)){var u=a.head||a.getElementsByTagName("head")[0];if(!u){u=a.createElement("head");var c=a.body||a.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):a.documentElement.appendChild(u)}var p=a.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(a.createTextNode(e)),u.appendChild(p),p}}ez(`.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:pinch-zoom;touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:none;touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 0 2px ButtonText;box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){-webkit-box-shadow:none;box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;-webkit-box-sizing:border-box;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-box;display:-ms-flexbox;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.1);box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:-webkit-box;display:-ms-flexbox;display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 3px rgba(0,0,0,.35);box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`),window.mapboxgl=LS();var tz=0,T6="101MlGsZ2AmmA&access_token=pk.eyJ1IjoiZXhhbXBsZXMiLCJhIjoiY2p0MG01MXRqMW45cjQzb2R6b2ptc3J4MSJ9.zA2W0IkI0c6KaAhJfk9bWg",rz=(C6=(0,Tn.b2)(),C6(A6=function(e){(0,mr.Z)(r,e);var a=Q7(r);function r(){var o;(0,Rt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,Fe.Z)((0,vr.Z)(o),"version","MAPBOX"),o}return(0,at.Z)(r,[{key:"getType",value:function(){return"mapbox"}},{key:"lngLatToCoord",value:function(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0,z:0},p=this.lngLatToMercator(u,0),g=p.x,y=p.y;return[g-c.x,y-c.y]}},{key:"lngLatToMercator",value:function(u,c){var p=window.mapboxgl.MercatorCoordinate.fromLngLat(u,c),g=p.x,y=g===void 0?0:g,S=p.y,O=S===void 0?0:S,D=p.z,V=D===void 0?0:D;return{x:y,y:O,z:V}}},{key:"getModelMatrix",value:function(u,c,p){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},S=window.mapboxgl.MercatorCoordinate.fromLngLat(u,c),O=S.meterInMercatorCoordinateUnits(),D=vu();return rl(D,D,ao.fromValues(S.x-y.x,S.y-y.y,S.z||0-y.z)),Bu(D,D,ao.fromValues(O*g[0],-O*g[1],O*g[2])),Wh(D,D,p[0]),Kd(D,D,p[1]),Ya(D,D,p[2]),D}},{key:"init",value:function(){var o=(0,fn.Z)($t().mark(function c(){var p=this,g,y,S,O,D,V,H,ue,le,we,Ne,dt,mt;return $t().wrap(function(Wt){for(;;)switch(Wt.prev=Wt.next){case 0:g=this.config,y=g.id,S=y===void 0?"map":y,O=g.attributionControl,D=O===void 0?!1:O,V=g.style,H=V===void 0?"light":V,ue=g.token,le=ue===void 0?T6:ue,we=g.rotation,Ne=we===void 0?0:we,dt=g.mapInstance,mt=(0,Nc.Z)(g,q7),this.viewport=new K7,!dt&&!window.mapboxgl&&console.error(this.configService.getSceneWarninfo("SDK")),le===T6&&H!=="blank"&&!window.mapboxgl.accessToken&&!dt&&console.warn(this.configService.getSceneWarninfo("MapToken")),!dt&&!window.mapboxgl.accessToken&&(window.mapboxgl.accessToken=le),dt?(this.map=dt,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatMapContainer(S),this.map=new window.mapboxgl.Map((0,te.Z)({container:this.$mapContainer,style:this.getMapStyleValue(H),attributionControl:D,bearing:Ne},mt))),this.map.on("load",function(){p.handleCameraChanged()}),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 9:case"end":return Wt.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"destroy",value:function(){var u;(u=this.$mapContainer)===null||u===void 0||(u=u.parentNode)===null||u===void 0||u.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(u){for(var c,p=arguments.length,g=new Array(p>1?p-1:0),y=1;y<p;y++)g[y-1]=arguments[y];(c=this.eventEmitter).emit.apply(c,[u].concat(g))}},{key:"once",value:function(u){for(var c,p=arguments.length,g=new Array(p>1?p-1:0),y=1;y<p;y++)g[y-1]=arguments[y];(c=this.eventEmitter).once.apply(c,[u].concat(g))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"meterToCoord",value:function(u,c){var p=new(LS()).LngLat(u[0],u[1]),g=new(LS()).LngLat(c[0],c[1]),y=p.distanceTo(g),S=LS().MercatorCoordinate.fromLngLat({lng:u[0],lat:u[1]}),O=LS().MercatorCoordinate.fromLngLat({lng:c[0],lat:c[1]}),D=S.x,V=S.y,H=O.x,ue=O.y,le=Math.sqrt(Math.pow(D-H,2)+Math.pow(V-ue,2))*4194304*2;return le/y}},{key:"exportMap",value:function(u){var c=this.map.getCanvas(),p=u==="jpg"?c==null?void 0:c.toDataURL("image/jpeg"):c==null?void 0:c.toDataURL("image/png");return p}},{key:"creatMapContainer",value:function(u){var c=u;typeof u=="string"&&(c=document.getElementById(u));var p=document.createElement("div");return p.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,p.id="l7_mapbox_div"+tz++,c.appendChild(p),p}}]),r}(S6))||A6);function nz(e){var a=iz();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function iz(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function az(e,a){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(a||(a=document),!!a)){var u=a.head||a.getElementsByTagName("head")[0];if(!u){u=a.createElement("head");var c=a.body||a.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):a.documentElement.appendChild(u)}var p=a.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(a.createTextNode(e)),u.appendChild(p),p}}az(`.mapboxgl-ctrl-logo {
 display: none !important;
}
`);var oz=function(e){(0,mr.Z)(r,e);var a=nz(r);function r(){return(0,Rt.Z)(this,r),a.apply(this,arguments)}return(0,at.Z)(r,[{key:"getServiceConstructor",value:function(){return rz}}]),r}(Y1),sz=F(36556),uz=F.n(sz),lz=function(){function e(a,r){(0,Rt.Z)(this,e);var o=r.buffer,u=r.offset,c=r.stride,p=r.normalized,g=r.size,y=r.divisor;this.buffer=o,this.attribute={buffer:o.get(),offset:u||0,stride:c||0,normalized:p||!1,divisor:y||0},g&&(this.attribute.size=g)}return(0,at.Z)(e,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(r){this.buffer.subData(r)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),sm,BS,E0,kd,NS,w0,zS,C3,ig,r_,Cf,ag,og,A3,cz=(sm={},(0,Fe.Z)(sm,gt.POINTS,"points"),(0,Fe.Z)(sm,gt.LINES,"lines"),(0,Fe.Z)(sm,gt.LINE_LOOP,"line loop"),(0,Fe.Z)(sm,gt.LINE_STRIP,"line strip"),(0,Fe.Z)(sm,gt.TRIANGLES,"triangles"),(0,Fe.Z)(sm,gt.TRIANGLE_FAN,"triangle fan"),(0,Fe.Z)(sm,gt.TRIANGLE_STRIP,"triangle strip"),sm),M6=(BS={},(0,Fe.Z)(BS,gt.STATIC_DRAW,"static"),(0,Fe.Z)(BS,gt.DYNAMIC_DRAW,"dynamic"),(0,Fe.Z)(BS,gt.STREAM_DRAW,"stream"),BS),C5=(E0={},(0,Fe.Z)(E0,gt.BYTE,"int8"),(0,Fe.Z)(E0,gt.INT,"int32"),(0,Fe.Z)(E0,gt.UNSIGNED_BYTE,"uint8"),(0,Fe.Z)(E0,gt.UNSIGNED_SHORT,"uint16"),(0,Fe.Z)(E0,gt.UNSIGNED_INT,"uint32"),(0,Fe.Z)(E0,gt.FLOAT,"float"),E0),fz=(kd={},(0,Fe.Z)(kd,gt.ALPHA,"alpha"),(0,Fe.Z)(kd,gt.LUMINANCE,"luminance"),(0,Fe.Z)(kd,gt.LUMINANCE_ALPHA,"luminance alpha"),(0,Fe.Z)(kd,gt.RGB,"rgb"),(0,Fe.Z)(kd,gt.RGBA,"rgba"),(0,Fe.Z)(kd,gt.RGBA4,"rgba4"),(0,Fe.Z)(kd,gt.RGB5_A1,"rgb5 a1"),(0,Fe.Z)(kd,gt.RGB565,"rgb565"),(0,Fe.Z)(kd,gt.DEPTH_COMPONENT,"depth"),(0,Fe.Z)(kd,gt.DEPTH_STENCIL,"depth stencil"),kd),hz=(NS={},(0,Fe.Z)(NS,gt.DONT_CARE,"dont care"),(0,Fe.Z)(NS,gt.NICEST,"nice"),(0,Fe.Z)(NS,gt.FASTEST,"fast"),NS),R6=(w0={},(0,Fe.Z)(w0,gt.NEAREST,"nearest"),(0,Fe.Z)(w0,gt.LINEAR,"linear"),(0,Fe.Z)(w0,gt.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,Fe.Z)(w0,gt.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,Fe.Z)(w0,gt.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,Fe.Z)(w0,gt.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),w0),I6=(zS={},(0,Fe.Z)(zS,gt.REPEAT,"repeat"),(0,Fe.Z)(zS,gt.CLAMP_TO_EDGE,"clamp"),(0,Fe.Z)(zS,gt.MIRRORED_REPEAT,"mirror"),zS),pz=(C3={},(0,Fe.Z)(C3,gt.NONE,"none"),(0,Fe.Z)(C3,gt.BROWSER_DEFAULT_WEBGL,"browser"),C3),dz=(ig={},(0,Fe.Z)(ig,gt.NEVER,"never"),(0,Fe.Z)(ig,gt.ALWAYS,"always"),(0,Fe.Z)(ig,gt.LESS,"less"),(0,Fe.Z)(ig,gt.LEQUAL,"lequal"),(0,Fe.Z)(ig,gt.GREATER,"greater"),(0,Fe.Z)(ig,gt.GEQUAL,"gequal"),(0,Fe.Z)(ig,gt.EQUAL,"equal"),(0,Fe.Z)(ig,gt.NOTEQUAL,"notequal"),ig),P6=(r_={},(0,Fe.Z)(r_,gt.FUNC_ADD,"add"),(0,Fe.Z)(r_,gt.MIN_EXT,"min"),(0,Fe.Z)(r_,gt.MAX_EXT,"max"),(0,Fe.Z)(r_,gt.FUNC_SUBTRACT,"subtract"),(0,Fe.Z)(r_,gt.FUNC_REVERSE_SUBTRACT,"reverse subtract"),r_),T3=(Cf={},(0,Fe.Z)(Cf,gt.ZERO,"zero"),(0,Fe.Z)(Cf,gt.ONE,"one"),(0,Fe.Z)(Cf,gt.SRC_COLOR,"src color"),(0,Fe.Z)(Cf,gt.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,Fe.Z)(Cf,gt.SRC_ALPHA,"src alpha"),(0,Fe.Z)(Cf,gt.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,Fe.Z)(Cf,gt.DST_COLOR,"dst color"),(0,Fe.Z)(Cf,gt.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,Fe.Z)(Cf,gt.DST_ALPHA,"dst alpha"),(0,Fe.Z)(Cf,gt.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,Fe.Z)(Cf,gt.CONSTANT_COLOR,"constant color"),(0,Fe.Z)(Cf,gt.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,Fe.Z)(Cf,gt.CONSTANT_ALPHA,"constant alpha"),(0,Fe.Z)(Cf,gt.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,Fe.Z)(Cf,gt.SRC_ALPHA_SATURATE,"src alpha saturate"),Cf),vz=(ag={},(0,Fe.Z)(ag,gt.NEVER,"never"),(0,Fe.Z)(ag,gt.ALWAYS,"always"),(0,Fe.Z)(ag,gt.LESS,"less"),(0,Fe.Z)(ag,gt.LEQUAL,"lequal"),(0,Fe.Z)(ag,gt.GREATER,"greater"),(0,Fe.Z)(ag,gt.GEQUAL,"gequal"),(0,Fe.Z)(ag,gt.EQUAL,"equal"),(0,Fe.Z)(ag,gt.NOTEQUAL,"notequal"),ag),lx=(og={},(0,Fe.Z)(og,gt.ZERO,"zero"),(0,Fe.Z)(og,gt.KEEP,"keep"),(0,Fe.Z)(og,gt.REPLACE,"replace"),(0,Fe.Z)(og,gt.INVERT,"invert"),(0,Fe.Z)(og,gt.INCR,"increment"),(0,Fe.Z)(og,gt.DECR,"decrement"),(0,Fe.Z)(og,gt.INCR_WRAP,"increment wrap"),(0,Fe.Z)(og,gt.DECR_WRAP,"decrement wrap"),og),gz=(A3={},(0,Fe.Z)(A3,gt.FRONT,"front"),(0,Fe.Z)(A3,gt.BACK,"back"),A3),mz=function(){function e(a,r){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"isDestroyed",!1);var o=r.data,u=r.usage,c=r.type;this.buffer=a.buffer({data:o,usage:M6[u||gt.STATIC_DRAW],type:C5[c||gt.UNSIGNED_BYTE]})}return(0,at.Z)(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}},{key:"subData",value:function(r){var o=r.data,u=r.offset;this.buffer.subdata(o,u)}}]),e}(),yz=function(){function e(a,r){(0,Rt.Z)(this,e);var o=r.data,u=r.usage,c=r.type,p=r.count;this.elements=a.elements({data:o,usage:M6[u||gt.STATIC_DRAW],type:C5[c||gt.UNSIGNED_BYTE],count:p})}return(0,at.Z)(e,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(r){var o=r.data;this.elements.subdata(o)}},{key:"destroy",value:function(){}}]),e}(),_z=function(){function e(a,r){(0,Rt.Z)(this,e);var o=r.width,u=r.height,c=r.color,p=r.colors,g={width:o,height:u};Array.isArray(p)&&(g.colors=p.map(function(y){return y.get()})),c&&typeof c!="boolean"&&(g.color=c.get()),this.framebuffer=a.framebuffer(g)}return(0,at.Z)(e,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(r){var o=r.width,u=r.height;this.framebuffer.resize(o,u)}}]),e}(),xz={}.toString,bz=function(e,a){return xz.call(e)==="[object "+a+"]"},Sz=bz,Ez=function(e){return Sz(e,"Number")},cx=Ez,wz=function(e){return e==null},fx=wz,Cz=function(e,a,r){return e<a?a:e>r?r:e},Az=Cz,Tz=F(90857),O6=Tz,xr;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",e[e.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.CULL_FACE=2884]="CULL_FACE",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.BLEND=3042]="BLEND",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.DITHER=3024]="DITHER",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DOUBLE=5130]="DOUBLE",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.ALWAYS=519]="ALWAYS",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.GEQUAL=518]="GEQUAL",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",e[e.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.READ_BUFFER=3074]="READ_BUFFER",e[e.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",e[e.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",e[e.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",e[e.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",e[e.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",e[e.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",e[e.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",e[e.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",e[e.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",e[e.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",e[e.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",e[e.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",e[e.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",e[e.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",e[e.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",e[e.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",e[e.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",e[e.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",e[e.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",e[e.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",e[e.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",e[e.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",e[e.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",e[e.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",e[e.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",e[e.RED=6403]="RED",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB10_A2=32857]="RGB10_A2",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",e[e.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",e[e.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",e[e.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",e[e.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",e[e.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",e[e.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",e[e.SRGB=35904]="SRGB",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",e[e.RGBA32F=34836]="RGBA32F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.RGB16F=34843]="RGB16F",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R16F=33325]="R16F",e[e.R32F=33326]="R32F",e[e.RG16F=33327]="RG16F",e[e.RG32F=33328]="RG32F",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2UI=36975]="RGB10_A2UI",e[e.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",e[e.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.RG=33319]="RG",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",e[e.CURRENT_QUERY=34917]="CURRENT_QUERY",e[e.QUERY_RESULT=34918]="QUERY_RESULT",e[e.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",e[e.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",e[e.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",e[e.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",e[e.DRAW_BUFFER0=34853]="DRAW_BUFFER0",e[e.DRAW_BUFFER1=34854]="DRAW_BUFFER1",e[e.DRAW_BUFFER2=34855]="DRAW_BUFFER2",e[e.DRAW_BUFFER3=34856]="DRAW_BUFFER3",e[e.DRAW_BUFFER4=34857]="DRAW_BUFFER4",e[e.DRAW_BUFFER5=34858]="DRAW_BUFFER5",e[e.DRAW_BUFFER6=34859]="DRAW_BUFFER6",e[e.DRAW_BUFFER7=34860]="DRAW_BUFFER7",e[e.DRAW_BUFFER8=34861]="DRAW_BUFFER8",e[e.DRAW_BUFFER9=34862]="DRAW_BUFFER9",e[e.DRAW_BUFFER10=34863]="DRAW_BUFFER10",e[e.DRAW_BUFFER11=34864]="DRAW_BUFFER11",e[e.DRAW_BUFFER12=34865]="DRAW_BUFFER12",e[e.DRAW_BUFFER13=34866]="DRAW_BUFFER13",e[e.DRAW_BUFFER14=34867]="DRAW_BUFFER14",e[e.DRAW_BUFFER15=34868]="DRAW_BUFFER15",e[e.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",e[e.MAX_SAMPLES=36183]="MAX_SAMPLES",e[e.SAMPLER_BINDING=35097]="SAMPLER_BINDING",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",e[e.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",e[e.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",e[e.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",e[e.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",e[e.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",e[e.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",e[e.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",e[e.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",e[e.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",e[e.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",e[e.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",e[e.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",e[e.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",e[e.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",e[e.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",e[e.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",e[e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",e[e.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",e[e.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",e[e.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",e[e.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",e[e.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",e[e.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",e[e.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",e[e.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",e[e.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",e[e.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",e[e.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",e[e.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",e[e.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",e[e.UNIFORM_TYPE=35383]="UNIFORM_TYPE",e[e.UNIFORM_SIZE=35384]="UNIFORM_SIZE",e[e.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",e[e.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",e[e.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",e[e.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",e[e.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",e[e.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",e[e.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",e[e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",e[e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS",e[e.SYNC_FENCE=37142]="SYNC_FENCE",e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED",e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED",e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",e[e.COLOR=6144]="COLOR",e[e.DEPTH=6145]="DEPTH",e[e.STENCIL=6146]="STENCIL",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STREAM_COPY=35042]="STREAM_COPY",e[e.STATIC_READ=35045]="STATIC_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",e[e.INVALID_INDEX=4294967295]="INVALID_INDEX",e[e.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",e[e.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",e[e.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",e[e.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",e[e.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",e[e.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",e[e.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.UNSIGNED_INT_24_8_WEBGL=34042]="UNSIGNED_INT_24_8_WEBGL",e[e.HALF_FLOAT_OES=36193]="HALF_FLOAT_OES",e[e.RGBA32F_EXT=34836]="RGBA32F_EXT",e[e.RGB32F_EXT=34837]="RGB32F_EXT",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",e[e.UNSIGNED_NORMALIZED_EXT=35863]="UNSIGNED_NORMALIZED_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.SRGB_EXT=35904]="SRGB_EXT",e[e.SRGB_ALPHA_EXT=35906]="SRGB_ALPHA_EXT",e[e.SRGB8_ALPHA8_EXT=35907]="SRGB8_ALPHA8_EXT",e[e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",e[e.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT_OES",e[e.COLOR_ATTACHMENT0_WEBGL=36064]="COLOR_ATTACHMENT0_WEBGL",e[e.COLOR_ATTACHMENT1_WEBGL=36065]="COLOR_ATTACHMENT1_WEBGL",e[e.COLOR_ATTACHMENT2_WEBGL=36066]="COLOR_ATTACHMENT2_WEBGL",e[e.COLOR_ATTACHMENT3_WEBGL=36067]="COLOR_ATTACHMENT3_WEBGL",e[e.COLOR_ATTACHMENT4_WEBGL=36068]="COLOR_ATTACHMENT4_WEBGL",e[e.COLOR_ATTACHMENT5_WEBGL=36069]="COLOR_ATTACHMENT5_WEBGL",e[e.COLOR_ATTACHMENT6_WEBGL=36070]="COLOR_ATTACHMENT6_WEBGL",e[e.COLOR_ATTACHMENT7_WEBGL=36071]="COLOR_ATTACHMENT7_WEBGL",e[e.COLOR_ATTACHMENT8_WEBGL=36072]="COLOR_ATTACHMENT8_WEBGL",e[e.COLOR_ATTACHMENT9_WEBGL=36073]="COLOR_ATTACHMENT9_WEBGL",e[e.COLOR_ATTACHMENT10_WEBGL=36074]="COLOR_ATTACHMENT10_WEBGL",e[e.COLOR_ATTACHMENT11_WEBGL=36075]="COLOR_ATTACHMENT11_WEBGL",e[e.COLOR_ATTACHMENT12_WEBGL=36076]="COLOR_ATTACHMENT12_WEBGL",e[e.COLOR_ATTACHMENT13_WEBGL=36077]="COLOR_ATTACHMENT13_WEBGL",e[e.COLOR_ATTACHMENT14_WEBGL=36078]="COLOR_ATTACHMENT14_WEBGL",e[e.COLOR_ATTACHMENT15_WEBGL=36079]="COLOR_ATTACHMENT15_WEBGL",e[e.DRAW_BUFFER0_WEBGL=34853]="DRAW_BUFFER0_WEBGL",e[e.DRAW_BUFFER1_WEBGL=34854]="DRAW_BUFFER1_WEBGL",e[e.DRAW_BUFFER2_WEBGL=34855]="DRAW_BUFFER2_WEBGL",e[e.DRAW_BUFFER3_WEBGL=34856]="DRAW_BUFFER3_WEBGL",e[e.DRAW_BUFFER4_WEBGL=34857]="DRAW_BUFFER4_WEBGL",e[e.DRAW_BUFFER5_WEBGL=34858]="DRAW_BUFFER5_WEBGL",e[e.DRAW_BUFFER6_WEBGL=34859]="DRAW_BUFFER6_WEBGL",e[e.DRAW_BUFFER7_WEBGL=34860]="DRAW_BUFFER7_WEBGL",e[e.DRAW_BUFFER8_WEBGL=34861]="DRAW_BUFFER8_WEBGL",e[e.DRAW_BUFFER9_WEBGL=34862]="DRAW_BUFFER9_WEBGL",e[e.DRAW_BUFFER10_WEBGL=34863]="DRAW_BUFFER10_WEBGL",e[e.DRAW_BUFFER11_WEBGL=34864]="DRAW_BUFFER11_WEBGL",e[e.DRAW_BUFFER12_WEBGL=34865]="DRAW_BUFFER12_WEBGL",e[e.DRAW_BUFFER13_WEBGL=34866]="DRAW_BUFFER13_WEBGL",e[e.DRAW_BUFFER14_WEBGL=34867]="DRAW_BUFFER14_WEBGL",e[e.DRAW_BUFFER15_WEBGL=34868]="DRAW_BUFFER15_WEBGL",e[e.MAX_COLOR_ATTACHMENTS_WEBGL=36063]="MAX_COLOR_ATTACHMENTS_WEBGL",e[e.MAX_DRAW_BUFFERS_WEBGL=34852]="MAX_DRAW_BUFFERS_WEBGL",e[e.VERTEX_ARRAY_BINDING_OES=34229]="VERTEX_ARRAY_BINDING_OES",e[e.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",e[e.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",e[e.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",e[e.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",e[e.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",e[e.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",e[e.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT"})(xr||(xr={}));var cs;(function(e){e[e.Buffer=0]="Buffer",e[e.Texture=1]="Texture",e[e.RenderTarget=2]="RenderTarget",e[e.Sampler=3]="Sampler",e[e.Program=4]="Program",e[e.Bindings=5]="Bindings",e[e.InputLayout=6]="InputLayout",e[e.RenderPipeline=7]="RenderPipeline",e[e.ComputePipeline=8]="ComputePipeline",e[e.Readback=9]="Readback",e[e.QueryPool=10]="QueryPool"})(cs||(cs={}));var as;(function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"})(as||(as={}));var US;(function(e){e[e.CCW=2305]="CCW",e[e.CW=2304]="CW"})(US||(US={}));var sp;(function(e){e[e.NONE=0]="NONE",e[e.FRONT=1]="FRONT",e[e.BACK=2]="BACK",e[e.FRONT_AND_BACK=3]="FRONT_AND_BACK"})(sp||(sp={}));var Yo;(function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC=768]="SRC",e[e.ONE_MINUS_SRC=769]="ONE_MINUS_SRC",e[e.DST=774]="DST",e[e.ONE_MINUS_DST=775]="ONE_MINUS_DST",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.CONST=32769]="CONST",e[e.ONE_MINUS_CONSTANT=32770]="ONE_MINUS_CONSTANT",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE"})(Yo||(Yo={}));var Af;(function(e){e[e.ADD=32774]="ADD",e[e.SUBSTRACT=32778]="SUBSTRACT",e[e.REVERSE_SUBSTRACT=32779]="REVERSE_SUBSTRACT",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX"})(Af||(Af={}));var Ah;(function(e){e[e.CLAMP_TO_EDGE=0]="CLAMP_TO_EDGE",e[e.REPEAT=1]="REPEAT",e[e.MIRRORED_REPEAT=2]="MIRRORED_REPEAT"})(Ah||(Ah={}));var $l;(function(e){e[e.POINT=0]="POINT",e[e.BILINEAR=1]="BILINEAR"})($l||($l={}));var xc;(function(e){e[e.NO_MIP=0]="NO_MIP",e[e.NEAREST=1]="NEAREST",e[e.LINEAR=2]="LINEAR"})(xc||(xc={}));var Yl;(function(e){e[e.POINTS=0]="POINTS",e[e.TRIANGLES=1]="TRIANGLES",e[e.TRIANGLE_STRIP=2]="TRIANGLE_STRIP",e[e.LINES=3]="LINES",e[e.LINE_STRIP=4]="LINE_STRIP"})(Yl||(Yl={}));var ou;(function(e){e[e.MAP_READ=1]="MAP_READ",e[e.MAP_WRITE=2]="MAP_WRITE",e[e.COPY_SRC=4]="COPY_SRC",e[e.COPY_DST=8]="COPY_DST",e[e.INDEX=16]="INDEX",e[e.VERTEX=32]="VERTEX",e[e.UNIFORM=64]="UNIFORM",e[e.STORAGE=128]="STORAGE",e[e.INDIRECT=256]="INDIRECT",e[e.QUERY_RESOLVE=512]="QUERY_RESOLVE"})(ou||(ou={}));var dv;(function(e){e[e.STATIC=1]="STATIC",e[e.DYNAMIC=2]="DYNAMIC"})(dv||(dv={}));var n_;(function(e){e[e.VERTEX=1]="VERTEX",e[e.INSTANCE=2]="INSTANCE"})(n_||(n_={}));var k6;(function(e){e.LOADED="loaded"})(k6||(k6={}));var Mo;(function(e){e[e.TEXTURE_2D=0]="TEXTURE_2D",e[e.TEXTURE_2D_ARRAY=1]="TEXTURE_2D_ARRAY",e[e.TEXTURE_3D=2]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP=3]="TEXTURE_CUBE_MAP"})(Mo||(Mo={}));var Yp;(function(e){e[e.SAMPLED=1]="SAMPLED",e[e.RENDER_TARGET=2]="RENDER_TARGET"})(Yp||(Yp={}));var Tf;(function(e){e[e.NONE=0]="NONE",e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA",e[e.RGB=7]="RGB",e[e.ALL=15]="ALL"})(Tf||(Tf={}));var Qf;(function(e){e[e.KEEP=7680]="KEEP",e[e.ZERO=0]="ZERO",e[e.REPLACE=7681]="REPLACE",e[e.INVERT=5386]="INVERT",e[e.INCREMENT_CLAMP=7682]="INCREMENT_CLAMP",e[e.DECREMENT_CLAMP=7683]="DECREMENT_CLAMP",e[e.INCREMENT_WRAP=34055]="INCREMENT_WRAP",e[e.DECREMENT_WRAP=34056]="DECREMENT_WRAP"})(Qf||(Qf={}));function Cj(e,a,r,o){var u=Mo.TEXTURE_2D,c=1,p=Yp.SAMPLED;return{dimension:u,format:e,width:a,height:r,depthOrArrayLayers:c,mipLevelCount:o,usage:p}}var ol;(function(e){e[e.Float=0]="Float",e[e.Uint=1]="Uint",e[e.Sint=2]="Sint",e[e.Depth=3]="Depth"})(ol||(ol={}));var hx;(function(e){e[e.LOWER_LEFT=0]="LOWER_LEFT",e[e.UPPER_LEFT=1]="UPPER_LEFT"})(hx||(hx={}));var px;(function(e){e[e.NEGATIVE_ONE=0]="NEGATIVE_ONE",e[e.ZERO=1]="ZERO"})(px||(px={}));var M3;(function(e){e[e.OcclusionConservative=0]="OcclusionConservative"})(M3||(M3={}));var jn;(function(e){e[e.U8=1]="U8",e[e.U16=2]="U16",e[e.U32=3]="U32",e[e.S8=4]="S8",e[e.S16=5]="S16",e[e.S32=6]="S32",e[e.F16=7]="F16",e[e.F32=8]="F32",e[e.BC1=65]="BC1",e[e.BC2=66]="BC2",e[e.BC3=67]="BC3",e[e.BC4_UNORM=68]="BC4_UNORM",e[e.BC4_SNORM=69]="BC4_SNORM",e[e.BC5_UNORM=70]="BC5_UNORM",e[e.BC5_SNORM=71]="BC5_SNORM",e[e.U16_PACKED_5551=97]="U16_PACKED_5551",e[e.U16_PACKED_565=98]="U16_PACKED_565",e[e.D24=129]="D24",e[e.D32F=130]="D32F",e[e.D24S8=131]="D24S8",e[e.D32FS8=132]="D32FS8"})(jn||(jn={}));var va;(function(e){e[e.R=1]="R",e[e.RG=2]="RG",e[e.RGB=3]="RGB",e[e.RGBA=4]="RGBA",e[e.A=5]="A"})(va||(va={}));function Aj(e){return e}var Xi;(function(e){e[e.None=0]="None",e[e.Normalized=1]="Normalized",e[e.sRGB=2]="sRGB",e[e.Depth=4]="Depth",e[e.Stencil=8]="Stencil",e[e.RenderTarget=16]="RenderTarget"})(Xi||(Xi={}));function Wa(e,a,r){return e<<16|a<<8|r}var Xr;(function(e){e[e.ALPHA=Wa(jn.U8,va.A,Xi.None)]="ALPHA",e[e.U8_LUMINANCE=Wa(jn.U8,va.A,Xi.None)]="U8_LUMINANCE",e[e.F16_LUMINANCE=Wa(jn.F16,va.A,Xi.None)]="F16_LUMINANCE",e[e.F32_LUMINANCE=Wa(jn.F32,va.A,Xi.None)]="F32_LUMINANCE",e[e.F16_R=Wa(jn.F16,va.R,Xi.None)]="F16_R",e[e.F16_RG=Wa(jn.F16,va.RG,Xi.None)]="F16_RG",e[e.F16_RGB=Wa(jn.F16,va.RGB,Xi.None)]="F16_RGB",e[e.F16_RGBA=Wa(jn.F16,va.RGBA,Xi.None)]="F16_RGBA",e[e.F32_R=Wa(jn.F32,va.R,Xi.None)]="F32_R",e[e.F32_RG=Wa(jn.F32,va.RG,Xi.None)]="F32_RG",e[e.F32_RGB=Wa(jn.F32,va.RGB,Xi.None)]="F32_RGB",e[e.F32_RGBA=Wa(jn.F32,va.RGBA,Xi.None)]="F32_RGBA",e[e.U8_R=Wa(jn.U8,va.R,Xi.None)]="U8_R",e[e.U8_R_NORM=Wa(jn.U8,va.R,Xi.Normalized)]="U8_R_NORM",e[e.U8_RG=Wa(jn.U8,va.RG,Xi.None)]="U8_RG",e[e.U8_RG_NORM=Wa(jn.U8,va.RG,Xi.Normalized)]="U8_RG_NORM",e[e.U8_RGB=Wa(jn.U8,va.RGB,Xi.None)]="U8_RGB",e[e.U8_RGB_NORM=Wa(jn.U8,va.RGB,Xi.Normalized)]="U8_RGB_NORM",e[e.U8_RGB_SRGB=Wa(jn.U8,va.RGB,Xi.sRGB|Xi.Normalized)]="U8_RGB_SRGB",e[e.U8_RGBA=Wa(jn.U8,va.RGBA,Xi.None)]="U8_RGBA",e[e.U8_RGBA_NORM=Wa(jn.U8,va.RGBA,Xi.Normalized)]="U8_RGBA_NORM",e[e.U8_RGBA_SRGB=Wa(jn.U8,va.RGBA,Xi.sRGB|Xi.Normalized)]="U8_RGBA_SRGB",e[e.U16_R=Wa(jn.U16,va.R,Xi.None)]="U16_R",e[e.U16_R_NORM=Wa(jn.U16,va.R,Xi.Normalized)]="U16_R_NORM",e[e.U16_RG_NORM=Wa(jn.U16,va.RG,Xi.Normalized)]="U16_RG_NORM",e[e.U16_RGBA_NORM=Wa(jn.U16,va.RGBA,Xi.Normalized)]="U16_RGBA_NORM",e[e.U16_RGB=Wa(jn.U16,va.RGB,Xi.None)]="U16_RGB",e[e.U32_R=Wa(jn.U32,va.R,Xi.None)]="U32_R",e[e.U32_RG=Wa(jn.U32,va.RG,Xi.None)]="U32_RG",e[e.S8_R=Wa(jn.S8,va.R,Xi.None)]="S8_R",e[e.S8_R_NORM=Wa(jn.S8,va.R,Xi.Normalized)]="S8_R_NORM",e[e.S8_RG_NORM=Wa(jn.S8,va.RG,Xi.Normalized)]="S8_RG_NORM",e[e.S8_RGB_NORM=Wa(jn.S8,va.RGB,Xi.Normalized)]="S8_RGB_NORM",e[e.S8_RGBA_NORM=Wa(jn.S8,va.RGBA,Xi.Normalized)]="S8_RGBA_NORM",e[e.S16_R=Wa(jn.S16,va.R,Xi.None)]="S16_R",e[e.S16_RG=Wa(jn.S16,va.RG,Xi.None)]="S16_RG",e[e.S16_RG_NORM=Wa(jn.S16,va.RG,Xi.Normalized)]="S16_RG_NORM",e[e.S16_RGB_NORM=Wa(jn.S16,va.RGB,Xi.Normalized)]="S16_RGB_NORM",e[e.S16_RGBA=Wa(jn.S16,va.RGBA,Xi.None)]="S16_RGBA",e[e.S16_RGBA_NORM=Wa(jn.S16,va.RGBA,Xi.Normalized)]="S16_RGBA_NORM",e[e.S32_R=Wa(jn.S32,va.R,Xi.None)]="S32_R",e[e.U16_RGBA_5551=Wa(jn.U16_PACKED_5551,va.RGBA,Xi.Normalized)]="U16_RGBA_5551",e[e.U16_RGB_565=Wa(jn.U16_PACKED_565,va.RGB,Xi.Normalized)]="U16_RGB_565",e[e.BC1=Wa(jn.BC1,va.RGBA,Xi.Normalized)]="BC1",e[e.BC1_SRGB=Wa(jn.BC1,va.RGBA,Xi.Normalized|Xi.sRGB)]="BC1_SRGB",e[e.BC2=Wa(jn.BC2,va.RGBA,Xi.Normalized)]="BC2",e[e.BC2_SRGB=Wa(jn.BC2,va.RGBA,Xi.Normalized|Xi.sRGB)]="BC2_SRGB",e[e.BC3=Wa(jn.BC3,va.RGBA,Xi.Normalized)]="BC3",e[e.BC3_SRGB=Wa(jn.BC3,va.RGBA,Xi.Normalized|Xi.sRGB)]="BC3_SRGB",e[e.BC4_UNORM=Wa(jn.BC4_UNORM,va.R,Xi.Normalized)]="BC4_UNORM",e[e.BC4_SNORM=Wa(jn.BC4_SNORM,va.R,Xi.Normalized)]="BC4_SNORM",e[e.BC5_UNORM=Wa(jn.BC5_UNORM,va.RG,Xi.Normalized)]="BC5_UNORM",e[e.BC5_SNORM=Wa(jn.BC5_SNORM,va.RG,Xi.Normalized)]="BC5_SNORM",e[e.D24=Wa(jn.D24,va.R,Xi.Depth)]="D24",e[e.D24_S8=Wa(jn.D24S8,va.RG,Xi.Depth|Xi.Stencil)]="D24_S8",e[e.D32F=Wa(jn.D32F,va.R,Xi.Depth)]="D32F",e[e.D32F_S8=Wa(jn.D32FS8,va.RG,Xi.Depth|Xi.Stencil)]="D32F_S8",e[e.U8_RGB_RT=Wa(jn.U8,va.RGB,Xi.RenderTarget|Xi.Normalized)]="U8_RGB_RT",e[e.U8_RGBA_RT=Wa(jn.U8,va.RGBA,Xi.RenderTarget|Xi.Normalized)]="U8_RGBA_RT",e[e.U8_RGBA_RT_SRGB=Wa(jn.U8,va.RGBA,Xi.RenderTarget|Xi.Normalized|Xi.sRGB)]="U8_RGBA_RT_SRGB"})(Xr||(Xr={}));function R3(e){return e>>>8&255}function sg(e){return e>>>16&255}function dx(e){return e&255}function F6(e){switch(e){case jn.F32:case jn.U32:case jn.S32:return 4;case jn.U16:case jn.S16:case jn.F16:return 2;case jn.U8:case jn.S8:return 1;default:throw new Error("whoops")}}function D6(e){return F6(sg(e))}function Tj(e){return R3(e)}function Mz(e){var a=F6(sg(e)),r=R3(e);return a*r}function Mj(e,a){return e&4294967040|a}function Rj(e,a){return e&4294902015|a<<8}function L6(e){var a=dx(e);if(a&Xi.Depth)return ol.Depth;if(a&Xi.Normalized)return ol.Float;var r=sg(e);if(r===jn.F16||r===jn.F32)return ol.Float;if(r===jn.U8||r===jn.U16||r===jn.U32)return ol.Uint;if(r===jn.S8||r===jn.S16||r===jn.S32)return ol.Sint;throw new Error("whoops")}function _o(e,a){if(a===void 0&&(a=""),!e)throw new Error("Assert fail: ".concat(a))}function i_(e){if(e!=null)return e;throw new Error("Missing object")}function B6(e,a){return e.r===a.r&&e.g===a.g&&e.b===a.b&&e.a===a.a}function N6(e,a){e.r=a.r,e.g=a.g,e.b=a.b,e.a=a.a}function z6(e){var a=e.r,r=e.g,o=e.b,u=e.a;return{r:a,g:r,b:o,a:u}}function I3(e,a,r,o){return o===void 0&&(o=1),{r:e,g:a,b:r,a:o}}var A5=I3(0,0,0,0),Ij=I3(0,0,0,1),Rz=I3(1,1,1,0),Pj=I3(1,1,1,1),vx=!0;function Oj(e,a){a===void 0&&(a=vx),a&&(e[10]=-e[10],e[14]=-e[14])}function kj(e,a){a===void 0&&(a=vx),a&&(e[10]=-e[10],e[14]=-e[14]+1)}function Iz(e,a){if(a===void 0&&(a=vx),a)switch(e){case as.LESS:return as.GREATER;case as.LEQUAL:return as.GEQUAL;case as.GEQUAL:return as.LEQUAL;case as.GREATER:return as.LESS;default:return e}else return e}function Fj(e,a){return a===void 0&&(a=vx),a?1-e:e}function Dj(e,a){return a===void 0&&(a=vx),a?-e:e}function Lj(e,a,r,o){if(o===void 0&&(o=vx),r=Iz(r,o),r===as.LESS)return e<a;if(r===as.LEQUAL)return e<=a;if(r===as.GREATER)return e>a;if(r===as.GEQUAL)return e>=a;throw new Error("whoops")}function P3(e){return!!(e&&!(e&e-1))}function gx(e,a){return e!=null?e:a}function Pz(e){return e===void 0?null:e}function Bj(e,a,r){e.length=a,e.fill(r)}function O3(e,a){var r=a-1;return e+r&~r}function Nj(e,a){return((e+a-1)/a|0)*a}function Oz(e,a,r){for(var o=0,u=e.length;o<u;){var c=o+(u-o>>>1),p=r(a,e[c]);p<0?u=c:o=c+1}return o}function zj(e,a,r){var o=Oz(e,a,r);e.splice(o,0,a)}function Uj(e,a,r){return r?e|=a:e&=~a,e}function kz(e,a){for(var r=new Array(e),o=0;o<e;o++)r[o]=a();return r}function Fz(e,a){a===void 0&&(a=1);var r=e.split(`
`);return r.map(function(o,u){return"".concat(Dz(""+(a+u),4," "),"  ").concat(o)}).join(`
`)}function Dz(e,a,r){for(r===void 0&&(r="0");e.length<a;)e="".concat(r).concat(e);return e}function Zj(e,a){for(var r=[],o=e;o<e+a;o++)r.push(o);return r}function U6(e,a){e.blendDstFactor=a.blendDstFactor,e.blendSrcFactor=a.blendSrcFactor,e.blendMode=a.blendMode}function k3(e,a){return e===void 0&&(e={}),e.compare=a.compare,e.depthFailOp=a.depthFailOp,e.passOp=a.passOp,e.failOp=a.failOp,e}function Z6(e,a){return e===void 0&&(e={rgbBlendState:{},alphaBlendState:{},channelWriteMask:0}),U6(e.rgbBlendState,a.rgbBlendState),U6(e.alphaBlendState,a.alphaBlendState),e.channelWriteMask=a.channelWriteMask,e}function T5(e,a){e.length!==a.length&&(e.length=a.length);for(var r=0;r<a.length;r++)e[r]=Z6(e[r],a[r])}function Lz(e,a){a.attachmentsState!==void 0&&T5(e.attachmentsState,a.attachmentsState),e.blendConstant&&a.blendConstant&&N6(e.blendConstant,a.blendConstant),e.depthCompare=gx(a.depthCompare,e.depthCompare),e.depthWrite=gx(a.depthWrite,e.depthWrite),e.stencilWrite=gx(a.stencilWrite,e.stencilWrite),e.stencilFront&&a.stencilFront&&k3(e.stencilFront,a.stencilFront),e.stencilBack&&a.stencilBack&&k3(e.stencilBack,a.stencilBack),e.cullMode=gx(a.cullMode,e.cullMode),e.frontFace=gx(a.frontFace,e.frontFace),e.polygonOffset=gx(a.polygonOffset,e.polygonOffset)}function mx(e){var a=Object.assign({},e);return a.attachmentsState=[],T5(a.attachmentsState,e.attachmentsState),a.blendConstant=a.blendConstant&&z6(a.blendConstant),a.stencilFront=k3(void 0,e.stencilFront),a.stencilBack=k3(void 0,e.stencilBack),a}function Bz(e,a){a.channelWriteMask!==void 0&&(e.channelWriteMask=a.channelWriteMask),a.rgbBlendMode!==void 0&&(e.rgbBlendState.blendMode=a.rgbBlendMode),a.alphaBlendMode!==void 0&&(e.alphaBlendState.blendMode=a.alphaBlendMode),a.rgbBlendSrcFactor!==void 0&&(e.rgbBlendState.blendSrcFactor=a.rgbBlendSrcFactor),a.alphaBlendSrcFactor!==void 0&&(e.alphaBlendState.blendSrcFactor=a.alphaBlendSrcFactor),a.rgbBlendDstFactor!==void 0&&(e.rgbBlendState.blendDstFactor=a.rgbBlendDstFactor),a.alphaBlendDstFactor!==void 0&&(e.alphaBlendState.blendDstFactor=a.alphaBlendDstFactor)}var V6={blendMode:Af.ADD,blendSrcFactor:Yo.ONE,blendDstFactor:Yo.ZERO},a_={attachmentsState:[{channelWriteMask:Tf.ALL,rgbBlendState:V6,alphaBlendState:V6}],blendConstant:z6(A5),depthWrite:!0,depthCompare:as.LEQUAL,stencilWrite:!1,stencilFront:{compare:as.ALWAYS,passOp:Qf.KEEP,depthFailOp:Qf.KEEP,failOp:Qf.KEEP},stencilBack:{compare:as.ALWAYS,passOp:Qf.KEEP,depthFailOp:Qf.KEEP,failOp:Qf.KEEP},cullMode:sp.NONE,frontFace:US.CCW,polygonOffset:!1};function Nz(e,a){e===void 0&&(e=null),a===void 0&&(a=a_);var r=mx(a);return e!==null&&Lz(r,e),r}var Vj=Nz({depthCompare:as.ALWAYS,depthWrite:!1},a_);function Hj(e,a){return e.attachmentsState===void 0&&(e.attachmentsState=[],T5(e.attachmentsState,a_.attachmentsState)),Bz(e.attachmentsState[0],a),e}var H6={texture:null,sampler:null,formatKind:ol.Float,dimension:Mo.TEXTURE_2D};function yx(e,a,r){if(e.length!==a.length)return!1;for(var o=0;o<e.length;o++)if(!r(e[o],a[o]))return!1;return!0}function F3(e,a){for(var r=Array(e.length),o=0;o<e.length;o++)r[o]=a(e[o]);return r}function zz(e,a){return e.buffer===a.buffer&&e.size===a.size&&e.binding===a.binding&&e.offset===a.offset}function Uz(e,a){return e===null?a===null:a===null?!1:e.sampler===a.sampler&&e.texture===a.texture&&e.dimension===a.dimension&&e.formatKind===a.formatKind&&e.comparison===a.comparison}function jj(e,a){return e.samplerBindings=e.samplerBindings||[],e.uniformBufferBindings=e.uniformBufferBindings||[],a.samplerBindings=a.samplerBindings||[],a.uniformBufferBindings=a.uniformBufferBindings||[],!(e.samplerBindings.length!==a.samplerBindings.length||!yx(e.samplerBindings,a.samplerBindings,Uz)||!yx(e.uniformBufferBindings,a.uniformBufferBindings,zz))}function j6(e,a){return e.blendMode==a.blendMode&&e.blendSrcFactor===a.blendSrcFactor&&e.blendDstFactor===a.blendDstFactor}function Zz(e,a){return!(!j6(e.rgbBlendState,a.rgbBlendState)||!j6(e.alphaBlendState,a.alphaBlendState)||e.channelWriteMask!==a.channelWriteMask)}function D3(e,a){return e.compare==a.compare&&e.depthFailOp===a.depthFailOp&&e.failOp===a.failOp&&e.passOp===a.passOp}function Vz(e,a){return!yx(e.attachmentsState,a.attachmentsState,Zz)||e.blendConstant&&a.blendConstant&&!B6(e.blendConstant,a.blendConstant)||e.stencilFront&&a.stencilFront&&!D3(e.stencilFront,a.stencilFront)||e.stencilBack&&a.stencilBack&&!D3(e.stencilBack,a.stencilBack)?!1:e.depthCompare===a.depthCompare&&e.depthWrite===a.depthWrite&&e.stencilWrite===a.stencilWrite&&e.cullMode===a.cullMode&&e.frontFace===a.frontFace&&e.polygonOffset===a.polygonOffset}function W6(e,a){return e.id===a.id}function Hz(e,a){return e===a}function Wj(e,a){return!(e.topology!==a.topology||e.inputLayout!==a.inputLayout||e.sampleCount!==a.sampleCount||e.megaStateDescriptor&&a.megaStateDescriptor&&!Vz(e.megaStateDescriptor,a.megaStateDescriptor)||!W6(e.program,a.program)||!yx(e.colorAttachmentFormats,a.colorAttachmentFormats,Hz)||e.depthStencilAttachmentFormat!==a.depthStencilAttachmentFormat)}function jz(e,a){return e.offset===a.offset&&e.shaderLocation===a.shaderLocation&&e.format===a.format&&e.divisor===a.divisor}function Wz(e,a){return isNil(e)?isNil(a):isNil(a)?!1:e.arrayStride===a.arrayStride&&e.stepMode===a.stepMode&&yx(e.attributes,a.attributes,jz)}function Gj(e,a){return!(e.indexBufferFormat!==a.indexBufferFormat||!yx(e.vertexBufferDescriptors,a.vertexBufferDescriptors,Wz)||!W6(e.program,a.program))}function Xj(e,a){return e.addressModeU===a.addressModeU&&e.addressModeV===a.addressModeV&&e.minFilter===a.minFilter&&e.magFilter===a.magFilter&&e.mipmapFilter===a.mipmapFilter&&e.lodMinClamp===a.lodMinClamp&&e.lodMaxClamp===a.lodMaxClamp&&e.maxAnisotropy===a.maxAnisotropy&&e.compareFunction===a.compareFunction}function Gz(e){var a=e.sampler,r=e.texture,o=e.dimension,u=e.formatKind,c=e.comparison;return{sampler:a,texture:r,dimension:o,formatKind:u,comparison:c}}function Xz(e){var a=e.buffer,r=e.size,o=e.binding,u=e.offset;return{binding:o,buffer:a,offset:u,size:r}}function $j(e){var a=e.samplerBindings&&F3(e.samplerBindings,Gz),r=e.uniformBufferBindings&&F3(e.uniformBufferBindings,Xz);return{samplerBindings:a,uniformBufferBindings:r,pipeline:e.pipeline}}function Yj(e){var a=e.inputLayout,r=e.program,o=e.topology,u=e.megaStateDescriptor&&mx(e.megaStateDescriptor),c=e.colorAttachmentFormats.slice(),p=e.depthStencilAttachmentFormat,g=e.sampleCount;return{inputLayout:a,megaStateDescriptor:u,program:r,topology:o,colorAttachmentFormats:c,depthStencilAttachmentFormat:p,sampleCount:g}}function $z(e){var a=e.shaderLocation,r=e.format,o=e.offset,u=e.divisor;return{shaderLocation:a,format:r,offset:o,divisor:u}}function Yz(e){if(isNil(e))return e;var a=e.arrayStride,r=e.stepMode,o=F3(e.attributes,$z);return{arrayStride:a,stepMode:r,attributes:o}}function Kj(e){var a=F3(e.vertexBufferDescriptors,Yz),r=e.indexBufferFormat,o=e.program;return{vertexBufferDescriptors:a,indexBufferFormat:r,program:o}}var jo,Kz=/([^[]*)(\[[0-9]+\])?/;function qz(e){if(e[e.length-1]!=="]")return{name:e,length:1,isArray:!1};var a=e.match(Kz);if(!a||a.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:a[1],length:Number(a[2])||1,isArray:!!a[2]}}function Th(){var e=null;return function(a,r,o){var u=e!==o;return u&&(a.uniform1i(r,o),e=o),u}}function sl(e,a,r,o){var u=null,c=null;return function(p,g,y){var S=a(y,r),O=S.length,D=!1;if(u===null)u=new Float32Array(O),c=O,D=!0;else{_o(c===O,"Uniform length cannot change.");for(var V=0;V<O;++V)if(S[V]!==u[V]){D=!0;break}}return D&&(o(p,e,g,S),u.set(S)),D}}function Jf(e,a,r,o){e[a](r,o)}function um(e,a,r,o){e[a](r,!1,o)}var Qz={},Jz={},eU={},G6=[0];function M5(e,a,r,o){a===1&&typeof e=="boolean"&&(e=e?1:0),Number.isFinite(e)&&(G6[0]=e,e=G6);var u=e.length;if(e instanceof r)return e;var c=o[u];c||(c=new r(u),o[u]=c);for(var p=0;p<u;p++)c[p]=e[p];return c}function Kp(e,a){return M5(e,a,Float32Array,Qz)}function C0(e,a){return M5(e,a,Int32Array,Jz)}function L3(e,a){return M5(e,a,Uint32Array,eU)}var tU=(jo={},jo[xr.FLOAT]=sl.bind(null,"uniform1fv",Kp,1,Jf),jo[xr.FLOAT_VEC2]=sl.bind(null,"uniform2fv",Kp,2,Jf),jo[xr.FLOAT_VEC3]=sl.bind(null,"uniform3fv",Kp,3,Jf),jo[xr.FLOAT_VEC4]=sl.bind(null,"uniform4fv",Kp,4,Jf),jo[xr.INT]=sl.bind(null,"uniform1iv",C0,1,Jf),jo[xr.INT_VEC2]=sl.bind(null,"uniform2iv",C0,2,Jf),jo[xr.INT_VEC3]=sl.bind(null,"uniform3iv",C0,3,Jf),jo[xr.INT_VEC4]=sl.bind(null,"uniform4iv",C0,4,Jf),jo[xr.BOOL]=sl.bind(null,"uniform1iv",C0,1,Jf),jo[xr.BOOL_VEC2]=sl.bind(null,"uniform2iv",C0,2,Jf),jo[xr.BOOL_VEC3]=sl.bind(null,"uniform3iv",C0,3,Jf),jo[xr.BOOL_VEC4]=sl.bind(null,"uniform4iv",C0,4,Jf),jo[xr.FLOAT_MAT2]=sl.bind(null,"uniformMatrix2fv",Kp,4,um),jo[xr.FLOAT_MAT3]=sl.bind(null,"uniformMatrix3fv",Kp,9,um),jo[xr.FLOAT_MAT4]=sl.bind(null,"uniformMatrix4fv",Kp,16,um),jo[xr.UNSIGNED_INT]=sl.bind(null,"uniform1uiv",L3,1,Jf),jo[xr.UNSIGNED_INT_VEC2]=sl.bind(null,"uniform2uiv",L3,2,Jf),jo[xr.UNSIGNED_INT_VEC3]=sl.bind(null,"uniform3uiv",L3,3,Jf),jo[xr.UNSIGNED_INT_VEC4]=sl.bind(null,"uniform4uiv",L3,4,Jf),jo[xr.FLOAT_MAT2x3]=sl.bind(null,"uniformMatrix2x3fv",Kp,6,um),jo[xr.FLOAT_MAT2x4]=sl.bind(null,"uniformMatrix2x4fv",Kp,8,um),jo[xr.FLOAT_MAT3x2]=sl.bind(null,"uniformMatrix3x2fv",Kp,6,um),jo[xr.FLOAT_MAT3x4]=sl.bind(null,"uniformMatrix3x4fv",Kp,12,um),jo[xr.FLOAT_MAT4x2]=sl.bind(null,"uniformMatrix4x2fv",Kp,8,um),jo[xr.FLOAT_MAT4x3]=sl.bind(null,"uniformMatrix4x3fv",Kp,12,um),jo[xr.SAMPLER_2D]=Th,jo[xr.SAMPLER_CUBE]=Th,jo[xr.SAMPLER_3D]=Th,jo[xr.SAMPLER_2D_SHADOW]=Th,jo[xr.SAMPLER_2D_ARRAY]=Th,jo[xr.SAMPLER_2D_ARRAY_SHADOW]=Th,jo[xr.SAMPLER_CUBE_SHADOW]=Th,jo[xr.INT_SAMPLER_2D]=Th,jo[xr.INT_SAMPLER_3D]=Th,jo[xr.INT_SAMPLER_CUBE]=Th,jo[xr.INT_SAMPLER_2D_ARRAY]=Th,jo[xr.UNSIGNED_INT_SAMPLER_2D]=Th,jo[xr.UNSIGNED_INT_SAMPLER_3D]=Th,jo[xr.UNSIGNED_INT_SAMPLER_CUBE]=Th,jo[xr.UNSIGNED_INT_SAMPLER_2D_ARRAY]=Th,jo);function X6(e,a,r){var o=tU[r.type];if(!o)throw new Error("Unknown GLSL uniform type ".concat(r.type));return o().bind(null,e,a)}var rU={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function nU(e){return Object.prototype.toString.call(e)in rU}function ZS(e,a){return"#define ".concat(e," ").concat(a)}function iU(e){var a={};return e.replace(/^\s*#define\s*(\S*)\s*(\S*)\s*$/gm,function(r,o,u){var c=Number(u);return a[o]=isNaN(c)?u:c,""}),a}function aU(e,a){var r=[];return e.replace(/^\s*layout\(location\s*=\s*(\S*)\)\s*in\s+\S+\s*(.*);$/gm,function(o,u,c){var p=Number(u);return r.push({location:isNaN(p)?a[u]:p,name:c}),""}),r}function qj(e){var a=[],r=[];return e.replace(/\s*struct\s*(.*)\s*{((?:\s*.*\s*)*?)};/g,function(o,u,c){var p=[];return c.trim().replace(`\r
`,`
`).split(`
`).forEach(function(g){var y=__read(g.trim().split(/\s+/),2),S=y[0],O=y[1];p.push({type:S.trim(),name:O.replace(";","").trim()})}),r.push({type:u.trim(),uniforms:p}),""}),e.replace(/\s*uniform\s*.*\s*{((?:\s*.*\s*)*?)};/g,function(o,u){return u.trim().replace(`\r
`,`
`).split(`
`).forEach(function(c){var p=c.trim().split(" "),g=p[0]||"",y=p[1]||"",S=y.indexOf("[")>-1;if(y=y.replace(";","").replace("[","").trim(),!g.startsWith("#")){if(g){var O=r.find(function(H){return g===H.type});if(O)if(S)for(var D=function(H){O.uniforms.forEach(function(ue){a.push("".concat(y,"[").concat(H,"].").concat(ue.name))})},V=0;V<5;V++)D(V);else O.uniforms.forEach(function(H){a.push("".concat(y,".").concat(H.name))})}y&&a.push(y)}}),""}),a}function $6(e){if(e===void 0)return null;var a=/binding\s*=\s*(\d+)/.exec(e);if(a!==null){var r=parseInt(a[1],10);if(!Number.isNaN(r))return r}return null}function oU(e){var a="",r=e;return[r,a]}function A0(e,a,r,o,u){var c;o===void 0&&(o=null),u===void 0&&(u=!0);var p=e.glslVersion==="#version 100",g=a==="frag"&&((c=r.match(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm))===null||c===void 0?void 0:c.length)>1,y=r.replace(`\r
`,`
`).split(`
`).map(function(qt){return qt.replace(/[/][/].*$/,"")}).filter(function(qt){var ir=!qt||/^\s+$/.test(qt);return!ir}),S="";o!==null&&(S=Object.keys(o).map(function(qt){return ZS(qt,o[qt])}).join(`
`));var O=y.find(function(qt){return qt.startsWith("precision")})||"precision mediump float;",D=u?y.filter(function(qt){return!qt.startsWith("precision")}).join(`
`):y.join(`
`),V="";if(e.viewportOrigin===hx.UPPER_LEFT&&(V+="".concat(ZS("VIEWPORT_ORIGIN_TL","1"),`
`)),e.clipSpaceNearZ===px.ZERO&&(V+="".concat(ZS("CLIPSPACE_NEAR_ZERO","1"),`
`)),e.explicitBindingLocations){var H=0,ue=0,le=0;D=D.replace(/^(layout\((.*)\))?\s*uniform(.+{)$/gm,function(qt,ir,Sr,Br){var Jr=Sr?"".concat(Sr,", "):"";return"layout(".concat(Jr,"set = ").concat(H,", binding = ").concat(ue++,") uniform ").concat(Br)}),H++,ue=0,_o(e.separateSamplerTextures),D=D.replace(/^(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(qt,ir,Sr,Br,Jr){var en=$6(Sr);en===null&&(en=ue++);var Kn=(0,w.CR)(oU(Br),2),si=Kn[0],Pi=Kn[1];return a==="frag"?`
layout(set = `.concat(H,", binding = ").concat(en*2+0,") uniform texture").concat(si," T_").concat(Jr,`;
layout(set = `).concat(H,", binding = ").concat(en*2+1,") uniform sampler").concat(Pi," S_").concat(Jr,";").trim():""}),D=D.replace(a==="frag"?/^\s*\b(varying|in)\b/gm:/^\s*\b(varying|out)\b/gm,function(qt,ir){return"layout(location = ".concat(le++,") ").concat(ir)}),V+="".concat(ZS("gl_VertexID","gl_VertexIndex"),`
`),V+="".concat(ZS("gl_InstanceID","gl_InstanceIndex"),`
`),O=O.replace(/^precision (.*) sampler(.*);$/gm,"")}else{var we=0;D=D.replace(/^(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(qt,ir,Sr,Br,Jr){var en=$6(Sr);return en===null&&(en=we++),"uniform sampler".concat(Br," ").concat(Jr,"; // BINDING=").concat(en)})}if(e.separateSamplerTextures)D=D.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(qt,ir,Sr){return"sampler".concat(ir,"(T_").concat(Sr,", S_").concat(Sr,")")}),D=D.replace(/\bTEXTURE\((.*?)\)/g,function(qt,ir){return"T_".concat(ir)});else{var Ne=[];D=D.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(qt,ir,Sr){return Ne.push([Sr,ir]),Sr}),p&&Ne.forEach(function(qt){var ir=(0,w.CR)(qt,2),Sr=ir[0],Br=ir[1];D=D.replace(new RegExp("texture\\(".concat(Sr),"g"),function(){return"texture".concat(Br,"(").concat(Sr)})}),D=D.replace(/\bTEXTURE\((.*?)\)/g,function(qt,ir){return ir})}var dt="".concat(p?"":e.glslVersion,`
`).concat(p&&g?`#extension GL_EXT_draw_buffers : require
`:"",`
`).concat(p&&a==="frag"?`#extension GL_OES_standard_derivatives : enable
`:"").concat(u?O:"",`
`).concat(V||"").concat(S?S+`
`:"",`
`).concat(D,`
`).trim();if(e.explicitBindingLocations&&a==="frag"&&(dt=dt.replace(/^\b(out)\b/g,function(qt,ir){return"layout(location = 0) ".concat(ir)})),p){if(a==="frag"&&(dt=dt.replace(/^\s*in\s+(\S+)\s*(.*);$/gm,function(qt,ir,Sr){return"varying ".concat(ir," ").concat(Sr,`;
`)})),a==="vert"&&(dt=dt.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(qt,ir,Sr){return"varying ".concat(ir," ").concat(Sr,`;
`)}),dt=dt.replace(/^\s*layout\(location\s*=\s*\S*\)\s*in\s+(\S+)\s*(.*);$/gm,function(qt,ir,Sr){return"attribute ".concat(ir," ").concat(Sr,`;
`)})),dt=dt.replace(/\s*uniform\s*.*\s*{((?:\s*.*\s*)*?)};/g,function(qt,ir){return ir.trim().replace(/^.*$/gm,function(Sr){var Br=Sr.trim();return Br.startsWith("#")?Br:Sr?"uniform ".concat(Br):""})}),a==="frag")if(g){var mt=[];dt=dt.replace(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm,function(qt,ir){return mt.push(ir),"vec4 ".concat(ir,`;
`)});var Lt=dt.lastIndexOf("}");dt=dt.substring(0,Lt)+`
    `.concat(mt.map(function(qt,ir){return"gl_FragData[".concat(ir,"] = ").concat(qt,`;
    `)}).join(`
`))+dt.substring(Lt)}else{var Wt;if(dt=dt.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(qt,ir,Sr){return Wt=Sr,"".concat(ir," ").concat(Sr,`;
`)}),Wt){var Lt=dt.lastIndexOf("}");dt=dt.substring(0,Lt)+`
  gl_FragColor = vec4(`.concat(Wt,`);
`)+dt.substring(Lt)}}dt=dt.replace(/^\s*layout\((.*)\)/gm,"")}return dt}function Qj(e,a,r,o){o===void 0&&(o=null);var u=A0(e,"vert",a,o),c=A0(e,"frag",r,o);return{vert:a,frag:r,preprocessedVert:u,preprocessedFrag:c}}var vv=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=e.call(this)||this;return c.id=o,c.device=u,c.device.resourceCreationTracker!==null&&c.device.resourceCreationTracker.trackResourceCreated(c),c}return a.prototype.destroy=function(){this.device.resourceCreationTracker!==null&&this.device.resourceCreationTracker.trackResourceDestroyed(this)},a}(O6),sU=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=cs.Bindings;var g=c.uniformBufferBindings,y=c.samplerBindings;return p.uniformBufferBindings=g||[],p.samplerBindings=y||[],p.bindingLayouts=p.createBindingLayouts(),p}return a.prototype.createBindingLayouts=function(){var r=0,o=0,u=[],c=this.uniformBufferBindings.length,p=this.samplerBindings.length;return u.push({firstUniformBuffer:r,numUniformBuffers:c,firstSampler:o,numSamplers:p}),r+=c,o+=p,{numUniformBuffers:r,numSamplers:o,bindingLayoutTables:u}},a}(vv);function ha(e){return typeof WebGL2RenderingContext!="undefined"&&e instanceof WebGL2RenderingContext?!0:!!(e&&e._version===2)}function Y6(e){var a=sg(e);switch(a){case jn.BC1:case jn.BC2:case jn.BC3:case jn.BC4_UNORM:case jn.BC4_SNORM:case jn.BC5_UNORM:case jn.BC5_SNORM:return!0;default:return!1}}function K6(e){var a=dx(e);if(a&Xi.Normalized)return!1;var r=sg(e);return r===jn.S8||r===jn.S16||r===jn.S32||r===jn.U8||r===jn.U16||r===jn.U32}function uU(e){switch(e){case dv.STATIC:return xr.STATIC_DRAW;case dv.DYNAMIC:return xr.DYNAMIC_DRAW}}function q6(e){if(e&ou.INDEX)return xr.ELEMENT_ARRAY_BUFFER;if(e&ou.VERTEX)return xr.ARRAY_BUFFER;if(e&ou.UNIFORM)return xr.UNIFORM_BUFFER}function lU(e){switch(e){case Yl.TRIANGLES:return xr.TRIANGLES;case Yl.POINTS:return xr.POINTS;case Yl.TRIANGLE_STRIP:return xr.TRIANGLE_STRIP;case Yl.LINES:return xr.LINES;case Yl.LINE_STRIP:return xr.LINE_STRIP;default:throw new Error("Unknown primitive topology mode")}}function cU(e){switch(e){case jn.U8:return xr.UNSIGNED_BYTE;case jn.U16:return xr.UNSIGNED_SHORT;case jn.U32:return xr.UNSIGNED_INT;case jn.S8:return xr.BYTE;case jn.S16:return xr.SHORT;case jn.S32:return xr.INT;case jn.F16:return xr.HALF_FLOAT;case jn.F32:return xr.FLOAT;default:throw new Error("whoops")}}function fU(e){switch(e){case va.R:return 1;case va.RG:return 2;case va.RGB:return 3;case va.RGBA:return 4;default:return 1}}function hU(e){var a=sg(e),r=R3(e),o=dx(e),u=cU(a),c=fU(r),p=!!(o&Xi.Normalized);return{size:c,type:u,normalized:p}}function pU(e){switch(e){case Xr.U8_R:return xr.UNSIGNED_BYTE;case Xr.U16_R:return xr.UNSIGNED_SHORT;case Xr.U32_R:return xr.UNSIGNED_INT;default:throw new Error("whoops")}}function VS(e){switch(e){case Ah.CLAMP_TO_EDGE:return xr.CLAMP_TO_EDGE;case Ah.REPEAT:return xr.REPEAT;case Ah.MIRRORED_REPEAT:return xr.MIRRORED_REPEAT;default:throw new Error("whoops")}}function B3(e,a){if(a===xc.LINEAR&&e===$l.BILINEAR)return xr.LINEAR_MIPMAP_LINEAR;if(a===xc.LINEAR&&e===$l.POINT)return xr.NEAREST_MIPMAP_LINEAR;if(a===xc.NEAREST&&e===$l.BILINEAR)return xr.LINEAR_MIPMAP_NEAREST;if(a===xc.NEAREST&&e===$l.POINT)return xr.NEAREST_MIPMAP_NEAREST;if(a===xc.NO_MIP&&e===$l.BILINEAR)return xr.LINEAR;if(a===xc.NO_MIP&&e===$l.POINT)return xr.NEAREST;throw new Error("Unknown texture filter mode")}function _x(e,a){a===void 0&&(a=0);var r=e;return r.gl_buffer_pages[a/r.pageByteSize|0]}function xx(e){var a=e;return a.gl_texture}function R5(e){var a=e;return a.gl_sampler}function HS(e,a){e.name=a,e.__SPECTOR_Metadata={name:a}}function Q6(e,a){for(var r=[];;){var o=a.exec(e);if(!o)break;r.push(o)}return r}function T0(e){return e.blendMode==Af.ADD&&e.blendSrcFactor==Yo.ONE&&e.blendDstFactor===Yo.ZERO}function dU(e){switch(e){case M3.OcclusionConservative:return xr.ANY_SAMPLES_PASSED_CONSERVATIVE;default:throw new Error("whoops")}}function vU(e){if(e===Mo.TEXTURE_2D)return xr.TEXTURE_2D;if(e===Mo.TEXTURE_2D_ARRAY)return xr.TEXTURE_2D_ARRAY;if(e===Mo.TEXTURE_CUBE_MAP)return xr.TEXTURE_CUBE_MAP;if(e===Mo.TEXTURE_3D)return xr.TEXTURE_3D;throw new Error("whoops")}function I5(e,a,r,o){return!(e%r!==0||a%o!==0)}var gU=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=cs.Buffer;var g=c.viewOrSize,y=c.usage,S=c.hint,O=S===void 0?dv.STATIC:S,D=u.uniformBufferMaxPageByteSize,V=u.gl,H=y&ou.UNIFORM;H||(ha(V)?V.bindVertexArray(null):u.OES_vertex_array_object.bindVertexArrayOES(null));var ue=cx(g)?O3(g,4):O3(g.byteLength,4);p.gl_buffer_pages=[];var le;if(H){for(var we=ue;we>0;)p.gl_buffer_pages.push(p.createBufferPage(Math.min(we,D),y,O)),we-=D;le=D}else p.gl_buffer_pages.push(p.createBufferPage(ue,y,O)),le=ue;return p.pageByteSize=le,p.byteSize=ue,p.usage=y,p.gl_target=q6(y),cx(g)||p.setSubData(0,new Uint8Array(g.buffer)),H||(ha(V)?V.bindVertexArray(p.device.currentBoundVAO):u.OES_vertex_array_object.bindVertexArrayOES(p.device.currentBoundVAO)),p}return a.prototype.setSubData=function(r,o,u,c){u===void 0&&(u=0),c===void 0&&(c=o.byteLength-u);for(var p=this.device.gl,g=this.pageByteSize,y=r+c,S=r,O=r%g;S<y;){var D=ha(p)?p.COPY_WRITE_BUFFER:this.gl_target,V=_x(this,S);if(V.ubo)return;p.bindBuffer(D,V),ha(p)?p.bufferSubData(D,O,o,u,Math.min(y-S,g)):p.bufferSubData(D,O,o),S+=g,O=0,u+=g,this.device.debugGroupStatisticsBufferUpload()}},a.prototype.destroy=function(){e.prototype.destroy.call(this);for(var r=0;r<this.gl_buffer_pages.length;r++)this.gl_buffer_pages[r].ubo||this.device.gl.deleteBuffer(this.gl_buffer_pages[r]);this.gl_buffer_pages=[]},a.prototype.createBufferPage=function(r,o,u){var c=this.device.gl,p=o&ou.UNIFORM;if(!ha(c)&&p)return{ubo:!0};var g=this.device.ensureResourceExists(c.createBuffer()),y=q6(o),S=uU(u);return c.bindBuffer(y,g),c.bufferData(y,r,S),g},a}(vv),mU=function(e){(0,w.ZT)(a,e);function a(r){var o,u,c,p,g=r.id,y=r.device,S=r.descriptor,O,D=e.call(this,{id:g,device:y})||this;D.type=cs.InputLayout;var V=S.vertexBufferDescriptors,H=S.indexBufferFormat,ue=S.program;_o(H===Xr.U16_R||H===Xr.U32_R||H===null);var le=H!==null?pU(H):null,we=H!==null?D6(H):null,Ne=D.device.gl,dt=D.device.ensureResourceExists(ha(Ne)?Ne.createVertexArray():y.OES_vertex_array_object.createVertexArrayOES());ha(Ne)?Ne.bindVertexArray(dt):y.OES_vertex_array_object.bindVertexArrayOES(dt),Ne.bindBuffer(Ne.ARRAY_BUFFER,_x(D.device.fallbackVertexBuffer));try{for(var mt=(0,w.XA)(S.vertexBufferDescriptors),Lt=mt.next();!Lt.done;Lt=mt.next()){var Wt=Lt.value,qt=Wt.stepMode,ir=Wt.attributes;try{for(var Sr=(c=void 0,(0,w.XA)(ir)),Br=Sr.next();!Br.done;Br=Sr.next()){var Jr=Br.value,en=Jr.shaderLocation,Kn=Jr.format,si=Jr.divisor,Pi=si===void 0?1:si,so=ha(Ne)?en:(O=ue.attributes[en])===null||O===void 0?void 0:O.location,bs=hU(Kn);if(Jr.vertexFormat=bs,!fx(so)){K6(Kn);var Ss=bs.size,Ru=bs.type,Iu=bs.normalized;Ne.vertexAttribPointer(so,Ss,Ru,Iu,0,0),qt===n_.INSTANCE&&(ha(Ne)?Ne.vertexAttribDivisor(so,Pi):y.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(so,Pi)),Ne.enableVertexAttribArray(so)}}}catch(eh){c={error:eh}}finally{try{Br&&!Br.done&&(p=Sr.return)&&p.call(Sr)}finally{if(c)throw c.error}}}}catch(eh){o={error:eh}}finally{try{Lt&&!Lt.done&&(u=mt.return)&&u.call(mt)}finally{if(o)throw o.error}}return ha(Ne)?Ne.bindVertexArray(null):y.OES_vertex_array_object.bindVertexArrayOES(null),D.vertexBufferDescriptors=V,D.vao=dt,D.indexBufferFormat=H,D.indexBufferType=le,D.indexBufferCompByteSize=we,D.program=ue,D}return a.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.currentBoundVAO===this.vao&&(ha(this.device.gl)?(this.device.gl.bindVertexArray(null),this.device.gl.deleteVertexArray(this.vao)):(this.device.OES_vertex_array_object.bindVertexArrayOES(null),this.device.OES_vertex_array_object.deleteVertexArrayOES(this.vao)),this.device.currentBoundVAO=null)},a}(vv),P5=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=r.fake,g=e.call(this,{id:o,device:u})||this;g.type=cs.Texture,c=(0,w.pi)({dimension:Mo.TEXTURE_2D,depthOrArrayLayers:1,mipLevelCount:1},c);var y=g.device.gl,S,O,D=g.clampmipLevelCount(c);if(g.immutable=c.usage===Yp.RENDER_TARGET,g.pixelStore=c.pixelStore,g.format=c.format,g.dimension=c.dimension,g.formatKind=L6(c.format),g.width=c.width,g.height=c.height,g.depthOrArrayLayers=c.depthOrArrayLayers,g.mipmaps=D>=1,!p){O=g.device.ensureResourceExists(y.createTexture());var V=g.device.translateTextureType(c.format),H=g.device.translateTextureInternalFormat(c.format);if(g.device.setActiveTexture(y.TEXTURE0),g.device.currentTextures[0]=null,g.preprocessImage(),c.dimension===Mo.TEXTURE_2D){if(S=xr.TEXTURE_2D,y.bindTexture(S,O),g.immutable)if(ha(y))y.texStorage2D(S,D,H,c.width,c.height);else{var ue=(H===xr.DEPTH_COMPONENT||g.isNPOT(),0);(g.format===Xr.D32F||g.format===Xr.D24_S8)&&!ha(y)&&!u.WEBGL_depth_texture||(y.texImage2D(S,ue,H,c.width,c.height,0,H,V,null),g.mipmaps&&(g.mipmaps=!1,y.texParameteri(xr.TEXTURE_2D,xr.TEXTURE_MIN_FILTER,xr.LINEAR),y.texParameteri(xr.TEXTURE_2D,xr.TEXTURE_WRAP_S,xr.CLAMP_TO_EDGE),y.texParameteri(xr.TEXTURE_2D,xr.TEXTURE_WRAP_T,xr.CLAMP_TO_EDGE)))}_o(c.depthOrArrayLayers===1)}else if(c.dimension===Mo.TEXTURE_2D_ARRAY)S=xr.TEXTURE_2D_ARRAY,y.bindTexture(S,O),g.immutable&&ha(y)&&y.texStorage3D(S,D,H,c.width,c.height,c.depthOrArrayLayers);else if(c.dimension===Mo.TEXTURE_3D)S=xr.TEXTURE_3D,y.bindTexture(S,O),g.immutable&&ha(y)&&y.texStorage3D(S,D,H,c.width,c.height,c.depthOrArrayLayers);else if(c.dimension===Mo.TEXTURE_CUBE_MAP)S=xr.TEXTURE_CUBE_MAP,y.bindTexture(S,O),g.immutable&&ha(y)&&y.texStorage2D(S,D,H,c.width,c.height),_o(c.depthOrArrayLayers===6);else throw new Error("whoops")}return g.gl_texture=O,g.gl_target=S,g.mipLevelCount=D,g}return a.prototype.setImageData=function(r,o){o===void 0&&(o=0);var u=this.device.gl;Y6(this.format);var c=this.gl_target===xr.TEXTURE_3D||this.gl_target===xr.TEXTURE_2D_ARRAY,p=this.gl_target===xr.TEXTURE_CUBE_MAP,g=nU(r[0]);this.device.setActiveTexture(u.TEXTURE0),this.device.currentTextures[0]=null;var y=r[0],S,O;g?(S=this.width,O=this.height):(S=y.width,O=y.height,this.width=S,this.height=O),u.bindTexture(this.gl_target,this.gl_texture);var D=this.device.translateTextureFormat(this.format),V=this.device.translateTextureType(this.format);this.preprocessImage();for(var H=0;H<this.depthOrArrayLayers;H++){var ue=r[H],le=this.gl_target;p&&(le=xr.TEXTURE_CUBE_MAP_POSITIVE_X+H%6),this.immutable?u.texSubImage2D(le,o,0,0,S,O,D,V,ue):ha(u)?c?u.texImage3D(le,o,D,S,O,this.depthOrArrayLayers,0,D,V,ue):u.texImage2D(le,o,D,S,O,0,D,V,ue):g?u.texImage2D(le,o,D,S,O,0,D,V,ue):u.texImage2D(le,o,D,D,V,ue)}this.mipmaps&&this.generateMipmap(c)},a.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.gl.deleteTexture(xx(this))},a.prototype.clampmipLevelCount=function(r){if(r.dimension===Mo.TEXTURE_2D_ARRAY&&r.depthOrArrayLayers>1){var o=sg(r.format);if(o===jn.BC1)for(var u=r.width,c=r.height,p=0;p<r.mipLevelCount;p++){if(u<=2||c<=2)return p-1;u=Math.max(u/2|0,1),c=Math.max(c/2|0,1)}}return r.mipLevelCount},a.prototype.preprocessImage=function(){var r=this.device.gl;this.pixelStore&&(this.pixelStore.unpackFlipY&&r.pixelStorei(xr.UNPACK_FLIP_Y_WEBGL,!0),this.pixelStore.packAlignment&&r.pixelStorei(xr.PACK_ALIGNMENT,this.pixelStore.packAlignment),this.pixelStore.unpackAlignment&&r.pixelStorei(xr.UNPACK_ALIGNMENT,this.pixelStore.unpackAlignment))},a.prototype.generateMipmap=function(r){r===void 0&&(r=!1);var o=this.device.gl;return!ha(o)&&this.isNPOT()?this:(this.gl_texture&&this.gl_target&&(o.bindTexture(this.gl_target,this.gl_texture),r?(o.texParameteri(this.gl_target,xr.TEXTURE_BASE_LEVEL,0),o.texParameteri(this.gl_target,xr.TEXTURE_MAX_LEVEL,Math.log2(this.width)),o.texParameteri(this.gl_target,xr.TEXTURE_MIN_FILTER,xr.LINEAR_MIPMAP_LINEAR),o.texParameteri(this.gl_target,xr.TEXTURE_MAG_FILTER,xr.LINEAR)):o.texParameteri(xr.TEXTURE_2D,xr.TEXTURE_MIN_FILTER,xr.NEAREST_MIPMAP_LINEAR),o.generateMipmap(this.gl_target),o.bindTexture(this.gl_target,null)),this)},a.prototype.isNPOT=function(){var r=this.device.gl;return ha(r)?!1:!P3(this.width)||!P3(this.height)},a}(vv),yU=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=cs.RenderTarget,p.gl_renderbuffer=null,p.texture=null;var g=p.device.gl,y=c.format,S=c.width,O=c.height,D=c.sampleCount,V=D===void 0?1:D,H=c.texture,ue=!1;if((y===Xr.D32F||y===Xr.D24_S8)&&H&&!ha(g)&&!u.WEBGL_depth_texture&&(H.destroy(),p.texture=null,ue=!0),!ue&&H)p.texture=H;else{p.gl_renderbuffer=p.device.ensureResourceExists(g.createRenderbuffer()),g.bindRenderbuffer(g.RENDERBUFFER,p.gl_renderbuffer);var le=p.device.translateTextureInternalFormat(y,!0);ha(g)&&V>1?g.renderbufferStorageMultisample(xr.RENDERBUFFER,V,le,S,O):g.renderbufferStorage(xr.RENDERBUFFER,le,S,O)}return p.format=y,p.width=S,p.height=O,p.sampleCount=V,p}return a.prototype.destroy=function(){e.prototype.destroy.call(this),this.gl_renderbuffer!==null&&this.device.gl.deleteRenderbuffer(this.gl_renderbuffer),this.texture&&this.texture.destroy()},a}(vv),up;(function(e){e[e.NeedsCompile=0]="NeedsCompile",e[e.Compiling=1]="Compiling",e[e.NeedsBind=2]="NeedsBind",e[e.ReadyToUse=3]="ReadyToUse"})(up||(up={}));var _U=function(e){(0,w.ZT)(a,e);function a(r,o){var u=r.id,c=r.device,p=r.descriptor,g=e.call(this,{id:u,device:c})||this;g.rawVertexGLSL=o,g.type=cs.Program,g.uniformSetters={},g.attributes=[];var y=g.device.gl;return g.descriptor=p,g.gl_program=g.device.ensureResourceExists(y.createProgram()),g.gl_shader_vert=null,g.gl_shader_frag=null,g.compileState=up.NeedsCompile,g.tryCompileProgram(),g}return a.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.gl.deleteProgram(this.gl_program),this.device.gl.deleteShader(this.gl_shader_vert),this.device.gl.deleteShader(this.gl_shader_frag)},a.prototype.tryCompileProgram=function(){var r,o;_o(this.compileState===up.NeedsCompile);var u=this.descriptor,c=this.device.gl;!((r=u.vertex)===null||r===void 0)&&r.glsl&&(!((o=u.fragment)===null||o===void 0)&&o.glsl)&&(this.gl_shader_vert=this.compileShader(u.vertex.glsl,c.VERTEX_SHADER),this.gl_shader_frag=this.compileShader(u.fragment.glsl,c.FRAGMENT_SHADER),c.attachShader(this.gl_program,this.gl_shader_vert),c.attachShader(this.gl_program,this.gl_shader_frag),c.linkProgram(this.gl_program),this.compileState=up.Compiling,ha(c)||(this.readUniformLocationsFromLinkedProgram(),this.readAttributesFromLinkedProgram()))},a.prototype.readAttributesFromLinkedProgram=function(){for(var r,o=this.device.gl,u=o.getProgramParameter(this.gl_program,o.ACTIVE_ATTRIBUTES),c=iU(this.descriptor.vertex.glsl),p=aU(this.rawVertexGLSL,c),g=function(O){var D=o.getActiveAttrib(y.gl_program,O),V=D.name,H=D.type,ue=D.size,le=o.getAttribLocation(y.gl_program,V),we=(r=p.find(function(Ne){return Ne.name===V}))===null||r===void 0?void 0:r.location;le>=0&&!fx(we)&&(y.attributes[we]={name:V,location:le,type:H,size:ue})},y=this,S=0;S<u;S++)g(S)},a.prototype.readUniformLocationsFromLinkedProgram=function(){for(var r=this.device.gl,o=r.getProgramParameter(this.gl_program,r.ACTIVE_UNIFORMS),u=0;u<o;u++){var c=r.getActiveUniform(this.gl_program,u),p=qz(c.name).name,g=r.getUniformLocation(this.gl_program,p);if(this.uniformSetters[p]=X6(r,g,c),c&&c.size>1)for(var y=0;y<c.size;y++)g=r.getUniformLocation(this.gl_program,"".concat(p,"[").concat(y,"]")),this.uniformSetters["".concat(p,"[").concat(y,"]")]=X6(r,g,c)}},a.prototype.compileShader=function(r,o){var u=this.device.gl,c=this.device.ensureResourceExists(u.createShader(o));return u.shaderSource(c,r),u.compileShader(c),c},a.prototype.setUniformsLegacy=function(r){r===void 0&&(r={});var o=this.device.gl;if(!ha(o)){var u=!1;for(var c in r){u||(o.useProgram(this.gl_program),u=!0);var p=r[c],g=this.uniformSetters[c];if(g){var y=p;y instanceof P5&&(y=y.textureIndex),g(y)}}}return this},a}(vv),xU=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=cs.QueryPool;var g=p.device.gl;if(ha(g)){var y=c.elemCount,S=c.type;p.gl_query=kz(y,function(){return p.device.ensureResourceExists(g.createQuery())}),p.gl_query_type=dU(S)}return p}return a.prototype.queryResultOcclusion=function(r){var o=this.device.gl;if(ha(o)){var u=this.gl_query[r];return o.getQueryParameter(u,o.QUERY_RESULT_AVAILABLE)?!!o.getQueryParameter(u,o.QUERY_RESULT):null}return null},a.prototype.destroy=function(){e.prototype.destroy.call(this);var r=this.device.gl;if(ha(r))for(var o=0;o<this.gl_query.length;o++)r.deleteQuery(this.gl_query[o])},a}(vv),bU=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=e.call(this,{id:o,device:u})||this;return c.type=cs.Readback,c.gl_pbo=null,c.gl_sync=null,c}return a.prototype.clientWaitAsync=function(r,o,u){o===void 0&&(o=0),u===void 0&&(u=10);var c=this.device.gl;return new Promise(function(p,g){function y(){var S=c.clientWaitSync(r,o,0);if(S==c.WAIT_FAILED){g();return}if(S==c.TIMEOUT_EXPIRED){setTimeout(y,Az(u,0,c.MAX_CLIENT_WAIT_TIMEOUT_WEBGL));return}p()}y()})},a.prototype.getBufferSubDataAsync=function(r,o,u,c,p,g){return(0,w.mG)(this,void 0,void 0,function(){var y;return(0,w.Jh)(this,function(S){switch(S.label){case 0:return y=this.device.gl,ha(y)?(this.gl_sync=y.fenceSync(y.SYNC_GPU_COMMANDS_COMPLETE,0),y.flush(),[4,this.clientWaitAsync(this.gl_sync,0,10)]):[3,2];case 1:return S.sent(),y.bindBuffer(r,o),y.getBufferSubData(r,u,c,p,g),y.bindBuffer(r,null),[2,c];case 2:return[2]}})})},a.prototype.readTexture=function(r,o,u,c,p,g,y,S){return y===void 0&&(y=0),S===void 0&&(S=g.byteLength||0),(0,w.mG)(this,void 0,void 0,function(){var O,D,V,H,ue;return(0,w.Jh)(this,function(le){return O=this.device.gl,D=r,V=this.device.translateTextureFormat(D.format),H=this.device.translateTextureType(D.format),ue=Mz(D.format),ha(O)?(this.gl_pbo=this.device.ensureResourceExists(O.createBuffer()),O.bindBuffer(O.PIXEL_PACK_BUFFER,this.gl_pbo),O.bufferData(O.PIXEL_PACK_BUFFER,S,O.STREAM_READ),O.bindBuffer(O.PIXEL_PACK_BUFFER,null),O.bindFramebuffer(xr.READ_FRAMEBUFFER,this.device.readbackFramebuffer),O.framebufferTexture2D(xr.READ_FRAMEBUFFER,xr.COLOR_ATTACHMENT0,xr.TEXTURE_2D,D.gl_texture,0),O.bindBuffer(O.PIXEL_PACK_BUFFER,this.gl_pbo),O.readPixels(o,u,c,p,V,H,y*ue),O.bindBuffer(O.PIXEL_PACK_BUFFER,null),[2,this.getBufferSubDataAsync(O.PIXEL_PACK_BUFFER,this.gl_pbo,0,g,y,0)]):[2,this.readTextureSync(r,o,u,c,p,g,y,S)]})})},a.prototype.readTextureSync=function(r,o,u,c,p,g,y,S){S===void 0&&(S=g.byteLength||0);var O=this.device.gl,D=r,V=this.device.translateTextureType(D.format);return O.bindFramebuffer(xr.FRAMEBUFFER,this.device.readbackFramebuffer),O.framebufferTexture2D(xr.FRAMEBUFFER,xr.COLOR_ATTACHMENT0,xr.TEXTURE_2D,D.gl_texture,0),O.pixelStorei(O.PACK_ALIGNMENT,4),O.readPixels(o,u,c,p,O.RGBA,V,g),g},a.prototype.readBuffer=function(r,o,u,c,p){return(0,w.mG)(this,void 0,void 0,function(){var g;return(0,w.Jh)(this,function(y){return g=this.device.gl,ha(g)?[2,this.getBufferSubDataAsync(g.ARRAY_BUFFER,_x(r,o),o,u,c,p)]:[2,Promise.reject()]})})},a.prototype.destroy=function(){e.prototype.destroy.call(this),ha(this.device.gl)&&(this.gl_sync!==null&&this.device.gl.deleteSync(this.gl_sync),this.gl_pbo!==null&&this.device.gl.deleteBuffer(this.gl_pbo))},a}(vv),SU=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p,g,y=e.call(this,{id:o,device:u})||this;return y.type=cs.RenderPipeline,y.drawMode=lU((p=c.topology)!==null&&p!==void 0?p:Yl.TRIANGLES),y.program=c.program,y.inputLayout=c.inputLayout,y.megaState=(0,w.pi)((0,w.pi)({},mx(a_)),c.megaStateDescriptor),y.colorAttachmentFormats=c.colorAttachmentFormats.slice(),y.depthStencilAttachmentFormat=c.depthStencilAttachmentFormat,y.sampleCount=(g=c.sampleCount)!==null&&g!==void 0?g:1,y}return a}(vv),EU=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;return p.type=cs.ComputePipeline,p.descriptor=c,p}return a}(vv),wU=function(){function e(){this.liveObjects=new Set,this.creationStacks=new Map,this.deletionStacks=new Map}return e.prototype.trackResourceCreated=function(a){this.creationStacks.set(a,new Error().stack),this.liveObjects.add(a)},e.prototype.trackResourceDestroyed=function(a){this.deletionStacks.has(a)&&console.warn("Object double freed:",a,`

Creation stack: `,this.creationStacks.get(a),`

Deletion stack: `,this.deletionStacks.get(a),`

This stack: `,new Error().stack),this.deletionStacks.set(a,new Error().stack),this.liveObjects.delete(a)},e.prototype.checkForLeaks=function(){var a,r;try{for(var o=(0,w.XA)(this.liveObjects.values()),u=o.next();!u.done;u=o.next()){var c=u.value;console.warn("Object leaked:",c,"Creation stack:",this.creationStacks.get(c))}}catch(p){a={error:p}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}},e.prototype.setResourceLeakCheck=function(a,r){r?this.liveObjects.add(a):this.liveObjects.delete(a)},e}(),CU=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p,g,y=e.call(this,{id:o,device:u})||this;y.type=cs.Sampler;var S=y.device.gl;if(ha(S)){var O=y.device.ensureResourceExists(S.createSampler());S.samplerParameteri(O,xr.TEXTURE_WRAP_S,VS(c.addressModeU)),S.samplerParameteri(O,xr.TEXTURE_WRAP_T,VS(c.addressModeV)),S.samplerParameteri(O,xr.TEXTURE_WRAP_R,VS((p=c.addressModeW)!==null&&p!==void 0?p:c.addressModeU)),S.samplerParameteri(O,xr.TEXTURE_MIN_FILTER,B3(c.minFilter,c.mipmapFilter)),S.samplerParameteri(O,xr.TEXTURE_MAG_FILTER,B3(c.magFilter,xc.NO_MIP)),c.lodMinClamp!==void 0&&S.samplerParameterf(O,xr.TEXTURE_MIN_LOD,c.lodMinClamp),c.lodMaxClamp!==void 0&&S.samplerParameterf(O,xr.TEXTURE_MAX_LOD,c.lodMaxClamp),c.compareFunction!==void 0&&(S.samplerParameteri(O,S.TEXTURE_COMPARE_MODE,S.COMPARE_REF_TO_TEXTURE),S.samplerParameteri(O,S.TEXTURE_COMPARE_FUNC,c.compareFunction));var D=(g=c.maxAnisotropy)!==null&&g!==void 0?g:1;D>1&&y.device.EXT_texture_filter_anisotropic!==null&&(_o(c.minFilter===$l.BILINEAR&&c.magFilter===$l.BILINEAR&&c.mipmapFilter===xc.LINEAR),S.samplerParameterf(O,y.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,D)),y.gl_sampler=O}else y.descriptor=c;return y}return a.prototype.setTextureParameters=function(r,o,u){var c,p=this.device.gl,g=this.descriptor;this.isNPOT(o,u)?p.texParameteri(xr.TEXTURE_2D,xr.TEXTURE_MIN_FILTER,xr.LINEAR):p.texParameteri(r,xr.TEXTURE_MIN_FILTER,B3(g.minFilter,g.mipmapFilter)),p.texParameteri(xr.TEXTURE_2D,xr.TEXTURE_WRAP_S,VS(g.addressModeU)),p.texParameteri(xr.TEXTURE_2D,xr.TEXTURE_WRAP_T,VS(g.addressModeV)),p.texParameteri(r,xr.TEXTURE_MAG_FILTER,B3(g.magFilter,xc.NO_MIP));var y=(c=g.maxAnisotropy)!==null&&c!==void 0?c:1;y>1&&this.device.EXT_texture_filter_anisotropic!==null&&(_o(g.minFilter===$l.BILINEAR&&g.magFilter===$l.BILINEAR&&g.mipmapFilter===xc.LINEAR),p.texParameteri(r,this.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,y))},a.prototype.destroy=function(){e.prototype.destroy.call(this),ha(this.device.gl)&&this.device.gl.deleteSampler(R5(this))},a.prototype.isNPOT=function(r,o){return!P3(r)||!P3(o)},a}(vv),AU=function(){function e(){}return e.prototype.dispatchWorkgroups=function(a,r,o){},e.prototype.dispatchWorkgroupsIndirect=function(a,r){},e.prototype.setPipeline=function(a){},e.prototype.setBindings=function(a){},e.prototype.pushDebugGroup=function(a){},e.prototype.popDebugGroup=function(){},e.prototype.insertDebugMarker=function(a){},e}(),J6=65536,TU=function(){function e(a,r){this.shaderDebug=!1,this.OES_vertex_array_object=null,this.ANGLE_instanced_arrays=null,this.OES_texture_float=null,this.OES_draw_buffers_indexed=null,this.WEBGL_draw_buffers=null,this.WEBGL_depth_texture=null,this.WEBGL_color_buffer_float=null,this.EXT_color_buffer_half_float=null,this.WEBGL_compressed_texture_s3tc=null,this.WEBGL_compressed_texture_s3tc_srgb=null,this.EXT_texture_compression_rgtc=null,this.EXT_texture_filter_anisotropic=null,this.KHR_parallel_shader_compile=null,this.EXT_texture_norm16=null,this.EXT_color_buffer_float=null,this.OES_texture_float_linear=null,this.OES_texture_half_float_linear=null,this.scTexture=null,this.scPlatformFramebuffer=null,this.currentActiveTexture=null,this.currentBoundVAO=null,this.currentProgram=null,this.resourceCreationTracker=null,this.resourceUniqueId=0,this.currentColorAttachments=[],this.currentColorAttachmentLevels=[],this.currentColorResolveTos=[],this.currentColorResolveToLevels=[],this.currentDepthStencilResolveTo=null,this.currentSampleCount=-1,this.currentIndexBufferByteOffset=null,this.currentMegaState=mx(a_),this.currentSamplers=[],this.currentTextures=[],this.currentUniformBuffers=[],this.currentUniformBufferByteOffsets=[],this.currentUniformBufferByteSizes=[],this.currentScissorEnabled=!1,this.currentStencilRef=null,this.currentRenderPassDescriptor=null,this.debugGroupStack=[],this.resolveColorAttachmentsChanged=!1,this.resolveDepthStencilAttachmentsChanged=!1,this.explicitBindingLocations=!1,this.separateSamplerTextures=!1,this.viewportOrigin=hx.LOWER_LEFT,this.clipSpaceNearZ=px.NEGATIVE_ONE,this.supportMRT=!1,this.inBlitRenderPass=!1,this.supportedSampleCounts=[],this.occlusionQueriesRecommended=!1,this.computeShadersSupported=!1,this.gl=a,this.contextAttributes=i_(a.getContextAttributes()),ha(a)?(this.EXT_texture_norm16=a.getExtension("EXT_texture_norm16"),this.EXT_color_buffer_float=a.getExtension("EXT_color_buffer_float")):(this.OES_vertex_array_object=a.getExtension("OES_vertex_array_object"),this.ANGLE_instanced_arrays=a.getExtension("ANGLE_instanced_arrays"),this.OES_texture_float=a.getExtension("OES_texture_float"),this.WEBGL_draw_buffers=a.getExtension("WEBGL_draw_buffers"),this.WEBGL_depth_texture=a.getExtension("WEBGL_depth_texture"),this.WEBGL_color_buffer_float=a.getExtension("WEBGL_color_buffer_float"),this.EXT_color_buffer_half_float=a.getExtension("EXT_color_buffer_half_float"),a.getExtension("EXT_frag_depth"),a.getExtension("OES_element_index_uint"),a.getExtension("OES_standard_derivatives")),this.WEBGL_compressed_texture_s3tc=a.getExtension("WEBGL_compressed_texture_s3tc"),this.WEBGL_compressed_texture_s3tc_srgb=a.getExtension("WEBGL_compressed_texture_s3tc_srgb"),this.EXT_texture_compression_rgtc=a.getExtension("EXT_texture_compression_rgtc"),this.EXT_texture_filter_anisotropic=a.getExtension("EXT_texture_filter_anisotropic"),this.EXT_texture_norm16=a.getExtension("EXT_texture_norm16"),this.OES_texture_float_linear=a.getExtension("OES_texture_float_linear"),this.OES_texture_half_float_linear=a.getExtension("OES_texture_half_float_linear"),this.KHR_parallel_shader_compile=a.getExtension("KHR_parallel_shader_compile"),ha(a)?(this.platformString="WebGL2",this.glslVersion="#version 300 es"):(this.platformString="WebGL1",this.glslVersion="#version 100"),this.scTexture=new P5({id:this.getNextUniqueId(),device:this,descriptor:{width:0,height:0,depthOrArrayLayers:1,dimension:Mo.TEXTURE_2D,mipLevelCount:1,usage:Yp.RENDER_TARGET,format:this.contextAttributes.alpha===!1?Xr.U8_RGB_RT:Xr.U8_RGBA_RT},fake:!0}),this.scTexture.formatKind=ol.Float,this.scTexture.gl_target=null,this.scTexture.gl_texture=null,this.resolveColorReadFramebuffer=this.ensureResourceExists(a.createFramebuffer()),this.resolveColorDrawFramebuffer=this.ensureResourceExists(a.createFramebuffer()),this.resolveDepthStencilReadFramebuffer=this.ensureResourceExists(a.createFramebuffer()),this.resolveDepthStencilDrawFramebuffer=this.ensureResourceExists(a.createFramebuffer()),this.renderPassDrawFramebuffer=this.ensureResourceExists(a.createFramebuffer()),this.readbackFramebuffer=this.ensureResourceExists(a.createFramebuffer()),this.fallbackTexture2D=this.createFallbackTexture(Mo.TEXTURE_2D,ol.Float),this.fallbackTexture2DDepth=this.createFallbackTexture(Mo.TEXTURE_2D,ol.Depth),this.fallbackVertexBuffer=this.createBuffer({viewOrSize:1,usage:ou.VERTEX,hint:dv.STATIC}),ha(a)&&(this.fallbackTexture2DArray=this.createFallbackTexture(Mo.TEXTURE_2D_ARRAY,ol.Float),this.fallbackTexture3D=this.createFallbackTexture(Mo.TEXTURE_3D,ol.Float),this.fallbackTextureCube=this.createFallbackTexture(Mo.TEXTURE_CUBE_MAP,ol.Float)),this.currentMegaState.depthCompare=as.LESS,this.currentMegaState.depthWrite=!1,this.currentMegaState.attachmentsState[0].channelWriteMask=Tf.ALL,a.enable(a.DEPTH_TEST),a.enable(a.STENCIL_TEST),this.checkLimits(),r.shaderDebug&&(this.shaderDebug=!0),r.trackResources&&(this.resourceCreationTracker=new wU)}return e.prototype.destroy=function(){this.blitBindings&&this.blitBindings.destroy(),this.blitInputLayout&&this.blitInputLayout.destroy(),this.blitRenderPipeline&&this.blitRenderPipeline.destroy(),this.blitVertexBuffer&&this.blitVertexBuffer.destroy(),this.blitProgram&&this.blitProgram.destroy()},e.prototype.createFallbackTexture=function(a,r){var o=a===Mo.TEXTURE_CUBE_MAP?6:1,u=r===ol.Depth?Xr.D32F:Xr.U8_RGBA_NORM,c=this.createTexture({dimension:a,format:u,usage:Yp.SAMPLED,width:1,height:1,depthOrArrayLayers:o,mipLevelCount:1});return r===ol.Float&&c.setImageData([new Uint8Array(4*o)]),xx(c)},e.prototype.getNextUniqueId=function(){return++this.resourceUniqueId},e.prototype.checkLimits=function(){var a=this.gl;if(this.maxVertexAttribs=a.getParameter(xr.MAX_VERTEX_ATTRIBS),ha(a)){this.uniformBufferMaxPageByteSize=Math.min(a.getParameter(xr.MAX_UNIFORM_BLOCK_SIZE),J6),this.uniformBufferWordAlignment=a.getParameter(a.UNIFORM_BUFFER_OFFSET_ALIGNMENT)/4;var r=a.getInternalformatParameter(a.RENDERBUFFER,a.DEPTH32F_STENCIL8,a.SAMPLES);this.supportedSampleCounts=r?(0,w.ev)([],(0,w.CR)(r),!1):[],this.occlusionQueriesRecommended=!0}else this.uniformBufferWordAlignment=64,this.uniformBufferMaxPageByteSize=J6;this.uniformBufferMaxPageWordSize=this.uniformBufferMaxPageByteSize/4,this.supportedSampleCounts.includes(1)||this.supportedSampleCounts.push(1),this.supportedSampleCounts.sort(function(o,u){return o-u})},e.prototype.configureSwapChain=function(a,r,o){var u=this.scTexture;u.width=a,u.height=r,this.scPlatformFramebuffer=Pz(o)},e.prototype.getDevice=function(){return this},e.prototype.getCanvas=function(){return this.gl.canvas},e.prototype.getOnscreenTexture=function(){return this.scTexture},e.prototype.beginFrame=function(){},e.prototype.endFrame=function(){},e.prototype.translateTextureInternalFormat=function(a,r){switch(r===void 0&&(r=!1),a){case Xr.ALPHA:return xr.ALPHA;case Xr.U8_LUMINANCE:case Xr.F16_LUMINANCE:case Xr.F32_LUMINANCE:return xr.LUMINANCE;case Xr.F16_R:return xr.R16F;case Xr.F16_RG:return xr.RG16F;case Xr.F16_RGB:return xr.RGB16F;case Xr.F16_RGBA:return xr.RGBA16F;case Xr.F32_R:return xr.R32F;case Xr.F32_RG:return xr.RG32F;case Xr.F32_RGB:return xr.RGB32F;case Xr.F32_RGBA:return ha(this.gl)?xr.RGBA32F:r?this.WEBGL_color_buffer_float.RGBA32F_EXT:xr.RGBA;case Xr.U8_R_NORM:return xr.R8;case Xr.U8_RG_NORM:return xr.RG8;case Xr.U8_RGB_NORM:case Xr.U8_RGB_RT:return xr.RGB8;case Xr.U8_RGB_SRGB:return xr.SRGB8;case Xr.U8_RGBA_NORM:case Xr.U8_RGBA_RT:return ha(this.gl)?xr.RGBA8:r?xr.RGBA4:xr.RGBA;case Xr.U8_RGBA:return xr.RGBA;case Xr.U8_RGBA_SRGB:case Xr.U8_RGBA_RT_SRGB:return xr.SRGB8_ALPHA8;case Xr.U16_R:return xr.R16UI;case Xr.U16_R_NORM:return this.EXT_texture_norm16.R16_EXT;case Xr.U16_RG_NORM:return this.EXT_texture_norm16.RG16_EXT;case Xr.U16_RGBA_NORM:return this.EXT_texture_norm16.RGBA16_EXT;case Xr.U16_RGBA_5551:return xr.RGB5_A1;case Xr.U16_RGB_565:return xr.RGB565;case Xr.U32_R:return xr.R32UI;case Xr.S8_RGBA_NORM:return xr.RGBA8_SNORM;case Xr.S8_RG_NORM:return xr.RG8_SNORM;case Xr.BC1:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT;case Xr.BC1_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;case Xr.BC2:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT;case Xr.BC2_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;case Xr.BC3:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;case Xr.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;case Xr.BC4_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_RGTC1_EXT;case Xr.BC4_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT;case Xr.BC5_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT;case Xr.BC5_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;case Xr.D32F_S8:return ha(this.gl)?xr.DEPTH32F_STENCIL8:this.WEBGL_depth_texture?xr.DEPTH_STENCIL:xr.DEPTH_COMPONENT16;case Xr.D24_S8:return ha(this.gl)?xr.DEPTH24_STENCIL8:this.WEBGL_depth_texture?xr.DEPTH_STENCIL:xr.DEPTH_COMPONENT16;case Xr.D32F:return ha(this.gl)?xr.DEPTH_COMPONENT32F:this.WEBGL_depth_texture?xr.DEPTH_COMPONENT:xr.DEPTH_COMPONENT16;case Xr.D24:return ha(this.gl)?xr.DEPTH_COMPONENT24:this.WEBGL_depth_texture?xr.DEPTH_COMPONENT:xr.DEPTH_COMPONENT16;default:throw new Error("whoops")}},e.prototype.translateTextureType=function(a){var r=sg(a);switch(r){case jn.U8:return xr.UNSIGNED_BYTE;case jn.U16:return xr.UNSIGNED_SHORT;case jn.U32:return xr.UNSIGNED_INT;case jn.S8:return xr.BYTE;case jn.F16:return xr.HALF_FLOAT;case jn.F32:return xr.FLOAT;case jn.U16_PACKED_5551:return xr.UNSIGNED_SHORT_5_5_5_1;case jn.D32F:return ha(this.gl)?xr.FLOAT:this.WEBGL_depth_texture?xr.UNSIGNED_INT:xr.UNSIGNED_BYTE;case jn.D24:return ha(this.gl)?xr.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?xr.UNSIGNED_SHORT:xr.UNSIGNED_BYTE;case jn.D24S8:return ha(this.gl)?xr.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?xr.UNSIGNED_INT_24_8_WEBGL:xr.UNSIGNED_BYTE;case jn.D32FS8:return xr.FLOAT_32_UNSIGNED_INT_24_8_REV;default:throw new Error("whoops")}},e.prototype.translateTextureFormat=function(a){if(Y6(a)||a===Xr.F32_LUMINANCE||a===Xr.U8_LUMINANCE)return this.translateTextureInternalFormat(a);var r=ha(this.gl)||!ha(this.gl)&&!!this.WEBGL_depth_texture;switch(a){case Xr.D24_S8:case Xr.D32F_S8:return r?xr.DEPTH_STENCIL:xr.RGBA;case Xr.D24:case Xr.D32F:return r?xr.DEPTH_COMPONENT:xr.RGBA}var o=K6(a),u=R3(a);switch(u){case va.A:return xr.ALPHA;case va.R:return o?xr.RED_INTEGER:xr.RED;case va.RG:return o?xr.RG_INTEGER:xr.RG;case va.RGB:return o?xr.RGB_INTEGER:xr.RGB;case va.RGBA:return xr.RGBA}},e.prototype.setActiveTexture=function(a){this.currentActiveTexture!==a&&(this.gl.activeTexture(a),this.currentActiveTexture=a)},e.prototype.bindVAO=function(a){this.currentBoundVAO!==a&&(ha(this.gl)?this.gl.bindVertexArray(a):this.OES_vertex_array_object.bindVertexArrayOES(a),this.currentBoundVAO=a)},e.prototype.programCompiled=function(a){_o(a.compileState!==up.NeedsCompile),a.compileState===up.Compiling&&(a.compileState=up.NeedsBind,this.shaderDebug&&this.checkProgramCompilationForErrors(a))},e.prototype.useProgram=function(a){this.currentProgram!==a&&(this.programCompiled(a),this.gl.useProgram(a.gl_program),this.currentProgram=a)},e.prototype.ensureResourceExists=function(a){if(a===null){var r=this.gl.getError();throw new Error("Created resource is null; GL error encountered: ".concat(r))}else return a},e.prototype.createBuffer=function(a){return new gU({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createTexture=function(a){return new P5({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createSampler=function(a){return new CU({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createRenderTarget=function(a){return new yU({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createRenderTargetFromTexture=function(a){var r=a,o=r.format,u=r.width,c=r.height,p=r.mipLevelCount;return _o(p===1),this.createRenderTarget({format:o,width:u,height:c,sampleCount:1,texture:a})},e.prototype.createProgram=function(a){var r,o,u,c=(r=a.vertex)===null||r===void 0?void 0:r.glsl;return!((o=a.vertex)===null||o===void 0)&&o.glsl&&(a.vertex.glsl=A0(this.queryVendorInfo(),"vert",a.vertex.glsl)),!((u=a.fragment)===null||u===void 0)&&u.glsl&&(a.fragment.glsl=A0(this.queryVendorInfo(),"frag",a.fragment.glsl)),this.createProgramSimple(a,c)},e.prototype.createProgramSimple=function(a,r){var o=new _U({id:this.getNextUniqueId(),device:this,descriptor:a},r);return o},e.prototype.createBindings=function(a){return new sU({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createInputLayout=function(a){return new mU({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createRenderPipeline=function(a){return new SU({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createComputePass=function(){return new AU},e.prototype.createComputePipeline=function(a){return new EU({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createReadback=function(){return new bU({id:this.getNextUniqueId(),device:this})},e.prototype.createQueryPool=function(a,r){return new xU({id:this.getNextUniqueId(),device:this,descriptor:{type:a,elemCount:r}})},e.prototype.formatRenderPassDescriptor=function(a){var r,o,u,c,p,g,y=a.colorAttachment;a.depthClearValue=(r=a.depthClearValue)!==null&&r!==void 0?r:"load",a.stencilClearValue=(o=a.stencilClearValue)!==null&&o!==void 0?o:"load";for(var S=0;S<y.length;S++)a.colorAttachmentLevel||(a.colorAttachmentLevel=[]),a.colorAttachmentLevel[S]=(u=a.colorAttachmentLevel[S])!==null&&u!==void 0?u:0,a.colorResolveToLevel||(a.colorResolveToLevel=[]),a.colorResolveToLevel[S]=(c=a.colorResolveToLevel[S])!==null&&c!==void 0?c:0,a.colorClearColor||(a.colorClearColor=[]),a.colorClearColor[S]=(p=a.colorClearColor[S])!==null&&p!==void 0?p:"load",a.colorStore||(a.colorStore=[]),a.colorStore[S]=(g=a.colorStore[S])!==null&&g!==void 0?g:!1},e.prototype.createRenderPass=function(a){_o(this.currentRenderPassDescriptor===null),this.currentRenderPassDescriptor=a,this.formatRenderPassDescriptor(a);var r=a.colorAttachment,o=a.colorAttachmentLevel,u=a.colorClearColor,c=a.colorResolveTo,p=a.colorResolveToLevel,g=a.depthStencilAttachment,y=a.depthClearValue,S=a.stencilClearValue,O=a.depthStencilResolveTo;this.setRenderPassParametersBegin(r.length);for(var D=0;D<r.length;D++)this.setRenderPassParametersColor(D,r[D],o[D],c[D],p[D]);this.setRenderPassParametersDepthStencil(g,O),this.validateCurrentAttachments();for(var D=0;D<r.length;D++){var V=u[D];V!=="load"&&this.setRenderPassParametersClearColor(D,V.r,V.g,V.b,V.a)}return this.setRenderPassParametersClearDepthStencil(y,S),this},e.prototype.submitPass=function(a){_o(this.currentRenderPassDescriptor!==null),this.endPass(),this.currentRenderPassDescriptor=null},e.prototype.copySubTexture2D=function(a,r,o,u,c,p){var g=this.gl,y=a,S=u;if(_o(S.mipLevelCount===1),_o(y.mipLevelCount===1),ha(g))y===this.scTexture?g.bindFramebuffer(g.DRAW_FRAMEBUFFER,this.scPlatformFramebuffer):(g.bindFramebuffer(g.DRAW_FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.bindFramebufferAttachment(g.DRAW_FRAMEBUFFER,g.COLOR_ATTACHMENT0,y,0)),g.bindFramebuffer(g.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.bindFramebufferAttachment(g.READ_FRAMEBUFFER,g.COLOR_ATTACHMENT0,S,0),g.blitFramebuffer(c,p,c+S.width,p+S.height,r,o,r+S.width,o+S.height,g.COLOR_BUFFER_BIT,g.LINEAR),g.bindFramebuffer(g.READ_FRAMEBUFFER,null),g.bindFramebuffer(g.DRAW_FRAMEBUFFER,null);else if(y===this.scTexture){var O=this.createRenderTargetFromTexture(u);this.submitBlitRenderPass(O,y)}},e.prototype.queryLimits=function(){return this},e.prototype.queryTextureFormatSupported=function(a,r,o){switch(a){case Xr.BC1_SRGB:case Xr.BC2_SRGB:case Xr.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb!==null?I5(r,o,4,4):!1;case Xr.BC1:case Xr.BC2:case Xr.BC3:return this.WEBGL_compressed_texture_s3tc!==null?I5(r,o,4,4):!1;case Xr.BC4_UNORM:case Xr.BC4_SNORM:case Xr.BC5_UNORM:case Xr.BC5_SNORM:return this.EXT_texture_compression_rgtc!==null?I5(r,o,4,4):!1;case Xr.U16_R_NORM:case Xr.U16_RG_NORM:case Xr.U16_RGBA_NORM:return this.EXT_texture_norm16!==null;case Xr.F32_R:case Xr.F32_RG:case Xr.F32_RGB:case Xr.F32_RGBA:return this.OES_texture_float_linear!==null;case Xr.F16_R:case Xr.F16_RG:case Xr.F16_RGB:case Xr.F16_RGBA:return this.OES_texture_half_float_linear!==null;default:return!0}},e.prototype.queryProgramReady=function(a){var r=this.gl;if(a.compileState===up.NeedsCompile)throw new Error("whoops");if(a.compileState===up.Compiling){var o=void 0;return this.KHR_parallel_shader_compile!==null?o=r.getProgramParameter(a.gl_program,this.KHR_parallel_shader_compile.COMPLETION_STATUS_KHR):o=!0,o&&this.programCompiled(a),o}return a.compileState===up.NeedsBind||a.compileState===up.ReadyToUse},e.prototype.queryPlatformAvailable=function(){return this.gl.isContextLost()},e.prototype.queryVendorInfo=function(){return this},e.prototype.queryRenderPass=function(a){return this.currentRenderPassDescriptor},e.prototype.queryRenderTarget=function(a){var r=a;return r},e.prototype.setResourceName=function(a,r){if(a.name=r,a.type===cs.Buffer)for(var o=a.gl_buffer_pages,u=0;u<o.length;u++)HS(o[u],"".concat(r," Page ").concat(u));else if(a.type===cs.Texture)HS(xx(a),r);else if(a.type===cs.Sampler)HS(R5(a),r);else if(a.type===cs.RenderTarget){var c=a.gl_renderbuffer;c!==null&&HS(c,r)}else a.type===cs.InputLayout&&HS(a.vao,r)},e.prototype.setResourceLeakCheck=function(a,r){this.resourceCreationTracker!==null&&this.resourceCreationTracker.setResourceLeakCheck(a,r)},e.prototype.checkForLeaks=function(){this.resourceCreationTracker!==null&&this.resourceCreationTracker.checkForLeaks()},e.prototype.pushDebugGroup=function(a){},e.prototype.popDebugGroup=function(){},e.prototype.insertDebugMarker=function(a){},e.prototype.programPatched=function(a,r){_o(this.shaderDebug)},e.prototype.getBufferData=function(a,r,o){o===void 0&&(o=0);var u=this.gl;ha(u)&&(u.bindBuffer(u.COPY_READ_BUFFER,_x(a,o*4)),u.getBufferSubData(u.COPY_READ_BUFFER,o*4,r))},e.prototype.debugGroupStatisticsDrawCall=function(a){a===void 0&&(a=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].drawCallCount+=a},e.prototype.debugGroupStatisticsBufferUpload=function(a){a===void 0&&(a=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].bufferUploadCount+=a},e.prototype.debugGroupStatisticsTextureBind=function(a){a===void 0&&(a=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].textureBindCount+=a},e.prototype.debugGroupStatisticsTriangles=function(a){for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].triangleCount+=a},e.prototype.reportShaderError=function(a,r){var o=this.gl,u=o.getShaderParameter(a,o.COMPILE_STATUS);if(!u){console.error(Fz(r));var c=o.getExtension("WEBGL_debug_shaders");c&&console.error(c.getTranslatedShaderSource(a)),console.error(o.getShaderInfoLog(a))}return u},e.prototype.checkProgramCompilationForErrors=function(a){var r=this.gl,o=a.gl_program;if(!r.getProgramParameter(o,r.LINK_STATUS)){var u=a.descriptor;if(!this.reportShaderError(a.gl_shader_vert,u.vertex.glsl)||!this.reportShaderError(a.gl_shader_frag,u.fragment.glsl))return;console.error(r.getProgramInfoLog(a.gl_program))}},e.prototype.bindFramebufferAttachment=function(a,r,o,u){var c=this.gl;if(o===null)c.framebufferRenderbuffer(a,r,c.RENDERBUFFER,null);else if(o.type===cs.RenderTarget)o.gl_renderbuffer!==null?c.framebufferRenderbuffer(a,r,c.RENDERBUFFER,o.gl_renderbuffer):o.texture!==null&&c.framebufferTexture2D(a,r,xr.TEXTURE_2D,xx(o.texture),u);else if(o.type===cs.Texture){var p=xx(o);o.dimension===Mo.TEXTURE_2D?c.framebufferTexture2D(a,r,xr.TEXTURE_2D,p,u):ha(c)&&(o.dimension,Mo.TEXTURE_2D_ARRAY)}},e.prototype.bindFramebufferDepthStencilAttachment=function(a,r){var o=this.gl,u=r!==null?dx(r.format):Xi.Depth|Xi.Stencil,c=!!(u&Xi.Depth),p=!!(u&Xi.Stencil);if(c&&p){var g=ha(this.gl)||!ha(this.gl)&&!!this.WEBGL_depth_texture;g?this.bindFramebufferAttachment(a,o.DEPTH_STENCIL_ATTACHMENT,r,0):this.bindFramebufferAttachment(a,o.DEPTH_ATTACHMENT,r,0)}else c?(this.bindFramebufferAttachment(a,o.DEPTH_ATTACHMENT,r,0),this.bindFramebufferAttachment(a,o.STENCIL_ATTACHMENT,null,0)):p&&(this.bindFramebufferAttachment(a,o.STENCIL_ATTACHMENT,r,0),this.bindFramebufferAttachment(a,o.DEPTH_ATTACHMENT,null,0))},e.prototype.validateCurrentAttachments=function(){for(var a=-1,r=-1,o=-1,u=0;u<this.currentColorAttachments.length;u++){var c=this.currentColorAttachments[u];c!==null&&(a===-1?(a=c.sampleCount,r=c.width,o=c.height):(_o(a===c.sampleCount),_o(r===c.width),_o(o===c.height)))}this.currentDepthStencilAttachment&&(a===-1?a=this.currentDepthStencilAttachment.sampleCount:(_o(a===this.currentDepthStencilAttachment.sampleCount),_o(r===this.currentDepthStencilAttachment.width),_o(o===this.currentDepthStencilAttachment.height))),this.currentSampleCount=a},e.prototype.setRenderPassParametersBegin=function(a){var r=this.gl;if(ha(r)?r.bindFramebuffer(xr.DRAW_FRAMEBUFFER,this.renderPassDrawFramebuffer):this.inBlitRenderPass||r.bindFramebuffer(xr.FRAMEBUFFER,this.renderPassDrawFramebuffer),ha(r)?r.drawBuffers([xr.COLOR_ATTACHMENT0,xr.COLOR_ATTACHMENT1,xr.COLOR_ATTACHMENT2,xr.COLOR_ATTACHMENT3]):!this.inBlitRenderPass&&this.WEBGL_draw_buffers&&this.WEBGL_draw_buffers.drawBuffersWEBGL([xr.COLOR_ATTACHMENT0_WEBGL,xr.COLOR_ATTACHMENT1_WEBGL,xr.COLOR_ATTACHMENT2_WEBGL,xr.COLOR_ATTACHMENT3_WEBGL]),!this.inBlitRenderPass)for(var o=a;o<this.currentColorAttachments.length;o++){var u=ha(r)?xr.DRAW_FRAMEBUFFER:xr.FRAMEBUFFER,c=ha(r)?xr.COLOR_ATTACHMENT0:xr.COLOR_ATTACHMENT0_WEBGL;r.framebufferRenderbuffer(u,c+o,xr.RENDERBUFFER,null),r.framebufferTexture2D(u,c+o,xr.TEXTURE_2D,null,0)}this.currentColorAttachments.length=a},e.prototype.setRenderPassParametersColor=function(a,r,o,u,c){var p=this.gl,g=ha(p);(this.currentColorAttachments[a]!==r||this.currentColorAttachmentLevels[a]!==o)&&(this.currentColorAttachments[a]=r,this.currentColorAttachmentLevels[a]=o,(g||!g&&this.WEBGL_draw_buffers)&&this.bindFramebufferAttachment(g?xr.DRAW_FRAMEBUFFER:xr.FRAMEBUFFER,(g?xr.COLOR_ATTACHMENT0:xr.COLOR_ATTACHMENT0_WEBGL)+a,r,o),this.resolveColorAttachmentsChanged=!0),(this.currentColorResolveTos[a]!==u||this.currentColorResolveToLevels[a]!==c)&&(this.currentColorResolveTos[a]=u,this.currentColorResolveToLevels[a]=c,u!==null&&(this.resolveColorAttachmentsChanged=!0))},e.prototype.setRenderPassParametersDepthStencil=function(a,r){var o=this.gl;this.currentDepthStencilAttachment!==a&&(this.currentDepthStencilAttachment=a,this.inBlitRenderPass||this.bindFramebufferDepthStencilAttachment(ha(o)?xr.DRAW_FRAMEBUFFER:xr.FRAMEBUFFER,this.currentDepthStencilAttachment),this.resolveDepthStencilAttachmentsChanged=!0),this.currentDepthStencilResolveTo!==r&&(this.currentDepthStencilResolveTo=r,r&&(this.resolveDepthStencilAttachmentsChanged=!0))},e.prototype.setRenderPassParametersClearColor=function(a,r,o,u,c){var p=this.gl;if(this.OES_draw_buffers_indexed!==null){var g=this.currentMegaState.attachmentsState[a];g&&g.channelWriteMask!==Tf.ALL&&(this.OES_draw_buffers_indexed.colorMaskiOES(a,!0,!0,!0,!0),g.channelWriteMask=Tf.ALL)}else{var g=this.currentMegaState.attachmentsState[0];g&&g.channelWriteMask!==Tf.ALL&&(p.colorMask(!0,!0,!0,!0),g.channelWriteMask=Tf.ALL)}this.setScissorRectEnabled(!1),ha(p)?p.clearBufferfv(p.COLOR,a,[r,o,u,c]):(p.clearColor(r,o,u,c),p.clear(p.COLOR_BUFFER_BIT))},e.prototype.setRenderPassParametersClearDepthStencil=function(a,r){a===void 0&&(a="load"),r===void 0&&(r="load");var o=this.gl;a!=="load"&&(_o(!!this.currentDepthStencilAttachment),this.currentMegaState.depthWrite||(o.depthMask(!0),this.currentMegaState.depthWrite=!0),ha(o)?o.clearBufferfv(o.DEPTH,0,[a]):(o.clearDepth(a),o.clear(o.DEPTH_BUFFER_BIT))),r!=="load"&&(_o(!!this.currentDepthStencilAttachment),this.currentMegaState.stencilWrite||(o.enable(o.STENCIL_TEST),o.stencilMask(255),this.currentMegaState.stencilWrite=!0),ha(o)?o.clearBufferiv(o.STENCIL,0,[r]):(o.clearStencil(r),o.clear(o.STENCIL_BUFFER_BIT)))},e.prototype.setBindings=function(a){var r,o=this.gl,u=a,c=u.uniformBufferBindings,p=u.samplerBindings,g=u.bindingLayouts;_o(0<g.bindingLayoutTables.length);var y=g.bindingLayoutTables[0];_o(c.length>=y.numUniformBuffers),_o(p.length>=y.numSamplers);for(var S=0;S<c.length;S++){var O=c[S];if(O.size!==0){var D=y.firstUniformBuffer+S,V=O.buffer,H=O.offset||0,ue=O.size||V.byteSize;if(V!==this.currentUniformBuffers[D]||H!==this.currentUniformBufferByteOffsets[D]||ue!==this.currentUniformBufferByteSizes[D]){var le=H%V.pageByteSize,we=V.gl_buffer_pages[H/V.pageByteSize|0];_o(le+ue<=V.pageByteSize),ha(o)&&o.bindBufferRange(o.UNIFORM_BUFFER,D,we,le,ue),this.currentUniformBuffers[D]=V,this.currentUniformBufferByteOffsets[D]=H,this.currentUniformBufferByteSizes[D]=ue}}}for(var S=0;S<y.numSamplers;S++){var O=p[S],Ne=y.firstSampler+S,dt=O!==null&&O.sampler!==null?R5(O.sampler):null,mt=O!==null&&O.texture!==null?xx(O.texture):null;if(this.currentSamplers[Ne]!==dt&&(ha(o)&&o.bindSampler(Ne,dt),this.currentSamplers[Ne]=dt),this.currentTextures[Ne]!==mt){if(this.setActiveTexture(o.TEXTURE0+Ne),mt!==null){var Lt=i_(O).texture,Wt=Lt.gl_target,qt=Lt.width,ir=Lt.height;O.texture.textureIndex=Ne,o.bindTexture(Wt,mt),ha(o)||(r=O.sampler)===null||r===void 0||r.setTextureParameters(Wt,qt,ir),this.debugGroupStatisticsTextureBind()}else{var Sr=(0,w.pi)((0,w.pi)({},O),H6),Br=Sr.dimension,Jr=Sr.formatKind,Wt=vU(Br);o.bindTexture(Wt,this.getFallbackTexture((0,w.pi)({gl_target:Wt,formatKind:Jr},Sr)))}this.currentTextures[Ne]=mt}}},e.prototype.setViewport=function(a,r,o,u){var c=this.gl;c.viewport(a,r,o,u)},e.prototype.setScissorRect=function(a,r,o,u){var c=this.gl;this.setScissorRectEnabled(!0),c.scissor(a,r,o,u)},e.prototype.applyAttachmentStateIndexed=function(a,r,o){var u=this.gl,c=this.OES_draw_buffers_indexed;r.channelWriteMask!==o.channelWriteMask&&(c.colorMaskiOES(a,!!(o.channelWriteMask&Tf.RED),!!(o.channelWriteMask&Tf.GREEN),!!(o.channelWriteMask&Tf.BLUE),!!(o.channelWriteMask&Tf.ALPHA)),r.channelWriteMask=o.channelWriteMask);var p=r.rgbBlendState.blendMode!==o.rgbBlendState.blendMode||r.alphaBlendState.blendMode!==o.alphaBlendState.blendMode,g=r.rgbBlendState.blendSrcFactor!==o.rgbBlendState.blendSrcFactor||r.alphaBlendState.blendSrcFactor!==o.alphaBlendState.blendSrcFactor||r.rgbBlendState.blendDstFactor!==o.rgbBlendState.blendDstFactor||r.alphaBlendState.blendDstFactor!==o.alphaBlendState.blendDstFactor;(g||p)&&(T0(r.rgbBlendState)&&T0(r.alphaBlendState)?c.enableiOES(a,u.BLEND):T0(o.rgbBlendState)&&T0(o.alphaBlendState)&&c.disableiOES(a,u.BLEND)),p&&(c.blendEquationSeparateiOES(a,o.rgbBlendState.blendMode,o.alphaBlendState.blendMode),r.rgbBlendState.blendMode=o.rgbBlendState.blendMode,r.alphaBlendState.blendMode=o.alphaBlendState.blendMode),g&&(c.blendFuncSeparateiOES(a,o.rgbBlendState.blendSrcFactor,o.rgbBlendState.blendDstFactor,o.alphaBlendState.blendSrcFactor,o.alphaBlendState.blendDstFactor),r.rgbBlendState.blendSrcFactor=o.rgbBlendState.blendSrcFactor,r.alphaBlendState.blendSrcFactor=o.alphaBlendState.blendSrcFactor,r.rgbBlendState.blendDstFactor=o.rgbBlendState.blendDstFactor,r.alphaBlendState.blendDstFactor=o.alphaBlendState.blendDstFactor)},e.prototype.applyAttachmentState=function(a,r){var o=this.gl;a.channelWriteMask!==r.channelWriteMask&&(o.colorMask(!!(r.channelWriteMask&Tf.RED),!!(r.channelWriteMask&Tf.GREEN),!!(r.channelWriteMask&Tf.BLUE),!!(r.channelWriteMask&Tf.ALPHA)),a.channelWriteMask=r.channelWriteMask);var u=a.rgbBlendState.blendMode!==r.rgbBlendState.blendMode||a.alphaBlendState.blendMode!==r.alphaBlendState.blendMode,c=a.rgbBlendState.blendSrcFactor!==r.rgbBlendState.blendSrcFactor||a.alphaBlendState.blendSrcFactor!==r.alphaBlendState.blendSrcFactor||a.rgbBlendState.blendDstFactor!==r.rgbBlendState.blendDstFactor||a.alphaBlendState.blendDstFactor!==r.alphaBlendState.blendDstFactor;(c||u)&&(T0(a.rgbBlendState)&&T0(a.alphaBlendState)?o.enable(o.BLEND):T0(r.rgbBlendState)&&T0(r.alphaBlendState)&&o.disable(o.BLEND)),u&&(o.blendEquationSeparate(r.rgbBlendState.blendMode,r.alphaBlendState.blendMode),a.rgbBlendState.blendMode=r.rgbBlendState.blendMode,a.alphaBlendState.blendMode=r.alphaBlendState.blendMode),c&&(o.blendFuncSeparate(r.rgbBlendState.blendSrcFactor,r.rgbBlendState.blendDstFactor,r.alphaBlendState.blendSrcFactor,r.alphaBlendState.blendDstFactor),a.rgbBlendState.blendSrcFactor=r.rgbBlendState.blendSrcFactor,a.alphaBlendState.blendSrcFactor=r.alphaBlendState.blendSrcFactor,a.rgbBlendState.blendDstFactor=r.rgbBlendState.blendDstFactor,a.alphaBlendState.blendDstFactor=r.alphaBlendState.blendDstFactor)},e.prototype.setMegaState=function(a){var r=this.gl,o=this.currentMegaState;if(this.OES_draw_buffers_indexed!==null)for(var u=0;u<a.attachmentsState.length;u++)this.applyAttachmentStateIndexed(u,o.attachmentsState[0],a.attachmentsState[0]);else _o(a.attachmentsState.length===1),this.applyAttachmentState(o.attachmentsState[0],a.attachmentsState[0]);if(B6(o.blendConstant,a.blendConstant)||(r.blendColor(a.blendConstant.r,a.blendConstant.g,a.blendConstant.b,a.blendConstant.a),N6(o.blendConstant,a.blendConstant)),o.depthCompare!==a.depthCompare&&(r.depthFunc(a.depthCompare),o.depthCompare=a.depthCompare),!!o.depthWrite!=!!a.depthWrite&&(r.depthMask(a.depthWrite),o.depthWrite=a.depthWrite),!!o.stencilWrite!=!!a.stencilWrite&&(r.stencilMask(a.stencilWrite?255:0),o.stencilWrite=a.stencilWrite),!D3(o.stencilFront,a.stencilFront)){var c=a.stencilFront,p=c.passOp,g=c.failOp,y=c.depthFailOp,S=c.compare;(o.stencilFront.passOp!==p||o.stencilFront.failOp!==g||o.stencilFront.depthFailOp!==y)&&(r.stencilOpSeparate(r.FRONT,g,y,p),o.stencilFront.passOp=p,o.stencilFront.failOp=g,o.stencilFront.depthFailOp=y),o.stencilFront.compare!==S&&(this.setStencilReference(0),o.stencilFront.compare=S)}if(!D3(o.stencilBack,a.stencilBack)){var O=a.stencilBack,p=O.passOp,g=O.failOp,y=O.depthFailOp,S=O.compare;(o.stencilBack.passOp!==p||o.stencilBack.failOp!==g||o.stencilBack.depthFailOp!==y)&&(r.stencilOpSeparate(r.BACK,g,y,p),o.stencilBack.passOp=p,o.stencilBack.failOp=g,o.stencilBack.depthFailOp=y),o.stencilBack.compare!==S&&(this.setStencilReference(0),o.stencilBack.compare=S)}o.cullMode!==a.cullMode&&(o.cullMode===sp.NONE?r.enable(r.CULL_FACE):a.cullMode===sp.NONE&&r.disable(r.CULL_FACE),a.cullMode===sp.BACK?r.cullFace(r.BACK):a.cullMode===sp.FRONT?r.cullFace(r.FRONT):a.cullMode===sp.FRONT_AND_BACK&&r.cullFace(r.FRONT_AND_BACK),o.cullMode=a.cullMode),o.frontFace!==a.frontFace&&(r.frontFace(a.frontFace),o.frontFace=a.frontFace),o.polygonOffset!==a.polygonOffset&&(a.polygonOffset?(r.polygonOffset(1,1),r.enable(r.POLYGON_OFFSET_FILL)):r.disable(r.POLYGON_OFFSET_FILL),o.polygonOffset=a.polygonOffset)},e.prototype.validatePipelineFormats=function(a){for(var r=0;r<this.currentColorAttachments.length;r++)var o=this.currentColorAttachments[r];this.currentDepthStencilAttachment&&_o(this.currentDepthStencilAttachment.format===a.depthStencilAttachmentFormat),this.currentSampleCount!==-1&&_o(this.currentSampleCount===a.sampleCount)},e.prototype.setPipeline=function(a){this.currentPipeline=a,this.validatePipelineFormats(this.currentPipeline),this.setMegaState(this.currentPipeline.megaState);var r=this.currentPipeline.program;if(this.useProgram(r),r.compileState===up.NeedsBind){var o=this.gl,u=r.gl_program,c=r.descriptor,p=Q6(c.vertex.glsl,/uniform (\w+) {([^]*?)}/g);if(ha(o))for(var g=0;g<p.length;g++){var y=(0,w.CR)(p[g],2),S=y[1],O=o.getUniformBlockIndex(u,S);O!==-1&&O!==4294967295&&o.uniformBlockBinding(u,O,g)}for(var D=Q6(c.vertex.glsl,/^uniform .*sampler\S+ (\w+);\s* \/\/ BINDING=(\d+)$/gm),g=0;g<D.length;g++){var V=(0,w.CR)(D[g],3),H=V[1],ue=V[2],le=o.getUniformLocation(u,H);o.uniform1i(le,parseInt(ue))}r.compileState=up.ReadyToUse}},e.prototype.setVertexInput=function(a,r,o){var u,c,p;if(a!==null){_o(this.currentPipeline.inputLayout===a);var g=a;this.bindVAO(g.vao);for(var y=this.gl,S=0;S<g.vertexBufferDescriptors.length;S++){var O=g.vertexBufferDescriptors[S],D=O.arrayStride,V=O.attributes;try{for(var H=(u=void 0,(0,w.XA)(V)),ue=H.next();!ue.done;ue=H.next()){var le=ue.value,we=le.shaderLocation,Ne=le.offset,dt=ha(y)?we:(p=g.program.attributes[we])===null||p===void 0?void 0:p.location;if(!fx(dt)){var mt=r[S];if(mt===null)continue;var Lt=le.vertexFormat;y.bindBuffer(y.ARRAY_BUFFER,_x(mt.buffer));var Wt=(mt.offset||0)+Ne;y.vertexAttribPointer(dt,Lt.size,Lt.type,Lt.normalized,D,Wt)}}}catch(ir){u={error:ir}}finally{try{ue&&!ue.done&&(c=H.return)&&c.call(H)}finally{if(u)throw u.error}}}if(_o(o!==null==(g.indexBufferFormat!==null)),o!==null){var qt=o.buffer;_o(qt.usage===ou.INDEX),y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,_x(qt)),this.currentIndexBufferByteOffset=o.offset||0}else this.currentIndexBufferByteOffset=null}else _o(this.currentPipeline.inputLayout===null),_o(o===null),this.bindVAO(null),this.currentIndexBufferByteOffset=0},e.prototype.setStencilReference=function(a){this.currentStencilRef!==a&&(this.currentStencilRef=a,this.applyStencil())},e.prototype.draw=function(a,r,o,u){var c,p=this.gl,g=this.currentPipeline;if(r){var y=[g.drawMode,o||0,a,r];ha(p)?p.drawArraysInstanced.apply(p,(0,w.ev)([],(0,w.CR)(y),!1)):(c=this.ANGLE_instanced_arrays).drawArraysInstancedANGLE.apply(c,(0,w.ev)([],(0,w.CR)(y),!1))}else p.drawArrays(g.drawMode,o,a);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(a/3*Math.max(r,1))},e.prototype.drawIndexed=function(a,r,o,u,c){var p,g=this.gl,y=this.currentPipeline,S=i_(y.inputLayout),O=i_(this.currentIndexBufferByteOffset)+o*S.indexBufferCompByteSize;if(r){var D=[y.drawMode,a,S.indexBufferType,O,r];ha(g)?g.drawElementsInstanced.apply(g,(0,w.ev)([],(0,w.CR)(D),!1)):(p=this.ANGLE_instanced_arrays).drawElementsInstancedANGLE.apply(p,(0,w.ev)([],(0,w.CR)(D),!1))}else g.drawElements(y.drawMode,a,S.indexBufferType,O);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(a/3*Math.max(r,1))},e.prototype.drawIndirect=function(a,r){},e.prototype.drawIndexedIndirect=function(a,r){},e.prototype.beginOcclusionQuery=function(a){var r=this.gl;if(ha(r)){var o=this.currentRenderPassDescriptor.occlusionQueryPool;r.beginQuery(o.gl_query_type,o.gl_query[a])}},e.prototype.endOcclusionQuery=function(){var a=this.gl;if(ha(a)){var r=this.currentRenderPassDescriptor.occlusionQueryPool;a.endQuery(r.gl_query_type)}},e.prototype.pipelineQueryReady=function(a){var r=a;return this.queryProgramReady(r.program)},e.prototype.pipelineForceReady=function(a){},e.prototype.endPass=function(){for(var a=this.gl,r=ha(a),o=!1,u=0;u<this.currentColorAttachments.length;u++){var c=this.currentColorAttachments[u];if(c!==null){var p=this.currentColorResolveTos[u],g=!1;p!==null&&(_o(c.width===p.width&&c.height===p.height),this.setScissorRectEnabled(!1),r&&a.bindFramebuffer(a.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&r&&this.bindFramebufferAttachment(a.READ_FRAMEBUFFER,a.COLOR_ATTACHMENT0,c,this.currentColorAttachmentLevels[u]),g=!0,p===this.scTexture?a.bindFramebuffer(r?xr.DRAW_FRAMEBUFFER:xr.FRAMEBUFFER,this.scPlatformFramebuffer):(a.bindFramebuffer(r?xr.DRAW_FRAMEBUFFER:xr.FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.resolveColorAttachmentsChanged&&a.framebufferTexture2D(r?xr.DRAW_FRAMEBUFFER:xr.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,p.gl_texture,this.currentColorResolveToLevels[u])),r?(a.blitFramebuffer(0,0,c.width,c.height,0,0,p.width,p.height,a.COLOR_BUFFER_BIT,a.LINEAR),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null)):this.submitBlitRenderPass(c,p),o=!0),this.currentRenderPassDescriptor.colorStore[u]||g||(a.bindFramebuffer(r?xr.READ_FRAMEBUFFER:xr.FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&this.bindFramebufferAttachment(r?xr.READ_FRAMEBUFFER:xr.FRAMEBUFFER,a.COLOR_ATTACHMENT0,c,this.currentColorAttachmentLevels[u])),a.bindFramebuffer(r?xr.READ_FRAMEBUFFER:xr.FRAMEBUFFER,null)}}this.resolveColorAttachmentsChanged=!1;var y=this.currentDepthStencilAttachment;if(y){var S=this.currentDepthStencilResolveTo,g=!1;S&&(_o(y.width===S.width&&y.height===S.height),this.setScissorRectEnabled(!1),a.bindFramebuffer(r?xr.READ_FRAMEBUFFER:xr.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),a.bindFramebuffer(r?xr.DRAW_FRAMEBUFFER:xr.FRAMEBUFFER,this.resolveDepthStencilDrawFramebuffer),this.resolveDepthStencilAttachmentsChanged&&(this.bindFramebufferDepthStencilAttachment(r?xr.READ_FRAMEBUFFER:xr.FRAMEBUFFER,y),this.bindFramebufferDepthStencilAttachment(r?xr.DRAW_FRAMEBUFFER:xr.FRAMEBUFFER,S)),g=!0,r&&a.blitFramebuffer(0,0,y.width,y.height,0,0,S.width,S.height,a.DEPTH_BUFFER_BIT,a.NEAREST),a.bindFramebuffer(r?xr.DRAW_FRAMEBUFFER:xr.FRAMEBUFFER,null),o=!0),this.currentRenderPassDescriptor.depthStencilStore||(g||(a.bindFramebuffer(r?xr.READ_FRAMEBUFFER:xr.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),this.resolveDepthStencilAttachmentsChanged&&this.bindFramebufferDepthStencilAttachment(r?xr.READ_FRAMEBUFFER:xr.FRAMEBUFFER,y),g=!0),r&&a.invalidateFramebuffer(a.READ_FRAMEBUFFER,[a.DEPTH_STENCIL_ATTACHMENT])),g&&a.bindFramebuffer(r?xr.READ_FRAMEBUFFER:xr.FRAMEBUFFER,null),this.resolveDepthStencilAttachmentsChanged=!1}o||a.bindFramebuffer(r?xr.DRAW_FRAMEBUFFER:xr.FRAMEBUFFER,null)},e.prototype.setScissorRectEnabled=function(a){if(this.currentScissorEnabled!==a){var r=this.gl;a?r.enable(r.SCISSOR_TEST):r.disable(r.SCISSOR_TEST),this.currentScissorEnabled=a}},e.prototype.applyStencil=function(){fx(this.currentStencilRef)||(this.gl.stencilFuncSeparate(xr.FRONT,this.currentMegaState.stencilFront.compare,this.currentStencilRef,255),this.gl.stencilFuncSeparate(xr.BACK,this.currentMegaState.stencilBack.compare,this.currentStencilRef,255))},e.prototype.getFallbackTexture=function(a){var r=a.gl_target,o=a.formatKind;if(r===xr.TEXTURE_2D)return o===ol.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(r===xr.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(r===xr.TEXTURE_3D)return this.fallbackTexture3D;if(r===xr.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},e.prototype.submitBlitRenderPass=function(a,r){this.blitRenderPipeline||(this.blitProgram=this.createProgram({vertex:{glsl:`layout(location = 0) in vec2 a_Position;
out vec2 v_TexCoord;
void main() {
  v_TexCoord = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);

  #ifdef VIEWPORT_ORIGIN_TL
    v_TexCoord.y = 1.0 - v_TexCoord.y;
  #endif
}`},fragment:{glsl:`uniform sampler2D u_Texture;
in vec2 v_TexCoord;
out vec4 outputColor;
void main() {
  outputColor = texture(SAMPLER_2D(u_Texture), v_TexCoord);
}`}}),this.blitVertexBuffer=this.createBuffer({usage:ou.VERTEX|ou.COPY_DST,viewOrSize:new Float32Array([-4,-4,4,-4,0,4])}),this.blitInputLayout=this.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:n_.VERTEX,attributes:[{format:Xr.F32_RG,offset:4*0,shaderLocation:0}]}],indexBufferFormat:null,program:this.blitProgram}),this.blitRenderPipeline=this.createRenderPipeline({topology:Yl.TRIANGLES,sampleCount:1,program:this.blitProgram,colorAttachmentFormats:[Xr.U8_RGBA_RT],depthStencilAttachmentFormat:null,inputLayout:this.blitInputLayout,megaStateDescriptor:mx(a_)}),this.blitBindings=this.createBindings({samplerBindings:[{sampler:null,texture:a.texture}],uniformBufferBindings:[]}),this.blitProgram.setUniformsLegacy({u_Texture:a}));var o=this.currentRenderPassDescriptor;this.currentRenderPassDescriptor=null,this.inBlitRenderPass=!0;var u=this.createRenderPass({colorAttachment:[a],colorResolveTo:[r],colorClearColor:[Rz]}),c=this.getCanvas(),p=c.width,g=c.height;u.setPipeline(this.blitRenderPipeline),u.setBindings(this.blitBindings),u.setVertexInput(this.blitInputLayout,[{buffer:this.blitVertexBuffer}],null),u.setViewport(0,0,p,g),this.gl.disable(this.gl.BLEND),u.draw(3,0),this.gl.enable(this.gl.BLEND),this.currentRenderPassDescriptor=o,this.inBlitRenderPass=!1},e}(),MU=function(){function e(a){this.pluginOptions=a}return e.prototype.createSwapChain=function(a){return(0,w.mG)(this,void 0,void 0,function(){var r,o,u,c,p,g,y,S,O,D,V;return(0,w.Jh)(this,function(H){return r=this.pluginOptions,o=r.targets,u=r.xrCompatible,c=r.antialias,p=c===void 0?!1:c,g=r.preserveDrawingBuffer,y=g===void 0?!1:g,S=r.premultipliedAlpha,O=S===void 0?!0:S,D={antialias:p,preserveDrawingBuffer:y,stencil:!0,premultipliedAlpha:O,xrCompatible:u},this.handleContextEvents(a),o.includes("webgl2")&&(V=a.getContext("webgl2",D)||a.getContext("experimental-webgl2",D)),!V&&o.includes("webgl1")&&(V=a.getContext("webgl",D)||a.getContext("experimental-webgl",D)),[2,new TU(V,{shaderDebug:!0,trackResources:!0})]})})},e.prototype.handleContextEvents=function(a){var r=this.pluginOptions,o=r.onContextLost,u=r.onContextRestored,c=r.onContextCreationError;c&&a.addEventListener("webglcontextcreationerror",c,!1),o&&a.addEventListener("webglcontextlost",o,!1),u&&a.addEventListener("webglcontextrestored",u,!1)},e}();let lp;const eN=typeof TextDecoder!="undefined"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder!="undefined"&&eN.decode();let jS=null;function N3(){return(jS===null||jS.byteLength===0)&&(jS=new Uint8Array(lp.memory.buffer)),jS}function O5(e,a){return e=e>>>0,eN.decode(N3().subarray(e,e+a))}const lm=new Array(128).fill(void 0);lm.push(void 0,null,!0,!1);let WS=lm.length;function RU(e){WS===lm.length&&lm.push(lm.length+1);const a=WS;return WS=lm[a],lm[a]=e,a}function z3(e){return lm[e]}function IU(e){e<132||(lm[e]=WS,WS=e)}function PU(e){const a=z3(e);return IU(e),a}let U3=0;const Z3=typeof TextEncoder!="undefined"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},OU=typeof Z3.encodeInto=="function"?function(e,a){return Z3.encodeInto(e,a)}:function(e,a){const r=Z3.encode(e);return a.set(r),{read:e.length,written:r.length}};function tN(e,a,r){if(r===void 0){const g=Z3.encode(e),y=a(g.length,1)>>>0;return N3().subarray(y,y+g.length).set(g),U3=g.length,y}let o=e.length,u=a(o,1)>>>0;const c=N3();let p=0;for(;p<o;p++){const g=e.charCodeAt(p);if(g>127)break;c[u+p]=g}if(p!==o){p!==0&&(e=e.slice(p)),u=r(u,o,o=p+e.length*3,1)>>>0;const g=N3().subarray(u+p,u+o),y=OU(e,g);p+=y.written}return U3=p,u}let GS=null;function rN(){return(GS===null||GS.byteLength===0)&&(GS=new Int32Array(lp.memory.buffer)),GS}function kU(e,a,r){let o,u;try{const g=lp.__wbindgen_add_to_stack_pointer(-16),y=tN(e,lp.__wbindgen_malloc,lp.__wbindgen_realloc),S=U3,O=tN(a,lp.__wbindgen_malloc,lp.__wbindgen_realloc),D=U3;lp.glsl_compile(g,y,S,O,D,r);var c=rN()[g/4+0],p=rN()[g/4+1];return o=c,u=p,O5(c,p)}finally{lp.__wbindgen_add_to_stack_pointer(16),lp.__wbindgen_free(o,u,1)}}function FU(e,a){return c4(this,null,function*(){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return yield WebAssembly.instantiateStreaming(e,a)}catch(o){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",o);else throw o}const r=yield e.arrayBuffer();return yield WebAssembly.instantiate(r,a)}else{const r=yield WebAssembly.instantiate(e,a);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}})}function DU(){const e={};return e.wbg={},e.wbg.__wbindgen_string_new=function(a,r){const o=O5(a,r);return RU(o)},e.wbg.__wbindgen_object_drop_ref=function(a){PU(a)},e.wbg.__wbg_log_1d3ae0273d8f4f8a=function(a){console.log(z3(a))},e.wbg.__wbg_log_576ca876af0d4a77=function(a,r){console.log(z3(a),z3(r))},e.wbg.__wbindgen_throw=function(a,r){throw new Error(O5(a,r))},e}function LU(e,a){return lp=e.exports,nN.__wbindgen_wasm_module=a,GS=null,jS=null,lp}function nN(e){return c4(this,null,function*(){if(lp!==void 0)return lp;const a=DU();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:o}=yield FU(yield e,a);return LU(r,o)})}var Mh;(function(e){e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.TEXTURE_BINDING=4]="TEXTURE_BINDING",e[e.STORAGE_BINDING=8]="STORAGE_BINDING",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Mh||(Mh={}));var k5;(function(e){e[e.READ=1]="READ",e[e.WRITE=2]="WRITE"})(k5||(k5={}));function BU(e){var a=0;return e&Yp.SAMPLED&&(a|=Mh.TEXTURE_BINDING|Mh.COPY_DST),e&Yp.RENDER_TARGET&&(a|=Mh.RENDER_ATTACHMENT|Mh.TEXTURE_BINDING|Mh.COPY_SRC|Mh.COPY_DST),a}function F5(e){if(e===Xr.U8_R_NORM)return"r8unorm";if(e===Xr.U8_RG_NORM)return"rg8unorm";if(e===Xr.U8_RGBA_RT)return"bgra8unorm";if(e===Xr.U8_RGBA_RT_SRGB)return"bgra8unorm-srgb";if(e===Xr.U8_RGBA_NORM)return"rgba8unorm";if(e===Xr.U8_RGBA_SRGB)return"rgba8unorm-srgb";if(e===Xr.S8_R_NORM)return"r8snorm";if(e===Xr.S8_RG_NORM)return"rg8snorm";if(e===Xr.S8_RGBA_NORM)return"rgba8snorm";if(e===Xr.U32_R)return"r32uint";if(e===Xr.F16_RGBA)return"rgba16float";if(e===Xr.F32_RGBA)return"rgba32float";if(e===Xr.D24)return"depth24plus";if(e===Xr.D24_S8)return"depth24plus-stencil8";if(e===Xr.D32F)return"depth32float";if(e===Xr.D32F_S8)return"depth32float-stencil8";if(e===Xr.BC1)return"bc1-rgba-unorm";if(e===Xr.BC1_SRGB)return"bc1-rgba-unorm-srgb";if(e===Xr.BC2)return"bc2-rgba-unorm";if(e===Xr.BC2_SRGB)return"bc2-rgba-unorm-srgb";if(e===Xr.BC3)return"bc3-rgba-unorm";if(e===Xr.BC3_SRGB)return"bc3-rgba-unorm-srgb";if(e===Xr.BC4_SNORM)return"bc4-r-snorm";if(e===Xr.BC4_UNORM)return"bc4-r-unorm";if(e===Xr.BC5_SNORM)return"bc5-rg-snorm";if(e===Xr.BC5_UNORM)return"bc5-rg-unorm";throw"whoops"}function NU(e){if(e===Mo.TEXTURE_2D)return"2d";if(e===Mo.TEXTURE_CUBE_MAP)return"2d";if(e===Mo.TEXTURE_2D_ARRAY)return"2d";if(e===Mo.TEXTURE_3D)return"3d";throw new Error("whoops")}function zU(e){if(e===Mo.TEXTURE_2D)return"2d";if(e===Mo.TEXTURE_CUBE_MAP)return"cube";if(e===Mo.TEXTURE_2D_ARRAY)return"2d-array";if(e===Mo.TEXTURE_3D)return"3d";throw new Error("whoops")}function UU(e){var a=0;return e&ou.INDEX&&(a|=GPUBufferUsage.INDEX),e&ou.VERTEX&&(a|=GPUBufferUsage.VERTEX),e&ou.UNIFORM&&(a|=GPUBufferUsage.UNIFORM),e&ou.STORAGE&&(a|=GPUBufferUsage.STORAGE),e&ou.COPY_SRC&&(a|=GPUBufferUsage.COPY_SRC),a|=GPUBufferUsage.COPY_DST,a}function D5(e){if(e===Ah.CLAMP_TO_EDGE)return"clamp-to-edge";if(e===Ah.REPEAT)return"repeat";if(e===Ah.MIRRORED_REPEAT)return"mirror-repeat";throw new Error("whoops")}function iN(e){if(e===$l.BILINEAR)return"linear";if(e===$l.POINT)return"nearest";throw new Error("whoops")}function ZU(e){if(e===xc.LINEAR)return"linear";if(e===xc.NEAREST)return"nearest";if(e===xc.NO_MIP)return"nearest";throw new Error("whoops")}function bx(e){var a=e;return a.gpuBuffer}function VU(e){var a=e;return a.gpuSampler}function HU(e){var a=e;return a.querySet}function jU(e){if(e===M3.OcclusionConservative)return"occlusion";throw new Error("whoops")}function WU(e){switch(e){case Yl.TRIANGLES:return"triangle-list";case Yl.POINTS:return"point-list";case Yl.TRIANGLE_STRIP:return"triangle-strip";case Yl.LINES:return"line-list";case Yl.LINE_STRIP:return"line-strip";default:throw new Error("Unknown primitive topology mode")}}function GU(e){if(e===sp.NONE)return"none";if(e===sp.FRONT)return"front";if(e===sp.BACK)return"back";throw new Error("whoops")}function XU(e){if(e===US.CCW)return"ccw";if(e===US.CW)return"cw";throw new Error("whoops")}function $U(e,a){return{topology:WU(e),cullMode:GU(a.cullMode),frontFace:XU(a.frontFace)}}function aN(e){if(e===Yo.ZERO)return"zero";if(e===Yo.ONE)return"one";if(e===Yo.SRC)return"src";if(e===Yo.ONE_MINUS_SRC)return"one-minus-src";if(e===Yo.DST)return"dst";if(e===Yo.ONE_MINUS_DST)return"one-minus-dst";if(e===Yo.SRC_ALPHA)return"src-alpha";if(e===Yo.ONE_MINUS_SRC_ALPHA)return"one-minus-src-alpha";if(e===Yo.DST_ALPHA)return"dst-alpha";if(e===Yo.ONE_MINUS_DST_ALPHA)return"one-minus-dst-alpha";if(e===Yo.CONST)return"constant";if(e===Yo.ONE_MINUS_CONSTANT)return"one-minus-constant";if(e===Yo.SRC_ALPHA_SATURATE)return"src-alpha-saturated";throw new Error("whoops")}function YU(e){if(e===Af.ADD)return"add";if(e===Af.SUBSTRACT)return"subtract";if(e===Af.REVERSE_SUBSTRACT)return"reverse-subtract";if(e===Af.MIN)return"min";if(e===Af.MAX)return"max";throw new Error("whoops")}function oN(e){return{operation:YU(e.blendMode),srcFactor:aN(e.blendSrcFactor),dstFactor:aN(e.blendDstFactor)}}function sN(e){return e.blendMode===Af.ADD&&e.blendSrcFactor===Yo.ONE&&e.blendDstFactor===Yo.ZERO}function KU(e){if(!(sN(e.rgbBlendState)&&sN(e.alphaBlendState)))return{color:oN(e.rgbBlendState),alpha:oN(e.alphaBlendState)}}function qU(e,a){return{format:F5(a),blend:KU(e),writeMask:e.channelWriteMask}}function QU(e,a){return a.attachmentsState.map(function(r,o){return qU(r,e[o])})}function V3(e){if(e===as.NEVER)return"never";if(e===as.LESS)return"less";if(e===as.EQUAL)return"equal";if(e===as.LEQUAL)return"less-equal";if(e===as.GREATER)return"greater";if(e===as.NOTEQUAL)return"not-equal";if(e===as.GEQUAL)return"greater-equal";if(e===as.ALWAYS)return"always";throw new Error("whoops")}function Sx(e){if(e===Qf.KEEP)return"keep";if(e===Qf.REPLACE)return"replace";if(e===Qf.ZERO)return"zero";if(e===Qf.DECREMENT_CLAMP)return"decrement-clamp";if(e===Qf.DECREMENT_WRAP)return"decrement-wrap";if(e===Qf.INCREMENT_CLAMP)return"increment-clamp";if(e===Qf.INCREMENT_WRAP)return"increment-wrap";if(e===Qf.INVERT)return"invert";throw new Error("whoops")}function JU(e,a){if(!fx(e))return{format:F5(e),depthWriteEnabled:!!a.depthWrite,depthCompare:V3(a.depthCompare),depthBias:a.polygonOffset?1:0,depthBiasSlopeScale:a.polygonOffset?1:0,stencilFront:{compare:V3(a.stencilFront.compare),passOp:Sx(a.stencilFront.passOp),failOp:Sx(a.stencilFront.failOp),depthFailOp:Sx(a.stencilFront.depthFailOp)},stencilBack:{compare:V3(a.stencilBack.compare),passOp:Sx(a.stencilBack.passOp),failOp:Sx(a.stencilBack.failOp),depthFailOp:Sx(a.stencilBack.depthFailOp)},stencilReadMask:1,stencilWriteMask:1}}function e9(e){if(e!==null){if(e===Xr.U16_R)return"uint16";if(e===Xr.U32_R)return"uint32";throw new Error("whoops")}}function t9(e){if(e===n_.VERTEX)return"vertex";if(e===n_.INSTANCE)return"instance";throw new Error("whoops")}function r9(e){if(e===Xr.U8_R)return"uint8x2";if(e===Xr.U8_RG)return"uint8x2";if(e===Xr.U8_RGB)return"uint8x4";if(e===Xr.U8_RGBA)return"uint8x4";if(e===Xr.U8_RG_NORM)return"unorm8x2";if(e===Xr.U8_RGBA_NORM)return"unorm8x4";if(e===Xr.S8_RGB_NORM)return"snorm8x4";if(e===Xr.S8_RGBA_NORM)return"snorm8x4";if(e===Xr.U16_RG_NORM)return"unorm16x2";if(e===Xr.U16_RGBA_NORM)return"unorm16x4";if(e===Xr.S16_RG_NORM)return"snorm16x2";if(e===Xr.S16_RGBA_NORM)return"snorm16x4";if(e===Xr.S16_RG)return"uint16x2";if(e===Xr.F16_RG)return"float16x2";if(e===Xr.F16_RGBA)return"float16x4";if(e===Xr.F32_R)return"float32";if(e===Xr.F32_RG)return"float32x2";if(e===Xr.F32_RGB)return"float32x3";if(e===Xr.F32_RGBA)return"float32x4";throw"whoops"}function n9(e){var a=sg(e);switch(a){case jn.BC1:case jn.BC2:case jn.BC3:case jn.BC4_SNORM:case jn.BC4_UNORM:case jn.BC5_SNORM:case jn.BC5_UNORM:return!0;default:return!1}}function i9(e){var a=sg(e);switch(a){case jn.BC1:case jn.BC2:case jn.BC3:case jn.BC4_SNORM:case jn.BC4_UNORM:case jn.BC5_SNORM:case jn.BC5_UNORM:return 4;default:return 1}}function uN(e,a,r,o){switch(r===void 0&&(r=!1),e){case Xr.S8_R:case Xr.S8_R_NORM:case Xr.S8_RG_NORM:case Xr.S8_RGB_NORM:case Xr.S8_RGBA_NORM:{var u=a instanceof ArrayBuffer?new Int8Array(a):new Int8Array(a);return o&&u.set(new Int8Array(o)),u}case Xr.U8_R:case Xr.U8_R_NORM:case Xr.U8_RG:case Xr.U8_RG_NORM:case Xr.U8_RGB:case Xr.U8_RGB_NORM:case Xr.U8_RGB_SRGB:case Xr.U8_RGBA:case Xr.U8_RGBA_NORM:case Xr.U8_RGBA_SRGB:{var c=a instanceof ArrayBuffer?new Uint8Array(a):new Uint8Array(a);return o&&c.set(new Uint8Array(o)),c}case Xr.S16_R:case Xr.S16_RG:case Xr.S16_RG_NORM:case Xr.S16_RGB_NORM:case Xr.S16_RGBA:case Xr.S16_RGBA_NORM:{var p=a instanceof ArrayBuffer?new Int16Array(a):new Int16Array(r?a/2:a);return o&&p.set(new Int16Array(o)),p}case Xr.U16_R:case Xr.U16_RGB:case Xr.U16_RGBA_5551:case Xr.U16_RGBA_NORM:case Xr.U16_RG_NORM:case Xr.U16_R_NORM:{var g=a instanceof ArrayBuffer?new Uint16Array(a):new Uint16Array(r?a/2:a);return o&&g.set(new Uint16Array(o)),g}case Xr.S32_R:{var y=a instanceof ArrayBuffer?new Int32Array(a):new Int32Array(r?a/4:a);return o&&y.set(new Int32Array(o)),y}case Xr.U32_R:case Xr.U32_RG:{var S=a instanceof ArrayBuffer?new Uint32Array(a):new Uint32Array(r?a/4:a);return o&&S.set(new Uint32Array(o)),S}case Xr.F32_R:case Xr.F32_RG:case Xr.F32_RGB:case Xr.F32_RGBA:{var O=a instanceof ArrayBuffer?new Float32Array(a):new Float32Array(r?a/4:a);return o&&O.set(new Float32Array(o)),O}}var D=a instanceof ArrayBuffer?new Uint8Array(a):new Uint8Array(a);return o&&D.set(new Uint8Array(o)),D}function a9(e){var a=(e&32768)>>15,r=(e&31744)>>10,o=e&1023;return r===0?(a?-1:1)*Math.pow(2,-14)*(o/Math.pow(2,10)):r==31?o?NaN:(a?-1:1)*(1/0):(a?-1:1)*Math.pow(2,r-15)*(1+o/Math.pow(2,10))}var ug=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=e.call(this)||this;return c.id=o,c.device=u,c}return a.prototype.destroy=function(){},a}(O6),o9=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=cs.Bindings;var g=c.pipeline;_o(!!g);var y=c.uniformBufferBindings,S=c.storageBufferBindings,O=c.samplerBindings;p.numUniformBuffers=(y==null?void 0:y.length)||0;var D=[[],[]],V=0;if(S&&S.length)for(var H=0;H<S.length;H++){var ue=c.storageBufferBindings[H],le=ue.binding,we=ue.size,Ne=ue.offset,dt=ue.buffer,mt={buffer:bx(dt),offset:Ne!=null?Ne:0,size:we};D[0].push({binding:le!=null?le:V++,resource:mt})}if(y&&y.length)for(var H=0;H<y.length;H++){var Lt=c.uniformBufferBindings[H],le=Lt.binding,we=Lt.size,Ne=Lt.offset,dt=Lt.buffer,mt={buffer:bx(dt),offset:Ne!=null?Ne:0,size:we};D[0].push({binding:le!=null?le:V++,resource:mt})}if(O&&O.length){V=0;for(var H=0;H<O.length;H++){var Wt=(0,w.pi)((0,w.pi)({},O[H]),H6),le=c.samplerBindings[H],qt=le.texture!==null?le.texture:p.device.getFallbackTexture(Wt);Wt.dimension=qt.dimension,Wt.formatKind=L6(qt.format);var ir=qt.gpuTextureView;D[1].push({binding:V++,resource:ir});var Sr=le.sampler!==null?le.sampler:p.device.getFallbackSampler(Wt),Br=VU(Sr);D[1].push({binding:V++,resource:Br})}}return p.gpuBindGroup=D.filter(function(Jr){return Jr.length>0}).map(function(Jr,en){return p.device.device.createBindGroup({layout:g.getBindGroupLayout(en),entries:Jr})}),p}return a}(ug),s9=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=cs.Buffer;var g=c.usage,y=c.viewOrSize,S=!!(g&ou.MAP_READ);p.usage=UU(g),S&&(p.usage=ou.MAP_READ|ou.COPY_DST);var O=!cx(y);if(p.view=cx(y)?null:y,p.size=cx(y)?O3(y,4):O3(y.byteLength,4),cx(y))p.gpuBuffer=p.device.device.createBuffer({usage:p.usage,size:p.size,mappedAtCreation:S?O:!1});else{p.gpuBuffer=p.device.device.createBuffer({usage:p.usage,size:p.size,mappedAtCreation:!0});var D=y&&y.constructor||Float32Array;new D(p.gpuBuffer.getMappedRange()).set(y),p.gpuBuffer.unmap()}return p}return a.prototype.setSubData=function(r,o,u,c){u===void 0&&(u=0),c===void 0&&(c=0);var p=this.gpuBuffer;c=c||o.byteLength,c=Math.min(c,this.size-r);var g=o.byteOffset+u,y=g+c,S=c+3&-4;if(S!==c){var O=new Uint8Array(o.buffer.slice(g,y));o=new Uint8Array(S),o.set(O),u=0,g=0,y=S,c=S}for(var D=1024*1024*15,V=0;y-(g+V)>D;)this.device.device.queue.writeBuffer(p,r+V,o.buffer,g+V,D),V+=D;this.device.device.queue.writeBuffer(p,r+V,o.buffer,g+V,c-V)},a.prototype.destroy=function(){e.prototype.destroy.call(this),this.gpuBuffer.destroy()},a}(ug),u9=function(){function e(){this.commandEncoder=null,this.gpuComputePassEncoder=null}return e.prototype.dispatchWorkgroups=function(a,r,o){this.gpuComputePassEncoder.dispatchWorkgroups(a,r,o)},e.prototype.dispatchWorkgroupsIndirect=function(a,r){this.gpuComputePassEncoder.dispatchWorkgroupsIndirect(a.gpuBuffer,r)},e.prototype.finish=function(){return this.gpuComputePassEncoder.end(),this.gpuComputePassEncoder=null,this.commandEncoder.finish()},e.prototype.beginComputePass=function(){_o(this.gpuComputePassEncoder===null),this.gpuComputePassEncoder=this.commandEncoder.beginComputePass(this.gpuComputePassDescriptor)},e.prototype.setPipeline=function(a){var r=a,o=i_(r.gpuComputePipeline);this.gpuComputePassEncoder.setPipeline(o)},e.prototype.setBindings=function(a){var r=a;this.gpuComputePassEncoder.setBindGroup(0,r.gpuBindGroup[0])},e.prototype.pushDebugGroup=function(a){this.gpuComputePassEncoder.pushDebugGroup(a)},e.prototype.popDebugGroup=function(){this.gpuComputePassEncoder.popDebugGroup()},e.prototype.insertDebugMarker=function(a){this.gpuComputePassEncoder.insertDebugMarker(a)},e}(),l9=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=cs.ComputePipeline,p.gpuComputePipeline=null,p.descriptor=c;var g=c.program,y=g.computeStage;if(y===null)return p;var S={layout:"auto",compute:(0,w.pi)({},y)};return p.gpuComputePipeline=p.device.device.createComputePipeline(S),p.name!==void 0&&(p.gpuComputePipeline.label=p.name),p}return a.prototype.getBindGroupLayout=function(r){return this.gpuComputePipeline.getBindGroupLayout(r)},a}(ug),c9=function(e){(0,w.ZT)(a,e);function a(r){var o,u,c,p,g=r.id,y=r.device,S=r.descriptor,O=e.call(this,{id:g,device:y})||this;O.type=cs.InputLayout;var D=[];try{for(var V=(0,w.XA)(S.vertexBufferDescriptors),H=V.next();!H.done;H=V.next()){var ue=H.value,le=ue.arrayStride,we=ue.stepMode,Ne=ue.attributes;D.push({arrayStride:le,stepMode:t9(we),attributes:[]});try{for(var dt=(c=void 0,(0,w.XA)(Ne)),mt=dt.next();!mt.done;mt=dt.next()){var Lt=mt.value,Wt=Lt.shaderLocation,qt=Lt.format,ir=Lt.offset;D[D.length-1].attributes.push({shaderLocation:Wt,format:r9(qt),offset:ir})}}catch(Sr){c={error:Sr}}finally{try{mt&&!mt.done&&(p=dt.return)&&p.call(dt)}finally{if(c)throw c.error}}}}catch(Sr){o={error:Sr}}finally{try{H&&!H.done&&(u=V.return)&&u.call(V)}finally{if(o)throw o.error}}return O.indexFormat=e9(S.indexBufferFormat),O.buffers=D,O}return a}(ug),lN=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;return p.type=cs.Program,p.vertexStage=null,p.fragmentStage=null,p.computeStage=null,p.descriptor=c,c.vertex&&(p.vertexStage=p.createShaderStage(c.vertex,"vertex")),c.fragment&&(p.fragmentStage=p.createShaderStage(c.fragment,"fragment")),c.compute&&(p.computeStage=p.createShaderStage(c.compute,"compute")),p}return a.prototype.setUniformsLegacy=function(r){},a.prototype.createShaderStage=function(r,o){var u,c,p=r.glsl,g=r.wgsl,y=r.entryPoint,S=!1,O=g;if(!O)try{O=this.device.glsl_compile(p,o,S)}catch(we){throw console.error(we,p),new Error("whoops")}var D=function(we){if(!O.includes(we))return"continue";O=O.replace("var T_".concat(we,": texture_2d<f32>;"),"var T_".concat(we,": texture_depth_2d;")),O=O.replace(new RegExp("textureSample\\(T_".concat(we,"(.*)\\);$"),"gm"),function(Ne,dt){return"vec4<f32>(textureSample(T_".concat(we).concat(dt,"), 0.0, 0.0, 0.0);")})};try{for(var V=(0,w.XA)(["u_TextureFramebufferDepth"]),H=V.next();!H.done;H=V.next()){var ue=H.value;D(ue)}}catch(we){u={error:we}}finally{try{H&&!H.done&&(c=V.return)&&c.call(V)}finally{if(u)throw u.error}}var le=this.device.device.createShaderModule({code:O});return{module:le,entryPoint:y||"main"}},a}(ug),f9=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=cs.QueryPool;var g=c.elemCount,y=c.type;return p.querySet=p.device.device.createQuerySet({type:jU(y),count:g}),p.resolveBuffer=p.device.device.createBuffer({size:g*8,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),p.cpuBuffer=p.device.device.createBuffer({size:g*8,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),p.results=null,p}return a.prototype.queryResultOcclusion=function(r){return this.results===null?null:this.results[r]!==BigInt(0)},a.prototype.destroy=function(){e.prototype.destroy.call(this),this.querySet.destroy(),this.resolveBuffer.destroy(),this.cpuBuffer.destroy()},a}(ug),h9=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=e.call(this,{id:o,device:u})||this;return c.type=cs.Readback,c}return a.prototype.readTexture=function(r,o,u,c,p,g,y,S){return y===void 0&&(y=0),(0,w.mG)(this,void 0,void 0,function(){var O,D,V,H,ue,le,we,Ne;return(0,w.Jh)(this,function(dt){return O=r,D=0,V=this.getBlockInformationFromFormat(O.gpuTextureformat),H=Math.ceil(c/V.width)*V.length,ue=Math.ceil(H/256)*256,le=ue*p,we=this.device.createBuffer({usage:ou.STORAGE|ou.MAP_READ|ou.COPY_DST,hint:dv.STATIC,viewOrSize:le}),Ne=this.device.device.createCommandEncoder(),Ne.copyTextureToBuffer({texture:O.gpuTexture,mipLevel:0,origin:{x:o,y:u,z:Math.max(D,0)}},{buffer:we.gpuBuffer,offset:0,bytesPerRow:ue},{width:c,height:p,depthOrArrayLayers:1}),this.device.device.queue.submit([Ne.finish()]),[2,this.readBuffer(we,0,g.byteLength===le?g:null,y,le,O.format)]})})},a.prototype.readTextureSync=function(r,o,u,c,p,g,y,S){throw new Error("ERROR_MSG_METHOD_NOT_IMPLEMENTED")},a.prototype.readBuffer=function(r,o,u,c,p,g,y,S){var O=this;o===void 0&&(o=0),u===void 0&&(u=null),p===void 0&&(p=0),g===void 0&&(g=Xr.U8_RGB),y===void 0&&(y=!1);var D=r,V=p||D.size,H=u||D.view,ue=H&&H.constructor&&H.constructor.BYTES_PER_ELEMENT||D6(g),le=D;if(!(D.usage&ou.MAP_READ&&D.usage&ou.COPY_DST)){var we=this.device.device.createCommandEncoder();le=this.device.createBuffer({usage:ou.STORAGE|ou.MAP_READ|ou.COPY_DST,hint:dv.STATIC,viewOrSize:V}),we.copyBufferToBuffer(D.gpuBuffer,o,le.gpuBuffer,0,V),this.device.device.queue.submit([we.finish()])}return new Promise(function(Ne,dt){le.gpuBuffer.mapAsync(k5.READ,o,V).then(function(){var mt=le.gpuBuffer.getMappedRange(o,V),Lt=H;if(y)Lt===null?Lt=uN(g,V,!0,mt):Lt=uN(g,Lt.buffer,void 0,mt);else if(Lt===null)switch(ue){case 1:Lt=new Uint8Array(V),Lt.set(new Uint8Array(mt));break;case 2:Lt=O.getHalfFloatAsFloatRGBAArrayBuffer(V/2,mt);break;case 4:Lt=new Float32Array(V/4),Lt.set(new Float32Array(mt));break}else switch(ue){case 1:Lt=new Uint8Array(Lt.buffer),Lt.set(new Uint8Array(mt));break;case 2:Lt=O.getHalfFloatAsFloatRGBAArrayBuffer(V/2,mt,H);break;case 4:var Wt=H&&H.constructor||Float32Array;Lt=new Wt(Lt.buffer),Lt.set(new Wt(mt));break}le.gpuBuffer.unmap(),Ne(Lt)},function(mt){return dt(mt)})})},a.prototype.getHalfFloatAsFloatRGBAArrayBuffer=function(r,o,u){u||(u=new Float32Array(r));for(var c=new Uint16Array(o);r--;)u[r]=a9(c[r]);return u},a.prototype.getBlockInformationFromFormat=function(r){switch(r){case"r8unorm":case"r8snorm":case"r8uint":case"r8sint":return{width:1,height:1,length:1};case"r16uint":case"r16sint":case"r16float":case"rg8unorm":case"rg8snorm":case"rg8uint":case"rg8sint":return{width:1,height:1,length:2};case"r32uint":case"r32sint":case"r32float":case"rg16uint":case"rg16sint":case"rg16float":case"rgba8unorm":case"rgba8unorm-srgb":case"rgba8snorm":case"rgba8uint":case"rgba8sint":case"bgra8unorm":case"bgra8unorm-srgb":case"rgb9e5ufloat":case"rgb10a2unorm":case"rg11b10ufloat":return{width:1,height:1,length:4};case"rg32uint":case"rg32sint":case"rg32float":case"rgba16uint":case"rgba16sint":case"rgba16float":return{width:1,height:1,length:8};case"rgba32uint":case"rgba32sint":case"rgba32float":return{width:1,height:1,length:16};case"stencil8":throw new Error("No fixed size for Stencil8 format!");case"depth16unorm":return{width:1,height:1,length:2};case"depth24plus":throw new Error("No fixed size for Depth24Plus format!");case"depth24plus-stencil8":throw new Error("No fixed size for Depth24PlusStencil8 format!");case"depth32float":return{width:1,height:1,length:4};case"depth32float-stencil8":return{width:1,height:1,length:5};case"bc7-rgba-unorm":case"bc7-rgba-unorm-srgb":case"bc6h-rgb-ufloat":case"bc6h-rgb-float":case"bc2-rgba-unorm":case"bc2-rgba-unorm-srgb":case"bc3-rgba-unorm":case"bc3-rgba-unorm-srgb":case"bc5-rg-unorm":case"bc5-rg-snorm":return{width:4,height:4,length:16};case"bc4-r-unorm":case"bc4-r-snorm":case"bc1-rgba-unorm":case"bc1-rgba-unorm-srgb":return{width:4,height:4,length:8};default:return{width:1,height:1,length:4}}},a}(ug),p9=function(){function e(a){this.device=a,this.commandEncoder=null,this.gpuRenderPassEncoder=null,this.gfxColorAttachment=[],this.gfxColorAttachmentLevel=[],this.gfxColorResolveTo=[],this.gfxColorResolveToLevel=[],this.gfxDepthStencilAttachment=null,this.gfxDepthStencilResolveTo=null,this.gpuColorAttachments=[],this.gpuDepthStencilAttachment={view:null,depthLoadOp:"load",depthStoreOp:"store",stencilLoadOp:"load",stencilStoreOp:"store"},this.gpuRenderPassDescriptor={colorAttachments:this.gpuColorAttachments,depthStencilAttachment:this.gpuDepthStencilAttachment}}return e.prototype.getTextureView=function(a,r){return _o(r<a.mipLevelCount),a.mipLevelCount===1?a.gpuTextureView:a.gpuTexture.createView({baseMipLevel:r,mipLevelCount:1})},e.prototype.setRenderPassDescriptor=function(a){var r,o,u,c,p,g;this.descriptor=a,this.gpuRenderPassDescriptor.colorAttachments=this.gpuColorAttachments;var y=a.colorAttachment.length;this.gfxColorAttachment.length=y,this.gfxColorResolveTo.length=y;for(var S=0;S<a.colorAttachment.length;S++){var O=a.colorAttachment[S],D=a.colorResolveTo[S];if(O===null&&D!==null&&(O=D,D=null),this.gfxColorAttachment[S]=O,this.gfxColorResolveTo[S]=D,this.gfxColorAttachmentLevel[S]=((r=a.colorAttachmentLevel)===null||r===void 0?void 0:r[S])||0,this.gfxColorResolveToLevel[S]=((o=a.colorResolveToLevel)===null||o===void 0?void 0:o[S])||0,O!==null){this.gpuColorAttachments[S]===void 0&&(this.gpuColorAttachments[S]={});var V=this.gpuColorAttachments[S];V.view=this.getTextureView(O,((u=this.gfxColorAttachmentLevel)===null||u===void 0?void 0:u[S])||0);var H=(p=(c=a.colorClearColor)===null||c===void 0?void 0:c[S])!==null&&p!==void 0?p:"load";H==="load"?V.loadOp="load":(V.loadOp="clear",V.clearValue=H),V.storeOp=!((g=a.colorStore)===null||g===void 0)&&g[S]?"store":"discard",V.resolveTarget=void 0,D!==null&&(O.sampleCount>1?V.resolveTarget=this.getTextureView(D,this.gfxColorResolveToLevel[S]):V.storeOp="store")}else{this.gpuColorAttachments.length=S,this.gfxColorAttachment.length=S,this.gfxColorResolveTo.length=S;break}}if(this.gfxDepthStencilAttachment=a.depthStencilAttachment,this.gfxDepthStencilResolveTo=a.depthStencilResolveTo,a.depthStencilAttachment){var ue=a.depthStencilAttachment,V=this.gpuDepthStencilAttachment;V.view=ue.gpuTextureView;var le=!!(dx(ue.format)&Xi.Depth);le?(a.depthClearValue==="load"?V.depthLoadOp="load":(V.depthLoadOp="clear",V.depthClearValue=a.depthClearValue),a.depthStencilStore||this.gfxDepthStencilResolveTo!==null?V.depthStoreOp="store":V.depthStoreOp="discard"):(V.depthLoadOp=void 0,V.depthStoreOp=void 0);var we=!!(dx(ue.format)&Xi.Stencil);we?(a.stencilClearValue==="load"?V.stencilLoadOp="load":(V.stencilLoadOp="clear",V.stencilClearValue=a.stencilClearValue),a.depthStencilStore||this.gfxDepthStencilResolveTo!==null?V.stencilStoreOp="store":V.stencilStoreOp="discard"):(V.stencilLoadOp=void 0,V.stencilStoreOp=void 0),this.gpuRenderPassDescriptor.depthStencilAttachment=this.gpuDepthStencilAttachment}else this.gpuRenderPassDescriptor.depthStencilAttachment=void 0;this.gpuRenderPassDescriptor.occlusionQuerySet=fx(a.occlusionQueryPool)?void 0:HU(a.occlusionQueryPool)},e.prototype.beginRenderPass=function(a){_o(this.gpuRenderPassEncoder===null),this.setRenderPassDescriptor(a),this.gpuRenderPassEncoder=this.commandEncoder.beginRenderPass(this.gpuRenderPassDescriptor)},e.prototype.flipY=function(a,r){var o=this.device.swapChainHeight;return o-a-r},e.prototype.setViewport=function(a,r,o,u,c,p){c===void 0&&(c=0),p===void 0&&(p=1),this.gpuRenderPassEncoder.setViewport(a,this.flipY(r,u),o,u,c,p)},e.prototype.setScissorRect=function(a,r,o,u){this.gpuRenderPassEncoder.setScissorRect(a,this.flipY(r,u),o,u)},e.prototype.setPipeline=function(a){var r=a,o=i_(r.gpuRenderPipeline);this.gpuRenderPassEncoder.setPipeline(o)},e.prototype.setVertexInput=function(a,r,o){if(a!==null){var u=a;o!==null&&this.gpuRenderPassEncoder.setIndexBuffer(bx(o.buffer),i_(u.indexFormat),o.offset);for(var c=0;c<r.length;c++){var p=r[c];p!==null&&this.gpuRenderPassEncoder.setVertexBuffer(c,bx(p.buffer),p.offset)}}},e.prototype.setBindings=function(a){var r=a;this.gpuRenderPassEncoder.setBindGroup(0,r.gpuBindGroup[0]),r.gpuBindGroup[1]&&this.gpuRenderPassEncoder.setBindGroup(1,r.gpuBindGroup[1])},e.prototype.setStencilReference=function(a){this.gpuRenderPassEncoder.setStencilReference(a)},e.prototype.draw=function(a,r,o,u){this.gpuRenderPassEncoder.draw(a,r,o,u)},e.prototype.drawIndexed=function(a,r,o,u,c){this.gpuRenderPassEncoder.drawIndexed(a,r,o,u,c)},e.prototype.drawIndirect=function(a,r){this.gpuRenderPassEncoder.drawIndirect(bx(a),r)},e.prototype.drawIndexedIndirect=function(a,r){this.gpuRenderPassEncoder.drawIndexedIndirect(bx(a),r)},e.prototype.beginOcclusionQuery=function(a){this.gpuRenderPassEncoder.beginOcclusionQuery(a)},e.prototype.endOcclusionQuery=function(){this.gpuRenderPassEncoder.endOcclusionQuery()},e.prototype.pushDebugGroup=function(a){this.gpuRenderPassEncoder.pushDebugGroup(a)},e.prototype.popDebugGroup=function(){this.gpuRenderPassEncoder.popDebugGroup()},e.prototype.insertDebugMarker=function(a){this.gpuRenderPassEncoder.insertDebugMarker(a)},e.prototype.finish=function(){this.gpuRenderPassEncoder.end(),this.gpuRenderPassEncoder=null;for(var a=0;a<this.gfxColorAttachment.length;a++){var r=this.gfxColorAttachment[a],o=this.gfxColorResolveTo[a];r!==null&&o!==null&&r.sampleCount===1&&this.copyAttachment(o,this.gfxColorAttachmentLevel[a],r,this.gfxColorResolveToLevel[a])}return this.gfxDepthStencilAttachment&&this.gfxDepthStencilResolveTo&&(this.gfxDepthStencilAttachment.sampleCount>1||this.copyAttachment(this.gfxDepthStencilResolveTo,0,this.gfxDepthStencilAttachment,0)),this.commandEncoder.finish()},e.prototype.copyAttachment=function(a,r,o,u){_o(o.sampleCount===1);var c={texture:o.gpuTexture,mipLevel:u},p={texture:a.gpuTexture,mipLevel:r};_o(o.width>>>u===a.width>>>r),_o(o.height>>>u===a.height>>>r),_o(!!(o.usage&Mh.COPY_SRC)),_o(!!(a.usage&Mh.COPY_DST)),this.commandEncoder.copyTextureToTexture(c,p,[a.width,a.height,1])},e}(),d9=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;return p.type=cs.RenderPipeline,p.isCreatingAsync=!1,p.gpuRenderPipeline=null,p.descriptor=c,p.device.createRenderPipelineInternal(p,!1),p}return a.prototype.getBindGroupLayout=function(r){return this.gpuRenderPipeline.getBindGroupLayout(r)},a}(ug),v9=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p,g,y=e.call(this,{id:o,device:u})||this;y.type=cs.Sampler;var S=c.lodMinClamp,O=c.mipmapFilter===xc.NO_MIP?c.lodMinClamp:c.lodMaxClamp,D=(p=c.maxAnisotropy)!==null&&p!==void 0?p:1;return D>1&&_o(c.minFilter===$l.BILINEAR&&c.magFilter===$l.BILINEAR&&c.mipmapFilter===xc.LINEAR),y.gpuSampler=y.device.device.createSampler({addressModeU:D5(c.addressModeU),addressModeV:D5(c.addressModeV),addressModeW:D5((g=c.addressModeW)!==null&&g!==void 0?g:c.addressModeU),lodMinClamp:S,lodMaxClamp:O,minFilter:iN(c.minFilter),magFilter:iN(c.magFilter),mipmapFilter:ZU(c.mipmapFilter),compare:c.compareFunction!==void 0?V3(c.compareFunction):void 0,maxAnisotropy:D}),y}return a}(ug),H3=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=r.skipCreate,g=r.sampleCount,y=e.call(this,{id:o,device:u})||this;y.type=cs.Texture;var S=c.format,O=c.dimension,D=c.width,V=c.height,H=c.depthOrArrayLayers,ue=c.mipLevelCount,le=c.usage;return y.device.createTextureShared({format:S,dimension:O!=null?O:Mo.TEXTURE_2D,width:D,height:V,depthOrArrayLayers:H!=null?H:1,mipLevelCount:ue!=null?ue:1,usage:le,sampleCount:g!=null?g:1},y,p),y}return a.prototype.textureFromImageBitmapOrCanvas=function(r,o,u){for(var c=o[0].width,p=o[0].height,g={size:{width:c,height:p,depthOrArrayLayers:u},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT},y=r.createTexture(g),S=0;S<o.length;S++)r.queue.copyExternalImageToTexture({source:o[S]},{texture:y,origin:[0,0,S]},[c,p]);return[y,c,p]},a.prototype.isImageBitmapOrCanvases=function(r){var o=r[0];return o instanceof ImageBitmap||o instanceof HTMLCanvasElement||o instanceof OffscreenCanvas},a.prototype.isVideo=function(r){var o=r[0];return o instanceof HTMLVideoElement},a.prototype.setImageData=function(r,o){var u,c=this.device.device,p,g,y;this.isImageBitmapOrCanvases(r)?(u=(0,w.CR)(this.textureFromImageBitmapOrCanvas(c,r,this.depthOrArrayLayers),3),p=u[0],g=u[1],y=u[2]):this.isVideo(r)&&(p=c.importExternalTexture({source:r[0]})),this.width=g,this.height=y,this.gpuTexture=p,this.gpuTextureView=p.createView({dimension:zU(this.dimension)})},a.prototype.destroy=function(){e.prototype.destroy.call(this),this.gpuTexture.destroy()},a}(ug),g9=function(){function e(a,r,o,u,c){this.swapChainWidth=0,this.swapChainHeight=0,this.swapChainTextureUsage=Mh.RENDER_ATTACHMENT|Mh.COPY_DST,this._resourceUniqueId=0,this.renderPassPool=[],this.computePassPool=[],this.featureTextureCompressionBC=!1,this.platformString="WebGPU",this.glslVersion="#version 440",this.explicitBindingLocations=!0,this.separateSamplerTextures=!0,this.viewportOrigin=hx.UPPER_LEFT,this.clipSpaceNearZ=px.ZERO,this.supportsSyncPipelineCompilation=!1,this.supportMRT=!0,this.device=r,this.canvas=o,this.canvasContext=u,this.glsl_compile=c,this.fallbackTexture2D=this.createFallbackTexture(Mo.TEXTURE_2D,ol.Float),this.setResourceName(this.fallbackTexture2D,"Fallback Texture2D"),this.fallbackTexture2DDepth=this.createFallbackTexture(Mo.TEXTURE_2D,ol.Depth),this.setResourceName(this.fallbackTexture2DDepth,"Fallback Depth Texture2D"),this.fallbackTexture2DArray=this.createFallbackTexture(Mo.TEXTURE_2D_ARRAY,ol.Float),this.setResourceName(this.fallbackTexture2DArray,"Fallback Texture2DArray"),this.fallbackTexture3D=this.createFallbackTexture(Mo.TEXTURE_3D,ol.Float),this.setResourceName(this.fallbackTexture3D,"Fallback Texture3D"),this.fallbackTextureCube=this.createFallbackTexture(Mo.TEXTURE_CUBE_MAP,ol.Float),this.setResourceName(this.fallbackTextureCube,"Fallback TextureCube"),this.fallbackSamplerFiltering=this.createSampler({addressModeU:Ah.REPEAT,addressModeV:Ah.REPEAT,minFilter:$l.POINT,magFilter:$l.POINT,mipmapFilter:xc.NEAREST}),this.setResourceName(this.fallbackSamplerFiltering,"Fallback Sampler Filtering"),this.fallbackSamplerComparison=this.createSampler({addressModeU:Ah.REPEAT,addressModeV:Ah.REPEAT,minFilter:$l.POINT,magFilter:$l.POINT,mipmapFilter:xc.NEAREST,compareFunction:as.ALWAYS}),this.setResourceName(this.fallbackSamplerComparison,"Fallback Sampler Comparison Filtering"),this.device.features&&(this.featureTextureCompressionBC=this.device.features.has("texture-compression-bc")),this.device.onuncapturederror=function(p){console.error(p.error)},this.swapChainFormat=navigator.gpu.getPreferredCanvasFormat(),this.canvasContext.configure({device:this.device,format:this.swapChainFormat,usage:this.swapChainTextureUsage,alphaMode:"premultiplied"})}return e.prototype.destroy=function(){},e.prototype.configureSwapChain=function(a,r){this.swapChainWidth===a&&this.swapChainHeight===r||(this.swapChainWidth=a,this.swapChainHeight=r)},e.prototype.getOnscreenTexture=function(){var a=this.canvasContext.getCurrentTexture(),r=a.createView(),o=new H3({id:0,device:this,descriptor:{format:Xr.U8_RGBA_RT,width:this.swapChainWidth,height:this.swapChainHeight,depthOrArrayLayers:0,dimension:Mo.TEXTURE_2D,mipLevelCount:1,usage:this.swapChainTextureUsage},skipCreate:!0});return o.depthOrArrayLayers=1,o.sampleCount=1,o.gpuTexture=a,o.gpuTextureView=r,o.name="Onscreen",this.setResourceName(o,"Onscreen Texture"),o},e.prototype.getDevice=function(){return this},e.prototype.getCanvas=function(){return this.canvas},e.prototype.beginFrame=function(){},e.prototype.endFrame=function(){},e.prototype.getNextUniqueId=function(){return++this._resourceUniqueId},e.prototype.createBuffer=function(a){return new s9({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createTexture=function(a){return new H3({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createSampler=function(a){return new v9({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createRenderTarget=function(a){var r=new H3({id:this.getNextUniqueId(),device:this,descriptor:(0,w.pi)((0,w.pi)({},a),{dimension:Mo.TEXTURE_2D,mipLevelCount:1,depthOrArrayLayers:1,usage:Yp.RENDER_TARGET}),sampleCount:a.sampleCount});return r.depthOrArrayLayers=1,r.type=cs.RenderTarget,r},e.prototype.createRenderTargetFromTexture=function(a){var r=a,o=r.format,u=r.width,c=r.height,p=r.depthOrArrayLayers,g=r.sampleCount,y=r.mipLevelCount,S=r.gpuTexture,O=r.gpuTextureView,D=r.usage;_o(!!(D&Mh.RENDER_ATTACHMENT));var V=new H3({id:this.getNextUniqueId(),device:this,descriptor:{format:o,width:u,height:c,depthOrArrayLayers:p,dimension:Mo.TEXTURE_2D,mipLevelCount:y,usage:D},skipCreate:!0});return V.depthOrArrayLayers=p,V.sampleCount=g,V.gpuTexture=S,V.gpuTextureView=O,V},e.prototype.createProgram=function(a){var r,o;return!((r=a.vertex)===null||r===void 0)&&r.glsl&&(a.vertex.glsl=A0(this.queryVendorInfo(),"vert",a.vertex.glsl)),!((o=a.fragment)===null||o===void 0)&&o.glsl&&(a.fragment.glsl=A0(this.queryVendorInfo(),"frag",a.fragment.glsl)),new lN({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createProgramSimple=function(a){return new lN({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createTextureShared=function(a,r,o){var u={width:a.width,height:a.height,depthOrArrayLayers:a.depthOrArrayLayers},c=a.mipLevelCount,p=F5(a.format),g=NU(a.dimension),y=BU(a.usage);if(r.gpuTextureformat=p,r.dimension=a.dimension,r.format=a.format,r.width=a.width,r.height=a.height,r.depthOrArrayLayers=a.depthOrArrayLayers,r.mipLevelCount=c,r.usage=y,r.sampleCount=a.sampleCount,!o){var S=this.device.createTexture({size:u,mipLevelCount:c,format:p,dimension:g,sampleCount:a.sampleCount,usage:y}),O=S.createView();r.gpuTexture=S,r.gpuTextureView=O}},e.prototype.getFallbackSampler=function(a){var r=a.formatKind;return r===ol.Depth&&a.comparison?this.fallbackSamplerComparison:this.fallbackSamplerFiltering},e.prototype.getFallbackTexture=function(a){var r=a.dimension,o=a.formatKind;if(r===Mo.TEXTURE_2D)return o===ol.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(r===Mo.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(r===Mo.TEXTURE_3D)return this.fallbackTexture3D;if(r===Mo.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},e.prototype.createFallbackTexture=function(a,r){var o=a===Mo.TEXTURE_CUBE_MAP?6:1,u=r===ol.Float?Xr.U8_RGBA_NORM:Xr.D24;return this.createTexture({dimension:a,format:u,usage:Yp.SAMPLED,width:1,height:1,depthOrArrayLayers:o,mipLevelCount:1})},e.prototype.createBindings=function(a){return new o9({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createInputLayout=function(a){return new c9({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createComputePipeline=function(a){return new l9({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createRenderPipeline=function(a){return new d9({id:this.getNextUniqueId(),device:this,descriptor:(0,w.pi)({},a)})},e.prototype.createQueryPool=function(a,r){return new f9({id:this.getNextUniqueId(),device:this,descriptor:{type:a,elemCount:r}})},e.prototype.createRenderPipelineInternal=function(a,r){var o;if(a.gpuRenderPipeline===null){var u=a.descriptor,c=u.program,p=c.vertexStage,g=c.fragmentStage;if(!(p===null||g===null)){var y=u.megaStateDescriptor||{},S=y.stencilBack,O=y.stencilFront,D=(0,w._T)(y,["stencilBack","stencilFront"]),V=mx(a_);u.megaStateDescriptor=(0,w.pi)((0,w.pi)((0,w.pi)({},V),{stencilBack:(0,w.pi)((0,w.pi)({},V.stencilBack),S),stencilFront:(0,w.pi)((0,w.pi)({},V.stencilFront),O)}),D);var H=u.megaStateDescriptor.attachmentsState[0];u.colorAttachmentFormats.forEach(function(Lt,Wt){u.megaStateDescriptor.attachmentsState[Wt]||(u.megaStateDescriptor.attachmentsState[Wt]=Z6(void 0,H))});var ue=$U((o=u.topology)!==null&&o!==void 0?o:Yl.TRIANGLES,u.megaStateDescriptor),le=QU(u.colorAttachmentFormats,u.megaStateDescriptor),we=JU(u.depthStencilAttachmentFormat,u.megaStateDescriptor),Ne=void 0;u.inputLayout!==null&&(Ne=u.inputLayout.buffers);var dt=u.sampleCount,mt={layout:"auto",vertex:(0,w.pi)((0,w.pi)({},p),{buffers:Ne}),primitive:ue,depthStencil:we,multisample:{count:dt},fragment:(0,w.pi)((0,w.pi)({},g),{targets:le})};a.gpuRenderPipeline=this.device.createRenderPipeline(mt)}}},e.prototype.createReadback=function(){return new h9({id:this.getNextUniqueId(),device:this})},e.prototype.createRenderPass=function(a){var r=this.renderPassPool.pop();return r===void 0&&(r=new p9(this)),r.commandEncoder=this.device.createCommandEncoder(),r.beginRenderPass(a),r},e.prototype.createComputePass=function(){var a=this.computePassPool.pop();return a===void 0&&(a=new u9),a.commandEncoder=this.device.createCommandEncoder(),a.beginComputePass(),a},e.prototype.submitPass=function(a){var r=this.device.queue,o=a,u=o.finish();r.submit([u]),o.commandEncoder=null},e.prototype.copySubTexture2D=function(a,r,o,u,c,p){var g=this.device.createCommandEncoder(),y=a,S=u,O={texture:S.gpuTexture,origin:[c,p,0]},D={texture:y.gpuTexture,origin:[r,o,0]};_o(!!(S.usage&Mh.COPY_SRC)),_o(!!(y.usage&Mh.COPY_DST)),g.copyTextureToTexture(O,D,[S.width,S.height,1]),this.device.queue.submit([g.finish()])},e.prototype.queryLimits=function(){return{uniformBufferMaxPageWordSize:this.device.limits.maxUniformBufferBindingSize>>>2,uniformBufferWordAlignment:this.device.limits.minUniformBufferOffsetAlignment>>>2,supportedSampleCounts:[1],occlusionQueriesRecommended:!0,computeShadersSupported:!0}},e.prototype.queryTextureFormatSupported=function(a,r,o){if(n9(a)){if(!this.featureTextureCompressionBC)return!1;var u=i9(a);return r%u!==0||o%u!==0?!1:this.featureTextureCompressionBC}switch(a){case Xr.U16_RGBA_NORM:return!1;case Xr.F32_RGBA:return!1}return!0},e.prototype.queryPlatformAvailable=function(){return!0},e.prototype.queryVendorInfo=function(){return this},e.prototype.queryRenderPass=function(a){var r=a;return r.descriptor},e.prototype.queryRenderTarget=function(a){var r=a;return r},e.prototype.setResourceName=function(a,r){if(a.name=r,a.type===cs.Buffer){var o=a;o.gpuBuffer.label=r}else if(a.type===cs.Texture){var o=a;o.gpuTexture.label=r,o.gpuTextureView.label=r}else if(a.type===cs.RenderTarget){var o=a;o.gpuTexture.label=r,o.gpuTextureView.label=r}else if(a.type===cs.Sampler){var o=a;o.gpuSampler.label=r}else if(a.type===cs.RenderPipeline){var o=a;o.gpuRenderPipeline!==null&&(o.gpuRenderPipeline.label=r)}},e.prototype.setResourceLeakCheck=function(a,r){},e.prototype.checkForLeaks=function(){},e.prototype.programPatched=function(a){},e.prototype.pipelineQueryReady=function(a){var r=a;return r.gpuRenderPipeline!==null},e.prototype.pipelineForceReady=function(a){var r=a;this.createRenderPipelineInternal(r,!1)},e}(),m9=function(){function e(a){this.pluginOptions=a}return e.prototype.createSwapChain=function(a){return(0,w.mG)(this,void 0,void 0,function(){var r,o,u,c,p,g,y,S;return(0,w.Jh)(this,function(O){switch(O.label){case 0:if(globalThis.navigator.gpu===void 0)return[2,null];r=null,O.label=1;case 1:return O.trys.push([1,3,,4]),o=this.pluginOptions.xrCompatible,[4,globalThis.navigator.gpu.requestAdapter({xrCompatible:o})];case 2:return r=O.sent(),[3,4];case 3:return u=O.sent(),console.log(u),[3,4];case 4:return r===null?[2,null]:(c=["depth32float-stencil8","texture-compression-bc"],p=c.filter(function(D){return r.features.has(D)}),[4,r.requestDevice({requiredFeatures:p})]);case 5:if(g=O.sent(),g&&(y=this.pluginOptions.onContextLost,g.lost.then(function(){y&&y()})),g===null)return[2,null];if(S=a.getContext("webgpu"),!S)return[2,null];O.label=6;case 6:return O.trys.push([6,8,,9]),[4,nN(this.pluginOptions.shaderCompilerPath)];case 7:return O.sent(),[3,9];case 8:return O.sent(),[3,9];case 9:return[2,new g9(r,g,a,S,kU)]}})})},e}(),y9=wa.isPlainObject,_9=wa.isTypedArray,x9=function(){function e(a,r){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"destroyed",!1),(0,Fe.Z)(this,"uniforms",{}),this.reGl=a;var o=r.vs,u=r.fs,c=r.attributes,p=r.uniforms,g=r.primitive,y=r.count,S=r.elements,O=r.depth,D=r.cull,V=r.instances,H={platformString:"WebGL1",glslVersion:"#version 100",explicitBindingLocations:!1,separateSamplerTextures:!1,viewportOrigin:hx.LOWER_LEFT,clipSpaceNearZ:px.NEGATIVE_ONE,supportMRT:!1},ue={};this.options=r,p&&(this.uniforms=this.extractUniforms(p),Object.keys(p).forEach(function(Ne){ue[Ne]=a.prop(Ne)}));var le={};Object.keys(c).forEach(function(Ne){le[Ne]=c[Ne].get()});var we={attributes:le,frag:N_(A0(H,"frag",u,null,!1)),uniforms:ue,vert:N_(A0(H,"vert",o,null,!1)),colorMask:a.prop("colorMask"),lineWidth:1,blend:{enable:a.prop("blend.enable"),func:a.prop("blend.func"),equation:a.prop("blend.equation"),color:a.prop("blend.color")},stencil:{enable:a.prop("stencil.enable"),mask:a.prop("stencil.mask"),func:a.prop("stencil.func"),opFront:a.prop("stencil.opFront"),opBack:a.prop("stencil.opBack")},primitive:cz[g===void 0?gt.TRIANGLES:g]};V&&(we.instances=V),y?we.count=y:S&&(we.elements=S.get()),this.initDepthDrawParams({depth:O},we),this.initCullDrawParams({cull:D},we),this.drawCommand=a(we),this.drawParams=we}return(0,at.Z)(e,[{key:"updateAttributesAndElements",value:function(r,o){var u={};Object.keys(r).forEach(function(c){u[c]=r[c].get()}),this.drawParams.attributes=u,this.drawParams.elements=o.get(),this.drawCommand=this.reGl(this.drawParams)}},{key:"updateAttributes",value:function(r){var o={};Object.keys(r).forEach(function(u){o[u]=r[u].get()}),this.drawParams.attributes=o,this.drawCommand=this.reGl(this.drawParams)}},{key:"addUniforms",value:function(r){this.uniforms=(0,te.Z)((0,te.Z)({},this.uniforms),this.extractUniforms(r))}},{key:"draw",value:function(r,o){if(!(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)){var u=(0,te.Z)((0,te.Z)({},this.uniforms),this.extractUniforms(r.uniforms||{})),c={};Object.keys(u).forEach(function(p){var g=(0,_f.Z)(u[p]);g==="boolean"||g==="number"||Array.isArray(u[p])||u[p].BYTES_PER_ELEMENT?c[p]=u[p]:c[p]=u[p].get()}),c.blend=o?this.getBlendDrawParams({blend:{enable:!1}}):this.getBlendDrawParams(r),c.stencil=this.getStencilDrawParams(r),c.colorMask=this.getColorMaskDrawParams(r,o),this.drawCommand(c)}}},{key:"destroy",value:function(){var r;(r=this.drawParams)===null||r===void 0||(r=r.elements)===null||r===void 0||r.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(function(o){o==null||o.destroy()}),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(r,o){var u=r.depth;u&&(o.depth={enable:u.enable===void 0?!0:!!u.enable,mask:u.mask===void 0?!0:!!u.mask,func:dz[u.func||gt.LESS],range:u.range||[0,1]})}},{key:"getBlendDrawParams",value:function(r){var o=r.blend,u=o||{},c=u.enable,p=u.func,g=u.equation,y=u.color,S=y===void 0?[0,0,0,0]:y;return{enable:!!c,func:{srcRGB:T3[p&&p.srcRGB||gt.SRC_ALPHA],srcAlpha:T3[p&&p.srcAlpha||gt.SRC_ALPHA],dstRGB:T3[p&&p.dstRGB||gt.ONE_MINUS_SRC_ALPHA],dstAlpha:T3[p&&p.dstAlpha||gt.ONE_MINUS_SRC_ALPHA]},equation:{rgb:P6[g&&g.rgb||gt.FUNC_ADD],alpha:P6[g&&g.alpha||gt.FUNC_ADD]},color:S}}},{key:"getStencilDrawParams",value:function(r){var o=r.stencil,u=o||{},c=u.enable,p=u.mask,g=p===void 0?-1:p,y=u.func,S=y===void 0?{cmp:gt.ALWAYS,ref:0,mask:-1}:y,O=u.opFront,D=O===void 0?{fail:gt.KEEP,zfail:gt.KEEP,zpass:gt.KEEP}:O,V=u.opBack,H=V===void 0?{fail:gt.KEEP,zfail:gt.KEEP,zpass:gt.KEEP}:V;return{enable:!!c,mask:g,func:(0,te.Z)((0,te.Z)({},S),{},{cmp:vz[S.cmp]}),opFront:{fail:lx[D.fail],zfail:lx[D.zfail],zpass:lx[D.zpass]},opBack:{fail:lx[H.fail],zfail:lx[H.zfail],zpass:lx[H.zpass]}}}},{key:"getColorMaskDrawParams",value:function(r,o){var u=r.stencil,c=u!=null&&u.enable&&u.opFront&&!o?[!1,!1,!1,!1]:[!0,!0,!0,!0];return c}},{key:"initCullDrawParams",value:function(r,o){var u=r.cull;if(u){var c=u.enable,p=u.face,g=p===void 0?gt.BACK:p;o.cull={enable:!!c,face:gz[g]}}}},{key:"extractUniforms",value:function(r){var o=this,u={};return Object.keys(r).forEach(function(c){o.extractUniformsRecursively(c,r[c],u,"")}),u}},{key:"extractUniformsRecursively",value:function(r,o,u,c){var p=this;if(o===null||typeof o=="number"||typeof o=="boolean"||Array.isArray(o)&&typeof o[0]=="number"||_9(o)||o===""||"resize"in o){u["".concat(c&&c+".").concat(r)]=o;return}y9(o)&&Object.keys(o).forEach(function(g){p.extractUniformsRecursively(g,o[g],u,"".concat(c&&c+".").concat(r))}),Array.isArray(o)&&o.forEach(function(g,y){Object.keys(g).forEach(function(S){p.extractUniformsRecursively(S,g[S],u,"".concat(c&&c+".").concat(r,"[").concat(y,"]"))})})}}]),e}(),b9=function(){function e(a,r){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"isDestroy",!1);var o=r.data,u=r.type,c=u===void 0?gt.UNSIGNED_BYTE:u,p=r.width,g=r.height,y=r.flipY,S=y===void 0?!1:y,O=r.format,D=O===void 0?gt.RGBA:O,V=r.mipmap,H=V===void 0?!1:V,ue=r.wrapS,le=ue===void 0?gt.CLAMP_TO_EDGE:ue,we=r.wrapT,Ne=we===void 0?gt.CLAMP_TO_EDGE:we,dt=r.aniso,mt=dt===void 0?0:dt,Lt=r.alignment,Wt=Lt===void 0?1:Lt,qt=r.premultiplyAlpha,ir=qt===void 0?!1:qt,Sr=r.mag,Br=Sr===void 0?gt.NEAREST:Sr,Jr=r.min,en=Jr===void 0?gt.NEAREST:Jr,Kn=r.colorSpace,si=Kn===void 0?gt.BROWSER_DEFAULT_WEBGL:Kn,Pi=r.x,so=Pi===void 0?0:Pi,bs=r.y,Ss=bs===void 0?0:bs,Ru=r.copy,Iu=Ru===void 0?!1:Ru;this.width=p,this.height=g;var eh={width:p,height:g,type:C5[c],format:fz[D],wrapS:I6[le],wrapT:I6[Ne],mag:R6[Br],min:R6[en],alignment:Wt,flipY:S,colorSpace:pz[si],premultiplyAlpha:ir,aniso:mt,x:so,y:Ss,copy:Iu};o&&(eh.data=o),typeof H=="number"?eh.mipmap=hz[H]:typeof H=="boolean"&&(eh.mipmap=H),this.texture=a.texture(eh)}return(0,at.Z)(e,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.texture(r)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(r){var o=r.width,u=r.height;this.texture.resize(o,u),this.width=o,this.height=u}},{key:"getSize",value:function(){return[this.width,this.height]}},{key:"destroy",value:function(){if(!this.isDestroy){var r;(r=this.texture)===null||r===void 0||r.destroy()}this.isDestroy=!0}}]),e}(),cN,fN,S9=(cN=(0,Tn.b2)(),cN(fN=function(){function e(){var a=this;(0,Rt.Z)(this,e),(0,Fe.Z)(this,"uniformBuffers",[]),(0,Fe.Z)(this,"createModel",function(r){return new x9(a.gl,r)}),(0,Fe.Z)(this,"createAttribute",function(r){return new lz(a.gl,r)}),(0,Fe.Z)(this,"createBuffer",function(r){return new mz(a.gl,r)}),(0,Fe.Z)(this,"createElements",function(r){return new yz(a.gl,r)}),(0,Fe.Z)(this,"createTexture2D",function(r){return new b9(a.gl,r)}),(0,Fe.Z)(this,"createFramebuffer",function(r){return new _z(a.gl,r)}),(0,Fe.Z)(this,"useFramebuffer",function(r,o){a.gl({framebuffer:r?r.get():null})(o)}),(0,Fe.Z)(this,"clear",function(r){var o,u=r.color,c=r.depth,p=r.stencil,g=r.framebuffer,y=g===void 0?null:g,S={color:u,depth:c,stencil:p};S.framebuffer=y===null?y:y.get(),(o=a.gl)===null||o===void 0||o.clear(S)}),(0,Fe.Z)(this,"viewport",function(r){var o=r.x,u=r.y,c=r.width,p=r.height;a.gl._gl.viewport(o,u,c,p),a.width=c,a.height=p,a.gl._refresh()}),(0,Fe.Z)(this,"readPixels",function(r){var o=r.framebuffer,u=r.x,c=r.y,p=r.width,g=r.height,y={x:u,y:c,width:p,height:g};return o&&(y.framebuffer=o.get()),a.gl.read(y)}),(0,Fe.Z)(this,"getViewportSize",function(){return{width:a.gl._gl.drawingBufferWidth,height:a.gl._gl.drawingBufferHeight}}),(0,Fe.Z)(this,"getContainer",function(){var r;return(r=a.canvas)===null||r===void 0?void 0:r.parentElement}),(0,Fe.Z)(this,"getCanvas",function(){return a.canvas}),(0,Fe.Z)(this,"getGLContext",function(){return a.gl._gl}),(0,Fe.Z)(this,"destroy",function(){var r;a.canvas=null,(r=a.gl)===null||r===void 0||(r=r._gl)===null||r===void 0||(r=r.getExtension("WEBGL_lose_context"))===null||r===void 0||r.loseContext(),a.gl.destroy(),a.gl=null})}return(0,at.Z)(e,[{key:"init",value:function(){var a=(0,fn.Z)($t().mark(function o(u,c,p){var g=this;return $t().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(this.canvas=u,!p){S.next=5;break}this.gl=p,S.next=8;break;case 5:return S.next=7,new Promise(function(O,D){uz()({canvas:g.canvas,attributes:{alpha:!0,antialias:c.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:c.preserveDrawingBuffer,stencil:c.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture","WEBGL_lose_context"],profile:!0,onDone:function(H,ue){(H||!ue)&&D(H),O(ue)}})});case 7:this.gl=S.sent;case 8:this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")};case 9:case"end":return S.stop()}},o,this)}));function r(o,u,c){return a.apply(this,arguments)}return r}()},{key:"getPointSizeRange",value:function(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(r){return!!this.getGLContext().getExtension(r)}},{key:"setState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var r=this.getGLContext();r.disable(r.CULL_FACE)}},{key:"setDirty",value:function(r){this.isDirty=r}},{key:"getDirty",value:function(){return this.isDirty}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),e}())||fN),E9=function(){function e(a,r){(0,Rt.Z)(this,e);var o=r.buffer,u=r.offset,c=r.stride,p=r.normalized,g=r.size,y=r.divisor,S=r.shaderLocation;this.buffer=o,this.attribute={shaderLocation:S,buffer:o.get(),offset:u||0,stride:c||0,normalized:p||!1,divisor:y||0},g&&(this.attribute.size=g)}return(0,at.Z)(e,[{key:"get",value:function(){return this.buffer}},{key:"updateBuffer",value:function(r){this.buffer.subData(r)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),M0,cm,Ex,XS,$S,lg,j3,o_,Mf,W3=(M0={},(0,Fe.Z)(M0,gt.FLOAT,Float32Array),(0,Fe.Z)(M0,gt.UNSIGNED_BYTE,Uint8Array),(0,Fe.Z)(M0,gt.SHORT,Int16Array),(0,Fe.Z)(M0,gt.UNSIGNED_SHORT,Uint16Array),(0,Fe.Z)(M0,gt.INT,Int32Array),(0,Fe.Z)(M0,gt.UNSIGNED_INT,Uint32Array),M0),w9=(cm={},(0,Fe.Z)(cm,gt.POINTS,Yl.POINTS),(0,Fe.Z)(cm,gt.LINES,Yl.LINES),(0,Fe.Z)(cm,gt.LINE_LOOP,Yl.LINES),(0,Fe.Z)(cm,gt.LINE_STRIP,Yl.LINE_STRIP),(0,Fe.Z)(cm,gt.TRIANGLES,Yl.TRIANGLES),(0,Fe.Z)(cm,gt.TRIANGLE_FAN,Yl.TRIANGLES),(0,Fe.Z)(cm,gt.TRIANGLE_STRIP,Yl.TRIANGLE_STRIP),cm),C9=(Ex={},(0,Fe.Z)(Ex,1,Xr.F32_R),(0,Fe.Z)(Ex,2,Xr.F32_RG),(0,Fe.Z)(Ex,3,Xr.F32_RGB),(0,Fe.Z)(Ex,4,Xr.F32_RGBA),Ex),A9=(XS={},(0,Fe.Z)(XS,gt.STATIC_DRAW,dv.STATIC),(0,Fe.Z)(XS,gt.DYNAMIC_DRAW,dv.DYNAMIC),(0,Fe.Z)(XS,gt.STREAM_DRAW,dv.DYNAMIC),XS),hN=($S={},(0,Fe.Z)($S,gt.REPEAT,Ah.REPEAT),(0,Fe.Z)($S,gt.CLAMP_TO_EDGE,Ah.CLAMP_TO_EDGE),(0,Fe.Z)($S,gt.MIRRORED_REPEAT,Ah.MIRRORED_REPEAT),$S),T9=(lg={},(0,Fe.Z)(lg,gt.NEVER,as.NEVER),(0,Fe.Z)(lg,gt.ALWAYS,as.ALWAYS),(0,Fe.Z)(lg,gt.LESS,as.LESS),(0,Fe.Z)(lg,gt.LEQUAL,as.LEQUAL),(0,Fe.Z)(lg,gt.GREATER,as.GREATER),(0,Fe.Z)(lg,gt.GEQUAL,as.GEQUAL),(0,Fe.Z)(lg,gt.EQUAL,as.EQUAL),(0,Fe.Z)(lg,gt.NOTEQUAL,as.NOTEQUAL),lg),M9=(j3={},(0,Fe.Z)(j3,gt.FRONT,sp.FRONT),(0,Fe.Z)(j3,gt.BACK,sp.BACK),j3),pN=(o_={},(0,Fe.Z)(o_,gt.FUNC_ADD,Af.ADD),(0,Fe.Z)(o_,gt.MIN_EXT,Af.MIN),(0,Fe.Z)(o_,gt.MAX_EXT,Af.MAX),(0,Fe.Z)(o_,gt.FUNC_SUBTRACT,Af.SUBSTRACT),(0,Fe.Z)(o_,gt.FUNC_REVERSE_SUBTRACT,Af.REVERSE_SUBSTRACT),o_),G3=(Mf={},(0,Fe.Z)(Mf,gt.ZERO,Yo.ZERO),(0,Fe.Z)(Mf,gt.ONE,Yo.ONE),(0,Fe.Z)(Mf,gt.SRC_COLOR,Yo.SRC),(0,Fe.Z)(Mf,gt.ONE_MINUS_SRC_COLOR,Yo.ONE_MINUS_SRC),(0,Fe.Z)(Mf,gt.SRC_ALPHA,Yo.SRC_ALPHA),(0,Fe.Z)(Mf,gt.ONE_MINUS_SRC_ALPHA,Yo.ONE_MINUS_SRC_ALPHA),(0,Fe.Z)(Mf,gt.DST_COLOR,Yo.DST),(0,Fe.Z)(Mf,gt.ONE_MINUS_DST_COLOR,Yo.ONE_MINUS_DST),(0,Fe.Z)(Mf,gt.DST_ALPHA,Yo.DST_ALPHA),(0,Fe.Z)(Mf,gt.ONE_MINUS_DST_ALPHA,Yo.ONE_MINUS_DST_ALPHA),(0,Fe.Z)(Mf,gt.CONSTANT_COLOR,Yo.CONST),(0,Fe.Z)(Mf,gt.ONE_MINUS_CONSTANT_COLOR,Yo.ONE_MINUS_CONSTANT),(0,Fe.Z)(Mf,gt.CONSTANT_ALPHA,Yo.CONST),(0,Fe.Z)(Mf,gt.ONE_MINUS_CONSTANT_ALPHA,Yo.ONE_MINUS_CONSTANT),(0,Fe.Z)(Mf,gt.SRC_ALPHA_SATURATE,Yo.SRC_ALPHA_SATURATE),Mf),R9={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function X3(e){return Object.prototype.toString.call(e)in R9}var I9=function(){function e(a,r){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"isDestroyed",!1);var o=r.data,u=r.usage,c=r.type,p=r.isUBO,g;X3(o)?g=o:g=new W3[this.type||gt.FLOAT](o),this.type=c,this.size=g.byteLength,this.buffer=a.createBuffer({viewOrSize:g,usage:p?ou.UNIFORM:ou.VERTEX,hint:A9[u||gt.STATIC_DRAW]})}return(0,at.Z)(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}},{key:"subData",value:function(r){var o=r.data,u=r.offset,c;X3(o)?c=o:c=new W3[this.type||gt.FLOAT](o),this.buffer.setSubData(u,new Uint8Array(c.buffer))}}]),e}(),P9=function(){function e(a,r){(0,Rt.Z)(this,e);var o=r.data,u=r.type,c=r.count,p=c===void 0?0:c,g;X3(o)?g=o:g=new W3[this.type||gt.UNSIGNED_INT](o),this.type=u,this.count=p,this.indexBuffer=a.createBuffer({viewOrSize:g,usage:ou.INDEX})}return(0,at.Z)(e,[{key:"get",value:function(){return this.indexBuffer}},{key:"subData",value:function(r){var o=r.data,u;X3(o)?u=o:u=new W3[this.type||gt.UNSIGNED_INT](o),this.indexBuffer.setSubData(0,new Uint8Array(u.buffer))}},{key:"destroy",value:function(){this.indexBuffer.destroy()}}]),e}();function O9(e){return!1}var k9=function(){function e(a,r){(0,Rt.Z)(this,e),(0,Fe.Z)(this,"isDestroy",!1);var o=r.data,u=r.type,c=u===void 0?gt.UNSIGNED_BYTE:u,p=r.width,g=r.height,y=r.flipY,S=y===void 0?!1:y,O=r.format,D=O===void 0?gt.RGBA:O,V=r.wrapS,H=V===void 0?gt.CLAMP_TO_EDGE:V,ue=r.wrapT,le=ue===void 0?gt.CLAMP_TO_EDGE:ue,we=r.alignment,Ne=we===void 0?1:we;this.width=p,this.height=g;var dt=Xr.U8_RGBA_RT;if(c===gt.UNSIGNED_BYTE&&D===gt.RGBA)dt=Xr.U8_RGBA_RT;else if(D===gt.LUMINANCE&&c===gt.FLOAT)dt=Xr.F32_LUMINANCE;else if(D===gt.LUMINANCE&&c===gt.UNSIGNED_BYTE)dt=Xr.U8_LUMINANCE;else throw new Error("create texture error, type: ".concat(c,", format: ").concat(D));this.texture=a.createTexture({format:dt,width:p,height:g,usage:Yp.SAMPLED,pixelStore:{unpackFlipY:S,packAlignment:Ne}}),o&&this.texture.setImageData([o]),this.sampler=a.createSampler({addressModeU:hN[H],addressModeV:hN[le],minFilter:$l.POINT,magFilter:$l.BILINEAR,mipmapFilter:xc.NO_MIP,lodMinClamp:0,lodMaxClamp:0})}return(0,at.Z)(e,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(r){var o=r.data;this.texture.setImageData([o])}},{key:"bind",value:function(){}},{key:"resize",value:function(r){var o=r.width,u=r.height;this.width=o,this.height=u}},{key:"getSize",value:function(){return[this.width,this.height]}},{key:"destroy",value:function(){if(!this.isDestroy){var r;(r=this.texture)===null||r===void 0||r.destroy()}this.isDestroy=!0}}]),e}(),F9=function(){function e(a,r){(0,Rt.Z)(this,e),this.device=a;var o=r.width,u=r.height,c=r.color;O9(c)?(this.renderTarget=a.createRenderTargetFromTexture(c.get()),this.width=c.width,this.height=c.height):o&&u&&(this.renderTarget=a.createRenderTarget({format:Xr.U8_RGBA_RT,width:o,height:u}),this.width=o,this.height=u)}return(0,at.Z)(e,[{key:"get",value:function(){return this.renderTarget}},{key:"destroy",value:function(){this.renderTarget.destroy()}},{key:"resize",value:function(r){var o=r.width,u=r.height;(this.width!==o||this.height!==u)&&(this.renderTarget&&this.renderTarget.destroy(),this.renderTarget=this.device.createRenderTarget({format:Xr.U8_RGBA_RT,width:o,height:u}),this.width=o,this.height=u)}}]),e}(),D9=wa.isPlainObject,L9=wa.isTypedArray,B9=function(){function e(a,r){var o=this;(0,Rt.Z)(this,e),(0,Fe.Z)(this,"destroyed",!1),(0,Fe.Z)(this,"uniforms",{}),(0,Fe.Z)(this,"vertexBuffers",[]),this.device=a,this.options=r;var u=r.vs,c=r.fs,p=r.attributes,g=r.uniforms,y=r.count,S=r.elements;this.options=r;var O=a.createProgram({vertex:{glsl:u},fragment:{glsl:c}});this.program=O,g&&(this.uniforms=this.extractUniforms(g));var D=[],V=0;Object.keys(p).forEach(function(ue){var le=p[ue],we=le.get();o.vertexBuffers.push(we.get());var Ne=le.attribute,dt=Ne.offset,mt=dt===void 0?0:dt,Lt=Ne.stride,Wt=Lt===void 0?0:Lt,qt=Ne.size,ir=qt===void 0?1:qt,Sr=Ne.divisor,Br=Sr===void 0?0:Sr,Jr=Ne.shaderLocation,en=Jr===void 0?0:Jr;D.push({arrayStride:Wt||ir*4,stepMode:n_.VERTEX,attributes:[{format:C9[ir],shaderLocation:en,offset:mt,divisor:Br}]}),V=we.size/ir}),y||(this.options.count=V),S&&(this.indexBuffer=S.get());var H=a.createInputLayout({vertexBufferDescriptors:D,indexBufferFormat:S?Xr.U32_R:null,program:O});this.inputLayout=H,this.pipeline=this.createPipeline(r)}return(0,at.Z)(e,[{key:"createPipeline",value:function(r){var o=r.primitive,u=o===void 0?gt.TRIANGLES:o,c=r.depth,p=r.cull,g=r.blend,y=this.initDepthDrawParams({depth:c}),S=!!(y&&y.enable),O=this.initCullDrawParams({cull:p}),D=!!(O&&O.enable),V=this.getBlendDrawParams({blend:g}),H=!!(V&&V.enable);return this.device.createRenderPipeline({inputLayout:this.inputLayout,program:this.program,topology:w9[u],colorAttachmentFormats:[Xr.U8_RGBA_RT],depthStencilAttachmentFormat:Xr.D24_S8,megaStateDescriptor:{attachmentsState:[{channelWriteMask:Tf.ALL,rgbBlendState:{blendMode:H&&V.equation.rgb||Af.ADD,blendSrcFactor:H&&V.func.srcRGB||Yo.SRC_ALPHA,blendDstFactor:H&&V.func.dstRGB||Yo.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:H&&V.equation.alpha||Af.ADD,blendSrcFactor:H&&V.func.srcAlpha||Yo.ONE,blendDstFactor:H&&V.func.dstAlpha||Yo.ONE_MINUS_SRC_ALPHA}}],blendConstant:A5,depthWrite:S,depthCompare:S&&y.func||as.LESS,cullMode:D&&O.face||sp.NONE,stencilWrite:!1}})}},{key:"updateAttributesAndElements",value:function(){}},{key:"updateAttributes",value:function(){}},{key:"addUniforms",value:function(r){this.uniforms=(0,te.Z)((0,te.Z)({},this.uniforms),this.extractUniforms(r))}},{key:"draw",value:function(r){var o=(0,te.Z)((0,te.Z)({},this.options),r),u=o.count,c=u===void 0?0:u,p=o.instances,g=o.elements,y=o.uniforms,S=y===void 0?{}:y,O=o.uniformBuffers,D=o.textures;this.uniforms=(0,te.Z)((0,te.Z)({},this.uniforms),this.extractUniforms(S));var V=this.device,H=V.width,ue=V.height,le=this.device.renderPass;if(this.pipeline=this.createPipeline(o),le.setPipeline(this.pipeline),le.setVertexInput(this.inputLayout,this.vertexBuffers.map(function(Ne){return{buffer:Ne}}),g?{buffer:this.indexBuffer,offset:0}:null),le.setViewport(0,0,H,ue),O&&(this.bindings=this.device.createBindings({pipeline:this.pipeline,uniformBufferBindings:O.map(function(Ne,dt){var mt=Ne;return{binding:dt,buffer:mt.get(),size:mt.size}}),samplerBindings:D==null?void 0:D.map(function(Ne){return{texture:Ne.texture,sampler:Ne.sampler}})})),this.bindings&&(le.setBindings(this.bindings),this.program.setUniformsLegacy(this.uniforms)),g){var we=g.count;we===0?le.draw(c,p):le.drawIndexed(we,p)}else le.draw(c,p)}},{key:"destroy",value:function(){var r,o,u;this.program.destroy(),(r=this.vertexBuffers)===null||r===void 0||r.forEach(function(c){return c.destroy()}),(o=this.indexBuffer)===null||o===void 0||o.destroy(),(u=this.bindings)===null||u===void 0||u.destroy(),this.inputLayout.destroy(),this.pipeline.destroy(),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(r){var o=r.depth;if(o)return{enable:o.enable===void 0?!0:!!o.enable,mask:o.mask===void 0?!0:!!o.mask,func:T9[o.func||gt.LESS],range:o.range||[0,1]}}},{key:"getBlendDrawParams",value:function(r){var o=r.blend,u=o||{},c=u.enable,p=u.func,g=u.equation,y=u.color,S=y===void 0?[0,0,0,0]:y;return{enable:!!c,func:{srcRGB:G3[p&&p.srcRGB||gt.SRC_ALPHA],srcAlpha:G3[p&&p.srcAlpha||gt.SRC_ALPHA],dstRGB:G3[p&&p.dstRGB||gt.ONE_MINUS_SRC_ALPHA],dstAlpha:G3[p&&p.dstAlpha||gt.ONE_MINUS_SRC_ALPHA]},equation:{rgb:pN[g&&g.rgb||gt.FUNC_ADD],alpha:pN[g&&g.alpha||gt.FUNC_ADD]},color:S}}},{key:"initCullDrawParams",value:function(r){var o=r.cull;if(o){var u=o.enable,c=o.face,p=c===void 0?gt.BACK:c;return{enable:!!u,face:M9[p]}}}},{key:"extractUniforms",value:function(r){var o=this,u={};return Object.keys(r).forEach(function(c){o.extractUniformsRecursively(c,r[c],u,"")}),u}},{key:"extractUniformsRecursively",value:function(r,o,u,c){var p=this;if(o===null||typeof o=="number"||typeof o=="boolean"||Array.isArray(o)&&typeof o[0]=="number"||L9(o)||o===""||"resize"in o){u["".concat(c&&c+".").concat(r)]=o;return}D9(o)&&Object.keys(o).forEach(function(g){p.extractUniformsRecursively(g,o[g],u,"".concat(c&&c+".").concat(r))}),Array.isArray(o)&&o.forEach(function(g,y){Object.keys(g).forEach(function(S){p.extractUniformsRecursively(S,g[S],u,"".concat(c&&c+".").concat(r,"[").concat(y,"]"))})})}}]),e}();function N9(e){return typeof WebGL2RenderingContext!="undefined"&&e instanceof WebGL2RenderingContext?!0:!!(e&&e._version===2)}var dN,vN,z9=(dN=(0,Tn.b2)(),dN(vN=function(){function e(){var a=this;(0,Rt.Z)(this,e),(0,Fe.Z)(this,"uniformBuffers",[]),(0,Fe.Z)(this,"createModel",function(r){return new B9(a.device,r)}),(0,Fe.Z)(this,"createAttribute",function(r){return new E9(a.device,r)}),(0,Fe.Z)(this,"createBuffer",function(r){return new I9(a.device,r)}),(0,Fe.Z)(this,"createElements",function(r){return new P9(a.device,r)}),(0,Fe.Z)(this,"createTexture2D",function(r){return new k9(a.device,r)}),(0,Fe.Z)(this,"createFramebuffer",function(r){return new F9(a.device,r)}),(0,Fe.Z)(this,"useFramebuffer",function(){}),(0,Fe.Z)(this,"clear",function(){}),(0,Fe.Z)(this,"viewport",function(r){var o=r.width,u=r.height;a.width=o,a.height=u,a.device.width=o,a.device.height=u}),(0,Fe.Z)(this,"readPixels",function(){return new Uint8Array}),(0,Fe.Z)(this,"getViewportSize",function(){return{width:a.device.width,height:a.device.height}}),(0,Fe.Z)(this,"getContainer",function(){var r;return(r=a.canvas)===null||r===void 0?void 0:r.parentElement}),(0,Fe.Z)(this,"getCanvas",function(){return a.canvas}),(0,Fe.Z)(this,"getGLContext",function(){return a.device.gl}),(0,Fe.Z)(this,"destroy",function(){var r;a.canvas=null,(r=a.uniformBuffers)===null||r===void 0||r.forEach(function(o){o.destroy()}),a.device.destroy()})}return(0,at.Z)(e,[{key:"init",value:function(){var a=(0,fn.Z)($t().mark(function o(u,c){var p,g,y,S,O,D;return $t().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return p=c.enableWebGPU,g=c.shaderCompilerPath,this.canvas=u,y=p?new m9({shaderCompilerPath:g}):new MU({targets:["webgl2","webgl1"],onContextLost:function(le){console.warn("context lost",le)},onContextCreationError:function(le){console.warn("context creation error",le)},onContextRestored:function(le){console.warn("context restored",le)}}),H.next=5,y.createSwapChain(u);case 5:S=H.sent,S.configureSwapChain(u.width,u.height),this.device=S.getDevice(),this.swapChain=S,O=this.device.gl,this.extensionObject={OES_texture_float:!N9(O)&&this.device.OES_texture_float},D=this.device.createTexture({format:Xr.U8_RGBA_RT,width:u.width,height:u.height,usage:Yp.RENDER_TARGET}),this.renderTarget=this.device.createRenderTargetFromTexture(D),this.mainDepthRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:Xr.D24_S8,width:u.width,height:u.height,usage:Yp.RENDER_TARGET}));case 14:case"end":return H.stop()}},o,this)}));function r(o,u){return a.apply(this,arguments)}return r}()},{key:"beginFrame",value:function(){var r=this.swapChain.getOnscreenTexture();this.renderPass=this.device.createRenderPass({colorAttachment:[this.renderTarget],colorResolveTo:[r],colorClearColor:[A5],depthStencilAttachment:this.mainDepthRT,depthClearValue:1}),this.device.renderPass=this.renderPass}},{key:"endFrame",value:function(){this.device.submitPass(this.renderPass)}},{key:"getPointSizeRange",value:function(){var r=this.device.gl;return r.getParameter(r.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(r){return!!this.getGLContext().getExtension(r)}},{key:"setState",value:function(){}},{key:"setBaseState",value:function(){}},{key:"setCustomLayerDefaults",value:function(){}},{key:"setDirty",value:function(r){this.isDirty=r}},{key:"getDirty",value:function(){return this.isDirty}}]),e}())||vN);function U9(e){var a=Z9();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Dr.Z)(this,u)}}function Z9(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var L5=["selectstart","selecting","selectend"],V9=function(e){(0,mr.Z)(r,e);var a=U9(r);function r(o){var u,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,Rt.Z)(this,r),u=a.call(this),(0,Fe.Z)((0,vr.Z)(u),"isEnable",!1),(0,Fe.Z)((0,vr.Z)(u),"onDragStart",function(p){u.box.style.display="block",u.startEvent=u.endEvent=p,u.syncBoxBound(),u.emit("selectstart",u.getLngLatBox(),u.startEvent,u.endEvent)}),(0,Fe.Z)((0,vr.Z)(u),"onDragging",function(p){u.endEvent=p,u.syncBoxBound(),u.emit("selecting",u.getLngLatBox(),u.startEvent,u.endEvent)}),(0,Fe.Z)((0,vr.Z)(u),"onDragEnd",function(p){u.endEvent=p,u.box.style.display="none",u.emit("selectend",u.getLngLatBox(),u.startEvent,u.endEvent)}),u.scene=o,u.options=c,u}return(0,at.Z)(r,[{key:"container",get:function(){return this.scene.getMapService().getMarkerContainer()}},{key:"enable",value:function(){if(!this.isEnable){var u=this.options.className;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){var c=Ns("div",void 0,this.container);c.classList.add("l7-select-box"),u&&c.classList.add(u),c.style.display="none",this.box=c}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}}},{key:"disable",value:function(){this.isEnable&&(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}},{key:"syncBoxBound",value:function(){var u=this.startEvent,c=u.x,p=u.y,g=this.endEvent,y=g.x,S=g.y,O=Math.min(c,y),D=Math.min(p,S),V=Math.abs(c-y),H=Math.abs(p-S);this.box.style.top="".concat(D,"px"),this.box.style.left="".concat(O,"px"),this.box.style.width="".concat(V,"px"),this.box.style.height="".concat(H,"px")}},{key:"getLngLatBox",value:function(){var u=this.startEvent.lngLat,c=u.lng,p=u.lat,g=this.endEvent.lngLat,y=g.lng,S=g.lat;return Cs([[c,p],[y,S]])}}]),r}(Ws.EventEmitter),H9=function(){function e(a){(0,Rt.Z)(this,e);var r=a.id,o=a.map,u=a.canvas,c=a.hasBaseMap,p=a.renderer,g=p===void 0?"regl":p,y=II();this.container=y,o.setContainer(y,r,u,c),y.bind(ut.IRendererService).to(g==="regl"?S9:z9).inSingletonScope(),this.sceneService=y.get(ut.ISceneService),this.mapService=y.get(ut.IMapService),this.iconService=y.get(ut.IIconService),this.fontService=y.get(ut.IFontService),this.controlService=y.get(ut.IControlService),this.layerService=y.get(ut.ILayerService),this.debugService=y.get(ut.IDebugService),this.debugService.setEnable(a.debug),this.markerService=y.get(ut.IMarkerService),this.interactionService=y.get(ut.IInteractionService),this.popupService=y.get(ut.IPopupService),this.boxSelect=new V9(this,{}),this.initComponent(r),this.sceneService.init(a),this.initControl()}return(0,at.Z)(e,[{key:"map",get:function(){return this.mapService.map}},{key:"loaded",get:function(){return this.sceneService.loaded}},{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"getDebugService",value:function(){return this.debugService}},{key:"exportPng",value:function(){var a=(0,fn.Z)($t().mark(function o(u){return $t().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",this.sceneService.exportPng(u));case 1:case"end":return p.stop()}},o,this)}));function r(o){return a.apply(this,arguments)}return r}()},{key:"exportMap",value:function(){var a=(0,fn.Z)($t().mark(function o(u){return $t().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",this.sceneService.exportPng(u));case 1:case"end":return p.stop()}},o,this)}));function r(o){return a.apply(this,arguments)}return r}()},{key:"registerRenderService",value:function(r){var o=this;if(this.sceneService.loaded){var u=new r(this);u.init()}else this.on("loaded",function(){var c=new r(o);c.init()})}},{key:"setBgColor",value:function(r){this.mapService.setBgColor(r)}},{key:"addLayer",value:function(r){var o=this,u=cy(this.container);if(r.setContainer(u,this.container),this.sceneService.addLayer(r),r.inited){var c=this.initMask(r);this.addMask(c,r.id)}else r.on("inited",function(){var p=o.initMask(r);o.addMask(p,r.id)})}},{key:"initMask",value:function(r){var o=r.getLayerConfig(),u=o.mask,c=o.maskfence,p=o.maskColor,g=p===void 0?"#000":p,y=o.maskOpacity,S=y===void 0?0:y;if(!(!u||!c)){var O=new Xv().source(c).shape("fill").style({color:g,opacity:S});return O}}},{key:"addMask",value:function(r,o){if(r){var u=this.getLayer(o);if(u){var c=cy(this.container);r.setContainer(c,this.container),u.addMaskLayer(r),this.sceneService.addMask(r)}else console.warn("parent layer not find!")}}},{key:"getPickedLayer",value:function(){return this.layerService.pickedLayerId}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(r){return this.layerService.getLayer(r)}},{key:"getLayerByName",value:function(r){return this.layerService.getLayerByName(r)}},{key:"removeLayer",value:function(){var a=(0,fn.Z)($t().mark(function o(u,c){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.layerService.remove(u,c);case 2:case"end":return g.stop()}},o,this)}));function r(o,u){return a.apply(this,arguments)}return r}()},{key:"removeAllLayer",value:function(){var a=(0,fn.Z)($t().mark(function o(){return $t().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.layerService.removeAllLayers();case 2:case"end":return c.stop()}},o,this)}));function r(){return a.apply(this,arguments)}return r}()},{key:"render",value:function(){this.sceneService.render()}},{key:"setEnableRender",value:function(r){this.layerService.setEnableRender(r)}},{key:"addIconFont",value:function(r,o){this.fontService.addIconFont(r,o)}},{key:"addIconFonts",value:function(r){var o=this;r.forEach(function(u){var c=(0,Vi.Z)(u,2),p=c[0],g=c[1];o.fontService.addIconFont(p,g)})}},{key:"addFontFace",value:function(r,o){var u=this;this.fontService.once("fontloaded",function(c){u.emit("fontloaded",c)}),this.fontService.addFontFace(r,o)}},{key:"addImage",value:function(){var a=(0,fn.Z)($t().mark(function o(u,c){return $t().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.iconService.addImage(u,c);case 2:case"end":return g.stop()}},o,this)}));function r(o,u){return a.apply(this,arguments)}return r}()},{key:"hasImage",value:function(r){return this.iconService.hasImage(r)}},{key:"removeImage",value:function(r){this.iconService.removeImage(r)}},{key:"addIconFontGlyphs",value:function(r,o){this.fontService.addIconGlyphs(o)}},{key:"addControl",value:function(r){this.controlService.addControl(r,this.container)}},{key:"removeControl",value:function(r){this.controlService.removeControl(r)}},{key:"getControlByName",value:function(r){return this.controlService.getControlByName(r)}},{key:"addMarker",value:function(r){this.markerService.addMarker(r)}},{key:"addMarkerLayer",value:function(r){this.markerService.addMarkerLayer(r)}},{key:"removeMarkerLayer",value:function(r){this.markerService.removeMarkerLayer(r)}},{key:"removeAllMarkers",value:function(){this.markerService.removeAllMarkers()}},{key:"removeAllMakers",value:function(){console.warn("removeAllMakers \u5DF2\u5E9F\u5F03\uFF0C\u8BF7\u4F7F\u7528 removeAllMarkers"),this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(r){this.popupService.addPopup(r)}},{key:"removePopup",value:function(r){this.popupService.removePopup(r)}},{key:"on",value:function(r,o){if(L5.includes(r)){var u;(u=this.boxSelect)===null||u===void 0||u.on(r,o)}else K_.includes(r)?this.sceneService.on(r,o):this.mapService.on(r,o)}},{key:"once",value:function(r,o){if(L5.includes(r)){var u;(u=this.boxSelect)===null||u===void 0||u.once(r,o)}else K_.includes(r)?this.sceneService.once(r,o):this.mapService.once(r,o)}},{key:"emit",value:function(r,o){K_.indexOf(r)===-1?this.mapService.on(r,o):this.sceneService.emit(r,o)}},{key:"off",value:function(r,o){if(L5.includes(r)){var u;(u=this.boxSelect)===null||u===void 0||u.off(r,o)}else K_.includes(r)?this.sceneService.off(r,o):this.mapService.off(r,o)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(r){return this.mapService.getCenter(r)}},{key:"setCenter",value:function(r,o){return this.mapService.setCenter(r,o)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(r){return this.mapService.setPitch(r)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(r){this.mapService.setRotation(r)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(r){this.mapService.panTo(r)}},{key:"panBy",value:function(r,o){this.mapService.panBy(r,o)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(r){this.mapService.setZoom(r)}},{key:"fitBounds",value:function(r,o){var u=this.sceneService.getSceneConfig(),c=u.fitBoundsOptions,p=u.animate;this.mapService.fitBounds(r,o||(0,te.Z)((0,te.Z)({},c),{},{animate:p}))}},{key:"setZoomAndCenter",value:function(r,o){this.mapService.setZoomAndCenter(r,o)}},{key:"setMapStyle",value:function(r){this.mapService.setMapStyle(r)}},{key:"setMapStatus",value:function(r){this.mapService.setMapStatus(r)}},{key:"pixelToLngLat",value:function(r){return this.mapService.pixelToLngLat(r)}},{key:"lngLatToPixel",value:function(r){return this.mapService.lngLatToPixel(r)}},{key:"containerToLngLat",value:function(r){return this.mapService.containerToLngLat(r)}},{key:"lngLatToContainer",value:function(r){return this.mapService.lngLatToContainer(r)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(r,o){this.container.bind(ut.IPostProcessingPass).to(r).whenTargetNamed(o)}},{key:"enableShaderPick",value:function(){this.layerService.enableShaderPick()}},{key:"diasbleShaderPick",value:function(){this.layerService.disableShaderPick()}},{key:"enableBoxSelect",value:function(){var r=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.boxSelect.enable(),o&&this.boxSelect.once("selectend",function(){r.disableBoxSelect()})}},{key:"disableBoxSelect",value:function(){this.boxSelect.disable()}},{key:"getProtocol",value:function(r){return ri.REGISTERED_PROTOCOLS[r]}},{key:"getPointSizeRange",value:function(){return this.sceneService.getPointSizeRange()}},{key:"initComponent",value:function(r){this.controlService.init({container:ah(r)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var r=this.sceneService.getSceneConfig(),o=r.logoVisible,u=r.logoPosition;o&&this.addControl(new lC({position:u}))}}],[{key:"addProtocol",value:function(r,o){ri.REGISTERED_PROTOCOLS[r]=o}},{key:"removeProtocol",value:function(r){delete ri.REGISTERED_PROTOCOLS[r]}}]),e}(),Jj="2.20.2",$3=F(90494),Rh=F(45442),B5={fontFamily:`
  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`},N5="l7plot-legend l7plot-legend__category",z5="l7plot-legend__title",U5="l7plot-legend__category-list",gN="l7plot-legend__list-item",mN="l7plot-legend__category-marker",yN="l7plot-legend__category-value",j9='<div class="'.concat(N5,`">
  <div class="`).concat(z5,`"></div>
  <ul class="`).concat(U5,`"></ul>
</div>`),_N='<li class="'.concat(gN,`" data-index={index}>
  <span class="`).concat(mN,`" style="background:{color}"></span>
  <span class="`).concat(yN,`">{value}</span>
</li>`),R0,W9=(R0={},R0[N5]={visibility:"visible",zIndex:1,backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"rgb(0 0 0 / 16%) 0px 6px 12px 0px",borderRadius:"2px",color:"rgb(87, 87, 87)",fontFamily:B5.fontFamily,padding:"10px 10px 6px 10px",lineHeight:1,fontSize:"12px"},R0[z5]={fontSize:"13px",lineHeight:"19px",marginBottom:"8px"},R0[U5]={margin:"0px",listStyleType:"none",padding:"0px"},R0[gN]={listStyleType:"none",display:"flex",alignItems:"center",marginBottom:"2px"},R0[mN]={width:"10px",height:"10px"},R0[yN]={paddingLeft:"8px"},R0),G9=F(6056);function X9(e,a){return!!e.className.match(new RegExp("(\\s|^)".concat(a,"(\\s|$)")))}function Z5(e){for(var a=e.childNodes,r=a.length,o=r-1;o>=0;o--)e.removeChild(a[o])}var V5=function(){function e(a){this.destroyed=!1,this.options=(0,Y.b$)({},this.getDefaultOptions(),a),this.container=this.initContainer(),this.initDom(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible(),this.render()}return e.prototype.getDefaultOptions=function(){return{name:"",containerTpl:"<div></div>",visible:!0,capture:!0,domStyles:{}}},e.prototype.getContainer=function(){return this.container},e.prototype.getParentContainer=function(){var a=this.options.parent,r;if(!a)return r;if((0,Y.HD)(a)){var o=document.getElementById(a);if(o)r=o;else throw new Error("No parent id ".concat(a))}else r=a;return r},e.prototype.initContainer=function(){var a=this.createDom(this.options.containerTpl),r=this.getParentContainer();return r&&r.appendChild(a),a},e.prototype.initVisible=function(){this.options.visible?this.show():this.hide()},e.prototype.initCapture=function(){this.setCapture(this.options.capture)},e.prototype.update=function(a){this.options=(0,Y.b$)({},this.options,a),this.updateInner(a),this.afterUpdate(a)},e.prototype.updateInner=function(a){a.domStyles&&this.applyStyles()},e.prototype.afterUpdate=function(a){a.capture&&this.setCapture(a.capture)},e.prototype.setCapture=function(a){var r=this.container,o=a?"auto":"none";r.style.pointerEvents=o},e.prototype.applyStyles=function(){var a=this.options.domStyles;if(a){var r=this.container;this.applyChildrenStyles(r,a);var o=this.options.className;if(o&&X9(r,o)){var u=a[o];(0,Rh.Z)(r,u)}}},e.prototype.applyChildrenStyles=function(a,r){(0,Y.S6)(r,function(o,u){var c=a.getElementsByClassName(u);(0,Y.S6)(c,function(p){(0,Rh.Z)(p,o)})})},e.prototype.applyStyle=function(a,r){var o=this.options.domStyles;o&&(0,Rh.Z)(r,o[a])},e.prototype.createDom=function(a){return a===void 0&&(a="<div></div>"),(0,G9.Z)(a)},e.prototype.removeDom=function(){var a=this.container;a&&a.parentNode&&a.parentNode.removeChild(a)},e.prototype.destroy=function(){this.removeEvent(),this.removeDom(),this.destroyed=!0},e}(),$9=function(e){(0,w.ZT)(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}return a.prototype.getDefaultOptions=function(){return(0,Y.b$)({},e.prototype.getDefaultOptions.call(this),{id:"l7plot-category-legend",name:"l7plot-category-legend",title:"",items:[],containerTpl:j9,itemTpl:_N,domStyles:W9,className:N5})},a.prototype.initContainer=function(){var r=this.options.customContent;if(r){var o=this.getHtmlContentNode(r),u=this.getParentContainer();return u&&u.appendChild(o),o}else return e.prototype.initContainer.call(this)},a.prototype.initDom=function(){this.cacheDoms()},a.prototype.initEvent=function(){},a.prototype.removeEvent=function(){},a.prototype.cacheDoms=function(){var r=this.container,o=r.getElementsByClassName(z5)[0],u=r.getElementsByClassName(U5)[0];this.titleDom=o,this.listDom=u},a.prototype.render=function(){this.options.customContent?this.renderCustomContent(this.options.customContent):(this.resetTitle(),this.renderItems())},a.prototype.show=function(){var r=this.container;!r||this.destroyed||(0,Rh.Z)(r,{visibility:"visible"})},a.prototype.hide=function(){var r=this.container;!r||this.destroyed||(0,Rh.Z)(r,{visibility:"hidden"})},a.prototype.updateInner=function(r){this.options.customContent?this.renderCustomContent(this.options.customContent):(r.title&&this.resetTitle(),r.items&&this.renderItems()),e.prototype.updateInner.call(this,r)},a.prototype.renderCustomContent=function(r){var o=this.container.parentNode,u=this.getHtmlContentNode(r),c=this.container;o&&o.replaceChild(u,c),this.container=u,this.applyStyles()},a.prototype.getHtmlContentNode=function(r){var o,u=r(this.options.title||"",this.options.items);return(0,Y.HD)(u)?o=this.createDom(u):o=u,o},a.prototype.resetTitle=function(){var r=this.options.title;r?(this.showTitle(),this.setTitle(r)):this.hideTitle()},a.prototype.showTitle=function(){var r=this.titleDom;r&&(0,Rh.Z)(r,{display:"block"})},a.prototype.hideTitle=function(){var r=this.titleDom;r&&(0,Rh.Z)(r,{display:"none"})},a.prototype.setTitle=function(r){var o=this.titleDom;o&&(o.innerHTML=r)},a.prototype.renderItems=function(){var r=this;this.clearItemDoms();var o=this.options.items.length>30?this.options.items.slice(0,30):this.options.items,u=this.options.itemTpl||_N,c=this.listDom;c&&(o.forEach(function(p){var g=p.value==="",y=g?"\u2014":Array.isArray(p.value)?p.value.join(" - "):p.value,S=(0,w.pi)((0,w.pi)({},p),{value:y}),O=(0,Y.ng)(u,S),D=r.createDom(O);c.appendChild(D)}),this.applyChildrenStyles(c,this.options.domStyles))},a.prototype.clearItemDoms=function(){this.listDom&&Z5(this.listDom)},a.prototype.clear=function(){this.setTitle(""),this.clearItemDoms()},a}(V5),H5="l7plot-legend l7plot-legend__continue",j5="l7plot-legend__title",xN="l7plot-legend__ribbon-container",bN="l7plot-legend__ribbon",SN="l7plot-legend__gradient-bar",W5="l7plot-legend__value-range",Y9='<div class="'.concat(H5,`">
  <div class="`).concat(j5,`"></div>
  <div class="`).concat(xN,`"></div>
</div>`),EN='<div class="'.concat(bN,`">
  <span class="`).concat(W5,`">{min}</span>
  <div class="`).concat(SN,`" style="background-image: {backgroundImage}"></div>
  <span class="`).concat(W5,`">{max}</span>
</div>`),s_,K9=(s_={},s_[H5]={visibility:"visible",zIndex:1,backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"rgb(0 0 0 / 16%) 0px 6px 12px 0px",borderRadius:"2px",color:"rgb(87, 87, 87)",fontFamily:B5.fontFamily,padding:"10px",lineHeight:1,fontSize:"12px"},s_[j5]={fontSize:"13px",lineHeight:"19px",marginBottom:"8px"},s_[bN]={display:"flex",alignItems:"center"},s_[SN]={width:"140px",height:"14px",margin:"0px 5px"},s_[W5]={padding:"0px"},s_),q9=function(e){(0,w.ZT)(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}return a.prototype.getDefaultOptions=function(){return(0,Y.b$)({},e.prototype.getDefaultOptions.call(this),{id:"l7plot-continue-legend",name:"l7plot-continue-legend",title:"",containerTpl:Y9,ribbonTpl:EN,domStyles:K9,className:H5})},a.prototype.initContainer=function(){var r=this.options.customContent;if(r){var o=this.getHtmlContentNode(r),u=this.getParentContainer();return u&&u.appendChild(o),o}else return e.prototype.initContainer.call(this)},a.prototype.initDom=function(){this.cacheDoms()},a.prototype.initEvent=function(){},a.prototype.removeEvent=function(){},a.prototype.cacheDoms=function(){var r=this.container,o=r.getElementsByClassName(j5)[0],u=r.getElementsByClassName(xN)[0];this.titleDom=o,this.ribbonContainerDom=u},a.prototype.render=function(){this.options.customContent?this.renderCustomContent(this.options.customContent):(this.resetTitle(),this.renderRibbon())},a.prototype.show=function(){var r=this.container;!r||this.destroyed||(0,Rh.Z)(r,{visibility:"visible"})},a.prototype.hide=function(){var r=this.container;!r||this.destroyed||(0,Rh.Z)(r,{visibility:"hidden"})},a.prototype.updateInner=function(r){this.options.customContent?this.renderCustomContent(this.options.customContent):(r.title&&this.resetTitle(),r.colors&&this.renderRibbon()),e.prototype.updateInner.call(this,r)},a.prototype.renderCustomContent=function(r){var o=this.container.parentNode,u=this.getHtmlContentNode(r),c=this.container;o&&o.replaceChild(u,c),this.container=u,this.applyStyles()},a.prototype.getHtmlContentNode=function(r){var o,u=r(this.options.title||"",this.options.min,this.options.max,this.options.colors);return(0,Y.HD)(u)?o=this.createDom(u):o=u,o},a.prototype.resetTitle=function(){var r=this.options.title;r?(this.showTitle(),this.setTitle(r)):this.hideTitle()},a.prototype.showTitle=function(){var r=this.titleDom;r&&(0,Rh.Z)(r,{display:"block"})},a.prototype.hideTitle=function(){var r=this.titleDom;r&&(0,Rh.Z)(r,{display:"none"})},a.prototype.setTitle=function(r){var o=this.titleDom;o&&(o.innerHTML=r)},a.prototype.renderRibbon=function(){this.clearRibbonContainerDoms();var r=this.options,o=r.min,u=r.max,c=r.colors,p=r.ribbonTpl,g=p===void 0?EN:p,y=this.ribbonContainerDom;if(y){var S="linear-gradient(to right, ".concat(c.join(", "),")"),O={min:o,max:u,backgroundImage:S},D=(0,Y.ng)(g,O),V=this.createDom(D);y.appendChild(V),this.applyChildrenStyles(y,this.options.domStyles)}},a.prototype.clearRibbonContainerDoms=function(){this.ribbonContainerDom&&Z5(this.ribbonContainerDom)},a.prototype.clear=function(){this.setTitle(""),this.clearRibbonContainerDoms()},a}(V5),Q9=function(e){(0,w.ZT)(a,e);function a(r){var o=e.call(this,r)||this;return o.legendComponents=[],o.options=r,o.legendComponents=o.initLegendComponents(r.items),o}return a.prototype.initLegendComponents=function(r){for(var o=[],u=0;u<r.length;u++){var c=r[u];if(c.type==="category"){var p=new $9({title:c.options.title,items:c.options.items,className:c.options.className,customContent:c.options.customContent,domStyles:c.options.domStyles});o.push(p)}else if(c.type==="continue"){var p=new q9({title:c.options.title,min:c.options.min,max:c.options.max,colors:c.options.colors,className:c.options.className,customContent:c.options.customContent,domStyles:c.options.domStyles});o.push(p)}}return o},a.prototype.getDefaultOptions=function(){return{position:"bottomleft"}},a.prototype.onAdd=function(){var r=window.document.createElement("div");return r.className="l7plot-legend-container",this.legendComponents.forEach(function(o){var u=o.getContainer();r.appendChild(u)}),r},a.prototype.onRemove=function(){this.legendComponents.forEach(function(r){r.destroy()})},a}(dy),G5="l7plot-tooltip",X5="l7plot-tooltip__title",$5="l7plot-tooltip__list",wN="l7plot-tooltip__list-item",CN="l7plot-tooltip__name",AN="l7plot-tooltip__value",J9='<div class="'.concat(G5,`">
  <div class="`).concat(X5,`"></div>
  <ul class="`).concat($5,`"></ul>
</div>`),TN='<li class="'.concat(wN,`" data-index={index}>
  <span class="`).concat(CN,`">{name}</span>
  <span class="`).concat(AN,`">{value}</span>
</li>`),I0,eZ=(I0={},I0[G5]={visibility:"visible",zIndex:999,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"rgb(0 0 0 / 16%) 0px 6px 12px 0px",borderRadius:"2px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:B5.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},I0[X5]={marginBottom:"4px"},I0[$5]={margin:"0px",listStyleType:"none",padding:"0px"},I0[wN]={listStyleType:"none",marginBottom:"4px",whiteSpace:"nowrap",display:"flex",justifyContent:"space-between"},I0[CN]={},I0[AN]={marginLeft:"30px"},I0),tZ=function(e){(0,w.ZT)(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}return a.prototype.getDefaultOptions=function(){return(0,Y.b$)({},e.prototype.getDefaultOptions.call(this),{id:"l7plot-tooltip",name:"l7plot-tooltip",title:"",showTitle:!0,items:[],containerTpl:J9,itemTpl:TN,domStyles:eZ,className:G5})},a.prototype.initContainer=function(){var r=this.options.customContent;if(r){var o=this.getHtmlContentNode(r),u=this.getParentContainer();return u&&u.appendChild(o),o}else return e.prototype.initContainer.call(this)},a.prototype.initDom=function(){this.cacheDoms()},a.prototype.initEvent=function(){},a.prototype.removeEvent=function(){},a.prototype.cacheDoms=function(){var r=this.container,o=r.getElementsByClassName(X5)[0],u=r.getElementsByClassName($5)[0];this.titleDom=o,this.listDom=u},a.prototype.render=function(){this.options.customContent?this.renderCustomContent(this.options.customContent):(this.resetTitle(),this.renderItems())},a.prototype.show=function(){var r=this.container;!r||this.destroyed||(0,Rh.Z)(r,{visibility:"visible"})},a.prototype.hide=function(){var r=this.container;!r||this.destroyed||(0,Rh.Z)(r,{visibility:"hidden"})},a.prototype.updateInner=function(r){this.options.customContent?this.renderCustomContent(this.options.customContent):(r.title&&this.resetTitle(),r.items&&this.renderItems()),e.prototype.updateInner.call(this,r)},a.prototype.renderCustomContent=function(r){var o=this.container.parentNode,u=this.getHtmlContentNode(r),c=this.container;o&&o.replaceChild(u,c),this.container=u,this.applyStyles()},a.prototype.getHtmlContentNode=function(r){var o,u=r(this.options.title||"",this.options.items);return(0,Y.HD)(u)?o=this.createDom(u):o=u,o},a.prototype.resetTitle=function(){var r=this.options.title,o=this.options.showTitle;o&&r?(this.showTitle(),this.setTitle(r)):this.hideTitle()},a.prototype.showTitle=function(){var r=this.titleDom;r&&(0,Rh.Z)(r,{display:"block"})},a.prototype.hideTitle=function(){var r=this.titleDom;r&&(0,Rh.Z)(r,{display:"none"})},a.prototype.setTitle=function(r){var o=this.titleDom;o&&(o.innerHTML=r)},a.prototype.renderItems=function(){var r=this;this.clearItemDoms();var o=this.options.items,u=this.options.itemTpl||TN,c=this.listDom;c&&(o.forEach(function(p){var g=(0,w.pi)({},p),y=(0,Y.ng)(u,g),S=r.createDom(y);c.appendChild(S)}),this.applyChildrenStyles(c,this.options.domStyles))},a.prototype.clearItemDoms=function(){this.listDom&&Z5(this.listDom)},a.prototype.clear=function(){this.setTitle(""),this.clearItemDoms()},a}(V5),Y5=F(27771),rZ=typeof global=="object"&&global&&global.Object===Object&&global,nZ=rZ,iZ=typeof self=="object"&&self&&self.Object===Object&&self,aZ=nZ||iZ||Function("return this")(),Y3=aZ,oZ=Y3.Symbol,Cx=oZ,MN=Object.prototype,sZ=MN.hasOwnProperty,uZ=MN.toString,YS=Cx?Cx.toStringTag:void 0;function lZ(e){var a=sZ.call(e,YS),r=e[YS];try{e[YS]=void 0;var o=!0}catch(c){}var u=uZ.call(e);return o&&(a?e[YS]=r:delete e[YS]),u}var cZ=lZ,fZ=Object.prototype,hZ=fZ.toString;function pZ(e){return hZ.call(e)}var dZ=pZ,vZ="[object Null]",gZ="[object Undefined]",RN=Cx?Cx.toStringTag:void 0;function mZ(e){return e==null?e===void 0?gZ:vZ:RN&&RN in Object(e)?cZ(e):dZ(e)}var IN=mZ;function yZ(e){return e!=null&&typeof e=="object"}var _Z=yZ,xZ="[object Symbol]";function bZ(e){return typeof e=="symbol"||_Z(e)&&IN(e)==xZ}var K3=bZ,SZ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,EZ=/^\w*$/;function wZ(e,a){if((0,Y5.Z)(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||K3(e)?!0:EZ.test(e)||!SZ.test(e)||a!=null&&e in Object(a)}var CZ=wZ;function AZ(e){var a=typeof e;return e!=null&&(a=="object"||a=="function")}var q3=AZ,TZ="[object AsyncFunction]",MZ="[object Function]",RZ="[object GeneratorFunction]",IZ="[object Proxy]";function PZ(e){if(!q3(e))return!1;var a=IN(e);return a==MZ||a==RZ||a==TZ||a==IZ}var OZ=PZ,kZ=Y3["__core-js_shared__"],K5=kZ,PN=function(){var e=/[^.]+$/.exec(K5&&K5.keys&&K5.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function FZ(e){return!!PN&&PN in e}var DZ=FZ,LZ=Function.prototype,BZ=LZ.toString;function NZ(e){if(e!=null){try{return BZ.call(e)}catch(a){}try{return e+""}catch(a){}}return""}var zZ=NZ,UZ=/[\\^$.*+?()[\]{}|]/g,ZZ=/^\[object .+?Constructor\]$/,VZ=Function.prototype,HZ=Object.prototype,jZ=VZ.toString,WZ=HZ.hasOwnProperty,GZ=RegExp("^"+jZ.call(WZ).replace(UZ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function XZ(e){if(!q3(e)||DZ(e))return!1;var a=OZ(e)?GZ:ZZ;return a.test(zZ(e))}var $Z=XZ;function YZ(e,a){return e==null?void 0:e[a]}var KZ=YZ;function qZ(e,a){var r=KZ(e,a);return $Z(r)?r:void 0}var ON=qZ,QZ=ON(Object,"create"),KS=QZ;function JZ(){this.__data__=KS?KS(null):{},this.size=0}var eV=JZ;function tV(e){var a=this.has(e)&&delete this.__data__[e];return this.size-=a?1:0,a}var rV=tV,nV="__lodash_hash_undefined__",iV=Object.prototype,aV=iV.hasOwnProperty;function oV(e){var a=this.__data__;if(KS){var r=a[e];return r===nV?void 0:r}return aV.call(a,e)?a[e]:void 0}var sV=oV,uV=Object.prototype,lV=uV.hasOwnProperty;function cV(e){var a=this.__data__;return KS?a[e]!==void 0:lV.call(a,e)}var fV=cV,hV="__lodash_hash_undefined__";function pV(e,a){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=KS&&a===void 0?hV:a,this}var dV=pV;function Ax(e){var a=-1,r=e==null?0:e.length;for(this.clear();++a<r;){var o=e[a];this.set(o[0],o[1])}}Ax.prototype.clear=eV,Ax.prototype.delete=rV,Ax.prototype.get=sV,Ax.prototype.has=fV,Ax.prototype.set=dV;var kN=Ax;function vV(){this.__data__=[],this.size=0}var gV=vV;function mV(e,a){return e===a||e!==e&&a!==a}var yV=mV;function _V(e,a){for(var r=e.length;r--;)if(yV(e[r][0],a))return r;return-1}var Q3=_V,xV=Array.prototype,bV=xV.splice;function SV(e){var a=this.__data__,r=Q3(a,e);if(r<0)return!1;var o=a.length-1;return r==o?a.pop():bV.call(a,r,1),--this.size,!0}var EV=SV;function wV(e){var a=this.__data__,r=Q3(a,e);return r<0?void 0:a[r][1]}var CV=wV;function AV(e){return Q3(this.__data__,e)>-1}var TV=AV;function MV(e,a){var r=this.__data__,o=Q3(r,e);return o<0?(++this.size,r.push([e,a])):r[o][1]=a,this}var RV=MV;function Tx(e){var a=-1,r=e==null?0:e.length;for(this.clear();++a<r;){var o=e[a];this.set(o[0],o[1])}}Tx.prototype.clear=gV,Tx.prototype.delete=EV,Tx.prototype.get=CV,Tx.prototype.has=TV,Tx.prototype.set=RV;var IV=Tx,PV=ON(Y3,"Map"),OV=PV;function kV(){this.size=0,this.__data__={hash:new kN,map:new(OV||IV),string:new kN}}var FV=kV;function DV(e){var a=typeof e;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?e!=="__proto__":e===null}var LV=DV;function BV(e,a){var r=e.__data__;return LV(a)?r[typeof a=="string"?"string":"hash"]:r.map}var J3=BV;function NV(e){var a=J3(this,e).delete(e);return this.size-=a?1:0,a}var zV=NV;function UV(e){return J3(this,e).get(e)}var ZV=UV;function VV(e){return J3(this,e).has(e)}var HV=VV;function jV(e,a){var r=J3(this,e),o=r.size;return r.set(e,a),this.size+=r.size==o?0:1,this}var WV=jV;function Mx(e){var a=-1,r=e==null?0:e.length;for(this.clear();++a<r;){var o=e[a];this.set(o[0],o[1])}}Mx.prototype.clear=FV,Mx.prototype.delete=zV,Mx.prototype.get=ZV,Mx.prototype.has=HV,Mx.prototype.set=WV;var FN=Mx,GV="Expected a function";function q5(e,a){if(typeof e!="function"||a!=null&&typeof a!="function")throw new TypeError(GV);var r=function(){var o=arguments,u=a?a.apply(this,o):o[0],c=r.cache;if(c.has(u))return c.get(u);var p=e.apply(this,o);return r.cache=c.set(u,p)||c,p};return r.cache=new(q5.Cache||FN),r}q5.Cache=FN;var XV=q5,$V=500;function YV(e){var a=XV(e,function(o){return r.size===$V&&r.clear(),o}),r=a.cache;return a}var KV=YV,qV=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,QV=/\\(\\)?/g,JV=KV(function(e){var a=[];return e.charCodeAt(0)===46&&a.push(""),e.replace(qV,function(r,o,u,c){a.push(u?c.replace(QV,"$1"):o||r)}),a}),eH=JV;function tH(e,a){for(var r=-1,o=e==null?0:e.length,u=Array(o);++r<o;)u[r]=a(e[r],r,e);return u}var rH=tH,nH=1/0,DN=Cx?Cx.prototype:void 0,LN=DN?DN.toString:void 0;function BN(e){if(typeof e=="string")return e;if((0,Y5.Z)(e))return rH(e,BN)+"";if(K3(e))return LN?LN.call(e):"";var a=e+"";return a=="0"&&1/e==-nH?"-0":a}var iH=BN;function aH(e){return e==null?"":iH(e)}var Q5=aH;function oH(e,a){return(0,Y5.Z)(e)?e:CZ(e,a)?[e]:eH(Q5(e))}var sH=oH,uH=1/0;function lH(e){if(typeof e=="string"||K3(e))return e;var a=e+"";return a=="0"&&1/e==-uH?"-0":a}var cH=lH;function fH(e,a){a=sH(a,e);for(var r=0,o=a.length;e!=null&&r<o;)e=e[cH(a[r++])];return r&&r==o?e:void 0}var hH=fH;function pH(e,a,r){var o=e==null?void 0:hH(e,a);return o===void 0?r:o}var NN=pH,dH=5,vH=new Object().toString,zN=function(e,a){return vH.call(e)==="[object "+a+"]"},gH=function(e){return zN(e,"Array")},mH=function(e){return typeof e=="object"&&e!==null},UN=function(e){if(!mH(e)||!zN(e,"Object"))return!1;for(var a=e;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(e)===a},ZN=function(e,a,r,o){r=r||0,o=o||dH;for(var u in a)if(Object.prototype.hasOwnProperty.call(a,u)){var c=a[u];c?UN(c)?(UN(e[u])||(e[u]={}),r<o?ZN(e[u],c,r+1,o):e[u]=a[u]):gH(c)?(e[u]=[],e[u]=e[u].concat(c)):e[u]=c:e[u]=c}},qp=function(e){for(var a=[],r=1;r<arguments.length;r++)a[r-1]=arguments[r];for(var o=0;o<a.length;o+=1)ZN(e,a[o]);return e},yH=["mousemove","click"],_H=function(e){(0,w.ZT)(a,e);function a(r,o,u){var c=e.call(this)||this;c.currentVisible=!1,c.interactionTriggerHander=function(ue){var le=ue.feature,we=ue.featureId,Ne=c.options,dt=Ne.title,mt=Ne.customTitle,Lt=Ne.items,Wt=Ne.customItems,qt=le.type==="Feature"&&le.geometry&&le.properties,ir=qt?le.properties:le,Sr=[];if(Wt){var Br=Wt(le);if(Array.isArray(Br))Sr=Br;else throw new Error("customItems return array")}else Lt&&Lt.forEach(function(en){if((0,Y.HD)(en)){var Kn=en.split(".").pop()||en,si=NN(ir,en);si!==void 0&&Sr.push({name:Kn,value:si})}else{var Pi=en.field,so=en.alias,bs=en.customValue,Ss=so||Pi.split(".").pop()||Pi,si=NN(ir,Pi);si!==void 0&&Sr.push({name:Ss,value:bs?bs(si,ir,we):si})}});var Jr={title:mt?mt(ir):dt,items:Sr};c.updateTooltip(ue,Jr)},c.interactionUntriggerHander=function(){c.hideTooltip()},c.scene=r,c.interactionLayers=o,c.options=qp({},c.getDefaultOptions(),u);var p=c.options,g=p.offsets,y=p.title,S=p.showTitle,O=p.customContent,D=p.domStyles,V=p.anchor,H=p.className;return c.marker=new Cb({offsets:g,anchor:V,draggable:!1}),c.tooltipComponent=new tZ({title:y,showTitle:S,items:[],customContent:O,domStyles:D,className:H}),c.setComponent(),c.initInteractionEvent(),c}return a.prototype.getDefaultOptions=function(){return{showTitle:!0,showComponent:!0,items:[],offsets:[15,0],trigger:"mousemove",anchor:Io["TOP-LEFT"]}},a.prototype.update=function(r){this.marker.remove(),this.currentVisible=!1,this.options=qp({},this.options,r);var o=this.options,u=o.offsets,c=o.showTitle,p=o.customContent,g=o.domStyles,y=o.anchor,S=o.className;this.marker=new Cb({offsets:u,anchor:y,draggable:!1}),this.tooltipComponent.update({showTitle:c,customContent:p,domStyles:g,className:S}),this.setComponent()},a.prototype.initInteractionEvent=function(){var r=this,o=this.options.trigger||"mousemove";if(!yH.includes(o))throw new Error("trigger is mousemove or click");this.interactionLayers.forEach(function(u){var c=u.layer;c.on(o,r.interactionTriggerHander),c.on("un".concat(o),r.interactionUntriggerHander)})},a.prototype.unBindInteractionEvent=function(){var r=this,o=this.options.trigger||"mousemove";this.interactionLayers.forEach(function(u){var c=u.layer;c.off(o,r.interactionTriggerHander),c.off("un".concat(o),r.interactionUntriggerHander)})},a.prototype.updateTooltip=function(r,o){var u=r.lngLat,c=r.x,p=r.y;if(this.options.showComponent&&(this.updateComponent(o),this.setPostion(u)),this.currentVisible){var g={type:"tooltip:change",data:o,lngLat:u,x:c,y:p};this.emit("tooltip:change",g)}else{this.showTooltip();var y={type:"tooltip:show",data:o,lngLat:u,x:c,y:p};this.emit("tooltip:show",y)}},a.prototype.showTooltip=function(){this.currentVisible||(this.options.showComponent&&this.scene.addMarker(this.marker),this.currentVisible=!0)},a.prototype.hideTooltip=function(){if(this.currentVisible){this.options.showComponent&&this.marker.remove(),this.currentVisible=!1;var r={type:"tooltip:hide"};this.emit("tooltip:hide",r)}},a.prototype.updateComponent=function(r){(0,Y.Xy)(this.lastComponentOptions,r)||(this.tooltipComponent.update(r),this.lastComponentOptions=r)},a.prototype.setComponent=function(){var r=this.tooltipComponent.getContainer(),o=window.document.createElement("div");o.style.cursor="auto",o.style.userSelect="text",o.className="l7plot-tooltip-container",["mousemove","mousedown","mouseup","click","dblclick"].forEach(function(u){o.addEventListener(u,function(c){return c.stopPropagation()})}),o.appendChild(r),this.marker.setElement(o)},a.prototype.setPostion=function(r){this.marker.setLnglat(r)},a.prototype.destroy=function(){this.unBindInteractionEvent(),this.off(),this.marker.remove(),this.tooltipComponent.destroy()},a}($3.Z),Rx=F(77972),Ix=F(3876),qS=F(56992);function VN(e){var a,r,o,u={point:{default:{fill:e.pointFillColor,size:e.pointSize,stroke:e.pointBorderColor,lineWidth:e.pointBorder,fillOpacity:e.pointFillOpacity},active:{fill:e.pointActiveFillColor},selected:{fill:e.pointSelectedFillColor}}};return{mapStyle:e.mapStyle,defaultColor:e.brandColor,subColor:e.subColor,semanticRed:e.paletteSemanticRed,semanticGreen:e.paletteSemanticGreen,fontFamily:e.fontFamily,colors10:e.paletteQualitative10,colors20:e.paletteQualitative20,sequenceColors:e.paletteSequence,shapes:{point:["circle","square"],line:["line"]},sizes:[1,10],geometries:{point:{circle:{default:{style:u.point.default},active:{style:u.point.active},selected:{style:u.point.selected}}},line:{},polygon:{}},components:{legend:{category:{domStyles:(a={},a[Ix.rC]={visibility:"visible",zIndex:1,backgroundColor:e.legendContainerFillColor,boxShadow:e.legendContainerShadow,borderRadius:"".concat(e.legendContainerBorderRadius,"px"),color:e.legendTextFillColor,fontFamily:e.fontFamily,padding:"10px",lineHeight:"1",fontSize:"".concat(e.legendTextFontSize,"px")},a[Ix.O6]={fontSize:"13px",lineHeight:"19px",marginBottom:"8px"},a[Ix.fL]={margin:"0px",padding:"0px"},a[Ix.jp]={marginBottom:"2px"},a[Ix.Bc]={width:"10px",height:"10px"},a[Ix.Tf]={paddingLeft:"8px"},a)},continue:{domStyles:(r={},r[qS.rC]={visibility:"visible",zIndex:1,backgroundColor:e.legendContainerFillColor,boxShadow:e.legendContainerShadow,borderRadius:"".concat(e.legendContainerBorderRadius,"px"),color:e.legendTextFillColor,fontFamily:e.fontFamily,padding:"10px",lineHeight:1,fontSize:"".concat(e.legendTextFontSize,"px")},r[qS.O6]={fontSize:"13px",lineHeight:"19px",marginBottom:"8px"},r[qS.el]={display:"flex",alignItems:"center"},r[qS.bl]={width:"140px",height:"14px",margin:"0px 5px"},r[qS.VI]={padding:"0px"},r)}},tooltip:{domStyles:(o={},o[Rx.rC]={visibility:"visible",zIndex:999,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:e.tooltipContainerFillColor,boxShadow:e.tooltipContainerShadow,borderRadius:"".concat(e.tooltipContainerBorderRadius,"px"),color:e.tooltipTextFillColor,fontSize:"".concat(e.tooltipTextFontSize,"px"),fontFamily:e.fontFamily,lineHeight:e.tooltipTextLineHeight},o[Rx.O6]={marginBottom:"4px"},o[Rx.fL]={margin:"0px",padding:"0px"},o[Rx.jp]={marginBottom:"4px"},o[Rx.bX]={color:e.tooltipItemNameFillColor},o[Rx.Tf]={color:e.tooltipItemValueFillColor,marginLeft:"30px"},o)},label:{style:{textAnchor:"center",textOffset:[0,0],fill:e.labelFillColor,fontSize:e.labelFontSize,fontFamily:e.fontFamily,fillColorDark:e.labelFillColorDark,fillColorLight:e.labelFillColorLight}}}}}var u_={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},xH={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},bH=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],SH=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],EH=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],HN=function(e){e===void 0&&(e={});var a=e.mapStyle,r=a===void 0?"light":a,o=e.subColor,u=o===void 0?"rgba(0,0,0,0.05)":o,c=e.paletteQualitative10,p=c===void 0?bH:c,g=e.paletteQualitative20,y=g===void 0?SH:g,S=e.paletteSemanticRed,O=S===void 0?"#F4664A":S,D=e.paletteSemanticGreen,V=D===void 0?"#30BF78":D,H=e.paletteSemanticYellow,ue=H===void 0?"#FAAD14":H,le=e.paletteSequence,we=le===void 0?EH:le,Ne=e.fontFamily,dt=Ne===void 0?`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:Ne,mt=e.brandColor,Lt=mt===void 0?p[0]:mt;return{mapStyle:r,brandColor:Lt,subColor:u,paletteQualitative10:p,paletteQualitative20:y,paletteSemanticRed:O,paletteSemanticGreen:V,paletteSemanticYellow:ue,paletteSequence:we,fontFamily:dt,legendContainerFillColor:"rgba(255, 255, 255, 0.85)",legendContainerShadow:"0 2px 8px 0 rgba(166, 166, 166, 0.20)",legendContainerBorderRadius:2,legendTextFillColor:u_[65],legendTextFontSize:12,tooltipContainerFillColor:"rgba(255, 255, 255, 0.9)",tooltipContainerShadow:"rgb(0 0 0 / 16%) 0px 6px 12px 0px",tooltipContainerBorderRadius:2,tooltipTextFillColor:u_[65],tooltipItemNameFillColor:u_[65],tooltipItemValueFillColor:u_[65],tooltipTextFontSize:12,tooltipTextLineHeight:"20px",labelFillColor:u_[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,pointFillColor:Lt,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:xH[100],pointActiveBorderColor:u_[100],pointSelectedBorderColor:u_[100]}},eW=HN(),wH={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},l_={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},jN=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],CH=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],AH=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],WN=function(e){e===void 0&&(e={});var a=e.mapStyle,r=a===void 0?"dark":a,o=e.subColor,u=o===void 0?"rgba(255,255,255,0.05)":o,c=e.paletteQualitative10,p=c===void 0?jN:c,g=e.paletteQualitative20,y=g===void 0?CH:g,S=e.paletteSemanticRed,O=S===void 0?"#F4664A":S,D=e.paletteSemanticGreen,V=D===void 0?"#30BF78":D,H=e.paletteSemanticYellow,ue=H===void 0?"#FAAD14":H,le=e.paletteSequence,we=le===void 0?AH:le,Ne=e.fontFamily,dt=Ne===void 0?`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:Ne,mt=e.brandColor,Lt=mt===void 0?p[0]:mt;return{mapStyle:r,brandColor:Lt,subColor:u,paletteQualitative10:p,paletteQualitative20:y,paletteSemanticRed:O,paletteSemanticGreen:V,paletteSemanticYellow:ue,paletteSequence:we,fontFamily:dt,legendContainerFillColor:"rgba(31, 31, 31, 0.85)",legendContainerShadow:"0 2px 8px 0 rgba(166, 166, 166, 0.20)",legendContainerBorderRadius:2,legendTextFillColor:l_[65],legendTextFontSize:12,tooltipContainerFillColor:"rgba(31, 31, 31, 0.9)",tooltipContainerShadow:"0px 2px 4px rgba(0, 0, 0, 0.5)",tooltipContainerBorderRadius:2,tooltipTextFillColor:l_[65],tooltipItemNameFillColor:l_[65],tooltipItemValueFillColor:l_[65],tooltipTextFontSize:12,tooltipTextLineHeight:"20px",labelFillColor:l_[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,pointFillColor:jN[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:wH[100],pointActiveBorderColor:l_[100],pointSelectedBorderColor:l_[100]}},tW=WN();function GN(e){var a=e.styleSheet,r=a===void 0?{}:a,o=(0,w._T)(e,["styleSheet"]),u=HN(r);return(0,Y.b$)({},VN(u),o)}function TH(e){var a=e.styleSheet,r=a===void 0?{}:a,o=(0,w._T)(e,["styleSheet"]),u=WN(r);return(0,Y.b$)({},VN(u),o)}var XN=GN({}),MH=TH({}),J5={default:XN,light:XN,dark:MH};function e4(e){return e===void 0&&(e="default"),(0,Y.U2)(J5,(0,Y.vl)(e),J5.default)}function rW(e,a,r){r===void 0&&(r="light"),J5[lowerCase(e)]=r==="light"?createTheme(a):createDarkTheme(a)}var gv;(function(e){e.Map="map",e.Amap="amap",e.AmapV1="amapv1",e.AmapV2="amapv2",e.Mapbox="mapbox"})(gv||(gv={}));var $N=function(e){(0,w.ZT)(a,e);function a(r,o){r===void 0&&(r=[]),o===void 0&&(o={});var u=e.call(this)||this;return u.name=o.name?o.name:(0,Y.EL)("layerGroup"),u.layers=r,u}return a.prototype.addTo=function(r){var o=this;this.scene=r;var u=0,c=this.layers.length;this.layers.forEach(function(p){p.once("inited",function(g){u++,o.emit("inited",g),u===c&&o.emit("inited-all")}),p.addTo(r)})},a.prototype.hasLayer=function(r){return this.layers.some(function(o){return o===r})},a.prototype.addLayer=function(r){var o=this;this.layers.push(r),this.scene&&(r.once("inited",function(u){return o.emit("inited",u)}),r.addTo(this.scene))},a.prototype.removeLayer=function(r){var o=this.layers.findIndex(function(u){return u===r});return o===-1?!1:(this.layers.splice(o,1),this.scene&&r.remove(this.scene),!0)},a.prototype.getLayers=function(){return this.layers},a.prototype.getInteractionLayers=function(){return this.layers.filter(function(r){var o=r.interaction;return o})},a.prototype.getLayer=function(r){return this.layers.find(function(o){var u=o.layer;return u.id===r})},a.prototype.getLayerByName=function(r){return this.layers.find(function(o){return o.name===r})},a.prototype.removeAllLayer=function(){var r=this;this.layers.forEach(function(o){r.scene&&o.remove(r.scene)}),this.layers=[]},a.prototype.isEmpty=function(){return this.layers.length===0},a}($3.Z),RH=[{original:"loaded",adaptation:"scene-loaded"},{original:"resize",adaptation:"resize"},{original:"destroy",adaptation:"destroy"},{original:"resize",adaptation:"resize"}],IH=["mapmove","movestart","moveend","zoomchange","zoomstart","zoomend","click","dblclick","contextmenu","mousemove","mousewheel","mouseover","mouseout","mouseup","mousedown","dragstart","dragging","dragend"],eR=["inited","add","remove","dataUpdate","click","unclick","dblclick","undblclick","contextmenu","uncontextmenu","mouseenter","mousemove","unmousemove","mouseout","mouseup","unmouseup","mousedown","uncontextmenu","unpick"],c_=new Map;function nW(e,a){c_.set(e,a)}function iW(e){e.forEach(function(a){c_.set(a.id,a.image)})}function aW(e){return c_.get(e)}function oW(e){return c_.has(e)}function sW(e){return c_.delete(e)}var tR=new Map;function uW(e,a){tR.set(e,a)}function lW(e){return tR.delete(e)}var QS=new Map;function cW(e,a){QS.set(e,a)}function fW(e){e.forEach(function(a){QS.set(a.name,a.fontUnicode)})}function hW(e){return QS.delete(e)}var YN={map:{type:gv.Amap},logo:!0},PH=function(e){(0,w.ZT)(a,e);function a(r){var o=e.call(this)||this;return o.inited=!1,o.sceneLoaded=!1,o.layersLoaded=!1,o.loaded=!1,o.layerGroup=new $N,o.options=qp({},o.getDefaultOptions(),r),o.lastOptions=o.options,o}return a.prototype.getDefaultOptions=function(){return a.DefaultOptions},a.prototype.createContainer=function(r){var o=this.options,u=o.width,c=o.height,p=typeof r=="string"?document.getElementById(r):r;return p.style.position||(p.style.position="relative"),u&&(p.style.width||(p.style.width="".concat(u,"px"))),c&&(p.style.height||(p.style.height="".concat(c,"px"))),p},a.prototype.createTheme=function(){var r=(0,Y.Kn)(this.options.theme)?qp({},e4("default"),GN(this.options.theme)):e4(this.options.theme);return r},a.prototype.createMap=function(){var r=this.options.map?this.options.map:YN.map,o=r.type,u=(0,w._T)(r,["type"]),c=Object.assign({style:this.theme.mapStyle},u);return o===gv.Amap?new CS(c):o===gv.AmapV1?new t5(c):o===gv.AmapV2?new CS(c):o===gv.Mapbox?new oz(c):new $7(c)},a.prototype.createScene=function(){var r=this.options,o=r.logo,u=r.antialias,c=r.preserveDrawingBuffer,p=(0,Y.jn)(o)?{logoVisible:o}:{logoVisible:o==null?void 0:o.visible,logoPosition:o==null?void 0:o.position},g=Object.assign({antialias:u,preserveDrawingBuffer:c},p),y=this.createMap(),S=new H9((0,w.pi)({id:this.container,map:y},g));return S},a.prototype.registerResources=function(){var r=this;c_.size&&c_.forEach(function(o,u){!r.scene.hasImage(u)&&r.scene.addImage(u,o)}),tR.size&&tR.forEach(function(o,u){r.scene.addFontFace(u,o)}),QS.size&&QS.forEach(function(o,u){r.scene.addIconFont(u,o)})},a.prototype.update=function(r){this.updateOption(r),r.map&&!(0,Y.Xy)(this.lastOptions.map,this.options.map)&&this.updateMap(r.map),this.render(),this.emit("update")},a.prototype.updateOption=function(r){this.lastOptions=this.options,this.options=qp({},this.options,r)},a.prototype.updateMap=function(r){var o;if(this.scene){var u=r.style,c=r.center,p=r.zoom,g=r.rotation,y=r.pitch;(0,Y.o8)(y)||this.scene.setPitch(y),(0,Y.o8)(g)||this.scene.setRotation(g),u&&u!==((o=this.lastOptions.map)===null||o===void 0?void 0:o.style)&&this.scene.setMapStyle(u),p&&c&&this.scene.setZoomAndCenter(p,c)}},a.prototype.changeSize=function(r,o){this.options.width===r&&this.options.height===o||(this.container.style.width="".concat(r,"px"),this.container.style.height="".concat(o,"px"),this.options=Object.assign(this.options,{width:r,height:o}))},a.prototype.on=function(r,o,u){return this.proxyEventHander("on",r,o,u),this},a.prototype.once=function(r,o){return this.proxyEventHander("once",r,o),this},a.prototype.off=function(r,o){return this.proxyEventHander("off",r,o),this},a.prototype.proxyEventHander=function(r,o,u,c){var p=RH.find(function(D){return D.adaptation===o});if(p)this.scene[r](p.original,u);else if(IH.indexOf(o)!==-1)this.scene[r](o,u);else if(o.includes("Layer:")){var g=(0,w.CR)(o.split(":"),2),y=g[0],S=g[1],O=this[y]&&this[y][r];if(O&&eR.indexOf(S)!==-1)this[y][r](S,u);else throw new Error('No event name "'.concat(o,'"'))}else e.prototype[r].call(this,o,u,c)},a.prototype.getScene=function(){return this.scene},a.prototype.getMap=function(){var r,o,u,c;return((r=this.options.map)===null||r===void 0?void 0:r.type)===gv.Amap?this.scene.map:((o=this.options.map)===null||o===void 0?void 0:o.type)===gv.AmapV2?this.scene.map:((u=this.options.map)===null||u===void 0?void 0:u.type)===gv.Mapbox?this.scene.map:((c=this.options.map)===null||c===void 0?void 0:c.type)===gv.Map?this.scene.map:this.scene.map},a.prototype.addLayer=function(r){this.layerGroup.addLayer(r)},a.prototype.getLayes=function(){return console.warn("Replace to use getLayers()"),this.getLayers()},a.prototype.getLayers=function(){return this.layerGroup.getLayers()},a.prototype.getLayerByName=function(r){return this.layerGroup.getLayerByName(r)},a.prototype.removeLayer=function(r){return this.layerGroup.removeLayer(r)},a.prototype.removeAllLayer=function(){this.layerGroup.removeAllLayer()},a.prototype.zoomIn=function(){this.scene.zoomIn()},a.prototype.zoomOut=function(){this.scene.zoomOut()},a.prototype.setPitch=function(r){this.scene.setPitch(r)},a.prototype.fitBounds=function(r){this.scene.fitBounds(r)},a.prototype.setMapStatus=function(r){this.scene.setMapStatus(r)},a.prototype.setBgColor=function(r){this.scene.setBgColor(r)},a.prototype.initComponents=function(){this.initControls(),this.initTooltip()},a.prototype.updateComponents=function(){this.updateControls(),this.initTooltip()},a.prototype.initControls=function(){var r=this.options,o=r.zoom,u=r.scale,c=r.layerMenu,p=r.legend;u&&this.addScaleControl(u),o&&this.addZoomControl(o),c&&this.addLayerMenuControl(c),p&&(this.addLegendControl(p),this.emit("add-legend"))},a.prototype.updateControls=function(){var r=this.options,o=r.zoom,u=r.scale,c=r.layerMenu,p=r.legend;(0,Y.Xy)(this.lastOptions.zoom,o)||(o?this.updateZoomControl(o):this.removeZoomControl()),(0,Y.Xy)(this.lastOptions.scale,u)||(u?this.updateScaleControl(u):this.removeScaleControl()),(0,Y.Xy)(this.lastOptions.layerMenu,c)||(c?this.updateLayerMenuControl(c):this.removeLayerMenuControl()),(0,Y.Xy)(this.lastOptions.legend,p)||(p?this.updateLegendControl(p):this.removeLegendControl())},a.prototype.addZoomControl=function(r){this.zoomControl||(this.zoomControl=new Q_(r),this.scene.addControl(this.zoomControl))},a.prototype.updateZoomControl=function(r){if(!this.zoomControl){this.addZoomControl(r);return}this.removeZoomControl(),this.addZoomControl(r)},a.prototype.removeZoomControl=function(){this.zoomControl&&(this.zoomControl.remove(),this.zoomControl=void 0)},a.prototype.addScaleControl=function(r){this.scaleControl||(this.scaleControl=new fC(r),this.scene.addControl(this.scaleControl))},a.prototype.updateScaleControl=function(r){if(!this.scaleControl){this.addScaleControl(r);return}this.removeScaleControl(),this.addScaleControl(r)},a.prototype.removeScaleControl=function(){this.scaleControl&&(this.scaleControl.remove(),this.scaleControl=void 0)},a.prototype.addLayerMenuControl=function(r){var o={},u={};this.layerGroup.getLayers().forEach(function(c){var p=c.name,g=c.layer;u[p]=g})},a.prototype.updateLayerMenuControl=function(r){this.removeLayerMenuControl(),this.addLayerMenuControl(r)},a.prototype.removeLayerMenuControl=function(){},a.prototype.getLegendOptions=function(){return{}},a.prototype.addLegendControl=function(r){if(!this.legendControl){var o=this.theme.components.legend,u=qp({},this.getLegendOptions(),r),c=u.type,p=u.position,g=(0,w._T)(u,["type","position"]),y=[];if(c==="category"){var S=qp({},{domStyles:o.category.domStyles},g);y.push({type:c,options:S})}else if(c==="continue"){var O=qp({},{domStyles:o.continue.domStyles},g);y.push({type:c,options:O})}y.length&&(this.legendControl=new Q9({position:p,items:y}),this.scene.addControl(this.legendControl))}},a.prototype.updateLegendControl=function(r){if(!this.legendControl){this.addLegendControl(r);return}this.removeLegendControl(),this.addLegendControl(r)},a.prototype.removeLegendControl=function(){this.legendControl&&(this.legendControl.remove(),this.legendControl=void 0)},a.prototype.initTooltip=function(){var r=this;this.tooltip&&this.tooltip.destroy();var o=this.options.tooltip;if(o){var u=qp({},{domStyles:this.theme.components.tooltip.domStyles},o),c=this.layerGroup.getInteractionLayers();this.tooltip=new _H(this.scene,c,u),this.tooltip.on("*",function(p){return r.emit(p.type,p)})}},a.prototype.exportPng=function(r){return this.scene.exportPng(r)},a.prototype.destroy=function(){var r;e.prototype.off.call(this,"*"),this.removeScaleControl(),this.removeZoomControl(),this.removeLayerMenuControl(),this.removeLegendControl(),(r=this.tooltip)===null||r===void 0||r.destroy(),this.scene.destroy()},a.DefaultOptions=YN,a}($3.Z),KN;(function(e){e[e.solid=0]="solid",e[e.dash=1]="dash"})(KN||(KN={}));var t4;(function(e){e.TextLayer="textLayer",e.DotLayer="dotLayer",e.IconLayer="iconLayer",e.DotDensity="dotDensityLayer",e.ColumnLayer="columnLayer",e.HeatmapLayer="heatmapLayer",e.GridLayer="gridLayer",e.HexbinLayer="hexbinLayer",e.LinesLayer="linesLayer",e.PathLayer="pathLayer",e.ArcLayer="arcLayer",e.AreaLayer="areaLayer",e.PrismLayer="prismLayer"})(t4||(t4={}));var r4=function(){function e(){}return e.aggregation=function(a,r){var o=r.type,u=o===void 0?"grid":o,c=r.radius,p=r.method,g=r.field,y={type:u,size:c,method:p,field:g};a.transforms?(a.transforms=a.transforms.filter(function(S){return S.type!==y.type}),a.transforms.push(y)):a.transforms=[y]},e}(),qN=["name","zIndex","visible","minZoom","maxZoom","pickingBuffer","autoFit","blend"],Px=function(e){(0,w.ZT)(a,e);function a(r){var o=e.call(this)||this;return o.options=qp({},o.getDefaultOptions(),r),o.lastOptions=o.options,o}return a.prototype.getDefaultOptions=function(){return{}},a.prototype.pickLayerConfig=function(r){var o=(0,Y.ei)(r,qN);return o},a.prototype.addTo=function(r){r.addLayer(this.layer)},a.prototype.remove=function(r){r.removeLayer(this.layer)},a.prototype.update=function(r){this.updateOption(r),this.updateConfig(r)},a.prototype.updateOption=function(r){this.lastOptions=this.options,this.options=qp({},this.options,r)},a.prototype.updateConfig=function(r){!(0,Y.o8)(r.zIndex)&&!(0,Y.Xy)(this.lastOptions.zIndex,this.options.zIndex)&&this.setIndex(r.zIndex),!(0,Y.o8)(r.blend)&&!(0,Y.Xy)(this.lastOptions.blend,this.options.blend)&&this.setBlend(r.blend),!(0,Y.o8)(r.minZoom)&&!(0,Y.Xy)(this.lastOptions.minZoom,this.options.minZoom)&&this.setMinZoom(r.minZoom),!(0,Y.o8)(r.maxZoom)&&!(0,Y.Xy)(this.lastOptions.maxZoom,this.options.maxZoom)&&this.setMinZoom(r.maxZoom),!(0,Y.o8)(r.visible)&&!(0,Y.Xy)(this.lastOptions.visible,this.options.visible)&&(r.visible?this.show():this.hide())},a.prototype.render=function(){this.layer.renderLayers()},a.prototype.setSource=function(r){if(r instanceof q_)this.layer.setSource(r);else{var o=r.data,u=r.aggregation,c=(0,w._T)(r,["data","aggregation"]);u&&r4.aggregation(c,u);var p=this.layer.getSource();p?this.layer.setData(o,c):this.layer.source(o,c)}},a.prototype.changeData=function(r){this.setSource(r)},a.prototype.setIndex=function(r){this.layer.setIndex(r)},a.prototype.setBlend=function(r){this.layer.setBlend(r)},a.prototype.setMinZoom=function(r){this.layer.setMinZoom(r)},a.prototype.setMaxZoom=function(r){this.layer.setMaxZoom(r)},a.prototype.show=function(){this.layer.inited&&this.layer.show()},a.prototype.hide=function(){this.layer.inited&&this.layer.hide()},a.prototype.toggleVisible=function(){this.isVisible()?this.hide():this.show()},a.prototype.isVisible=function(){return this.layer.inited?this.layer.isVisible():this.options.visible},a.prototype.fitBounds=function(r){this.layer.fitBounds(r)},a.prototype.on=function(r,o){return eR.indexOf(r)!==-1?this.layer.on(r,o):e.prototype.on.call(this,r,o),this},a.prototype.once=function(r,o){return eR.indexOf(r)!==-1?this.layer.once(r,o):e.prototype.once.call(this,r,o),this},a.prototype.off=function(r,o){return eR.indexOf(r)!==-1?this.layer.off(r,o):e.prototype.off.call(this,r,o),this},a.LayerType=t4,a.LayerConfigkeys=qN,a}($3.Z);function f_(e,a){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var u={};return e.forEach(function(c,p){u[c]=r[p]}),delete u.undefined,a(u)}}var ul=function(){function e(){}return e.shape=function(a,r){if((0,Y.HD)(r))a.shape(r);else if((0,Y.mf)(r)){var o=[];a.shape(o.join("*"),f_(o,r))}else if((0,Y.Kn)(r)){var u=r.field?r.field:"";if((0,Y.mf)(r.value)){var o=(0,Y.kJ)(u)?u:u.split("*");a.shape(u,f_(o,r.value))}else a.shape(u,r.value);(0,Y.HD)(u)&&r.scale&&e.scale(a,u,r.scale)}},e.size=function(a,r){if((0,Y.hj)(r))a.size(r);else if((0,Y.kJ)(r))a.size(r);else if((0,Y.mf)(r)){var o=[];a.size(o.join("*"),f_(o,r))}else if((0,Y.Kn)(r)){var u=r.field?r.field:"";if((0,Y.mf)(r.value)){var o=(0,Y.kJ)(u)?u:u.split("*");a.size(u,f_(o,r.value))}else a.size(u,r.value);(0,Y.HD)(u)&&r.scale&&e.scale(a,u,r.scale)}},e.color=function(a,r){if((0,Y.HD)(r))a.color(r);else if((0,Y.mf)(r)){var o=[];a.color(o.join("*"),f_(o,r))}else if((0,Y.Kn)(r)){var u=r.field?r.field:"";if((0,Y.mf)(r.value)){var o=(0,Y.kJ)(u)?u:u.split("*");a.color(u,f_(o,r.value))}else a.color(u,r.value);(0,Y.HD)(u)&&r.scale&&e.scale(a,u,r.scale)}},e.style=function(a,r){r&&a.style(r)},e.state=function(a,r){var o=r.active,u=r.select;o&&a.active(o),u&&a.select(u)},e.rotate=function(a,r){(0,Y.HD)(r)||(0,Y.mf)(r)||(0,Y.Kn)(r)},e.texture=function(a,r){(0,Y.HD)(r)&&a.texture(r)},e.animate=function(a,r){((0,Y.jn)(r)||(0,Y.Kn)(r))&&a.animate(r)},e.scale=function(a,r,o){a.scale(r,o)},e.filter=function(a,r){var o=r.field?r.field:"",u=(0,Y.kJ)(o)?o:o.split("*");a.filter(u.join("*"),f_(u,r.value))},e}();function OH(e,a){var r=a.field,o=a.content,u=a.style,c=u===void 0?{}:u,p=a.state,g=c.fontSize,y=c.fill,S=r||o||"",O={field:S,value:"text"};ul.shape(e,O),g&&ul.size(e,g),y&&ul.color(e,y),c&&ul.style(e,c),p&&ul.state(e,p)}var QN={style:{fontSize:12}},kH=[],FH=function(e){(0,w.ZT)(a,e);function a(r){var o=e.call(this,r)||this;o.type=Px.LayerType.TextLayer,o.interaction=!1;var u=o.options,c=u.name,p=u.source,g=o.pickLayerConfig(o.options);return o.name=c||(0,Y.EL)(o.type),o.layer=new v1((0,w.pi)((0,w.pi)({},g),{name:o.name})),o.mappingLayer(o.layer,o.options),o.setSource(p),o}return a.prototype.getDefaultOptions=function(){return QN},a.prototype.mappingLayer=function(r,o){OH(r,o)},a.prototype.update=function(r){e.prototype.update.call(this,r),this.mappingLayer(this.layer,this.options)},a.DefaultOptions=QN,a.LayerOptionsKeys=Px.LayerConfigkeys.concat(kH),a}(Px),n4;(function(e){e.Dot="dot",e.DotDensity="dotDensity",e.Heatmap="heatmap",e.Grid="grid",e.Hexbin="hexbin",e.Path="path",e.Flow="flow",e.Area="area",e.Choropleth="choropleth"})(n4||(n4={}));var DH={autoFit:!1},i4=function(e){(0,w.ZT)(a,e);function a(r,o){var u=this;if(typeof r=="string"||r instanceof Element){if(o===void 0)throw new Error("options is undefined");u=e.call(this,o)||this,u.container=u.createContainer(r),u.theme=u.createTheme(),u.scene=u.createScene(),u.registerResources(),u.initSource()}else u=e.call(this,r)||this;return u}return a.prototype.initSource=function(){this.source=this.createSource(),this.render(),this.inited=!0},a.prototype.initLayersEvent=function(){},a.prototype.getDefaultOptions=function(){return a.DefaultOptions},a.prototype.createSource=function(){var r=this.options.source,o=r.data,u=r.aggregation,c=(0,w._T)(r,["data","aggregation"]);u&&r4.aggregation(c,u);var p=new q_(o,c);return p},a.prototype.createLabelLayer=function(r,o,u){var c=u||{},p=c.visible,g=c.minZoom,y=c.maxZoom,S=c.zIndex,O=S===void 0?0:S,D=new FH((0,w.pi)({name:"labelLayer",visible:p,minZoom:g,maxZoom:y,zIndex:O+.1,source:r},o));return D},a.prototype.updateLabelLayer=function(r,o,u,c){o?c?c.update((0,w.pi)({},o)):(c=this.createLabelLayer(r,o,u),this.layerGroup.addLayer(c)):o===!1&&c&&this.layerGroup.removeLayer(c)},a.prototype.render=function(){var r=this,o=this.createLayers(this.source);this.inited?(this.layerGroup.removeAllLayer(),o.addTo(this.scene),this.layerGroup=o):(this.layerGroup=o,this.scene.sceneService.loaded?this.onSceneLoaded():this.scene.once("loaded",function(){r.onSceneLoaded()})),this.initLayersEvent()},a.prototype.onSceneLoaded=function(){var r=this;this.sceneLoaded=!0,this.layerGroup.isEmpty()?this.onLayersLoaded():this.layerGroup.once("inited-all",function(){r.onLayersLoaded()}),this.layerGroup.addTo(this.scene)},a.prototype.onLayersLoaded=function(){this.layersLoaded=!0,this.initComponents(),this.loaded=!0,this.emit("loaded")},a.prototype.attachToScene=function(r,o){this.scene=r,this.theme=o||e4("default"),this.registerResources(),this.initSource()},a.prototype.unattachFromScene=function(){var r;this.removeAllLayer(),(r=this.tooltip)===null||r===void 0||r.destroy()},a.prototype.addToScene=function(r){this.attachToScene(r)},a.prototype.removeFromScene=function(){var r;this.removeAllLayer(),this.removeScaleControl(),this.removeZoomControl(),this.removeLayerMenuControl(),this.removeLegendControl(),(r=this.tooltip)===null||r===void 0||r.destroy()},a.prototype.update=function(r){if(this.updateOption(r),r.map&&!(0,Y.Xy)(this.lastOptions.map,this.options.map)&&this.updateMap(r.map),this.scene.setEnableRender(!1),r.source&&!(0,Y.Xy)(this.lastOptions.source,this.options.source)){var o=r.source,u=o.data,c=(0,w._T)(o,["data"]);this.changeData(u,c)}this.scene.setEnableRender(!0),this.render(),this.updateComponents(),this.emit("update")},a.prototype.changeData=function(r,o){var u=this;this.options.source=qp({},this.options.source,(0,w.pi)({data:r},o));var c=this.options.source,p=c.aggregation,g=(0,w._T)(c,["aggregation"]);p&&r4.aggregation(g,p),this.source.setData(this.options.source.data,g);var y=this.options.legend;y&&setTimeout(function(){u.updateLegendControl(y)}),this.emit("change-data")},a.DefaultOptions=DH,a.PlotType=n4,a}(PH),LH=qp({},i4.DefaultOptions,{source:{data:{type:"FeatureCollection",features:[]},parser:{type:"geojson"}}}),JN="#2f54eb",sf={active:{fill:!1,stroke:JN,lineWidth:1.5,lineOpacity:.8},select:{fill:!1,stroke:JN,lineWidth:1.5,lineOpacity:.8}},JS=function(e){return(0,Y.o8)(e)||(e.active===!1?sf.active=Object.assign(sf.active,{fill:!1,stroke:!1}):typeof e.active=="object"&&(e.active.fill===!1?sf.active.fill=!1:typeof e.active.fill=="string"&&(sf.active.fill=e.active.fill),e.active.stroke===!1?sf.active.stroke=!1:typeof e.active.stroke=="string"&&(sf.active.stroke=e.active.stroke),typeof e.active.lineWidth=="number"&&(sf.active.lineWidth=e.active.lineWidth),typeof e.active.lineOpacity=="number"&&(sf.active.lineOpacity=e.active.lineOpacity)),e.select===!1?sf.select=Object.assign(sf.select,{fill:!1,stroke:!1}):typeof e.select=="object"&&(e.select.fill===!1?sf.select.fill=!1:typeof e.select.fill=="string"&&(sf.select.fill=e.select.fill),e.select.stroke===!1?sf.select.stroke=!1:typeof e.select.stroke=="string"&&(sf.select.stroke=e.select.stroke),typeof e.select.lineWidth=="number"&&(sf.select.lineWidth=e.select.lineWidth),typeof e.select.lineOpacity=="number"&&(sf.select.lineOpacity=e.select.lineOpacity))),sf};function BH(e,a,r,o,u,c){var p=c.color,g=c.style,y=c.state,S=JS(y),O={active:S.active.fill===!1?!1:{color:S.active.fill},select:!1},D={opacity:g==null?void 0:g.opacity},V=g==null?void 0:g.lineWidth,H=g==null?void 0:g.stroke,ue={opacity:g==null?void 0:g.lineOpacity,dashArray:g==null?void 0:g.lineDash,lineType:g==null?void 0:g.lineType};if(ul.shape(e,"fill"),p&&ul.color(e,p),D&&ul.style(e,D),O&&ul.state(e,O),ul.shape(a,"line"),V&&ul.size(a,V),H&&ul.color(a,H),ue&&ul.style(a,ue),S.active.stroke){var le=S.active.stroke,we=S.active.lineWidth||V,Ne={opacity:S.active.lineOpacity};ul.shape(r,"line"),we&&ul.size(r,we),le&&ul.color(r,le),Ne&&ul.style(r,Ne)}if(S.select.fill){var dt=S.select.fill;ul.shape(o,"fill"),dt&&ul.color(o,dt),D&&ul.style(o,D),ul.state(o,{select:!1,active:!1})}if(S.select.stroke){var mt=S.select.stroke,we=S.select.lineWidth||V,Lt={opacity:S.select.lineOpacity};ul.shape(u,"line"),we&&ul.size(u,we),mt&&ul.color(u,mt),Lt&&ul.style(u,Lt)}}var NH=/\s/;function zH(e){for(var a=e.length;a--&&NH.test(e.charAt(a)););return a}var UH=zH,ZH=/^\s+/;function VH(e){return e&&e.slice(0,UH(e)+1).replace(ZH,"")}var HH=VH,e8=0/0,jH=/^[-+]0x[0-9a-f]+$/i,WH=/^0b[01]+$/i,GH=/^0o[0-7]+$/i,XH=parseInt;function $H(e){if(typeof e=="number")return e;if(K3(e))return e8;if(q3(e)){var a=typeof e.valueOf=="function"?e.valueOf():e;e=q3(a)?a+"":a}if(typeof e!="string")return e===0?e:+e;e=HH(e);var r=WH.test(e);return r||GH.test(e)?XH(e.slice(2),r?2:8):jH.test(e)?e8:+e}var t8=$H,r8=1/0,YH=17976931348623157e292;function KH(e){if(!e)return e===0?e:0;if(e=t8(e),e===r8||e===-r8){var a=e<0?-1:1;return a*YH}return e===e?e:0}var qH=KH;function QH(e){var a=qH(e),r=a%1;return a===a?r?a-r:a:0}var JH=QH,ej=Y3.isFinite,tj=Math.min;function rj(e){var a=Math[e];return function(r,o){if(r=t8(r),o=o==null?0:tj(JH(o),292),o&&ej(r)){var u=(Q5(r)+"e").split("e"),c=a(u[0]+"e"+(+u[1]+o));return u=(Q5(c)+"e").split("e"),+(u[0]+"e"+(+u[1]-o))}return a(r)}}var nj=rj,ij=nj("round"),n8=ij,aj=function(e){return!Array.isArray(e[0].value)},oj=function(e){if(aj(e))return e;var a=e.map(function(r){return(0,w.pi)((0,w.pi)({},r),{value:[n8(r.value[0],2),n8(r.value[1],2)]})});return a},i8={visible:!0,state:{active:!1,select:!1},enabledMultiSelect:!1},sj=["color","style","state","enabledMultiSelect"],a4=function(e){(0,w.ZT)(a,e);function a(r){var o=e.call(this,r)||this;o.selectData=[],o.type=Px.LayerType.AreaLayer,o.interaction=!0,o.onHighlighHandle=function(ue){var le=ue.feature,we=ue.featureId;o.setHighlightLayerSource(le,we)},o.onUnhighlighHandle=function(){o.setHighlightLayerSource()},o.onSelectHandle=function(ue){var le=o.options.enabledMultiSelect,we=ue.feature,Ne=ue.featureId,dt=(0,Y.d9)(o.selectData),mt=dt.findIndex(function(Wt){return Wt.featureId===Ne});if(mt===-1)le?dt.push({feature:we,featureId:Ne}):dt=[{feature:we,featureId:Ne}],o.emit("select",we,(0,Y.d9)(dt));else{var Lt=dt[mt];le?dt.splice(mt,1):dt=[],o.emit("unselect",Lt,(0,Y.d9)(dt))}o.setSelectLayerSource(dt)};var u=o.options,c=u.name,p=u.source,g=u.visible,y=u.minZoom,S=u.maxZoom,O=u.zIndex,D=O===void 0?0:O,V=o.pickLayerConfig(o.options),H=JS(o.options.state);return o.name=c||(0,Y.EL)(o.type),o.layer=new Py((0,w.pi)((0,w.pi)({},V),{name:o.name})),o.strokeLayer=new Ry({name:"strokeLayer",visible:g,zIndex:D,minZoom:y,maxZoom:S}),o.highlightLayer=new Ry({name:"highlightLayer",visible:g&&!!H.active.stroke,zIndex:D+.1,minZoom:y,maxZoom:S}),o.selectFillLayer=new Py({name:"selectFillLayer",visible:g&&!!H.select.fill,zIndex:D+.1,minZoom:y,maxZoom:S}),o.selectStrokeLayer=new Ry({name:"selectStrokeLayer",visible:g&&!!H.select.stroke,zIndex:D+.1,minZoom:y,maxZoom:S}),o.mappingLayer(o.options),o.setSource(p),o.initEvent(),o}return a.prototype.getDefaultOptions=function(){return i8},a.prototype.mappingLayer=function(r){BH(this.layer,this.strokeLayer,this.highlightLayer,this.selectFillLayer,this.selectStrokeLayer,r)},a.prototype.setSource=function(r){e.prototype.setSource.call(this,r),this.setStrokeLayerSource(),this.setHighlightLayerSource(),this.selectFillLayer.source({type:"FeatureCollection",features:[]},{parser:{type:"geojson"}}),this.selectStrokeLayer.source({type:"FeatureCollection",features:[]},{parser:{type:"geojson"}})},a.prototype.setStrokeLayerSource=function(){var r=this.layer.getSource();if(r)this.strokeLayer.setSource(r);else{var o=this.layer.sourceOption,u=o.data,c=o.options;this.strokeLayer.source(u,c)}},a.prototype.setHighlightLayerSource=function(r,o){if(o===void 0&&(o=-999),this.highlightLayerData!==o){var u=r?[r]:[];this.highlightLayer.setData({type:"FeatureCollection",features:u},{parser:{type:"geojson"}}),this.highlightLayerData=o}},a.prototype.setSelectLayerSource=function(r){if(r===void 0&&(r=[]),!(this.selectData.length===r.length&&(0,Y.Xy)(this.selectData.map(function(u){var c=u.featureId;return c}),r.map(function(u){var c=u.featureId;return c})))){var o=r.map(function(u){var c=u.feature;return c});this.selectFillLayer.setData({type:"FeatureCollection",features:o},{parser:{type:"geojson"}}),this.selectStrokeLayer.setData({type:"FeatureCollection",features:o},{parser:{type:"geojson"}}),this.selectData=r}},a.prototype.initEvent=function(){this.layer.off("mousemove",this.onHighlighHandle),this.layer.off("unmousemove",this.onHighlighHandle),this.layer.off("click",this.onSelectHandle),this.selectData=[],this.highlightLayerData=null,this.options.state&&(this.options.state.active&&(this.layer.on("mousemove",this.onHighlighHandle),this.layer.on("unmousemove",this.onUnhighlighHandle)),this.options.state.select&&this.layer.on("click",this.onSelectHandle))},a.prototype.addTo=function(r){r.addLayer(this.layer),r.addLayer(this.strokeLayer),r.addLayer(this.highlightLayer),r.addLayer(this.selectFillLayer),r.addLayer(this.selectStrokeLayer)},a.prototype.remove=function(r){r.removeLayer(this.layer),r.removeLayer(this.strokeLayer),r.removeLayer(this.highlightLayer),r.removeLayer(this.selectFillLayer),r.removeLayer(this.selectStrokeLayer)},a.prototype.update=function(r){if(e.prototype.update.call(this,r),this.mappingLayer(this.options),this.options.visible){!(0,Y.o8)(r.state)&&!(0,Y.Xy)(this.lastOptions.state,this.options.state)&&this.updateHighlightLayer();var o=JS(this.options.state);o.active.stroke&&this.setHighlightLayerSource(),(o.select.fill||o.select.stroke)&&this.setSelectLayerSource()}this.initEvent()},a.prototype.updateHighlightLayer=function(){var r=JS(this.options.state),o=JS(this.lastOptions.state);o.active.stroke!==r.active.stroke&&(r.active.stroke?this.highlightLayer.show():this.highlightLayer.hide()),o.select.fill!==r.select.fill&&(r.select.fill?this.selectFillLayer.show():this.selectFillLayer.hide()),o.select.stroke!==r.select.stroke&&(r.select.stroke?this.selectStrokeLayer.show():this.selectStrokeLayer.hide())},a.prototype.setIndex=function(r){this.layer.setIndex(r),this.strokeLayer.setIndex(r),this.highlightLayer.setIndex(r+.1),this.selectFillLayer.setIndex(r+.1),this.selectStrokeLayer.setIndex(r+.1)},a.prototype.setMinZoom=function(r){this.layer.setMinZoom(r),this.strokeLayer.setMinZoom(r),this.highlightLayer.setMinZoom(r),this.selectFillLayer.setMinZoom(r),this.selectStrokeLayer.setMinZoom(r)},a.prototype.setMaxZoom=function(r){this.layer.setMaxZoom(r),this.strokeLayer.setMaxZoom(r),this.highlightLayer.setMaxZoom(r),this.selectFillLayer.setMaxZoom(r),this.selectStrokeLayer.setMaxZoom(r)},a.prototype.show=function(){this.layer.inited&&(this.layer.show(),this.strokeLayer.show(),this.selectFillLayer.show(),this.selectStrokeLayer.show())},a.prototype.hide=function(){this.layer.inited&&(this.layer.hide(),this.strokeLayer.hide(),this.selectFillLayer.hide(),this.selectStrokeLayer.hide())},a.prototype.getColorLegendItems=function(){var r=this.layer.getLegendItems("color");if(Array.isArray(r)&&r.length!==0){var o=oj(r);return o}return[]},a.prototype.setActive=function(r){},a.prototype.setSelect=function(r){},a.DefaultOptions=i8,a.LayerOptionsKeys=Px.LayerConfigkeys.concat(sj),a}(Px),uj=function(e){(0,w.ZT)(a,e);function a(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=i4.PlotType.Area,r}return a.prototype.getDefaultOptions=function(){return a.DefaultOptions},a.prototype.createLayers=function(r){this.areaLayer=new a4((0,w.pi)({source:r},(0,Y.ei)(this.options,a4.LayerOptionsKeys)));var o=new $N([this.areaLayer]);return this.options.label&&(this.labelLayer=this.createLabelLayer(r,this.options.label,this.options),o.addLayer(this.labelLayer)),o},a.prototype.updateLayers=function(r){var o=(0,Y.ei)(r,a4.LayerOptionsKeys);this.areaLayer.update(o),this.updateLabelLayer(this.source,r.label,this.options,this.labelLayer)},a.prototype.initLayersEvent=function(){},a.prototype.getLegendOptions=function(){var r=this.areaLayer.getColorLegendItems();return r.length!==0?{type:"category",items:r}:{}},a.DefaultOptions=LH,a}(i4),pW=function(e,a){var r={}.toString;return r.call(e)==="[object ".concat(a,"]")},dW=function(e){return Object.prototype.toString.call(e).slice(8,-1)},o4=function(e){if(!e||typeof e!="object")return e;var a;return Array.isArray(e)?a=e.map(function(r){return o4(r)}):(a={},Object.keys(e).forEach(function(r){return a[r]=o4(e[r])})),a},vW=function(e){if(!e)return e;var a={};for(var r in e)a[r]=e[r];return a},eE=function(){return eE=Object.assign||function(e){for(var a,r=1,o=arguments.length;r<o;r++){a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},eE.apply(this,arguments)},lj=function(e,a){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&a.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(e);u<o.length;u++)a.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(e,o[u])&&(r[o[u]]=e[o[u]]);return r},a8=function(e){var a=e.source,r=lj(e,["source"]),o=eE(eE({},o4(r)),{source:eE({},a)});return o},s4=function(){return s4=Object.assign||function(e){for(var a,r=1,o=arguments.length;r<o;r++){a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},s4.apply(this,arguments)},rR=function(e,a){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&a.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(e);u<o.length;u++)a.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(e,o[u])&&(r[o[u]]=e[o[u]]);return r};function cj(e,a){var r=(0,X.useRef)(),o=(0,X.useRef)(),u=(0,X.useRef)(null),c=a.onReady;return(0,X.useEffect)(function(){if(!(!r.current||!o.current||(0,Y.Xy)(o.current,a))){var p=!1,g=!1,y=!1,S=o.current,O=S.onReady,D=S.map,V=S.source,H=V.data,ue=rR(V,["data"]),le=rR(S,["onReady","map","source"]),we=a.onReady,Ne=a.map,dt=a.source,mt=dt.data,Lt=rR(dt,["data"]),Wt=rR(a,["onReady","map","source"]);if(g=!(0,Y.Xy)(D,Ne),p=!(0,Y.Xy)(ue,Lt)||H!==mt,y=!(0,Y.Xy)(le,Wt),o.current=a8(a),g){var qt=(0,Y.ei)(Ne,["center","pitch","rotation","zoom","style"]);r.current.updateMap(qt)}p&&(r.current.loaded?r.current.changeData(mt,Lt):r.current.once("loaded",function(){var ir;(ir=r.current)===null||ir===void 0||ir.changeData(mt,Lt)})),y&&(r.current.loaded?r.current.update(Wt):r.current.once("loaded",function(){var ir;(ir=r.current)===null||ir===void 0||ir.update(Wt)}))}},[a]),(0,X.useEffect)(function(){return u.current?(o.current||(o.current=a8(a)),r.current=new e(u.current,s4({},a)),c&&r.current.once("loaded",function(){c(r.current)}),function(){r.current&&(r.current.destroy(),r.current=void 0)}):function(){return null}},[]),{plotRef:r,containerRef:u}}var fj=function(e,a){e&&((0,Y.mf)(e)?e(a):e.current=a)},hj=function(){var e=function(a,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&(o[c]=u[c])},e(a,r)};return function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(a,r);function o(){this.constructor=a}a.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),pj=function(e){hj(a,e);function a(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={hasError:!1},r.renderError=function(o){var u=r.props.errorTemplate;switch(o){default:return typeof u=="function"?u(o):u||X.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",o.message)}},r}return a.getDerivedStateFromError=function(r){return{hasError:!0,error:r}},a.getDerivedStateFromProps=function(r,o){return o.children!==r.children?{children:r.children,hasError:!1,error:void 0}:null},a.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):X.createElement(X.Fragment,null,this.props.children)},a}(X.Component),dj=pj,vj=F(24561),gj=function(e){var a=e.loadingTemplate,r=function(){return a||X.createElement(vj.ZP,{viewBox:"0 0 400 180",width:200,height:90,speed:1},X.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),X.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),X.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),X.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),X.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),X.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),X.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),X.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),X.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),X.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"}))};return X.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:"#fff"}},r())},mj=gj,yj=function(e,a){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&a.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(e);u<o.length;u++)a.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(e,o[u])&&(r[o[u]]=e[o[u]]);return r},_j=(0,X.forwardRef)(function(e,a){var r=e.chartRef,o=e.containerStyle,u=o===void 0?{height:"inherit"}:o,c=e.className,p=e.loading,g=e.loadingTemplate,y=e.errorTemplate,S=yj(e,["chartRef","containerStyle","className","loading","loadingTemplate","errorTemplate"]),O=cj(uj,S),D=O.plotRef,V=O.containerRef;return(0,X.useEffect)(function(){fj(r,D.current)},[D.current]),(0,X.useImperativeHandle)(a,function(){return{getChart:function(){return D.current}}}),X.createElement(dj,{errorTemplate:y},p&&X.createElement(mj,{loadingTemplate:g}),X.createElement("div",{className:c,style:u,ref:V}))}),xj=_j},79611:function(xt,N,F){"use strict";var $=F(67294),X=F(19372),w=F(11924),Y=F(79360),G=F(24770),K=F(80803),Q=function(ee,xe){var ce={};for(var he in ee)Object.prototype.hasOwnProperty.call(ee,he)&&xe.indexOf(he)<0&&(ce[he]=ee[he]);if(ee!=null&&typeof Object.getOwnPropertySymbols=="function")for(var J=0,he=Object.getOwnPropertySymbols(ee);J<he.length;J++)xe.indexOf(he[J])<0&&Object.prototype.propertyIsEnumerable.call(ee,he[J])&&(ce[he[J]]=ee[he[J]]);return ce},oe=(0,$.forwardRef)(function(ee,xe){var ce=ee.chartRef,he=ee.style,J=he===void 0?{height:"inherit"}:he,M=ee.className,E=ee.loading,fe=ee.loadingTemplate,me=ee.errorTemplate,ke=Q(ee,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Pe=(0,w.Z)(X.$Q,ke),Le=Pe.chart,tt=Pe.container;return(0,$.useEffect)(function(){(0,Y.J)(ce,Le.current)},[Le.current]),(0,$.useImperativeHandle)(xe,function(){return{getChart:function(){return Le.current}}}),$.createElement(G.Z,{errorTemplate:me},E&&$.createElement(K.Z,{loadingTemplate:fe,theme:ee.theme}),$.createElement("div",{className:M,style:J,ref:tt}))});N.Z=oe},78677:function(xt,N,F){"use strict";var $=F(67294),X=F(19372),w=F(11924),Y=F(79360),G=F(24770),K=F(80803),Q=function(ee,xe){var ce={};for(var he in ee)Object.prototype.hasOwnProperty.call(ee,he)&&xe.indexOf(he)<0&&(ce[he]=ee[he]);if(ee!=null&&typeof Object.getOwnPropertySymbols=="function")for(var J=0,he=Object.getOwnPropertySymbols(ee);J<he.length;J++)xe.indexOf(he[J])<0&&Object.prototype.propertyIsEnumerable.call(ee,he[J])&&(ce[he[J]]=ee[he[J]]);return ce},oe=(0,$.forwardRef)(function(ee,xe){var ce=ee.chartRef,he=ee.style,J=he===void 0?{height:"inherit"}:he,M=ee.className,E=ee.loading,fe=ee.loadingTemplate,me=ee.errorTemplate,ke=Q(ee,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Pe=(0,w.Z)(X.sg,ke),Le=Pe.chart,tt=Pe.container;return(0,$.useEffect)(function(){(0,Y.J)(ce,Le.current)},[Le.current]),(0,$.useImperativeHandle)(xe,function(){return{getChart:function(){return Le.current}}}),$.createElement(G.Z,{errorTemplate:me},E&&$.createElement(K.Z,{loadingTemplate:fe,theme:ee.theme}),$.createElement("div",{className:M,style:J,ref:tt}))});N.Z=oe},80652:function(xt,N,F){"use strict";var $=F(67294),X=F(19372),w=F(11924),Y=F(79360),G=F(24770),K=F(80803),Q=function(ee,xe){var ce={};for(var he in ee)Object.prototype.hasOwnProperty.call(ee,he)&&xe.indexOf(he)<0&&(ce[he]=ee[he]);if(ee!=null&&typeof Object.getOwnPropertySymbols=="function")for(var J=0,he=Object.getOwnPropertySymbols(ee);J<he.length;J++)xe.indexOf(he[J])<0&&Object.prototype.propertyIsEnumerable.call(ee,he[J])&&(ce[he[J]]=ee[he[J]]);return ce},oe=(0,$.forwardRef)(function(ee,xe){var ce=ee.chartRef,he=ee.style,J=he===void 0?{height:"inherit"}:he,M=ee.className,E=ee.loading,fe=ee.loadingTemplate,me=ee.errorTemplate,ke=Q(ee,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Pe=(0,w.Z)(X.x1,ke),Le=Pe.chart,tt=Pe.container;return(0,$.useEffect)(function(){(0,Y.J)(ce,Le.current)},[Le.current]),(0,$.useImperativeHandle)(xe,function(){return{getChart:function(){return Le.current}}}),$.createElement(G.Z,{errorTemplate:me},E&&$.createElement(K.Z,{loadingTemplate:fe,theme:ee.theme}),$.createElement("div",{className:M,style:J,ref:tt}))});N.Z=oe},63430:function(xt,N,F){"use strict";var $=F(67294),X=F(19372),w=F(11924),Y=F(79360),G=F(24770),K=F(80803),Q=function(ee,xe){var ce={};for(var he in ee)Object.prototype.hasOwnProperty.call(ee,he)&&xe.indexOf(he)<0&&(ce[he]=ee[he]);if(ee!=null&&typeof Object.getOwnPropertySymbols=="function")for(var J=0,he=Object.getOwnPropertySymbols(ee);J<he.length;J++)xe.indexOf(he[J])<0&&Object.prototype.propertyIsEnumerable.call(ee,he[J])&&(ce[he[J]]=ee[he[J]]);return ce},oe=(0,$.forwardRef)(function(ee,xe){var ce=ee.chartRef,he=ee.style,J=he===void 0?{height:"inherit"}:he,M=ee.className,E=ee.loading,fe=ee.loadingTemplate,me=ee.errorTemplate,ke=Q(ee,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Pe=(0,w.Z)(X.by,ke),Le=Pe.chart,tt=Pe.container;return(0,$.useEffect)(function(){(0,Y.J)(ce,Le.current)},[Le.current]),(0,$.useImperativeHandle)(xe,function(){return{getChart:function(){return Le.current}}}),$.createElement(G.Z,{errorTemplate:me},E&&$.createElement(K.Z,{loadingTemplate:fe,theme:ee.theme}),$.createElement("div",{className:M,style:J,ref:tt}))});N.Z=oe},24770:function(xt,N,F){"use strict";var $=F(67294),X=function(){var Y=function(G,K){return Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,oe){Q.__proto__=oe}||function(Q,oe){for(var ee in oe)Object.prototype.hasOwnProperty.call(oe,ee)&&(Q[ee]=oe[ee])},Y(G,K)};return function(G,K){if(typeof K!="function"&&K!==null)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");Y(G,K);function Q(){this.constructor=G}G.prototype=K===null?Object.create(K):(Q.prototype=K.prototype,new Q)}}(),w=function(Y){X(G,Y);function G(){var K=Y!==null&&Y.apply(this,arguments)||this;return K.state={hasError:!1},K.renderError=function(Q){var oe=K.props.errorTemplate;switch(Q){default:return typeof oe=="function"?oe(Q):oe||$.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",Q.message)}},K}return G.getDerivedStateFromError=function(K){return{hasError:!0,error:K}},G.getDerivedStateFromProps=function(K,Q){return Q.children!==K.children?{children:K.children,hasError:!1,error:void 0}:null},G.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):$.createElement($.Fragment,null,this.props.children)},G}($.Component);N.Z=w},11924:function(xt,N,F){"use strict";F.d(N,{Z:function(){return ye}});var $=F(67294),X=F(21030),w=F(73935),Y=F.t(w,2),G=function(){return G=Object.assign||function(Te){for(var Je,pe=1,Me=arguments.length;pe<Me;pe++){Je=arguments[pe];for(var ze in Je)Object.prototype.hasOwnProperty.call(Je,ze)&&(Te[ze]=Je[ze])}return Te},G.apply(this,arguments)},K=function(Te,Je,pe,Me){function ze(De){return De instanceof pe?De:new pe(function(Ct){Ct(De)})}return new(pe||(pe=Promise))(function(De,Ct){function Vt(Ee){try{Ue(Me.next(Ee))}catch(et){Ct(et)}}function Ve(Ee){try{Ue(Me.throw(Ee))}catch(et){Ct(et)}}function Ue(Ee){Ee.done?De(Ee.value):ze(Ee.value).then(Vt,Ve)}Ue((Me=Me.apply(Te,Je||[])).next())})},Q=function(Te,Je){var pe={label:0,sent:function(){if(De[0]&1)throw De[1];return De[1]},trys:[],ops:[]},Me,ze,De,Ct;return Ct={next:Vt(0),throw:Vt(1),return:Vt(2)},typeof Symbol=="function"&&(Ct[Symbol.iterator]=function(){return this}),Ct;function Vt(Ue){return function(Ee){return Ve([Ue,Ee])}}function Ve(Ue){if(Me)throw new TypeError("Generator is already executing.");for(;Ct&&(Ct=0,Ue[0]&&(pe=0)),pe;)try{if(Me=1,ze&&(De=Ue[0]&2?ze.return:Ue[0]?ze.throw||((De=ze.return)&&De.call(ze),0):ze.next)&&!(De=De.call(ze,Ue[1])).done)return De;switch(ze=0,De&&(Ue=[Ue[0]&2,De.value]),Ue[0]){case 0:case 1:De=Ue;break;case 4:return pe.label++,{value:Ue[1],done:!1};case 5:pe.label++,ze=Ue[1],Ue=[0];continue;case 7:Ue=pe.ops.pop(),pe.trys.pop();continue;default:if(De=pe.trys,!(De=De.length>0&&De[De.length-1])&&(Ue[0]===6||Ue[0]===2)){pe=0;continue}if(Ue[0]===3&&(!De||Ue[1]>De[0]&&Ue[1]<De[3])){pe.label=Ue[1];break}if(Ue[0]===6&&pe.label<De[1]){pe.label=De[1],De=Ue;break}if(De&&pe.label<De[2]){pe.label=De[2],pe.ops.push(Ue);break}De[2]&&pe.ops.pop(),pe.trys.pop();continue}Ue=Je.call(Te,pe)}catch(Ee){Ue=[6,Ee],ze=0}finally{Me=De=0}if(Ue[0]&5)throw Ue[1];return{value:Ue[0]?Ue[1]:void 0,done:!0}}},oe=G({},Y),ee=oe.version,xe=oe.render,ce=oe.unmountComponentAtNode,he;try{var J=Number((ee||"").split(".")[0]);J>=18&&(he=oe.createRoot)}catch(Te){}function M(Te){var Je=oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Je&&typeof Je=="object"&&(Je.usingClientEntryPoint=Te)}var E="__rc_react_root__";function fe(Te,Je){M(!0);var pe=Je[E]||he(Je);M(!1),pe.render(Te),Je[E]=pe}function me(Te,Je){xe(Te,Je)}function ke(Te,Je){}function Pe(Te,Je){if(he){fe(Te,Je);return}me(Te,Je)}function Le(Te){return K(this,void 0,void 0,function(){return Q(this,function(Je){return[2,Promise.resolve().then(function(){var pe;(pe=Te[E])===null||pe===void 0||pe.unmount(),delete Te[E]})]})})}function tt(Te){ce(Te)}function ft(Te){}function ge(Te){return K(this,void 0,void 0,function(){return Q(this,function(Je){return he!==void 0?[2,Le(Te)]:(tt(Te),[2])})})}var be=new Map,Ce=function(Te,Je,pe){var Me=document.createElement("div");return Je==="tooltip"&&(Me.setAttribute("data-uuid",pe),be.has(pe)?Me=be.get(pe):be.set(pe,Me),Me.className="g2-tooltip"),Pe(Te,Me),Me},Ye=Ce,je=function(Te,Je){var pe={}.toString;return pe.call(Te)==="[object ".concat(Je,"]")},Et=function(Te){if(!Te)return Te;var Je={};for(var pe in Te)Je[pe]=Te[pe];return Je},Ae=function(Te){return Object.prototype.toString.call(Te).slice(8,-1)},Qe=function(Te){if(!Te||typeof Te!="object")return Te;var Je;return Array.isArray(Te)?Je=Te.map(function(pe){return Qe(pe)}):(Je={},Object.keys(Te).forEach(function(pe){return Je[pe]=Qe(Te[pe])})),Je},te=function(Te,Je){for(var pe=Te,Me=0;Me<Je.length;Me+=1)if(pe!=null&&pe[Je[Me]])pe=pe[Je[Me]];else{pe=void 0;break}return pe},Ze=function(Te,Je,pe){if(!Te)return Te;var Me=Te;return Je.forEach(function(ze,De){De<Je.length-1?Me=Me[ze]:Me[ze]=pe}),Te},ie=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Te){var Je=Math.random()*16|0,pe=Te=="x"?Je:Je&3|8;return pe.toString(16)})},Oe=function(){return Oe=Object.assign||function(Te){for(var Je,pe=1,Me=arguments.length;pe<Me;pe++){Je=arguments[pe];for(var ze in Je)Object.prototype.hasOwnProperty.call(Je,ze)&&(Te[ze]=Je[ze])}return Te},Oe.apply(this,arguments)},nt=function(Te,Je){var pe={};for(var Me in Te)Object.prototype.hasOwnProperty.call(Te,Me)&&Je.indexOf(Me)<0&&(pe[Me]=Te[Me]);if(Te!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ze=0,Me=Object.getOwnPropertySymbols(Te);ze<Me.length;ze++)Je.indexOf(Me[ze])<0&&Object.prototype.propertyIsEnumerable.call(Te,Me[ze])&&(pe[Me[ze]]=Te[Me[ze]]);return pe};function ye(Te,Je){var pe=(0,$.useRef)(),Me=(0,$.useRef)(),ze=(0,$.useRef)(null),De=Je.onReady,Ct=Je.onEvent,Vt=function(et,st){var Re;return et===void 0&&(et="image/png"),(Re=pe.current)===null||Re===void 0?void 0:Re.chart.canvas.cfg.el.toDataURL(et,st)},Ve=function(et,st,Re){var Ie;et===void 0&&(et="download"),st===void 0&&(st="image/png");var ct=et;et.indexOf(".")===-1&&(ct="".concat(et,".").concat(st.split("/")[1]));var Tt=(Ie=pe.current)===null||Ie===void 0?void 0:Ie.chart.canvas.cfg.el.toDataURL(st,Re),Qt=document.createElement("a");return Qt.href=Tt,Qt.download=ct,document.body.appendChild(Qt),Qt.click(),document.body.removeChild(Qt),Qt=null,ct},Ue=function(et,st,Re,Ie){var ct=te(et,st);Ze(et,st,function(){for(var Tt=[],Qt=0;Qt<arguments.length;Qt++)Tt[Qt]=arguments[Qt];var wt=je(ct,"Function")?ct.apply(void 0,Tt):ct;return je(wt,"String")||je(wt,"Number")||je(wt,"HTMLDivElement")?wt:Ye(wt,Re,Ie)})},Ee=function(){var et=ie();te(Je,["statistic","content","customHtml"])&&Ue(Je,["statistic","content","customHtml"]),te(Je,["statistic","title","customHtml"])&&Ue(Je,["statistic","title","customHtml"]),typeof Je.tooltip=="object"&&(te(Je,["tooltip","container"])&&Ue(Je,["tooltip","container"],"tooltip",et),te(Je,["tooltip","customContent"])&&Ue(Je,["tooltip","customContent"],"tooltip",et))};return(0,$.useEffect)(function(){if(pe.current&&!(0,X.Xy)(Me.current,Je)){var et=!1;if(Me.current){var st=Me.current,Re=st.data,Ie=st.value,ct=st.percent,Tt=nt(st,["data","value","percent"]),Qt=Je.data,wt=Je.value,se=Je.percent,Ge=nt(Je,["data","value","percent"]);et=(0,X.Xy)(Tt,Ge)}if(Me.current=Qe(Je),et&&(0,X.U2)(Je,"chartType")!=="Mix"){var Ke="data",bt=["percent"],Be=Object.keys(Je);bt.forEach(function(pt){Be.includes(pt)&&(Ke=pt)}),pe.current.changeData((Je==null?void 0:Je[Ke])||[]),pe.current.render()}else Ee(),pe.current.update(Je)}},[Je]),(0,$.useEffect)(function(){if(!ze.current)return function(){return null};Me.current||(Me.current=Qe(Je)),Ee();var et=new Te(ze.current,Oe({},Je));et.toDataURL=function(Re,Ie){return Vt(Re,Ie)},et.downloadImage=function(Re,Ie,ct){return Ve(Re,Ie,ct)},et.render(),pe.current=Et(et),De&&De(et);var st=function(Re){Ct&&Ct(et,Re)};return et.on("*",st),function(){pe.current&&(pe.current.destroy(),pe.current.off("*",st),pe.current=void 0)}},[]),{chart:pe,container:ze}}},80803:function(xt,N,F){"use strict";var $=F(67294),X=F(24561),w=function(Y){var G=Y.loadingTemplate,K=Y.theme,Q=K===void 0?"light":K,oe=function(){return G||$.createElement(X.ZP,{viewBox:"0 0 400 180",width:200,height:90,speed:1,backgroundColor:Q==="dark"?"#262626":"#D9D9D9"},$.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),$.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),$.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),$.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),$.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),$.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),$.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),$.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),$.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),$.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"}))};return $.createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:Q==="dark"?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},oe())};N.Z=w},79360:function(xt,N,F){"use strict";F.d(N,{J:function(){return X}});var $=F(21030),X=function(w,Y){w&&((0,$.mf)(w)?w(Y):w.current=Y)}},13943:function(xt,N,F){"use strict";F.d(N,{Z:function(){return Oe}});var $=F(4942),X=F(1413),w=F(91),Y=F(94740),G=F(94184),K=F.n(G),Q=F(67294),oe=F(72120),ee=F(44962),xe=F(98082),ce=function(ye){return(0,$.Z)({},ye.componentCls,{display:"flex",flexDirection:"column",justifyContent:"flex-end",marginBlock:ye.marginLG,marginInline:0,color:ye.colorText,fontWeight:"500",fontSize:"20px",lineHeight:"38px"})};function he(nt){return(0,xe.Xj)("ProCardOperation",function(ye){var Te=(0,X.Z)((0,X.Z)({},ye),{},{componentCls:".".concat(nt)});return[ce(Te)]})}var J=F(85893),M=function(ye){var Te=ye.className,Je=ye.style,pe=Je===void 0?{}:Je,Me=ye.children,ze=(0,Q.useContext)(Y.ZP.ConfigContext),De=ze.getPrefixCls,Ct=De("pro-card-operation"),Vt=he(Ct),Ve=Vt.wrapSSR,Ue=Vt.hashId,Ee=K()(Ct,Te,Ue);return Ve((0,J.jsx)("div",{className:Ee,style:pe,children:Me}))},E=M,fe=F(87462),me=F(36688),ke=F(5627),Pe=function(ye,Te){return Q.createElement(ke.Z,(0,fe.Z)({},ye,{ref:Te,icon:me.Z}))},Le=Q.forwardRef(Pe),tt=F(83062),ft=F(40411),ge=F(55054),be=function(ye){var Te,Je,pe;return(0,$.Z)({},ye.componentCls,(pe={display:"flex",fontSize:ye.fontSize,"& + &":{marginBlockStart:4},"&-tip":{marginInlineStart:4},"&-wrapper":(0,$.Z)({display:"flex",width:"100%"},"".concat(ye.componentCls,"-status"),{width:"14px"}),"&-icon":{marginInlineEnd:16},"&-trend-icon":{width:0,height:0,borderInlineEnd:"3.5px solid transparent",borderBlockEnd:"9px solid #000",borderInlineStart:"3.5px solid transparent","&-up":{transform:"rotate(0deg)"},"&-down":{transform:"rotate(180deg)"}},"&-content":(0,$.Z)({width:"100%"},"".concat(ye.antCls,"-statistic-content"),{"&-value-int":{fontSize:ye.fontSizeHeading3}}),"&-description":{width:"100%"}},(0,$.Z)(pe,"".concat(ye.antCls,"-statistic-title"),{color:ye.colorText}),(0,$.Z)(pe,"&-trend-up",(0,$.Z)({},"".concat(ye.antCls,"-statistic-content"),(0,$.Z)({color:"#f5222d"},"".concat(ye.componentCls,"-trend-icon"),{borderBlockEndColor:"#f5222d"}))),(0,$.Z)(pe,"&-trend-down",(0,$.Z)({},"".concat(ye.antCls,"-statistic-content"),(0,$.Z)({color:"#389e0d"},"".concat(ye.componentCls,"-trend-icon"),{borderBlockEndColor:"#52c41a"}))),(0,$.Z)(pe,"& &-layout-horizontal",(Te={display:"flex",justifyContent:"space-between"},(0,$.Z)(Te,"".concat(ye.antCls,"-statistic-title"),{marginBlockEnd:0}),(0,$.Z)(Te,"".concat(ye.antCls,"-statistic-content-value"),{fontWeight:500}),(0,$.Z)(Te,"".concat(ye.antCls,"-statistic-title,").concat(ye.antCls,"-statistic-content,").concat(ye.antCls,"-statistic-content-suffix,").concat(ye.antCls,"-statistic-content-prefix,").concat(ye.antCls,"-statistic-content-value-decimal"),{fontSize:ye.fontSize}),Te)),(0,$.Z)(pe,"& &-layout-inline",(Je={display:"inline-flex",color:ye.colorTextSecondary},(0,$.Z)(Je,"".concat(ye.antCls,"-statistic-title"),{marginInlineEnd:"6px",marginBlockEnd:0}),(0,$.Z)(Je,"".concat(ye.antCls,"-statistic-content"),{color:ye.colorTextSecondary}),(0,$.Z)(Je,"".concat(ye.antCls,"-statistic-title,").concat(ye.antCls,"-statistic-content,").concat(ye.antCls,"-statistic-content-suffix,").concat(ye.antCls,"-statistic-content-prefix,").concat(ye.antCls,"-statistic-content-value-decimal"),{fontSize:ye.fontSizeSM}),Je)),pe))};function Ce(nt){return(0,xe.Xj)("Statistic",function(ye){var Te=(0,X.Z)((0,X.Z)({},ye),{},{componentCls:".".concat(nt)});return[be(Te)]})}var Ye=["className","layout","style","description","children","title","tip","status","trend","prefix","icon"],je=function(ye){var Te,Je=ye.className,pe=ye.layout,Me=pe===void 0?"inline":pe,ze=ye.style,De=ye.description,Ct=ye.children,Vt=ye.title,Ve=ye.tip,Ue=ye.status,Ee=ye.trend,et=ye.prefix,st=ye.icon,Re=(0,w.Z)(ye,Ye),Ie=(0,Q.useContext)(Y.ZP.ConfigContext),ct=Ie.getPrefixCls,Tt=ct("pro-card-statistic"),Qt=Ce(Tt),wt=Qt.wrapSSR,se=Qt.hashId,Ge=K()(Tt,Je,se),Ke=K()("".concat(Tt,"-status"),se),bt=K()("".concat(Tt,"-icon"),se),Be=K()("".concat(Tt,"-wrapper"),se),pt=K()("".concat(Tt,"-content"),se),It=K()(se,(Te={},(0,$.Z)(Te,"".concat(Tt,"-layout-").concat(Me),Me),(0,$.Z)(Te,"".concat(Tt,"-trend-").concat(Ee),Ee),Te)),ot=Ve&&(0,J.jsx)(tt.Z,{title:Ve,children:(0,J.jsx)(Le,{className:"".concat(Tt,"-tip ").concat(se).trim()})}),zt=K()("".concat(Tt,"-trend-icon"),se,(0,$.Z)({},"".concat(Tt,"-trend-icon-").concat(Ee),Ee)),Jt=Ee&&(0,J.jsx)("div",{className:zt}),tr=Ue&&(0,J.jsx)("div",{className:Ke,children:(0,J.jsx)(ft.Z,{status:Ue,text:null})}),pr=st&&(0,J.jsx)("div",{className:bt,children:st});return wt((0,J.jsxs)("div",{className:Ge,style:ze,children:[pr,(0,J.jsxs)("div",{className:Be,children:[tr,(0,J.jsxs)("div",{className:pt,children:[(0,J.jsx)(ge.Z,(0,X.Z)({title:(Vt||ot)&&(0,J.jsxs)(J.Fragment,{children:[Vt,ot]}),prefix:(Jt||et)&&(0,J.jsxs)(J.Fragment,{children:[Jt,et]}),className:It},Re)),De&&(0,J.jsx)("div",{className:"".concat(Tt,"-description ").concat(se).trim(),children:De})]})]})]}))},Et=je,Ae=function(ye){return(0,$.Z)({},ye.componentCls,{"&-chart":{display:"flex",flexDirection:"column",marginBlockStart:8,marginBlockEnd:8,"&-left":{marginBlockStart:0,marginInlineEnd:"16px"},"&-right":{marginBlockStart:0,marginInlineStart:"16px"}},"&-content":{display:"flex",flexDirection:"column","&-horizontal":(0,$.Z)({flexDirection:"row"},"".concat(ye.componentCls,"-chart"),{alignItems:"center",alignSelf:"flex-start"})},"&-footer":{marginBlockStart:8,paddingBlockStart:"16px",borderBlockStart:"rgba(0, 0, 0, 0.08) solid ".concat(ye.colorBorder)}})};function Qe(nt){return(0,xe.Xj)("StatisticCard",function(ye){var Te=(0,X.Z)((0,X.Z)({},ye),{},{componentCls:".".concat(nt)});return[Ae(Te)]})}var te=["children","statistic","className","chart","chartPlacement","footer"],Ze=function(ye){var Te,Je=ye.children,pe=ye.statistic,Me=ye.className,ze=ye.chart,De=ye.chartPlacement,Ct=ye.footer,Vt=(0,w.Z)(ye,te),Ve=(0,Q.useContext)(Y.ZP.ConfigContext),Ue=Ve.getPrefixCls,Ee=Ue("pro-statistic-card"),et=Qe(Ee),st=et.wrapSSR,Re=et.hashId,Ie=K()(Ee,Me,Re),ct=pe&&(0,J.jsx)(Et,(0,X.Z)({layout:"vertical"},pe)),Tt=K()("".concat(Ee,"-chart"),Re,(Te={},(0,$.Z)(Te,"".concat(Ee,"-chart-left"),De==="left"&&ze&&pe),(0,$.Z)(Te,"".concat(Ee,"-chart-right"),De==="right"&&ze&&pe),Te)),Qt=ze&&(0,J.jsx)("div",{className:Tt,children:ze}),wt=K()("".concat(Ee,"-content "),Re,(0,$.Z)({},"".concat(Ee,"-content-horizontal"),De==="left"||De==="right")),se=(Qt||ct)&&(De==="left"?(0,J.jsxs)("div",{className:wt,children:[Qt,ct]}):(0,J.jsxs)("div",{className:wt,children:[ct,Qt]})),Ge=Ct&&(0,J.jsx)("div",{className:"".concat(Ee,"-footer ").concat(Re).trim(),children:Ct});return st((0,J.jsxs)(oe.Z,(0,X.Z)((0,X.Z)({className:Ie},Vt),{},{children:[se,Je,Ge]})))},ie=function(ye){return(0,J.jsx)(Ze,(0,X.Z)({bodyStyle:{padding:0}},ye))};Ze.Statistic=Et,Ze.Divider=ee.Z,Ze.Operation=E,Ze.isProCard=!0,Ze.Group=ie;var Oe=Ze},6056:function(xt,N,F){"use strict";F.d(N,{Z:function(){return K}});var $,X,w,Y;function G(){$=document.createElement("table"),X=document.createElement("tr"),w=/^\s*<(\w+|!)[^>]*>/,Y={tr:document.createElement("tbody"),tbody:$,thead:$,tfoot:$,td:X,th:X,"*":document.createElement("div")}}function K(Q){$||G();var oe=w.test(Q)&&RegExp.$1;(!oe||!(oe in Y))&&(oe="*");var ee=Y[oe];Q=typeof Q=="string"?Q.replace(/(^\s*)|(\s*$)/g,""):Q,ee.innerHTML=""+Q;var xe=ee.childNodes[0];return xe&&ee.contains(xe)&&ee.removeChild(xe),xe}},45442:function(xt,N,F){"use strict";F.d(N,{Z:function(){return $}});function $(X,w){if(X)for(var Y in w)w.hasOwnProperty(Y)&&(X.style[Y]=w[Y]);return X}},90494:function(xt,N){"use strict";var F="*",$=function(){function X(){this._events={}}return X.prototype.on=function(w,Y,G){return this._events[w]||(this._events[w]=[]),this._events[w].push({callback:Y,once:!!G}),this},X.prototype.once=function(w,Y){return this.on(w,Y,!0)},X.prototype.emit=function(w){for(var Y=this,G=[],K=1;K<arguments.length;K++)G[K-1]=arguments[K];var Q=this._events[w]||[],oe=this._events[F]||[],ee=function(xe){for(var ce=xe.length,he=0;he<ce;he++)if(xe[he]){var J=xe[he],M=J.callback,E=J.once;E&&(xe.splice(he,1),xe.length===0&&delete Y._events[w],ce--,he--),M.apply(Y,G)}};ee(Q),ee(oe)},X.prototype.off=function(w,Y){if(!w)this._events={};else if(!Y)delete this._events[w];else{for(var G=this._events[w]||[],K=G.length,Q=0;Q<K;Q++)G[Q].callback===Y&&(G.splice(Q,1),K--,Q--);G.length===0&&delete this._events[w]}return this},X.prototype.getEvents=function(){return this._events},X}();N.Z=$},2667:function(xt,N,F){"use strict";var $=F(97582),X=F(90494),w=F(77341),Y=function(G){(0,$.ZT)(K,G);function K(Q){var oe=G.call(this)||this;oe.destroyed=!1;var ee=oe.getDefaultCfg();return oe.cfg=(0,w.CD)(ee,Q),oe}return K.prototype.getDefaultCfg=function(){return{}},K.prototype.get=function(Q){return this.cfg[Q]},K.prototype.set=function(Q,oe){this.cfg[Q]=oe},K.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},K}(X.Z);N.Z=Y},58906:function(xt,N,F){"use strict";F.d(N,{Z:function(){return Io}});var $=F(97582),X=F(43631),w=F(37153),Y=F(77341),G=F(21030),K=0,Q=0,oe=0,ee=1e3,xe,ce,he=0,J=0,M=0,E=typeof performance=="object"&&performance.now?performance:Date,fe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(nr){setTimeout(nr,17)};function me(){return J||(fe(ke),J=E.now()+M)}function ke(){J=0}function Pe(){this._call=this._time=this._next=null}Pe.prototype=Le.prototype={constructor:Pe,restart:function(nr,At,Xt){if(typeof nr!="function")throw new TypeError("callback is not a function");Xt=(Xt==null?me():+Xt)+(At==null?0:+At),!this._next&&ce!==this&&(ce?ce._next=this:xe=this,ce=this),this._call=nr,this._time=Xt,Ce()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ce())}};function Le(nr,At,Xt){var yr=new Pe;return yr.restart(nr,At,Xt),yr}function tt(){me(),++K;for(var nr=xe,At;nr;)(At=J-nr._time)>=0&&nr._call.call(null,At),nr=nr._next;--K}function ft(){J=(he=E.now())+M,K=Q=0;try{tt()}finally{K=0,be(),J=0}}function ge(){var nr=E.now(),At=nr-he;At>ee&&(M-=At,he=nr)}function be(){for(var nr,At=xe,Xt,yr=1/0;At;)At._call?(yr>At._time&&(yr=At._time),nr=At,At=At._next):(Xt=At._next,At._next=null,At=nr?nr._next=Xt:xe=Xt);ce=nr,Ce(yr)}function Ce(nr){if(!K){Q&&(Q=clearTimeout(Q));var At=nr-J;At>24?(nr<1/0&&(Q=setTimeout(ft,nr-E.now()-M)),oe&&(oe=clearInterval(oe))):(oe||(he=E.now(),oe=setInterval(ge,ee)),K=1,fe(ft))}}var Ye=F(52677);function je(nr,At,Xt){nr.prototype=At.prototype=Xt,Xt.constructor=nr}function Et(nr,At){var Xt=Object.create(nr.prototype);for(var yr in At)Xt[yr]=At[yr];return Xt}function Ae(){}var Qe=.7,te=1/Qe,Ze="\\s*([+-]?\\d+)\\s*",ie="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nt=/^#([0-9a-f]{3,8})$/,ye=new RegExp("^rgb\\(".concat(Ze,",").concat(Ze,",").concat(Ze,"\\)$")),Te=new RegExp("^rgb\\(".concat(Oe,",").concat(Oe,",").concat(Oe,"\\)$")),Je=new RegExp("^rgba\\(".concat(Ze,",").concat(Ze,",").concat(Ze,",").concat(ie,"\\)$")),pe=new RegExp("^rgba\\(".concat(Oe,",").concat(Oe,",").concat(Oe,",").concat(ie,"\\)$")),Me=new RegExp("^hsl\\(".concat(ie,",").concat(Oe,",").concat(Oe,"\\)$")),ze=new RegExp("^hsla\\(".concat(ie,",").concat(Oe,",").concat(Oe,",").concat(ie,"\\)$")),De={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};je(Ae,Ee,{copy:function(At){return Object.assign(new this.constructor,this,At)},displayable:function(){return this.rgb().displayable()},hex:Ct,formatHex:Ct,formatHex8:Vt,formatHsl:Ve,formatRgb:Ue,toString:Ue});function Ct(){return this.rgb().formatHex()}function Vt(){return this.rgb().formatHex8()}function Ve(){return Be(this).formatHsl()}function Ue(){return this.rgb().formatRgb()}function Ee(nr){var At,Xt;return nr=(nr+"").trim().toLowerCase(),(At=nt.exec(nr))?(Xt=At[1].length,At=parseInt(At[1],16),Xt===6?et(At):Xt===3?new ct(At>>8&15|At>>4&240,At>>4&15|At&240,(At&15)<<4|At&15,1):Xt===8?st(At>>24&255,At>>16&255,At>>8&255,(At&255)/255):Xt===4?st(At>>12&15|At>>8&240,At>>8&15|At>>4&240,At>>4&15|At&240,((At&15)<<4|At&15)/255):null):(At=ye.exec(nr))?new ct(At[1],At[2],At[3],1):(At=Te.exec(nr))?new ct(At[1]*255/100,At[2]*255/100,At[3]*255/100,1):(At=Je.exec(nr))?st(At[1],At[2],At[3],At[4]):(At=pe.exec(nr))?st(At[1]*255/100,At[2]*255/100,At[3]*255/100,At[4]):(At=Me.exec(nr))?bt(At[1],At[2]/100,At[3]/100,1):(At=ze.exec(nr))?bt(At[1],At[2]/100,At[3]/100,At[4]):De.hasOwnProperty(nr)?et(De[nr]):nr==="transparent"?new ct(NaN,NaN,NaN,0):null}function et(nr){return new ct(nr>>16&255,nr>>8&255,nr&255,1)}function st(nr,At,Xt,yr){return yr<=0&&(nr=At=Xt=NaN),new ct(nr,At,Xt,yr)}function Re(nr){return nr instanceof Ae||(nr=Ee(nr)),nr?(nr=nr.rgb(),new ct(nr.r,nr.g,nr.b,nr.opacity)):new ct}function Ie(nr,At,Xt,yr){return arguments.length===1?Re(nr):new ct(nr,At,Xt,yr==null?1:yr)}function ct(nr,At,Xt,yr){this.r=+nr,this.g=+At,this.b=+Xt,this.opacity=+yr}je(ct,Ie,Et(Ae,{brighter:function(At){return At=At==null?te:Math.pow(te,At),new ct(this.r*At,this.g*At,this.b*At,this.opacity)},darker:function(At){return At=At==null?Qe:Math.pow(Qe,At),new ct(this.r*At,this.g*At,this.b*At,this.opacity)},rgb:function(){return this},clamp:function(){return new ct(Ge(this.r),Ge(this.g),Ge(this.b),se(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Tt,formatHex:Tt,formatHex8:Qt,formatRgb:wt,toString:wt}));function Tt(){return"#".concat(Ke(this.r)).concat(Ke(this.g)).concat(Ke(this.b))}function Qt(){return"#".concat(Ke(this.r)).concat(Ke(this.g)).concat(Ke(this.b)).concat(Ke((isNaN(this.opacity)?1:this.opacity)*255))}function wt(){var nr=se(this.opacity);return"".concat(nr===1?"rgb(":"rgba(").concat(Ge(this.r),", ").concat(Ge(this.g),", ").concat(Ge(this.b)).concat(nr===1?")":", ".concat(nr,")"))}function se(nr){return isNaN(nr)?1:Math.max(0,Math.min(1,nr))}function Ge(nr){return Math.max(0,Math.min(255,Math.round(nr)||0))}function Ke(nr){return nr=Ge(nr),(nr<16?"0":"")+nr.toString(16)}function bt(nr,At,Xt,yr){return yr<=0?nr=At=Xt=NaN:Xt<=0||Xt>=1?nr=At=NaN:At<=0&&(nr=NaN),new It(nr,At,Xt,yr)}function Be(nr){if(nr instanceof It)return new It(nr.h,nr.s,nr.l,nr.opacity);if(nr instanceof Ae||(nr=Ee(nr)),!nr)return new It;if(nr instanceof It)return nr;nr=nr.rgb();var At=nr.r/255,Xt=nr.g/255,yr=nr.b/255,Gr=Math.min(At,Xt,yr),Cn=Math.max(At,Xt,yr),kn=NaN,_n=Cn-Gr,Mi=(Cn+Gr)/2;return _n?(At===Cn?kn=(Xt-yr)/_n+(Xt<yr)*6:Xt===Cn?kn=(yr-At)/_n+2:kn=(At-Xt)/_n+4,_n/=Mi<.5?Cn+Gr:2-Cn-Gr,kn*=60):_n=Mi>0&&Mi<1?0:kn,new It(kn,_n,Mi,nr.opacity)}function pt(nr,At,Xt,yr){return arguments.length===1?Be(nr):new It(nr,At,Xt,yr==null?1:yr)}function It(nr,At,Xt,yr){this.h=+nr,this.s=+At,this.l=+Xt,this.opacity=+yr}je(It,pt,Et(Ae,{brighter:function(At){return At=At==null?te:Math.pow(te,At),new It(this.h,this.s,this.l*At,this.opacity)},darker:function(At){return At=At==null?Qe:Math.pow(Qe,At),new It(this.h,this.s,this.l*At,this.opacity)},rgb:function(){var At=this.h%360+(this.h<0)*360,Xt=isNaN(At)||isNaN(this.s)?0:this.s,yr=this.l,Gr=yr+(yr<.5?yr:1-yr)*Xt,Cn=2*yr-Gr;return new ct(Jt(At>=240?At-240:At+120,Cn,Gr),Jt(At,Cn,Gr),Jt(At<120?At+240:At-120,Cn,Gr),this.opacity)},clamp:function(){return new It(ot(this.h),zt(this.s),zt(this.l),se(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var At=se(this.opacity);return"".concat(At===1?"hsl(":"hsla(").concat(ot(this.h),", ").concat(zt(this.s)*100,"%, ").concat(zt(this.l)*100,"%").concat(At===1?")":", ".concat(At,")"))}}));function ot(nr){return nr=(nr||0)%360,nr<0?nr+360:nr}function zt(nr){return Math.max(0,Math.min(1,nr||0))}function Jt(nr,At,Xt){return(nr<60?At+(Xt-At)*nr/60:nr<180?Xt:nr<240?At+(Xt-At)*(240-nr)/60:At)*255}function tr(nr,At,Xt,yr,Gr){var Cn=nr*nr,kn=Cn*nr;return((1-3*nr+3*Cn-kn)*At+(4-6*Cn+3*kn)*Xt+(1+3*nr+3*Cn-3*kn)*yr+kn*Gr)/6}function pr(nr){var At=nr.length-1;return function(Xt){var yr=Xt<=0?Xt=0:Xt>=1?(Xt=1,At-1):Math.floor(Xt*At),Gr=nr[yr],Cn=nr[yr+1],kn=yr>0?nr[yr-1]:2*Gr-Cn,_n=yr<At-1?nr[yr+2]:2*Cn-Gr;return tr((Xt-yr/At)*At,kn,Gr,Cn,_n)}}function br(nr){var At=nr.length;return function(Xt){var yr=Math.floor(((Xt%=1)<0?++Xt:Xt)*At),Gr=nr[(yr+At-1)%At],Cn=nr[yr%At],kn=nr[(yr+1)%At],_n=nr[(yr+2)%At];return tr((Xt-yr/At)*At,Gr,Cn,kn,_n)}}var Zr=function(nr){return function(){return nr}};function Nr(nr,At){return function(Xt){return nr+Xt*At}}function tn(nr,At,Xt){return nr=Math.pow(nr,Xt),At=Math.pow(At,Xt)-nr,Xt=1/Xt,function(yr){return Math.pow(nr+yr*At,Xt)}}function Dn(nr,At){var Xt=At-nr;return Xt?Nr(nr,Xt>180||Xt<-180?Xt-360*Math.round(Xt/360):Xt):constant(isNaN(nr)?At:nr)}function gn(nr){return(nr=+nr)==1?Vn:function(At,Xt){return Xt-At?tn(At,Xt,nr):Zr(isNaN(At)?Xt:At)}}function Vn(nr,At){var Xt=At-nr;return Xt?Nr(nr,Xt):Zr(isNaN(nr)?At:nr)}var Un=function nr(At){var Xt=gn(At);function yr(Gr,Cn){var kn=Xt((Gr=Ie(Gr)).r,(Cn=Ie(Cn)).r),_n=Xt(Gr.g,Cn.g),Mi=Xt(Gr.b,Cn.b),Yi=Vn(Gr.opacity,Cn.opacity);return function(Wo){return Gr.r=kn(Wo),Gr.g=_n(Wo),Gr.b=Mi(Wo),Gr.opacity=Yi(Wo),Gr+""}}return yr.gamma=nr,yr}(1);function mi(nr){return function(At){var Xt=At.length,yr=new Array(Xt),Gr=new Array(Xt),Cn=new Array(Xt),kn,_n;for(kn=0;kn<Xt;++kn)_n=Ie(At[kn]),yr[kn]=_n.r||0,Gr[kn]=_n.g||0,Cn[kn]=_n.b||0;return yr=nr(yr),Gr=nr(Gr),Cn=nr(Cn),_n.opacity=1,function(Mi){return _n.r=yr(Mi),_n.g=Gr(Mi),_n.b=Cn(Mi),_n+""}}}var qn=mi(pr),Xn=mi(br);function We(nr,At){At||(At=[]);var Xt=nr?Math.min(At.length,nr.length):0,yr=At.slice(),Gr;return function(Cn){for(Gr=0;Gr<Xt;++Gr)yr[Gr]=nr[Gr]*(1-Cn)+At[Gr]*Cn;return yr}}function it(nr){return ArrayBuffer.isView(nr)&&!(nr instanceof DataView)}function _t(nr,At){return(it(At)?We:Pt)(nr,At)}function Pt(nr,At){var Xt=At?At.length:0,yr=nr?Math.min(Xt,nr.length):0,Gr=new Array(yr),Cn=new Array(Xt),kn;for(kn=0;kn<yr;++kn)Gr[kn]=Ft(nr[kn],At[kn]);for(;kn<Xt;++kn)Cn[kn]=At[kn];return function(_n){for(kn=0;kn<yr;++kn)Cn[kn]=Gr[kn](_n);return Cn}}function jt(nr,At){var Xt=new Date;return nr=+nr,At=+At,function(yr){return Xt.setTime(nr*(1-yr)+At*yr),Xt}}function gr(nr,At){return nr=+nr,At=+At,function(Xt){return nr*(1-Xt)+At*Xt}}function Cr(nr,At){var Xt={},yr={},Gr;(nr===null||Ye(nr)!=="object")&&(nr={}),(At===null||Ye(At)!=="object")&&(At={});for(Gr in At)Gr in nr?Xt[Gr]=Ft(nr[Gr],At[Gr]):yr[Gr]=At[Gr];return function(Cn){for(Gr in Xt)yr[Gr]=Xt[Gr](Cn);return yr}}var kt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,at=new RegExp(kt.source,"g");function Rt(nr){return function(){return nr}}function mr(nr){return function(At){return nr(At)+""}}function Dr(nr,At){var Xt=kt.lastIndex=at.lastIndex=0,yr,Gr,Cn,kn=-1,_n=[],Mi=[];for(nr=nr+"",At=At+"";(yr=kt.exec(nr))&&(Gr=at.exec(At));)(Cn=Gr.index)>Xt&&(Cn=At.slice(Xt,Cn),_n[kn]?_n[kn]+=Cn:_n[++kn]=Cn),(yr=yr[0])===(Gr=Gr[0])?_n[kn]?_n[kn]+=Gr:_n[++kn]=Gr:(_n[++kn]=null,Mi.push({i:kn,x:gr(yr,Gr)})),Xt=at.lastIndex;return Xt<At.length&&(Cn=At.slice(Xt),_n[kn]?_n[kn]+=Cn:_n[++kn]=Cn),_n.length<2?Mi[0]?mr(Mi[0].x):Rt(At):(At=Mi.length,function(Yi){for(var Wo=0,Ko;Wo<At;++Wo)_n[(Ko=Mi[Wo]).i]=Ko.x(Yi);return _n.join("")})}function Ft(nr,At){var Xt=Ye(At),yr;return At==null||Xt==="boolean"?Zr(At):(Xt==="number"?gr:Xt==="string"?(yr=Ee(At))?(At=yr,Un):Dr:At instanceof Ee?Un:At instanceof Date?jt:it(At)?We:Array.isArray(At)?Pt:typeof At.valueOf!="function"&&typeof At.toString!="function"||isNaN(At)?Cr:gr)(nr,At)}var Mn=F(93924),yi=F(47575),gi=function(nr){return["fill","stroke","fillStyle","strokeStyle"].includes(nr)},sn=function(nr){return/^[r,R,L,l]{1}[\s]*\(/.test(nr)},hi=[1,0,0,0,1,0,0,0,1];function ri(nr,At,Xt){var yr={},Gr=At.fromAttrs,Cn=At.toAttrs;if(!nr.destroyed){var kn;for(var _n in Cn)if(!(0,G.Xy)(Gr[_n],Cn[_n]))if(_n==="path"){var Mi=Cn[_n],Yi=Gr[_n];Mi.length>Yi.length?(Mi=yi.parsePathString(Cn[_n]),Yi=yi.parsePathString(Gr[_n]),Yi=yi.fillPathByDiff(Yi,Mi),Yi=yi.formatPath(Yi,Mi),At.fromAttrs.path=Yi,At.toAttrs.path=Mi):At.pathFormatted||(Mi=yi.parsePathString(Cn[_n]),Yi=yi.parsePathString(Gr[_n]),Yi=yi.formatPath(Yi,Mi),At.fromAttrs.path=Yi,At.toAttrs.path=Mi,At.pathFormatted=!0),yr[_n]=[];for(var Wo=0;Wo<Mi.length;Wo++){for(var Ko=Mi[Wo],su=Yi[Wo],No=[],ro=0;ro<Ko.length;ro++)(0,G.hj)(Ko[ro])&&su&&(0,G.hj)(su[ro])?(kn=Ft(su[ro],Ko[ro]),No.push(kn(Xt))):No.push(Ko[ro]);yr[_n].push(No)}}else if(_n==="matrix"){var uu=_t(Gr[_n]||hi,Cn[_n]||hi),qo=uu(Xt);yr[_n]=qo}else gi(_n)&&sn(Cn[_n])?yr[_n]=Cn[_n]:(0,G.mf)(Cn[_n])||(kn=Ft(Gr[_n],Cn[_n]),yr[_n]=kn(Xt));nr.attr(yr)}}function ui(nr,At,Xt){var yr=At.startTime,Gr=At.delay;if(Xt<yr+Gr||At._paused)return!1;var Cn,kn=At.duration,_n=At.easing,Mi=(0,Mn._)(_n);if(Xt=Xt-yr-At.delay,At.repeat)Cn=Xt%kn/kn,Cn=Mi(Cn);else if(Cn=Xt/kn,Cn<1)Cn=Mi(Cn);else return At.onFrame?nr.attr(At.onFrame(1)):nr.attr(At.toAttrs),!0;if(At.onFrame){var Yi=At.onFrame(Cn);nr.attr(Yi)}else ri(nr,At,Cn);return!1}var ba=function(){function nr(At){this.animators=[],this.current=0,this.timer=null,this.canvas=At}return nr.prototype.initTimer=function(){var At=this,Xt=!1,yr,Gr,Cn;this.timer=Le(function(kn){if(At.current=kn,At.animators.length>0){for(var _n=At.animators.length-1;_n>=0;_n--){if(yr=At.animators[_n],yr.destroyed){At.removeAnimator(_n);continue}if(!yr.isAnimatePaused()){Gr=yr.get("animations");for(var Mi=Gr.length-1;Mi>=0;Mi--)Cn=Gr[Mi],Xt=ui(yr,Cn,kn),Xt&&(Gr.splice(Mi,1),Xt=!1,Cn.callback&&Cn.callback())}Gr.length===0&&At.removeAnimator(_n)}var Yi=At.canvas.get("autoDraw");Yi||At.canvas.draw()}})},nr.prototype.addAnimator=function(At){this.animators.push(At)},nr.prototype.removeAnimator=function(At){this.animators.splice(At,1)},nr.prototype.isAnimating=function(){return!!this.animators.length},nr.prototype.stop=function(){this.timer&&this.timer.stop()},nr.prototype.stopAllAnimations=function(At){At===void 0&&(At=!0),this.animators.forEach(function(Xt){Xt.stopAnimate(At)}),this.animators=[],this.canvas.draw()},nr.prototype.getTime=function(){return this.current},nr}(),vi=ba,Sa=F(89473),za=40,_a=0,Ga=":",Ea=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function hs(nr,At){for(var Xt in nr)if(nr.hasOwnProperty(Xt)&&Xt.indexOf(Ga+At)>=0)return!0;return!1}function uo(nr,At,Xt){Xt.name=At,Xt.target=nr,Xt.currentTarget=nr,Xt.delegateTarget=nr,nr.emit(At,Xt)}function Ro(nr,At,Xt){if(Xt.bubbles){var yr=void 0,Gr=!1;if(At==="mouseenter"?(yr=Xt.fromShape,Gr=!0):At==="mouseleave"&&(Gr=!0,yr=Xt.toShape),nr.isCanvas()&&Gr)return;if(yr&&(0,Y.UY)(nr,yr)){Xt.bubbles=!1;return}Xt.name=At,Xt.currentTarget=nr,Xt.delegateTarget=nr,nr.emit(At,Xt)}}var Jn=function(){function nr(At){var Xt=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(yr){var Gr=yr.type;Xt._triggerEvent(Gr,yr)},this._onDocumentMove=function(yr){var Gr=Xt.canvas,Cn=Gr.get("el");if(Cn!==yr.target&&(Xt.dragging||Xt.currentShape)){var kn=Xt._getPointInfo(yr);Xt.dragging&&Xt._emitEvent("drag",yr,kn,Xt.draggingShape)}},this._onDocumentMouseUp=function(yr){var Gr=Xt.canvas,Cn=Gr.get("el");if(Cn!==yr.target&&Xt.dragging){var kn=Xt._getPointInfo(yr);Xt.draggingShape&&Xt._emitEvent("drop",yr,kn,null),Xt._emitEvent("dragend",yr,kn,Xt.draggingShape),Xt._afterDrag(Xt.draggingShape,kn,yr)}},this.canvas=At.canvas}return nr.prototype.init=function(){this._bindEvents()},nr.prototype._bindEvents=function(){var At=this,Xt=this.canvas.get("el");(0,Y.S6)(Ea,function(yr){Xt.addEventListener(yr,At._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},nr.prototype._clearEvents=function(){var At=this,Xt=this.canvas.get("el");(0,Y.S6)(Ea,function(yr){Xt.removeEventListener(yr,At._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},nr.prototype._getEventObj=function(At,Xt,yr,Gr,Cn,kn){var _n=new Sa.Z(At,Xt);return _n.fromShape=Cn,_n.toShape=kn,_n.x=yr.x,_n.y=yr.y,_n.clientX=yr.clientX,_n.clientY=yr.clientY,_n.propagationPath.push(Gr),_n},nr.prototype._getShape=function(At,Xt){return this.canvas.getShape(At.x,At.y,Xt)},nr.prototype._getPointInfo=function(At){var Xt=this.canvas,yr=Xt.getClientByEvent(At),Gr=Xt.getPointByEvent(At);return{x:Gr.x,y:Gr.y,clientX:yr.x,clientY:yr.y}},nr.prototype._triggerEvent=function(At,Xt){var yr=this._getPointInfo(Xt),Gr=this._getShape(yr,Xt),Cn=this["_on"+At],kn=!1;if(Cn)Cn.call(this,yr,Gr,Xt);else{var _n=this.currentShape;At==="mouseenter"||At==="dragenter"||At==="mouseover"?(this._emitEvent(At,Xt,yr,null,null,Gr),Gr&&this._emitEvent(At,Xt,yr,Gr,null,Gr),At==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",Xt,yr,null)):At==="mouseleave"||At==="dragleave"||At==="mouseout"?(kn=!0,_n&&this._emitEvent(At,Xt,yr,_n,_n,null),this._emitEvent(At,Xt,yr,null,_n,null),At==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",Xt,yr,null)):this._emitEvent(At,Xt,yr,Gr,null,null)}if(kn||(this.currentShape=Gr),Gr&&!Gr.get("destroyed")){var Mi=this.canvas,Yi=Mi.get("el");Yi.style.cursor=Gr.attr("cursor")||Mi.get("cursor")}},nr.prototype._onmousedown=function(At,Xt,yr){yr.button===_a&&(this.mousedownShape=Xt,this.mousedownPoint=At,this.mousedownTimeStamp=yr.timeStamp),this._emitEvent("mousedown",yr,At,Xt,null,null)},nr.prototype._emitMouseoverEvents=function(At,Xt,yr,Gr){var Cn=this.canvas.get("el");yr!==Gr&&(yr&&(this._emitEvent("mouseout",At,Xt,yr,yr,Gr),this._emitEvent("mouseleave",At,Xt,yr,yr,Gr),(!Gr||Gr.get("destroyed"))&&(Cn.style.cursor=this.canvas.get("cursor"))),Gr&&(this._emitEvent("mouseover",At,Xt,Gr,yr,Gr),this._emitEvent("mouseenter",At,Xt,Gr,yr,Gr)))},nr.prototype._emitDragoverEvents=function(At,Xt,yr,Gr,Cn){Gr?(Gr!==yr&&(yr&&this._emitEvent("dragleave",At,Xt,yr,yr,Gr),this._emitEvent("dragenter",At,Xt,Gr,yr,Gr)),Cn||this._emitEvent("dragover",At,Xt,Gr)):yr&&this._emitEvent("dragleave",At,Xt,yr,yr,Gr),Cn&&this._emitEvent("dragover",At,Xt,Gr)},nr.prototype._afterDrag=function(At,Xt,yr){At&&(At.set("capture",!0),this.draggingShape=null),this.dragging=!1;var Gr=this._getShape(Xt,yr);Gr!==At&&this._emitMouseoverEvents(yr,Xt,At,Gr),this.currentShape=Gr},nr.prototype._onmouseup=function(At,Xt,yr){if(yr.button===_a){var Gr=this.draggingShape;this.dragging?(Gr&&this._emitEvent("drop",yr,At,Xt),this._emitEvent("dragend",yr,At,Gr),this._afterDrag(Gr,At,yr)):(this._emitEvent("mouseup",yr,At,Xt),Xt===this.mousedownShape&&this._emitEvent("click",yr,At,Xt),this.mousedownShape=null,this.mousedownPoint=null)}},nr.prototype._ondragover=function(At,Xt,yr){yr.preventDefault();var Gr=this.currentShape;this._emitDragoverEvents(yr,At,Gr,Xt,!0)},nr.prototype._onmousemove=function(At,Xt,yr){var Gr=this.canvas,Cn=this.currentShape,kn=this.draggingShape;if(this.dragging)kn&&this._emitDragoverEvents(yr,At,Cn,Xt,!1),this._emitEvent("drag",yr,At,kn);else{var _n=this.mousedownPoint;if(_n){var Mi=this.mousedownShape,Yi=yr.timeStamp,Wo=Yi-this.mousedownTimeStamp,Ko=_n.clientX-At.clientX,su=_n.clientY-At.clientY,No=Ko*Ko+su*su;Wo>120||No>za?Mi&&Mi.get("draggable")?(kn=this.mousedownShape,kn.set("capture",!1),this.draggingShape=kn,this.dragging=!0,this._emitEvent("dragstart",yr,At,kn),this.mousedownShape=null,this.mousedownPoint=null):!Mi&&Gr.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",yr,At,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(yr,At,Cn,Xt),this._emitEvent("mousemove",yr,At,Xt)):(this._emitMouseoverEvents(yr,At,Cn,Xt),this._emitEvent("mousemove",yr,At,Xt))}else this._emitMouseoverEvents(yr,At,Cn,Xt),this._emitEvent("mousemove",yr,At,Xt)}},nr.prototype._emitEvent=function(At,Xt,yr,Gr,Cn,kn){var _n=this._getEventObj(At,Xt,yr,Gr,Cn,kn);if(Gr){_n.shape=Gr,uo(Gr,At,_n);for(var Mi=Gr.getParent();Mi;)Mi.emitDelegation(At,_n),_n.propagationStopped||Ro(Mi,At,_n),_n.propagationPath.push(Mi),Mi=Mi.getParent()}else{var Yi=this.canvas;uo(Yi,At,_n)}},nr.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},nr}(),_i=Jn,na="px",Xa=(0,X.qY)(),ps=Xa&&Xa.name==="firefox",po=function(nr){(0,$.ZT)(At,nr);function At(Xt){var yr=nr.call(this,Xt)||this;return yr.initContainer(),yr.initDom(),yr.initEvents(),yr.initTimeline(),yr}return At.prototype.getDefaultCfg=function(){var Xt=nr.prototype.getDefaultCfg.call(this);return Xt.cursor="default",Xt.supportCSSTransform=!1,Xt},At.prototype.initContainer=function(){var Xt=this.get("container");(0,Y.HD)(Xt)&&(Xt=document.getElementById(Xt),this.set("container",Xt))},At.prototype.initDom=function(){var Xt=this.createDom();this.set("el",Xt);var yr=this.get("container");yr.appendChild(Xt),this.setDOMSize(this.get("width"),this.get("height"))},At.prototype.initEvents=function(){var Xt=new _i({canvas:this});Xt.init(),this.set("eventController",Xt)},At.prototype.initTimeline=function(){var Xt=new vi(this);this.set("timeline",Xt)},At.prototype.setDOMSize=function(Xt,yr){var Gr=this.get("el");Y.jU&&(Gr.style.width=Xt+na,Gr.style.height=yr+na)},At.prototype.changeSize=function(Xt,yr){this.setDOMSize(Xt,yr),this.set("width",Xt),this.set("height",yr),this.onCanvasChange("changeSize")},At.prototype.getRenderer=function(){return this.get("renderer")},At.prototype.getCursor=function(){return this.get("cursor")},At.prototype.setCursor=function(Xt){this.set("cursor",Xt);var yr=this.get("el");Y.jU&&yr&&(yr.style.cursor=Xt)},At.prototype.getPointByEvent=function(Xt){var yr=this.get("supportCSSTransform");if(yr){if(ps&&!(0,Y.kK)(Xt.layerX)&&Xt.layerX!==Xt.offsetX)return{x:Xt.layerX,y:Xt.layerY};if(!(0,Y.kK)(Xt.offsetX))return{x:Xt.offsetX,y:Xt.offsetY}}var Gr=this.getClientByEvent(Xt),Cn=Gr.x,kn=Gr.y;return this.getPointByClient(Cn,kn)},At.prototype.getClientByEvent=function(Xt){var yr=Xt;return Xt.touches&&(Xt.type==="touchend"?yr=Xt.changedTouches[0]:yr=Xt.touches[0]),{x:yr.clientX,y:yr.clientY}},At.prototype.getPointByClient=function(Xt,yr){var Gr=this.get("el"),Cn=Gr.getBoundingClientRect();return{x:Xt-Cn.left,y:yr-Cn.top}},At.prototype.getClientByPoint=function(Xt,yr){var Gr=this.get("el"),Cn=Gr.getBoundingClientRect();return{x:Xt+Cn.left,y:yr+Cn.top}},At.prototype.draw=function(){},At.prototype.removeDom=function(){var Xt=this.get("el");Xt.parentNode.removeChild(Xt)},At.prototype.clearEvents=function(){var Xt=this.get("eventController");Xt.destroy()},At.prototype.isCanvas=function(){return!0},At.prototype.getParent=function(){return null},At.prototype.destroy=function(){var Xt=this.get("timeline");this.get("destroyed")||(this.clear(),Xt&&Xt.stop(),this.clearEvents(),this.removeDom(),nr.prototype.destroy.call(this))},At}(w.Z),Io=po},37153:function(xt,N,F){"use strict";var $=F(97582),X=F(29881),w=F(77341),Y={},G="_INDEX";function K(he,J){if(he.set("canvas",J),he.isGroup()){var M=he.get("children");M.length&&M.forEach(function(E){K(E,J)})}}function Q(he,J){if(he.set("timeline",J),he.isGroup()){var M=he.get("children");M.length&&M.forEach(function(E){Q(E,J)})}}function oe(he,J){var M=he.getChildren();return M.indexOf(J)>=0}function ee(he,J,M){M===void 0&&(M=!0),M?J.destroy():(J.set("parent",null),J.set("canvas",null)),(0,w.As)(he.getChildren(),J)}function xe(he){return function(J,M){var E=he(J,M);return E===0?J[G]-M[G]:E}}var ce=function(he){(0,$.ZT)(J,he);function J(){return he!==null&&he.apply(this,arguments)||this}return J.prototype.isCanvas=function(){return!1},J.prototype.getBBox=function(){var M=1/0,E=-1/0,fe=1/0,me=-1/0,ke=this.getChildren().filter(function(Le){return Le.get("visible")&&(!Le.isGroup()||Le.isGroup()&&Le.getChildren().length>0)});ke.length>0?(0,w.S6)(ke,function(Le){var tt=Le.getBBox(),ft=tt.minX,ge=tt.maxX,be=tt.minY,Ce=tt.maxY;ft<M&&(M=ft),ge>E&&(E=ge),be<fe&&(fe=be),Ce>me&&(me=Ce)}):(M=0,E=0,fe=0,me=0);var Pe={x:M,y:fe,minX:M,minY:fe,maxX:E,maxY:me,width:E-M,height:me-fe};return Pe},J.prototype.getCanvasBBox=function(){var M=1/0,E=-1/0,fe=1/0,me=-1/0,ke=this.getChildren().filter(function(Le){return Le.get("visible")&&(!Le.isGroup()||Le.isGroup()&&Le.getChildren().length>0)});ke.length>0?(0,w.S6)(ke,function(Le){var tt=Le.getCanvasBBox(),ft=tt.minX,ge=tt.maxX,be=tt.minY,Ce=tt.maxY;ft<M&&(M=ft),ge>E&&(E=ge),be<fe&&(fe=be),Ce>me&&(me=Ce)}):(M=0,E=0,fe=0,me=0);var Pe={x:M,y:fe,minX:M,minY:fe,maxX:E,maxY:me,width:E-M,height:me-fe};return Pe},J.prototype.getDefaultCfg=function(){var M=he.prototype.getDefaultCfg.call(this);return M.children=[],M},J.prototype.onAttrChange=function(M,E,fe){if(he.prototype.onAttrChange.call(this,M,E,fe),M==="matrix"){var me=this.getTotalMatrix();this._applyChildrenMarix(me)}},J.prototype.applyMatrix=function(M){var E=this.getTotalMatrix();he.prototype.applyMatrix.call(this,M);var fe=this.getTotalMatrix();fe!==E&&this._applyChildrenMarix(fe)},J.prototype._applyChildrenMarix=function(M){var E=this.getChildren();(0,w.S6)(E,function(fe){fe.applyMatrix(M)})},J.prototype.addShape=function(){for(var M=[],E=0;E<arguments.length;E++)M[E]=arguments[E];var fe=M[0],me=M[1];(0,w.Kn)(fe)?me=fe:me.type=fe;var ke=Y[me.type];ke||(ke=(0,w.jC)(me.type),Y[me.type]=ke);var Pe=this.getShapeBase(),Le=new Pe[ke](me);return this.add(Le),Le},J.prototype.addGroup=function(){for(var M=[],E=0;E<arguments.length;E++)M[E]=arguments[E];var fe=M[0],me=M[1],ke;if((0,w.mf)(fe))me?ke=new fe(me):ke=new fe({parent:this});else{var Pe=fe||{},Le=this.getGroupBase();ke=new Le(Pe)}return this.add(ke),ke},J.prototype.getCanvas=function(){var M;return this.isCanvas()?M=this:M=this.get("canvas"),M},J.prototype.getShape=function(M,E,fe){if(!(0,w.pP)(this))return null;var me=this.getChildren(),ke;if(this.isCanvas())ke=this._findShape(me,M,E,fe);else{var Pe=[M,E,1];Pe=this.invertFromMatrix(Pe),this.isClipped(Pe[0],Pe[1])||(ke=this._findShape(me,Pe[0],Pe[1],fe))}return ke},J.prototype._findShape=function(M,E,fe,me){for(var ke=null,Pe=M.length-1;Pe>=0;Pe--){var Le=M[Pe];if((0,w.pP)(Le)&&(Le.isGroup()?ke=Le.getShape(E,fe,me):Le.isHit(E,fe)&&(ke=Le)),ke)break}return ke},J.prototype.add=function(M){var E=this.getCanvas(),fe=this.getChildren(),me=this.get("timeline"),ke=M.getParent();ke&&ee(ke,M,!1),M.set("parent",this),E&&K(M,E),me&&Q(M,me),fe.push(M),M.onCanvasChange("add"),this._applyElementMatrix(M)},J.prototype._applyElementMatrix=function(M){var E=this.getTotalMatrix();E&&M.applyMatrix(E)},J.prototype.getChildren=function(){return this.get("children")},J.prototype.sort=function(){var M=this.getChildren();(0,w.S6)(M,function(E,fe){return E[G]=fe,E}),M.sort(xe(function(E,fe){return E.get("zIndex")-fe.get("zIndex")})),this.onCanvasChange("sort")},J.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var M=this.getChildren(),E=M.length-1;E>=0;E--)M[E].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},J.prototype.destroy=function(){this.get("destroyed")||(this.clear(),he.prototype.destroy.call(this))},J.prototype.getFirst=function(){return this.getChildByIndex(0)},J.prototype.getLast=function(){var M=this.getChildren();return this.getChildByIndex(M.length-1)},J.prototype.getChildByIndex=function(M){var E=this.getChildren();return E[M]},J.prototype.getCount=function(){var M=this.getChildren();return M.length},J.prototype.contain=function(M){var E=this.getChildren();return E.indexOf(M)>-1},J.prototype.removeChild=function(M,E){E===void 0&&(E=!0),this.contain(M)&&M.remove(E)},J.prototype.findAll=function(M){var E=[],fe=this.getChildren();return(0,w.S6)(fe,function(me){M(me)&&E.push(me),me.isGroup()&&(E=E.concat(me.findAll(M)))}),E},J.prototype.find=function(M){var E=null,fe=this.getChildren();return(0,w.S6)(fe,function(me){if(M(me)?E=me:me.isGroup()&&(E=me.find(M)),E)return!1}),E},J.prototype.findById=function(M){return this.find(function(E){return E.get("id")===M})},J.prototype.findByClassName=function(M){return this.find(function(E){return E.get("className")===M})},J.prototype.findAllByName=function(M){return this.findAll(function(E){return E.get("name")===M})},J}(X.Z);N.Z=ce},29881:function(xt,N,F){"use strict";var $=F(97582),X=F(21030),w=F(31506),Y=F(77341),G=F(41482),K=F(2667),Q=w.vs,oe="matrix",ee=["zIndex","capture","visible","type"],xe=["repeat"],ce=":",he="*";function J(ke){for(var Pe=[],Le=0;Le<ke.length;Le++)(0,X.kJ)(ke[Le])?Pe.push([].concat(ke[Le])):Pe.push(ke[Le]);return Pe}function M(ke,Pe){var Le={},tt=Pe.attrs;for(var ft in ke)Le[ft]=tt[ft];return Le}function E(ke,Pe){var Le={},tt=Pe.attr();return(0,X.S6)(ke,function(ft,ge){xe.indexOf(ge)===-1&&!(0,X.Xy)(tt[ge],ft)&&(Le[ge]=ft)}),Le}function fe(ke,Pe){if(Pe.onFrame)return ke;var Le=Pe.startTime,tt=Pe.delay,ft=Pe.duration,ge=Object.prototype.hasOwnProperty;return(0,X.S6)(ke,function(be){Le+tt<be.startTime+be.delay+be.duration&&ft>be.delay&&(0,X.S6)(Pe.toAttrs,function(Ce,Ye){ge.call(be.toAttrs,Ye)&&(delete be.toAttrs[Ye],delete be.fromAttrs[Ye])})}),ke}var me=function(ke){(0,$.ZT)(Pe,ke);function Pe(Le){var tt=ke.call(this,Le)||this;tt.attrs={};var ft=tt.getDefaultAttrs();return(0,X.CD)(ft,Le.attrs),tt.attrs=ft,tt.initAttrs(ft),tt.initAnimate(),tt}return Pe.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},Pe.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},Pe.prototype.onCanvasChange=function(Le){},Pe.prototype.initAttrs=function(Le){},Pe.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},Pe.prototype.isGroup=function(){return!1},Pe.prototype.getParent=function(){return this.get("parent")},Pe.prototype.getCanvas=function(){return this.get("canvas")},Pe.prototype.attr=function(){for(var Le,tt=[],ft=0;ft<arguments.length;ft++)tt[ft]=arguments[ft];var ge=tt[0],be=tt[1];if(!ge)return this.attrs;if((0,X.Kn)(ge)){for(var Ce in ge)this.setAttr(Ce,ge[Ce]);return this.afterAttrsChange(ge),this}return tt.length===2?(this.setAttr(ge,be),this.afterAttrsChange((Le={},Le[ge]=be,Le)),this):this.attrs[ge]},Pe.prototype.isClipped=function(Le,tt){var ft=this.getClip();return ft&&!ft.isHit(Le,tt)},Pe.prototype.setAttr=function(Le,tt){var ft=this.attrs[Le];ft!==tt&&(this.attrs[Le]=tt,this.onAttrChange(Le,tt,ft))},Pe.prototype.onAttrChange=function(Le,tt,ft){Le==="matrix"&&this.set("totalMatrix",null)},Pe.prototype.afterAttrsChange=function(Le){if(this.cfg.isClipShape){var tt=this.cfg.applyTo;tt&&tt.onCanvasChange("clip")}else this.onCanvasChange("attr")},Pe.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},Pe.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},Pe.prototype.setZIndex=function(Le){this.set("zIndex",Le);var tt=this.getParent();return tt&&tt.sort(),this},Pe.prototype.toFront=function(){var Le=this.getParent();if(Le){var tt=Le.getChildren(),ft=this.get("el"),ge=tt.indexOf(this);tt.splice(ge,1),tt.push(this),this.onCanvasChange("zIndex")}},Pe.prototype.toBack=function(){var Le=this.getParent();if(Le){var tt=Le.getChildren(),ft=this.get("el"),ge=tt.indexOf(this);tt.splice(ge,1),tt.unshift(this),this.onCanvasChange("zIndex")}},Pe.prototype.remove=function(Le){Le===void 0&&(Le=!0);var tt=this.getParent();tt?((0,Y.As)(tt.getChildren(),this),tt.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),Le&&this.destroy()},Pe.prototype.resetMatrix=function(){this.attr(oe,this.getDefaultMatrix()),this.onCanvasChange("matrix")},Pe.prototype.getMatrix=function(){return this.attr(oe)},Pe.prototype.setMatrix=function(Le){this.attr(oe,Le),this.onCanvasChange("matrix")},Pe.prototype.getTotalMatrix=function(){var Le=this.cfg.totalMatrix;if(!Le){var tt=this.attr("matrix"),ft=this.cfg.parentMatrix;ft&&tt?Le=(0,G.xq)(ft,tt):Le=tt||ft,this.set("totalMatrix",Le)}return Le},Pe.prototype.applyMatrix=function(Le){var tt=this.attr("matrix"),ft=null;Le&&tt?ft=(0,G.xq)(Le,tt):ft=tt||Le,this.set("totalMatrix",ft),this.set("parentMatrix",Le)},Pe.prototype.getDefaultMatrix=function(){return null},Pe.prototype.applyToMatrix=function(Le){var tt=this.attr("matrix");return tt?(0,G.rG)(tt,Le):Le},Pe.prototype.invertFromMatrix=function(Le){var tt=this.attr("matrix");if(tt){var ft=(0,G.U_)(tt);if(ft)return(0,G.rG)(ft,Le)}return Le},Pe.prototype.setClip=function(Le){var tt=this.getCanvas(),ft=null;if(Le){var ge=this.getShapeBase(),be=(0,X.jC)(Le.type),Ce=ge[be];Ce&&(ft=new Ce({type:Le.type,isClipShape:!0,applyTo:this,attrs:Le.attrs,canvas:tt}))}return this.set("clipShape",ft),this.onCanvasChange("clip"),ft},Pe.prototype.getClip=function(){var Le=this.cfg.clipShape;return Le||null},Pe.prototype.clone=function(){var Le=this,tt=this.attrs,ft={};(0,X.S6)(tt,function(Ce,Ye){(0,X.kJ)(tt[Ye])?ft[Ye]=J(tt[Ye]):ft[Ye]=tt[Ye]});var ge=this.constructor,be=new ge({attrs:ft});return(0,X.S6)(ee,function(Ce){be.set(Ce,Le.get(Ce))}),be},Pe.prototype.destroy=function(){var Le=this.destroyed;Le||(this.attrs={},ke.prototype.destroy.call(this))},Pe.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},Pe.prototype.animate=function(){for(var Le=[],tt=0;tt<arguments.length;tt++)Le[tt]=arguments[tt];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var ft=this.get("timeline");ft||(ft=this.get("canvas").get("timeline"),this.set("timeline",ft));var ge=this.get("animations")||[];ft.timer||ft.initTimer();var be=Le[0],Ce=Le[1],Ye=Le[2],je=Ye===void 0?"easeLinear":Ye,Et=Le[3],Ae=Et===void 0?X.ZT:Et,Qe=Le[4],te=Qe===void 0?0:Qe,Ze,ie,Oe,nt,ye;(0,X.mf)(be)?(Ze=be,be={}):(0,X.Kn)(be)&&be.onFrame&&(Ze=be.onFrame,ie=be.repeat),(0,X.Kn)(Ce)?(ye=Ce,Ce=ye.duration,je=ye.easing||"easeLinear",te=ye.delay||0,ie=ye.repeat||ie||!1,Ae=ye.callback||X.ZT,Oe=ye.pauseCallback||X.ZT,nt=ye.resumeCallback||X.ZT):((0,X.hj)(Ae)&&(te=Ae,Ae=null),(0,X.mf)(je)?(Ae=je,je="easeLinear"):je=je||"easeLinear");var Te=E(be,this),Je={fromAttrs:M(Te,this),toAttrs:Te,duration:Ce,easing:je,repeat:ie,callback:Ae,pauseCallback:Oe,resumeCallback:nt,delay:te,startTime:ft.getTime(),id:(0,X.EL)(),onFrame:Ze,pathFormatted:!1};ge.length>0?ge=fe(ge,Je):ft.addAnimator(this),ge.push(Je),this.set("animations",ge),this.set("_pause",{isPaused:!1})}},Pe.prototype.stopAnimate=function(Le){var tt=this;Le===void 0&&(Le=!0);var ft=this.get("animations");(0,X.S6)(ft,function(ge){Le&&(ge.onFrame?tt.attr(ge.onFrame(1)):tt.attr(ge.toAttrs)),ge.callback&&ge.callback()}),this.set("animating",!1),this.set("animations",[])},Pe.prototype.pauseAnimate=function(){var Le=this.get("timeline"),tt=this.get("animations"),ft=Le.getTime();return(0,X.S6)(tt,function(ge){ge._paused=!0,ge._pauseTime=ft,ge.pauseCallback&&ge.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:ft}),this},Pe.prototype.resumeAnimate=function(){var Le=this.get("timeline"),tt=Le.getTime(),ft=this.get("animations"),ge=this.get("_pause").pauseTime;return(0,X.S6)(ft,function(be){be.startTime=be.startTime+(tt-ge),be._paused=!1,be._pauseTime=null,be.resumeCallback&&be.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",ft),this},Pe.prototype.emitDelegation=function(Le,tt){var ft=this,ge=tt.propagationPath,be=this.getEvents(),Ce;Le==="mouseenter"?Ce=tt.fromShape:Le==="mouseleave"&&(Ce=tt.toShape);for(var Ye=function(Qe){var te=ge[Qe],Ze=te.get("name");if(Ze){if((te.isGroup()||te.isCanvas&&te.isCanvas())&&Ce&&(0,Y.UY)(te,Ce))return"break";(0,X.kJ)(Ze)?(0,X.S6)(Ze,function(ie){ft.emitDelegateEvent(te,ie,tt)}):je.emitDelegateEvent(te,Ze,tt)}},je=this,Et=0;Et<ge.length;Et++){var Ae=Ye(Et);if(Ae==="break")break}},Pe.prototype.emitDelegateEvent=function(Le,tt,ft){var ge=this.getEvents(),be=tt+ce+ft.type;(ge[be]||ge[he])&&(ft.name=be,ft.currentTarget=Le,ft.delegateTarget=this,ft.delegateObject=Le.get("delegateObject"),this.emit(be,ft))},Pe.prototype.translate=function(Le,tt){Le===void 0&&(Le=0),tt===void 0&&(tt=0);var ft=this.getMatrix(),ge=Q(ft,[["t",Le,tt]]);return this.setMatrix(ge),this},Pe.prototype.move=function(Le,tt){var ft=this.attr("x")||0,ge=this.attr("y")||0;return this.translate(Le-ft,tt-ge),this},Pe.prototype.moveTo=function(Le,tt){return this.move(Le,tt)},Pe.prototype.scale=function(Le,tt){var ft=this.getMatrix(),ge=Q(ft,[["s",Le,tt||Le]]);return this.setMatrix(ge),this},Pe.prototype.rotate=function(Le){var tt=this.getMatrix(),ft=Q(tt,[["r",Le]]);return this.setMatrix(ft),this},Pe.prototype.rotateAtStart=function(Le){var tt=this.attr(),ft=tt.x,ge=tt.y,be=this.getMatrix(),Ce=Q(be,[["t",-ft,-ge],["r",Le],["t",ft,ge]]);return this.setMatrix(Ce),this},Pe.prototype.rotateAtPoint=function(Le,tt,ft){var ge=this.getMatrix(),be=Q(ge,[["t",-Le,-tt],["r",ft],["t",Le,tt]]);return this.setMatrix(be),this},Pe}(K.Z);N.Z=me},31841:function(xt,N,F){"use strict";var $=F(97582),X=F(37153),w=function(Y){(0,$.ZT)(G,Y);function G(){return Y!==null&&Y.apply(this,arguments)||this}return G.prototype.isGroup=function(){return!0},G.prototype.isEntityGroup=function(){return!1},G.prototype.clone=function(){for(var K=Y.prototype.clone.call(this),Q=this.getChildren(),oe=0;oe<Q.length;oe++){var ee=Q[oe];K.add(ee.clone())}return K},G}(X.Z);N.Z=w},15032:function(xt,N,F){"use strict";var $=F(97582),X=F(29881),w=F(41482),Y=function(G){(0,$.ZT)(K,G);function K(Q){return G.call(this,Q)||this}return K.prototype._isInBBox=function(Q,oe){var ee=this.getBBox();return ee.minX<=Q&&ee.maxX>=Q&&ee.minY<=oe&&ee.maxY>=oe},K.prototype.afterAttrsChange=function(Q){G.prototype.afterAttrsChange.call(this,Q),this.clearCacheBBox()},K.prototype.getBBox=function(){var Q=this.cfg.bbox;return Q||(Q=this.calculateBBox(),this.set("bbox",Q)),Q},K.prototype.getCanvasBBox=function(){var Q=this.cfg.canvasBBox;return Q||(Q=this.calculateCanvasBBox(),this.set("canvasBBox",Q)),Q},K.prototype.applyMatrix=function(Q){G.prototype.applyMatrix.call(this,Q),this.set("canvasBBox",null)},K.prototype.calculateCanvasBBox=function(){var Q=this.getBBox(),oe=this.getTotalMatrix(),ee=Q.minX,xe=Q.minY,ce=Q.maxX,he=Q.maxY;if(oe){var J=(0,w.rG)(oe,[Q.minX,Q.minY]),M=(0,w.rG)(oe,[Q.maxX,Q.minY]),E=(0,w.rG)(oe,[Q.minX,Q.maxY]),fe=(0,w.rG)(oe,[Q.maxX,Q.maxY]);ee=Math.min(J[0],M[0],E[0],fe[0]),ce=Math.max(J[0],M[0],E[0],fe[0]),xe=Math.min(J[1],M[1],E[1],fe[1]),he=Math.max(J[1],M[1],E[1],fe[1])}var me=this.attrs;if(me.shadowColor){var ke=me.shadowBlur,Pe=ke===void 0?0:ke,Le=me.shadowOffsetX,tt=Le===void 0?0:Le,ft=me.shadowOffsetY,ge=ft===void 0?0:ft,be=ee-Pe+tt,Ce=ce+Pe+tt,Ye=xe-Pe+ge,je=he+Pe+ge;ee=Math.min(ee,be),ce=Math.max(ce,Ce),xe=Math.min(xe,Ye),he=Math.max(he,je)}return{x:ee,y:xe,minX:ee,minY:xe,maxX:ce,maxY:he,width:ce-ee,height:he-xe}},K.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},K.prototype.isClipShape=function(){return this.get("isClipShape")},K.prototype.isInShape=function(Q,oe){return!1},K.prototype.isOnlyHitBox=function(){return!1},K.prototype.isHit=function(Q,oe){var ee=this.get("startArrowShape"),xe=this.get("endArrowShape"),ce=[Q,oe,1];ce=this.invertFromMatrix(ce);var he=ce[0],J=ce[1],M=this._isInBBox(he,J);return this.isOnlyHitBox()?M:!!(M&&!this.isClipped(he,J)&&(this.isInShape(he,J)||ee&&ee.isHit(he,J)||xe&&xe.isHit(he,J)))},K}(X.Z);N.Z=Y},93924:function(xt,N,F){"use strict";F.d(N,{_:function(){return st},C:function(){return Re}});var $={};F.r($),F.d($,{easeBack:function(){return ze},easeBackIn:function(){return pe},easeBackInOut:function(){return ze},easeBackOut:function(){return Me},easeBounce:function(){return ye},easeBounceIn:function(){return nt},easeBounceInOut:function(){return Te},easeBounceOut:function(){return ye},easeCircle:function(){return be},easeCircleIn:function(){return ft},easeCircleInOut:function(){return be},easeCircleOut:function(){return ge},easeCubic:function(){return oe},easeCubicIn:function(){return K},easeCubicInOut:function(){return oe},easeCubicOut:function(){return Q},easeElastic:function(){return Ue},easeElasticIn:function(){return Ve},easeElasticInOut:function(){return Ee},easeElasticOut:function(){return Ue},easeExp:function(){return tt},easeExpIn:function(){return Pe},easeExpInOut:function(){return tt},easeExpOut:function(){return Le},easeLinear:function(){return X},easePoly:function(){return he},easePolyIn:function(){return xe},easePolyInOut:function(){return he},easePolyOut:function(){return ce},easeQuad:function(){return G},easeQuadIn:function(){return w},easeQuadInOut:function(){return G},easeQuadOut:function(){return Y},easeSin:function(){return me},easeSinIn:function(){return E},easeSinInOut:function(){return me},easeSinOut:function(){return fe}});function X(Ie){return+Ie}function w(Ie){return Ie*Ie}function Y(Ie){return Ie*(2-Ie)}function G(Ie){return((Ie*=2)<=1?Ie*Ie:--Ie*(2-Ie)+1)/2}function K(Ie){return Ie*Ie*Ie}function Q(Ie){return--Ie*Ie*Ie+1}function oe(Ie){return((Ie*=2)<=1?Ie*Ie*Ie:(Ie-=2)*Ie*Ie+2)/2}var ee=3,xe=function Ie(ct){ct=+ct;function Tt(Qt){return Math.pow(Qt,ct)}return Tt.exponent=Ie,Tt}(ee),ce=function Ie(ct){ct=+ct;function Tt(Qt){return 1-Math.pow(1-Qt,ct)}return Tt.exponent=Ie,Tt}(ee),he=function Ie(ct){ct=+ct;function Tt(Qt){return((Qt*=2)<=1?Math.pow(Qt,ct):2-Math.pow(2-Qt,ct))/2}return Tt.exponent=Ie,Tt}(ee),J=Math.PI,M=J/2;function E(Ie){return+Ie==1?1:1-Math.cos(Ie*M)}function fe(Ie){return Math.sin(Ie*M)}function me(Ie){return(1-Math.cos(J*Ie))/2}function ke(Ie){return(Math.pow(2,-10*Ie)-.0009765625)*1.0009775171065494}function Pe(Ie){return ke(1-+Ie)}function Le(Ie){return 1-ke(Ie)}function tt(Ie){return((Ie*=2)<=1?ke(1-Ie):2-ke(Ie-1))/2}function ft(Ie){return 1-Math.sqrt(1-Ie*Ie)}function ge(Ie){return Math.sqrt(1- --Ie*Ie)}function be(Ie){return((Ie*=2)<=1?1-Math.sqrt(1-Ie*Ie):Math.sqrt(1-(Ie-=2)*Ie)+1)/2}var Ce=4/11,Ye=6/11,je=8/11,Et=3/4,Ae=9/11,Qe=10/11,te=15/16,Ze=21/22,ie=63/64,Oe=1/Ce/Ce;function nt(Ie){return 1-ye(1-Ie)}function ye(Ie){return(Ie=+Ie)<Ce?Oe*Ie*Ie:Ie<je?Oe*(Ie-=Ye)*Ie+Et:Ie<Qe?Oe*(Ie-=Ae)*Ie+te:Oe*(Ie-=Ze)*Ie+ie}function Te(Ie){return((Ie*=2)<=1?1-ye(1-Ie):ye(Ie-1)+1)/2}var Je=1.70158,pe=function Ie(ct){ct=+ct;function Tt(Qt){return(Qt=+Qt)*Qt*(ct*(Qt-1)+Qt)}return Tt.overshoot=Ie,Tt}(Je),Me=function Ie(ct){ct=+ct;function Tt(Qt){return--Qt*Qt*((Qt+1)*ct+Qt)+1}return Tt.overshoot=Ie,Tt}(Je),ze=function Ie(ct){ct=+ct;function Tt(Qt){return((Qt*=2)<1?Qt*Qt*((ct+1)*Qt-ct):(Qt-=2)*Qt*((ct+1)*Qt+ct)+2)/2}return Tt.overshoot=Ie,Tt}(Je),De=2*Math.PI,Ct=1,Vt=.3,Ve=function Ie(ct,Tt){var Qt=Math.asin(1/(ct=Math.max(1,ct)))*(Tt/=De);function wt(se){return ct*ke(- --se)*Math.sin((Qt-se)/Tt)}return wt.amplitude=function(se){return Ie(se,Tt*De)},wt.period=function(se){return Ie(ct,se)},wt}(Ct,Vt),Ue=function Ie(ct,Tt){var Qt=Math.asin(1/(ct=Math.max(1,ct)))*(Tt/=De);function wt(se){return 1-ct*ke(se=+se)*Math.sin((se+Qt)/Tt)}return wt.amplitude=function(se){return Ie(se,Tt*De)},wt.period=function(se){return Ie(ct,se)},wt}(Ct,Vt),Ee=function Ie(ct,Tt){var Qt=Math.asin(1/(ct=Math.max(1,ct)))*(Tt/=De);function wt(se){return((se=se*2-1)<0?ct*ke(-se)*Math.sin((Qt-se)/Tt):2-ct*ke(se)*Math.sin((Qt+se)/Tt))/2}return wt.amplitude=function(se){return Ie(se,Tt*De)},wt.period=function(se){return Ie(ct,se)},wt}(Ct,Vt),et={};function st(Ie){return et[Ie.toLowerCase()]||$[Ie]}function Re(Ie,ct){et[Ie.toLowerCase()]=ct}},46556:function(xt,N,F){"use strict";F.d(N,{b:function(){return w},W:function(){return X}});var $=new Map;function X(Le,tt){$.set(Le,tt)}function w(Le){return $.get(Le)}function Y(Le){var tt=Le.attr(),ft=tt.x,ge=tt.y,be=tt.width,Ce=tt.height;return{x:ft,y:ge,width:be,height:Ce}}function G(Le){var tt=Le.attr(),ft=tt.x,ge=tt.y,be=tt.r;return{x:ft-be,y:ge-be,width:be*2,height:be*2}}var K=F(32793);function Q(Le,tt){return!Le||!tt?Le||tt:{minX:Math.min(Le.minX,tt.minX),minY:Math.min(Le.minY,tt.minY),maxX:Math.max(Le.maxX,tt.maxX),maxY:Math.max(Le.maxY,tt.maxY)}}function oe(Le,tt){var ft=Le.get("startArrowShape"),ge=Le.get("endArrowShape"),be=null,Ce=null;return ft&&(be=ft.getCanvasBBox(),tt=Q(tt,be)),ge&&(Ce=ge.getCanvasBBox(),tt=Q(tt,Ce)),tt}function ee(Le){for(var tt=Le.attr(),ft=tt.points,ge=[],be=[],Ce=0;Ce<ft.length;Ce++){var Ye=ft[Ce];ge.push(Ye[0]),be.push(Ye[1])}var je=K.Zr.getBBoxByArray(ge,be),Et=je.x,Ae=je.y,Qe=je.width,te=je.height,Ze={minX:Et,minY:Ae,maxX:Et+Qe,maxY:Ae+te};return Ze=oe(Le,Ze),{x:Ze.minX,y:Ze.minY,width:Ze.maxX-Ze.minX,height:Ze.maxY-Ze.minY}}function xe(Le){for(var tt=Le.attr(),ft=tt.points,ge=[],be=[],Ce=0;Ce<ft.length;Ce++){var Ye=ft[Ce];ge.push(Ye[0]),be.push(Ye[1])}return K.Zr.getBBoxByArray(ge,be)}var ce=F(8723);function he(Le){var tt=Le.attr(),ft=tt.x,ge=tt.y,be=tt.text,Ce=tt.fontSize,Ye=tt.lineHeight,je=tt.font;je||(je=(0,ce.$O)(tt));var Et=(0,ce.mY)(be,je),Ae;if(!Et)Ae={x:ft,y:ge,width:0,height:0};else{var Qe=tt.textAlign,te=tt.textBaseline,Ze=(0,ce.FE)(be,Ce,Ye),ie={x:ft,y:ge-Ze};Qe&&(Qe==="end"||Qe==="right"?ie.x-=Et:Qe==="center"&&(ie.x-=Et/2)),te&&(te==="top"?ie.y+=Ze:te==="middle"&&(ie.y+=Ze/2)),Ae={x:ie.x,y:ie.y,width:Et,height:Ze}}return Ae}var J=F(39499),M=F(21030);function E(Le,tt){for(var ft=[],ge=[],be=[],Ce=0;Ce<Le.length;Ce++){var Ye=Le[Ce],je=Ye.currentPoint,Et=Ye.params,Ae=Ye.prePoint,Qe=void 0;switch(Ye.command){case"Q":Qe=K.lD.box(Ae[0],Ae[1],Et[1],Et[2],Et[3],Et[4]);break;case"C":Qe=K.Ll.box(Ae[0],Ae[1],Et[1],Et[2],Et[3],Et[4],Et[5],Et[6]);break;case"A":var te=Ye.arcParams;Qe=K.wN.box(te.cx,te.cy,te.rx,te.ry,te.xRotation,te.startAngle,te.endAngle);break;default:ft.push(je[0]),ge.push(je[1]);break}Qe&&(Ye.box=Qe,ft.push(Qe.x,Qe.x+Qe.width),ge.push(Qe.y,Qe.y+Qe.height)),tt&&(Ye.command==="L"||Ye.command==="M")&&Ye.prePoint&&Ye.nextPoint&&be.push(Ye)}ft=ft.filter(function(Te){return!Number.isNaN(Te)&&Te!==1/0&&Te!==-1/0}),ge=ge.filter(function(Te){return!Number.isNaN(Te)&&Te!==1/0&&Te!==-1/0});var Ze=(0,M.VV)(ft),ie=(0,M.VV)(ge),Oe=(0,M.Fp)(ft),nt=(0,M.Fp)(ge);if(be.length===0)return{x:Ze,y:ie,width:Oe-Ze,height:nt-ie};for(var Ce=0;Ce<be.length;Ce++){var Ye=be[Ce],je=Ye.currentPoint,ye=void 0;je[0]===Ze?(ye=fe(Ye,tt),Ze=Ze-ye.xExtra):je[0]===Oe&&(ye=fe(Ye,tt),Oe=Oe+ye.xExtra),je[1]===ie?(ye=fe(Ye,tt),ie=ie-ye.yExtra):je[1]===nt&&(ye=fe(Ye,tt),nt=nt+ye.yExtra)}return{x:Ze,y:ie,width:Oe-Ze,height:nt-ie}}function fe(Le,tt){var ft=Le.prePoint,ge=Le.currentPoint,be=Le.nextPoint,Ce=Math.pow(ge[0]-ft[0],2)+Math.pow(ge[1]-ft[1],2),Ye=Math.pow(ge[0]-be[0],2)+Math.pow(ge[1]-be[1],2),je=Math.pow(ft[0]-be[0],2)+Math.pow(ft[1]-be[1],2),Et=Math.acos((Ce+Ye-je)/(2*Math.sqrt(Ce)*Math.sqrt(Ye)));if(!Et||Math.sin(Et)===0||(0,M.vQ)(Et,0))return{xExtra:0,yExtra:0};var Ae=Math.abs(Math.atan2(be[1]-ge[1],be[0]-ge[0])),Qe=Math.abs(Math.atan2(be[0]-ge[0],be[1]-ge[1]));Ae=Ae>Math.PI/2?Math.PI-Ae:Ae,Qe=Qe>Math.PI/2?Math.PI-Qe:Qe;var te={xExtra:Math.cos(Et/2-Ae)*(tt/2*(1/Math.sin(Et/2)))-tt/2||0,yExtra:Math.cos(Qe-Et/2)*(tt/2*(1/Math.sin(Et/2)))-tt/2||0};return te}function me(Le){var tt=Le.attr(),ft=tt.path,ge=tt.stroke,be=ge?tt.lineWidth:0,Ce=Le.get("segments")||(0,J.zx)(ft),Ye=E(Ce,be),je=Ye.x,Et=Ye.y,Ae=Ye.width,Qe=Ye.height,te={minX:je,minY:Et,maxX:je+Ae,maxY:Et+Qe};return te=oe(Le,te),{x:te.minX,y:te.minY,width:te.maxX-te.minX,height:te.maxY-te.minY}}function ke(Le){var tt=Le.attr(),ft=tt.x1,ge=tt.y1,be=tt.x2,Ce=tt.y2,Ye=Math.min(ft,be),je=Math.max(ft,be),Et=Math.min(ge,Ce),Ae=Math.max(ge,Ce),Qe={minX:Ye,maxX:je,minY:Et,maxY:Ae};return Qe=oe(Le,Qe),{x:Qe.minX,y:Qe.minY,width:Qe.maxX-Qe.minX,height:Qe.maxY-Qe.minY}}function Pe(Le){var tt=Le.attr(),ft=tt.x,ge=tt.y,be=tt.rx,Ce=tt.ry;return{x:ft-be,y:ge-Ce,width:be*2,height:Ce*2}}X("rect",Y),X("image",Y),X("circle",G),X("marker",G),X("polyline",ee),X("polygon",xe),X("text",he),X("path",me),X("line",ke),X("ellipse",Pe)},89473:function(xt,N){"use strict";var F=function(){function $(X,w){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=X,this.name=X,this.originalEvent=w,this.timeStamp=w.timeStamp}return $.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},$.prototype.stopPropagation=function(){this.propagationStopped=!0},$.prototype.toString=function(){var X=this.type;return"[Event (type="+X+")]"},$.prototype.save=function(){},$.prototype.restore=function(){},$}();N.Z=F},98190:function(xt,N,F){"use strict";F.r(N),F.d(N,{AbstractCanvas:function(){return xe.Z},AbstractGroup:function(){return ce.Z},AbstractShape:function(){return he.Z},Base:function(){return ee.Z},Event:function(){return oe.Z},PathUtil:function(){return $},assembleFont:function(){return M.$O},getBBoxMethod:function(){return J.b},getOffScreenContext:function(){return me.L},getTextHeight:function(){return M.FE},invert:function(){return fe.U_},isAllowCapture:function(){return E.pP},multiplyVec2:function(){return fe.rG},registerBBox:function(){return J.W},registerEasing:function(){return ke.C},version:function(){return Pe}});var $=F(47575),X=F(52),w=F.n(X),Q={};for(var Y in X)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","registerBBox","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","registerEasing","version"].indexOf(Y)<0&&(Q[Y]=function(Le){return X[Le]}.bind(0,Y));F.d(N,Q);var G=F(19641),K=F.n(G),Q={};for(var Y in G)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","registerBBox","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","registerEasing","version"].indexOf(Y)<0&&(Q[Y]=function(tt){return G[tt]}.bind(0,Y));F.d(N,Q);var oe=F(89473),ee=F(2667),xe=F(58906),ce=F(31841),he=F(15032),J=F(46556),M=F(8723),E=F(77341),fe=F(41482),me=F(67052),ke=F(93924),Pe="0.5.11"},19641:function(){},52:function(){},41482:function(xt,N,F){"use strict";F.d(N,{U_:function(){return w},rG:function(){return X},xq:function(){return $}});function $(Y,G){var K=[],Q=Y[0],oe=Y[1],ee=Y[2],xe=Y[3],ce=Y[4],he=Y[5],J=Y[6],M=Y[7],E=Y[8],fe=G[0],me=G[1],ke=G[2],Pe=G[3],Le=G[4],tt=G[5],ft=G[6],ge=G[7],be=G[8];return K[0]=fe*Q+me*xe+ke*J,K[1]=fe*oe+me*ce+ke*M,K[2]=fe*ee+me*he+ke*E,K[3]=Pe*Q+Le*xe+tt*J,K[4]=Pe*oe+Le*ce+tt*M,K[5]=Pe*ee+Le*he+tt*E,K[6]=ft*Q+ge*xe+be*J,K[7]=ft*oe+ge*ce+be*M,K[8]=ft*ee+ge*he+be*E,K}function X(Y,G){var K=[],Q=G[0],oe=G[1];return K[0]=Y[0]*Q+Y[3]*oe+Y[6],K[1]=Y[1]*Q+Y[4]*oe+Y[7],K}function w(Y){var G=[],K=Y[0],Q=Y[1],oe=Y[2],ee=Y[3],xe=Y[4],ce=Y[5],he=Y[6],J=Y[7],M=Y[8],E=M*xe-ce*J,fe=-M*ee+ce*he,me=J*ee-xe*he,ke=K*E+Q*fe+oe*me;return ke?(ke=1/ke,G[0]=E*ke,G[1]=(-M*Q+oe*J)*ke,G[2]=(ce*Q-oe*xe)*ke,G[3]=fe*ke,G[4]=(M*K-oe*he)*ke,G[5]=(-ce*K+oe*ee)*ke,G[6]=me*ke,G[7]=(-J*K+Q*he)*ke,G[8]=(xe*K-Q*ee)*ke,G):null}},67052:function(xt,N,F){"use strict";F.d(N,{L:function(){return X}});var $=null;function X(){if(!$){var w=document.createElement("canvas");w.width=1,w.height=1,$=w.getContext("2d")}return $}},47575:function(xt,N,F){"use strict";F.r(N),F.d(N,{catmullRomToBezier:function(){return K},fillPath:function(){return te},fillPathByDiff:function(){return nt},formatPath:function(){return Je},intersection:function(){return je},parsePathArray:function(){return M},parsePathString:function(){return G},pathToAbsolute:function(){return oe},pathToCurve:function(){return he},rectPath:function(){return Le}});var $=F(21030),X=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,w=new RegExp("([a-z])["+X+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+X+"]*,?["+X+"]*)+)","ig"),Y=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+X+"]*,?["+X+"]*","ig"),G=function(pe){if(!pe)return null;if((0,$.kJ)(pe))return pe;var Me={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},ze=[];return String(pe).replace(w,function(De,Ct,Vt){var Ve=[],Ue=Ct.toLowerCase();if(Vt.replace(Y,function(Ee,et){et&&Ve.push(+et)}),Ue==="m"&&Ve.length>2&&(ze.push([Ct].concat(Ve.splice(0,2))),Ue="l",Ct=Ct==="m"?"l":"L"),Ue==="o"&&Ve.length===1&&ze.push([Ct,Ve[0]]),Ue==="r")ze.push([Ct].concat(Ve));else for(;Ve.length>=Me[Ue]&&(ze.push([Ct].concat(Ve.splice(0,Me[Ue]))),!!Me[Ue]););return pe}),ze},K=function(pe,Me){for(var ze=[],De=0,Ct=pe.length;Ct-2*!Me>De;De+=2){var Vt=[{x:+pe[De-2],y:+pe[De-1]},{x:+pe[De],y:+pe[De+1]},{x:+pe[De+2],y:+pe[De+3]},{x:+pe[De+4],y:+pe[De+5]}];Me?De?Ct-4===De?Vt[3]={x:+pe[0],y:+pe[1]}:Ct-2===De&&(Vt[2]={x:+pe[0],y:+pe[1]},Vt[3]={x:+pe[2],y:+pe[3]}):Vt[0]={x:+pe[Ct-2],y:+pe[Ct-1]}:Ct-4===De?Vt[3]=Vt[2]:De||(Vt[0]={x:+pe[De],y:+pe[De+1]}),ze.push(["C",(-Vt[0].x+6*Vt[1].x+Vt[2].x)/6,(-Vt[0].y+6*Vt[1].y+Vt[2].y)/6,(Vt[1].x+6*Vt[2].x-Vt[3].x)/6,(Vt[1].y+6*Vt[2].y-Vt[3].y)/6,Vt[2].x,Vt[2].y])}return ze},Q=function(pe,Me,ze,De,Ct){var Vt=[];if(Ct===null&&De===null&&(De=ze),pe=+pe,Me=+Me,ze=+ze,De=+De,Ct!==null){var Ve=Math.PI/180,Ue=pe+ze*Math.cos(-De*Ve),Ee=pe+ze*Math.cos(-Ct*Ve),et=Me+ze*Math.sin(-De*Ve),st=Me+ze*Math.sin(-Ct*Ve);Vt=[["M",Ue,et],["A",ze,ze,0,+(Ct-De>180),0,Ee,st]]}else Vt=[["M",pe,Me],["m",0,-De],["a",ze,De,0,1,1,0,2*De],["a",ze,De,0,1,1,0,-2*De],["z"]];return Vt},oe=function(pe){if(pe=G(pe),!pe||!pe.length)return[["M",0,0]];var Me=[],ze=0,De=0,Ct=0,Vt=0,Ve=0,Ue,Ee;pe[0][0]==="M"&&(ze=+pe[0][1],De=+pe[0][2],Ct=ze,Vt=De,Ve++,Me[0]=["M",ze,De]);for(var et=pe.length===3&&pe[0][0]==="M"&&pe[1][0].toUpperCase()==="R"&&pe[2][0].toUpperCase()==="Z",st=void 0,Re=void 0,Ie=Ve,ct=pe.length;Ie<ct;Ie++){if(Me.push(st=[]),Re=pe[Ie],Ue=Re[0],Ue!==Ue.toUpperCase())switch(st[0]=Ue.toUpperCase(),st[0]){case"A":st[1]=Re[1],st[2]=Re[2],st[3]=Re[3],st[4]=Re[4],st[5]=Re[5],st[6]=+Re[6]+ze,st[7]=+Re[7]+De;break;case"V":st[1]=+Re[1]+De;break;case"H":st[1]=+Re[1]+ze;break;case"R":Ee=[ze,De].concat(Re.slice(1));for(var Tt=2,Qt=Ee.length;Tt<Qt;Tt++)Ee[Tt]=+Ee[Tt]+ze,Ee[++Tt]=+Ee[Tt]+De;Me.pop(),Me=Me.concat(K(Ee,et));break;case"O":Me.pop(),Ee=Q(ze,De,Re[1],Re[2]),Ee.push(Ee[0]),Me=Me.concat(Ee);break;case"U":Me.pop(),Me=Me.concat(Q(ze,De,Re[1],Re[2],Re[3])),st=["U"].concat(Me[Me.length-1].slice(-2));break;case"M":Ct=+Re[1]+ze,Vt=+Re[2]+De;break;default:for(var Tt=1,Qt=Re.length;Tt<Qt;Tt++)st[Tt]=+Re[Tt]+(Tt%2?ze:De)}else if(Ue==="R")Ee=[ze,De].concat(Re.slice(1)),Me.pop(),Me=Me.concat(K(Ee,et)),st=["R"].concat(Re.slice(-2));else if(Ue==="O")Me.pop(),Ee=Q(ze,De,Re[1],Re[2]),Ee.push(Ee[0]),Me=Me.concat(Ee);else if(Ue==="U")Me.pop(),Me=Me.concat(Q(ze,De,Re[1],Re[2],Re[3])),st=["U"].concat(Me[Me.length-1].slice(-2));else for(var wt=0,se=Re.length;wt<se;wt++)st[wt]=Re[wt];if(Ue=Ue.toUpperCase(),Ue!=="O")switch(st[0]){case"Z":ze=+Ct,De=+Vt;break;case"H":ze=st[1];break;case"V":De=st[1];break;case"M":Ct=st[st.length-2],Vt=st[st.length-1];break;default:ze=st[st.length-2],De=st[st.length-1]}}return Me},ee=function(pe,Me,ze,De){return[pe,Me,ze,De,ze,De]},xe=function(pe,Me,ze,De,Ct,Vt){var Ve=.3333333333333333,Ue=2/3;return[Ve*pe+Ue*ze,Ve*Me+Ue*De,Ve*Ct+Ue*ze,Ve*Vt+Ue*De,Ct,Vt]},ce=function(pe,Me,ze,De,Ct,Vt,Ve,Ue,Ee,et){ze===De&&(ze+=1);var st=Math.PI*120/180,Re=Math.PI/180*(+Ct||0),Ie=[],ct,Tt,Qt,wt,se,Ge=function(Pt,jt,gr){var Cr=Pt*Math.cos(gr)-jt*Math.sin(gr),kt=Pt*Math.sin(gr)+jt*Math.cos(gr);return{x:Cr,y:kt}};if(et)Tt=et[0],Qt=et[1],wt=et[2],se=et[3];else{ct=Ge(pe,Me,-Re),pe=ct.x,Me=ct.y,ct=Ge(Ue,Ee,-Re),Ue=ct.x,Ee=ct.y,pe===Ue&&Me===Ee&&(Ue+=1,Ee+=1);var Ke=(pe-Ue)/2,bt=(Me-Ee)/2,Be=Ke*Ke/(ze*ze)+bt*bt/(De*De);Be>1&&(Be=Math.sqrt(Be),ze=Be*ze,De=Be*De);var pt=ze*ze,It=De*De,ot=(Vt===Ve?-1:1)*Math.sqrt(Math.abs((pt*It-pt*bt*bt-It*Ke*Ke)/(pt*bt*bt+It*Ke*Ke)));wt=ot*ze*bt/De+(pe+Ue)/2,se=ot*-De*Ke/ze+(Me+Ee)/2,Tt=Math.asin(((Me-se)/De).toFixed(9)),Qt=Math.asin(((Ee-se)/De).toFixed(9)),Tt=pe<wt?Math.PI-Tt:Tt,Qt=Ue<wt?Math.PI-Qt:Qt,Tt<0&&(Tt=Math.PI*2+Tt),Qt<0&&(Qt=Math.PI*2+Qt),Ve&&Tt>Qt&&(Tt=Tt-Math.PI*2),!Ve&&Qt>Tt&&(Qt=Qt-Math.PI*2)}var zt=Qt-Tt;if(Math.abs(zt)>st){var Jt=Qt,tr=Ue,pr=Ee;Qt=Tt+st*(Ve&&Qt>Tt?1:-1),Ue=wt+ze*Math.cos(Qt),Ee=se+De*Math.sin(Qt),Ie=ce(Ue,Ee,ze,De,Ct,0,Ve,tr,pr,[Qt,Jt,wt,se])}zt=Qt-Tt;var br=Math.cos(Tt),Zr=Math.sin(Tt),Nr=Math.cos(Qt),tn=Math.sin(Qt),Dn=Math.tan(zt/4),gn=4/3*ze*Dn,Vn=4/3*De*Dn,Un=[pe,Me],mi=[pe+gn*Zr,Me-Vn*br],qn=[Ue+gn*tn,Ee-Vn*Nr],Xn=[Ue,Ee];if(mi[0]=2*Un[0]-mi[0],mi[1]=2*Un[1]-mi[1],et)return[mi,qn,Xn].concat(Ie);Ie=[mi,qn,Xn].concat(Ie).join().split(",");for(var We=[],it=0,_t=Ie.length;it<_t;it++)We[it]=it%2?Ge(Ie[it-1],Ie[it],Re).y:Ge(Ie[it],Ie[it+1],Re).x;return We},he=function(pe,Me){var ze=oe(pe),De=Me&&oe(Me),Ct={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Vt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Ve=[],Ue=[],Ee="",et="",st,Re=function(Ke,bt,Be){var pt,It;if(!Ke)return["C",bt.x,bt.y,bt.x,bt.y,bt.x,bt.y];switch(!(Ke[0]in{T:1,Q:1})&&(bt.qx=bt.qy=null),Ke[0]){case"M":bt.X=Ke[1],bt.Y=Ke[2];break;case"A":Ke=["C"].concat(ce.apply(0,[bt.x,bt.y].concat(Ke.slice(1))));break;case"S":Be==="C"||Be==="S"?(pt=bt.x*2-bt.bx,It=bt.y*2-bt.by):(pt=bt.x,It=bt.y),Ke=["C",pt,It].concat(Ke.slice(1));break;case"T":Be==="Q"||Be==="T"?(bt.qx=bt.x*2-bt.qx,bt.qy=bt.y*2-bt.qy):(bt.qx=bt.x,bt.qy=bt.y),Ke=["C"].concat(xe(bt.x,bt.y,bt.qx,bt.qy,Ke[1],Ke[2]));break;case"Q":bt.qx=Ke[1],bt.qy=Ke[2],Ke=["C"].concat(xe(bt.x,bt.y,Ke[1],Ke[2],Ke[3],Ke[4]));break;case"L":Ke=["C"].concat(ee(bt.x,bt.y,Ke[1],Ke[2]));break;case"H":Ke=["C"].concat(ee(bt.x,bt.y,Ke[1],bt.y));break;case"V":Ke=["C"].concat(ee(bt.x,bt.y,bt.x,Ke[1]));break;case"Z":Ke=["C"].concat(ee(bt.x,bt.y,bt.X,bt.Y));break;default:break}return Ke},Ie=function(Ke,bt){if(Ke[bt].length>7){Ke[bt].shift();for(var Be=Ke[bt];Be.length;)Ve[bt]="A",De&&(Ue[bt]="A"),Ke.splice(bt++,0,["C"].concat(Be.splice(0,6)));Ke.splice(bt,1),st=Math.max(ze.length,De&&De.length||0)}},ct=function(Ke,bt,Be,pt,It){Ke&&bt&&Ke[It][0]==="M"&&bt[It][0]!=="M"&&(bt.splice(It,0,["M",pt.x,pt.y]),Be.bx=0,Be.by=0,Be.x=Ke[It][1],Be.y=Ke[It][2],st=Math.max(ze.length,De&&De.length||0))};st=Math.max(ze.length,De&&De.length||0);for(var Tt=0;Tt<st;Tt++){ze[Tt]&&(Ee=ze[Tt][0]),Ee!=="C"&&(Ve[Tt]=Ee,Tt&&(et=Ve[Tt-1])),ze[Tt]=Re(ze[Tt],Ct,et),Ve[Tt]!=="A"&&Ee==="C"&&(Ve[Tt]="C"),Ie(ze,Tt),De&&(De[Tt]&&(Ee=De[Tt][0]),Ee!=="C"&&(Ue[Tt]=Ee,Tt&&(et=Ue[Tt-1])),De[Tt]=Re(De[Tt],Vt,et),Ue[Tt]!=="A"&&Ee==="C"&&(Ue[Tt]="C"),Ie(De,Tt)),ct(ze,De,Ct,Vt,Tt),ct(De,ze,Vt,Ct,Tt);var Qt=ze[Tt],wt=De&&De[Tt],se=Qt.length,Ge=De&&wt.length;Ct.x=Qt[se-2],Ct.y=Qt[se-1],Ct.bx=parseFloat(Qt[se-4])||Ct.x,Ct.by=parseFloat(Qt[se-3])||Ct.y,Vt.bx=De&&(parseFloat(wt[Ge-4])||Vt.x),Vt.by=De&&(parseFloat(wt[Ge-3])||Vt.y),Vt.x=De&&wt[Ge-2],Vt.y=De&&wt[Ge-1]}return De?[ze,De]:ze},J=/,?([a-z]),?/gi,M=function(pe){return pe.join(",").replace(J,"$1")},E=function(pe,Me,ze,De,Ct){var Vt=-3*Me+9*ze-9*De+3*Ct,Ve=pe*Vt+6*Me-12*ze+6*De;return pe*Ve-3*Me+3*ze},fe=function(pe,Me,ze,De,Ct,Vt,Ve,Ue,Ee){Ee===null&&(Ee=1),Ee=Ee>1?1:Ee<0?0:Ee;for(var et=Ee/2,st=12,Re=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Ie=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],ct=0,Tt=0;Tt<st;Tt++){var Qt=et*Re[Tt]+et,wt=E(Qt,pe,ze,Ct,Ve),se=E(Qt,Me,De,Vt,Ue),Ge=wt*wt+se*se;ct+=Ie[Tt]*Math.sqrt(Ge)}return et*ct},me=function(pe,Me,ze,De,Ct,Vt,Ve,Ue){for(var Ee=[],et=[[],[]],st,Re,Ie,ct,Tt=0;Tt<2;++Tt){if(Tt===0?(Re=6*pe-12*ze+6*Ct,st=-3*pe+9*ze-9*Ct+3*Ve,Ie=3*ze-3*pe):(Re=6*Me-12*De+6*Vt,st=-3*Me+9*De-9*Vt+3*Ue,Ie=3*De-3*Me),Math.abs(st)<1e-12){if(Math.abs(Re)<1e-12)continue;ct=-Ie/Re,ct>0&&ct<1&&Ee.push(ct);continue}var Qt=Re*Re-4*Ie*st,wt=Math.sqrt(Qt);if(!(Qt<0)){var se=(-Re+wt)/(2*st);se>0&&se<1&&Ee.push(se);var Ge=(-Re-wt)/(2*st);Ge>0&&Ge<1&&Ee.push(Ge)}}for(var Ke=Ee.length,bt=Ke,Be;Ke--;)ct=Ee[Ke],Be=1-ct,et[0][Ke]=Be*Be*Be*pe+3*Be*Be*ct*ze+3*Be*ct*ct*Ct+ct*ct*ct*Ve,et[1][Ke]=Be*Be*Be*Me+3*Be*Be*ct*De+3*Be*ct*ct*Vt+ct*ct*ct*Ue;return et[0][bt]=pe,et[1][bt]=Me,et[0][bt+1]=Ve,et[1][bt+1]=Ue,et[0].length=et[1].length=bt+2,{min:{x:Math.min.apply(0,et[0]),y:Math.min.apply(0,et[1])},max:{x:Math.max.apply(0,et[0]),y:Math.max.apply(0,et[1])}}},ke=function(pe,Me,ze,De,Ct,Vt,Ve,Ue){if(!(Math.max(pe,ze)<Math.min(Ct,Ve)||Math.min(pe,ze)>Math.max(Ct,Ve)||Math.max(Me,De)<Math.min(Vt,Ue)||Math.min(Me,De)>Math.max(Vt,Ue))){var Ee=(pe*De-Me*ze)*(Ct-Ve)-(pe-ze)*(Ct*Ue-Vt*Ve),et=(pe*De-Me*ze)*(Vt-Ue)-(Me-De)*(Ct*Ue-Vt*Ve),st=(pe-ze)*(Vt-Ue)-(Me-De)*(Ct-Ve);if(st){var Re=Ee/st,Ie=et/st,ct=+Re.toFixed(2),Tt=+Ie.toFixed(2);if(!(ct<+Math.min(pe,ze).toFixed(2)||ct>+Math.max(pe,ze).toFixed(2)||ct<+Math.min(Ct,Ve).toFixed(2)||ct>+Math.max(Ct,Ve).toFixed(2)||Tt<+Math.min(Me,De).toFixed(2)||Tt>+Math.max(Me,De).toFixed(2)||Tt<+Math.min(Vt,Ue).toFixed(2)||Tt>+Math.max(Vt,Ue).toFixed(2)))return{x:Re,y:Ie}}}},Pe=function(pe,Me,ze){return Me>=pe.x&&Me<=pe.x+pe.width&&ze>=pe.y&&ze<=pe.y+pe.height},Le=function(pe,Me,ze,De,Ct){if(Ct)return[["M",+pe+ +Ct,Me],["l",ze-Ct*2,0],["a",Ct,Ct,0,0,1,Ct,Ct],["l",0,De-Ct*2],["a",Ct,Ct,0,0,1,-Ct,Ct],["l",Ct*2-ze,0],["a",Ct,Ct,0,0,1,-Ct,-Ct],["l",0,Ct*2-De],["a",Ct,Ct,0,0,1,Ct,-Ct],["z"]];var Vt=[["M",pe,Me],["l",ze,0],["l",0,De],["l",-ze,0],["z"]];return Vt.parsePathArray=M,Vt},tt=function(pe,Me,ze,De){return pe===null&&(pe=Me=ze=De=0),Me===null&&(Me=pe.y,ze=pe.width,De=pe.height,pe=pe.x),{x:pe,y:Me,width:ze,w:ze,height:De,h:De,x2:pe+ze,y2:Me+De,cx:pe+ze/2,cy:Me+De/2,r1:Math.min(ze,De)/2,r2:Math.max(ze,De)/2,r0:Math.sqrt(ze*ze+De*De)/2,path:Le(pe,Me,ze,De),vb:[pe,Me,ze,De].join(" ")}},ft=function(pe,Me){return pe=tt(pe),Me=tt(Me),Pe(Me,pe.x,pe.y)||Pe(Me,pe.x2,pe.y)||Pe(Me,pe.x,pe.y2)||Pe(Me,pe.x2,pe.y2)||Pe(pe,Me.x,Me.y)||Pe(pe,Me.x2,Me.y)||Pe(pe,Me.x,Me.y2)||Pe(pe,Me.x2,Me.y2)||(pe.x<Me.x2&&pe.x>Me.x||Me.x<pe.x2&&Me.x>pe.x)&&(pe.y<Me.y2&&pe.y>Me.y||Me.y<pe.y2&&Me.y>pe.y)},ge=function(pe,Me,ze,De,Ct,Vt,Ve,Ue){(0,$.kJ)(pe)||(pe=[pe,Me,ze,De,Ct,Vt,Ve,Ue]);var Ee=me.apply(null,pe);return tt(Ee.min.x,Ee.min.y,Ee.max.x-Ee.min.x,Ee.max.y-Ee.min.y)},be=function(pe,Me,ze,De,Ct,Vt,Ve,Ue,Ee){var et=1-Ee,st=Math.pow(et,3),Re=Math.pow(et,2),Ie=Ee*Ee,ct=Ie*Ee,Tt=st*pe+Re*3*Ee*ze+et*3*Ee*Ee*Ct+ct*Ve,Qt=st*Me+Re*3*Ee*De+et*3*Ee*Ee*Vt+ct*Ue,wt=pe+2*Ee*(ze-pe)+Ie*(Ct-2*ze+pe),se=Me+2*Ee*(De-Me)+Ie*(Vt-2*De+Me),Ge=ze+2*Ee*(Ct-ze)+Ie*(Ve-2*Ct+ze),Ke=De+2*Ee*(Vt-De)+Ie*(Ue-2*Vt+De),bt=et*pe+Ee*ze,Be=et*Me+Ee*De,pt=et*Ct+Ee*Ve,It=et*Vt+Ee*Ue,ot=90-Math.atan2(wt-Ge,se-Ke)*180/Math.PI;return{x:Tt,y:Qt,m:{x:wt,y:se},n:{x:Ge,y:Ke},start:{x:bt,y:Be},end:{x:pt,y:It},alpha:ot}},Ce=function(pe,Me,ze){var De=ge(pe),Ct=ge(Me);if(!ft(De,Ct))return ze?0:[];for(var Vt=fe.apply(0,pe),Ve=fe.apply(0,Me),Ue=~~(Vt/8),Ee=~~(Ve/8),et=[],st=[],Re={},Ie=ze?0:[],ct=0;ct<Ue+1;ct++){var Tt=be.apply(0,pe.concat(ct/Ue));et.push({x:Tt.x,y:Tt.y,t:ct/Ue})}for(var ct=0;ct<Ee+1;ct++){var Tt=be.apply(0,Me.concat(ct/Ee));st.push({x:Tt.x,y:Tt.y,t:ct/Ee})}for(var ct=0;ct<Ue;ct++)for(var Qt=0;Qt<Ee;Qt++){var wt=et[ct],se=et[ct+1],Ge=st[Qt],Ke=st[Qt+1],bt=Math.abs(se.x-wt.x)<.001?"y":"x",Be=Math.abs(Ke.x-Ge.x)<.001?"y":"x",pt=ke(wt.x,wt.y,se.x,se.y,Ge.x,Ge.y,Ke.x,Ke.y);if(pt){if(Re[pt.x.toFixed(4)]===pt.y.toFixed(4))continue;Re[pt.x.toFixed(4)]=pt.y.toFixed(4);var It=wt.t+Math.abs((pt[bt]-wt[bt])/(se[bt]-wt[bt]))*(se.t-wt.t),ot=Ge.t+Math.abs((pt[Be]-Ge[Be])/(Ke[Be]-Ge[Be]))*(Ke.t-Ge.t);It>=0&&It<=1&&ot>=0&&ot<=1&&(ze?Ie+=1:Ie.push({x:pt.x,y:pt.y,t1:It,t2:ot}))}}return Ie},Ye=function(pe,Me,ze){pe=he(pe),Me=he(Me);for(var De,Ct,Vt,Ve,Ue,Ee,et,st,Re,Ie,ct=ze?0:[],Tt=0,Qt=pe.length;Tt<Qt;Tt++){var wt=pe[Tt];if(wt[0]==="M")De=Ue=wt[1],Ct=Ee=wt[2];else{wt[0]==="C"?(Re=[De,Ct].concat(wt.slice(1)),De=Re[6],Ct=Re[7]):(Re=[De,Ct,De,Ct,Ue,Ee,Ue,Ee],De=Ue,Ct=Ee);for(var se=0,Ge=Me.length;se<Ge;se++){var Ke=Me[se];if(Ke[0]==="M")Vt=et=Ke[1],Ve=st=Ke[2];else{Ke[0]==="C"?(Ie=[Vt,Ve].concat(Ke.slice(1)),Vt=Ie[6],Ve=Ie[7]):(Ie=[Vt,Ve,Vt,Ve,et,st,et,st],Vt=et,Ve=st);var bt=Ce(Re,Ie,ze);if(ze)ct+=bt;else{for(var Be=0,pt=bt.length;Be<pt;Be++)bt[Be].segment1=Tt,bt[Be].segment2=se,bt[Be].bez1=Re,bt[Be].bez2=Ie;ct=ct.concat(bt)}}}}}return ct},je=function(pe,Me){return Ye(pe,Me)};function Et(pe,Me){var ze=[],De=[];function Ct(Vt,Ve){if(Vt.length===1)ze.push(Vt[0]),De.push(Vt[0]);else{for(var Ue=[],Ee=0;Ee<Vt.length-1;Ee++)Ee===0&&ze.push(Vt[0]),Ee===Vt.length-2&&De.push(Vt[Ee+1]),Ue[Ee]=[(1-Ve)*Vt[Ee][0]+Ve*Vt[Ee+1][0],(1-Ve)*Vt[Ee][1]+Ve*Vt[Ee+1][1]];Ct(Ue,Ve)}}return pe.length&&Ct(pe,Me),{left:ze,right:De.reverse()}}function Ae(pe,Me,ze){var De=[[pe[1],pe[2]]];ze=ze||2;var Ct=[];Me[0]==="A"?(De.push(Me[6]),De.push(Me[7])):Me[0]==="C"?(De.push([Me[1],Me[2]]),De.push([Me[3],Me[4]]),De.push([Me[5],Me[6]])):Me[0]==="S"||Me[0]==="Q"?(De.push([Me[1],Me[2]]),De.push([Me[3],Me[4]])):De.push([Me[1],Me[2]]);for(var Vt=De,Ve=1/ze,Ue=0;Ue<ze-1;Ue++){var Ee=Ve/(1-Ve*Ue),et=Et(Vt,Ee);Ct.push(et.left),Vt=et.right}Ct.push(Vt);var st=Ct.map(function(Re){var Ie=[];return Re.length===4&&(Ie.push("C"),Ie=Ie.concat(Re[2])),Re.length>=3&&(Re.length===3&&Ie.push("Q"),Ie=Ie.concat(Re[1])),Re.length===2&&Ie.push("L"),Ie=Ie.concat(Re[Re.length-1]),Ie});return st}var Qe=function(pe,Me,ze){if(ze===1)return[[].concat(pe)];var De=[];if(Me[0]==="L"||Me[0]==="C"||Me[0]==="Q")De=De.concat(Ae(pe,Me,ze));else{var Ct=[].concat(pe);Ct[0]==="M"&&(Ct[0]="L");for(var Vt=0;Vt<=ze-1;Vt++)De.push(Ct)}return De},te=function(pe,Me){if(pe.length===1)return pe;var ze=pe.length-1,De=Me.length-1,Ct=ze/De,Vt=[];if(pe.length===1&&pe[0][0]==="M"){for(var Ve=0;Ve<De-ze;Ve++)pe.push(pe[0]);return pe}for(var Ve=0;Ve<De;Ve++){var Ue=Math.floor(Ct*Ve);Vt[Ue]=(Vt[Ue]||0)+1}var Ee=Vt.reduce(function(et,st,Re){return Re===ze?et.concat(pe[ze]):et.concat(Qe(pe[Re],pe[Re+1],st))},[]);return Ee.unshift(pe[0]),(Me[De]==="Z"||Me[De]==="z")&&Ee.push("Z"),Ee},Ze=function(pe,Me){if(pe.length!==Me.length)return!1;var ze=!0;return(0,$.S6)(pe,function(De,Ct){if(De!==Me[Ct])return ze=!1,!1}),ze};function ie(pe,Me,ze){var De=null,Ct=ze;return Me<Ct&&(Ct=Me,De="add"),pe<Ct&&(Ct=pe,De="del"),{type:De,min:Ct}}var Oe=function(pe,Me){var ze=pe.length,De=Me.length,Ct,Vt,Ve=0;if(ze===0||De===0)return null;for(var Ue=[],Ee=0;Ee<=ze;Ee++)Ue[Ee]=[],Ue[Ee][0]={min:Ee};for(var et=0;et<=De;et++)Ue[0][et]={min:et};for(var Ee=1;Ee<=ze;Ee++){Ct=pe[Ee-1];for(var et=1;et<=De;et++){Vt=Me[et-1],Ze(Ct,Vt)?Ve=0:Ve=1;var st=Ue[Ee-1][et].min+1,Re=Ue[Ee][et-1].min+1,Ie=Ue[Ee-1][et-1].min+Ve;Ue[Ee][et]=ie(st,Re,Ie)}}return Ue},nt=function(pe,Me){var ze=Oe(pe,Me),De=pe.length,Ct=Me.length,Vt=[],Ve=1,Ue=1;if(ze[De][Ct].min!==De){for(var Ee=1;Ee<=De;Ee++){var et=ze[Ee][Ee].min;Ue=Ee;for(var st=Ve;st<=Ct;st++)ze[Ee][st].min<et&&(et=ze[Ee][st].min,Ue=st);Ve=Ue,ze[Ee][Ve].type&&Vt.push({index:Ee-1,type:ze[Ee][Ve].type})}for(var Ee=Vt.length-1;Ee>=0;Ee--)Ve=Vt[Ee].index,Vt[Ee].type==="add"?pe.splice(Ve,0,[].concat(pe[Ve])):pe.splice(Ve,1)}De=pe.length;var Re=Ct-De;if(De<Ct)for(var Ee=0;Ee<Re;Ee++)pe[De-1][0]==="z"||pe[De-1][0]==="Z"?pe.splice(De-2,0,pe[De-2]):pe.push(pe[De-1]),De+=1;return pe};function ye(pe,Me,ze){for(var De=[].concat(pe),Ct,Vt=1/(ze+1),Ve=Te(Me)[0],Ue=1;Ue<=ze;Ue++)Vt*=Ue,Ct=Math.floor(pe.length*Vt),Ct===0?De.unshift([Ve[0]*Vt+pe[Ct][0]*(1-Vt),Ve[1]*Vt+pe[Ct][1]*(1-Vt)]):De.splice(Ct,0,[Ve[0]*Vt+pe[Ct][0]*(1-Vt),Ve[1]*Vt+pe[Ct][1]*(1-Vt)]);return De}function Te(pe){var Me=[];switch(pe[0]){case"M":Me.push([pe[1],pe[2]]);break;case"L":Me.push([pe[1],pe[2]]);break;case"A":Me.push([pe[6],pe[7]]);break;case"Q":Me.push([pe[3],pe[4]]),Me.push([pe[1],pe[2]]);break;case"T":Me.push([pe[1],pe[2]]);break;case"C":Me.push([pe[5],pe[6]]),Me.push([pe[1],pe[2]]),Me.push([pe[3],pe[4]]);break;case"S":Me.push([pe[3],pe[4]]),Me.push([pe[1],pe[2]]);break;case"H":Me.push([pe[1],pe[1]]);break;case"V":Me.push([pe[1],pe[1]]);break;default:}return Me}var Je=function(pe,Me){if(pe.length<=1)return pe;for(var ze,De=0;De<Me.length;De++)if(pe[De][0]!==Me[De][0])switch(ze=Te(pe[De]),Me[De][0]){case"M":pe[De]=["M"].concat(ze[0]);break;case"L":pe[De]=["L"].concat(ze[0]);break;case"A":pe[De]=[].concat(Me[De]),pe[De][6]=ze[0][0],pe[De][7]=ze[0][1];break;case"Q":if(ze.length<2)if(De>0)ze=ye(ze,pe[De-1],1);else{pe[De]=Me[De];break}pe[De]=["Q"].concat(ze.reduce(function(Ct,Vt){return Ct.concat(Vt)},[]));break;case"T":pe[De]=["T"].concat(ze[0]);break;case"C":if(ze.length<3)if(De>0)ze=ye(ze,pe[De-1],2);else{pe[De]=Me[De];break}pe[De]=["C"].concat(ze.reduce(function(Ct,Vt){return Ct.concat(Vt)},[]));break;case"S":if(ze.length<2)if(De>0)ze=ye(ze,pe[De-1],1);else{pe[De]=Me[De];break}pe[De]=["S"].concat(ze.reduce(function(Ct,Vt){return Ct.concat(Vt)},[]));break;default:pe[De]=Me[De]}return pe}},8723:function(xt,N,F){"use strict";F.d(N,{$O:function(){return K},FE:function(){return w},mY:function(){return G}});var $=F(77341),X=F(67052);function w(Q,oe,ee){var xe=1;if((0,$.HD)(Q)&&(xe=Q.split(`
`).length),xe>1){var ce=Y(oe,ee);return oe*xe+ce*(xe-1)}return oe}function Y(Q,oe){return oe?oe-Q:Q*.14}function G(Q,oe){var ee=(0,X.L)(),xe=0;if((0,$.kK)(Q)||Q==="")return xe;if(ee.save(),ee.font=oe,(0,$.HD)(Q)&&Q.includes(`
`)){var ce=Q.split(`
`);(0,$.S6)(ce,function(he){var J=ee.measureText(he).width;xe<J&&(xe=J)})}else xe=ee.measureText(Q).width;return ee.restore(),xe}function K(Q){var oe=Q.fontSize,ee=Q.fontFamily,xe=Q.fontWeight,ce=Q.fontStyle,he=Q.fontVariant;return[ce,he,xe,oe+"px",ee].join(" ").trim()}},77341:function(xt,N,F){"use strict";F.d(N,{As:function(){return X},CD:function(){return $.CD},HD:function(){return $.HD},Kn:function(){return $.Kn},S6:function(){return $.S6},UY:function(){return Y},jC:function(){return $.jC},jU:function(){return w},kK:function(){return $.UM},mf:function(){return $.mf},pP:function(){return G}});var $=F(21030);function X(K,Q){var oe=K.indexOf(Q);oe!==-1&&K.splice(oe,1)}var w=typeof window!="undefined"&&typeof window.document!="undefined";function Y(K,Q){if(K.isCanvas())return!0;for(var oe=Q.getParent(),ee=!1;oe;){if(oe===K){ee=!0;break}oe=oe.getParent()}return ee}function G(K){return K.cfg.visible&&K.cfg.capture}},90857:function(xt){"use strict";var N=Object.prototype.hasOwnProperty,F="~";function $(){}Object.create&&($.prototype=Object.create(null),new $().__proto__||(F=!1));function X(K,Q,oe){this.fn=K,this.context=Q,this.once=oe||!1}function w(K,Q,oe,ee,xe){if(typeof oe!="function")throw new TypeError("The listener must be a function");var ce=new X(oe,ee||K,xe),he=F?F+Q:Q;return K._events[he]?K._events[he].fn?K._events[he]=[K._events[he],ce]:K._events[he].push(ce):(K._events[he]=ce,K._eventsCount++),K}function Y(K,Q){--K._eventsCount===0?K._events=new $:delete K._events[Q]}function G(){this._events=new $,this._eventsCount=0}G.prototype.eventNames=function(){var Q=[],oe,ee;if(this._eventsCount===0)return Q;for(ee in oe=this._events)N.call(oe,ee)&&Q.push(F?ee.slice(1):ee);return Object.getOwnPropertySymbols?Q.concat(Object.getOwnPropertySymbols(oe)):Q},G.prototype.listeners=function(Q){var oe=F?F+Q:Q,ee=this._events[oe];if(!ee)return[];if(ee.fn)return[ee.fn];for(var xe=0,ce=ee.length,he=new Array(ce);xe<ce;xe++)he[xe]=ee[xe].fn;return he},G.prototype.listenerCount=function(Q){var oe=F?F+Q:Q,ee=this._events[oe];return ee?ee.fn?1:ee.length:0},G.prototype.emit=function(Q,oe,ee,xe,ce,he){var J=F?F+Q:Q;if(!this._events[J])return!1;var M=this._events[J],E=arguments.length,fe,me;if(M.fn){switch(M.once&&this.removeListener(Q,M.fn,void 0,!0),E){case 1:return M.fn.call(M.context),!0;case 2:return M.fn.call(M.context,oe),!0;case 3:return M.fn.call(M.context,oe,ee),!0;case 4:return M.fn.call(M.context,oe,ee,xe),!0;case 5:return M.fn.call(M.context,oe,ee,xe,ce),!0;case 6:return M.fn.call(M.context,oe,ee,xe,ce,he),!0}for(me=1,fe=new Array(E-1);me<E;me++)fe[me-1]=arguments[me];M.fn.apply(M.context,fe)}else{var ke=M.length,Pe;for(me=0;me<ke;me++)switch(M[me].once&&this.removeListener(Q,M[me].fn,void 0,!0),E){case 1:M[me].fn.call(M[me].context);break;case 2:M[me].fn.call(M[me].context,oe);break;case 3:M[me].fn.call(M[me].context,oe,ee);break;case 4:M[me].fn.call(M[me].context,oe,ee,xe);break;default:if(!fe)for(Pe=1,fe=new Array(E-1);Pe<E;Pe++)fe[Pe-1]=arguments[Pe];M[me].fn.apply(M[me].context,fe)}}return!0},G.prototype.on=function(Q,oe,ee){return w(this,Q,oe,ee,!1)},G.prototype.once=function(Q,oe,ee){return w(this,Q,oe,ee,!0)},G.prototype.removeListener=function(Q,oe,ee,xe){var ce=F?F+Q:Q;if(!this._events[ce])return this;if(!oe)return Y(this,ce),this;var he=this._events[ce];if(he.fn)he.fn===oe&&(!xe||he.once)&&(!ee||he.context===ee)&&Y(this,ce);else{for(var J=0,M=[],E=he.length;J<E;J++)(he[J].fn!==oe||xe&&!he[J].once||ee&&he[J].context!==ee)&&M.push(he[J]);M.length?this._events[ce]=M.length===1?M[0]:M:Y(this,ce)}return this},G.prototype.removeAllListeners=function(Q){var oe;return Q?(oe=F?F+Q:Q,this._events[oe]&&Y(this,oe)):(this._events=new $,this._eventsCount=0),this},G.prototype.off=G.prototype.removeListener,G.prototype.addListener=G.prototype.on,G.prefixed=F,G.EventEmitter=G,xt.exports=G},32793:function(xt,N,F){"use strict";F.d(N,{wN:function(){return ye},Ll:function(){return be},x1:function(){return ee},aH:function(){return De},lD:function(){return ke},Zr:function(){return $}});var $={};F.r($),F.d($,{distance:function(){return w},getBBoxByArray:function(){return G},getBBoxRange:function(){return K},isNumberEqual:function(){return Y},piMod:function(){return Q}});var X=F(21030);function w(Ve,Ue,Ee,et){var st=Ve-Ee,Re=Ue-et;return Math.sqrt(st*st+Re*Re)}function Y(Ve,Ue){return Math.abs(Ve-Ue)<.001}function G(Ve,Ue){var Ee=(0,X.VV)(Ve),et=(0,X.VV)(Ue),st=(0,X.Fp)(Ve),Re=(0,X.Fp)(Ue);return{x:Ee,y:et,width:st-Ee,height:Re-et}}function K(Ve,Ue,Ee,et){return{minX:(0,X.VV)([Ve,Ee]),maxX:(0,X.Fp)([Ve,Ee]),minY:(0,X.VV)([Ue,et]),maxY:(0,X.Fp)([Ue,et])}}function Q(Ve){return(Ve+Math.PI*2)%(Math.PI*2)}var oe=F(31437),ee={box:function(Ve,Ue,Ee,et){return G([Ve,Ee],[Ue,et])},length:function(Ve,Ue,Ee,et){return w(Ve,Ue,Ee,et)},pointAt:function(Ve,Ue,Ee,et,st){return{x:(1-st)*Ve+st*Ee,y:(1-st)*Ue+st*et}},pointDistance:function(Ve,Ue,Ee,et,st,Re){var Ie=(Ee-Ve)*(st-Ve)+(et-Ue)*(Re-Ue);if(Ie<0)return w(Ve,Ue,st,Re);var ct=(Ee-Ve)*(Ee-Ve)+(et-Ue)*(et-Ue);return Ie>ct?w(Ee,et,st,Re):this.pointToLine(Ve,Ue,Ee,et,st,Re)},pointToLine:function(Ve,Ue,Ee,et,st,Re){var Ie=[Ee-Ve,et-Ue];if(oe.I6(Ie,[0,0]))return Math.sqrt((st-Ve)*(st-Ve)+(Re-Ue)*(Re-Ue));var ct=[-Ie[1],Ie[0]];oe.Fv(ct,ct);var Tt=[st-Ve,Re-Ue];return Math.abs(oe.AK(Tt,ct))},tangentAngle:function(Ve,Ue,Ee,et){return Math.atan2(et-Ue,Ee-Ve)}},xe=1e-4;function ce(Ve,Ue,Ee,et,st,Re){var Ie,ct=1/0,Tt=[Ee,et],Qt=20;Re&&Re>200&&(Qt=Re/10);for(var wt=1/Qt,se=wt/10,Ge=0;Ge<=Qt;Ge++){var Ke=Ge*wt,bt=[st.apply(null,Ve.concat([Ke])),st.apply(null,Ue.concat([Ke]))],Be=w(Tt[0],Tt[1],bt[0],bt[1]);Be<ct&&(Ie=Ke,ct=Be)}if(Ie===0)return{x:Ve[0],y:Ue[0]};if(Ie===1){var pt=Ve.length;return{x:Ve[pt-1],y:Ue[pt-1]}}ct=1/0;for(var Ge=0;Ge<32&&!(se<xe);Ge++){var It=Ie-se,ot=Ie+se,bt=[st.apply(null,Ve.concat([It])),st.apply(null,Ue.concat([It]))],Be=w(Tt[0],Tt[1],bt[0],bt[1]);if(It>=0&&Be<ct)Ie=It,ct=Be;else{var zt=[st.apply(null,Ve.concat([ot])),st.apply(null,Ue.concat([ot]))],Jt=w(Tt[0],Tt[1],zt[0],zt[1]);ot<=1&&Jt<ct?(Ie=ot,ct=Jt):se*=.5}}return{x:st.apply(null,Ve.concat([Ie])),y:st.apply(null,Ue.concat([Ie]))}}function he(Ve,Ue){for(var Ee=0,et=Ve.length,st=0;st<et;st++){var Re=Ve[st],Ie=Ue[st],ct=Ve[(st+1)%et],Tt=Ue[(st+1)%et];Ee+=w(Re,Ie,ct,Tt)}return Ee/2}function J(Ve,Ue,Ee,et){var st=1-et;return st*st*Ve+2*et*st*Ue+et*et*Ee}function M(Ve,Ue,Ee){var et=Ve+Ee-2*Ue;if(Y(et,0))return[.5];var st=(Ve-Ue)/et;return st<=1&&st>=0?[st]:[]}function E(Ve,Ue,Ee,et){return 2*(1-et)*(Ue-Ve)+2*et*(Ee-Ue)}function fe(Ve,Ue,Ee,et,st,Re,Ie){var ct=J(Ve,Ee,st,Ie),Tt=J(Ue,et,Re,Ie),Qt=ee.pointAt(Ve,Ue,Ee,et,Ie),wt=ee.pointAt(Ee,et,st,Re,Ie);return[[Ve,Ue,Qt.x,Qt.y,ct,Tt],[ct,Tt,wt.x,wt.y,st,Re]]}function me(Ve,Ue,Ee,et,st,Re,Ie){if(Ie===0)return(w(Ve,Ue,Ee,et)+w(Ee,et,st,Re)+w(Ve,Ue,st,Re))/2;var ct=fe(Ve,Ue,Ee,et,st,Re,.5),Tt=ct[0],Qt=ct[1];return Tt.push(Ie-1),Qt.push(Ie-1),me.apply(null,Tt)+me.apply(null,Qt)}var ke={box:function(Ve,Ue,Ee,et,st,Re){var Ie=M(Ve,Ee,st)[0],ct=M(Ue,et,Re)[0],Tt=[Ve,st],Qt=[Ue,Re];return Ie!==void 0&&Tt.push(J(Ve,Ee,st,Ie)),ct!==void 0&&Qt.push(J(Ue,et,Re,ct)),G(Tt,Qt)},length:function(Ve,Ue,Ee,et,st,Re){return me(Ve,Ue,Ee,et,st,Re,3)},nearestPoint:function(Ve,Ue,Ee,et,st,Re,Ie,ct){return ce([Ve,Ee,st],[Ue,et,Re],Ie,ct,J)},pointDistance:function(Ve,Ue,Ee,et,st,Re,Ie,ct){var Tt=this.nearestPoint(Ve,Ue,Ee,et,st,Re,Ie,ct);return w(Tt.x,Tt.y,Ie,ct)},interpolationAt:J,pointAt:function(Ve,Ue,Ee,et,st,Re,Ie){return{x:J(Ve,Ee,st,Ie),y:J(Ue,et,Re,Ie)}},divide:function(Ve,Ue,Ee,et,st,Re,Ie){return fe(Ve,Ue,Ee,et,st,Re,Ie)},tangentAngle:function(Ve,Ue,Ee,et,st,Re,Ie){var ct=E(Ve,Ee,st,Ie),Tt=E(Ue,et,Re,Ie),Qt=Math.atan2(Tt,ct);return Q(Qt)}};function Pe(Ve,Ue,Ee,et,st){var Re=1-st;return Re*Re*Re*Ve+3*Ue*st*Re*Re+3*Ee*st*st*Re+et*st*st*st}function Le(Ve,Ue,Ee,et,st){var Re=1-st;return 3*(Re*Re*(Ue-Ve)+2*Re*st*(Ee-Ue)+st*st*(et-Ee))}function tt(Ve,Ue,Ee,et){var st=-3*Ve+9*Ue-9*Ee+3*et,Re=6*Ve-12*Ue+6*Ee,Ie=3*Ue-3*Ve,ct=[],Tt,Qt,wt;if(Y(st,0))Y(Re,0)||(Tt=-Ie/Re,Tt>=0&&Tt<=1&&ct.push(Tt));else{var se=Re*Re-4*st*Ie;Y(se,0)?ct.push(-Re/(2*st)):se>0&&(wt=Math.sqrt(se),Tt=(-Re+wt)/(2*st),Qt=(-Re-wt)/(2*st),Tt>=0&&Tt<=1&&ct.push(Tt),Qt>=0&&Qt<=1&&ct.push(Qt))}return ct}function ft(Ve,Ue,Ee,et,st,Re,Ie,ct,Tt){var Qt=Pe(Ve,Ee,st,Ie,Tt),wt=Pe(Ue,et,Re,ct,Tt),se=ee.pointAt(Ve,Ue,Ee,et,Tt),Ge=ee.pointAt(Ee,et,st,Re,Tt),Ke=ee.pointAt(st,Re,Ie,ct,Tt),bt=ee.pointAt(se.x,se.y,Ge.x,Ge.y,Tt),Be=ee.pointAt(Ge.x,Ge.y,Ke.x,Ke.y,Tt);return[[Ve,Ue,se.x,se.y,bt.x,bt.y,Qt,wt],[Qt,wt,Be.x,Be.y,Ke.x,Ke.y,Ie,ct]]}function ge(Ve,Ue,Ee,et,st,Re,Ie,ct,Tt){if(Tt===0)return he([Ve,Ee,st,Ie],[Ue,et,Re,ct]);var Qt=ft(Ve,Ue,Ee,et,st,Re,Ie,ct,.5),wt=Qt[0],se=Qt[1];return wt.push(Tt-1),se.push(Tt-1),ge.apply(null,wt)+ge.apply(null,se)}var be={extrema:tt,box:function(Ve,Ue,Ee,et,st,Re,Ie,ct){for(var Tt=[Ve,Ie],Qt=[Ue,ct],wt=tt(Ve,Ee,st,Ie),se=tt(Ue,et,Re,ct),Ge=0;Ge<wt.length;Ge++)Tt.push(Pe(Ve,Ee,st,Ie,wt[Ge]));for(var Ge=0;Ge<se.length;Ge++)Qt.push(Pe(Ue,et,Re,ct,se[Ge]));return G(Tt,Qt)},length:function(Ve,Ue,Ee,et,st,Re,Ie,ct){return ge(Ve,Ue,Ee,et,st,Re,Ie,ct,3)},nearestPoint:function(Ve,Ue,Ee,et,st,Re,Ie,ct,Tt,Qt,wt){return ce([Ve,Ee,st,Ie],[Ue,et,Re,ct],Tt,Qt,Pe,wt)},pointDistance:function(Ve,Ue,Ee,et,st,Re,Ie,ct,Tt,Qt,wt){var se=this.nearestPoint(Ve,Ue,Ee,et,st,Re,Ie,ct,Tt,Qt,wt);return w(se.x,se.y,Tt,Qt)},interpolationAt:Pe,pointAt:function(Ve,Ue,Ee,et,st,Re,Ie,ct,Tt){return{x:Pe(Ve,Ee,st,Ie,Tt),y:Pe(Ue,et,Re,ct,Tt)}},divide:function(Ve,Ue,Ee,et,st,Re,Ie,ct,Tt){return ft(Ve,Ue,Ee,et,st,Re,Ie,ct,Tt)},tangentAngle:function(Ve,Ue,Ee,et,st,Re,Ie,ct,Tt){var Qt=Le(Ve,Ee,st,Ie,Tt),wt=Le(Ue,et,Re,ct,Tt);return Q(Math.atan2(wt,Qt))}};function Ce(Ve,Ue){var Ee=Math.abs(Ve);return Ue>0?Ee:Ee*-1}var Ye={box:function(Ve,Ue,Ee,et){return{x:Ve-Ee,y:Ue-et,width:Ee*2,height:et*2}},length:function(Ve,Ue,Ee,et){return Math.PI*(3*(Ee+et)-Math.sqrt((3*Ee+et)*(Ee+3*et)))},nearestPoint:function(Ve,Ue,Ee,et,st,Re){var Ie=Ee,ct=et;if(Ie===0||ct===0)return{x:Ve,y:Ue};for(var Tt=st-Ve,Qt=Re-Ue,wt=Math.abs(Tt),se=Math.abs(Qt),Ge=Ie*Ie,Ke=ct*ct,bt=Math.PI/4,Be,pt,It=0;It<4;It++){Be=Ie*Math.cos(bt),pt=ct*Math.sin(bt);var ot=(Ge-Ke)*Math.pow(Math.cos(bt),3)/Ie,zt=(Ke-Ge)*Math.pow(Math.sin(bt),3)/ct,Jt=Be-ot,tr=pt-zt,pr=wt-ot,br=se-zt,Zr=Math.hypot(tr,Jt),Nr=Math.hypot(br,pr),tn=Zr*Math.asin((Jt*br-tr*pr)/(Zr*Nr)),Dn=tn/Math.sqrt(Ge+Ke-Be*Be-pt*pt);bt+=Dn,bt=Math.min(Math.PI/2,Math.max(0,bt))}return{x:Ve+Ce(Be,Tt),y:Ue+Ce(pt,Qt)}},pointDistance:function(Ve,Ue,Ee,et,st,Re){var Ie=this.nearestPoint(Ve,Ue,Ee,et,st,Re);return w(Ie.x,Ie.y,st,Re)},pointAt:function(Ve,Ue,Ee,et,st){var Re=2*Math.PI*st;return{x:Ve+Ee*Math.cos(Re),y:Ue+et*Math.sin(Re)}},tangentAngle:function(Ve,Ue,Ee,et,st){var Re=2*Math.PI*st,Ie=Math.atan2(et*Math.cos(Re),-Ee*Math.sin(Re));return Q(Ie)}};function je(Ve,Ue,Ee,et,st,Re,Ie,ct){return-1*Ee*Math.cos(st)*Math.sin(ct)-et*Math.sin(st)*Math.cos(ct)}function Et(Ve,Ue,Ee,et,st,Re,Ie,ct){return-1*Ee*Math.sin(st)*Math.sin(ct)+et*Math.cos(st)*Math.cos(ct)}function Ae(Ve,Ue,Ee){return Math.atan(-Ue/Ve*Math.tan(Ee))}function Qe(Ve,Ue,Ee){return Math.atan(Ue/(Ve*Math.tan(Ee)))}function te(Ve,Ue,Ee,et,st,Re){return Ee*Math.cos(st)*Math.cos(Re)-et*Math.sin(st)*Math.sin(Re)+Ve}function Ze(Ve,Ue,Ee,et,st,Re){return Ee*Math.sin(st)*Math.cos(Re)+et*Math.cos(st)*Math.sin(Re)+Ue}function ie(Ve,Ue,Ee,et){var st=Math.atan2(et*Ve,Ee*Ue);return(st+Math.PI*2)%(Math.PI*2)}function Oe(Ve,Ue,Ee){return{x:Ve*Math.cos(Ee),y:Ue*Math.sin(Ee)}}function nt(Ve,Ue,Ee){var et=Math.cos(Ee),st=Math.sin(Ee);return[Ve*et-Ue*st,Ve*st+Ue*et]}var ye={box:function(Ve,Ue,Ee,et,st,Re,Ie){for(var ct=Ae(Ee,et,st),Tt=1/0,Qt=-1/0,wt=[Re,Ie],se=-Math.PI*2;se<=Math.PI*2;se+=Math.PI){var Ge=ct+se;Re<Ie?Re<Ge&&Ge<Ie&&wt.push(Ge):Ie<Ge&&Ge<Re&&wt.push(Ge)}for(var se=0;se<wt.length;se++){var Ke=te(Ve,Ue,Ee,et,st,wt[se]);Ke<Tt&&(Tt=Ke),Ke>Qt&&(Qt=Ke)}for(var bt=Qe(Ee,et,st),Be=1/0,pt=-1/0,It=[Re,Ie],se=-Math.PI*2;se<=Math.PI*2;se+=Math.PI){var ot=bt+se;Re<Ie?Re<ot&&ot<Ie&&It.push(ot):Ie<ot&&ot<Re&&It.push(ot)}for(var se=0;se<It.length;se++){var zt=Ze(Ve,Ue,Ee,et,st,It[se]);zt<Be&&(Be=zt),zt>pt&&(pt=zt)}return{x:Tt,y:Be,width:Qt-Tt,height:pt-Be}},length:function(Ve,Ue,Ee,et,st,Re,Ie){},nearestPoint:function(Ve,Ue,Ee,et,st,Re,Ie,ct,Tt){var Qt=nt(ct-Ve,Tt-Ue,-st),wt=Qt[0],se=Qt[1],Ge=Ye.nearestPoint(0,0,Ee,et,wt,se),Ke=ie(Ee,et,Ge.x,Ge.y);Ke<Re?Ge=Oe(Ee,et,Re):Ke>Ie&&(Ge=Oe(Ee,et,Ie));var bt=nt(Ge.x,Ge.y,st);return{x:bt[0]+Ve,y:bt[1]+Ue}},pointDistance:function(Ve,Ue,Ee,et,st,Re,Ie,ct,Tt){var Qt=this.nearestPoint(Ve,Ue,Ee,et,ct,Tt);return w(Qt.x,Qt.y,ct,Tt)},pointAt:function(Ve,Ue,Ee,et,st,Re,Ie,ct){var Tt=(Ie-Re)*ct+Re;return{x:te(Ve,Ue,Ee,et,st,Tt),y:Ze(Ve,Ue,Ee,et,st,Tt)}},tangentAngle:function(Ve,Ue,Ee,et,st,Re,Ie,ct){var Tt=(Ie-Re)*ct+Re,Qt=je(Ve,Ue,Ee,et,st,Re,Ie,Tt),wt=Et(Ve,Ue,Ee,et,st,Re,Ie,Tt);return Q(Math.atan2(wt,Qt))}};function Te(Ve){for(var Ue=0,Ee=[],et=0;et<Ve.length-1;et++){var st=Ve[et],Re=Ve[et+1],Ie=w(st[0],st[1],Re[0],Re[1]),ct={from:st,to:Re,length:Ie};Ee.push(ct),Ue+=Ie}return{segments:Ee,totalLength:Ue}}function Je(Ve){if(Ve.length<2)return 0;for(var Ue=0,Ee=0;Ee<Ve.length-1;Ee++){var et=Ve[Ee],st=Ve[Ee+1];Ue+=w(et[0],et[1],st[0],st[1])}return Ue}function pe(Ve,Ue){if(Ue>1||Ue<0||Ve.length<2)return null;var Ee=Te(Ve),et=Ee.segments,st=Ee.totalLength;if(st===0)return{x:Ve[0][0],y:Ve[0][1]};for(var Re=0,Ie=null,ct=0;ct<et.length;ct++){var Tt=et[ct],Qt=Tt.from,wt=Tt.to,se=Tt.length/st;if(Ue>=Re&&Ue<=Re+se){var Ge=(Ue-Re)/se;Ie=ee.pointAt(Qt[0],Qt[1],wt[0],wt[1],Ge);break}Re+=se}return Ie}function Me(Ve,Ue){if(Ue>1||Ue<0||Ve.length<2)return 0;for(var Ee=Te(Ve),et=Ee.segments,st=Ee.totalLength,Re=0,Ie=0,ct=0;ct<et.length;ct++){var Tt=et[ct],Qt=Tt.from,wt=Tt.to,se=Tt.length/st;if(Ue>=Re&&Ue<=Re+se){Ie=Math.atan2(wt[1]-Qt[1],wt[0]-Qt[0]);break}Re+=se}return Ie}function ze(Ve,Ue,Ee){for(var et=1/0,st=0;st<Ve.length-1;st++){var Re=Ve[st],Ie=Ve[st+1],ct=ee.pointDistance(Re[0],Re[1],Ie[0],Ie[1],Ue,Ee);ct<et&&(et=ct)}return et}var De={box:function(Ve){for(var Ue=[],Ee=[],et=0;et<Ve.length;et++){var st=Ve[et];Ue.push(st[0]),Ee.push(st[1])}return G(Ue,Ee)},length:function(Ve){return Je(Ve)},pointAt:function(Ve,Ue){return pe(Ve,Ue)},pointDistance:function(Ve,Ue,Ee){return ze(Ve,Ue,Ee)},tangentAngle:function(Ve,Ue){return Me(Ve,Ue)}};function Ct(Ve){var Ue=Ve.slice(0);return Ve.length&&Ue.push(Ve[0]),Ue}var Vt={box:function(Ve){return De.box(Ve)},length:function(Ve){return Je(Ct(Ve))},pointAt:function(Ve,Ue){return pe(Ct(Ve),Ue)},pointDistance:function(Ve,Ue,Ee){return ze(Ct(Ve),Ue,Ee)},tangentAngle:function(Ve,Ue){return Me(Ct(Ve),Ue)}}},19372:function(xt,N,F){"use strict";F.d(N,{$Q:function(){return ZC},sg:function(){return VC},x1:function(){return cA},by:function(){return bA}});var $={};F.r($),F.d($,{assign:function(){return qo},default:function(){return Es},defaultI18n:function(){return ii},format:function(){return ic},parse:function(){return no},setGlobalDateI18n:function(){return lo},setGlobalDateMasks:function(){return Sl}});var X={};F.r(X),F.d(X,{Arc:function(){return Ud},DataMarker:function(){return ud},DataRegion:function(){return Vl},Html:function(){return qe},Image:function(){return Yc},Line:function(){return $c},Region:function(){return vr},RegionFilter:function(){return Cl},Shape:function(){return Cp},Text:function(){return Bf}});var w={};F.r(w),F.d(w,{ellipsisHead:function(){return or},ellipsisMiddle:function(){return rr},ellipsisTail:function(){return Er},getDefault:function(){return sr}});var Y={};F.r(Y),F.d(Y,{equidistance:function(){return Ii},equidistanceWithReverseBoth:function(){return ia},getDefault:function(){return bn},reserveBoth:function(){return ei},reserveFirst:function(){return In},reserveLast:function(){return pi}});var G={};F.r(G),F.d(G,{fixedAngle:function(){return Ni},getDefault:function(){return bo},unfixedAngle:function(){return Oa}});var K={};F.r(K),F.d(K,{autoEllipsis:function(){return w},autoHide:function(){return Y},autoRotate:function(){return G}});var Q={};F.r(Q),F.d(Q,{Base:function(){return pa},Circle:function(){return wu},Html:function(){return hc},Line:function(){return ks}});var oe={};F.r(oe),F.d(oe,{CONTAINER_CLASS:function(){return Tl},CROSSHAIR_X:function(){return Ev},CROSSHAIR_Y:function(){return cg},LIST_CLASS:function(){return jl},LIST_ITEM_CLASS:function(){return zf},MARKER_CLASS:function(){return Ap},NAME_CLASS:function(){return Ml},TITLE_CLASS:function(){return Hl},VALUE_CLASS:function(){return Uf}});var ee={};F.r(ee),F.d(ee,{Base:function(){return tf},Circle:function(){return j0},Ellipse:function(){return W0},Image:function(){return X0},Line:function(){return C_},Marker:function(){return $0},Path:function(){return Fx},Polygon:function(){return sR},Polyline:function(){return lR},Rect:function(){return iE},Text:function(){return aE}});var xe={};F.r(xe),F.d(xe,{Canvas:function(){return P_},Group:function(){return gt},Shape:function(){return ee},getArcParams:function(){return Vp},version:function(){return O_}});var ce={};F.r(ce),F.d(ce,{Base:function(){return Jh},Circle:function(){return lE},Dom:function(){return dR},Ellipse:function(){return kg},Image:function(){return F_},Line:function(){return ny},Marker:function(){return Vx},Path:function(){return L_},Polygon:function(){return Hx},Polyline:function(){return gR},Rect:function(){return mR},Text:function(){return gE}});var he={};F.r(he),F.d(he,{Canvas:function(){return LE},Group:function(){return Og},Shape:function(){return ce},version:function(){return BE}});var J={};F.r(J),F.d(J,{cluster:function(){return kD},hierarchy:function(){return Kg},pack:function(){return cT},packEnclose:function(){return A2},packSiblings:function(){return lT},partition:function(){return aM},stratify:function(){return DD},tree:function(){return UD},treemap:function(){return dM},treemapBinary:function(){return ZD},treemapDice:function(){return Gy},treemapResquarify:function(){return HD},treemapSlice:function(){return U1},treemapSliceDice:function(){return VD},treemapSquarify:function(){return pM}});var M=F(97582),E=F(21030),fe;(function(i){i.FORE="fore",i.MID="mid",i.BG="bg"})(fe||(fe={}));var me;(function(i){i.TOP="top",i.TOP_LEFT="top-left",i.TOP_RIGHT="top-right",i.RIGHT="right",i.RIGHT_TOP="right-top",i.RIGHT_BOTTOM="right-bottom",i.LEFT="left",i.LEFT_TOP="left-top",i.LEFT_BOTTOM="left-bottom",i.BOTTOM="bottom",i.BOTTOM_LEFT="bottom-left",i.BOTTOM_RIGHT="bottom-right",i.RADIUS="radius",i.CIRCLE="circle",i.NONE="none"})(me||(me={}));var ke;(function(i){i.AXIS="axis",i.GRID="grid",i.LEGEND="legend",i.TOOLTIP="tooltip",i.ANNOTATION="annotation",i.SLIDER="slider",i.SCROLLBAR="scrollbar",i.OTHER="other"})(ke||(ke={}));var Pe={FORE:3,MID:2,BG:1},Le;(function(i){i.BEFORE_RENDER="beforerender",i.AFTER_RENDER="afterrender",i.BEFORE_PAINT="beforepaint",i.AFTER_PAINT="afterpaint",i.BEFORE_CHANGE_DATA="beforechangedata",i.AFTER_CHANGE_DATA="afterchangedata",i.BEFORE_CLEAR="beforeclear",i.AFTER_CLEAR="afterclear",i.BEFORE_DESTROY="beforedestroy",i.BEFORE_CHANGE_SIZE="beforechangesize",i.AFTER_CHANGE_SIZE="afterchangesize"})(Le||(Le={}));var tt;(function(i){i.BEFORE_DRAW_ANIMATE="beforeanimate",i.AFTER_DRAW_ANIMATE="afteranimate",i.BEFORE_RENDER_LABEL="beforerenderlabel",i.AFTER_RENDER_LABEL="afterrenderlabel"})(tt||(tt={}));var ft;(function(i){i.MOUSE_ENTER="plot:mouseenter",i.MOUSE_DOWN="plot:mousedown",i.MOUSE_MOVE="plot:mousemove",i.MOUSE_UP="plot:mouseup",i.MOUSE_LEAVE="plot:mouseleave",i.TOUCH_START="plot:touchstart",i.TOUCH_MOVE="plot:touchmove",i.TOUCH_END="plot:touchend",i.TOUCH_CANCEL="plot:touchcancel",i.CLICK="plot:click",i.DBLCLICK="plot:dblclick",i.CONTEXTMENU="plot:contextmenu",i.LEAVE="plot:leave",i.ENTER="plot:enter"})(ft||(ft={}));var ge;(function(i){i.ACTIVE="active",i.INACTIVE="inactive",i.SELECTED="selected",i.DEFAULT="default"})(ge||(ge={}));var be=["color","shape","size"],Ce="_origin",Ye=1,je=1,Et=.25,Ae={};function Qe(i){var n=Ae[i];if(!n)throw new Error("G engine '".concat(i,"' is not exist, please register it at first."));return n}function te(i,n){Ae[i]=n}var Ze=F(6056),ie=F(45442);function Oe(i){var n=getComputedStyle(i);return{width:(i.clientWidth||parseInt(n.width,10))-parseInt(n.paddingLeft,10)-parseInt(n.paddingRight,10),height:(i.clientHeight||parseInt(n.height,10))-parseInt(n.paddingTop,10)-parseInt(n.paddingBottom,10)}}function nt(i){return typeof i=="number"&&!isNaN(i)}function ye(i,n,t,s){var l=t,f=s;if(n){var d=Oe(i);l=d.width?d.width:l,f=d.height?d.height:f}return{width:Math.max(nt(l)?l:Ye,Ye),height:Math.max(nt(f)?f:je,je)}}function Te(i){var n=i.parentNode;n&&n.removeChild(i)}var Je=F(90494),pe=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this)||this;s.destroyed=!1;var l=t.visible,f=l===void 0?!0:l;return s.visible=f,s}return n.prototype.show=function(){var t=this.visible;t||this.changeVisible(!0)},n.prototype.hide=function(){var t=this.visible;t&&this.changeVisible(!1)},n.prototype.destroy=function(){this.off(),this.destroyed=!0},n.prototype.changeVisible=function(t){this.visible!==t&&(this.visible=t)},n}(Je.Z),Me=pe,ze=F(98190),De=0,Ct=1/2,Vt=1/2,Ve=.05,Ue=function(){function i(n){var t=n.xField,s=n.yField,l=n.adjustNames,f=l===void 0?["x","y"]:l,d=n.dimValuesMap;this.adjustNames=f,this.xField=t,this.yField=s,this.dimValuesMap=d}return i.prototype.isAdjust=function(n){return this.adjustNames.indexOf(n)>=0},i.prototype.getAdjustRange=function(n,t,s){var l=this.yField,f=s.indexOf(t),d=s.length,m,x;return!l&&this.isAdjust("y")?(m=0,x=1):d>1?(m=s[f===0?0:f-1],x=s[f===d-1?d-1:f+1],f!==0?m+=(t-m)/2:m-=(x-t)/2,f!==d-1?x-=(x-t)/2:x+=(t-s[d-2])/2):(m=t===0?0:t-.5,x=t===0?1:t+.5),{pre:m,next:x}},i.prototype.adjustData=function(n,t){var s=this,l=this.getDimValues(t);E.S6(n,function(f,d){E.S6(l,function(m,x){s.adjustDim(x,m,f,d)})})},i.prototype.groupData=function(n,t){return E.S6(n,function(s){s[t]===void 0&&(s[t]=De)}),E.vM(n,t)},i.prototype.adjustDim=function(n,t,s,l){},i.prototype.getDimValues=function(n){var t=this,s=t.xField,l=t.yField,f=E.f0({},this.dimValuesMap),d=[];if(s&&this.isAdjust("x")&&d.push(s),l&&this.isAdjust("y")&&d.push(l),d.forEach(function(x){f&&f[x]||(f[x]=E.I(n,x).sort(function(A,P){return A-P}))}),!l&&this.isAdjust("y")){var m="y";f[m]=[De,1]}return f},i}(),Ee=Ue,et={},st=function(i){return et[i.toLowerCase()]},Re=function(i,n){if(st(i))throw new Error("Adjust type '"+i+"' existed.");et[i.toLowerCase()]=n},Ie=F(52677),ct=F.n(Ie);var Tt=function(n,t){return Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)l.hasOwnProperty(f)&&(s[f]=l[f])},Tt(n,t)};function Qt(i,n){Tt(i,n);function t(){this.constructor=i}i.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var wt=function(){return wt=Object.assign||function(t){for(var s,l=1,f=arguments.length;l<f;l++){s=arguments[l];for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(t[d]=s[d])}return t},wt.apply(this,arguments)};function se(i,n){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&n.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(i);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(i,s[l])&&(t[s[l]]=i[s[l]]);return t}function Ge(i,n,t,s){var l=arguments.length,f=l<3?n:s===null?s=Object.getOwnPropertyDescriptor(n,t):s,d;if((typeof Reflect=="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(i,n,t,s);else for(var m=i.length-1;m>=0;m--)(d=i[m])&&(f=(l<3?d(f):l>3?d(n,t,f):d(n,t))||f);return l>3&&f&&Object.defineProperty(n,t,f),f}function Ke(i,n){return function(t,s){n(t,s,i)}}function bt(i,n){if((typeof Reflect=="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,n)}function Be(i,n,t,s){function l(f){return f instanceof t?f:new t(function(d){d(f)})}return new(t||(t=Promise))(function(f,d){function m(P){try{A(s.next(P))}catch(k){d(k)}}function x(P){try{A(s.throw(P))}catch(k){d(k)}}function A(P){P.done?f(P.value):l(P.value).then(m,x)}A((s=s.apply(i,n||[])).next())})}function pt(i,n){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},s,l,f,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(A){return function(P){return x([A,P])}}function x(A){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,l&&(f=A[0]&2?l.return:A[0]?l.throw||((f=l.return)&&f.call(l),0):l.next)&&!(f=f.call(l,A[1])).done)return f;switch(l=0,f&&(A=[A[0]&2,f.value]),A[0]){case 0:case 1:f=A;break;case 4:return t.label++,{value:A[1],done:!1};case 5:t.label++,l=A[1],A=[0];continue;case 7:A=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(A[0]===6||A[0]===2)){t=0;continue}if(A[0]===3&&(!f||A[1]>f[0]&&A[1]<f[3])){t.label=A[1];break}if(A[0]===6&&t.label<f[1]){t.label=f[1],f=A;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(A);break}f[2]&&t.ops.pop(),t.trys.pop();continue}A=n.call(i,t)}catch(P){A=[6,P],l=0}finally{s=f=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}function It(i,n,t,s){s===void 0&&(s=t),i[s]=n[t]}function ot(i,n){for(var t in i)t!=="default"&&!n.hasOwnProperty(t)&&(n[t]=i[t])}function zt(i){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&i[n],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jt(i,n){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),l,f=[],d;try{for(;(n===void 0||n-- >0)&&!(l=s.next()).done;)f.push(l.value)}catch(m){d={error:m}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(d)throw d.error}}return f}function tr(){for(var i=[],n=0;n<arguments.length;n++)i=i.concat(Jt(arguments[n]));return i}function pr(){for(var i=0,n=0,t=arguments.length;n<t;n++)i+=arguments[n].length;for(var s=Array(i),l=0,n=0;n<t;n++)for(var f=arguments[n],d=0,m=f.length;d<m;d++,l++)s[l]=f[d];return s}function br(i){return this instanceof br?(this.v=i,this):new br(i)}function Zr(i,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,n||[]),l,f=[];return l={},d("next"),d("throw"),d("return"),l[Symbol.asyncIterator]=function(){return this},l;function d(B){s[B]&&(l[B]=function(U){return new Promise(function(W,ne){f.push([B,U,W,ne])>1||m(B,U)})})}function m(B,U){try{x(s[B](U))}catch(W){k(f[0][3],W)}}function x(B){B.value instanceof br?Promise.resolve(B.value.v).then(A,P):k(f[0][2],B)}function A(B){m("next",B)}function P(B){m("throw",B)}function k(B,U){B(U),f.shift(),f.length&&m(f[0][0],f[0][1])}}function Nr(i){var n,t;return n={},s("next"),s("throw",function(l){throw l}),s("return"),n[Symbol.iterator]=function(){return this},n;function s(l,f){n[l]=i[l]?function(d){return(t=!t)?{value:br(i[l](d)),done:l==="return"}:f?f(d):d}:f}}function tn(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=i[Symbol.asyncIterator],t;return n?n.call(i):(i=typeof zt=="function"?zt(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(f){t[f]=i[f]&&function(d){return new Promise(function(m,x){d=i[f](d),l(m,x,d.done,d.value)})}}function l(f,d,m,x){Promise.resolve(x).then(function(A){f({value:A,done:m})},d)}}function Dn(i,n){return Object.defineProperty?Object.defineProperty(i,"raw",{value:n}):i.raw=n,i}function gn(i){if(i&&i.__esModule)return i;var n={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(n[t]=i[t]);return n.default=i,n}function Vn(i){return i&&i.__esModule?i:{default:i}}function Un(i,n){if(!n.has(i))throw new TypeError("attempted to get private field on non-instance");return n.get(i)}function mi(i,n,t){if(!n.has(i))throw new TypeError("attempted to set private field on non-instance");return n.set(i,t),t}var qn=function(i){Qt(n,i);function n(t){var s=i.call(this,t)||this;s.cacheMap={},s.adjustDataArray=[],s.mergeData=[];var l=t.marginRatio,f=l===void 0?Ct:l,d=t.dodgeRatio,m=d===void 0?Vt:d,x=t.dodgeBy,A=t.intervalPadding,P=t.dodgePadding,k=t.xDimensionLength,B=t.groupNum,U=t.defaultSize,W=t.maxColumnWidth,ne=t.minColumnWidth,de=t.columnWidthRatio,ve=t.customOffset;return s.marginRatio=f,s.dodgeRatio=m,s.dodgeBy=x,s.intervalPadding=A,s.dodgePadding=P,s.xDimensionLegenth=k,s.groupNum=B,s.defaultSize=U,s.maxColumnWidth=W,s.minColumnWidth=ne,s.columnWidthRatio=de,s.customOffset=ve,s}return n.prototype.process=function(t){var s=E.d9(t),l=E.xH(s),f=this.dodgeBy,d=f?E.ru(l,f):s;return this.cacheMap={},this.adjustDataArray=d,this.mergeData=l,this.adjustData(d,l),this.adjustDataArray=[],this.mergeData=[],s},n.prototype.adjustDim=function(t,s,l,f){var d=this,m=this.customOffset,x=this.getDistribution(t),A=this.groupData(l,t);return E.S6(A,function(P,k){var B;s.length===1?B={pre:s[0]-1,next:s[0]+1}:B=d.getAdjustRange(t,parseFloat(k),s),E.S6(P,function(U){var W=U[t],ne=x[W],de=ne.indexOf(f);if(E.UM(m))U[t]=d.getDodgeOffset(B,de,ne.length);else{var ve=B.pre,$e=B.next;U[t]=E.mf(m)?m(U,B):(ve+$e)/2+m}})}),[]},n.prototype.getDodgeOffset=function(t,s,l){var f=this,d=f.dodgeRatio,m=f.marginRatio,x=f.intervalPadding,A=f.dodgePadding,P=t.pre,k=t.next,B=k-P,U;if(!E.UM(x)&&E.UM(A)&&x>=0){var W=this.getIntervalOnlyOffset(l,s);U=P+W}else if(!E.UM(A)&&E.UM(x)&&A>=0){var W=this.getDodgeOnlyOffset(l,s);U=P+W}else if(!E.UM(x)&&!E.UM(A)&&x>=0&&A>=0){var W=this.getIntervalAndDodgeOffset(l,s);U=P+W}else{var ne=B*d/l,de=m*ne,W=1/2*(B-l*ne-(l-1)*de)+((s+1)*ne+s*de)-1/2*ne-1/2*B;U=(P+k)/2+W}return U},n.prototype.getIntervalOnlyOffset=function(t,s){var l=this,f=l.defaultSize,d=l.intervalPadding,m=l.xDimensionLegenth,x=l.groupNum,A=l.dodgeRatio,P=l.maxColumnWidth,k=l.minColumnWidth,B=l.columnWidthRatio,U=d/m,W=(1-(x-1)*U)/x*A/(t-1),ne=((1-U*(x-1))/x-W*(t-1))/t;if(ne=E.UM(B)?ne:1/x/t*B,!E.UM(P)){var de=P/m;ne=Math.min(ne,de)}if(!E.UM(k)){var ve=k/m;ne=Math.max(ne,ve)}ne=f?f/m:ne,W=((1-(x-1)*U)/x-t*ne)/(t-1);var $e=((1/2+s)*ne+s*W+1/2*U)*x-U/2;return $e},n.prototype.getDodgeOnlyOffset=function(t,s){var l=this,f=l.defaultSize,d=l.dodgePadding,m=l.xDimensionLegenth,x=l.groupNum,A=l.marginRatio,P=l.maxColumnWidth,k=l.minColumnWidth,B=l.columnWidthRatio,U=d/m,W=1*A/(x-1),ne=((1-W*(x-1))/x-U*(t-1))/t;if(ne=B?1/x/t*B:ne,!E.UM(P)){var de=P/m;ne=Math.min(ne,de)}if(!E.UM(k)){var ve=k/m;ne=Math.max(ne,ve)}ne=f?f/m:ne,W=(1-(ne*t+U*(t-1))*x)/(x-1);var $e=((1/2+s)*ne+s*U+1/2*W)*x-W/2;return $e},n.prototype.getIntervalAndDodgeOffset=function(t,s){var l=this,f=l.intervalPadding,d=l.dodgePadding,m=l.xDimensionLegenth,x=l.groupNum,A=f/m,P=d/m,k=((1-A*(x-1))/x-P*(t-1))/t,B=((1/2+s)*k+s*P+1/2*A)*x-A/2;return B},n.prototype.getDistribution=function(t){var s=this.adjustDataArray,l=this.cacheMap,f=l[t];return f||(f={},E.S6(s,function(d,m){var x=E.I(d,t);x.length||x.push(0),E.S6(x,function(A){f[A]||(f[A]=[]),f[A].push(m)})}),l[t]=f),f},n}(Ee),Xn=qn;function We(i,n){return(n-i)*Math.random()+i}var it=function(i){Qt(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.process=function(t){var s=E.d9(t),l=E.xH(s);return this.adjustData(s,l),s},n.prototype.adjustDim=function(t,s,l){var f=this,d=this.groupData(l,t);return E.S6(d,function(m,x){return f.adjustGroup(m,t,parseFloat(x),s)})},n.prototype.getAdjustOffset=function(t){var s=t.pre,l=t.next,f=(l-s)*Ve;return We(s+f,l-f)},n.prototype.adjustGroup=function(t,s,l,f){var d=this,m=this.getAdjustRange(s,l,f);return E.S6(t,function(x){x[s]=d.getAdjustOffset(m)}),t},n}(Ee),_t=it,Pt=E.Ct,jt=function(i){Qt(n,i);function n(t){var s=i.call(this,t)||this,l=t.adjustNames,f=l===void 0?["y"]:l,d=t.height,m=d===void 0?NaN:d,x=t.size,A=x===void 0?10:x,P=t.reverseOrder,k=P===void 0?!1:P;return s.adjustNames=f,s.height=m,s.size=A,s.reverseOrder=k,s}return n.prototype.process=function(t){var s=this,l=s.yField,f=s.reverseOrder,d=l?this.processStack(t):this.processOneDimStack(t);return f?this.reverse(d):d},n.prototype.reverse=function(t){return t.slice(0).reverse()},n.prototype.processStack=function(t){var s=this,l=s.xField,f=s.yField,d=s.reverseOrder,m=d?this.reverse(t):t,x=new Pt,A=new Pt;return m.map(function(P){return P.map(function(k){var B,U=E.U2(k,l,0),W=E.U2(k,[f]),ne=U.toString();if(W=E.kJ(W)?W[1]:W,!E.UM(W)){var de=W>=0?x:A;de.has(ne)||de.set(ne,0);var ve=de.get(ne),$e=W+ve;return de.set(ne,$e),wt(wt({},k),(B={},B[f]=[ve,$e],B))}return k})})},n.prototype.processOneDimStack=function(t){var s=this,l=this,f=l.xField,d=l.height,m=l.reverseOrder,x="y",A=m?this.reverse(t):t,P=new Pt;return A.map(function(k){return k.map(function(B){var U,W=s.size,ne=B[f],de=W*2/d;P.has(ne)||P.set(ne,de/2);var ve=P.get(ne);return P.set(ne,ve+de),wt(wt({},B),(U={},U[x]=ve,U))})})},n}(Ee),gr=jt,Cr=function(i){Qt(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.process=function(t){var s=E.xH(t),l=this,f=l.xField,d=l.yField,m=this.getXValuesMaxMap(s),x=Math.max.apply(Math,Object.keys(m).map(function(A){return m[A]}));return E.UI(t,function(A){return E.UI(A,function(P){var k,B,U=P[d],W=P[f];if(E.kJ(U)){var ne=(x-m[W])/2;return wt(wt({},P),(k={},k[d]=E.UI(U,function(ve){return ne+ve}),k))}var de=(x-U)/2;return wt(wt({},P),(B={},B[d]=[de,U+de],B))})})},n.prototype.getXValuesMaxMap=function(t){var s=this,l=this,f=l.xField,d=l.yField,m=E.vM(t,function(x){return x[f]});return E.Q8(m,function(x){return s.getDimMaxValue(x,d)})},n.prototype.getDimMaxValue=function(t,s){var l=E.UI(t,function(d){return E.U2(d,s,[])}),f=E.xH(l);return Math.max.apply(Math,f)},n}(Ee),kt=Cr;Re("Dodge",Xn),Re("Jitter",_t),Re("Stack",gr),Re("Symmetric",kt);var at=function(i,n){return(0,E.HD)(n)?n:i.invert(i.scale(n))},Rt=function(){function i(n){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(n)}return i.prototype.mapping=function(){for(var n=this,t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var l=t.map(function(f,d){return n._toOriginParam(f,n.scales[d])});return this.callback.apply(this,l)},i.prototype.getLinearValue=function(n){var t=this.values.length-1,s=Math.floor(t*n),l=t*n-s,f=this.values[s],d=s===t?f:this.values[s+1];return f+(d-f)*l},i.prototype.getNames=function(){for(var n=this.scales,t=this.names,s=Math.min(n.length,t.length),l=[],f=0;f<s;f+=1)l.push(t[f]);return l},i.prototype.getFields=function(){return this.scales.map(function(n){return n.field})},i.prototype.getScale=function(n){return this.scales[this.names.indexOf(n)]},i.prototype.defaultCallback=function(){for(var n=this,t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return t.length===0?this.values:t.map(function(l,f){var d=n.scales[f];return d.type==="identity"?d.values[0]:n._getAttributeValue(d,l)})},i.prototype._parseCfg=function(n){var t=this,s=n.type,l=s===void 0?"base":s,f=n.names,d=f===void 0?[]:f,m=n.scales,x=m===void 0?[]:m,A=n.values,P=A===void 0?[]:A,k=n.callback;this.type=l,this.scales=x,this.values=P,this.names=d,this.callback=function(){for(var B=[],U=0;U<arguments.length;U++)B[U]=arguments[U];if(k){var W=k.apply(void 0,B);if(!(0,E.UM)(W))return[W]}return t.defaultCallback.apply(t,B)}},i.prototype._getAttributeValue=function(n,t){if(n.isCategory&&!this.linear){var s=n.translate(t);return this.values[s%this.values.length]}var l=n.scale(t);return this.getLinearValue(l)},i.prototype._toOriginParam=function(n,t){return t.isLinear?n:(0,E.kJ)(n)?n.map(function(s){return at(t,s)}):at(t,n)},i}(),mr=Rt,Dr=/rgba?\(([\s.,0-9]+)\)/,Ft=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Mn=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,yi=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,gi=function(i){return/^[r,R,L,l]{1}[\s]*\(/.test(i)},sn=function(){var i=document.createElement("i");return i.title="Web Colour Picker",i.style.display="none",document.body.appendChild(i),i},hi=function(i,n,t,s){return i[s]+(n[s]-i[s])*t};function ri(i){return"#"+ba(i[0])+ba(i[1])+ba(i[2])}var ui=function(i){return[parseInt(i.substr(1,2),16),parseInt(i.substr(3,2),16),parseInt(i.substr(5,2),16)]},ba=function(i){var n=Math.round(i).toString(16);return n.length===1?"0"+n:n},vi=function(i,n){var t=isNaN(Number(n))||n<0?0:n>1?1:Number(n),s=i.length-1,l=Math.floor(s*t),f=s*t-l,d=i[l],m=l===s?d:i[l+1];return ri([hi(d,m,f,0),hi(d,m,f,1),hi(d,m,f,2)])},Sa,za=function(i){if(i[0]==="#"&&i.length===7)return i;Sa||(Sa=sn()),Sa.style.color=i;var n=document.defaultView.getComputedStyle(Sa,"").getPropertyValue("color"),t=Dr.exec(n),s=t[1].split(/\s*,\s*/).map(function(l){return Number(l)});return n=ri(s),n},_a=function(i){var n=(0,E.HD)(i)?i.split("-"):i,t=(0,E.UI)(n,function(s){return ui(s.indexOf("#")===-1?za(s):s)});return function(s){return vi(t,s)}},Ga=function(i){if(gi(i)){var n,t=void 0;if(i[0]==="l"){var s=Ft.exec(i),l=+s[1]+90;t=s[2],n="linear-gradient("+l+"deg, "}else if(i[0]==="r"){n="radial-gradient(";var s=Mn.exec(i);t=s[4]}var f=t.match(yi);return(0,E.S6)(f,function(d,m){var x=d.split(":");n+=x[1]+" "+x[0]*100+"%",m!==f.length-1&&(n+=", ")}),n+=")",n}return i},Ea={rgb2arr:ui,gradient:_a,toRGB:(0,E.HP)(za),toCSSGradient:Ga},hs=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.type="color",s.names=["color"],(0,E.HD)(s.values)&&(s.linear=!0),s.gradient=Ea.gradient(s.values),s}return n.prototype.getLinearValue=function(t){return this.gradient(t)},n}(mr),uo=hs,Ro=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.type="opacity",s.names=["opacity"],s}return n}(mr),Jn=Ro,_i=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.names=["x","y"],s.type="position",s}return n.prototype.mapping=function(t,s){var l=this.scales,f=l[0],d=l[1];return(0,E.UM)(t)||(0,E.UM)(s)?[]:[(0,E.kJ)(t)?t.map(function(m){return f.scale(m)}):f.scale(t),(0,E.kJ)(s)?s.map(function(m){return d.scale(m)}):d.scale(s)]},n}(mr),na=_i,Xa=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.type="shape",s.names=["shape"],s}return n.prototype.getLinearValue=function(t){var s=Math.round((this.values.length-1)*t);return this.values[s]},n}(mr),ps=Xa,po=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.type="size",s.names=["size"],s}return n}(mr),Io=po,nr={};function At(i){return nr[i]}function Xt(i,n){nr[i]=n}var yr=function(){function i(n){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=n,this.initCfg(),this.init()}return i.prototype.translate=function(n){return n},i.prototype.change=function(n){(0,E.f0)(this.__cfg__,n),this.init()},i.prototype.clone=function(){return this.constructor(this.__cfg__)},i.prototype.getTicks=function(){var n=this;return(0,E.UI)(this.ticks,function(t,s){return(0,E.Kn)(t)?t:{text:n.getText(t,s),tickValue:t,value:n.scale(t)}})},i.prototype.getText=function(n,t){var s=this.formatter,l=s?s(n,t):n;return(0,E.UM)(l)||!(0,E.mf)(l.toString)?"":l.toString()},i.prototype.getConfig=function(n){return this.__cfg__[n]},i.prototype.init=function(){(0,E.f0)(this,this.__cfg__),this.setDomain(),(0,E.xb)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},i.prototype.initCfg=function(){},i.prototype.setDomain=function(){},i.prototype.calculateTicks=function(){var n=this.tickMethod,t=[];if((0,E.HD)(n)){var s=At(n);if(!s)throw new Error("There is no method to to calculate ticks!");t=s(this)}else(0,E.mf)(n)&&(t=n(this));return t},i.prototype.rangeMin=function(){return this.range[0]},i.prototype.rangeMax=function(){return this.range[1]},i.prototype.calcPercent=function(n,t,s){return(0,E.hj)(n)?(n-t)/(s-t):NaN},i.prototype.calcValue=function(n,t,s){return t+n*(s-t)},i}(),Gr=yr,Cn=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return n.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},n.prototype.translate=function(t){this.buildIndexMap();var s=this.translateIndexMap.get(t);return s===void 0&&(s=(0,E.hj)(t)?t:NaN),s},n.prototype.scale=function(t){var s=this.translate(t),l=this.calcPercent(s,this.min,this.max);return this.calcValue(l,this.rangeMin(),this.rangeMax())},n.prototype.invert=function(t){var s=this.max-this.min,l=this.calcPercent(t,this.rangeMin(),this.rangeMax()),f=Math.round(s*l)+this.min;return f<this.min||f>this.max?NaN:this.values[f]},n.prototype.getText=function(t){for(var s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];var f=t;return(0,E.hj)(t)&&!this.values.includes(t)&&(f=this.values[f]),i.prototype.getText.apply(this,(0,M.pr)([f],s))},n.prototype.initCfg=function(){this.tickMethod="cat"},n.prototype.setDomain=function(){if((0,E.UM)(this.getConfig("min"))&&(this.min=0),(0,E.UM)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},n}(Gr),kn=Cn,_n=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Mi="\\d\\d?",Yi="\\d\\d",Wo="\\d{3}",Ko="\\d{4}",su="[^\\s]+",No=/\[([^]*?)\]/gm;function ro(i,n){for(var t=[],s=0,l=i.length;s<l;s++)t.push(i[s].substr(0,n));return t}var uu=function(i){return function(n,t){var s=t[i].map(function(f){return f.toLowerCase()}),l=s.indexOf(n.toLowerCase());return l>-1?l:null}};function qo(i){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];for(var s=0,l=n;s<l.length;s++){var f=l[s];for(var d in f)i[d]=f[d]}return i}var Dt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Kt=["January","February","March","April","May","June","July","August","September","October","November","December"],Or=ro(Kt,3),xn=ro(Dt,3),ii={dayNamesShort:xn,dayNames:Dt,monthNamesShort:Or,monthNames:Kt,amPm:["am","pm"],DoFn:function(i){return i+["th","st","nd","rd"][i%10>3?0:(i-i%10!==10?1:0)*i%10]}},Zi=qo({},ii),lo=function(i){return Zi=qo(Zi,i)},Bs=function(i){return i.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Eo=function(i,n){for(n===void 0&&(n=2),i=String(i);i.length<n;)i="0"+i;return i},Po={D:function(i){return String(i.getDate())},DD:function(i){return Eo(i.getDate())},Do:function(i,n){return n.DoFn(i.getDate())},d:function(i){return String(i.getDay())},dd:function(i){return Eo(i.getDay())},ddd:function(i,n){return n.dayNamesShort[i.getDay()]},dddd:function(i,n){return n.dayNames[i.getDay()]},M:function(i){return String(i.getMonth()+1)},MM:function(i){return Eo(i.getMonth()+1)},MMM:function(i,n){return n.monthNamesShort[i.getMonth()]},MMMM:function(i,n){return n.monthNames[i.getMonth()]},YY:function(i){return Eo(String(i.getFullYear()),4).substr(2)},YYYY:function(i){return Eo(i.getFullYear(),4)},h:function(i){return String(i.getHours()%12||12)},hh:function(i){return Eo(i.getHours()%12||12)},H:function(i){return String(i.getHours())},HH:function(i){return Eo(i.getHours())},m:function(i){return String(i.getMinutes())},mm:function(i){return Eo(i.getMinutes())},s:function(i){return String(i.getSeconds())},ss:function(i){return Eo(i.getSeconds())},S:function(i){return String(Math.round(i.getMilliseconds()/100))},SS:function(i){return Eo(Math.round(i.getMilliseconds()/10),2)},SSS:function(i){return Eo(i.getMilliseconds(),3)},a:function(i,n){return i.getHours()<12?n.amPm[0]:n.amPm[1]},A:function(i,n){return i.getHours()<12?n.amPm[0].toUpperCase():n.amPm[1].toUpperCase()},ZZ:function(i){var n=i.getTimezoneOffset();return(n>0?"-":"+")+Eo(Math.floor(Math.abs(n)/60)*100+Math.abs(n)%60,4)},Z:function(i){var n=i.getTimezoneOffset();return(n>0?"-":"+")+Eo(Math.floor(Math.abs(n)/60),2)+":"+Eo(Math.abs(n)%60,2)}},Hu=function(i){return+i-1},uf=[null,Mi],th=[null,su],rh=["isPm",su,function(i,n){var t=i.toLowerCase();return t===n.amPm[0]?0:t===n.amPm[1]?1:null}],lu=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(i){var n=(i+"").match(/([+-]|\d\d)/gi);if(n){var t=+n[1]*60+parseInt(n[2],10);return n[0]==="+"?t:-t}return 0}],nc={D:["day",Mi],DD:["day",Yi],Do:["day",Mi+su,function(i){return parseInt(i,10)}],M:["month",Mi,Hu],MM:["month",Yi,Hu],YY:["year",Yi,function(i){var n=new Date,t=+(""+n.getFullYear()).substr(0,2);return+(""+(+i>68?t-1:t)+i)}],h:["hour",Mi,void 0,"isPm"],hh:["hour",Yi,void 0,"isPm"],H:["hour",Mi],HH:["hour",Yi],m:["minute",Mi],mm:["minute",Yi],s:["second",Mi],ss:["second",Yi],YYYY:["year",Ko],S:["millisecond","\\d",function(i){return+i*100}],SS:["millisecond",Yi,function(i){return+i*10}],SSS:["millisecond",Wo],d:uf,dd:uf,ddd:th,dddd:th,MMM:["month",su,uu("monthNamesShort")],MMMM:["month",su,uu("monthNames")],a:rh,A:rh,ZZ:lu,Z:lu},Qs={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Sl=function(i){return qo(Qs,i)},ic=function(i,n,t){if(n===void 0&&(n=Qs.default),t===void 0&&(t={}),typeof i=="number"&&(i=new Date(i)),Object.prototype.toString.call(i)!=="[object Date]"||isNaN(i.getTime()))throw new Error("Invalid Date pass to format");n=Qs[n]||n;var s=[];n=n.replace(No,function(f,d){return s.push(d),"@@@"});var l=qo(qo({},Zi),t);return n=n.replace(_n,function(f){return Po[f](i,l)}),n.replace(/@@@/g,function(){return s.shift()})};function no(i,n,t){if(t===void 0&&(t={}),typeof n!="string")throw new Error("Invalid format in fecha parse");if(n=Qs[n]||n,i.length>1e3)return null;var s=new Date,l={year:s.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},f=[],d=[],m=n.replace(No,function(vt,Ot){return d.push(Bs(Ot)),"@@@"}),x={},A={};m=Bs(m).replace(_n,function(vt){var Ot=nc[vt],fr=Ot[0],Tr=Ot[1],zr=Ot[3];if(x[fr])throw new Error("Invalid format. "+fr+" specified twice in format");return x[fr]=!0,zr&&(A[zr]=!0),f.push(Ot),"("+Tr+")"}),Object.keys(A).forEach(function(vt){if(!x[vt])throw new Error("Invalid format. "+vt+" is required in specified format")}),m=m.replace(/@@@/g,function(){return d.shift()});var P=i.match(new RegExp(m,"i"));if(!P)return null;for(var k=qo(qo({},Zi),t),B=1;B<P.length;B++){var U=f[B-1],W=U[0],ne=U[2],de=ne?ne(P[B],k):+P[B];if(de==null)return null;l[W]=de}l.isPm===1&&l.hour!=null&&+l.hour!=12?l.hour=+l.hour+12:l.isPm===0&&+l.hour==12&&(l.hour=0);var ve;if(l.timezoneOffset==null){ve=new Date(l.year,l.month,l.day,l.hour,l.minute,l.second,l.millisecond);for(var $e=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],B=0,lt=$e.length;B<lt;B++)if(x[$e[B][0]]&&l[$e[B][0]]!==ve[$e[B][1]]())return null}else if(ve=new Date(Date.UTC(l.year,l.month,l.day,l.hour,l.minute-l.timezoneOffset,l.second,l.millisecond)),l.month>11||l.month<0||l.day>31||l.day<1||l.hour>23||l.hour<0||l.minute>59||l.minute<0||l.second>59||l.second<0)return null;return ve}var Kl={format:ic,parse:no,defaultI18n:ii,setGlobalDateI18n:lo,setGlobalDateMasks:Sl},Es=Kl;function ds(i){return function(n,t,s,l){for(var f=(0,E.UM)(s)?0:s,d=(0,E.UM)(l)?n.length:l;f<d;){var m=f+d>>>1;i(n[m])>t?d=m:f=m+1}return f}}var bc="format";function Sc(i,n){var t=$[bc]||Es[bc];return t(i,n)}function Rf(i){return(0,E.HD)(i)&&(i.indexOf("T")>0?i=new Date(i).getTime():i=new Date(i.replace(/-/gi,"/")).getTime()),(0,E.J_)(i)&&(i=i.getTime()),i}var Bl=1e3,Nl=60*Bl,ql=60*Nl,Pu=24*ql,Ec=Pu*31,Sn=Pu*365,Vi=[["HH:mm:ss",Bl],["HH:mm:ss",Bl*10],["HH:mm:ss",Bl*30],["HH:mm",Nl],["HH:mm",Nl*10],["HH:mm",Nl*30],["HH",ql],["HH",ql*6],["HH",ql*12],["YYYY-MM-DD",Pu],["YYYY-MM-DD",Pu*4],["YYYY-WW",Pu*7],["YYYY-MM",Ec],["YYYY-MM",Ec*4],["YYYY-MM",Ec*6],["YYYY",Pu*380]];function mv(i,n,t){var s=(n-i)/t,l=ds(function(d){return d[1]})(Vi,s)-1,f=Vi[l];return l<0?f=Vi[0]:l>=Vi.length&&(f=(0,E.Z$)(Vi)),f}var nh=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="timeCat",t}return n.prototype.translate=function(t){t=Rf(t);var s=this.values.indexOf(t);return s===-1&&((0,E.hj)(t)&&t<this.values.length?s=t:s=NaN),s},n.prototype.getText=function(t,s){var l=this.translate(t);if(l>-1){var f=this.values[l],d=this.formatter;return f=d?d(f,s):Sc(f,this.mask),f}return t},n.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},n.prototype.setDomain=function(){var t=this.values;(0,E.S6)(t,function(s,l){t[l]=Rf(s)}),t.sort(function(s,l){return s-l}),i.prototype.setDomain.call(this)},n}(kn),ac=nh,ed=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.isContinuous=!0,t}return n.prototype.scale=function(t){if((0,E.UM)(t))return NaN;var s=this.rangeMin(),l=this.rangeMax(),f=this.max,d=this.min;if(f===d)return s;var m=this.getScalePercent(t);return s+m*(l-s)},n.prototype.init=function(){i.prototype.init.call(this);var t=this.ticks,s=(0,E.YM)(t),l=(0,E.Z$)(t);s<this.min&&(this.min=s),l>this.max&&(this.max=l),(0,E.UM)(this.minLimit)||(this.min=s),(0,E.UM)(this.maxLimit)||(this.max=l)},n.prototype.setDomain=function(){var t=(0,E.rx)(this.values),s=t.min,l=t.max;(0,E.UM)(this.min)&&(this.min=s),(0,E.UM)(this.max)&&(this.max=l),this.min>this.max&&(this.min=s,this.max=l)},n.prototype.calculateTicks=function(){var t=this,s=i.prototype.calculateTicks.call(this);return this.nice||(s=(0,E.hX)(s,function(l){return l>=t.min&&l<=t.max})),s},n.prototype.getScalePercent=function(t){var s=this.max,l=this.min;return(t-l)/(s-l)},n.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},n}(Gr),Vs=ed,wc=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return n.prototype.invert=function(t){var s=this.getInvertPercent(t);return this.min+s*(this.max-this.min)},n.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},n}(Vs),zl=wc;function Js(i,n){var t=Math.E,s;return n>=0?s=Math.pow(t,Math.log(n)/i):s=Math.pow(t,Math.log(-n)/i)*-1,s}function cu(i,n){return i===1?1:Math.log(n)/Math.log(i)}function El(i,n,t){(0,E.UM)(t)&&(t=Math.max.apply(null,i));var s=t;return(0,E.S6)(i,function(l){l>0&&l<s&&(s=l)}),s===t&&(s=t/n),s>1&&(s=1),s}function oc(i){var n=i.toString().split(/[eE]/),t=(n[0].split(".")[1]||"").length-+(n[1]||0);return t>0?t:0}function Ul(i,n){var t=oc(i),s=oc(n),l=Math.pow(10,Math.max(t,s));return(i*l+n*l)/l}var Cc=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="log",t}return n.prototype.invert=function(t){var s=this.base,l=cu(s,this.max),f=this.rangeMin(),d=this.rangeMax()-f,m,x=this.positiveMin;if(x){if(t===0)return 0;m=cu(s,x/s);var A=1/(l-m)*d;if(t<A)return t/A*x}else m=cu(s,this.min);var P=(t-f)/d,k=P*(l-m)+m;return Math.pow(s,k)},n.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},n.prototype.setDomain=function(){i.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=El(this.values,this.base,this.max))},n.prototype.getScalePercent=function(t){var s=this.max,l=this.min;if(s===l||t<=0)return 0;var f=this.base,d=this.positiveMin;d&&(l=d*1/f);var m;return t<d?m=t/d/(cu(f,s)-cu(f,l)):m=(cu(f,t)-cu(f,l))/(cu(f,s)-cu(f,l)),m},n}(Vs),Vc=Cc,ih=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="pow",t}return n.prototype.invert=function(t){var s=this.getInvertPercent(t),l=this.exponent,f=Js(l,this.max),d=Js(l,this.min),m=s*(f-d)+d,x=m>=0?1:-1;return Math.pow(m,l)*x},n.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},n.prototype.getScalePercent=function(t){var s=this.max,l=this.min;if(s===l)return 0;var f=this.exponent,d=(Js(f,t)-Js(f,l))/(Js(f,s)-Js(f,l));return d},n}(Vs),td=ih,Zo=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="time",t}return n.prototype.getText=function(t,s){var l=this.translate(t),f=this.formatter;return f?f(l,s):Sc(l,this.mask)},n.prototype.scale=function(t){var s=t;return((0,E.HD)(s)||(0,E.J_)(s))&&(s=this.translate(s)),i.prototype.scale.call(this,s)},n.prototype.translate=function(t){return Rf(t)},n.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},n.prototype.setDomain=function(){var t=this.values,s=this.getConfig("min"),l=this.getConfig("max");if((!(0,E.UM)(s)||!(0,E.hj)(s))&&(this.min=this.translate(this.min)),(!(0,E.UM)(l)||!(0,E.hj)(l))&&(this.max=this.translate(this.max)),t&&t.length){var f=[],d=1/0,m=d,x=0;(0,E.S6)(t,function(A){var P=Rf(A);if(isNaN(P))throw new TypeError("Invalid Time: "+A+" in time scale!");d>P?(m=d,d=P):m>P&&(m=P),x<P&&(x=P),f.push(P)}),t.length>1&&(this.minTickInterval=m-d),(0,E.UM)(s)&&(this.min=d),(0,E.UM)(l)&&(this.max=x)}},n}(zl),Fd=Zo,Ih=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantize",t}return n.prototype.invert=function(t){var s=this.ticks,l=s.length,f=this.getInvertPercent(t),d=Math.floor(f*(l-1));if(d>=l-1)return(0,E.Z$)(s);if(d<0)return(0,E.YM)(s);var m=s[d],x=s[d+1],A=d/(l-1),P=(d+1)/(l-1);return m+(f-A)/(P-A)*(x-m)},n.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},n.prototype.calculateTicks=function(){var t=i.prototype.calculateTicks.call(this);return this.nice||((0,E.Z$)(t)!==this.max&&t.push(this.max),(0,E.YM)(t)!==this.min&&t.unshift(this.min)),t},n.prototype.getScalePercent=function(t){var s=this.ticks;if(t<(0,E.YM)(s))return 0;if(t>(0,E.Z$)(s))return 1;var l=0;return(0,E.S6)(s,function(f,d){if(t>=f)l=d;else return!1}),l/(s.length-1)},n}(Vs),lf=Ih,ts=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantile",t}return n.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},n}(lf),hp=ts,pp={};function Ou(i){return pp[i]}function St(i,n){if(Ou(i))throw new Error("type '"+i+"' existed.");pp[i]=n}var cr=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return n.prototype.calculateTicks=function(){return this.values},n.prototype.scale=function(t){return this.values[0]!==t&&(0,E.hj)(t)?t:this.range[0]},n.prototype.invert=function(t){var s=this.range;return t<s[0]||t>s[1]?NaN:this.values[0]},n}(Gr),kr=cr;function Hr(i){var n=i.values,t=i.tickInterval,s=i.tickCount,l=i.showLast;if((0,E.hj)(t)){var f=(0,E.hX)(n,function(W,ne){return ne%t===0}),d=(0,E.Z$)(n);return l&&(0,E.Z$)(f)!==d&&f.push(d),f}var m=n.length,x=i.min,A=i.max;if((0,E.UM)(x)&&(x=0),(0,E.UM)(A)&&(A=n.length-1),!(0,E.hj)(s)||s>=m)return n.slice(x,A+1);if(s<=0||A<=0)return[];for(var P=s===1?m:Math.floor(m/(s-1)),k=[],B=x,U=0;U<s&&!(B>=A);U++)B=Math.min(x+U*P,A),U===s-1&&l?k.push(n[A]):k.push(n[B]);return k}function An(i){var n=i.min,t=i.max,s=i.nice,l=i.tickCount,f=new ll;return f.domain([n,t]),s&&f.nice(l),f.ticks(l)}var di=5,ua=Math.sqrt(50),go=Math.sqrt(10),Is=Math.sqrt(2),ll=function(){function i(){this._domain=[0,1]}return i.prototype.domain=function(n){return n?(this._domain=Array.from(n,Number),this):this._domain.slice()},i.prototype.nice=function(n){var t,s;n===void 0&&(n=di);var l=this._domain.slice(),f=0,d=this._domain.length-1,m=this._domain[f],x=this._domain[d],A;return x<m&&(t=[x,m],m=t[0],x=t[1],s=[d,f],f=s[0],d=s[1]),A=Oo(m,x,n),A>0?(m=Math.floor(m/A)*A,x=Math.ceil(x/A)*A,A=Oo(m,x,n)):A<0&&(m=Math.ceil(m*A)/A,x=Math.floor(x*A)/A,A=Oo(m,x,n)),A>0?(l[f]=Math.floor(m/A)*A,l[d]=Math.ceil(x/A)*A,this.domain(l)):A<0&&(l[f]=Math.ceil(m*A)/A,l[d]=Math.floor(x*A)/A,this.domain(l)),this},i.prototype.ticks=function(n){return n===void 0&&(n=di),Ku(this._domain[0],this._domain[this._domain.length-1],n||di)},i}();function Ku(i,n,t){var s,l=-1,f,d,m;if(n=+n,i=+i,t=+t,i===n&&t>0)return[i];if((s=n<i)&&(f=i,i=n,n=f),(m=Oo(i,n,t))===0||!isFinite(m))return[];if(m>0)for(i=Math.ceil(i/m),n=Math.floor(n/m),d=new Array(f=Math.ceil(n-i+1));++l<f;)d[l]=(i+l)*m;else for(i=Math.floor(i*m),n=Math.ceil(n*m),d=new Array(f=Math.ceil(i-n+1));++l<f;)d[l]=(i-l)/m;return s&&d.reverse(),d}function Oo(i,n,t){var s=(n-i)/Math.max(0,t),l=Math.floor(Math.log(s)/Math.LN10),f=s/Math.pow(10,l);return l>=0?(f>=ua?10:f>=go?5:f>=Is?2:1)*Math.pow(10,l):-Math.pow(10,-l)/(f>=ua?10:f>=go?5:f>=Is?2:1)}function dp(i,n,t){var s;return t==="ceil"?s=Math.ceil(i/n):t==="floor"?s=Math.floor(i/n):s=Math.round(i/n),s*n}function Dd(i,n,t){var s=dp(i,t,"floor"),l=dp(n,t,"ceil");s=(0,E.ri)(s,t),l=(0,E.ri)(l,t);for(var f=[],d=Math.max((l-s)/(Math.pow(2,12)-1),t),m=s;m<=l;m=m+d){var x=(0,E.ri)(m,d);f.push(x)}return{min:s,max:l,ticks:f}}function Hc(i,n,t){var s,l=i.minLimit,f=i.maxLimit,d=i.min,m=i.max,x=i.tickCount,A=x===void 0?5:x,P=(0,E.UM)(l)?(0,E.UM)(n)?d:n:l,k=(0,E.UM)(f)?(0,E.UM)(t)?m:t:f;if(P>k&&(s=[P,k],k=s[0],P=s[1]),A<=2)return[P,k];for(var B=(k-P)/(A-1),U=[],W=0;W<A;W++)U.push(P+B*W);return U}function vp(i){var n=i.min,t=i.max,s=i.tickInterval,l=i.minLimit,f=i.maxLimit,d=An(i);return!(0,E.UM)(l)||!(0,E.UM)(f)?Hc(i,(0,E.YM)(d),(0,E.Z$)(d)):s?Dd(n,t,s).ticks:d}function cf(i){return Math.abs(i)<1e-15?i:parseFloat(i.toFixed(15))}var rd=[1,5,2,2.5,4,3],wa=null,ff=Number.EPSILON*100;function ah(i,n){return(i%n+n)%n}function oh(i){return Math.round(i*1e12)/1e12}function If(i,n,t,s,l,f){var d=(0,E.dp)(n),m=(0,E.cq)(n,i),x=0,A=ah(s,f);return(A<ff||f-A<ff)&&s<=0&&l>=0&&(x=1),1-m/(d-1)-t+x}function sh(i,n,t){var s=(0,E.dp)(n),l=(0,E.cq)(n,i),f=1;return 1-l/(s-1)-t+f}function Ns(i,n,t,s,l,f){var d=(i-1)/(f-l),m=(n-1)/(Math.max(f,s)-Math.min(t,l));return 2-Math.max(d/m,m/d)}function sc(i,n){return i>=n?2-(i-1)/(n-1):1}function qu(i,n,t,s){var l=n-i;return 1-.5*(Math.pow(n-s,2)+Math.pow(i-t,2))/Math.pow(.1*l,2)}function gp(i,n,t){var s=n-i;if(t>s){var l=(t-s)/2;return 1-Math.pow(l,2)/Math.pow(.1*s,2)}return 1}function Ld(){return 1}function nd(i,n,t,s,l,f){t===void 0&&(t=5),s===void 0&&(s=!0),l===void 0&&(l=rd),f===void 0&&(f=[.25,.2,.5,.05]);var d=t<0?0:Math.round(t);if(Number.isNaN(i)||Number.isNaN(n)||typeof i!="number"||typeof n!="number"||!d)return{min:0,max:0,ticks:[]};if(n-i<1e-15||d===1)return{min:i,max:n,ticks:[i]};if(n-i>1e148){var m=t||5,x=(n-i)/m;return{min:i,max:n,ticks:Array(m).fill(null).map(function(Da,xo){return cf(i+x*xo)})}}for(var A={score:-2,lmin:0,lmax:0,lstep:0},P=1;P<1/0;){for(var k=0;k<l.length;k+=1){var B=l[k],U=sh(B,l,P);if(f[0]*U+f[1]+f[2]+f[3]<A.score){P=1/0;break}for(var W=2;W<1/0;){var ne=sc(W,d);if(f[0]*U+f[1]+f[2]*ne+f[3]<A.score)break;for(var de=(n-i)/(W+1)/P/B,ve=Math.ceil(Math.log10(de));ve<1/0;){var $e=P*B*Math.pow(10,ve),lt=gp(i,n,$e*(W-1));if(f[0]*U+f[1]*lt+f[2]*ne+f[3]<A.score)break;var vt=Math.floor(n/$e)*P-(W-1)*P,Ot=Math.ceil(i/$e)*P;if(vt<=Ot)for(var m=Ot-vt,fr=0;fr<=m;fr+=1){var Tr=vt+fr,zr=Tr*($e/P),cn=zr+$e*(W-1),Qr=$e,On=If(B,l,P,zr,cn,Qr),Qn=qu(i,n,zr,cn),Hi=Ns(W,d,i,n,zr,cn),oa=Ld(),eo=f[0]*On+f[1]*Qn+f[2]*Hi+f[3]*oa;eo>A.score&&(!s||zr<=i&&cn>=n)&&(A.lmin=zr,A.lmax=cn,A.lstep=Qr,A.score=eo)}ve+=1}W+=1}}P+=1}var Nn=cf(A.lmax),Di=cf(A.lmin),sa=cf(A.lstep),Li=Math.floor(oh((Nn-Di)/sa))+1,$i=new Array(Li);$i[0]=cf(Di);for(var k=1;k<Li;k++)$i[k]=cf($i[k-1]+sa);return{min:Math.min(i,(0,E.YM)($i)),max:Math.max(n,(0,E.Z$)($i)),ticks:$i}}function jc(i){var n=i.min,t=i.max,s=i.tickCount,l=i.nice,f=i.tickInterval,d=i.minLimit,m=i.maxLimit,x=nd(n,t,s,l).ticks;return!(0,E.UM)(d)||!(0,E.UM)(m)?Hc(i,(0,E.YM)(x),(0,E.Z$)(x)):f?Dd(n,t,f).ticks:x}function hf(i){var n=i.base,t=i.tickCount,s=i.min,l=i.max,f=i.values,d,m=cu(n,l);if(s>0)d=Math.floor(cu(n,s));else{var x=El(f,n,l);d=Math.floor(cu(n,x))}for(var A=m-d,P=Math.ceil(A/t),k=[],B=d;B<m+P;B=B+P)k.push(Math.pow(n,B));return s<=0&&k.unshift(0),k}function uh(i,n,t){if(t===void 0&&(t=5),i===n)return{max:n,min:i,ticks:[i]};var s=t<0?0:Math.round(t);if(s===0)return{max:n,min:i,ticks:[]};var l=1.5,f=.5+1.5*l,d=n-i,m=d/s,x=Math.pow(10,Math.floor(Math.log10(m))),A=x;2*x-m<l*(m-A)&&(A=2*x,5*x-m<f*(m-A)&&(A=5*x,10*x-m<l*(m-A)&&(A=10*x)));for(var P=Math.ceil(n/A),k=Math.floor(i/A),B=Math.max(P*A,n),U=Math.min(k*A,i),W=Math.floor((B-U)/A)+1,ne=new Array(W),de=0;de<W;de++)ne[de]=cf(U+de*A);return{min:U,max:B,ticks:ne}}function mp(i){var n=i.exponent,t=i.tickCount,s=Math.ceil(Js(n,i.max)),l=Math.floor(Js(n,i.min)),f=uh(l,s,t).ticks;return f.map(function(d){var m=d>=0?1:-1;return Math.pow(d,n)*m})}function Pf(i,n){var t=i.length*n;return n===1?i[i.length-1]:n===0?i[0]:t%1!==0?i[Math.ceil(t)-1]:i.length%2===0?(i[t-1]+i[t])/2:i[t]}function fm(i){var n=i.tickCount,t=i.values;if(!t||!t.length)return[];for(var s=t.slice().sort(function(m,x){return m-x}),l=[],f=0;f<n;f++){var d=f/(n-1);l.push(Pf(s,d))}return l}function id(i){var n=i.min,t=i.max,s=i.tickCount,l=i.tickInterval,f=i.minLimit,d=i.maxLimit,m=uh(n,t,s).ticks;return!(0,E.UM)(f)||!(0,E.UM)(d)?Hc(i,(0,E.YM)(m),(0,E.Z$)(m)):l?Dd(n,t,l).ticks:m}function Ps(i){var n=i.min,t=i.max,s=i.minTickInterval,l=i.tickInterval,f=i.tickCount;if(l)f=Math.ceil((t-n)/l);else{l=mv(n,t,f)[1];var d=(t-n)/l,m=d/f;m>1&&(l=l*Math.ceil(m)),s&&l<s&&(l=s)}l=Math.max(Math.floor((t-n)/(Math.pow(2,12)-1)),l);for(var x=[],A=n;A<t+l;A+=l)x.push(A);return x}function yp(i){var n=Hr((0,M.pi)({showLast:!0},i));return n}function Ph(i){return new Date(i).getFullYear()}function Bd(i){return new Date(i,0,1).getTime()}function _p(i){return new Date(i).getMonth()}function xp(i,n){var t=Ph(i),s=Ph(n),l=_p(i),f=_p(n);return(s-t)*12+(f-l)%12}function yv(i,n){return new Date(i,n,1).getTime()}function Wc(i,n){return Math.ceil((n-i)/Pu)}function Nd(i,n){return Math.ceil((n-i)/ql)}function lh(i,n){return Math.ceil((n-i)/(60*1e3))}function rs(i){var n=i.min,t=i.max,s=i.minTickInterval,l=i.tickCount,f=i.tickInterval,d=[];f||(f=(t-n)/l,s&&f<s&&(f=s)),f=Math.max(Math.floor((t-n)/(Math.pow(2,12)-1)),f);var m=Ph(n);if(f>Sn)for(var x=Ph(t),A=Math.ceil(f/Sn),P=m;P<=x+A;P=P+A)d.push(Bd(P));else if(f>Ec)for(var k=Math.ceil(f/Ec),B=_p(n),U=xp(n,t),P=0;P<=U+k;P=P+k)d.push(yv(m,P+B));else if(f>Pu)for(var W=new Date(n),ne=W.getFullYear(),de=W.getMonth(),ve=W.getDate(),$e=Math.ceil(f/Pu),lt=Wc(n,t),P=0;P<lt+$e;P=P+$e)d.push(new Date(ne,de,ve+P).getTime());else if(f>ql)for(var W=new Date(n),ne=W.getFullYear(),de=W.getMonth(),$e=W.getDate(),vt=W.getHours(),Ot=Math.ceil(f/ql),fr=Nd(n,t),P=0;P<=fr+Ot;P=P+Ot)d.push(new Date(ne,de,$e,vt+P).getTime());else if(f>Nl)for(var Tr=lh(n,t),zr=Math.ceil(f/Nl),P=0;P<=Tr+zr;P=P+zr)d.push(n+P*Nl);else{var cn=f;cn<Bl&&(cn=Bl);for(var Qr=Math.floor(n/Bl)*Bl,On=Math.ceil((t-n)/Bl),Qn=Math.ceil(cn/Bl),P=0;P<On+Qn;P=P+Qn)d.push(Qr+P*Bl)}return d.length>=512&&console.warn("Notice: current ticks length("+d.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+f+") is too small, increase the value to solve the problem!"),d}Xt("cat",Hr),Xt("time-cat",yp),Xt("wilkinson-extended",jc),Xt("r-pretty",id),Xt("time",Ps),Xt("time-pretty",rs),Xt("log",hf),Xt("pow",mp),Xt("quantile",fm),Xt("d3-linear",vp),St("cat",kn),St("category",kn),St("identity",kr),St("linear",zl),St("log",Vc),St("pow",td),St("time",Fd),St("timeCat",ac),St("quantize",lf),St("quantile",hp);var ch={},Ac=function(i){return ch[i.toLowerCase()]},uc=function(i,n){if(Ac(i))throw new Error("Attribute type '".concat(i,"' existed."));ch[i.toLowerCase()]=n};uc("Color",uo),uc("Opacity",Jn),uc("Position",na),uc("Shape",ps),uc("Size",Io);var co=F(77160),Xo=F(35600),mo=F(31506),ad=function(){function i(n){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var t=n.start,s=n.end,l=n.matrix,f=l===void 0?[1,0,0,0,1,0,0,0,1]:l,d=n.isTransposed,m=d===void 0?!1:d;this.start=t,this.end=s,this.matrix=f,this.originalMatrix=(0,M.ev)([],f),this.isTransposed=m}return i.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},i.prototype.update=function(n){(0,E.f0)(this,n),this.initial()},i.prototype.convertDim=function(n,t){var s,l=this[t],f=l.start,d=l.end;return this.isReflect(t)&&(s=[d,f],f=s[0],d=s[1]),f+n*(d-f)},i.prototype.invertDim=function(n,t){var s,l=this[t],f=l.start,d=l.end;return this.isReflect(t)&&(s=[d,f],f=s[0],d=s[1]),(n-f)/(d-f)},i.prototype.applyMatrix=function(n,t,s){s===void 0&&(s=0);var l=this.matrix,f=[n,t,s];return co.transformMat3(f,f,l),f},i.prototype.invertMatrix=function(n,t,s){s===void 0&&(s=0);var l=this.matrix,f=Xo.U_([0,0,0,0,0,0,0,0,0],l),d=[n,t,s];return f&&co.transformMat3(d,d,f),d},i.prototype.convert=function(n){var t=this.convertPoint(n),s=t.x,l=t.y,f=this.applyMatrix(s,l,1);return{x:f[0],y:f[1]}},i.prototype.invert=function(n){var t=this.invertMatrix(n.x,n.y,1);return this.invertPoint({x:t[0],y:t[1]})},i.prototype.rotate=function(n){var t=this.matrix,s=this.center;return mo.m$(t,t,[-s.x,-s.y]),mo.zu(t,t,n),mo.m$(t,t,[s.x,s.y]),this},i.prototype.reflect=function(n){return n==="x"?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},i.prototype.scale=function(n,t){var s=this.matrix,l=this.center;return mo.m$(s,s,[-l.x,-l.y]),mo.lh(s,s,[n,t]),mo.m$(s,s,[l.x,l.y]),this},i.prototype.translate=function(n,t){var s=this.matrix;return mo.m$(s,s,[n,t]),this},i.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},i.prototype.getCenter=function(){return this.center},i.prototype.getWidth=function(){return this.width},i.prototype.getHeight=function(){return this.height},i.prototype.getRadius=function(){return this.radius},i.prototype.isReflect=function(n){return n==="x"?this.isReflectX:this.isReflectY},i.prototype.resetMatrix=function(n){this.matrix=n||(0,M.ev)([],this.originalMatrix)},i}(),Of=ad,bp=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.isRect=!0,s.type="cartesian",s.initial(),s}return n.prototype.initial=function(){i.prototype.initial.call(this);var t=this.start,s=this.end;this.x={start:t.x,end:s.x},this.y={start:t.y,end:s.y}},n.prototype.convertPoint=function(t){var s,l=t.x,f=t.y;return this.isTransposed&&(s=[f,l],l=s[0],f=s[1]),{x:this.convertDim(l,"x"),y:this.convertDim(f,"y")}},n.prototype.invertPoint=function(t){var s,l=this.invertDim(t.x,"x"),f=this.invertDim(t.y,"y");return this.isTransposed&&(s=[f,l],l=s[0],f=s[1]),{x:l,y:f}},n}(Of),_v=bp,ga=F(31437),Sp=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;s.isHelix=!0,s.type="helix";var l=t.startAngle,f=l===void 0?1.25*Math.PI:l,d=t.endAngle,m=d===void 0?7.25*Math.PI:d,x=t.innerRadius,A=x===void 0?0:x,P=t.radius;return s.startAngle=f,s.endAngle=m,s.innerRadius=A,s.radius=P,s.initial(),s}return n.prototype.initial=function(){i.prototype.initial.call(this);var t=(this.endAngle-this.startAngle)/(2*Math.PI)+1,s=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(s=s*this.radius),this.d=Math.floor(s*(1-this.innerRadius)/t),this.a=this.d/(Math.PI*2),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*s,end:this.innerRadius*s+this.d*.99}},n.prototype.convertPoint=function(t){var s,l=t.x,f=t.y;this.isTransposed&&(s=[f,l],l=s[0],f=s[1]);var d=this.convertDim(l,"x"),m=this.a*d,x=this.convertDim(f,"y");return{x:this.center.x+Math.cos(d)*(m+x),y:this.center.y+Math.sin(d)*(m+x)}},n.prototype.invertPoint=function(t){var s,l=this.d+this.y.start,f=ga.$X([0,0],[t.x,t.y],[this.center.x,this.center.y]),d=mo.Dg(f,[1,0],!0),m=d*this.a;ga.kE(f)<m&&(m=ga.kE(f));var x=Math.floor((ga.kE(f)-m)/l);d=2*x*Math.PI+d;var A=this.a*d,P=ga.kE(f)-A;P=(0,E.vQ)(P,0)?0:P;var k=this.invertDim(d,"x"),B=this.invertDim(P,"y");return k=(0,E.vQ)(k,0)?0:k,B=(0,E.vQ)(B,0)?0:B,this.isTransposed&&(s=[B,k],k=s[0],B=s[1]),{x:k,y:B}},n}(Of),Gc=Sp,Hs=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;s.isPolar=!0,s.type="polar";var l=t.startAngle,f=l===void 0?-Math.PI/2:l,d=t.endAngle,m=d===void 0?Math.PI*3/2:d,x=t.innerRadius,A=x===void 0?0:x,P=t.radius;return s.startAngle=f,s.endAngle=m,s.innerRadius=A,s.radius=P,s.initial(),s}return n.prototype.initial=function(){for(i.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=Math.PI*2;var t=this.getOneBox(),s=t.maxX-t.minX,l=t.maxY-t.minY,f=Math.abs(t.minX)/s,d=Math.abs(t.minY)/l,m;this.height/l>this.width/s?(m=this.width/s,this.circleCenter={x:this.center.x-(.5-f)*this.width,y:this.center.y-(.5-d)*m*l}):(m=this.height/l,this.circleCenter={x:this.center.x-(.5-f)*m*s,y:this.center.y-(.5-d)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=m*this.radius:(this.radius<=0||this.radius>m)&&(this.polarRadius=m):this.polarRadius=m,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},n.prototype.getRadius=function(){return this.polarRadius},n.prototype.convertPoint=function(t){var s,l=this.getCenter(),f=t.x,d=t.y;return this.isTransposed&&(s=[d,f],f=s[0],d=s[1]),f=this.convertDim(f,"x"),d=this.convertDim(d,"y"),{x:l.x+Math.cos(f)*d,y:l.y+Math.sin(f)*d}},n.prototype.invertPoint=function(t){var s,l=this.getCenter(),f=[t.x-l.x,t.y-l.y],d=this,m=d.startAngle,x=d.endAngle;this.isReflect("x")&&(s=[x,m],m=s[0],x=s[1]);var A=[1,0,0,0,1,0,0,0,1];mo.zu(A,A,m);var P=[1,0,0];co.transformMat3(P,P,A);var k=[P[0],P[1]],B=mo.Dg(k,f,x<m);(0,E.vQ)(B,Math.PI*2)&&(B=0);var U=ga.kE(f),W=B/(x-m);W=x-m>0?W:-W;var ne=this.invertDim(U,"y"),de={x:0,y:0};return de.x=this.isTransposed?ne:W,de.y=this.isTransposed?W:ne,de},n.prototype.getCenter=function(){return this.circleCenter},n.prototype.getOneBox=function(){var t=this.startAngle,s=this.endAngle;if(Math.abs(s-t)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var l=[0,Math.cos(t),Math.cos(s)],f=[0,Math.sin(t),Math.sin(s)],d=Math.min(t,s);d<Math.max(t,s);d+=Math.PI/18)l.push(Math.cos(d)),f.push(Math.sin(d));return{minX:Math.min.apply(Math,l),maxX:Math.max.apply(Math,l),minY:Math.min.apply(Math,f),maxY:Math.max.apply(Math,f)}},n}(Of),ws=Hs,fh={},od=function(i){return fh[i.toLowerCase()]},Os=function(i,n){fh[i.toLowerCase()]=n};Os("rect",_v),Os("cartesian",_v),Os("polar",ws),Os("helix",Gc);function zi(i,n,t){var s=new ze.Event(n,t);s.target=i,s.propagationPath.push(i),i.emitDelegation(n,s);for(var l=i.getParent();l;)l.emitDelegation(n,s),s.propagationPath.push(l),l=l.getParent()}var ju=[1,0,0,0,1,0,0,0,1];function Xc(i,n,t){if(t===void 0&&(t=ju),!n)return null;var s=mo.vs(t,[["t",-i.x,-i.y],["r",n],["t",i.x,i.y]]);return s}function kf(i,n){return!i.x&&!i.y?null:mo.vs(n||ju,[["t",i.x,i.y]])}function cl(i){var n=[1,0,0],t=[0,0,0];return co.transformMat3(t,n,i),Math.atan2(t[1],t[0])}function Vo(i,n){var t=[0,0];return ga.kK(t,n,i),t}function fu(i,n){var t=Vo(i,[n.minX,n.minY]),s=Vo(i,[n.maxX,n.minY]),l=Vo(i,[n.minX,n.maxY]),f=Vo(i,[n.maxX,n.maxY]),d=Math.min(t[0],s[0],l[0],f[0]),m=Math.max(t[0],s[0],l[0],f[0]),x=Math.min(t[1],s[1],l[1],f[1]),A=Math.max(t[1],s[1],l[1],f[1]);return{x:d,y:x,minX:d,minY:x,maxX:m,maxY:A,width:m-d,height:A-x}}function Si(i,n,t,s){if(n){var l=Xc({x:t,y:s},n,i.getMatrix());i.setMatrix(l)}}function Zl(i,n,t){var s=kf({x:n,y:t});i.attr("matrix",s)}function hh(i){var n=0,t=0,s=0,l=0;return(0,E.hj)(i)?n=t=s=l=i:(0,E.kJ)(i)&&(n=i[0],s=(0,E.UM)(i[1])?i[0]:i[1],l=(0,E.UM)(i[2])?i[0]:i[2],t=(0,E.UM)(i[3])?s:i[3]),[n,s,l,t]}function Oh(i){for(var n=i.childNodes,t=n.length,s=t-1;s>=0;s--)i.removeChild(n[s])}function Tc(i,n){return!!i.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))}function bu(i){var n=i.start,t=i.end,s=Math.min(n.x,t.x),l=Math.min(n.y,t.y),f=Math.max(n.x,t.x),d=Math.max(n.y,t.y);return{x:s,y:l,minX:s,minY:l,maxX:f,maxY:d,width:f-s,height:d-l}}function Ep(i){var n=i.map(function(m){return m.x}),t=i.map(function(m){return m.y}),s=Math.min.apply(Math,n),l=Math.min.apply(Math,t),f=Math.max.apply(Math,n),d=Math.max.apply(Math,t);return{x:s,y:l,minX:s,minY:l,maxX:f,maxY:d,width:f-s,height:d-l}}function Mc(i,n,t,s){var l=i+t,f=n+s;return{x:i,y:n,width:t,height:s,minX:i,minY:n,maxX:isNaN(l)?0:l,maxY:isNaN(f)?0:f}}function eu(i,n,t){return(1-t)*i+n*t}function fl(i,n,t){return{x:i.x+Math.cos(t)*n,y:i.y+Math.sin(t)*n}}function xv(i,n){var t=n.x-i.x,s=n.y-i.y;return Math.sqrt(t*t+s*s)}var kh=function(i){return new Promise(function(n){setTimeout(n,i)})},Fh=function(i,n,t){return t===void 0&&(t=Math.pow(Number.EPSILON,.5)),[i,n].includes(1/0)?Math.abs(i)===Math.abs(n):Math.abs(i-n)<t};function zd(i,n){var t=Math.max(i.minX,n.minX),s=Math.max(i.minY,n.minY),l=Math.min(i.maxX,n.maxX),f=Math.min(i.maxY,n.maxY);return Mc(t,s,l-t,f-s)}function lc(i,n){var t=Math.min(i.minX,n.minX),s=Math.min(i.minY,n.minY),l=Math.max(i.maxX,n.maxX),f=Math.max(i.maxY,n.maxY);return Mc(t,s,l-t,f-s)}function tu(i){var n=i.getClip(),t=n&&n.getBBox(),s;if(!i.isGroup())s=i.getBBox();else{var l=1/0,f=-1/0,d=1/0,m=-1/0,x=i.getChildren();x.length>0?(0,E.S6)(x,function(A){if(A.get("visible")){if(A.isGroup()&&A.get("children").length===0)return!0;var P=tu(A),k=A.applyToMatrix([P.minX,P.minY,1]),B=A.applyToMatrix([P.minX,P.maxY,1]),U=A.applyToMatrix([P.maxX,P.minY,1]),W=A.applyToMatrix([P.maxX,P.maxY,1]),ne=Math.min(k[0],B[0],U[0],W[0]),de=Math.max(k[0],B[0],U[0],W[0]),ve=Math.min(k[1],B[1],U[1],W[1]),$e=Math.max(k[1],B[1],U[1],W[1]);ne<l&&(l=ne),de>f&&(f=de),ve<d&&(d=ve),$e>m&&(m=$e)}}):(l=0,f=0,d=0,m=0),s=Mc(l,d,f-l,m-d)}return t?zd(s,t):s}function $a(i,n){if(!(!i.getClip()&&!n.getClip())){var t=n.getClip();if(!t){i.setClip(null);return}var s={type:t.get("type"),attrs:t.attr()};i.setClip(s)}}function Cs(i){return i+"px"}function Ql(i,n,t,s){var l=xv(i,n),f=s/l,d=0;return t==="start"?d=0-f:t==="end"&&(d=1+f),{x:eu(i.x,n.x,d),y:eu(i.y,n.y,d)}}var Wu={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},Ff=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.initCfg(),s}return n.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},n.prototype.clear=function(){},n.prototype.update=function(t){var s=this,l=this.get("defaultCfg")||{};(0,E.S6)(t,function(f,d){var m=s.get(d),x=f;m!==f&&((0,E.Kn)(f)&&l[d]&&(x=(0,E.b$)({},l[d],f)),s.set(d,x))}),this.updateInner(t),this.afterUpdate(t)},n.prototype.updateInner=function(t){},n.prototype.afterUpdate=function(t){(0,E.wH)(t,"visible")&&(t.visible?this.show():this.hide()),(0,E.wH)(t,"capture")&&this.setCapture(t.capture)},n.prototype.getLayoutBBox=function(){return this.getBBox()},n.prototype.getLocationType=function(){return this.get("locationType")},n.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},n.prototype.setOffset=function(t,s){this.update({offsetX:t,offsetY:s})},n.prototype.setLocation=function(t){var s=(0,M.pi)({},t);this.update(s)},n.prototype.getLocation=function(){var t=this,s={},l=this.get("locationType"),f=Wu[l];return(0,E.S6)(f,function(d){s[d]=t.get(d)}),s},n.prototype.isList=function(){return!1},n.prototype.isSlider=function(){return!1},n.prototype.init=function(){},n.prototype.initCfg=function(){var t=this,s=this.get("defaultCfg");(0,E.S6)(s,function(l,f){var d=t.get(f);if((0,E.Kn)(d)){var m=(0,E.b$)({},l,d);t.set(f,m)}})},n}(ze.Base),Rc=Ff,Qu="update_status",Su=["visible","tip","delegateObject"],Dh=["container","group","shapesMap","isRegister","isUpdating","destroyed"],ea=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},n.prototype.remove=function(){this.clear();var t=this.get("group");t.remove()},n.prototype.clear=function(){var t=this.get("group");t.clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},n.prototype.getChildComponentById=function(t){var s=this.getElementById(t),l=s&&s.get("component");return l},n.prototype.getElementById=function(t){return this.get("shapesMap")[t]},n.prototype.getElementByLocalId=function(t){var s=this.getElementId(t);return this.getElementById(s)},n.prototype.getElementsByName=function(t){var s=[];return(0,E.S6)(this.get("shapesMap"),function(l){l.get("name")===t&&s.push(l)}),s},n.prototype.getContainer=function(){return this.get("container")},n.prototype.updateInner=function(t){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},n.prototype.render=function(){var t=this.get("offScreenGroup");t||(t=this.offScreenRender());var s=this.get("group");this.updateElements(t,s),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},n.prototype.show=function(){var t=this.get("group");t.show(),this.set("visible",!0)},n.prototype.hide=function(){var t=this.get("group");t.hide(),this.set("visible",!1)},n.prototype.setCapture=function(t){var s=this.get("group");s.set("capture",t),this.set("capture",t)},n.prototype.destroy=function(){this.removeEvent(),this.remove(),i.prototype.destroy.call(this)},n.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},n.prototype.getLayoutBBox=function(){var t=this.get("group"),s=this.getInnerLayoutBBox(),l=t.getTotalMatrix();return l&&(s=fu(l,s)),s},n.prototype.on=function(t,s,l){var f=this.get("group");return f.on(t,s,l),this},n.prototype.off=function(t,s){var l=this.get("group");return l&&l.off(t,s),this},n.prototype.emit=function(t,s){var l=this.get("group");l.emit(t,s)},n.prototype.init=function(){i.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},n.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},n.prototype.delegateEmit=function(t,s){var l=this.get("group");s.target=l,l.emit(t,s),zi(l,t,s)},n.prototype.createOffScreenGroup=function(){var t=this.get("group"),s=t.getGroupBase(),l=new s({delegateObject:this.getDelegateObject()});return l},n.prototype.applyOffset=function(){var t=this.get("offsetX"),s=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t,y:s})},n.prototype.initGroup=function(){var t=this.get("container");this.set("group",t.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},n.prototype.offScreenRender=function(){this.clearOffScreenCache();var t=this.createOffScreenGroup();return this.renderInner(t),this.set("offScreenGroup",t),this.set("offScreenBBox",tu(t)),t},n.prototype.addGroup=function(t,s){this.appendDelegateObject(t,s);var l=t.addGroup(s);return this.get("isRegister")&&this.registerElement(l),l},n.prototype.addShape=function(t,s){this.appendDelegateObject(t,s);var l=t.addShape(s);return this.get("isRegister")&&this.registerElement(l),l},n.prototype.addComponent=function(t,s){var l=s.id,f=s.component,d=(0,M._T)(s,["id","component"]),m=new f((0,M.pi)((0,M.pi)({},d),{id:l,container:t,updateAutoRender:this.get("updateAutoRender")}));return m.init(),m.render(),this.get("isRegister")&&this.registerElement(m.get("group")),m},n.prototype.initEvent=function(){},n.prototype.removeEvent=function(){var t=this.get("group");t.off()},n.prototype.getElementId=function(t){var s=this.get("id"),l=this.get("name");return s+"-"+l+"-"+t},n.prototype.registerElement=function(t){var s=t.get("id");this.get("shapesMap")[s]=t},n.prototype.unregisterElement=function(t){var s=t.get("id");delete this.get("shapesMap")[s]},n.prototype.moveElementTo=function(t,s){var l=kf(s);t.attr("matrix",l)},n.prototype.addAnimation=function(t,s,l){var f=s.attr("opacity");(0,E.UM)(f)&&(f=1),s.attr("opacity",0),s.animate({opacity:f},l)},n.prototype.removeAnimation=function(t,s,l){s.animate({opacity:0},l)},n.prototype.updateAnimation=function(t,s,l,f){s.animate(l,f)},n.prototype.updateElements=function(t,s){var l=this,f=this.get("animate"),d=this.get("animateOption"),m=t.getChildren().slice(0),x;(0,E.S6)(m,function(A){var P=A.get("id"),k=l.getElementById(P),B=A.get("name");if(k)if(A.get("isComponent")){var U=A.get("component"),W=k.get("component"),ne=(0,E.ei)(U.cfg,(0,E.e5)((0,E.XP)(U.cfg),Dh));W.update(ne),k.set(Qu,"update")}else{var de=l.getReplaceAttrs(k,A);f&&d.update?l.updateAnimation(B,k,de,d.update):k.attr(de),A.isGroup()&&l.updateElements(A,k),(0,E.S6)(Su,function(vt){k.set(vt,A.get(vt))}),$a(k,A),x=k,k.set(Qu,"update")}else{s.add(A);var ve=s.getChildren();if(ve.splice(ve.length-1,1),x){var $e=ve.indexOf(x);ve.splice($e+1,0,A)}else ve.unshift(A);if(l.registerElement(A),A.set(Qu,"add"),A.get("isComponent")){var U=A.get("component");U.set("container",s)}else A.isGroup()&&l.registerNewGroup(A);if(x=A,f){var lt=l.get("isInit")?d.appear:d.enter;lt&&l.addAnimation(B,A,lt)}}})},n.prototype.clearUpdateStatus=function(t){var s=t.getChildren();(0,E.S6)(s,function(l){l.set(Qu,null)})},n.prototype.clearOffScreenCache=function(){var t=this.get("offScreenGroup");t&&t.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},n.prototype.getDelegateObject=function(){var t,s=this.get("name"),l=(t={},t[s]=this,t.component=this,t);return l},n.prototype.appendDelegateObject=function(t,s){var l=t.get("delegateObject");s.delegateObject||(s.delegateObject={}),(0,E.CD)(s.delegateObject,l)},n.prototype.getReplaceAttrs=function(t,s){var l=t.attr(),f=s.attr();return(0,E.S6)(l,function(d,m){f[m]===void 0&&(f[m]=void 0)}),f},n.prototype.registerNewGroup=function(t){var s=this,l=t.getChildren();(0,E.S6)(l,function(f){s.registerElement(f),f.set(Qu,"add"),f.isGroup()&&s.registerNewGroup(f)})},n.prototype.deleteElements=function(){var t=this,s=this.get("shapesMap"),l=[];(0,E.S6)(s,function(m,x){!m.get(Qu)||m.destroyed?l.push([x,m]):m.set(Qu,null)});var f=this.get("animate"),d=this.get("animateOption");(0,E.S6)(l,function(m){var x=m[0],A=m[1];if(!A.destroyed){var P=A.get("name");if(f&&d.leave){var k=(0,E.CD)({callback:function(){t.removeElement(A)}},d.leave);t.removeAnimation(P,A,k)}else t.removeElement(A)}delete s[x]})},n.prototype.removeElement=function(t){if(t.get("isGroup")){var s=t.get("component");s&&s.destroy()}t.remove()},n}(Rc),Ei=ea,wl="\u2026";function Ju(i){for(var n=0,t=0;t<i.length;t++)n+=Gu(i,t);return n}function Gu(i,n){return i.charCodeAt(n)>0&&i.charCodeAt(n)<128?1:2}function As(i,n,t){t===void 0&&(t="tail");var s=i.length,l="";if(t==="tail"){for(var f=0,d=0;f<n;){var m=Gu(i,d);if(f+m<=n)l+=i[d],f+=Gu(i,d),d++;else break}l+=wl}else if(t==="head"){for(var f=0,d=s-1;f<n;){var m=Gu(i,d);if(f+m<=n)l+=i[d],f+=Gu(i,d),d--;else break}l=wl+l}else{for(var x="",A="",f=0,P=0,k=s-1;f<n;){var B=Gu(i,P),U=!1;B+f<=n&&(x+=i[P],P++,f+=B,U=!0);var W=Gu(i,k);if(W+f<=n&&(A=i[k]+A,f+=W,k--,U=!0),!U)break}l=x+wl+A}return l}var cc="\u2026",Df=2,ph=400;function zo(i){for(var n=i.map(function(x){var A=x.attr("text");return(0,E.UM)(A)?"":""+A}),t=0,s=0,l=0;l<n.length;l+=1){for(var f=0,d=0;d<=n[l].length;d+=1){var m=n[l].charCodeAt(d);m>=19968&&m<=40869?f+=2:f+=1}f>t&&(t=f,s=l)}return i[s].getBBox().width}function js(i){if(i.length>ph)return zo(i);var n=0;return(0,E.S6)(i,function(t){var s=t.getBBox(),l=s.width;n<l&&(n=l)}),n}function bv(i,n){var t=n.getCanvasBBox();return i?t.width:t.height}function dh(i,n){return i.getBBox().width<n}function Lf(i,n,t,s){var l;s===void 0&&(s="tail");var f=(l=n.attr("text"))!==null&&l!==void 0?l:"";if(s==="tail"){var d=(0,E.ei)(n.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),m=(0,E.Lo)(f,t,d,"\u2026");return f!==m?(n.attr("text",m),n.set("tip",f),!0):(n.set("tip",null),!1)}var x=bv(i,n),A=Ju(f),P=!1;if(t<x){var k=Math.floor(t/x*A)-Df,B=void 0;k>=0?B=As(f,k,s):B=cc,B&&(n.attr("text",B),P=!0)}return P?n.set("tip",f):n.set("tip",null),P}function fc(i,n){var t=n.x,s=n.y,l=n.content,f=n.style,d=n.id,m=n.name,x=n.rotate,A=n.maxLength,P=n.autoEllipsis,k=n.isVertical,B=n.ellipsisPosition,U=n.background,W=i.addGroup({id:d+"-group",name:m+"-group",attrs:{x:t,y:s}}),ne=W.addShape({type:"text",id:d,name:m,attrs:(0,M.pi)({x:0,y:0,text:l},f)}),de=hh((0,E.U2)(U,"padding",0));if(A&&P){var ve=A-(de[1]+de[3]);Lf(!k,ne,ve,B)}if(U){var $e=(0,E.U2)(U,"style",{}),lt=ne.getCanvasBBox(),vt=lt.minX,Ot=lt.minY,fr=lt.width,Tr=lt.height,zr=W.addShape("rect",{id:d+"-bg",name:d+"-bg",attrs:(0,M.pi)({x:vt-de[3],y:Ot-de[0],width:fr+de[1]+de[3],height:Tr+de[0]+de[2]},$e)});zr.toBack()}Zl(W,t,s),Si(W,x,t,s)}var Ra={fontFamily:`
  BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4,descriptionIconStroke:"#fff",descriptionIconFill:"rgba(58, 73, 101, .25)"},vh=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:Ra.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:Ra.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:Ra.lineColor,lineWidth:1}}}})},n.prototype.renderInner=function(t){this.renderLine(t),this.get("text")&&this.renderLabel(t)},n.prototype.renderLine=function(t){var s=this.get("start"),l=this.get("end"),f=this.get("style");this.addShape(t,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:(0,M.pi)({x1:s.x,y1:s.y,x2:l.x,y2:l.y},f)})},n.prototype.getLabelPoint=function(t,s,l){var f;return l==="start"?f=0:l==="center"?f=.5:(0,E.HD)(l)&&l.indexOf("%")!==-1?f=parseInt(l,10)/100:(0,E.hj)(l)?f=l:f=1,(f>1||f<0)&&(f=1),{x:eu(t.x,s.x,f),y:eu(t.y,s.y,f)}},n.prototype.renderLabel=function(t){var s=this.get("text"),l=this.get("start"),f=this.get("end"),d=s.position,m=s.content,x=s.style,A=s.offsetX,P=s.offsetY,k=s.autoRotate,B=s.maxLength,U=s.autoEllipsis,W=s.ellipsisPosition,ne=s.background,de=s.isVertical,ve=de===void 0?!1:de,$e=this.getLabelPoint(l,f,d),lt=$e.x+A,vt=$e.y+P,Ot={id:this.getElementId("line-text"),name:"annotation-line-text",x:lt,y:vt,content:m,style:x,maxLength:B,autoEllipsis:U,ellipsisPosition:W,background:ne,isVertical:ve};if(k){var fr=[f.x-l.x,f.y-l.y];Ot.rotate=Math.atan2(fr[1],fr[0])}fc(t,Ot)},n}(Ei),$c=vh,sd=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:Ra.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:Ra.fontFamily}}})},n.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},n.prototype.renderInner=function(t){var s=this.getLocation(),l=s.x,f=s.y,d=this.get("content"),m=this.get("style"),x=this.getElementId("text"),A=this.get("name")+"-text",P=this.get("maxLength"),k=this.get("autoEllipsis"),B=this.get("isVertical"),U=this.get("ellipsisPosition"),W=this.get("background"),ne=this.get("rotate"),de={id:x,name:A,x:l,y:f,content:d,style:m,maxLength:P,autoEllipsis:k,isVertical:B,ellipsisPosition:U,background:W,rotate:ne};fc(t,de)},n.prototype.resetLocation=function(){var t=this.getElementByLocalId("text-group");if(t){var s=this.getLocation(),l=s.x,f=s.y,d=this.get("rotate");Zl(t,l,f),Si(t,d,l,f)}},n}(Ei),Bf=sd,Lh=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,style:{stroke:"#999",lineWidth:1}})},n.prototype.renderInner=function(t){this.renderArc(t)},n.prototype.getArcPath=function(){var t=this.getLocation(),s=t.center,l=t.radius,f=t.startAngle,d=t.endAngle,m=fl(s,l,f),x=fl(s,l,d),A=d-f>Math.PI?1:0,P=[["M",m.x,m.y]];if(d-f===Math.PI*2){var k=fl(s,l,f+Math.PI);P.push(["A",l,l,0,A,1,k.x,k.y]),P.push(["A",l,l,0,A,1,x.x,x.y])}else P.push(["A",l,l,0,A,1,x.x,x.y]);return P},n.prototype.renderArc=function(t){var s=this.getArcPath(),l=this.get("style");this.addShape(t,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:(0,M.pi)({path:s},l)})},n}(Ei),Ud=Lh,fn=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:Ra.regionColor,opacity:.4}}})},n.prototype.renderInner=function(t){this.renderRegion(t)},n.prototype.renderRegion=function(t){var s=this.get("start"),l=this.get("end"),f=this.get("style"),d=bu({start:s,end:l});this.addShape(t,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:(0,M.pi)({x:d.x,y:d.y,width:d.width,height:d.height},f)})},n}(Ei),vr=fn,Fe=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},n.prototype.renderInner=function(t){this.renderImage(t)},n.prototype.getImageAttrs=function(){var t=this.get("start"),s=this.get("end"),l=this.get("style"),f=bu({start:t,end:s}),d=this.get("src");return(0,M.pi)({x:f.x,y:f.y,img:d,width:f.width,height:f.height},l)},n.prototype.renderImage=function(t){this.addShape(t,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},n}(Ei),Yc=Fe,$t=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:Ra.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:Ra.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:Ra.fontFamily}}}})},n.prototype.renderInner=function(t){(0,E.U2)(this.get("line"),"display")&&this.renderLine(t),(0,E.U2)(this.get("text"),"display")&&this.renderText(t),(0,E.U2)(this.get("point"),"display")&&this.renderPoint(t),this.get("autoAdjust")&&this.autoAdjust(t)},n.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},n.prototype.renderPoint=function(t){var s=this.getShapeAttrs().point;this.addShape(t,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:s})},n.prototype.renderLine=function(t){var s=this.getShapeAttrs().line;this.addShape(t,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:s})},n.prototype.renderText=function(t){var s=this.getShapeAttrs().text,l=s.x,f=s.y,d=s.text,m=(0,M._T)(s,["x","y","text"]),x=this.get("text"),A=x.background,P=x.maxLength,k=x.autoEllipsis,B=x.isVertival,U=x.ellipsisPosition,W={x:l,y:f,id:this.getElementId("text"),name:"annotation-text",content:d,style:m,background:A,maxLength:P,autoEllipsis:k,isVertival:B,ellipsisPosition:U};fc(t,W)},n.prototype.autoAdjust=function(t){var s=this.get("direction"),l=this.get("x"),f=this.get("y"),d=(0,E.U2)(this.get("line"),"length",0),m=this.get("coordinateBBox"),x=t.getBBox(),A=x.minX,P=x.maxX,k=x.minY,B=x.maxY,U=t.findById(this.getElementId("text-group")),W=t.findById(this.getElementId("text")),ne=t.findById(this.getElementId("line"));if(m&&U){var de=U.attr("x"),ve=U.attr("y"),$e=W.getCanvasBBox(),lt=$e.width,vt=$e.height,Ot=0,fr=0;if(l+A<=m.minX)if(s==="leftward")Ot=1;else{var Tr=m.minX-(l+A);de=U.attr("x")+Tr}else if(l+P>=m.maxX)if(s==="rightward")Ot=-1;else{var Tr=l+P-m.maxX;de=U.attr("x")-Tr}if(Ot&&(ne&&ne.attr("path",[["M",0,0],["L",d*Ot,0]]),de=(d+2+lt)*Ot),f+k<=m.minY)if(s==="upward")fr=1;else{var Tr=m.minY-(f+k);ve=U.attr("y")+Tr}else if(f+B>=m.maxY)if(s==="downward")fr=-1;else{var Tr=f+B-m.maxY;ve=U.attr("y")-Tr}fr&&(ne&&ne.attr("path",[["M",0,0],["L",0,d*fr]]),ve=(d+2+vt)*fr),(de!==U.attr("x")||ve!==U.attr("y"))&&Zl(U,de,ve)}},n.prototype.getShapeAttrs=function(){var t=(0,E.U2)(this.get("line"),"display"),s=(0,E.U2)(this.get("point"),"style",{}),l=(0,E.U2)(this.get("line"),"style",{}),f=(0,E.U2)(this.get("text"),"style",{}),d=this.get("direction"),m=t?(0,E.U2)(this.get("line"),"length",0):0,x=0,A=0,P="top",k="start";switch(d){case"upward":A=-1,P="bottom";break;case"downward":A=1,P="top";break;case"leftward":x=-1,k="end";break;case"rightward":x=1,k="start";break}return{point:(0,M.pi)({x:0,y:0},s),line:(0,M.pi)({path:[["M",0,0],["L",m*x,m*A]]},l),text:(0,M.pi)({x:(m+2)*x,y:(m+2)*A,text:(0,E.U2)(this.get("text"),"content",""),textBaseline:P,textAlign:k},f)}},n}(Ei),ud=$t,Ws=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:Ra.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:Ra.textColor,fontFamily:Ra.fontFamily}}}})},n.prototype.renderInner=function(t){var s=(0,E.U2)(this.get("region"),"style",{}),l=(0,E.U2)(this.get("text"),"style",{}),f=this.get("lineLength")||0,d=this.get("points");if(d.length){var m=Ep(d),x=[];x.push(["M",d[0].x,m.minY-f]),d.forEach(function(P){x.push(["L",P.x,P.y])}),x.push(["L",d[d.length-1].x,d[d.length-1].y-f]),this.addShape(t,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:(0,M.pi)({path:x},s)});var A=(0,M.pi)({id:this.getElementId("text"),name:"annotation-text",x:(m.minX+m.maxX)/2,y:m.minY-f},this.get("text"));fc(t,A)}},n}(Ei),Vl=Ws,Bh=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},n.prototype.renderInner=function(t){var s=this,l=this.get("start"),f=this.get("end"),d=this.addGroup(t,{id:this.getElementId("region-filter"),capture:!1});(0,E.S6)(this.get("shapes"),function(x,A){var P=x.get("type"),k=(0,E.d9)(x.attr());s.adjustShapeAttrs(k),s.addShape(d,{id:s.getElementId("shape-"+P+"-"+A),capture:!1,type:P,attrs:k})});var m=bu({start:l,end:f});d.setClip({type:"rect",attrs:{x:m.minX,y:m.minY,width:m.width,height:m.height}})},n.prototype.adjustShapeAttrs=function(t){var s=this.get("color");t.fill&&(t.fill=t.fillStyle=s),t.stroke=t.strokeStyle=s},n}(Ei),Cl=Bh,wp=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"shape",draw:E.ZT})},n.prototype.renderInner=function(t){var s=this.get("render");(0,E.mf)(s)&&s(t)},n}(Ei),Cp=wp;function b(i,n,t){var s;try{s=window.getComputedStyle?window.getComputedStyle(i,null)[n]:i.style[n]}catch(l){}finally{s=s===void 0?t:s}return s}function T(i,n){var t=b(i,"width",n);return t==="auto"&&(t=i.offsetWidth),parseFloat(t)}function C(i,n){var t=T(i,n),s=parseFloat(b(i,"borderLeftWidth"))||0,l=parseFloat(b(i,"paddingLeft"))||0,f=parseFloat(b(i,"paddingRight"))||0,d=parseFloat(b(i,"borderRightWidth"))||0,m=parseFloat(b(i,"marginRight"))||0,x=parseFloat(b(i,"marginLeft"))||0;return t+s+d+l+f+x+m}function I(i,n){var t=b(i,"height",n);return t==="auto"&&(t=i.offsetHeight),parseFloat(t)}function Z(i,n){var t=I(i,n),s=parseFloat(b(i,"borderTopWidth"))||0,l=parseFloat(b(i,"paddingTop"))||0,f=parseFloat(b(i,"paddingBottom"))||0,d=parseFloat(b(i,"borderBottomWidth"))||0,m=parseFloat(b(i,"marginTop"))||0,x=parseFloat(b(i,"marginBottom"))||0;return t+s+d+l+f+m+x}var q=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},n.prototype.getContainer=function(){return this.get("container")},n.prototype.show=function(){var t=this.get("container");t.style.display="",this.set("visible",!0)},n.prototype.hide=function(){var t=this.get("container");t.style.display="none",this.set("visible",!1)},n.prototype.setCapture=function(t){var s=this.getContainer(),l=t?"auto":"none";s.style.pointerEvents=l,this.set("capture",t)},n.prototype.getBBox=function(){var t=this.getContainer(),s=parseFloat(t.style.left)||0,l=parseFloat(t.style.top)||0;return Mc(s,l,t.clientWidth,t.clientHeight)},n.prototype.clear=function(){var t=this.get("container");Oh(t)},n.prototype.destroy=function(){this.removeEvent(),this.removeDom(),i.prototype.destroy.call(this)},n.prototype.init=function(){i.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},n.prototype.initCapture=function(){this.setCapture(this.get("capture"))},n.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},n.prototype.initDom=function(){},n.prototype.initContainer=function(){var t=this.get("container");if((0,E.UM)(t)){t=this.createDom();var s=this.get("parent");(0,E.HD)(s)&&(s=document.getElementById(s),this.set("parent",s)),s.appendChild(t),this.get("containerId")&&t.setAttribute("id",this.get("containerId")),this.set("container",t)}else(0,E.HD)(t)&&(t=document.getElementById(t),this.set("container",t));this.get("parent")||this.set("parent",t.parentNode)},n.prototype.resetStyles=function(){var t=this.get("domStyles"),s=this.get("defaultStyles");t?t=(0,E.b$)({},s,t):t=s,this.set("domStyles",t)},n.prototype.applyStyles=function(){var t=this.get("domStyles");if(t){var s=this.getContainer();this.applyChildrenStyles(s,t);var l=this.get("containerClassName");if(l&&Tc(s,l)){var f=t[l];(0,ie.Z)(s,f)}}},n.prototype.applyChildrenStyles=function(t,s){(0,E.S6)(s,function(l,f){var d=t.getElementsByClassName(f);(0,E.S6)(d,function(m){(0,ie.Z)(m,l)})})},n.prototype.applyStyle=function(t,s){var l=this.get("domStyles");(0,ie.Z)(s,l[t])},n.prototype.createDom=function(){var t=this.get("containerTpl");return(0,Ze.Z)(t)},n.prototype.initEvent=function(){},n.prototype.removeDom=function(){var t=this.get("container");t&&t.parentNode&&t.parentNode.removeChild(t)},n.prototype.removeEvent=function(){},n.prototype.updateInner=function(t){(0,E.wH)(t,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},n.prototype.resetPosition=function(){},n}(Rc),re=q,_e=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation" style="position:absolute"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},n.prototype.render=function(){var t=this.getContainer(),s=this.get("html");Oh(t);var l=(0,E.mf)(s)?s(t):s;if((0,E.kK)(l))t.appendChild(l);else if((0,E.HD)(l)||(0,E.hj)(l)){var f=(0,Ze.Z)(""+l);f&&t.appendChild(f)}this.resetPosition()},n.prototype.resetPosition=function(){var t=this.getContainer(),s=this.getLocation(),l=s.x,f=s.y,d=this.get("alignX"),m=this.get("alignY"),x=this.get("offsetX"),A=this.get("offsetY"),P=C(t),k=Z(t),B={x:l,y:f};d==="middle"?B.x-=Math.round(P/2):d==="right"&&(B.x-=Math.round(P)),m==="middle"?B.y-=Math.round(k/2):m==="bottom"&&(B.y-=Math.round(k)),x&&(B.x+=x),A&&(B.y+=A),(0,ie.Z)(t,{position:"absolute",left:B.x+"px",top:B.y+"px",zIndex:this.get("zIndex")})},n}(re),qe=_e;function yt(i,n,t){var s=n+"Style",l=null;return(0,E.S6)(t,function(f,d){i[d]&&f[s]&&(l||(l={}),(0,E.CD)(l,f[s]))}),l}var Ut=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:Ra.lineColor}},tickLine:{style:{lineWidth:1,stroke:Ra.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:Ra.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:Ra.textColor,fontFamily:Ra.fontFamily,fontWeight:"normal"},offset:10,offsetX:0,offsetY:0},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:Ra.textColor,textBaseline:"middle",fontFamily:Ra.fontFamily,textAlign:"center"},iconStyle:{fill:Ra.descriptionIconFill,stroke:Ra.descriptionIconStroke},description:""},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:Ra.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},n.prototype.renderInner=function(t){this.get("line")&&this.drawLine(t),this.drawTicks(t),this.get("title")&&this.drawTitle(t)},n.prototype.isList=function(){return!0},n.prototype.getItems=function(){return this.get("ticks")},n.prototype.setItems=function(t){this.update({ticks:t})},n.prototype.updateItem=function(t,s){(0,E.CD)(t,s),this.clear(),this.render()},n.prototype.clearItems=function(){var t=this.getElementByLocalId("label-group");t&&t.clear()},n.prototype.setItemState=function(t,s,l){t[s]=l,this.updateTickStates(t)},n.prototype.hasState=function(t,s){return!!t[s]},n.prototype.getItemStates=function(t){var s=this.get("tickStates"),l=[];return(0,E.S6)(s,function(f,d){t[d]&&l.push(d)}),l},n.prototype.clearItemsState=function(t){var s=this,l=this.getItemsByState(t);(0,E.S6)(l,function(f){s.setItemState(f,t,!1)})},n.prototype.getItemsByState=function(t){var s=this,l=this.getItems();return(0,E.hX)(l,function(f){return s.hasState(f,t)})},n.prototype.getSidePoint=function(t,s){var l=this,f=l.getSideVector(s,t);return{x:t.x+f[0],y:t.y+f[1]}},n.prototype.getTextAnchor=function(t){var s;return(0,E.vQ)(t[0],0)?s="center":t[0]>0?s="start":t[0]<0&&(s="end"),s},n.prototype.getTextBaseline=function(t){var s;return(0,E.vQ)(t[1],0)?s="middle":t[1]>0?s="top":t[1]<0&&(s="bottom"),s},n.prototype.processOverlap=function(t){},n.prototype.drawLine=function(t){var s=this.getLinePath(),l=this.get("line");this.addShape(t,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:(0,E.CD)({path:s},l.style)})},n.prototype.getTickLineItems=function(t){var s=this,l=[],f=this.get("tickLine"),d=f.alignTick,m=f.length,x=1,A=t.length;return A>=2&&(x=t[1].value-t[0].value),(0,E.S6)(t,function(P){var k=P.point;d||(k=s.getTickPoint(P.value-x/2));var B=s.getSidePoint(k,m);l.push({startPoint:k,tickValue:P.value,endPoint:B,tickId:P.id,id:"tickline-"+P.id})}),l},n.prototype.getSubTickLineItems=function(t){var s=[],l=this.get("subTickLine"),f=l.count,d=t.length;if(d>=2)for(var m=0;m<d-1;m++)for(var x=t[m],A=t[m+1],P=0;P<f;P++){var k=(P+1)/(f+1),B=(1-k)*x.tickValue+k*A.tickValue,U=this.getTickPoint(B),W=this.getSidePoint(U,l.length);s.push({startPoint:U,endPoint:W,tickValue:B,id:"sub-"+x.id+"-"+P})}return s},n.prototype.getTickLineAttrs=function(t,s,l,f){var d=this.get(s).style,m={points:[t.startPoint,t.endPoint]},x=(0,E.U2)(this.get("theme"),["tickLine","style"],{});d=(0,E.mf)(d)?(0,E.CD)({},x,d(m,l,f)):d;var A=t.startPoint,P=t.endPoint;return(0,M.pi)({x1:A.x,y1:A.y,x2:P.x,y2:P.y},d)},n.prototype.drawTick=function(t,s,l,f,d){this.addShape(s,{type:"line",id:this.getElementId(t.id),name:"axis-"+l,attrs:this.getTickLineAttrs(t,l,f,d)})},n.prototype.drawTickLines=function(t){var s=this,l=this.get("ticks"),f=this.get("subTickLine"),d=this.getTickLineItems(l),m=this.addGroup(t,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),x=this.get("tickLine");if((0,E.S6)(d,function(P,k){if(x.displayWithLabel){var B=s.getElementId("label-"+P.tickId);t.findById(B)&&s.drawTick(P,m,"tickLine",k,d)}else s.drawTick(P,m,"tickLine",k,d)}),f){var A=this.getSubTickLineItems(d);(0,E.S6)(A,function(P,k){s.drawTick(P,m,"subTickLine",k,A)})}},n.prototype.processTicks=function(){var t=this,s=this.get("ticks");(0,E.S6)(s,function(l){l.point=t.getTickPoint(l.value),(0,E.UM)(l.id)&&(l.id=l.name)})},n.prototype.drawTicks=function(t){var s=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(t),this.get("tickLine")&&this.drawTickLines(t);var l=this.get("ticks");(0,E.S6)(l,function(f){s.applyTickStates(f,t)})},n.prototype.optimizeTicks=function(){var t=this.get("optimize"),s=this.get("ticks");if(t&&t.enable&&t.threshold>0){var l=(0,E.dp)(s);if(l>t.threshold){var f=Math.ceil(l/t.threshold),d=s.filter(function(m,x){return x%f===0});this.set("ticks",d),this.set("originalTicks",s)}}},n.prototype.getLabelAttrs=function(t,s,l){var f=this.get("label"),d=f.offset,m=f.offsetX,x=f.offsetY,A=f.rotate,P=f.formatter,k=this.getSidePoint(t.point,d),B=this.getSideVector(d,k),U=P?P(t.name,t,s):t.name,W=f.style;W=(0,E.mf)(W)?(0,E.U2)(this.get("theme"),["label","style"],{}):W;var ne=(0,E.CD)({x:k.x+m,y:k.y+x,text:U,textAlign:this.getTextAnchor(B),textBaseline:this.getTextBaseline(B)},W);return A&&(ne.matrix=Xc(k,A)),ne},n.prototype.drawLabels=function(t){var s=this,l=this.get("ticks"),f=this.addGroup(t,{name:"axis-label-group",id:this.getElementId("label-group")});(0,E.S6)(l,function(B,U){s.addShape(f,{type:"text",name:"axis-label",id:s.getElementId("label-"+B.id),attrs:s.getLabelAttrs(B,U,l),delegateObject:{tick:B,item:B,index:U}})}),this.processOverlap(f);var d=f.getChildren(),m=(0,E.U2)(this.get("theme"),["label","style"],{}),x=this.get("label"),A=x.style,P=x.formatter;if((0,E.mf)(A)){var k=d.map(function(B){return(0,E.U2)(B.get("delegateObject"),"tick")});(0,E.S6)(d,function(B,U){var W=B.get("delegateObject").tick,ne=P?P(W.name,W,U):W.name,de=(0,E.CD)({},m,A(ne,U,k));B.attr(de)})}},n.prototype.getTitleAttrs=function(){var t=this.get("title"),s=t.style,l=t.position,f=t.offset,d=t.spacing,m=d===void 0?0:d,x=t.autoRotate,A=s.fontSize,P=.5;l==="start"?P=0:l==="end"&&(P=1);var k=this.getTickPoint(P),B=this.getSidePoint(k,f||m+A/2),U=(0,E.CD)({x:B.x,y:B.y,text:t.text},s),W=t.rotate,ne=W;if((0,E.UM)(W)&&x){var de=this.getAxisVector(k),ve=[1,0];ne=mo.Dg(de,ve,!0)}if(ne){var $e=Xc(B,ne);U.matrix=$e}return U},n.prototype.drawTitle=function(t){var s,l=this.getTitleAttrs(),f=this.addShape(t,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:l});!((s=this.get("title"))===null||s===void 0)&&s.description&&this.drawDescriptionIcon(t,f,l.matrix)},n.prototype.drawDescriptionIcon=function(t,s,l){var f=this.addGroup(t,{name:"axis-description",id:this.getElementById("description")}),d=s.getBBox(),m=d.maxX,x=d.maxY,A=d.height,P=this.get("title").iconStyle,k=4,B=A/2,U=B/6,W=m+k,ne=x-A/2,de=[W+B,ne-B],ve=de[0],$e=de[1],lt=[ve+B,$e+B],vt=lt[0],Ot=lt[1],fr=[ve,Ot+B],Tr=fr[0],zr=fr[1],cn=[W,$e+B],Qr=cn[0],On=cn[1],Qn=[W+B,ne-A/4],Hi=Qn[0],oa=Qn[1],eo=[Hi,oa+U],Nn=eo[0],Di=eo[1],sa=[Nn,Di+U],Li=sa[0],$i=sa[1],Da=[Li,$i+B*3/4],xo=Da[0],Bo=Da[1];this.addShape(f,{type:"path",id:this.getElementId("title-description-icon"),name:"axis-title-description-icon",attrs:(0,M.pi)({path:[["M",ve,$e],["A",B,B,0,0,1,vt,Ot],["A",B,B,0,0,1,Tr,zr],["A",B,B,0,0,1,Qr,On],["A",B,B,0,0,1,ve,$e],["M",Hi,oa],["L",Nn,Di],["M",Li,$i],["L",xo,Bo]],lineWidth:U,matrix:l},P)}),this.addShape(f,{type:"rect",id:this.getElementId("title-description-rect"),name:"axis-title-description-rect",attrs:{x:W,y:ne-A/2,width:A,height:A,stroke:"#000",fill:"#000",opacity:0,matrix:l,cursor:"pointer"}})},n.prototype.applyTickStates=function(t,s){var l=this.getItemStates(t);if(l.length){var f=this.get("tickStates"),d=this.getElementId("label-"+t.id),m=s.findById(d);if(m){var x=yt(t,"label",f);x&&m.attr(x)}var A=this.getElementId("tickline-"+t.id),P=s.findById(A);if(P){var k=yt(t,"tickLine",f);k&&P.attr(k)}}},n.prototype.updateTickStates=function(t){var s=this.getItemStates(t),l=this.get("tickStates"),f=this.get("label"),d=this.getElementByLocalId("label-"+t.id),m=this.get("tickLine"),x=this.getElementByLocalId("tickline-"+t.id);if(s.length){if(d){var A=yt(t,"label",l);A&&d.attr(A)}if(x){var P=yt(t,"tickLine",l);P&&x.attr(P)}}else d&&d.attr(f.style),x&&x.attr(m.style)},n}(Ei),Zt=Ut;function Ht(i,n,t,s){var l=n.getChildren(),f=!1;return(0,E.S6)(l,function(d){var m=Lf(i,d,t,s);f=f||m}),f}function sr(){return Er}function or(i,n,t){return Ht(i,n,t,"head")}function Er(i,n,t){return Ht(i,n,t,"tail")}function rr(i,n,t){return Ht(i,n,t,"middle")}function wr(i){var n=i.attr("matrix");return n&&n[0]!==1}function Fr(i){var n=wr(i)?cl(i.attr("matrix")):0;return n%360}function Wr(i,n,t,s){var l=!1,f=Fr(n),d=Math.abs(i?t.attr("y")-n.attr("y"):t.attr("x")-n.attr("x")),m=(i?t.attr("y")>n.attr("y"):t.attr("x")>n.attr("x"))?n.getBBox():t.getBBox();if(i){var x=Math.abs(Math.cos(f));Fh(x,0,Math.PI/180)?l=m.width+s>d:l=m.height/x+s>d}else{var x=Math.abs(Math.sin(f));Fh(x,0,Math.PI/180)?l=m.width+s>d:l=m.height/x+s>d}return l}function hn(i,n,t,s){var l=(s==null?void 0:s.minGap)||0,f=n.getChildren().slice().filter(function(W){return W.get("visible")});if(!f.length)return!1;var d=!1;t&&f.reverse();for(var m=f.length,x=f[0],A=x,P=1;P<m;P++){var k=f[P],B=k.getBBox(),U=Wr(i,A,k,l);U?(k.hide(),d=!0):A=k}return d}function an(i,n,t){var s=(t==null?void 0:t.minGap)||0,l=n.getChildren().slice();if(l.length<2)return!1;var f=!1,d=l[0],m=d.getBBox(),x=l[1],A=l.length,P=Fr(d),k=Math.abs(i?x.attr("y")-d.attr("y"):x.attr("x")-d.attr("x")),B=0;if(i){var U=Math.abs(Math.cos(P));if(Fh(U,0,Math.PI/180)){var W=js(l);B=(W+s)/k}else B=(m.height/U+s)/k}else{var U=Math.abs(Math.sin(P));if(Fh(U,0,Math.PI/180)){var W=js(l);B=(W+s)/k}else B=(m.height/U+s)/k}if(B>1){B=Math.ceil(B);for(var ne=0;ne<A;ne++)ne%B!==0&&(l[ne].hide(),f=!0)}return f}function bn(){return Ii}function In(i,n,t,s){return hn(i,n,!1,s)}function pi(i,n,t,s){return hn(i,n,!0,s)}function ei(i,n,t,s){var l=(s==null?void 0:s.minGap)||0,f=n.getChildren().slice();if(f.length<=2)return!1;for(var d=!1,m=f.length,x=f[0],A=f[m-1],P=x,k=1;k<m-1;k++){var B=f[k],U=B.getBBox(),W=Wr(i,P,B,l);W?(B.hide(),d=!0):P=B}var ne=Wr(i,P,A,l);return ne&&(P.hide(),d=!0),d}function Ii(i,n,t,s){var l=an(i,n,s);return hn(i,n,!1)&&(l=!0),l}function ia(i,n,t,s){var l=n.getChildren().slice(),f=an(i,n,s);if(l.length>2){var d=l[0],m=l[l.length-1];d.get("visible")||(d.show(),hn(i,n,!1,s)&&(f=!0)),m.get("visible")||(m.show(),hn(i,n,!0,s)&&(f=!0))}return f}function la(i,n){(0,E.S6)(i,function(t){var s=t.attr("x"),l=t.attr("y"),f=Xc({x:s,y:l},n);t.attr("matrix",f)})}function Ki(i,n,t,s){var l=n.getChildren();if(!l.length||!i&&l.length<2)return!1;var f=js(l),d=!1;if(i)d=!!t&&f>t;else{var m=Math.abs(l[1].attr("x")-l[0].attr("x"));d=f>m}if(d){var x=s(t,f);la(l,x)}return d}function bo(){return Ni}function Ni(i,n,t,s){return Ki(i,n,t,function(){return(0,E.hj)(s)?s:i?Ra.verticalAxisRotate:Ra.horizontalAxisRotate})}function Oa(i,n,t){return Ki(i,n,t,function(s,l){if(!s)return i?Ra.verticalAxisRotate:Ra.horizontalAxisRotate;if(i)return-Math.acos(s/l);var f=0;return s>l?f=Math.PI/4:(f=Math.asin(s/l),f>Math.PI/4&&(f=Math.PI/4)),f})}var La=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{type:"line",locationType:"region",start:null,end:null})},n.prototype.getLinePath=function(){var t=this.get("start"),s=this.get("end"),l=[];return l.push(["M",t.x,t.y]),l.push(["L",s.x,s.y]),l},n.prototype.getInnerLayoutBBox=function(){var t=this.get("start"),s=this.get("end"),l=i.prototype.getInnerLayoutBBox.call(this),f=Math.min(t.x,s.x,l.x),d=Math.min(t.y,s.y,l.y),m=Math.max(t.x,s.x,l.maxX),x=Math.max(t.y,s.y,l.maxY);return{x:f,y:d,minX:f,minY:d,maxX:m,maxY:x,width:m-f,height:x-d}},n.prototype.isVertical=function(){var t=this.get("start"),s=this.get("end");return(0,E.vQ)(t.x,s.x)},n.prototype.isHorizontal=function(){var t=this.get("start"),s=this.get("end");return(0,E.vQ)(t.y,s.y)},n.prototype.getTickPoint=function(t){var s=this,l=s.get("start"),f=s.get("end"),d=f.x-l.x,m=f.y-l.y;return{x:l.x+d*t,y:l.y+m*t}},n.prototype.getSideVector=function(t){var s=this.getAxisVector(),l=ga.Fv([0,0],s),f=this.get("verticalFactor"),d=[l[1],l[0]*-1];return ga.bA([0,0],d,t*f)},n.prototype.getAxisVector=function(){var t=this.get("start"),s=this.get("end");return[s.x-t.x,s.y-t.y]},n.prototype.processOverlap=function(t){var s=this,l=this.isVertical(),f=this.isHorizontal();if(!(!l&&!f)){var d=this.get("label"),m=this.get("title"),x=this.get("verticalLimitLength"),A=d.offset,P=x,k=0,B=0;m&&(k=m.style.fontSize,B=m.spacing),P&&(P=P-A-B-k);var U=this.get("overlapOrder");if((0,E.S6)(U,function(de){d[de]&&s.canProcessOverlap(de)&&s.autoProcessOverlap(de,d[de],t,P)}),m&&(0,E.UM)(m.offset)){var W=t.getCanvasBBox(),ne=l?W.width:W.height;m.offset=A+ne+B+k/2}}},n.prototype.canProcessOverlap=function(t){var s=this.get("label");return t==="autoRotate"?(0,E.UM)(s.rotate):!0},n.prototype.autoProcessOverlap=function(t,s,l,f){var d=this,m=this.isVertical(),x=!1,A=K[t];if(s===!0){var P=this.get("label");x=A.getDefault()(m,l,f)}else if((0,E.mf)(s))x=s(m,l,f);else if((0,E.Kn)(s)){var k=s;A[k.type]&&(x=A[k.type](m,l,f,k.cfg))}else A[s]&&(x=A[s](m,l,f));if(t==="autoRotate"){if(x){var B=l.getChildren(),U=this.get("verticalFactor");(0,E.S6)(B,function(ne){var de=ne.attr("textAlign");if(de==="center"){var ve=U>0?"end":"start";ne.attr("textAlign",ve)}})}}else if(t==="autoHide"){var W=l.getChildren().slice(0);(0,E.S6)(W,function(ne){ne.get("visible")||(d.get("isRegister")&&d.unregisterElement(ne),ne.remove())})}},n}(Zt),Ia=La,fa=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},n.prototype.getLinePath=function(){var t=this.get("center"),s=t.x,l=t.y,f=this.get("radius"),d=f,m=this.get("startAngle"),x=this.get("endAngle"),A=[];if(Math.abs(x-m)===Math.PI*2)A=[["M",s,l-d],["A",f,d,0,1,1,s,l+d],["A",f,d,0,1,1,s,l-d],["Z"]];else{var P=this.getCirclePoint(m),k=this.getCirclePoint(x),B=Math.abs(x-m)>Math.PI?1:0,U=m>x?0:1;A=[["M",s,l],["L",P.x,P.y],["A",f,d,0,B,U,k.x,k.y],["L",s,l]]}return A},n.prototype.getTickPoint=function(t){var s=this.get("startAngle"),l=this.get("endAngle"),f=s+(l-s)*t;return this.getCirclePoint(f)},n.prototype.getSideVector=function(t,s){var l=this.get("center"),f=[s.x-l.x,s.y-l.y],d=this.get("verticalFactor"),m=ga.kE(f);return ga.bA(f,f,d*t/m),f},n.prototype.getAxisVector=function(t){var s=this.get("center"),l=[t.x-s.x,t.y-s.y];return[l[1],-1*l[0]]},n.prototype.getCirclePoint=function(t,s){var l=this.get("center");return s=s||this.get("radius"),{x:l.x+Math.cos(t)*s,y:l.y+Math.sin(t)*s}},n.prototype.canProcessOverlap=function(t){var s=this.get("label");return t==="autoRotate"?(0,E.UM)(s.rotate):!0},n.prototype.processOverlap=function(t){var s=this,l=this.get("label"),f=this.get("title"),d=this.get("verticalLimitLength"),m=l.offset,x=d,A=0,P=0;f&&(A=f.style.fontSize,P=f.spacing),x&&(x=x-m-P-A);var k=this.get("overlapOrder");if((0,E.S6)(k,function(U){l[U]&&s.canProcessOverlap(U)&&s.autoProcessOverlap(U,l[U],t,x)}),f&&(0,E.UM)(f.offset)){var B=t.getCanvasBBox().height;f.offset=m+B+P+A/2}},n.prototype.autoProcessOverlap=function(t,s,l,f){var d=this,m=!1,x=K[t];if(f>0)if(s===!0)m=x.getDefault()(!1,l,f);else if((0,E.mf)(s))m=s(!1,l,f);else if((0,E.Kn)(s)){var A=s;x[A.type]&&(m=x[A.type](!1,l,f,A.cfg))}else x[s]&&(m=x[s](!1,l,f));if(t==="autoRotate"){if(m){var P=l.getChildren(),k=this.get("verticalFactor");(0,E.S6)(P,function(U){var W=U.attr("textAlign");if(W==="center"){var ne=k>0?"end":"start";U.attr("textAlign",ne)}})}}else if(t==="autoHide"){var B=l.getChildren().slice(0);(0,E.S6)(B,function(U){U.get("visible")||(d.get("isRegister")&&d.unregisterElement(U),U.remove())})}},n}(Zt),Pa=fa,Ca=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:Ra.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:Ra.textColor,textAlign:"center",textBaseline:"middle",fontFamily:Ra.fontFamily}},textBackground:{padding:5,style:{stroke:Ra.lineColor}}}})},n.prototype.renderInner=function(t){this.get("line")&&this.renderLine(t),this.get("text")&&(this.renderText(t),this.renderBackground(t))},n.prototype.renderText=function(t){var s=this.get("text"),l=s.style,f=s.autoRotate,d=s.content;if(!(0,E.UM)(d)){var m=this.getTextPoint(),x=null;if(f){var A=this.getRotateAngle();x=Xc(m,A)}this.addShape(t,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:(0,M.pi)((0,M.pi)((0,M.pi)({},m),{text:d,matrix:x}),l)})}},n.prototype.renderLine=function(t){var s=this.getLinePath(),l=this.get("line"),f=l.style;this.addShape(t,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:(0,M.pi)({path:s},f)})},n.prototype.renderBackground=function(t){var s=this.getElementId("text"),l=t.findById(s),f=this.get("textBackground");if(f&&l){var d=l.getBBox(),m=hh(f.padding),x=f.style,A=this.addShape(t,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:(0,M.pi)({x:d.x-m[3],y:d.y-m[0],width:d.width+m[1]+m[3],height:d.height+m[0]+m[2],matrix:l.attr("matrix")},x)});A.toBack()}},n}(Ei),pa=Ca,Eu=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{type:"line",locationType:"region",start:null,end:null})},n.prototype.getRotateAngle=function(){var t=this.getLocation(),s=t.start,l=t.end,f=this.get("text").position,d=Math.atan2(l.y-s.y,l.x-s.x),m=f==="start"?d-Math.PI/2:d+Math.PI/2;return m},n.prototype.getTextPoint=function(){var t=this.getLocation(),s=t.start,l=t.end,f=this.get("text"),d=f.position,m=f.offset;return Ql(s,l,d,m)},n.prototype.getLinePath=function(){var t=this.getLocation(),s=t.start,l=t.end;return[["M",s.x,s.y],["L",l.x,l.y]]},n}(pa),ks=Eu,Xu=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},n.prototype.getRotateAngle=function(){var t=this.getLocation(),s=t.startAngle,l=t.endAngle,f=this.get("text").position,d=f==="start"?s+Math.PI/2:l-Math.PI/2;return d},n.prototype.getTextPoint=function(){var t=this.get("text"),s=t.position,l=t.offset,f=this.getLocation(),d=f.center,m=f.radius,x=f.startAngle,A=f.endAngle,P=s==="start"?x:A,k=this.getRotateAngle()-Math.PI,B=fl(d,m,P),U=Math.cos(k)*l,W=Math.sin(k)*l;return{x:B.x+U,y:B.y+W}},n.prototype.getLinePath=function(){var t=this.getLocation(),s=t.center,l=t.radius,f=t.startAngle,d=t.endAngle,m=null;if(d-f===Math.PI*2){var x=s.x,A=s.y;m=[["M",x,A-l],["A",l,l,0,1,1,x,A+l],["A",l,l,0,1,1,x,A-l],["Z"]]}else{var P=fl(s,l,f),k=fl(s,l,d),B=Math.abs(d-f)>Math.PI?1:0,U=f>d?0:1;m=[["M",P.x,P.y],["A",l,l,0,B,U,k.x,k.y]]}return m},n}(pa),wu=Xu,Qo="g2-crosshair",vs=Qo+"-line",Cu=Qo+"-text",hu,Kc=(hu={},hu[""+Qo]={position:"relative"},hu[""+vs]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},hu[""+Cu]={position:"absolute",color:Ra.textColor,fontFamily:Ra.fontFamily},hu),el=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+Qo+'"></div>',crosshairTpl:'<div class="'+vs+'"></div>',textTpl:'<span class="'+Cu+'">{content}</span>',domStyles:null,containerClassName:Qo,defaultStyles:Kc,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},n.prototype.render=function(){this.resetText(),this.resetPosition()},n.prototype.initCrossHair=function(){var t=this.getContainer(),s=this.get("crosshairTpl"),l=(0,Ze.Z)(s);t.appendChild(l),this.applyStyle(vs,l),this.set("crosshairEl",l)},n.prototype.getTextPoint=function(){var t=this.getLocation(),s=t.start,l=t.end,f=this.get("text"),d=f.position,m=f.offset;return Ql(s,l,d,m)},n.prototype.resetText=function(){var t=this.get("text"),s=this.get("textEl");if(t){var l=t.content;if(!s){var f=this.getContainer(),d=(0,E.ng)(this.get("textTpl"),t);s=(0,Ze.Z)(d),f.appendChild(s),this.applyStyle(Cu,s),this.set("textEl",s)}s.innerHTML=l}else s&&s.remove()},n.prototype.isVertical=function(t,s){return t.x===s.x},n.prototype.resetPosition=function(){var t=this.get("crosshairEl");t||(this.initCrossHair(),t=this.get("crosshairEl"));var s=this.get("start"),l=this.get("end"),f=Math.min(s.x,l.x),d=Math.min(s.y,l.y);this.isVertical(s,l)?(0,ie.Z)(t,{width:"1px",height:Cs(Math.abs(l.y-s.y))}):(0,ie.Z)(t,{height:"1px",width:Cs(Math.abs(l.x-s.x))}),(0,ie.Z)(t,{top:Cs(d),left:Cs(f)}),this.alignText()},n.prototype.alignText=function(){var t=this.get("textEl");if(t){var s=this.get("text").align,l=t.clientWidth,f=this.getTextPoint();switch(s){case"center":f.x=f.x-l/2;break;case"right":f.x=f.x-l;case"left":break}(0,ie.Z)(t,{top:Cs(f.y),left:Cs(f.x)})}},n.prototype.updateInner=function(t){(0,E.wH)(t,"text")&&this.resetText(),i.prototype.updateInner.call(this,t)},n}(re),hc=el,hl=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:Ra.lineColor}}}})},n.prototype.getLineType=function(){var t=this.get("line")||this.get("defaultCfg").line;return t.type},n.prototype.renderInner=function(t){this.drawGrid(t)},n.prototype.getAlternatePath=function(t,s){var l=this.getGridPath(t),f=s.slice(0).reverse(),d=this.getGridPath(f,!0),m=this.get("closed");return m?l=l.concat(d):(d[0][0]="L",l=l.concat(d),l.push(["Z"])),l},n.prototype.getPathStyle=function(){return this.get("line").style},n.prototype.drawGrid=function(t){var s=this,l=this.get("line"),f=this.get("items"),d=this.get("alternateColor"),m=null;(0,E.S6)(f,function(x,A){var P=x.id||A;if(l){var k=s.getPathStyle();k=(0,E.mf)(k)?k(x,A,f):k;var B=s.getElementId("line-"+P),U=s.getGridPath(x.points);s.addShape(t,{type:"path",name:"grid-line",id:B,attrs:(0,E.CD)({path:U},k)})}if(d&&A>0){var W=s.getElementId("region-"+P),ne=A%2===0;if((0,E.HD)(d))ne&&s.drawAlternateRegion(W,t,m.points,x.points,d);else{var de=ne?d[1]:d[0];s.drawAlternateRegion(W,t,m.points,x.points,de)}}m=x})},n.prototype.drawAlternateRegion=function(t,s,l,f,d){var m=this.getAlternatePath(l,f);this.addShape(s,{type:"path",id:t,name:"grid-region",attrs:{path:m,fill:d}})},n}(Ei),Nf=hl;function pf(i,n,t,s){var l=t-i,f=s-n;return Math.sqrt(l*l+f*f)}var qc=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{type:"circle",center:null,closed:!0})},n.prototype.getGridPath=function(t,s){var l=this.getLineType(),f=this.get("closed"),d=[];if(t.length)if(l==="circle"){var m=this.get("center"),x=t[0],A=pf(m.x,m.y,x.x,x.y),P=s?0:1;f?(d.push(["M",m.x,m.y-A]),d.push(["A",A,A,0,0,P,m.x,m.y+A]),d.push(["A",A,A,0,0,P,m.x,m.y-A]),d.push(["Z"])):(0,E.S6)(t,function(k,B){B===0?d.push(["M",k.x,k.y]):d.push(["A",A,A,0,0,P,k.x,k.y])})}else(0,E.S6)(t,function(k,B){B===0?d.push(["M",k.x,k.y]):d.push(["L",k.x,k.y])}),f&&d.push(["Z"]);return d},n}(Nf),df=qc,pc=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{type:"line"})},n.prototype.getGridPath=function(t){var s=[];return(0,E.S6)(t,function(l,f){f===0?s.push(["M",l.x,l.y]):s.push(["L",l.x,l.y])}),s},n}(Nf),dc=pc,vf=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},n.prototype.getLayoutBBox=function(){var t=i.prototype.getLayoutBBox.call(this),s=this.get("maxWidth"),l=this.get("maxHeight"),f=t.width,d=t.height;return s&&(f=Math.min(f,s)),l&&(d=Math.min(d,l)),Mc(t.minX,t.minY,f,d)},n.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},n.prototype.resetLocation=function(){var t=this.get("x"),s=this.get("y"),l=this.get("offsetX"),f=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t+l,y:s+f})},n.prototype.applyOffset=function(){this.resetLocation()},n.prototype.getDrawPoint=function(){return this.get("currentPoint")},n.prototype.setDrawPoint=function(t){return this.set("currentPoint",t)},n.prototype.renderInner=function(t){this.resetDraw(),this.get("title")&&this.drawTitle(t),this.drawLegendContent(t),this.get("background")&&this.drawBackground(t)},n.prototype.drawBackground=function(t){var s=this.get("background"),l=t.getBBox(),f=hh(s.padding),d=(0,M.pi)({x:0,y:0,width:l.width+f[1]+f[3],height:l.height+f[0]+f[2]},s.style),m=this.addShape(t,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:d});m.toBack()},n.prototype.drawTitle=function(t){var s=this.get("currentPoint"),l=this.get("title"),f=l.spacing,d=l.style,m=l.text,x=this.addShape(t,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:(0,M.pi)({text:m,x:s.x,y:s.y},d)}),A=x.getBBox();this.set("currentPoint",{x:s.x,y:A.maxY+f})},n.prototype.resetDraw=function(){var t=this.get("background"),s={x:0,y:0};if(t){var l=hh(t.padding);s.x=l[3],s.y=l[0]}this.set("currentPoint",s)},n}(Ei),ku=vf,Ts={marker:{style:{inactiveFill:"#000",inactiveOpacity:.45,fill:"#000",opacity:1,size:12}},text:{style:{fill:"#ccc",fontSize:12}}},ru={fill:Ra.textColor,fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:Ra.fontFamily,fontWeight:"normal",lineHeight:12},Al="navigation-arrow-right",Jl="navigation-arrow-left",yo={right:90*Math.PI/180,left:(360-90)*Math.PI/180,up:0,down:180*Math.PI/180},$u=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.currentPageIndex=1,t.totalPagesCnt=1,t.pageWidth=0,t.pageHeight=0,t.startX=0,t.startY=0,t.onNavigationBack=function(){var s=t.getElementByLocalId("item-group");if(t.currentPageIndex>1){t.currentPageIndex-=1,t.updateNavigation();var l=t.getCurrentNavigationMatrix();t.get("animate")?s.animate({matrix:l},100):s.attr({matrix:l})}},t.onNavigationAfter=function(){var s=t.getElementByLocalId("item-group");if(t.currentPageIndex<t.totalPagesCnt){t.currentPageIndex+=1,t.updateNavigation();var l=t.getCurrentNavigationMatrix();t.get("animate")?s.animate({matrix:l},100):s.attr({matrix:l})}},t}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},radio:null,items:[],itemStates:{},itemBackground:{},pageNavigator:{},defaultCfg:{title:{spacing:5,style:{fill:Ra.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:Ra.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},pageNavigator:Ts,itemName:{spacing:16,style:ru},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:ru,spacing:6},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:Ra.uncheckedColor},markerStyle:{fill:Ra.uncheckedColor,stroke:Ra.uncheckedColor}},inactive:{nameStyle:{fill:Ra.uncheckedColor},markerStyle:{opacity:.2}}}}})},n.prototype.isList=function(){return!0},n.prototype.getItems=function(){return this.get("items")},n.prototype.setItems=function(t){this.update({items:t})},n.prototype.updateItem=function(t,s){(0,E.CD)(t,s),this.clear(),this.render()},n.prototype.clearItems=function(){var t=this.getElementByLocalId("item-group");t&&t.clear()},n.prototype.setItemState=function(t,s,l){t[s]=l;var f=this.getElementByLocalId("item-"+t.id);if(f){var d=this.getItems(),m=d.indexOf(t),x=this.createOffScreenGroup(),A=this.drawItem(t,m,this.getItemHeight(),x);this.updateElements(A,f),this.clearUpdateStatus(f)}},n.prototype.hasState=function(t,s){return!!t[s]},n.prototype.getItemStates=function(t){var s=this.get("itemStates"),l=[];return(0,E.S6)(s,function(f,d){t[d]&&l.push(d)}),l},n.prototype.clearItemsState=function(t){var s=this,l=this.getItemsByState(t);(0,E.S6)(l,function(f){s.setItemState(f,t,!1)})},n.prototype.getItemsByState=function(t){var s=this,l=this.getItems();return(0,E.hX)(l,function(f){return s.hasState(f,t)})},n.prototype.drawLegendContent=function(t){this.processItems(),this.drawItems(t)},n.prototype.processItems=function(){var t=this.get("items");(0,E.S6)(t,function(s){s.id||(s.id=s.name)})},n.prototype.drawItems=function(t){var s=this,l=this.addGroup(t,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),f=this.addGroup(l,{id:this.getElementId("item-group"),name:"legend-item-group"}),d=this.getItemHeight(),m=this.get("itemWidth"),x=this.get("itemSpacing"),A=this.get("itemMarginBottom"),P=this.get("currentPoint"),k=P.x,B=P.y,U=this.get("layout"),W=this.get("items"),ne=!1,de=0,ve=this.get("maxWidth"),$e=this.get("maxHeight");(0,E.S6)(W,function(lt,vt){var Ot=s.drawItem(lt,vt,d,f),fr=Ot.getBBox(),Tr=m||fr.width;Tr>de&&(de=Tr),U==="horizontal"?(ve&&ve<P.x+Tr-k&&(ne=!0,P.x=k,P.y+=d+A),s.moveElementTo(Ot,P),P.x+=Tr+x):($e&&$e<P.y+d+A-B&&(ne=!0,P.x+=de+x,P.y=B,de=0),s.moveElementTo(Ot,P),P.y+=d+A)}),ne&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=k,this.startY=B,this.adjustNavigation(t,f))},n.prototype.getItemHeight=function(){var t=this.get("itemHeight");if(!t){var s=(this.get("itemName")||{}).style;if((0,E.mf)(s)){var l=this.getItems();l.forEach(function(f,d){var m=(0,M.pi)((0,M.pi)({},ru),s(f,d,l)).fontSize;t<m&&(t=m)})}else s&&(t=s.fontSize)}return t},n.prototype.drawMarker=function(t,s,l,f){var d=(0,M.pi)((0,M.pi)((0,M.pi)({x:0,y:f/2},s.style),{symbol:(0,E.U2)(l.marker,"symbol","circle")}),(0,E.U2)(l.marker,"style",{})),m=this.addShape(t,{type:"marker",id:this.getElementId("item-"+l.id+"-marker"),name:"legend-item-marker",attrs:d}),x=m.getBBox();m.attr("x",x.width/2);var A=m.attr(),P=A.stroke,k=A.fill;return P&&m.set("isStroke",!0),k&&m.set("isFill",!0),m},n.prototype.drawItemText=function(t,s,l,f,d,m,x){var A=l.formatter,P=l.style,k=(0,M.pi)((0,M.pi)({x:m,y:d/2,text:A?A(f[s],f,x):f[s]},ru),(0,E.mf)(P)?P(f,x,this.getItems()):P);return this.addShape(t,{type:"text",id:this.getElementId("item-"+f.id+"-"+s),name:"legend-item-"+s,attrs:k})},n.prototype.drawRadio=function(t,s,l,f,d){var m,x,A=s.style||{},P=(m=A.r)!==null&&m!==void 0?m:f/2,k=P*3.6/8,B=[d+P,f/2-P],U=B[0],W=B[1],ne=[U+P,W+P],de=ne[0],ve=ne[1],$e=[U,ve+P],lt=$e[0],vt=$e[1],Ot=[d,W+P],fr=Ot[0],Tr=Ot[1],zr=l.showRadio,cn=(0,M.pi)((0,M.pi)({path:[["M",U,W],["A",P,P,0,0,1,de,ve],["L",de-k,ve],["L",de,ve],["A",P,P,0,0,1,lt,vt],["L",lt,vt-k],["L",lt,vt],["A",P,P,0,0,1,fr,Tr],["L",fr+k,Tr],["L",fr,Tr],["A",P,P,0,0,1,U,W],["L",U,W+k]],stroke:"#000000",fill:"#ffffff"},A),{opacity:zr?(x=A==null?void 0:A.opacity)!==null&&x!==void 0?x:.45:0}),Qr=this.addShape(t,{type:"path",id:this.getElementId("item-"+l.id+"-radio"),name:"legend-item-radio",attrs:cn});return Qr.set("tip",s.tip),Qr},n.prototype.drawItem=function(t,s,l,f){var d="item-"+t.id,m=this.addGroup(f,{name:"legend-item-container",id:this.getElementId("item-container-"+d),delegateObject:{item:t,index:s}}),x=this.addGroup(m,{name:"legend-item",id:this.getElementId(d),delegateObject:{item:t,index:s}}),A=this.get("marker"),P=this.get("itemName"),k=this.get("itemValue"),B=this.get("itemBackground"),U=this.get("radio"),W=this.getLimitItemWidth(),ne=0;if(A){var de=this.drawMarker(x,A,t,l),ve=A.spacing,$e=(0,E.U2)(t,["marker","spacing"]);(0,E.hj)($e)&&(ve=$e),ne=de.getBBox().maxX+ve}if(P){var lt=this.drawItemText(x,"name",P,t,l,ne,s);W&&Lf(!0,lt,(0,E.uZ)(W-ne,0,W)),ne=lt.getBBox().maxX+P.spacing}if(k){var vt=this.drawItemText(x,"value",k,t,l,ne,s);W&&(k.alignRight?(vt.attr({textAlign:"right",x:W}),Lf(!0,vt,(0,E.uZ)(W-ne,0,W),"head")):Lf(!0,vt,(0,E.uZ)(W-ne,0,W))),ne=vt.getBBox().maxX+k.spacing}if(U&&this.drawRadio(x,U,t,l,ne),B){var Ot=x.getBBox(),fr=this.addShape(x,{type:"rect",name:"legend-item-background",id:this.getElementId(d+"-background"),attrs:(0,M.pi)({x:0,y:0,width:Ot.width,height:l},B.style)});fr.toBack()}return this.applyItemStates(t,x),x},n.prototype.adjustNavigation=function(t,s){var l=this,f=this.startX,d=this.startY,m=this.get("layout"),x=s.findAll(function(Qn){return Qn.get("name")==="legend-item"}),A=this.get("maxWidth"),P=this.get("maxHeight"),k=this.get("itemWidth"),B=this.get("itemSpacing"),U=this.getItemHeight(),W=(0,E.b$)({},Ts,this.get("pageNavigator")),ne=this.drawNavigation(t,m,"00/00",W),de=ne.getBBox(),ve={x:f,y:d},$e=1,lt=0,vt=0,Ot=0,fr=this.get("itemMarginBottom");function Tr(Qn,Hi){var oa=Qn.getBBox(),eo=k||oa.width,Nn=Hi.x+eo+B+de.width;return Nn>A}if(m==="horizontal"){var zr=this.get("maxRow")||1,cn=U+(zr===1?0:fr),Qr=A-B-de.width-de.minX;this.pageHeight=cn*zr,this.pageWidth=Qr,(0,E.S6)(x,function(Qn){var Hi=Qn.getBBox(),oa=k||Hi.width;(lt&&lt<ve.x+oa+B||Tr(Qn,ve))&&($e===1&&(lt=ve.x+B,l.moveElementTo(ne,{x:Qr,y:ve.y+U/2-de.height/2-de.minY})),$e+=1,ve.x=f,ve.y+=cn),l.moveElementTo(Qn,ve),Qn.getParent().setClip({type:"rect",attrs:{x:ve.x,y:ve.y,width:oa+B,height:U}}),ve.x+=oa+B})}else{(0,E.S6)(x,function(Qn){var Hi=Qn.getBBox();Hi.width>vt&&(vt=Hi.width)}),Ot=vt,vt+=B,A&&(vt=Math.min(A,vt),Ot=Math.min(A,Ot)),this.pageWidth=vt,this.pageHeight=P-Math.max(de.height,U+fr);var On=Math.floor(this.pageHeight/(U+fr));(0,E.S6)(x,function(Qn,Hi){Hi!==0&&Hi%On===0&&($e+=1,ve.x+=vt,ve.y=d),l.moveElementTo(Qn,ve),Qn.getParent().setClip({type:"rect",attrs:{x:ve.x,y:ve.y,width:vt,height:U}}),ve.y+=U+fr}),this.totalPagesCnt=$e,this.moveElementTo(ne,{x:f+Ot/2-de.width/2-de.minX,y:P-de.height-de.minY})}this.pageHeight&&this.pageWidth&&s.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),m==="horizontal"&&this.get("maxRow")?this.totalPagesCnt=Math.ceil($e/this.get("maxRow")):this.totalPagesCnt=$e,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(ne),s.attr("matrix",this.getCurrentNavigationMatrix())},n.prototype.drawNavigation=function(t,s,l,f){var d={x:0,y:0},m=this.addGroup(t,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),x=(0,E.U2)(f.marker,"style",{}),A=x.size,P=A===void 0?12:A,k=(0,M._T)(x,["size"]),B=this.drawArrow(m,d,Jl,s==="horizontal"?"up":"left",P,k);B.on("click",this.onNavigationBack);var U=B.getBBox();d.x+=U.width+2;var W=this.addShape(m,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:(0,M.pi)({x:d.x,y:d.y+P/2,text:l,textBaseline:"middle"},(0,E.U2)(f.text,"style"))}),ne=W.getBBox();d.x+=ne.width+2;var de=this.drawArrow(m,d,Al,s==="horizontal"?"down":"right",P,k);return de.on("click",this.onNavigationAfter),m},n.prototype.updateNavigation=function(t){var s=(0,E.b$)({},Ts,this.get("pageNavigator")),l=s.marker.style,f=l.fill,d=l.opacity,m=l.inactiveFill,x=l.inactiveOpacity,A=this.currentPageIndex+"/"+this.totalPagesCnt,P=t?t.getChildren()[1]:this.getElementByLocalId("navigation-text"),k=t?t.findById(this.getElementId(Jl)):this.getElementByLocalId(Jl),B=t?t.findById(this.getElementId(Al)):this.getElementByLocalId(Al);P.attr("text",A),k.attr("opacity",this.currentPageIndex===1?x:d),k.attr("fill",this.currentPageIndex===1?m:f),k.attr("cursor",this.currentPageIndex===1?"not-allowed":"pointer"),B.attr("opacity",this.currentPageIndex===this.totalPagesCnt?x:d),B.attr("fill",this.currentPageIndex===this.totalPagesCnt?m:f),B.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer");var U=k.getBBox().maxX+2;P.attr("x",U),U+=P.getBBox().width+2,this.updateArrowPath(B,{x:U,y:0})},n.prototype.drawArrow=function(t,s,l,f,d,m){var x=s.x,A=s.y,P=this.addShape(t,{type:"path",id:this.getElementId(l),name:l,attrs:(0,M.pi)({size:d,direction:f,path:[["M",x+d/2,A],["L",x,A+d],["L",x+d,A+d],["Z"]],cursor:"pointer"},m)});return P.attr("matrix",Xc({x:x+d/2,y:A+d/2},yo[f])),P},n.prototype.updateArrowPath=function(t,s){var l=s.x,f=s.y,d=t.attr(),m=d.size,x=d.direction,A=Xc({x:l+m/2,y:f+m/2},yo[x]);t.attr("path",[["M",l+m/2,f],["L",l,f+m],["L",l+m,f+m],["Z"]]),t.attr("matrix",A)},n.prototype.getCurrentNavigationMatrix=function(){var t=this,s=t.currentPageIndex,l=t.pageWidth,f=t.pageHeight,d=this.get("layout"),m=d==="horizontal"?{x:0,y:f*(1-s)}:{x:l*(1-s),y:0};return kf(m)},n.prototype.applyItemStates=function(t,s){var l=this.getItemStates(t),f=l.length>0;if(f){var d=s.getChildren(),m=this.get("itemStates");(0,E.S6)(d,function(x){var A=x.get("name"),P=A.split("-")[2],k=yt(t,P,m);k&&(x.attr(k),P==="marker"&&!(x.get("isStroke")&&x.get("isFill"))&&(x.get("isStroke")&&x.attr("fill",null),x.get("isFill")&&x.attr("stroke",null)))})}},n.prototype.getLimitItemWidth=function(){var t=this.get("itemWidth"),s=this.get("maxItemWidth");return s?t&&(s=t<=s?t:s):t&&(s=t),s},n}(ku),Gs=$u,gf=1.4,ld=.4,mf=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:Ra.textColor,textBaseline:"middle",fontFamily:Ra.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:Ra.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},n.prototype.isSlider=function(){return!0},n.prototype.getValue=function(){return this.getCurrentValue()},n.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},n.prototype.setRange=function(t,s){this.update({min:t,max:s})},n.prototype.setValue=function(t){var s=this.getValue();this.set("value",t);var l=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(l),this.delegateEmit("valuechanged",{originValue:s,value:t})},n.prototype.initEvent=function(){var t=this.get("group");this.bindSliderEvent(t),this.bindRailEvent(t),this.bindTrackEvent(t)},n.prototype.drawLegendContent=function(t){this.drawRail(t),this.drawLabels(t),this.fixedElements(t),this.resetTrack(t),this.resetTrackClip(t),this.get("slidable")&&this.resetHandlers(t)},n.prototype.bindSliderEvent=function(t){this.bindHandlersEvent(t)},n.prototype.bindHandlersEvent=function(t){var s=this;t.on("legend-handler-min:drag",function(l){var f=s.getValueByCanvasPoint(l.x,l.y),d=s.getCurrentValue(),m=d[1];m<f&&(m=f),s.setValue([f,m])}),t.on("legend-handler-max:drag",function(l){var f=s.getValueByCanvasPoint(l.x,l.y),d=s.getCurrentValue(),m=d[0];m>f&&(m=f),s.setValue([m,f])})},n.prototype.bindRailEvent=function(t){},n.prototype.bindTrackEvent=function(t){var s=this,l=null;t.on("legend-track:dragstart",function(f){l={x:f.x,y:f.y}}),t.on("legend-track:drag",function(f){if(l){var d=s.getValueByCanvasPoint(l.x,l.y),m=s.getValueByCanvasPoint(f.x,f.y),x=s.getCurrentValue(),A=x[1]-x[0],P=s.getRange(),k=m-d;k<0?x[0]+k>P.min?s.setValue([x[0]+k,x[1]+k]):s.setValue([P.min,P.min+A]):k>0&&(k>0&&x[1]+k<P.max?s.setValue([x[0]+k,x[1]+k]):s.setValue([P.max-A,P.max])),l={x:f.x,y:f.y}}}),t.on("legend-track:dragend",function(f){l=null})},n.prototype.drawLabels=function(t){this.drawLabel("min",t),this.drawLabel("max",t)},n.prototype.drawLabel=function(t,s){var l=this.get("label"),f=l.style,d=l.align,m=l.formatter,x=this.get(t),A=this.getLabelAlignAttrs(t,d),P="label-"+t;this.addShape(s,{type:"text",id:this.getElementId(P),name:"legend-label-"+t,attrs:(0,M.pi)((0,M.pi)({x:0,y:0,text:(0,E.mf)(m)?m(x):x},f),A)})},n.prototype.getLabelAlignAttrs=function(t,s){var l=this.isVertical(),f="center",d="middle";return l?(f="start",s!=="rail"?t==="min"?d="top":d="bottom":d="top"):s!=="rail"?(d="top",t==="min"?f="start":f="end"):(f="start",d="middle"),{textAlign:f,textBaseline:d}},n.prototype.getRailPath=function(t,s,l,f){var d=this.get("rail"),m=d.size,x=d.defaultLength,A=d.type,P=this.isVertical(),k=x,B=l,U=f;B||(B=P?m:k),U||(U=P?k:m);var W=[];return A==="color"?(W.push(["M",t,s]),W.push(["L",t+B,s]),W.push(["L",t+B,s+U]),W.push(["L",t,s+U]),W.push(["Z"])):(W.push(["M",t+B,s]),W.push(["L",t+B,s+U]),W.push(["L",t,s+U]),W.push(["Z"])),W},n.prototype.drawRail=function(t){var s=this.get("rail"),l=s.style;this.addShape(t,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:(0,M.pi)({path:this.getRailPath(0,0)},l)})},n.prototype.getTrackColor=function(t){var s=t.length;if(!s)return null;if(s===1)return t[0];var l;this.isVertical()?l="l(90)":l="l(0)";for(var f=0;f<s;f++){var d=f/(s-1);l+=" "+d+":"+t[f]}return l},n.prototype.getTrackPath=function(t){var s=this.getRailShape(t),l=s.attr("path");return(0,E.d9)(l)},n.prototype.getClipTrackAttrs=function(t){var s=this.getCurrentValue(),l=s[0],f=s[1],d=this.getRailBBox(t),m=this.getPointByValue(l,t),x=this.getPointByValue(f,t),A=this.isVertical(),P,k,B,U;return A?(P=d.minX,k=m.y,B=d.width,U=x.y-m.y):(P=m.x,k=d.minY,B=x.x-m.x,U=d.height),{x:P,y:k,width:B,height:U}},n.prototype.getTrackAttrs=function(t){var s=this.get("track"),l=this.get("colors"),f=this.getTrackPath(t);return(0,E.CD)({path:f,fill:this.getTrackColor(l)},s.style)},n.prototype.resetTrackClip=function(t){var s=t||this.get("group"),l=this.getElementId("track"),f=s.findById(l),d=f.getClip(),m=this.getClipTrackAttrs(t);d?d.attr(m):f.setClip({type:"rect",attrs:m})},n.prototype.resetTrack=function(t){var s=this.getElementId("track"),l=t.findById(s),f=this.getTrackAttrs(t);l?l.attr(f):this.addShape(t,{type:"path",id:s,draggable:this.get("slidable"),name:"legend-track",attrs:f})},n.prototype.getPointByValue=function(t,s){var l=this.getRange(),f=l.min,d=l.max,m=(t-f)/(d-f),x=this.getRailBBox(s),A=this.isVertical(),P={x:0,y:0};return A?(P.x=x.minX+x.width/2,P.y=eu(x.minY,x.maxY,m)):(P.x=eu(x.minX,x.maxX,m),P.y=x.minY+x.height/2),P},n.prototype.getRailShape=function(t){var s=t||this.get("group");return s.findById(this.getElementId("rail"))},n.prototype.getRailBBox=function(t){var s=this.getRailShape(t),l=s.getBBox();return l},n.prototype.getRailCanvasBBox=function(){var t=this.get("group"),s=t.findById(this.getElementId("rail")),l=s.getCanvasBBox();return l},n.prototype.isVertical=function(){return this.get("layout")==="vertical"},n.prototype.getValueByCanvasPoint=function(t,s){var l=this.getRange(),f=l.min,d=l.max,m=this.getRailCanvasBBox(),x=this.isVertical(),A=this.get("step"),P;x?P=(s-m.minY)/m.height:P=(t-m.minX)/m.width;var k=eu(f,d,P);if(A){var B=Math.round((k-f)/A);k=f+B*A}return k>d&&(k=d),k<f&&(k=f),k},n.prototype.getCurrentValue=function(){var t=this.get("value");if(!t){var s=this.get("values");return s?[Math.max(Math.min.apply(Math,(0,M.pr)(s,[this.get("max")])),this.get("min")),Math.min(Math.max.apply(Math,(0,M.pr)(s,[this.get("min")])),this.get("max"))]:[this.get("min"),this.get("max")]}return t},n.prototype.resetHandlers=function(t){var s=this.getCurrentValue(),l=s[0],f=s[1];this.resetHandler(t,"min",l),this.resetHandler(t,"max",f)},n.prototype.getHandlerPath=function(t,s){var l=this.isVertical(),f=[],d=t.size,m=s.x,x=s.y,A=d*gf,P=d/2,k=d/6;if(l){var B=m+A*ld;f.push(["M",m,x]),f.push(["L",B,x+P]),f.push(["L",m+A,x+P]),f.push(["L",m+A,x-P]),f.push(["L",B,x-P]),f.push(["Z"]),f.push(["M",B,x+k]),f.push(["L",m+A-2,x+k]),f.push(["M",B,x-k]),f.push(["L",m+A-2,x-k])}else{var U=x+A*ld;f.push(["M",m,x]),f.push(["L",m-P,U]),f.push(["L",m-P,x+A]),f.push(["L",m+P,x+A]),f.push(["L",m+P,U]),f.push(["Z"]),f.push(["M",m-k,U]),f.push(["L",m-k,x+A-2]),f.push(["M",m+k,U]),f.push(["L",m+k,x+A-2])}return f},n.prototype.resetHandler=function(t,s,l){var f=this.getPointByValue(l,t),d=this.get("handler"),m=this.getHandlerPath(d,f),x=this.getElementId("handler-"+s),A=t.findById(x),P=this.isVertical();A?A.attr("path",m):this.addShape(t,{type:"path",name:"legend-handler-"+s,draggable:!0,id:x,attrs:(0,M.pi)((0,M.pi)({path:m},d.style),{cursor:P?"ns-resize":"ew-resize"})})},n.prototype.fixedElements=function(t){var s=t.findById(this.getElementId("rail")),l=t.findById(this.getElementId("label-min")),f=t.findById(this.getElementId("label-max")),d=this.getDrawPoint();this.isVertical()?this.fixedVertail(l,f,s,d):this.fixedHorizontal(l,f,s,d)},n.prototype.fitRailLength=function(t,s,l,f){var d=this.isVertical(),m=d?"height":"width",x=this.get("label"),A=x.align,P=x.spacing,k=this.get("max"+(0,E.jC)(m));if(k){var B=A==="rail"?l[m]+t[m]+s[m]+P*2:l[m],U=B-k;U>0&&this.changeRailLength(f,m,l[m]-U)}},n.prototype.changeRailLength=function(t,s,l){var f=t.getBBox(),d;s==="height"?d=this.getRailPath(f.x,f.y,f.width,l):d=this.getRailPath(f.x,f.y,l,f.height),t.attr("path",d)},n.prototype.changeRailPosition=function(t,s,l){var f=t.getBBox(),d=this.getRailPath(s,l,f.width,f.height);t.attr("path",d)},n.prototype.fixedHorizontal=function(t,s,l,f){var d=this.get("label"),m=d.align,x=d.spacing,A=l.getBBox(),P=t.getBBox(),k=s.getBBox(),B=A.height;this.fitRailLength(P,k,A,l),A=l.getBBox(),m==="rail"?(t.attr({x:f.x,y:f.y+B/2}),this.changeRailPosition(l,f.x+P.width+x,f.y),s.attr({x:f.x+P.width+A.width+x*2,y:f.y+B/2})):m==="top"?(t.attr({x:f.x,y:f.y}),s.attr({x:f.x+A.width,y:f.y}),this.changeRailPosition(l,f.x,f.y+P.height+x)):(this.changeRailPosition(l,f.x,f.y),t.attr({x:f.x,y:f.y+A.height+x}),s.attr({x:f.x+A.width,y:f.y+A.height+x}))},n.prototype.fixedVertail=function(t,s,l,f){var d=this.get("label"),m=d.align,x=d.spacing,A=l.getBBox(),P=t.getBBox(),k=s.getBBox();if(this.fitRailLength(P,k,A,l),A=l.getBBox(),m==="rail")t.attr({x:f.x,y:f.y}),this.changeRailPosition(l,f.x,f.y+P.height+x),s.attr({x:f.x,y:f.y+P.height+A.height+x*2});else if(m==="right")t.attr({x:f.x+A.width+x,y:f.y}),this.changeRailPosition(l,f.x,f.y),s.attr({x:f.x+A.width+x,y:f.y+A.height});else{var B=Math.max(P.width,k.width);t.attr({x:f.x,y:f.y}),this.changeRailPosition(l,f.x+B+x,f.y),s.attr({x:f.x,y:f.y+A.height})}},n}(ku),Sv=mf,Tl="g2-tooltip",Hl="g2-tooltip-title",jl="g2-tooltip-list",zf="g2-tooltip-list-item",Ap="g2-tooltip-marker",Uf="g2-tooltip-value",Ml="g2-tooltip-name",Ev="g2-tooltip-crosshair-x",cg="g2-tooltip-crosshair-y",vc,P0=(vc={},vc[""+Tl]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:Ra.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},vc[""+Hl]={marginBottom:"4px"},vc[""+jl]={margin:"0px",listStyleType:"none",padding:"0px"},vc[""+zf]={listStyleType:"none",marginBottom:"4px"},vc[""+Ap]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},vc[""+Uf]={display:"inline-block",float:"right",marginLeft:"30px"},vc[""+Ev]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},vc[""+cg]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},vc);function O0(i,n,t,s,l){var f={left:i<l.x,right:i+t>l.x+l.width,top:n<l.y,bottom:n+s>l.y+l.height};return f}function k0(i,n,t,s,l,f){var d=i,m=n;switch(f){case"left":d=i-s-t,m=n-l/2;break;case"right":d=i+t,m=n-l/2;break;case"top":d=i-s/2,m=n-l-t;break;case"bottom":d=i-s/2,m=n+t;break;default:d=i+t,m=n-l-t;break}return{x:d,y:m}}function wv(i,n,t,s,l,f,d){var m=k0(i,n,t,s,l,f);if(d){var x=O0(m.x,m.y,s,l,d);f==="auto"?(x.right&&(m.x=Math.max(0,i-s-t)),x.top&&(m.y=Math.max(0,n-l-t))):f==="top"||f==="bottom"?(x.left&&(m.x=d.x),x.right&&(m.x=d.x+d.width-s),f==="top"&&x.top&&(m.y=n+t),f==="bottom"&&x.bottom&&(m.y=n-l-t)):(x.top&&(m.y=d.y),x.bottom&&(m.y=d.y+d.height-l),f==="left"&&x.left&&(m.x=i+t),f==="right"&&x.right&&(m.x=i-s-t))}return m}function Cv(i,n){var t=!1;return(0,E.S6)(n,function(s){if((0,E.wH)(i,s))return t=!0,!1}),t}var Zd=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+Tl+'"><div class="'+Hl+'"></div><ul class="'+jl+'"></ul></div>',itemTpl:'<li class="'+zf+`" data-index={index}>
          <span class="`+Ap+`" style="background:{color}"></span>
          <span class="`+Ml+`">{name}</span>:
          <span class="`+Uf+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+Ev+'"></div>',yCrosshairTpl:'<div class="'+cg+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:Tl,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:P0})},n.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},n.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},n.prototype.show=function(){var t=this.getContainer();!t||this.destroyed||(this.set("visible",!0),(0,ie.Z)(t,{visibility:"visible"}),this.setCrossHairsVisible(!0))},n.prototype.hide=function(){var t=this.getContainer();!t||this.destroyed||(this.set("visible",!1),(0,ie.Z)(t,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},n.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},n.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetPosition()},n.prototype.setCrossHairsVisible=function(t){var s=t?"":"none",l=this.get("xCrosshairDom"),f=this.get("yCrosshairDom");l&&(0,ie.Z)(l,{display:s}),f&&(0,ie.Z)(f,{display:s})},n.prototype.initContainer=function(){if(i.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var t=this.getHtmlContentNode();this.get("parent").appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()}},n.prototype.updateInner=function(t){this.get("customContent")?this.renderCustomContent():(Cv(t,["title","showTitle"])&&this.resetTitle(),(0,E.wH)(t,"items")&&this.renderItems()),i.prototype.updateInner.call(this,t)},n.prototype.initDom=function(){this.cacheDoms()},n.prototype.removeDom=function(){i.prototype.removeDom.call(this),this.clearCrosshairs()},n.prototype.resetPosition=function(){var t=this.get("x"),s=this.get("y"),l=this.get("offset"),f=this.getOffset(),d=f.offsetX,m=f.offsetY,x=this.get("position"),A=this.get("region"),P=this.getContainer(),k=this.getBBox(),B=k.width,U=k.height,W;A&&(W=bu(A));var ne=wv(t,s,l,B,U,x,W);(0,ie.Z)(P,{left:Cs(ne.x+d),top:Cs(ne.y+m)}),this.resetCrosshairs()},n.prototype.renderCustomContent=function(){var t=this.getHtmlContentNode(),s=this.get("parent"),l=this.get("container");l&&l.parentNode===s?s.replaceChild(t,l):s.appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()},n.prototype.getHtmlContentNode=function(){var t,s=this.get("customContent");if(s){var l=s(this.get("title"),this.get("items"));(0,E.kK)(l)?t=l:t=(0,Ze.Z)(l)}return t},n.prototype.cacheDoms=function(){var t=this.getContainer(),s=t.getElementsByClassName(Hl)[0],l=t.getElementsByClassName(jl)[0];this.set("titleDom",s),this.set("listDom",l)},n.prototype.resetTitle=function(){var t=this.get("title"),s=this.get("showTitle");s&&t?this.setTitle(t):this.setTitle("")},n.prototype.setTitle=function(t){var s=this.get("titleDom");s&&(s.innerText=t)},n.prototype.resetCrosshairs=function(){var t=this.get("crosshairsRegion"),s=this.get("crosshairs");if(!t||!s)this.clearCrosshairs();else{var l=bu(t),f=this.get("xCrosshairDom"),d=this.get("yCrosshairDom");s==="x"?(this.resetCrosshair("x",l),d&&(d.remove(),this.set("yCrosshairDom",null))):s==="y"?(this.resetCrosshair("y",l),f&&(f.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",l),this.resetCrosshair("y",l)),this.setCrossHairsVisible(this.get("visible"))}},n.prototype.resetCrosshair=function(t,s){var l=this.checkCrosshair(t),f=this.get(t);t==="x"?(0,ie.Z)(l,{left:Cs(f),top:Cs(s.y),height:Cs(s.height)}):(0,ie.Z)(l,{top:Cs(f),left:Cs(s.x),width:Cs(s.width)})},n.prototype.checkCrosshair=function(t){var s=t+"CrosshairDom",l=t+"CrosshairTpl",f="CROSSHAIR_"+t.toUpperCase(),d=oe[f],m=this.get(s),x=this.get("parent");return m||(m=(0,Ze.Z)(this.get(l)),this.applyStyle(d,m),x.appendChild(m),this.set(s,m)),m},n.prototype.renderItems=function(){this.clearItemDoms();var t=this.get("items"),s=this.get("itemTpl"),l=this.get("listDom");l&&((0,E.S6)(t,function(f){var d=Ea.toCSSGradient(f.color),m=(0,M.pi)((0,M.pi)({},f),{color:d}),x=(0,E.ng)(s,m),A=(0,Ze.Z)(x);l.appendChild(A)}),this.applyChildrenStyles(l,this.get("domStyles")))},n.prototype.clearItemDoms=function(){this.get("listDom")&&Oh(this.get("listDom"))},n.prototype.clearCrosshairs=function(){var t=this.get("xCrosshairDom"),s=this.get("yCrosshairDom");t&&t.remove(),s&&s.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},n}(re),F0=Zd,Nh={opacity:0},cd={stroke:"#C5C5C5",strokeOpacity:.85},hm={fill:"#CACED4",opacity:.85},zh=F(39499);function p_(i){return(0,E.UI)(i,function(n,t){var s=t===0?"M":"L",l=n[0],f=n[1];return[s,l,f]})}function pm(i){return p_(i)}function D0(i){if(i.length<=2)return pm(i);var n=[];(0,E.S6)(i,function(d){(0,E.Xy)(d,n.slice(n.length-2))||n.push(d[0],d[1])});var t=(0,zh.e9)(n,!1),s=(0,E.YM)(i),l=s[0],f=s[1];return t.unshift(["M",l,f]),t}function fg(i,n,t,s){s===void 0&&(s=!0);var l=new zl({values:i}),f=new kn({values:(0,E.UI)(i,function(m,x){return x})}),d=(0,E.UI)(i,function(m,x){return[f.scale(x)*n,t-l.scale(m)*t]});return s?D0(d):pm(d)}function hg(i,n){var t=new zl({values:i}),s=t.max<0?t.max:Math.max(0,t.min);return n-t.scale(s)*n}function Vd(i,n,t,s){var l=(0,M.pr)(i),f=hg(s,t);return l.push(["L",n,f]),l.push(["L",0,f]),l.push(["Z"]),l}var fd=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:Nh,lineStyle:cd,areaStyle:hm})},n.prototype.renderInner=function(t){var s=this.cfg,l=s.width,f=s.height,d=s.data,m=s.smooth,x=s.isArea,A=s.backgroundStyle,P=s.lineStyle,k=s.areaStyle;this.addShape(t,{id:this.getElementId("background"),type:"rect",attrs:(0,M.pi)({x:0,y:0,width:l,height:f},A)});var B=fg(d,l,f,m);if(this.addShape(t,{id:this.getElementId("line"),type:"path",attrs:(0,M.pi)({path:B},P)}),x){var U=Vd(B,l,f,d);this.addShape(t,{id:this.getElementId("area"),type:"path",attrs:(0,M.pi)({path:U},k)})}},n.prototype.applyOffset=function(){var t=this.cfg,s=t.x,l=t.y;this.moveElementTo(this.get("group"),{x:s,y:l})},n}(Ei),gh=null,Tp={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},gs=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"handler",x:0,y:0,width:10,height:24,style:Tp})},n.prototype.renderInner=function(t){var s=this.cfg,l=s.width,f=s.height,d=s.style,m=d.fill,x=d.stroke,A=d.radius,P=d.opacity,k=d.cursor;this.addShape(t,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:l,height:f,fill:m,stroke:x,radius:A,opacity:P,cursor:k}});var B=1/3*l,U=2/3*l,W=1/4*f,ne=3/4*f;this.addShape(t,{id:this.getElementId("line-left"),type:"line",attrs:{x1:B,y1:W,x2:B,y2:ne,stroke:x,cursor:k}}),this.addShape(t,{id:this.getElementId("line-right"),type:"line",attrs:{x1:U,y1:W,x2:U,y2:ne,stroke:x,cursor:k}})},n.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},n.prototype.initEvent=function(){this.bindEvents()},n.prototype.bindEvents=function(){var t=this;this.get("group").on("mouseenter",function(){var s=t.get("style").highLightFill;t.getElementByLocalId("background").attr("fill",s),t.draw()}),this.get("group").on("mouseleave",function(){var s=t.get("style").fill;t.getElementByLocalId("background").attr("fill",s),t.draw()})},n.prototype.draw=function(){var t=this.get("container").get("canvas");t&&t.draw()},n}(Ei),hd=null,Ic={fill:"#416180",opacity:.05},$n={fill:"#5B8FF9",opacity:.15,cursor:"move"},Pc=10,Mp={width:Pc,height:24},Xs={textBaseline:"middle",fill:"#000",opacity:.45},Oc="sliderchange",gc=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.onMouseDown=function(s){return function(l){t.currentTarget=s;var f=l.originalEvent;f.stopPropagation(),f.preventDefault(),t.prevX=(0,E.U2)(f,"touches.0.pageX",f.pageX),t.prevY=(0,E.U2)(f,"touches.0.pageY",f.pageY);var d=t.getContainerDOM();d.addEventListener("mousemove",t.onMouseMove),d.addEventListener("mouseup",t.onMouseUp),d.addEventListener("mouseleave",t.onMouseUp),d.addEventListener("touchmove",t.onMouseMove),d.addEventListener("touchend",t.onMouseUp),d.addEventListener("touchcancel",t.onMouseUp)}},t.onMouseMove=function(s){var l=t.cfg.width,f=[t.get("start"),t.get("end")];s.stopPropagation(),s.preventDefault();var d=(0,E.U2)(s,"touches.0.pageX",s.pageX),m=(0,E.U2)(s,"touches.0.pageY",s.pageY),x=d-t.prevX,A=t.adjustOffsetRange(x/l);t.updateStartEnd(A),t.updateUI(t.getElementByLocalId("foreground"),t.getElementByLocalId("minText"),t.getElementByLocalId("maxText")),t.prevX=d,t.prevY=m,t.draw(),t.emit(Oc,[t.get("start"),t.get("end")].sort()),t.delegateEmit("valuechanged",{originValue:f,value:[t.get("start"),t.get("end")]})},t.onMouseUp=function(){t.currentTarget&&(t.currentTarget=void 0);var s=t.getContainerDOM();s&&(s.removeEventListener("mousemove",t.onMouseMove),s.removeEventListener("mouseup",t.onMouseUp),s.removeEventListener("mouseleave",t.onMouseUp),s.removeEventListener("touchmove",t.onMouseMove),s.removeEventListener("touchend",t.onMouseUp),s.removeEventListener("touchcancel",t.onMouseUp))},t}return n.prototype.setRange=function(t,s){this.set("minLimit",t),this.set("maxLimit",s);var l=this.get("start"),f=this.get("end"),d=(0,E.uZ)(l,t,s),m=(0,E.uZ)(f,t,s);!this.get("isInit")&&(l!==d||f!==m)&&this.setValue([d,m])},n.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},n.prototype.setValue=function(t){var s=this.getRange();if((0,E.kJ)(t)&&t.length===2){var l=[this.get("start"),this.get("end")];this.update({start:(0,E.uZ)(t[0],s.min,s.max),end:(0,E.uZ)(t[1],s.min,s.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:l,value:t})}},n.prototype.getValue=function(){return[this.get("start"),this.get("end")]},n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:Ic,foregroundStyle:$n,handlerStyle:Mp,textStyle:Xs}})},n.prototype.update=function(t){var s=t.start,l=t.end,f=(0,M.pi)({},t);(0,E.UM)(s)||(f.start=(0,E.uZ)(s,0,1)),(0,E.UM)(l)||(f.end=(0,E.uZ)(l,0,1)),i.prototype.update.call(this,f),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},n.prototype.init=function(){this.set("start",(0,E.uZ)(this.get("start"),0,1)),this.set("end",(0,E.uZ)(this.get("end"),0,1)),i.prototype.init.call(this)},n.prototype.render=function(){i.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},n.prototype.renderInner=function(t){var s=this.cfg,l=s.start,f=s.end,d=s.width,m=s.height,x=s.trendCfg,A=x===void 0?{}:x,P=s.minText,k=s.maxText,B=s.backgroundStyle,U=B===void 0?{}:B,W=s.foregroundStyle,ne=W===void 0?{}:W,de=s.textStyle,ve=de===void 0?{}:de,$e=(0,E.b$)({},Tp,this.cfg.handlerStyle),lt=l*d,vt=f*d;(0,E.dp)((0,E.U2)(A,"data"))&&(this.trend=this.addComponent(t,(0,M.pi)({component:fd,id:this.getElementId("trend"),x:0,y:0,width:d,height:m},A))),this.addShape(t,{id:this.getElementId("background"),type:"rect",attrs:(0,M.pi)({x:0,y:0,width:d,height:m},U)});var Ot=this.addShape(t,{id:this.getElementId("minText"),type:"text",attrs:(0,M.pi)({y:m/2,textAlign:"right",text:P,silent:!1},ve)}),fr=this.addShape(t,{id:this.getElementId("maxText"),type:"text",attrs:(0,M.pi)({y:m/2,textAlign:"left",text:k,silent:!1},ve)}),Tr=this.addShape(t,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:(0,M.pi)({y:0,height:m},ne)}),zr=(0,E.U2)($e,"width",Pc),cn=(0,E.U2)($e,"height",24);this.minHandler=this.addComponent(t,{component:gs,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(m-cn)/2,width:zr,height:cn,cursor:"ew-resize",style:$e}),this.maxHandler=this.addComponent(t,{component:gs,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(m-cn)/2,width:zr,height:cn,cursor:"ew-resize",style:$e})},n.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},n.prototype.initEvent=function(){this.bindEvents()},n.prototype.updateUI=function(t,s,l){var f=this.cfg,d=f.start,m=f.end,x=f.width,A=f.minText,P=f.maxText,k=f.handlerStyle,B=f.height,U=d*x,W=m*x;this.trend&&(this.trend.update({width:x,height:B}),this.get("updateAutoRender")||this.trend.render()),t.attr("x",U),t.attr("width",W-U);var ne=(0,E.U2)(k,"width",Pc);s.attr("text",A),l.attr("text",P);var de=this._dodgeText([U,W],s,l),ve=de[0],$e=de[1];this.minHandler&&(this.minHandler.update({x:U-ne/2}),this.get("updateAutoRender")||this.minHandler.render()),(0,E.S6)(ve,function(lt,vt){return s.attr(vt,lt)}),this.maxHandler&&(this.maxHandler.update({x:W-ne/2}),this.get("updateAutoRender")||this.maxHandler.render()),(0,E.S6)($e,function(lt,vt){return l.attr(vt,lt)})},n.prototype.bindEvents=function(){var t=this.get("group");t.on("handler-min:mousedown",this.onMouseDown("minHandler")),t.on("handler-min:touchstart",this.onMouseDown("minHandler")),t.on("handler-max:mousedown",this.onMouseDown("maxHandler")),t.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var s=t.findById(this.getElementId("foreground"));s.on("mousedown",this.onMouseDown("foreground")),s.on("touchstart",this.onMouseDown("foreground"))},n.prototype.adjustOffsetRange=function(t){var s=this.cfg,l=s.start,f=s.end;switch(this.currentTarget){case"minHandler":{var d=0-l,m=1-l;return Math.min(m,Math.max(d,t))}case"maxHandler":{var d=0-f,m=1-f;return Math.min(m,Math.max(d,t))}case"foreground":{var d=0-l,m=1-f;return Math.min(m,Math.max(d,t))}}},n.prototype.updateStartEnd=function(t){var s=this.cfg,l=s.start,f=s.end;switch(this.currentTarget){case"minHandler":l+=t;break;case"maxHandler":f+=t;break;case"foreground":l+=t,f+=t;break}this.set("start",l),this.set("end",f)},n.prototype._dodgeText=function(t,s,l){var f,d,m=this.cfg,x=m.handlerStyle,A=m.width,P=2,k=(0,E.U2)(x,"width",Pc),B=t[0],U=t[1],W=!1;B>U&&(f=[U,B],B=f[0],U=f[1],d=[l,s],s=d[0],l=d[1],W=!0);var ne=s.getBBox(),de=l.getBBox(),ve=ne.width>B-P?{x:B+k/2+P,textAlign:"left"}:{x:B-k/2-P,textAlign:"right"},$e=de.width>A-U-P?{x:U-k/2-P,textAlign:"right"}:{x:U+k/2+P,textAlign:"left"};return W?[$e,ve]:[ve,$e]},n.prototype.draw=function(){var t=this.get("container"),s=t&&t.get("canvas");s&&s.draw()},n.prototype.getContainerDOM=function(){var t=this.get("container"),s=t&&t.get("canvas");return s&&s.get("container")},n}(Ei),Uh=null;function tl(i,n,t){if(i){if(typeof i.addEventListener=="function")return i.addEventListener(n,t,!1),{remove:function(){i.removeEventListener(n,t,!1)}};if(typeof i.attachEvent=="function")return i.attachEvent("on"+n,t),{remove:function(){i.detachEvent("on"+n,t)}}}}var Rp={trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},kc={default:Rp,hover:{thumbColor:"rgba(0,0,0,0.2)"}},pd=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.clearEvents=E.ZT,t.onStartEvent=function(s){return function(l){t.isMobile=s,l.originalEvent.preventDefault();var f=s?(0,E.U2)(l.originalEvent,"touches.0.clientX"):l.clientX,d=s?(0,E.U2)(l.originalEvent,"touches.0.clientY"):l.clientY;t.startPos=t.cfg.isHorizontal?f:d,t.bindLaterEvent()}},t.bindLaterEvent=function(){var s=t.getContainerDOM(),l=[];t.isMobile?l=[tl(s,"touchmove",t.onMouseMove),tl(s,"touchend",t.onMouseUp),tl(s,"touchcancel",t.onMouseUp)]:l=[tl(s,"mousemove",t.onMouseMove),tl(s,"mouseup",t.onMouseUp),tl(s,"mouseleave",t.onMouseUp)],t.clearEvents=function(){l.forEach(function(f){f.remove()})}},t.onMouseMove=function(s){var l=t.cfg,f=l.isHorizontal,d=l.thumbOffset;s.preventDefault();var m=t.isMobile?(0,E.U2)(s,"touches.0.clientX"):s.clientX,x=t.isMobile?(0,E.U2)(s,"touches.0.clientY"):s.clientY,A=f?m:x,P=A-t.startPos;t.startPos=A,t.updateThumbOffset(d+P)},t.onMouseUp=function(s){s.preventDefault(),t.clearEvents()},t.onTrackClick=function(s){var l=t.cfg,f=l.isHorizontal,d=l.x,m=l.y,x=l.thumbLen,A=t.getContainerDOM(),P=A.getBoundingClientRect(),k=s.clientX,B=s.clientY,U=f?k-P.left-d-x/2:B-P.top-m-x/2,W=t.validateRange(U);t.updateThumbOffset(W)},t.onThumbMouseOver=function(){var s=t.cfg.theme.hover.thumbColor;t.getElementByLocalId("thumb").attr("stroke",s),t.draw()},t.onThumbMouseOut=function(){var s=t.cfg.theme.default.thumbColor;t.getElementByLocalId("thumb").attr("stroke",s),t.draw()},t}return n.prototype.setRange=function(t,s){this.set("minLimit",t),this.set("maxLimit",s);var l=this.getValue(),f=(0,E.uZ)(l,t,s);l!==f&&!this.get("isInit")&&this.setValue(f)},n.prototype.getRange=function(){var t=this.get("minLimit")||0,s=this.get("maxLimit")||1;return{min:t,max:s}},n.prototype.setValue=function(t){var s=this.getRange(),l=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*(0,E.uZ)(t,s.min,s.max)}),this.delegateEmit("valuechange",{originalValue:l,value:this.getValue()})},n.prototype.getValue=function(){return(0,E.uZ)(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:kc})},n.prototype.renderInner=function(t){this.renderTrackShape(t),this.renderThumbShape(t)},n.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},n.prototype.initEvent=function(){this.bindEvents()},n.prototype.renderTrackShape=function(t){var s=this.cfg,l=s.trackLen,f=s.theme,d=f===void 0?{default:{}}:f,m=(0,E.b$)({},kc,d).default,x=m.lineCap,A=m.trackColor,P=m.size,k=(0,E.U2)(this.cfg,"size",P),B=this.get("isHorizontal")?{x1:0+k/2,y1:k/2,x2:l-k/2,y2:k/2,lineWidth:k,stroke:A,lineCap:x}:{x1:k/2,y1:0+k/2,x2:k/2,y2:l-k/2,lineWidth:k,stroke:A,lineCap:x};return this.addShape(t,{id:this.getElementId("track"),name:"track",type:"line",attrs:B})},n.prototype.renderThumbShape=function(t){var s=this.cfg,l=s.thumbOffset,f=s.thumbLen,d=s.theme,m=(0,E.b$)({},kc,d).default,x=m.size,A=m.lineCap,P=m.thumbColor,k=(0,E.U2)(this.cfg,"size",x),B=this.get("isHorizontal")?{x1:l+k/2,y1:k/2,x2:l+f-k/2,y2:k/2,lineWidth:k,stroke:P,lineCap:A,cursor:"default"}:{x1:k/2,y1:l+k/2,x2:k/2,y2:l+f-k/2,lineWidth:k,stroke:P,lineCap:A,cursor:"default"};return this.addShape(t,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:B})},n.prototype.bindEvents=function(){var t=this.get("group");t.on("mousedown",this.onStartEvent(!1)),t.on("mouseup",this.onMouseUp),t.on("touchstart",this.onStartEvent(!0)),t.on("touchend",this.onMouseUp);var s=t.findById(this.getElementId("track"));s.on("click",this.onTrackClick);var l=t.findById(this.getElementId("thumb"));l.on("mouseover",this.onThumbMouseOver),l.on("mouseout",this.onThumbMouseOut)},n.prototype.getContainerDOM=function(){var t=this.get("container"),s=t&&t.get("canvas");return s&&s.get("container")},n.prototype.validateRange=function(t){var s=this.cfg,l=s.thumbLen,f=s.trackLen,d=t;return t+l>f?d=f-l:t+l<l&&(d=0),d},n.prototype.draw=function(){var t=this.get("container"),s=t&&t.get("canvas");s&&s.draw()},n.prototype.updateThumbOffset=function(t){var s=this.cfg,l=s.thumbOffset,f=s.isHorizontal,d=s.thumbLen,m=s.size,x=this.validateRange(t);if(x!==l){var A=this.getElementByLocalId("thumb");f?A.attr({x1:x+m/2,x2:x+d-m/2}):A.attr({y1:x+m/2,y2:x+d-m/2}),this.emitOffsetChange(x)}},n.prototype.emitOffsetChange=function(t){var s=this.cfg,l=s.thumbOffset,f=s.trackLen,d=s.thumbLen;this.cfg.thumbOffset=t,this.emit("scrollchange",{thumbOffset:t,ratio:(0,E.uZ)(t/(f-d),0,1)}),this.delegateEmit("valuechange",{originalValue:l,value:t})},n}(Ei),Av=Ia,Hd=Pa,dd=dc,Tv=df,Qc=Gs,Zh=Sv,jd=F0;function dm(i){if((0,E.xb)(i))return null;var n=i[0].x,t=i[0].x,s=i[0].y,l=i[0].y;return(0,E.S6)(i,function(f){n=n>f.x?f.x:n,t=t<f.x?f.x:t,s=s>f.y?f.y:s,l=l<f.y?f.y:l}),{minX:n,maxX:t,minY:s,maxY:l,centerX:(n+t)/2,centerY:(s+l)/2}}function Mv(i){return Array.from(new Set(i)).length===1}function vm(i){return((0,E.VV)(i)+(0,E.Fp)(i))/2}function os(i,n,t,s){return{x:i+t*Math.cos(s),y:n+t*Math.sin(s)}}function mh(i,n,t,s,l,f){f===void 0&&(f=0);var d=os(i,n,t,s),m=os(i,n,t,l),x=os(i,n,f,s),A=os(i,n,f,l);if(l-s===Math.PI*2){var P=os(i,n,t,s+Math.PI),k=os(i,n,f,s+Math.PI),B=[["M",d.x,d.y],["A",t,t,0,1,1,P.x,P.y],["A",t,t,0,1,1,m.x,m.y],["M",x.x,x.y]];return f&&(B.push(["A",f,f,0,1,0,k.x,k.y]),B.push(["A",f,f,0,1,0,A.x,A.y])),B.push(["M",d.x,d.y]),B.push(["Z"]),B}var U=l-s<=Math.PI?0:1,W=[["M",d.x,d.y],["A",t,t,0,U,1,m.x,m.y],["L",A.x,A.y]];return f&&W.push(["A",f,f,0,U,0,x.x,x.y]),W.push(["L",d.x,d.y]),W.push(["Z"]),W}function Zf(i,n,t,s,l){var f=os(i,n,t,s),d=os(i,n,t,l);if((0,E.vQ)(l-s,Math.PI*2)){var m=os(i,n,t,s+Math.PI);return[["M",f.x,f.y],["A",t,t,0,1,1,m.x,m.y],["A",t,t,0,1,1,f.x,f.y],["A",t,t,0,1,0,m.x,m.y],["A",t,t,0,1,0,f.x,f.y],["Z"]]}var x=l-s<=Math.PI?0:1;return[["M",f.x,f.y],["A",t,t,0,x,1,d.x,d.y]]}function vd(i,n){var t=i.points,s=dm(t),l,f,d=n.startAngle,m=n.endAngle,x=m-d;return n.isTransposed?(l=s.maxY*x,f=s.minY*x):(l=s.maxX*x,f=s.minX*x),l+=d,f+=d,{startAngle:f,endAngle:l}}function yf(i,n){if((0,E.hj)(i)&&(0,E.hj)(n))return[i,n];if(i=i,n=n,Mv(i)||Mv(n))return[vm(i),vm(n)];for(var t=-1,s=0,l=0,f,d=i.length-1,m,x=0;++t<i.length;)f=d,d=t,x+=m=i[f]*n[d]-i[d]*n[f],s+=(i[f]+i[d])*m,l+=(n[f]+n[d])*m;return x*=3,[s/x,l/x]}function yh(i,n){var t=i.attr(),s=n.attr();return(0,E.S6)(t,function(l,f){s[f]===void 0&&(s[f]=void 0)}),s}function Ip(i,n,t){var s=Math.min(n,t),l=Math.max(n,t);return i>=s&&i<=l}function Pp(i,n,t){if((0,E.HD)(i))return i.padEnd(n,t);if((0,E.kJ)(i)){var s=i.length;if(s<n)for(var l=n-s,f=0;f<l;f++)i.push(t)}return i}function Rl(i,n){return typeof i=="object"&&n.forEach(function(t){delete i[t]}),i}function Vf(i,n,t){var s,l;n===void 0&&(n=[]),t===void 0&&(t=new Map);try{for(var f=(0,M.XA)(i),d=f.next();!d.done;d=f.next()){var m=d.value;t.has(m)||(n.push(m),t.set(m,!0))}}catch(x){s={error:x}}finally{try{d&&!d.done&&(l=f.return)&&l.call(f)}finally{if(s)throw s.error}}return n}var $o=function(){function i(n,t,s,l){n===void 0&&(n=0),t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=0),this.x=n,this.y=t,this.height=l,this.width=s}return i.fromRange=function(n,t,s,l){return new i(n,t,s-n,l-t)},i.fromObject=function(n){return new i(n.minX,n.minY,n.width,n.height)},Object.defineProperty(i.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(n){return this.x===n.x&&this.y===n.y&&this.width===n.width&&this.height===n.height},i.prototype.contains=function(n){return n.minX>=this.minX&&n.maxX<=this.maxX&&n.minY>=this.minY&&n.maxY<=this.maxY},i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.add=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var s=this.clone();return(0,E.S6)(n,function(l){s.x=Math.min(l.x,s.x),s.y=Math.min(l.y,s.y),s.width=Math.max(l.maxX,s.maxX)-s.x,s.height=Math.max(l.maxY,s.maxY)-s.y}),s},i.prototype.merge=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var s=this.clone();return(0,E.S6)(n,function(l){s.x=Math.max(l.x,s.x),s.y=Math.max(l.y,s.y),s.width=Math.min(l.maxX,s.maxX)-s.x,s.height=Math.min(l.maxY,s.maxY)-s.y}),s},i.prototype.cut=function(n,t){var s=n.width,l=n.height;switch(t){case me.TOP:case me.TOP_LEFT:case me.TOP_RIGHT:return i.fromRange(this.minX,this.minY+l,this.maxX,this.maxY);case me.RIGHT:case me.RIGHT_TOP:case me.RIGHT_BOTTOM:return i.fromRange(this.minX,this.minY,this.maxX-s,this.maxY);case me.BOTTOM:case me.BOTTOM_LEFT:case me.BOTTOM_RIGHT:return i.fromRange(this.minX,this.minY,this.maxX,this.maxY-l);case me.LEFT:case me.LEFT_TOP:case me.LEFT_BOTTOM:return i.fromRange(this.minX+s,this.minY,this.maxX,this.maxY);default:return this}},i.prototype.shrink=function(n){var t=(0,M.CR)(n,4),s=t[0],l=t[1],f=t[2],d=t[3];return new i(this.x+d,this.y+s,this.width-d-l,this.height-s-f)},i.prototype.expand=function(n){var t=(0,M.CR)(n,4),s=t[0],l=t[1],f=t[2],d=t[3];return new i(this.x-d,this.y-s,this.width+d+l,this.height+s+f)},i.prototype.exceed=function(n){return[Math.max(-this.minY+n.minY,0),Math.max(this.maxX-n.maxX,0),Math.max(this.maxY-n.maxY,0),Math.max(-this.minX+n.minX,0)]},i.prototype.collide=function(n){return this.minX<n.maxX&&this.maxX>n.minX&&this.minY<n.maxY&&this.maxY>n.minY},i.prototype.size=function(){return this.width*this.height},i.prototype.isPointIn=function(n){return n.x>=this.minX&&n.x<=this.maxX&&n.y>=this.minY&&n.y<=this.maxY},i}(),Il=function(i,n){var t=n.start,s=n.end;return new $o(i.x+i.width*t.x,i.y+i.height*t.y,i.width*Math.abs(s.x-t.x),i.height*Math.abs(s.y-t.y))};function Au(i){return[[i.minX,i.minY],[i.maxX,i.minY],[i.maxX,i.maxY],[i.minX,i.maxY]]}function pl(i){if(i.isPolar&&!i.isTransposed)return(i.endAngle-i.startAngle)*i.getRadius();var n=i.convert({x:0,y:0}),t=i.convert({x:1,y:0});return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function gm(i){if(i.isPolar){var n=i.startAngle,t=i.endAngle;return t-n===Math.PI*2}return!1}function Op(i,n){var t=i.getCenter();return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))}function pg(i,n){var t=!1;if(i)if(i.type==="theta"){var s=i.start,l=i.end;t=Ip(n.x,s.x,l.x)&&Ip(n.y,s.y,l.y)}else{var f=i.invert(n);t=Ip(f.x,0,1)&&Ip(f.y,0,1)}return t}function Vh(i,n){var t=i.getCenter();return Math.atan2(n.y-t.y,n.x-t.x)}function Rv(i,n){n===void 0&&(n=0);var t=i.start,s=i.end,l=i.getWidth(),f=i.getHeight();if(i.isPolar){var d=i.startAngle,m=i.endAngle,x=i.getCenter(),A=i.getRadius();return{type:"path",startState:{path:mh(x.x,x.y,A+n,d,d)},endState:function(k){var B=(m-d)*k+d,U=mh(x.x,x.y,A+n,d,B);return{path:U}},attrs:{path:mh(x.x,x.y,A+n,d,m)}}}var P;return i.isTransposed?P={height:f+n*2}:P={width:l+n*2},{type:"rect",startState:{x:t.x-n,y:s.y-n,width:i.isTransposed?l+n*2:0,height:i.isTransposed?0:f+n*2},endState:P,attrs:{x:t.x-n,y:s.y-n,width:l+n*2,height:f+n*2}}}function mm(i,n){n===void 0&&(n=0);var t=i.start,s=i.end,l=i.getWidth(),f=i.getHeight(),d=Math.min(t.x,s.x),m=Math.min(t.y,s.y);return $o.fromRange(d-n,m-n,d+l+n,m+f+n)}var _f=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function ym(i){var n="linear";return _f.test(i)?n="timeCat":(0,E.HD)(i)&&(n="cat"),n}function dl(i,n,t,s){return n===void 0&&(n={}),n.type?n.type:i.type!=="identity"&&be.includes(t)&&["interval"].includes(s)||i.isCategory?"cat":i.type}function L0(i,n,t){var s=n||[];if((0,E.hj)(i)||(0,E.UM)((0,E.Wx)(s,i))&&(0,E.xb)(t)){var l=Ou("identity");return new l({field:i.toString(),values:[i]})}var f=(0,E.I)(s,i),d=(0,E.U2)(t,"type",ym(f[0])),m=Ou(d);return new m((0,M.pi)({field:i,values:f},t))}function Iv(i,n){if(i.type!=="identity"&&n.type!=="identity"){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s]);i.change(t)}}function kp(i){return i.alias||i.field}function Fp(i,n,t){var s=i.values,l=s.length,f;if(l===1)f=[.5,1];else{var d=1,m=0;gm(n)?n.isTransposed?(d=(0,E.U2)(t,"widthRatio.multiplePie",1/1.3),m=1/l*d,f=[m/2,1-m/2]):f=[0,1-1/l]:(m=1/l/2,f=[m,1-m])}return f}function dg(i){var n=i.values.filter(function(t){return!(0,E.UM)(t)&&!isNaN(t)});return Math.max.apply(Math,(0,M.ev)((0,M.ev)([],(0,M.CR)(n),!1),[(0,E.UM)(i.max)?-1/0:i.max],!1))}function vg(i){var n,t;switch(i){case me.TOP:n={x:0,y:1},t={x:1,y:1};break;case me.RIGHT:n={x:1,y:0},t={x:1,y:1};break;case me.BOTTOM:n={x:0,y:0},t={x:1,y:0};break;case me.LEFT:n={x:0,y:0},t={x:0,y:1};break;default:n=t={x:0,y:0}}return{start:n,end:t}}function B0(i){var n,t;return i.isTransposed?(n={x:0,y:0},t={x:1,y:0}):(n={x:0,y:0},t={x:0,y:1}),{start:n,end:t}}function Hh(i,n){var t={start:{x:0,y:0},end:{x:0,y:0}};i.isRect?t=vg(n):i.isPolar&&(t=B0(i));var s=t.start,l=t.end;return{start:i.convert(s),end:i.convert(l)}}function _m(i,n){if(i.isRect)return i.isTransposed?[DIRECTION.RIGHT,DIRECTION.BOTTOM].includes(n)?1:-1:[DIRECTION.BOTTOM,DIRECTION.RIGHT].includes(n)?-1:1;if(i.isPolar){var t=i.x.start;return t<0?-1:1}return 1}function Xe(i){var n=i.start,t=i.end;return n.x===t.x}function Gt(i,n){var t=i.start,s=i.end,l=Xe(i);return l?(t.y-s.y)*(n.x-t.x)>0?1:-1:(s.x-t.x)*(t.y-n.y)>0?-1:1}function dr(i,n){var t=(0,E.U2)(i,["components","axis"],{});return(0,E.b$)({},(0,E.U2)(t,["common"],{}),(0,E.b$)({},(0,E.U2)(t,[n],{})))}function on(i,n,t){var s=(0,E.U2)(i,["components","axis"],{});return(0,E.b$)({},(0,E.U2)(s,["common","title"],{}),(0,E.b$)({},(0,E.U2)(s,[n,"title"],{})),t)}function wn(i){var n=i.x,t=i.y,s=i.circleCenter,l=t.start>t.end,f=i.isTransposed?i.convert({x:l?0:1,y:0}):i.convert({x:0,y:l?0:1}),d=[f.x-s.x,f.y-s.y],m=[1,0],x=f.y>s.y?ga.EU(d,m):ga.EU(d,m)*-1,A=x+(n.end-n.start),P=Math.sqrt(Math.pow(f.x-s.x,2)+Math.pow(f.y-s.y,2));return{center:s,radius:P,startAngle:x,endAngle:A}}function un(i,n){return(0,E.jn)(i)?i===!1?!1:{}:(0,E.U2)(i,[n])}function Yr(i,n){return(0,E.U2)(i,"position",n)}function Yn(i,n){return(0,E.U2)(n,["title","text"],kp(i))}var zn=function(){function i(n,t){this.destroyed=!1,this.facets=[],this.view=n,this.cfg=(0,E.b$)({},this.getDefaultCfg(),t)}return i.prototype.init=function(){this.container||(this.container=this.createContainer());var n=this.view.getData();this.facets=this.generateFacets(n)},i.prototype.render=function(){this.renderViews()},i.prototype.update=function(){},i.prototype.clear=function(){this.clearFacetViews()},i.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},i.prototype.facetToView=function(n){var t=n.region,s=n.data,l=n.padding,f=l===void 0?this.cfg.padding:l,d=this.view.createView({region:t,padding:f});d.data(s||[]),n.view=d,this.beforeEachView(d,n);var m=this.cfg.eachView;return m&&m(d,n),this.afterEachView(d,n),d},i.prototype.createContainer=function(){var n=this.view.getLayer(fe.FORE);return n.addGroup()},i.prototype.renderViews=function(){this.createFacetViews()},i.prototype.createFacetViews=function(){var n=this;return this.facets.map(function(t){return n.facetToView(t)})},i.prototype.clearFacetViews=function(){var n=this;(0,E.S6)(this.facets,function(t){t.view&&(n.view.removeView(t.view),t.view=void 0)})},i.prototype.parseSpacing=function(){var n=this.view.viewBBox,t=n.width,s=n.height,l=this.cfg.spacing;return l.map(function(f,d){return(0,E.hj)(f)?f/(d===0?t:s):parseFloat(f)/100})},i.prototype.getFieldValues=function(n,t){var s=[],l={};return(0,E.S6)(n,function(f){var d=f[t];!(0,E.UM)(d)&&!l[d]&&(s.push(d),l[d]=!0)}),s},i.prototype.getRegion=function(n,t,s,l){var f=(0,M.CR)(this.parseSpacing(),2),d=f[0],m=f[1],x=(1+d)/(t===0?1:t)-d,A=(1+m)/(n===0?1:n)-m,P={x:(x+d)*s,y:(A+m)*l},k={x:P.x+x,y:P.y+A};return{start:P,end:k}},i.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,spacing:[0,0],padding:10,fields:[]}},i.prototype.getDefaultTitleCfg=function(){var n=this.view.getTheme().fontFamily;return{style:{fontSize:14,fill:"#666",fontFamily:n}}},i.prototype.processAxis=function(n,t){var s=n.getOptions(),l=s.coordinate,f=n.geometries,d=(0,E.U2)(l,"type","rect");if(d==="rect"&&f.length){(0,E.UM)(s.axes)&&(s.axes={});var m=s.axes,x=(0,M.CR)(f[0].getXYFields(),2),A=x[0],P=x[1],k=un(m,A),B=un(m,P);k!==!1&&(s.axes[A]=this.getXAxisOption(A,m,k,t)),B!==!1&&(s.axes[P]=this.getYAxisOption(P,m,B,t))}},i.prototype.getFacetDataFilter=function(n){return function(t){return(0,E.yW)(n,function(s){var l=s.field,f=s.value;return!(0,E.UM)(f)&&l?t[l]===f:!0})}},i}(),li={},ni=function(i){return li[(0,E.vl)(i)]},ai=function(i,n){li[(0,E.vl)(i)]=n},xi=function(){function i(n,t){this.context=n,this.cfg=t,n.addAction(this)}return i.prototype.applyCfg=function(n){(0,E.f0)(this,n)},i.prototype.init=function(){this.applyCfg(this.cfg)},i.prototype.destroy=function(){this.context.removeAction(this),this.context=null},i}(),En=xi,ci=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.execute=function(){this.callback&&this.callback(this.context)},n.prototype.destroy=function(){i.prototype.destroy.call(this),this.callback=null},n}(En),jr=ci,mn={};function ti(i,n){var t=mn[i],s=null;if(t){var l=t.ActionClass,f=t.cfg;s=new l(n,f),s.name=i,s.init()}return s}function Ci(i){var n=mn[i];return(0,E.U2)(n,"ActionClass")}function Vr(i,n,t){mn[i]={ActionClass:n,cfg:t}}function Bi(i){delete mn[i]}function Wn(i,n){var t=new jr(n);return t.callback=i,t.name="callback",t}function Ti(i,n){var t=[];if(i.length){t.push(["M",i[0].x,i[0].y]);for(var s=1,l=i.length;s<l;s+=1){var f=i[s];t.push(["L",f.x,f.y])}n&&t.push(["Z"])}return t}function Ln(i,n){for(var t=[i[0]],s=1,l=i.length;s<l;s=s+2){var f=n.convert({x:i[s],y:i[s+1]});t.push(f.x,f.y)}return t}function wi(i,n){var t=n.isTransposed,s=i[1],l=i[6],f=i[7],d=n.convert({x:l,y:f}),m=t?0:1;return["A",s,s,0,0,m,d.x,d.y]}function ta(i,n,t){var s=t.isTransposed,l=t.startAngle,f=t.endAngle,d=i[0].toLowerCase()==="a"?{x:i[6],y:i[7]}:{x:i[1],y:i[2]},m={x:n[1],y:n[2]},x=[],A=s?"y":"x",P=Math.abs(m[A]-d[A])*(f-l),k=m[A]>=d[A]?1:0,B=P>Math.PI?1:0,U=t.convert(m),W=Op(t,U);if(W>=.5)if(P===Math.PI*2){var ne={x:(m.x+d.x)/2,y:(m.y+d.y)/2},de=t.convert(ne);x.push(["A",W,W,0,B,k,de.x,de.y]),x.push(["A",W,W,0,B,k,U.x,U.y])}else x.push(["A",W,W,0,B,k,U.x,U.y]);return x}function Ua(i){(0,E.S6)(i,function(n,t){var s=n;if(s[0].toLowerCase()==="a"){var l=i[t-1],f=i[t+1];f&&f[0].toLowerCase()==="a"?l&&l[0].toLowerCase()==="l"&&(l[0]="M"):l&&l[0].toLowerCase()==="a"&&f&&f[0].toLowerCase()==="l"&&(f[0]="M")}})}var Ai=function(i,n,t,s){var l,f=[],d=!!s,m,x,A,P,k,B,U;if(d){l=(0,M.CR)(s,2),A=l[0],P=l[1];for(var W=0,ne=i.length;W<ne;W++){var de=i[W];A=ga.VV([0,0],A,de),P=ga.Fp([0,0],P,de)}}for(var W=0,ve=i.length;W<ve;W++){var de=i[W];if(W===0&&!t)U=de;else if(W===ve-1&&!t)B=de,f.push(U),f.push(B);else{m=i[t?W?W-1:ve-1:W-1],x=i[t?(W+1)%ve:W+1];var $e=[0,0];$e=ga.lu($e,x,m),$e=ga.bA($e,$e,n);var lt=ga.TE(de,m),vt=ga.TE(de,x),Ot=lt+vt;Ot!==0&&(lt/=Ot,vt/=Ot);var fr=ga.bA([0,0],$e,-lt),Tr=ga.bA([0,0],$e,vt);B=ga.IH([0,0],de,fr),k=ga.IH([0,0],de,Tr),k=ga.VV([0,0],k,ga.Fp([0,0],x,de)),k=ga.Fp([0,0],k,ga.VV([0,0],x,de)),fr=ga.lu([0,0],k,de),fr=ga.bA([0,0],fr,-lt/vt),B=ga.IH([0,0],de,fr),B=ga.VV([0,0],B,ga.Fp([0,0],m,de)),B=ga.Fp([0,0],B,ga.VV([0,0],m,de)),Tr=ga.lu([0,0],de,B),Tr=ga.bA([0,0],Tr,vt/lt),k=ga.IH([0,0],de,Tr),d&&(B=ga.Fp([0,0],B,A),B=ga.VV([0,0],B,P),k=ga.Fp([0,0],k,A),k=ga.VV([0,0],k,P)),f.push(U),f.push(B),U=k}}return t&&f.push(f.shift()),f};function Gn(i,n,t){for(var s=!!n,l=[],f=0,d=i.length;f<d;f+=2)l.push([i[f],i[f+1]]);for(var m=Ai(l,.4,s,t),x=l.length,A=[],P,k,B,f=0;f<x-1;f++)P=m[f*2],k=m[f*2+1],B=l[f+1],A.push(["C",P[0],P[1],k[0],k[1],B[0],B[1]]);return s&&(P=m[x],k=m[x+1],B=l[0],A.push(["C",P[0],P[1],k[0],k[1],B[0],B[1]])),A}function Rn(i,n){return Ti(i,n)}function aa(i,n,t){var s=[],l=i[0],f=null;if(i.length<=2)return Rn(i,n);for(var d=0,m=i.length;d<m;d++){var x=i[d];(!f||!(f.x===x.x&&f.y===x.y))&&(s.push(x.x),s.push(x.y),f=x)}var A=t||[[0,0],[1,1]],P=Gn(s,n,A);return P.unshift(["M",l.x,l.y]),P}function to(i,n){var t=[];return(0,E.S6)(n,function(s){var l=s[0];switch(l.toLowerCase()){case"m":case"l":case"c":t.push(Ln(s,i));break;case"a":t.push(wi(s,i));break;case"z":default:t.push(s);break}}),t}function Oi(i,n){var t=[],s,l,f,d;return(0,E.S6)(n,function(m,x){var A=m[0];switch(A.toLowerCase()){case"m":case"c":case"q":t.push(Ln(m,i));break;case"l":s=n[x-1],l=m,f=i.isTransposed,d=f?s[s.length-2]===l[1]:s[s.length-1]===l[2],d?t=t.concat(ta(s,l,i)):t.push(Ln(m,i));break;case"a":t.push(wi(m,i));break;case"z":default:t.push(m);break}}),Ua(t),t}function Ka(i,n){var t=i.event,s=t.target;return xa(s,n)}function ka(i,n){var t=i.getCanvasBBox(),s=t.width,l=t.height;return s>0&&l>0&&(s>=n||l>=n)}function xa(i,n){var t=i.getCanvasBBox();return ka(i,n)?t:null}function wo(i,n){var t=i.event.maskShapes;return t.map(function(s){return xa(s,n)}).filter(function(s){return!!s})}function pu(i,n){var t=i.event,s=t.target;return Fu(s,n)}function Fu(i,n){return ka(i,n)?i.attr("path"):null}function vo(i,n){var t=i.event.maskShapes;return t.map(function(s){return Fu(s,n)})}function ss(i){var n=i.event,t,s=n.target;return s&&(t=s.get("element")),t}function Uo(i){var n=i.event,t=n.target,s;return t&&(s=t.get("delegateObject")),s}function du(i){var n=i.event.gEvent;return!(n&&n.fromShape&&n.toShape&&n.fromShape.get("element")===n.toShape.get("element"))}function zs(i){return i&&i.component&&i.component.isList()}function Fs(i){return i&&i.component&&i.component.isSlider()}function $s(i){var n=i.event,t=n.target;return t&&(t==null?void 0:t.get("name"))==="mask"||Ys(i)}function Ys(i){var n;return((n=i.event.target)===null||n===void 0?void 0:n.get("name"))==="multi-mask"}function Ks(i,n){var t=i.event.target;if(Ys(i))return qa(i,n);if(t.get("type")==="path"){var s=pu(i,n);return s?ki(i.view,s):void 0}var l=Ka(i,n);return l?ln(i.view,l):null}function qa(i,n){var t=i.event.target;if(t.get("type")==="path"){var s=vo(i,n);return s.length>0?s.flatMap(function(f){return ki(i.view,f)}):null}var l=wo(i,n);return l.length>0?l.flatMap(function(f){return ln(i.view,f)}):null}function Tu(i,n,t){if(Ys(i))return ma(i,n,t);var s=Ka(i,t);return s?ko(s,i,n):null}function ko(i,n,t){var s=n.view,l=$r(s,t,{x:i.x,y:i.y}),f=$r(s,t,{x:i.maxX,y:i.maxY}),d={minX:l.x,minY:l.y,maxX:f.x,maxY:f.y};return ln(t,d)}function ma(i,n,t){var s=wo(i,t);return s.length>0?s.flatMap(function(l){return ko(l,i,n)}):null}function da(i){var n=i.geometries,t=[];return(0,E.S6)(n,function(s){var l=s.elements;t=t.concat(l)}),i.views&&i.views.length&&(0,E.S6)(i.views,function(s){t=t.concat(da(s))}),t}function So(i,n,t){var s=da(i);return s.filter(function(l){return Du(l,n)===t})}function Us(i,n){var t=i.geometries,s=[];return(0,E.S6)(t,function(l){var f=l.getElementsBy(function(d){return d.hasState(n)});s=s.concat(f)}),s}function Du(i,n){var t=i.getModel(),s=t.data,l;return(0,E.kJ)(s)?l=s[0][n]:l=s[n],l}function ur(i,n){return!(n.minX>i.maxX||n.maxX<i.minX||n.minY>i.maxY||n.maxY<i.minY)}function ln(i,n){var t=da(i),s=[];return(0,E.S6)(t,function(l){var f=l.shape,d=f.getCanvasBBox();ur(n,d)&&s.push(l)}),s}function qr(i){var n=[];return(0,E.S6)(i,function(t){var s=t[0];if(s!=="A")for(var l=1;l<t.length;l=l+2)n.push([t[l],t[l+1]]);else{var f=t.length;n.push([t[f-2],t[f-1]])}}),n}function ki(i,n){var t=da(i),s=qr(n),l=t.filter(function(f){var d=f.shape,m;if(d.get("type")==="path")m=qr(d.attr("path"));else{var x=d.getCanvasBBox();m=Au(x)}return(0,zh.Wq)(s,m)});return l}function Ja(i){return i.getComponents().map(function(n){return n.component})}function Tn(i,n){var t=n.x-i.x,s=n.y-i.y;return Math.sqrt(t*t+s*s)}function Bt(i,n){if(i.length<=2)return Rn(i,!1);var t=i[0],s=[];(0,E.S6)(i,function(f){s.push(f.x),s.push(f.y)});var l=Gn(s,n,null);return l.unshift(["M",t.x,t.y]),l}function ut(i,n){return i.x<=n.x&&i.maxX>=n.x&&i.y<=n.y&&i.maxY>n.y}function hr(i){var n=i.parent,t=null;return n&&(t=n.views.filter(function(s){return s!==i})),t}function rn(i,n){var t=i.getCoordinate();return t.invert(n)}function $r(i,n,t){var s=rn(i,t);return n.getCoordinate().convert(s)}function Ar(i,n,t,s){var l=!1;return(0,E.S6)(i,function(f){if(f[t]===n[t]&&f[s]===n[s])return l=!0,!1}),l}function Ir(i,n){var t=i.getScaleByField(n);return!t&&i.views&&(0,E.S6)(i.views,function(s){if(t=Ir(s,n),t)return!1}),t}var Lr=function(){function i(n){this.actions=[],this.event=null,this.cacheMap={},this.view=n}return i.prototype.cache=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(n.length===1)return this.cacheMap[n[0]];n.length===2&&(this.cacheMap[n[0]]=n[1])},i.prototype.getAction=function(n){return this.actions.find(function(t){return t.name===n})},i.prototype.addAction=function(n){this.actions.push(n)},i.prototype.removeAction=function(n){var t=this.actions,s=this.actions.indexOf(n);s>=0&&t.splice(s,1)},i.prototype.getCurrentPoint=function(){var n=this.event;if(n)if(n.target instanceof HTMLElement){var t=this.view.getCanvas(),s=t.getPointByClient(n.clientX,n.clientY);return s}else return{x:n.x,y:n.y};return null},i.prototype.getCurrentShape=function(){return(0,E.U2)(this.event,["gEvent","shape"])},i.prototype.isInPlot=function(){var n=this.getCurrentPoint();return n?this.view.isPointInPlot(n):!1},i.prototype.isInShape=function(n){var t=this.getCurrentShape();return t?t.get("name")===n:!1},i.prototype.isInComponent=function(n){var t=Ja(this.view),s=this.getCurrentPoint();return s?!!t.find(function(l){var f=l.getBBox();return n?l.get("name")===n&&ut(f,s):ut(f,s)}):!1},i.prototype.destroy=function(){(0,E.S6)(this.actions.slice(),function(n){n.destroy()}),this.view=null,this.event=null,this.actions=null,this.cacheMap=null},i}(),lr=Lr,Rr=function(){function i(n,t){this.view=n,this.cfg=t}return i.prototype.init=function(){this.initEvents()},i.prototype.initEvents=function(){},i.prototype.clearEvents=function(){},i.prototype.destroy=function(){this.clearEvents()},i}(),Yt=Rr;function Pr(i,n,t){var s=i.split(":"),l=s[0],f=n.getAction(l)||ti(l,n);if(!f)throw new Error("There is no action named ".concat(l));var d=s[1];return{action:f,methodName:d,arg:t}}function pn(i){var n=i.action,t=i.methodName,s=i.arg;if(n[t])n[t](s);else throw new Error("Action(".concat(n.name,") doesn't have a method called ").concat(t))}var dn={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},Zn=function(i){(0,M.ZT)(n,i);function n(t,s){var l=i.call(this,t,s)||this;return l.callbackCaches={},l.emitCaches={},l.steps=s,l}return n.prototype.init=function(){this.initContext(),i.prototype.init.call(this)},n.prototype.destroy=function(){i.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},n.prototype.initEvents=function(){var t=this;(0,E.S6)(this.steps,function(s,l){(0,E.S6)(s,function(f){var d=t.getActionCallback(l,f);d&&t.bindEvent(f.trigger,d)})})},n.prototype.clearEvents=function(){var t=this;(0,E.S6)(this.steps,function(s,l){(0,E.S6)(s,function(f){var d=t.getActionCallback(l,f);d&&t.offEvent(f.trigger,d)})})},n.prototype.initContext=function(){var t=this.view,s=new lr(t);this.context=s;var l=this.steps;(0,E.S6)(l,function(f){(0,E.S6)(f,function(d){if((0,E.mf)(d.action))d.actionObject={action:Wn(d.action,s),methodName:"execute"};else if((0,E.HD)(d.action))d.actionObject=Pr(d.action,s,d.arg);else if((0,E.kJ)(d.action)){var m=d.action,x=(0,E.kJ)(d.arg)?d.arg:[d.arg];d.actionObject=[],(0,E.S6)(m,function(A,P){d.actionObject.push(Pr(A,s,x[P]))})}})})},n.prototype.isAllowStep=function(t){var s=this.currentStepName,l=this.steps;if(s===t||t===dn.SHOW_ENABLE)return!0;if(t===dn.PROCESSING)return s===dn.START;if(t===dn.START)return s!==dn.PROCESSING;if(t===dn.END)return s===dn.PROCESSING||s===dn.START;if(t===dn.ROLLBACK){if(l[dn.END])return s===dn.END;if(s===dn.START)return!0}return!1},n.prototype.isAllowExecute=function(t,s){if(this.isAllowStep(t)){var l=this.getKey(t,s);return s.once&&this.emitCaches[l]?!1:s.isEnable?s.isEnable(this.context):!0}return!1},n.prototype.enterStep=function(t){this.currentStepName=t,this.emitCaches={}},n.prototype.afterExecute=function(t,s){t!==dn.SHOW_ENABLE&&this.currentStepName!==t&&this.enterStep(t);var l=this.getKey(t,s);this.emitCaches[l]=!0},n.prototype.getKey=function(t,s){return t+s.trigger+s.action},n.prototype.getActionCallback=function(t,s){var l=this,f=this.context,d=this.callbackCaches,m=s.actionObject;if(s.action&&m){var x=this.getKey(t,s);if(!d[x]){var A=function(P){f.event=P,l.isAllowExecute(t,s)?((0,E.kJ)(m)?(0,E.S6)(m,function(k){f.event=P,pn(k)}):(f.event=P,pn(m)),l.afterExecute(t,s),s.callback&&(f.event=P,s.callback(f))):f.event=null};s.debounce?d[x]=(0,E.Ds)(A,s.debounce.wait,s.debounce.immediate):s.throttle?d[x]=(0,E.P2)(A,s.throttle.wait,{leading:s.throttle.leading,trailing:s.throttle.trailing}):d[x]=A}return d[x]}return null},n.prototype.bindEvent=function(t,s){var l=t.split(":");l[0]==="window"?window.addEventListener(l[1],s):l[0]==="document"?document.addEventListener(l[1],s):this.view.on(t,s)},n.prototype.offEvent=function(t,s){var l=t.split(":");l[0]==="window"?window.removeEventListener(l[1],s):l[0]==="document"?document.removeEventListener(l[1],s):this.view.off(t,s)},n}(Yt),Bn=Zn,Hn={};function qi(i){return Hn[(0,E.vl)(i)]}function Fn(i,n){Hn[(0,E.vl)(i)]=n}function ji(i,n,t){var s=qi(i);if(!s)return null;if((0,E.PO)(s)){var l=(0,E.CD)((0,E.d9)(s),t);return new Bn(n,l)}else{var f=s;return new f(n,t)}}function ya(i){return{title:{autoRotate:!0,position:"center",spacing:i.axisTitleSpacing,style:{fill:i.axisTitleTextFillColor,fontSize:i.axisTitleTextFontSize,lineHeight:i.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:i.fontFamily},iconStyle:{fill:i.axisDescriptionIconFillColor}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:i.axisLabelOffset,style:{fill:i.axisLabelFillColor,fontSize:i.axisLabelFontSize,lineHeight:i.axisLabelLineHeight,fontFamily:i.fontFamily}},line:{style:{lineWidth:i.axisLineBorder,stroke:i.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:i.axisGridBorderColor,lineWidth:i.axisGridBorder,lineDash:i.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:i.axisTickLineBorder,stroke:i.axisTickLineBorderColor},alignTick:!0,length:i.axisTickLineLength},subTickLine:null,animate:!0}}function Fa(i){return{title:null,marker:{symbol:"circle",spacing:i.legendMarkerSpacing,style:{r:i.legendCircleMarkerSize,fill:i.legendMarkerColor}},itemName:{spacing:5,style:{fill:i.legendItemNameFillColor,fontFamily:i.fontFamily,fontSize:i.legendItemNameFontSize,lineHeight:i.legendItemNameLineHeight,fontWeight:i.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:"#D8D8D8"},markerStyle:{fill:"#D8D8D8",stroke:"#D8D8D8"}},inactive:{nameStyle:{fill:"#D8D8D8"},markerStyle:{opacity:.2}}},flipPage:!0,pageNavigator:{marker:{style:{size:i.legendPageNavigatorMarkerSize,inactiveFill:i.legendPageNavigatorMarkerInactiveFillColor,inactiveOpacity:i.legendPageNavigatorMarkerInactiveFillOpacity,fill:i.legendPageNavigatorMarkerFillColor,opacity:i.legendPageNavigatorMarkerFillOpacity}},text:{style:{fill:i.legendPageNavigatorTextFillColor,fontSize:i.legendPageNavigatorTextFontSize}}},animate:!1,maxItemWidth:200,itemSpacing:i.legendItemSpacing,itemMarginBottom:i.legendItemMarginBottom,padding:i.legendPadding}}function Fo(i){var n,t={point:{default:{fill:i.pointFillColor,r:i.pointSize,stroke:i.pointBorderColor,lineWidth:i.pointBorder,fillOpacity:i.pointFillOpacity},active:{stroke:i.pointActiveBorderColor,lineWidth:i.pointActiveBorder},selected:{stroke:i.pointSelectedBorderColor,lineWidth:i.pointSelectedBorder},inactive:{fillOpacity:i.pointInactiveFillOpacity,strokeOpacity:i.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:i.hollowPointFillColor,lineWidth:i.hollowPointBorder,stroke:i.hollowPointBorderColor,strokeOpacity:i.hollowPointBorderOpacity,r:i.hollowPointSize},active:{stroke:i.hollowPointActiveBorderColor,strokeOpacity:i.hollowPointActiveBorderOpacity},selected:{lineWidth:i.hollowPointSelectedBorder,stroke:i.hollowPointSelectedBorderColor,strokeOpacity:i.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:i.hollowPointInactiveBorderOpacity}},area:{default:{fill:i.areaFillColor,fillOpacity:i.areaFillOpacity,stroke:null},active:{fillOpacity:i.areaActiveFillOpacity},selected:{fillOpacity:i.areaSelectedFillOpacity},inactive:{fillOpacity:i.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:i.hollowAreaBorderColor,lineWidth:i.hollowAreaBorder,strokeOpacity:i.hollowAreaBorderOpacity},active:{fill:null,lineWidth:i.hollowAreaActiveBorder},selected:{fill:null,lineWidth:i.hollowAreaSelectedBorder},inactive:{strokeOpacity:i.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:i.intervalFillColor,fillOpacity:i.intervalFillOpacity},active:{stroke:i.intervalActiveBorderColor,lineWidth:i.intervalActiveBorder},selected:{stroke:i.intervalSelectedBorderColor,lineWidth:i.intervalSelectedBorder},inactive:{fillOpacity:i.intervalInactiveFillOpacity,strokeOpacity:i.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:i.hollowIntervalFillColor,stroke:i.hollowIntervalBorderColor,lineWidth:i.hollowIntervalBorder,strokeOpacity:i.hollowIntervalBorderOpacity},active:{stroke:i.hollowIntervalActiveBorderColor,lineWidth:i.hollowIntervalActiveBorder,strokeOpacity:i.hollowIntervalActiveBorderOpacity},selected:{stroke:i.hollowIntervalSelectedBorderColor,lineWidth:i.hollowIntervalSelectedBorder,strokeOpacity:i.hollowIntervalSelectedBorderOpacity},inactive:{stroke:i.hollowIntervalInactiveBorderColor,lineWidth:i.hollowIntervalInactiveBorder,strokeOpacity:i.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:i.lineBorderColor,lineWidth:i.lineBorder,strokeOpacity:i.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:i.lineActiveBorder},selected:{lineWidth:i.lineSelectedBorder},inactive:{strokeOpacity:i.lineInactiveBorderOpacity}}},s=ya(i),l=Fa(i);return{background:i.backgroundColor,defaultColor:i.brandColor,subColor:i.subColor,semanticRed:i.paletteSemanticRed,semanticGreen:i.paletteSemanticGreen,padding:"auto",fontFamily:i.fontFamily,columnWidthRatio:1/2,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:i.paletteQualitative10,colors20:i.paletteQualitative20,sequenceColors:i.paletteSequence,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:function(f){var d=f.geometry.coordinate;if(d.isPolar&&d.isTransposed){var m=vd(f.getModel(),d),x=m.startAngle,A=m.endAngle,P=(x+A)/2,k=7.5,B=k*Math.cos(P),U=k*Math.sin(P);return{matrix:mo.vs(null,[["t",B,U]])}}return t.interval.selected}}},"hollow-rect":{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},line:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},tick:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},funnel:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}},pyramid:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},line:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},dot:{default:{style:(0,M.pi)((0,M.pi)({},t.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:(0,M.pi)((0,M.pi)({},t.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:(0,M.pi)((0,M.pi)({},t.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:(0,M.pi)((0,M.pi)({},t.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:(0,M.pi)((0,M.pi)({},t.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:(0,M.pi)((0,M.pi)({},t.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:(0,M.pi)((0,M.pi)({},t.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:(0,M.pi)((0,M.pi)({},t.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hvh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},polygon:{polygon:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},point:{circle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},square:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},bowtie:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},diamond:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},hexagon:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},triangle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"triangle-down":{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"hollow-circle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-square":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-bowtie":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-diamond":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-hexagon":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle-down":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},cross:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},tick:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},plus:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},hyphen:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},line:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}}},area:{area:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},smooth:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},line:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"smooth-line":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}},schema:{candle:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},box:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}}},edge:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},arc:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},violin:{violin:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hollow:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"hollow-smooth":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}}},components:{axis:{common:s,top:{position:"top",grid:null,title:null,verticalLimitLength:1/2},bottom:{position:"bottom",grid:null,title:null,verticalLimitLength:1/2},left:{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3},right:{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3},circle:{title:null,grid:(0,E.b$)({},s.grid,{line:{type:"line"}})},radius:{title:null,grid:(0,E.b$)({},s.grid,{line:{type:"circle"}})}},legend:{common:l,right:{layout:"vertical",padding:i.legendVerticalPadding},left:{layout:"vertical",padding:i.legendVerticalPadding},top:{layout:"horizontal",padding:i.legendHorizontalPadding},bottom:{layout:"horizontal",padding:i.legendHorizontalPadding},continuous:{title:null,background:null,track:{},rail:{type:"color",size:i.sliderRailHeight,defaultLength:i.sliderRailWidth,style:{fill:i.sliderRailFillColor,stroke:i.sliderRailBorderColor,lineWidth:i.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:i.sliderLabelTextFillColor,fontSize:i.sliderLabelTextFontSize,lineHeight:i.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:i.fontFamily}},handler:{size:i.sliderHandlerWidth,style:{fill:i.sliderHandlerFillColor,stroke:i.sliderHandlerBorderColor}},slidable:!0,padding:l.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:i.tooltipCrosshairsBorderColor,lineWidth:i.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(n={},n["".concat(Tl)]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:i.tooltipContainerFillColor,opacity:i.tooltipContainerFillOpacity,boxShadow:i.tooltipContainerShadow,borderRadius:"".concat(i.tooltipContainerBorderRadius,"px"),color:i.tooltipTextFillColor,fontSize:"".concat(i.tooltipTextFontSize,"px"),fontFamily:i.fontFamily,lineHeight:"".concat(i.tooltipTextLineHeight,"px"),padding:"0 12px 0 12px"},n["".concat(Hl)]={marginBottom:"12px",marginTop:"12px"},n["".concat(jl)]={margin:0,listStyleType:"none",padding:0},n["".concat(zf)]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},n["".concat(Ap)]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},n["".concat(Uf)]={display:"inline-block",float:"right",marginLeft:"30px"},n)},annotation:{arc:{style:{stroke:i.annotationArcBorderColor,lineWidth:i.annotationArcBorder},animate:!0},line:{style:{stroke:i.annotationLineBorderColor,lineDash:i.annotationLineDash,lineWidth:i.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:i.annotationTextFillColor,stroke:i.annotationTextBorderColor,lineWidth:i.annotationTextBorder,fontSize:i.annotationTextFontSize,textAlign:"start",fontFamily:i.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:i.annotationTextFillColor,stroke:i.annotationTextBorderColor,lineWidth:i.annotationTextBorder,fontSize:i.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:i.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:i.annotationRegionBorder,stroke:i.annotationRegionBorderColor,fill:i.annotationRegionFillColor,fillOpacity:i.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:i.brandColor,lineWidth:2}},line:{style:{stroke:i.annotationLineBorderColor,lineWidth:i.annotationLineBorder},length:i.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:i.annotationTextFillColor,stroke:i.annotationTextBorderColor,lineWidth:i.annotationTextBorder,fontSize:i.annotationTextFontSize,fontFamily:i.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:i.annotationRegionFillColor,fillOpacity:i.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:i.annotationTextFillColor,stroke:i.annotationTextBorderColor,lineWidth:i.annotationTextBorder,fontSize:i.annotationTextFontSize,fontFamily:i.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8],backgroundStyle:{fill:i.cSliderBackgroundFillColor,opacity:i.cSliderBackgroundFillOpacity},foregroundStyle:{fill:i.cSliderForegroundFillColor,opacity:i.cSliderForegroundFillOpacity},handlerStyle:{width:i.cSliderHandlerWidth,height:i.cSliderHandlerHeight,fill:i.cSliderHandlerFillColor,opacity:i.cSliderHandlerFillOpacity,stroke:i.cSliderHandlerBorderColor,lineWidth:i.cSliderHandlerBorder,radius:i.cSliderHandlerBorderRadius,highLightFill:i.cSliderHandlerHighlightFillColor},textStyle:{fill:i.cSliderTextFillColor,opacity:i.cSliderTextFillOpacity,fontSize:i.cSliderTextFontSize,lineHeight:i.cSliderTextLineHeight,fontWeight:i.cSliderTextFontWeight,stroke:i.cSliderTextBorderColor,lineWidth:i.cSliderTextBorder}}},scrollbar:{common:{padding:[8,8,8,8]},default:{style:{trackColor:i.scrollbarTrackFillColor,thumbColor:i.scrollbarThumbFillColor}},hover:{style:{thumbColor:i.scrollbarThumbHighlightFillColor}}}},labels:{offset:12,style:{fill:i.labelFillColor,fontSize:i.labelFontSize,fontFamily:i.fontFamily,stroke:i.labelBorderColor,lineWidth:i.labelBorder},fillColorDark:i.labelFillColorDark,fillColorLight:i.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:i.innerLabelFillColor,fontSize:i.innerLabelFontSize,fontFamily:i.fontFamily,stroke:i.innerLabelBorderColor,lineWidth:i.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:i.overflowLabelFillColor,fontSize:i.overflowLabelFontSize,fontFamily:i.fontFamily,stroke:i.overflowLabelBorderColor,lineWidth:i.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:i.labelLineBorder}},autoRotate:!0}}}var Ha={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},Wl={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},gg=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],Fc=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],xm=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],xf=function(i){i===void 0&&(i={});var n=i.paletteQualitative10,t=n===void 0?gg:n,s=i.paletteQualitative20,l=s===void 0?Fc:s,f=i.brandColor,d=f===void 0?t[0]:f,m={backgroundColor:"transparent",brandColor:d,subColor:"rgba(0,0,0,0.05)",paletteQualitative10:t,paletteQualitative20:l,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:xm,fontFamily:`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`,axisLineBorderColor:Ha[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:Ha[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:Wl[85],axisTickLineBorderColor:Ha[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:Ha[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:Ha[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:Ha[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:Ha[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:d,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:Ha[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:Ha[100],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:Ha[100],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:Ha[45],legendPageNavigatorTextFontSize:12,sliderRailFillColor:Ha[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:Ha[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Ha[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Ha[25],annotationArcBorderColor:Ha[15],annotationArcBorder:1,annotationLineBorderColor:Ha[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:Ha[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:Ha[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:Ha[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:Ha[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:Ha[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Wl[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:Ha[65],overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Wl[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:Ha[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#000",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(0,0,0,0)",scrollbarThumbFillColor:"rgba(0,0,0,0.15)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.2)",pointFillColor:d,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Wl[100],pointBorderOpacity:1,pointActiveBorderColor:Ha[100],pointSelectedBorder:2,pointSelectedBorderColor:Ha[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:d,hollowPointBorderOpacity:.95,hollowPointFillColor:Wl[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:Ha[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:Ha[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:d,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:d,areaFillOpacity:.25,areaActiveFillColor:d,areaActiveFillOpacity:.5,areaSelectedFillColor:d,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:d,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:Ha[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:Ha[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:d,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:Ha[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:Ha[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:d,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Wl[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:Ha[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:Ha[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return(0,M.pi)((0,M.pi)({},m),i)},bm=xf();function Sm(i){var n=i.styleSheet,t=n===void 0?{}:n,s=(0,M._T)(i,["styleSheet"]),l=xf(t);return(0,E.b$)({},Fo(l),s)}var d_=Sm({}),mg={default:d_};function Dp(i){return(0,E.U2)(mg,(0,E.vl)(i),mg.default)}function Wd(i,n){mg[(0,E.vl)(i)]=Sm(n)}function yg(i,n,t){var s=t.translate(i),l=t.translate(n);return(0,E.vQ)(s,l)}function Gd(i,n){var t=n.coordinate,s=n.getXScale(),l=s.range,f=l[l.length-1],d=l[0],m=t.invert(i),x=m.x;return t.isPolar&&x>(1+f)/2&&(x=d),s.translate(s.invert(x))}function N0(i,n,t){var s=t.coordinate,l=t.getYScale(),f=l.field,d=s.invert(n),m=l.invert(d.y),x=(0,E.sE)(i,function(A){var P=A[Ce];return P[f][0]<=m&&P[f][1]>=m});return x||i[i.length-1]}var Lu=(0,E.HP)(function(i){if(i.isCategory)return 1;for(var n=i.values,t=n.length,s=i.translate(n[0]),l=s,f=0;f<t;f++){var d=n[f],m=i.translate(d);m<s&&(s=m),m>l&&(l=m)}return(l-s)/(t-1)});function Ds(i,n,t){var s=n.getAttribute("position"),l=s.getFields(),f=n.scales,d=(0,E.mf)(t)||!t?l[0]:t,m=f[d],x=m?m.getText(i[d]):i[d]||d;return(0,E.mf)(t)?t(x,i):x}function z0(i){var n=(0,E.VO)(i.attributes);return(0,E.hX)(n,function(t){return(0,E.FX)(be,t.type)})}function Xd(i){var n,t,s=z0(i),l;try{for(var f=(0,M.XA)(s),d=f.next();!d.done;d=f.next()){var m=d.value,x=m.getScale(m.type);if(x&&x.isLinear){var A=(0,E.U2)(i.scaleDefs,x.field),P=dl(x,A,m.type,i.type);if(P!=="cat"){l=x;break}}}}catch(U){n={error:U}}finally{try{d&&!d.done&&(t=f.return)&&t.call(f)}finally{if(n)throw n.error}}var k=i.getXScale(),B=i.getYScale();return l||B||k}function v_(i,n){var t=n.field,s=i[t];if((0,E.kJ)(s)){var l=s.map(function(f){return n.getText(f)});return l.join("-")}return n.getText(s)}function ns(i,n){var t,s=n.getGroupScales();if(s.length&&(t=s[0]),t){var l=t.field;return t.getText(i[l])}var f=Xd(n);return kp(f)}function vu(i,n,t){if(n.length===0)return null;var s=t.type,l=t.getXScale(),f=t.getYScale(),d=l.field,m=f.field,x=null;if(s==="heatmap"||s==="point"){for(var A=t.coordinate,P=A.invert(i),k=l.invert(P.x),B=f.invert(P.y),U=1/0,W=0;W<n.length;W++){var ne=n[W],de=ne[Ce],ve=Math.pow(de[d]-k,2)+Math.pow(de[m]-B,2);ve<U&&(U=ve,x=ne)}return x}var $e=n[0],lt=n[n.length-1],vt=Gd(i,t),Ot=$e[Ce][d],fr=$e[Ce][m],Tr=lt[Ce][d],zr=f.isLinear&&(0,E.kJ)(fr);if((0,E.kJ)(Ot)){for(var W=0;W<n.length;W++){var cn=n[W],de=cn[Ce];if(l.translate(de[d][0])<=vt&&l.translate(de[d][1])>=vt)if(zr)(0,E.kJ)(x)||(x=[]),x.push(cn);else{x=cn;break}}(0,E.kJ)(x)&&(x=N0(x,i,t))}else{var Qr=void 0;if(!l.isLinear&&l.type!=="timeCat"){for(var W=0;W<n.length;W++){var cn=n[W],de=cn[Ce];if(yg(de[d],vt,l))if(zr)(0,E.kJ)(x)||(x=[]),x.push(cn);else{x=cn;break}else l.translate(de[d])<=vt&&(lt=cn,Qr=n[W+1])}(0,E.kJ)(x)&&(x=N0(x,i,t))}else{if((vt>l.translate(Tr)||vt<l.translate(Ot))&&(vt>l.max||vt<l.min))return null;for(var On=0,Qn=n.length-1,Hi=void 0;On<=Qn;){Hi=Math.floor((On+Qn)/2);var oa=n[Hi][Ce][d];if(yg(oa,vt,l))return n[Hi];l.translate(oa)<=l.translate(vt)?(On=Hi+1,lt=n[Hi],Qr=n[Hi+1]):(Qn===0&&(lt=n[0]),Qn=Hi-1)}}lt&&Qr&&Math.abs(l.translate(lt[Ce][d])-vt)>Math.abs(l.translate(Qr[Ce][d])-vt)&&(lt=Qr)}var eo=Lu(t.getXScale());return!x&&Math.abs(l.translate(lt[Ce][d])-vt)<=eo/2&&(x=lt),x}function $d(i,n,t,s){var l,f;t===void 0&&(t=""),s===void 0&&(s=!1);var d=i[Ce],m=Ds(d,n,t),x=n.tooltipOption,A=n.theme.defaultColor,P=[],k,B;function U(cn,Qr){if(s||!(0,E.UM)(Qr)&&Qr!==""){var On={title:m,data:d,mappingData:i,name:cn,value:Qr,color:i.color||A,marker:!0};P.push(On)}}if((0,E.Kn)(x)){var W=x.fields,ne=x.callback;if(ne){var de=W.map(function(cn){return i[Ce][cn]}),ve=ne.apply(void 0,(0,M.ev)([],(0,M.CR)(de),!1)),$e=(0,M.pi)({data:i[Ce],mappingData:i,title:m,color:i.color||A,marker:!0},ve);P.push($e)}else{var lt=n.scales;try{for(var vt=(0,M.XA)(W),Ot=vt.next();!Ot.done;Ot=vt.next()){var fr=Ot.value;if(!(0,E.UM)(d[fr])){var Tr=lt[fr];k=kp(Tr),B=Tr.getText(d[fr]),U(k,B)}}}catch(cn){l={error:cn}}finally{try{Ot&&!Ot.done&&(f=vt.return)&&f.call(vt)}finally{if(l)throw l.error}}}}else{var zr=Xd(n);B=v_(d,zr),k=ns(d,n),U(k,B)}return P}function gd(i,n,t,s){var l,f,d=s.showNil,m=[],x=i.dataArray;if(!(0,E.xb)(x)){i.sort(x);try{for(var A=(0,M.XA)(x),P=A.next();!P.done;P=A.next()){var k=P.value,B=vu(n,k,i);if(B){var U=i.getElementId(B),W=i.elementsMap[U];if(i.type==="heatmap"||W.visible){var ne=$d(B,i,t,d);ne.length&&m.push(ne)}}}}catch(de){l={error:de}}finally{try{P&&!P.done&&(f=A.return)&&f.call(A)}finally{if(l)throw l.error}}}return m}function Lp(i,n,t,s){var l=s.showNil,f=[],d=i.container,m=d.getShape(n.x,n.y);if(m&&m.get("visible")&&m.get("origin")){var x=m.get("origin").mappingData,A=$d(x,i,t,l);A.length&&f.push(A)}return f}function Em(i,n,t){var s,l,f=[],d=i.geometries,m=t.shared,x=t.title,A=t.reversed;try{for(var P=(0,M.XA)(d),k=P.next();!k.done;k=P.next()){var B=k.value;if(B.visible&&B.tooltipOption!==!1){var U=B.type,W=void 0;["point","edge","polygon"].includes(U)?W=Lp(B,n,x,t):["area","line","path","heatmap"].includes(U)||m!==!1?W=gd(B,n,x,t):W=Lp(B,n,x,t),W.length&&(A&&W.reverse(),f.push(W))}}}catch(ne){s={error:ne}}finally{try{k&&!k.done&&(l=P.return)&&l.call(P)}finally{if(s)throw s.error}}return f}function Mu(i,n,t){var s,l,f=Em(i,n,t);try{for(var d=(0,M.XA)(i.views),m=d.next();!m.done;m=d.next()){var x=m.value;f=f.concat(Em(x,n,t))}}catch(A){s={error:A}}finally{try{m&&!m.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}return f}function _g(i){return!(0,E.hj)(i)&&!(0,E.kJ)(i)}function Dc(i){i===void 0&&(i=0);var n=(0,E.kJ)(i)?i:[i];switch(n.length){case 0:n=[0,0,0,0];break;case 1:n=new Array(4).fill(n[0]);break;case 2:n=(0,M.ev)((0,M.ev)([],(0,M.CR)(n),!1),(0,M.CR)(n),!1);break;case 3:n=(0,M.ev)((0,M.ev)([],(0,M.CR)(n),!1),[n[1]],!1);break;default:n=n.slice(0,4);break}return n}var Yd={};function jh(i,n){Yd[i]=n}function mc(i){delete Yd[i]}function rl(){return Object.keys(Yd)}function Bu(i){return Yd[i]}var g_=function(){function i(n){this.option=this.wrapperOption(n)}return i.prototype.update=function(n){return this.option=this.wrapperOption(n),this},i.prototype.hasAction=function(n){var t=this.option.actions;return(0,E.G)(t,function(s){return s[0]===n})},i.prototype.create=function(n,t){var s=this.option,l=s.type,f=s.cfg,d=l==="theta",m=(0,M.pi)({start:n,end:t},f),x=od(d?"polar":l);return this.coordinate=new x(m),this.coordinate.type=l,d&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},i.prototype.adjust=function(n,t){return this.coordinate.update({start:n,end:t}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},i.prototype.rotate=function(n){return this.option.actions.push(["rotate",n]),this},i.prototype.reflect=function(n){return this.option.actions.push(["reflect",n]),this},i.prototype.scale=function(n,t){return this.option.actions.push(["scale",n,t]),this},i.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},i.prototype.getOption=function(){return this.option},i.prototype.getCoordinate=function(){return this.coordinate},i.prototype.wrapperOption=function(n){return(0,M.pi)({type:"rect",actions:[],cfg:{}},n)},i.prototype.execActions=function(n){var t=this,s=this.option.actions;(0,E.S6)(s,function(l){var f,d=(0,M.CR)(l),m=d[0],x=d.slice(1),A=(0,E.UM)(n)?!0:n.includes(m);A&&(f=t.coordinate)[m].apply(f,(0,M.ev)([],(0,M.CR)(x),!1))})},i}(),Wh=g_,Kd=function(){function i(n,t,s){this.view=n,this.gEvent=t,this.data=s,this.type=t.type}return i.fromData=function(n,t,s){return new i(n,new ze.Event(t,{}),s)},Object.defineProperty(i.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),i.prototype.toString=function(){return"[Event (type=".concat(this.type,")]")},i.prototype.clone=function(){return new i(this.view,this.gEvent,this.data)},i}(),Ya=Kd;function Bp(i){var n=i.getController("axis"),t=i.getController("legend"),s=i.getController("annotation"),l=i.getController("slider"),f=i.getController("scrollbar");[n,l,f,t,s].forEach(function(d){d&&d.layout()})}var m_=function(){function i(){this.scales=new Map,this.syncScales=new Map}return i.prototype.createScale=function(n,t,s,l){var f=s,d=this.getScaleMeta(l);if(t.length===0&&d){var m=d.scale,x={type:m.type};m.isCategory&&(x.values=m.values),f=(0,E.b$)(x,d.scaleDef,s)}var A=L0(n,t,f);return this.cacheScale(A,s,l),A},i.prototype.sync=function(n,t){var s=this;this.syncScales.forEach(function(l,f){var d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER,x=[];(0,E.S6)(l,function(A){var P=s.getScale(A);m=(0,E.hj)(P.max)?Math.max(m,P.max):m,d=(0,E.hj)(P.min)?Math.min(d,P.min):d,(0,E.S6)(P.values,function(k){x.includes(k)||x.push(k)})}),(0,E.S6)(l,function(A){var P=s.getScale(A);if(P.isContinuous)P.change({min:d,max:m,values:x});else if(P.isCategory){var k=P.range,B=s.getScaleMeta(A);x&&!(0,E.U2)(B,["scaleDef","range"])&&(k=Fp((0,E.b$)({},P,{values:x}),n,t)),P.change({values:x,range:k})}})})},i.prototype.cacheScale=function(n,t,s){var l=this.getScaleMeta(s);l&&l.scale.type===n.type?(Iv(l.scale,n),l.scaleDef=t):(l={key:s,scale:n,scaleDef:t},this.scales.set(s,l));var f=this.getSyncKey(l);if(l.syncKey=f,this.removeFromSyncScales(s),f){var d=this.syncScales.get(f);d||(d=[],this.syncScales.set(f,d)),d.push(s)}},i.prototype.getScale=function(n){var t=this.getScaleMeta(n);if(!t){var s=(0,E.Z$)(n.split("-")),l=this.syncScales.get(s);l&&l.length&&(t=this.getScaleMeta(l[0]))}return t&&t.scale},i.prototype.deleteScale=function(n){var t=this.getScaleMeta(n);if(t){var s=t.syncKey,l=this.syncScales.get(s);if(l&&l.length){var f=l.indexOf(n);f!==-1&&l.splice(f,1)}}this.scales.delete(n)},i.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},i.prototype.removeFromSyncScales=function(n){var t=this;this.syncScales.forEach(function(s,l){var f=s.indexOf(n);if(f!==-1)return s.splice(f,1),s.length===0&&t.syncScales.delete(l),!1})},i.prototype.getSyncKey=function(n){var t=n.scale,s=n.scaleDef,l=t.field,f=(0,E.U2)(s,["sync"]);return f===!0?l:f===!1?void 0:f},i.prototype.getScaleMeta=function(n){return this.scales.get(n)},i}(),h=function(){function i(n,t,s,l){n===void 0&&(n=0),t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=0),this.top=n,this.right=t,this.bottom=s,this.left=l}return i.instance=function(n,t,s,l){return n===void 0&&(n=0),t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=0),new i(n,t,s,l)},i.prototype.max=function(n){var t=(0,M.CR)(n,4),s=t[0],l=t[1],f=t[2],d=t[3];return this.top=Math.max(this.top,s),this.right=Math.max(this.right,l),this.bottom=Math.max(this.bottom,f),this.left=Math.max(this.left,d),this},i.prototype.shrink=function(n){var t=(0,M.CR)(n,4),s=t[0],l=t[1],f=t[2],d=t[3];return this.top+=s,this.right+=l,this.bottom+=f,this.left+=d,this},i.prototype.inc=function(n,t){var s=n.width,l=n.height;switch(t){case me.TOP:case me.TOP_LEFT:case me.TOP_RIGHT:this.top+=l;break;case me.RIGHT:case me.RIGHT_TOP:case me.RIGHT_BOTTOM:this.right+=s;break;case me.BOTTOM:case me.BOTTOM_LEFT:case me.BOTTOM_RIGHT:this.bottom+=l;break;case me.LEFT:case me.LEFT_TOP:case me.LEFT_BOTTOM:this.left+=s;break;default:break}return this},i.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},i.prototype.clone=function(){return new(i.bind.apply(i,(0,M.ev)([void 0],(0,M.CR)(this.getPadding()),!1)))},i}();function v(i){var n=i.padding;if(!_g(n))return new(h.bind.apply(h,(0,M.ev)([void 0],(0,M.CR)(Dc(n)),!1)));var t=i.viewBBox,s=new h,l=[],f=[],d=[];return(0,E.S6)(i.getComponents(),function(m){var x=m.type;x===ke.AXIS?l.push(m):[ke.LEGEND,ke.SLIDER,ke.SCROLLBAR].includes(x)?f.push(m):x!==ke.GRID&&x!==ke.TOOLTIP&&d.push(m)}),(0,E.S6)(l,function(m){var x=m.component,A=x.getLayoutBBox(),P=new $o(A.x,A.y,A.width,A.height),k=P.exceed(t);s.max(k)}),(0,E.S6)(f,function(m){var x=m.component,A=m.direction,P=x.getLayoutBBox(),k=x.get("padding"),B=new $o(P.x,P.y,P.width,P.height).expand(k);s.inc(B,A)}),(0,E.S6)(d,function(m){var x=m.component,A=m.direction,P=x.getLayoutBBox(),k=new $o(P.x,P.y,P.width,P.height);s.inc(k,A)}),s}function _(i,n,t){var s=t.instance();n.forEach(function(l){l.autoPadding=s.max(l.autoPadding.getPadding())})}var R=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,{visible:t.visible})||this;s.views=[],s.geometries=[],s.controllers=[],s.interactions={},s.limitInPlot=!1,s.options={data:[],animate:!0},s.usedControllers=rl(),s.scalePool=new m_,s.layoutFunc=Bp,s.isPreMouseInPlot=!1,s.isDataChanged=!1,s.isCoordinateChanged=!1,s.createdScaleKeys=new Map,s.onCanvasEvent=function(lt){var vt=lt.name;if(!vt.includes(":")){var Ot=s.createViewEvent(lt);s.doPlotEvent(Ot),s.emit(vt,Ot)}},s.onDelegateEvents=function(lt){var vt=lt.name;if(vt.includes(":")){var Ot=s.createViewEvent(lt);s.emit(vt,Ot)}};var l=t.id,f=l===void 0?(0,E.EL)("view"):l,d=t.parent,m=t.canvas,x=t.backgroundGroup,A=t.middleGroup,P=t.foregroundGroup,k=t.region,B=k===void 0?{start:{x:0,y:0},end:{x:1,y:1}}:k,U=t.padding,W=t.appendPadding,ne=t.theme,de=t.options,ve=t.limitInPlot,$e=t.syncViewPadding;return s.parent=d,s.canvas=m,s.backgroundGroup=x,s.middleGroup=A,s.foregroundGroup=P,s.region=B,s.padding=U,s.appendPadding=W,s.options=(0,M.pi)((0,M.pi)({},s.options),de),s.limitInPlot=ve,s.id=f,s.syncViewPadding=$e,s.themeObject=(0,E.Kn)(ne)?(0,E.b$)({},Dp("default"),Sm(ne)):Dp(ne),s.init(),s}return n.prototype.setLayout=function(t){this.layoutFunc=t},n.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},n.prototype.render=function(t,s){t===void 0&&(t=!1),this.emit(Le.BEFORE_RENDER,Ya.fromData(this,Le.BEFORE_RENDER,s)),this.paint(t),this.emit(Le.AFTER_RENDER,Ya.fromData(this,Le.AFTER_RENDER,s)),this.visible===!1&&this.changeVisible(!1)},n.prototype.clear=function(){var t=this;this.emit(Le.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var s=this.geometries,l=0;l<s.length;l++)s[l].clear(),s[l].container.remove(!0),s[l].labelsContainer.remove(!0);this.geometries=[];for(var f=this.controllers,l=0;l<f.length;l++)f[l].name==="annotation"?f[l].clear(!0):f[l].clear();this.createdScaleKeys.forEach(function(m,x){t.getRootView().scalePool.deleteScale(x)}),this.createdScaleKeys.clear();for(var d=this.views,l=0;l<d.length;l++)d[l].clear();this.emit(Le.AFTER_CLEAR)},n.prototype.destroy=function(){this.emit(Le.BEFORE_DESTROY);var t=this.interactions;(0,E.S6)(t,function(m){m&&m.destroy()}),this.clear();for(var s=this.controllers,l=0,f=s.length;l<f;l++){var d=s[l];d.destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),i.prototype.destroy.call(this)},n.prototype.changeVisible=function(t){i.prototype.changeVisible.call(this,t);for(var s=this.geometries,l=0,f=s.length;l<f;l++){var d=s[l];d.changeVisible(t)}for(var m=this.controllers,l=0,f=m.length;l<f;l++){var x=m[l];x.changeVisible(t)}return this.foregroundGroup.set("visible",t),this.middleGroup.set("visible",t),this.backgroundGroup.set("visible",t),this.getCanvas().draw(),this},n.prototype.data=function(t){return(0,E.t8)(this.options,"data",t),this.isDataChanged=!0,this},n.prototype.source=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(t)},n.prototype.filter=function(t,s){return(0,E.mf)(s)?((0,E.t8)(this.options,["filters",t],s),this):(!s&&(0,E.U2)(this.options,["filters",t])&&delete this.options.filters[t],this)},n.prototype.axis=function(t,s){return(0,E.jn)(t)?(0,E.t8)(this.options,["axes"],t):(0,E.t8)(this.options,["axes",t],s),this},n.prototype.legend=function(t,s){return(0,E.jn)(t)?(0,E.t8)(this.options,["legends"],t):(0,E.HD)(t)?((0,E.t8)(this.options,["legends",t],s),(0,E.PO)(s)&&(s!=null&&s.selected)&&(0,E.t8)(this.options,["filters",t],function(l){var f;return(f=s==null?void 0:s.selected[l])!==null&&f!==void 0?f:!0})):(0,E.t8)(this.options,["legends"],t),this},n.prototype.scale=function(t,s){var l=this;return(0,E.HD)(t)?(0,E.t8)(this.options,["scales",t],s):(0,E.Kn)(t)&&(0,E.S6)(t,function(f,d){(0,E.t8)(l.options,["scales",d],f)}),this},n.prototype.tooltip=function(t){return(0,E.t8)(this.options,"tooltip",t),this},n.prototype.annotation=function(){return this.getController("annotation")},n.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},n.prototype.coordinate=function(t,s){return(0,E.HD)(t)?(0,E.t8)(this.options,"coordinate",{type:t,cfg:s}):(0,E.t8)(this.options,"coordinate",t),this.coordinateController.update(this.options.coordinate),this.coordinateController},n.prototype.coord=function(t,s){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(t,s)},n.prototype.facet=function(t,s){this.facetInstance&&this.facetInstance.destroy();var l=ni(t);if(!l)throw new Error("facet '".concat(t,"' is not exist!"));return this.facetInstance=new l(this,(0,M.pi)((0,M.pi)({},s),{type:t})),this},n.prototype.animate=function(t){return(0,E.t8)(this.options,"animate",t),this},n.prototype.updateOptions=function(t){return this.clear(),(0,E.CD)(this.options,t),this.views.forEach(function(s){return s.destroy()}),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},n.prototype.option=function(t,s){if(n.prototype[t])throw new Error(`Can't use built in variable name "`.concat(t,'", please change another one.'));return(0,E.t8)(this.options,t,s),this},n.prototype.theme=function(t){return this.themeObject=(0,E.Kn)(t)?(0,E.b$)({},this.themeObject,Sm(t)):Dp(t),this},n.prototype.interaction=function(t,s){var l=this.interactions[t];l&&l.destroy();var f=ji(t,this,s);return f&&(f.init(),this.interactions[t]=f),this},n.prototype.removeInteraction=function(t){var s=this.interactions[t];s&&(s.destroy(),this.interactions[t]=void 0)},n.prototype.changeData=function(t){this.isDataChanged=!0,this.emit(Le.BEFORE_CHANGE_DATA,Ya.fromData(this,Le.BEFORE_CHANGE_DATA,null)),this.data(t),this.paint(!0);for(var s=this.views,l=0,f=s.length;l<f;l++){var d=s[l];d.changeData(t)}this.emit(Le.AFTER_CHANGE_DATA,Ya.fromData(this,Le.AFTER_CHANGE_DATA,null))},n.prototype.createView=function(t){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var s={data:this.options.data,scales:(0,E.d9)(this.options.scales),axes:(0,E.d9)(this.options.axes),coordinate:(0,E.d9)(this.coordinateController.getOption()),tooltip:(0,E.d9)(this.options.tooltip),legends:(0,E.d9)(this.options.legends),animate:this.options.animate,visible:this.visible},l=new n((0,M.pi)((0,M.pi)({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:Pe.BG}),middleGroup:this.middleGroup.addGroup({zIndex:Pe.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:Pe.FORE}),theme:this.themeObject,padding:this.padding},t),{options:(0,M.pi)((0,M.pi)({},s),(0,E.U2)(t,"options",{}))}));return this.views.push(l),l},n.prototype.view=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(t)},n.prototype.removeView=function(t){var s=(0,E.Od)(this.views,function(l){return l===t})[0];return s&&s.destroy(),s},n.prototype.getCoordinate=function(){return this.coordinateInstance},n.prototype.getTheme=function(){return this.themeObject},n.prototype.getXScale=function(){var t=this.geometries[0];return t?t.getXScale():null},n.prototype.getYScales=function(){var t={},s=[];return this.geometries.forEach(function(l){var f=l.getYScale(),d=f.field;t[d]||(t[d]=!0,s.push(f))}),s},n.prototype.getScalesByDim=function(t){for(var s=this.geometries,l={},f=0,d=s.length;f<d;f++){var m=s[f],x=t==="x"?m.getXScale():m.getYScale();x&&!l[x.field]&&(l[x.field]=x)}return l},n.prototype.getScale=function(t,s){var l=s||this.getScaleKey(t);return this.getRootView().scalePool.getScale(l)},n.prototype.getScaleByField=function(t,s){return this.getScale(t,s)},n.prototype.getOptions=function(){return this.options},n.prototype.getData=function(){return this.filteredData},n.prototype.getOriginalData=function(){return this.options.data},n.prototype.getPadding=function(){return this.autoPadding.getPadding()},n.prototype.getGeometries=function(){return this.geometries},n.prototype.getElements=function(){return(0,E.u4)(this.geometries,function(t,s){return t.concat(s.getElements())},[])},n.prototype.getElementsBy=function(t){return this.getElements().filter(function(s){return t(s)})},n.prototype.getLayer=function(t){return t===fe.BG?this.backgroundGroup:t===fe.MID?this.middleGroup:t===fe.FORE?this.foregroundGroup:this.foregroundGroup},n.prototype.isPointInPlot=function(t){return pg(this.getCoordinate(),t)},n.prototype.getLegendAttributes=function(){return(0,E.xH)(this.geometries.map(function(t){return t.getGroupAttributes()}))},n.prototype.getGroupScales=function(){var t=this.geometries.map(function(s){return s.getGroupScales()});return Vf((0,E.xH)(t))},n.prototype.getCanvas=function(){return this.getRootView().canvas},n.prototype.getRootView=function(){for(var t=this;;){if(t.parent){t=t.parent;continue}break}return t},n.prototype.getXY=function(t){var s=this.getCoordinate(),l=this.getScalesByDim("x"),f=this.getScalesByDim("y"),d,m;if((0,E.S6)(t,function(x,A){l[A]&&(d=l[A].scale(x)),f[A]&&(m=f[A].scale(x))}),!(0,E.UM)(d)&&!(0,E.UM)(m))return s.convert({x:d,y:m})},n.prototype.getController=function(t){return(0,E.sE)(this.controllers,function(s){return s.name===t})},n.prototype.showTooltip=function(t){var s=this.getController("tooltip");return s&&s.showTooltip(t),this},n.prototype.hideTooltip=function(){var t=this.getController("tooltip");return t&&t.hideTooltip(),this},n.prototype.lockTooltip=function(){var t=this.getController("tooltip");return t&&t.lockTooltip(),this},n.prototype.unlockTooltip=function(){var t=this.getController("tooltip");return t&&t.unlockTooltip(),this},n.prototype.isTooltipLocked=function(){var t=this.getController("tooltip");return t&&t.isTooltipLocked()},n.prototype.getTooltipItems=function(t){var s=this.getController("tooltip");return s?s.getTooltipItems(t):[]},n.prototype.getSnapRecords=function(t){for(var s=this.geometries,l=[],f=0,d=s.length;f<d;f++){var m=s[f],x=m.dataArray;m.sort(x);for(var A=void 0,P=0,k=x.length;P<k;P++){var B=x[P];A=vu(t,B,m),A&&l.push(A)}}for(var U=this.views,f=0,d=U.length;f<d;f++){var W=U[f],ne=W.getSnapRecords(t);l=l.concat(ne)}return l},n.prototype.getComponents=function(){for(var t=[],s=this.controllers,l=0,f=s.length;l<f;l++){var d=s[l];t=t.concat(d.getComponents())}return t},n.prototype.filterData=function(t){var s=this.options.filters;return(0,E.dp)(s)===0?t:(0,E.hX)(t,function(l,f){var d=Object.keys(s);return d.every(function(m){var x=s[m];return x(l[m],l,f)})})},n.prototype.filterFieldData=function(t,s){var l=this.options.filters,f=(0,E.U2)(l,t);return(0,E.o8)(f)?s:s.filter(function(d,m){return f(d[t],d,m)})},n.prototype.adjustCoordinate=function(){var t=this.getCoordinate(),s=t.start,l=t.end,f=this.coordinateBBox.bl,d=this.coordinateBBox.tr;if((0,E.Xy)(s,f)&&(0,E.Xy)(l,d)){this.isCoordinateChanged=!1;return}this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(f,d)},n.prototype.paint=function(t){this.renderDataRecursive(t),this.syncScale(),this.emit(Le.BEFORE_PAINT),this.renderPaddingRecursive(t),this.renderLayoutRecursive(t),this.renderBackgroundStyleShape(),this.renderPaintRecursive(t),this.emit(Le.AFTER_PAINT),this.isDataChanged=!1},n.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var t=(0,E.U2)(this.themeObject,"background");if(t){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var s=this.viewBBox,l=s.x,f=s.y,d=s.width,m=s.height;this.backgroundStyleRectShape.attr({fill:t,x:l,y:f,width:d,height:m})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},n.prototype.renderPaddingRecursive=function(t){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(t),this.autoPadding=v(this).shrink(Dc(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();var s=this.controllers.find(function(x){return x.name==="tooltip"});s.update();for(var l=this.views,f=0,d=l.length;f<d;f++){var m=l[f];m.renderPaddingRecursive(t)}},n.prototype.renderLayoutRecursive=function(t){var s=this.syncViewPadding===!0?_:(0,E.mf)(this.syncViewPadding)?this.syncViewPadding:void 0;s&&(s(this,this.views,h),this.views.forEach(function(x){x.coordinateBBox=x.viewBBox.shrink(x.autoPadding.getPadding()),x.adjustCoordinate()})),this.doLayout();for(var l=this.views,f=0,d=l.length;f<d;f++){var m=l[f];m.renderLayoutRecursive(t)}},n.prototype.renderPaintRecursive=function(t){var s=this.middleGroup;if(this.limitInPlot){var l=Rv(this.coordinateInstance),f=l.type,d=l.attrs;s.setClip({type:f,attrs:d})}else s.setClip(void 0);this.paintGeometries(t),this.renderComponents(t);for(var m=this.views,x=0,A=m.length;x<A;x++){var P=m[x];P.renderPaintRecursive(t)}},n.prototype.createScale=function(t,s,l,f){var d=(0,E.U2)(this.options.scales,[t]),m=(0,M.pi)((0,M.pi)({},d),l);return this.parent?this.parent.createScale(t,s,m,f):this.scalePool.createScale(t,s,m,f)},n.prototype.renderDataRecursive=function(t){this.doFilterData(),this.createCoordinate(),this.initGeometries(t),this.renderFacet(t);for(var s=this.views,l=0,f=s.length;l<f;l++){var d=s[l];d.renderDataRecursive(t)}},n.prototype.calculateViewBBox=function(){var t,s,l,f;if(this.parent){var d=this.parent.coordinateBBox;t=d.x,s=d.y,l=d.width,f=d.height}else t=0,s=0,l=this.canvas.get("width"),f=this.canvas.get("height");var m=this.region,x=m.start,A=m.end,P=new $o(t+l*x.x,s+f*x.y,l*(A.x-x.x),f*(A.y-x.y));(!this.viewBBox||!this.viewBBox.isEqual(P))&&(this.viewBBox=new $o(t+l*x.x,s+f*x.y,l*(A.x-x.x),f*(A.y-x.y))),this.coordinateBBox=this.viewBBox},n.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},n.prototype.initComponentController=function(){for(var t=this.usedControllers,s=0,l=t.length;s<l;s++){var f=t[s],d=Bu(f);d&&this.controllers.push(new d(this))}},n.prototype.createViewEvent=function(t){var s=t.shape,l=t.name,f=s?s.get("origin"):null,d=new Ya(this,t,f);return d.type=l,d},n.prototype.doPlotEvent=function(t){var s=t.type,l=t.x,f=t.y,d={x:l,y:f},m=["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"];if(m.includes(s)){var x=this.isPointInPlot(d),A=t.clone();if(x){var P="plot:".concat(s);A.type=P,this.emit(P,A),(s==="mouseleave"||s==="touchend")&&(this.isPreMouseInPlot=!1)}s==="mousemove"||s==="touchmove"?(this.isPreMouseInPlot&&!x?(s==="mousemove"&&(A.type=ft.MOUSE_LEAVE,this.emit(ft.MOUSE_LEAVE,A)),A.type=ft.LEAVE,this.emit(ft.LEAVE,A)):!this.isPreMouseInPlot&&x&&(s==="mousemove"&&(A.type=ft.MOUSE_ENTER,this.emit(ft.MOUSE_ENTER,A)),A.type=ft.ENTER,this.emit(ft.ENTER,A)),this.isPreMouseInPlot=x):(s==="mouseleave"||s==="touchend")&&this.isPreMouseInPlot&&(s==="mouseleave"&&(A.type=ft.MOUSE_LEAVE,this.emit(ft.MOUSE_LEAVE,A)),A.type=ft.LEAVE,this.emit(ft.LEAVE,A),this.isPreMouseInPlot=!1)}},n.prototype.doFilterData=function(){var t=this.options.data;this.filteredData=this.filterData(t)},n.prototype.initGeometries=function(t){this.createOrUpdateScales();for(var s=this.getCoordinate(),l=(0,E.U2)(this.options,"scales",{}),f=this.geometries,d=0,m=f.length;d<m;d++){var x=f[d];x.scales=this.getGeometryScales();var A={coordinate:s,scaleDefs:l,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};t?x.update(A):x.init(A)}this.adjustScales()},n.prototype.createOrUpdateScales=function(){for(var t=this.getScaleFields(),s=this.getGroupedFields(),l=this.getOptions(),f=l.data,d=l.scales,m=d===void 0?{}:d,x=this.filteredData,A=0,P=t.length;A<P;A++){var k=t[A],B=m[k],U=this.getScaleKey(k);this.createScale(k,s.includes(k)?f:x,B,U),this.createdScaleKeys.set(U,!0)}},n.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},n.prototype.getGeometryScales=function(){for(var t=this.getScaleFields(),s={},l=0;l<t.length;l++){var f=t[l];s[f]=this.getScaleByField(f)}return s},n.prototype.getScaleFields=function(){for(var t=[],s=new Map,l=this.geometries,f=0;f<l.length;f++){var d=l[f],m=d.getScaleFields();Vf(m,t,s)}return t},n.prototype.getGroupedFields=function(){for(var t=[],s=new Map,l=this.geometries,f=0;f<l.length;f++){var d=l[f],m=d.getGroupFields();Vf(m,t,s)}return t},n.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},n.prototype.adjustCategoryScaleRange=function(){var t=this,s=(0,M.ev)([this.getXScale()],(0,M.CR)(this.getYScales()),!1).filter(function(d){return!!d}),l=this.getCoordinate(),f=this.options.scales;(0,E.S6)(s,function(d){var m=d.field,x=d.values,A=d.isCategory,P=d.isIdentity;(A||P)&&x&&!(0,E.U2)(f,[m,"range"])&&(d.range=Fp(d,l,t.theme))})},n.prototype.initComponents=function(t){for(var s=this.controllers,l=0;l<s.length;l++){var f=s[l];t?f.update():(f.clear(),f.render())}},n.prototype.doLayout=function(){this.layoutFunc(this)},n.prototype.createCoordinate=function(){var t=this.coordinateBBox.bl,s=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(t,s)},n.prototype.paintGeometries=function(t){for(var s=this.options.animate,l=this.getCoordinate(),f={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},d=this.geometries,m=0;m<d.length;m++){var x=d[m];x.coordinate=l,x.canvasRegion=f,s||x.animate(!1),x.paint(t)}},n.prototype.renderComponents=function(t){for(var s=this.getComponents(),l=0;l<s.length;l++){var f=s[l];f.component.render()}},n.prototype.renderFacet=function(t){this.facetInstance&&(t?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},n.prototype.initOptions=function(){var t=this,s=this.options,l=s.geometries,f=l===void 0?[]:l,d=s.interactions,m=d===void 0?[]:d,x=s.views,A=x===void 0?[]:x,P=s.annotations,k=P===void 0?[]:P,B=s.coordinate,U=s.events,W=s.facets;this.coordinateController?B&&this.coordinateController.update(B):this.coordinateController=new Wh(B);for(var ne=0;ne<f.length;ne++){var de=f[ne];this.createGeometry(de)}for(var ve=0;ve<m.length;ve++){var $e=m[ve],lt=$e.type,vt=$e.cfg;this.interaction(lt,vt)}for(var Ot=0;Ot<A.length;Ot++){var fr=A[Ot];this.createView(fr)}for(var Tr=this.getController("annotation"),zr=0;zr<k.length;zr++){var cn=k[zr];Tr.annotation(cn)}U&&(0,E.S6)(U,function(Qr,On){t.on(On,Qr)}),W&&(0,E.S6)(W,function(Qr){var On=Qr.type,Qn=(0,M._T)(Qr,["type"]);t.facet(On,Qn)})},n.prototype.createGeometry=function(t){var s=t.type,l=t.cfg,f=l===void 0?{}:l;if(this[s]){var d=this[s](f);(0,E.S6)(t,function(m,x){(0,E.mf)(d[x])&&d[x](m)})}},n.prototype.getScaleKey=function(t){return"".concat(this.id,"-").concat(t)},n}(Me);function L(i,n){R.prototype[i.toLowerCase()]=function(t){t===void 0&&(t={});var s=(0,M.pi)({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},t),l=new n(s);return this.geometries.push(l),l}}var z=R,j=function(i){(0,M.ZT)(n,i);function n(t){var s=this,l=t.container,f=t.width,d=t.height,m=t.autoFit,x=m===void 0?!1:m,A=t.padding,P=t.appendPadding,k=t.renderer,B=k===void 0?"canvas":k,U=t.pixelRatio,W=t.localRefresh,ne=W===void 0?!0:W,de=t.visible,ve=de===void 0?!0:de,$e=t.supportCSSTransform,lt=$e===void 0?!1:$e,vt=t.defaultInteractions,Ot=vt===void 0?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text","axis-description"]:vt,fr=t.options,Tr=t.limitInPlot,zr=t.theme,cn=t.syncViewPadding,Qr=(0,E.HD)(l)?document.getElementById(l):l,On=(0,Ze.Z)('<div style="position:relative;"></div>');Qr.appendChild(On);var Qn=ye(Qr,x,f,d),Hi=Qe(B),oa=new Hi.Canvas((0,M.pi)({container:On,pixelRatio:U,localRefresh:ne,supportCSSTransform:lt},Qn));return s=i.call(this,{parent:null,canvas:oa,backgroundGroup:oa.addGroup({zIndex:Pe.BG}),middleGroup:oa.addGroup({zIndex:Pe.MID}),foregroundGroup:oa.addGroup({zIndex:Pe.FORE}),padding:A,appendPadding:P,visible:ve,options:fr,limitInPlot:Tr,theme:zr,syncViewPadding:cn})||this,s.onResize=(0,E.Ds)(function(){s.forceFit()},300),s.ele=Qr,s.canvas=oa,s.width=Qn.width,s.height=Qn.height,s.autoFit=x,s.localRefresh=ne,s.renderer=B,s.wrapperElement=On,s.updateCanvasStyle(),s.bindAutoFit(),s.initDefaultInteractions(Ot),s}return n.prototype.initDefaultInteractions=function(t){var s=this;(0,E.S6)(t,function(l){s.interaction(l)})},n.prototype.aria=function(t){var s="aria-label";t===!1?this.ele.removeAttribute(s):this.ele.setAttribute(s,t.label)},n.prototype.changeSize=function(t,s){return this.width===t&&this.height===s?this:(this.emit(Le.BEFORE_CHANGE_SIZE),this.width=t,this.height=s,this.canvas.changeSize(t,s),this.render(!0),this.emit(Le.AFTER_CHANGE_SIZE),this)},n.prototype.clear=function(){i.prototype.clear.call(this),this.aria(!1)},n.prototype.destroy=function(){i.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),Te(this.wrapperElement),this.wrapperElement=null},n.prototype.changeVisible=function(t){return i.prototype.changeVisible.call(this,t),this.wrapperElement.style.display=t?"":"none",this},n.prototype.forceFit=function(){if(!this.destroyed){var t=ye(this.ele,!0,this.width,this.height),s=t.width,l=t.height;this.changeSize(s,l)}},n.prototype.updateCanvasStyle=function(){(0,ie.Z)(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},n.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},n.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},n}(z),ae=j,Se=function(){function i(n){this.visible=!0,this.components=[],this.view=n}return i.prototype.clear=function(n){(0,E.S6)(this.components,function(t){t.component.destroy()}),this.components=[]},i.prototype.destroy=function(){this.clear()},i.prototype.getComponents=function(){return this.components},i.prototype.changeVisible=function(n){this.visible!==n&&(this.components.forEach(function(t){n?t.component.show():t.component.hide()}),this.visible=n)},i}();function He(i){for(var n=[],t=function(l){var f=i[l],d=(0,E.sE)(n,function(m){return m.color===f.color&&m.name===f.name&&m.value===f.value&&m.title===f.title});d||n.push(f)},s=0;s<i.length;s++)t(s);return n}var rt=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.isLocked=!1,t}return Object.defineProperty(n.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n.prototype.isVisible=function(){var t=this.view.getOptions().tooltip;return t!==!1},n.prototype.render=function(){},n.prototype.showTooltip=function(t){if(this.point=t,!!this.isVisible()){var s=this.view,l=this.getTooltipItems(t);if(!l.length){this.hideTooltip();return}var f=this.getTitle(l),d={x:l[0].x,y:l[0].y};s.emit("tooltip:show",Ya.fromData(s,"tooltip:show",(0,M.pi)({items:l,title:f},t)));var m=this.getTooltipCfg(),x=m.follow,A=m.showMarkers,P=m.showCrosshairs,k=m.showContent,B=m.marker,U=this.items,W=this.title;if(!(0,E.Xy)(W,f)||!(0,E.Xy)(U,l)?(s.emit("tooltip:change",Ya.fromData(s,"tooltip:change",(0,M.pi)({items:l,title:f},t))),((0,E.mf)(k)?k(l):k)&&(this.tooltip||this.renderTooltip(),this.tooltip.update((0,E.CD)({},m,{items:this.getItemsAfterProcess(l),title:f},x?t:{})),this.tooltip.show()),A&&this.renderTooltipMarkers(l,B)):(this.tooltip&&x&&(this.tooltip.update(t),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=l,this.title=f,P){var ne=(0,E.U2)(m,["crosshairs","follow"],!1);this.renderCrosshairs(ne?t:d,m)}}},n.prototype.hideTooltip=function(){var t=this.getTooltipCfg().follow;if(!t){this.point=null;return}var s=this.tooltipMarkersGroup;s&&s.hide();var l=this.xCrosshair,f=this.yCrosshair;l&&l.hide(),f&&f.hide();var d=this.tooltip;d&&d.hide(),this.view.emit("tooltip:hide",Ya.fromData(this.view,"tooltip:hide",{})),this.point=null},n.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},n.prototype.unlockTooltip=function(){this.isLocked=!1;var t=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(t.capture)},n.prototype.isTooltipLocked=function(){return this.isLocked},n.prototype.clear=function(){var t=this,s=t.tooltip,l=t.xCrosshair,f=t.yCrosshair,d=t.tooltipMarkersGroup;s&&(s.hide(),s.clear()),l&&l.clear(),f&&f.clear(),d&&d.clear(),s!=null&&s.get("customContent")&&(this.tooltip.destroy(),this.tooltip=null),this.title=null,this.items=null},n.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},n.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},n.prototype.changeVisible=function(t){if(this.visible!==t){var s=this,l=s.tooltip,f=s.tooltipMarkersGroup,d=s.xCrosshair,m=s.yCrosshair;t?(l&&l.show(),f&&f.show(),d&&d.show(),m&&m.show()):(l&&l.hide(),f&&f.hide(),d&&d.hide(),m&&m.hide()),this.visible=t}},n.prototype.getTooltipItems=function(t){var s,l,f,d,m,x,A=this.findItemsFromView(this.view,t);if(A.length){A=(0,E.xH)(A);try{for(var P=(0,M.XA)(A),k=P.next();!k.done;k=P.next()){var B=k.value;try{for(var U=(f=void 0,(0,M.XA)(B)),W=U.next();!W.done;W=U.next()){var ne=W.value,de=ne.mappingData,ve=de.x,$e=de.y;ne.x=(0,E.kJ)(ve)?ve[ve.length-1]:ve,ne.y=(0,E.kJ)($e)?$e[$e.length-1]:$e}}catch(Qr){f={error:Qr}}finally{try{W&&!W.done&&(d=U.return)&&d.call(U)}finally{if(f)throw f.error}}}}catch(Qr){s={error:Qr}}finally{try{k&&!k.done&&(l=P.return)&&l.call(P)}finally{if(s)throw s.error}}var lt=this.getTooltipCfg().shared;if(lt===!1&&A.length>1){var vt=A[0],Ot=Math.abs(t.y-vt[0].y);try{for(var fr=(0,M.XA)(A),Tr=fr.next();!Tr.done;Tr=fr.next()){var zr=Tr.value,cn=Math.abs(t.y-zr[0].y);cn<=Ot&&(vt=zr,Ot=cn)}}catch(Qr){m={error:Qr}}finally{try{Tr&&!Tr.done&&(x=fr.return)&&x.call(fr)}finally{if(m)throw m.error}}A=[vt]}return He((0,E.xH)(A))}return[]},n.prototype.layout=function(){},n.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var t=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}})}},n.prototype.isCursorEntered=function(t){if(this.tooltip){var s=this.tooltip.getContainer(),l=this.tooltip.get("capture");if(s&&l){var f=s.getBoundingClientRect(),d=f.x,m=f.y,x=f.width,A=f.height;return new $o(d,m,x,A).isPointIn(t)}}return!1},n.prototype.getTooltipCfg=function(){var t=this.view,s=t.getOptions().tooltip,l=this.processCustomContent(s),f=t.getTheme(),d=(0,E.U2)(f,["components","tooltip"],{}),m=(0,E.U2)(l,"enterable",d.enterable);return(0,E.b$)({},d,l,{capture:!!(m||this.isLocked)})},n.prototype.processCustomContent=function(t){if((0,E.jn)(t)||!(0,E.U2)(t,"customContent"))return t;var s=t.customContent,l=function(f,d){var m=s(f,d)||"";return(0,E.HD)(m)?'<div class="g2-tooltip">'+m+"</div>":m};return(0,M.pi)((0,M.pi)({},t),{customContent:l})},n.prototype.getTitle=function(t){var s=t[0].title||t[0].name;return this.title=s,s},n.prototype.renderTooltip=function(){var t=this.view.getCanvas(),s={start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}},l=this.getTooltipCfg(),f=new jd((0,M.pi)((0,M.pi)({parent:t.get("el").parentNode,region:s},l),{visible:!1,crosshairs:null}));f.init(),this.tooltip=f},n.prototype.renderTooltipMarkers=function(t,s){var l,f,d=this.getTooltipMarkersGroup(),m=this.view.getRootView(),x=m.limitInPlot;try{for(var A=(0,M.XA)(t),P=A.next();!P.done;P=A.next()){var k=P.value,B=k.x,U=k.y;if(x||d!=null&&d.getClip()){var W=Rv(m.getCoordinate()),ne=W.type,de=W.attrs;d==null||d.setClip({type:ne,attrs:de})}else d==null||d.setClip(void 0);var ve=this.view.getTheme(),$e=(0,E.U2)(ve,["components","tooltip","marker"],{}),lt=(0,M.pi)((0,M.pi)({fill:k.color,symbol:"circle",shadowColor:k.color},(0,E.mf)(s)?(0,M.pi)((0,M.pi)({},$e),s(k)):s),{x:B,y:U});d.addShape("marker",{attrs:lt})}}catch(vt){l={error:vt}}finally{try{P&&!P.done&&(f=A.return)&&f.call(A)}finally{if(l)throw l.error}}},n.prototype.renderCrosshairs=function(t,s){var l=(0,E.U2)(s,["crosshairs","type"],"x");l==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(t,s)):l==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(t,s)):l==="xy"&&(this.renderXCrosshairs(t,s),this.renderYCrosshairs(t,s))},n.prototype.renderXCrosshairs=function(t,s){var l=this.getViewWithGeometry(this.view).getCoordinate(),f,d;if(l.isRect)l.isTransposed?(f={x:l.start.x,y:t.y},d={x:l.end.x,y:t.y}):(f={x:t.x,y:l.end.y},d={x:t.x,y:l.start.y});else{var m=Vh(l,t),x=l.getCenter(),A=l.getRadius();d=os(x.x,x.y,A,m),f=x}var P=(0,E.b$)({start:f,end:d,container:this.getTooltipCrosshairsGroup()},(0,E.U2)(s,"crosshairs",{}),this.getCrosshairsText("x",t,s));delete P.type;var k=this.xCrosshair;k?k.update(P):(k=new ks(P),k.init()),k.render(),k.show(),this.xCrosshair=k},n.prototype.renderYCrosshairs=function(t,s){var l=this.getViewWithGeometry(this.view).getCoordinate(),f,d;if(l.isRect){var m=void 0,x=void 0;l.isTransposed?(m={x:t.x,y:l.end.y},x={x:t.x,y:l.start.y}):(m={x:l.start.x,y:t.y},x={x:l.end.x,y:t.y}),f={start:m,end:x},d="Line"}else f={center:l.getCenter(),radius:Op(l,t),startAngle:l.startAngle,endAngle:l.endAngle},d="Circle";f=(0,E.b$)({container:this.getTooltipCrosshairsGroup()},f,(0,E.U2)(s,"crosshairs",{}),this.getCrosshairsText("y",t,s)),delete f.type;var A=this.yCrosshair;A?l.isRect&&A.get("type")==="circle"||!l.isRect&&A.get("type")==="line"?(A=new Q[d](f),A.init()):A.update(f):(A=new Q[d](f),A.init()),A.render(),A.show(),this.yCrosshair=A},n.prototype.getCrosshairsText=function(t,s,l){var f=(0,E.U2)(l,["crosshairs","text"]),d=(0,E.U2)(l,["crosshairs","follow"]),m=this.items;if(f){var x=this.getViewWithGeometry(this.view),A=m[0],P=x.getXScale(),k=x.getYScales()[0],B=void 0,U=void 0;if(d){var W=this.view.getCoordinate().invert(s);B=P.invert(W.x),U=k.invert(W.y)}else B=A.data[P.field],U=A.data[k.field];var ne=t==="x"?B:U;return(0,E.mf)(f)?f=f(t,ne,m,s):f.content=ne,{text:f}}},n.prototype.getGuideGroup=function(){if(!this.guideGroup){var t=this.view.foregroundGroup;this.guideGroup=t.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},n.prototype.getTooltipMarkersGroup=function(){var t=this.tooltipMarkersGroup;return t&&!t.destroyed?(t.clear(),t.show()):(t=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),t.toFront(),this.tooltipMarkersGroup=t),t},n.prototype.getTooltipCrosshairsGroup=function(){var t=this.tooltipCrosshairsGroup;return t||(t=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),t.toBack(),this.tooltipCrosshairsGroup=t),t},n.prototype.findItemsFromView=function(t,s){var l,f;if(t.getOptions().tooltip===!1)return[];var d=this.getTooltipCfg(),m=Em(t,s,d);try{for(var x=(0,M.XA)(t.views),A=x.next();!A.done;A=x.next()){var P=A.value;m=m.concat(this.findItemsFromView(P,s))}}catch(k){l={error:k}}finally{try{A&&!A.done&&(f=x.return)&&f.call(x)}finally{if(l)throw l.error}}return m},n.prototype.getViewWithGeometry=function(t){var s=this;return t.geometries.length?t:(0,E.sE)(t.views,function(l){return s.getViewWithGeometry(l)})},n.prototype.getItemsAfterProcess=function(t){var s=this.getTooltipCfg().customItems,l=s||function(f){return f};return l(t)},n}(Se),ht=rt,Mt={};function Nt(i){return Mt[i.toLowerCase()]}function er(i,n){Mt[i.toLowerCase()]=n}var ar={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},Mr={interval:function(i){return{enter:{animation:i.isRect?i.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:i.isPolar&&i.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},_r={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(i){var n;return i.isRect?n=i.isTransposed?"grow-in-x":"grow-in-y":(n="grow-in-xy",i.isPolar&&i.isTransposed&&(n="wave-in")),{animation:n}},schema:function(i){var n;return i.isRect?n=i.isTransposed?"grow-in-x":"grow-in-y":n="grow-in-xy",{animation:n}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function Ur(i,n){return{delay:(0,E.mf)(i.delay)?i.delay(n):i.delay,easing:(0,E.mf)(i.easing)?i.easing(n):i.easing,duration:(0,E.mf)(i.duration)?i.duration(n):i.duration,callback:i.callback,repeat:i.repeat}}function Kr(i,n,t){var s=Mr[i];return s&&((0,E.mf)(s)&&(s=s(n)),s=(0,E.b$)({},ar,s),t)?s[t]:s}function nn(i,n,t){var s=(0,E.U2)(i.get("origin"),"data",Ce),l=n.animation,f=Ur(n,s);if(l){var d=Nt(l);d&&d(i,f,t)}else i.animate(t.toAttrs,f)}function yn(i,n,t,s,l){if(_r[t]){var f=_r[t](s),d=Nt((0,E.U2)(f,"animation",""));if(d){var m=(0,M.pi)((0,M.pi)((0,M.pi)({},ar.appear),f),n);i.stopAnimate(),d(i,m,{coordinate:s,minYPoint:l,toAttrs:null})}}}var Pn="element-background",oi=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;s.labelShape=[],s.states=[];var l=t.shapeFactory,f=t.container,d=t.offscreenGroup,m=t.elementIndex,x=t.visible,A=x===void 0?!0:x;return s.shapeFactory=l,s.container=f,s.offscreenGroup=d,s.visible=A,s.elementIndex=m,s}return n.prototype.draw=function(t,s){s===void 0&&(s=!1),this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.drawShape(t,s),this.visible===!1&&this.changeVisible(!1)},n.prototype.update=function(t){var s=this,l=s.shapeFactory,f=s.shape;if(f){this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.setShapeInfo(f,t);var d=this.getOffscreenGroup(),m=l.drawShape(this.shapeType,t,d);m.cfg.data=this.data,m.cfg.origin=t,m.cfg.element=this,this.syncShapeStyle(f,m,this.getStates(),this.getAnimateCfg("update"))}},n.prototype.destroy=function(){var t=this,s=t.shapeFactory,l=t.shape;if(l){var f=this.getAnimateCfg("leave");f?nn(l,f,{coordinate:s.coordinate,toAttrs:(0,M.pi)({},l.attr())}):l.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=[],this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,i.prototype.destroy.call(this)},n.prototype.changeVisible=function(t){i.prototype.changeVisible.call(this,t),t?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(s){s.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(s){s.hide()}))},n.prototype.setState=function(t,s){var l=this,f=l.states,d=l.shapeFactory,m=l.model,x=l.shape,A=l.shapeType,P=f.indexOf(t);if(s){if(P>-1)return;f.push(t),(t==="active"||t==="selected")&&(x==null||x.toFront())}else{if(P===-1)return;if(f.splice(P,1),t==="active"||t==="selected"){var k=this.geometry,B=k.sortZIndex,U=k.zIndexReversed,W=U?this.geometry.elements.length-this.elementIndex:this.elementIndex;B?x.setZIndex(W):x.set("zIndex",W)}}var ne=d.drawShape(A,m,this.getOffscreenGroup());f.length?this.syncShapeStyle(x,ne,f,null):this.syncShapeStyle(x,ne,["reset"],null),ne.remove(!0);var de={state:t,stateStatus:s,element:this,target:this.container};this.container.emit("statechange",de),zi(this.shape,"statechange",de)},n.prototype.clearStates=function(){var t=this,s=this.states;(0,E.S6)(s,function(l){t.setState(l,!1)}),this.states=[]},n.prototype.hasState=function(t){return this.states.includes(t)},n.prototype.getStates=function(){return this.states},n.prototype.getData=function(){return this.data},n.prototype.getModel=function(){return this.model},n.prototype.getBBox=function(){var t=this,s=t.shape,l=t.labelShape,f={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return s&&(f=s.getCanvasBBox()),l&&l.forEach(function(d){var m=d.getCanvasBBox();f.x=Math.min(m.x,f.x),f.y=Math.min(m.y,f.y),f.minX=Math.min(m.minX,f.minX),f.minY=Math.min(m.minY,f.minY),f.maxX=Math.max(m.maxX,f.maxX),f.maxY=Math.max(m.maxY,f.maxY)}),f.width=f.maxX-f.minX,f.height=f.maxY-f.minY,f},n.prototype.getStatesStyle=function(){if(!this.statesStyle){var t=this,s=t.shapeType,l=t.geometry,f=t.shapeFactory,d=l.stateOption,m=f.defaultShapeType,x=f.theme[s]||f.theme[m];this.statesStyle=(0,E.b$)({},x,d)}return this.statesStyle},n.prototype.getStateStyle=function(t,s){var l=this.getStatesStyle(),f=(0,E.U2)(l,[t,"style"],{}),d=f[s]||f;return(0,E.mf)(d)?d(this):d},n.prototype.getAnimateCfg=function(t){var s=this,l=this.animate;if(l){var f=l[t];return f&&(0,M.pi)((0,M.pi)({},f),{callback:function(){var d;(0,E.mf)(f.callback)&&f.callback(),(d=s.geometry)===null||d===void 0||d.emit(tt.AFTER_DRAW_ANIMATE)}})}return null},n.prototype.drawShape=function(t,s){var l;s===void 0&&(s=!1);var f=this,d=f.shapeFactory,m=f.container,x=f.shapeType;if(this.shape=d.drawShape(x,t,m),this.shape){this.setShapeInfo(this.shape,t);var A=this.shape.cfg.name;A?(0,E.HD)(A)&&(this.shape.cfg.name=["element",A]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var P=s?"enter":"appear",k=this.getAnimateCfg(P);k&&((l=this.geometry)===null||l===void 0||l.emit(tt.BEFORE_DRAW_ANIMATE),nn(this.shape,k,{coordinate:d.coordinate,toAttrs:(0,M.pi)({},this.shape.attr())}))}},n.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},n.prototype.setShapeInfo=function(t,s){var l=this;if(t.cfg.origin=s,t.cfg.element=this,t.isGroup()){var f=t.get("children");f.forEach(function(d){l.setShapeInfo(d,s)})}},n.prototype.syncShapeStyle=function(t,s,l,f,d){var m=this,x;if(l===void 0&&(l=[]),d===void 0&&(d=0),!(!t||!s)){var A=t.get("clipShape"),P=s.get("clipShape");if(this.syncShapeStyle(A,P,l,f),t.isGroup())for(var k=t.get("children"),B=s.get("children"),U=0;U<k.length;U++)this.syncShapeStyle(k[U],B[U],l,f,d+U);else{if(!(0,E.xb)(l)&&!(0,E.Xy)(l,["reset"])){var W=t.get("name");(0,E.kJ)(W)&&(W=W[1]),(0,E.S6)(l,function(de){if(s.get("name")!==Pn){var ve=m.getStateStyle(de,W||d);s.attr(ve)}})}var ne=yh(t,s);this.animate?f?((x=this.geometry)===null||x===void 0||x.emit(tt.BEFORE_DRAW_ANIMATE),nn(t,f,{coordinate:this.shapeFactory.coordinate,toAttrs:ne,shapeModel:this.model})):(0,E.xb)(l)?t.attr(ne):(t.stopAnimate(),t.animate(ne,{duration:300})):t.attr(ne)}}},n.prototype.getShapeType=function(t){var s=(0,E.U2)(t,"shape");return(0,E.kJ)(s)?s[0]:s},n}(Me),bi=oi,Qi={},Fi={};function ca(i){return Qi[i.toLowerCase()]}function Ri(i,n){Qi[i.toLowerCase()]=n}function Qa(i){return Fi[i.toLowerCase()]}function Ji(i,n){Fi[i.toLowerCase()]=n}var Wi={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(i,n){var t=this.getShape(i);return t.getPoints?t.getPoints(n):this.getDefaultPoints(n)},getShape:function(i){var n=this[i]||this[this.defaultShapeType];return n.coordinate=this.coordinate,n},getDefaultPoints:function(){return[]},getDefaultStyle:function(i){return(0,E.U2)(i,[this.defaultShapeType,"default","style"],{})},getMarker:function(i,n){var t=this.getShape(i);if(!t.getMarker){var s=this.defaultShapeType;t=this.getShape(s)}var l=this.theme,f=(0,E.U2)(l,[i,"default"],{}),d=t.getMarker(n);return(0,E.b$)({},f,d)},drawShape:function(i,n,t){var s=this.getShape(i);return s.draw(n,t)}},fo={coordinate:null,parsePath:function(i){var n=this.coordinate,t=(0,zh.tr)(i);return n.isPolar?t=Oi(n,t):t=to(n,t),t},parsePoint:function(i){var n=this.coordinate;return n.convert(i)},parsePoints:function(i){var n=this.coordinate;return i.map(function(t){return n.convert(t)})},draw:function(i,n){}},ja={};function io(i,n){var t=(0,E.jC)(i),s=(0,M.pi)((0,M.pi)((0,M.pi)({},Wi),n),{geometryType:i});return ja[t]=s,s}function fi(i,n,t){var s=(0,E.jC)(i),l=ja[s],f=(0,M.pi)((0,M.pi)({},fo),t);return l[n]=f,f}function Ao(i){var n=(0,E.jC)(i);return ja[n]}function Ms(i,n,t){var s,l;if(t===void 0&&(t={}),!n)return[i];var f=(0,E.Ms)(i,n),d=[];if(n.length===1&&t[n[0]]){var m=t[n[0]];try{for(var x=(0,M.XA)(m),A=x.next();!A.done;A=x.next()){var P=A.value,k=f["_".concat(P)];k&&d.push(k)}}catch(W){s={error:W}}finally{try{A&&!A.done&&(l=x.return)&&l.call(x)}finally{if(s)throw s.error}}}else for(var B in f)if(f.hasOwnProperty(B)){var U=f[B];d.push(U)}return d}function qs(i,n){return(0,E.G)(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(t){return!(0,E.Xy)(i[t],n[t])})}function ms(i){return(0,E.kJ)(i)?i:i.split("*")}function ys(i,n){for(var t=[],s=[],l=[],f=new Map,d=0;d<n.length;d++){var m=n[d];i[m]?s.push(m):t.push(m),f.set(m,!0)}return Object.keys(i).forEach(function(x){f.has(x)||l.push(x)}),{added:t,updated:s,removed:l}}var nu=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;s.type="base",s.attributes={},s.elements=[],s.elementsMap={},s.animateOption=!0,s.attributeOption={},s.lastElementsMap={},s.generatePoints=!1,s.beforeMappingData=null,s.adjusts={},s.idFields=[],s.hasSorted=!1,s.isCoordinateChanged=!1;var l=t.container,f=t.labelsContainer,d=t.coordinate,m=t.data,x=t.sortable,A=x===void 0?!1:x,P=t.visible,k=P===void 0?!0:P,B=t.theme,U=t.scales,W=U===void 0?{}:U,ne=t.scaleDefs,de=ne===void 0?{}:ne,ve=t.intervalPadding,$e=t.dodgePadding,lt=t.maxColumnWidth,vt=t.minColumnWidth,Ot=t.columnWidthRatio,fr=t.roseWidthRatio,Tr=t.multiplePieWidthRatio,zr=t.zIndexReversed,cn=t.sortZIndex,Qr=t.useDeferredLabel;return s.container=l,s.labelsContainer=f,s.coordinate=d,s.data=m,s.sortable=A,s.visible=k,s.userTheme=B,s.scales=W,s.scaleDefs=de,s.intervalPadding=ve,s.dodgePadding=$e,s.maxColumnWidth=lt,s.minColumnWidth=vt,s.columnWidthRatio=Ot,s.roseWidthRatio=fr,s.multiplePieWidthRatio=Tr,s.zIndexReversed=zr,s.sortZIndex=cn,s.useDeferredLabel=Qr?typeof Qr=="number"?Qr:1/0:null,s}return n.prototype.position=function(t){var s=t;(0,E.PO)(t)||(s={fields:ms(t)});var l=(0,E.U2)(s,"fields");return l.length===1&&(l.unshift("1"),(0,E.t8)(s,"fields",l)),(0,E.t8)(this.attributeOption,"position",s),this},n.prototype.color=function(t,s){return this.createAttrOption("color",t,s),this},n.prototype.shape=function(t,s){return this.createAttrOption("shape",t,s),this},n.prototype.size=function(t,s){return this.createAttrOption("size",t,s),this},n.prototype.adjust=function(t){var s=t;return((0,E.HD)(t)||(0,E.PO)(t))&&(s=[t]),(0,E.S6)(s,function(l,f){(0,E.Kn)(l)||(s[f]={type:l})}),this.adjustOption=s,this},n.prototype.style=function(t,s){if((0,E.HD)(t)){var l=ms(t);this.styleOption={fields:l,callback:s}}else{var f=t,l=f.fields,d=f.callback,m=f.cfg;l||d||m?this.styleOption=t:this.styleOption={cfg:t}}return this},n.prototype.tooltip=function(t,s){if((0,E.HD)(t)){var l=ms(t);this.tooltipOption={fields:l,callback:s}}else this.tooltipOption=t;return this},n.prototype.animate=function(t){return this.animateOption=t,this},n.prototype.label=function(t,s,l){if((0,E.HD)(t)){var f={},d=ms(t);f.fields=d,(0,E.mf)(s)?f.callback=s:(0,E.PO)(s)&&(f.cfg=s),l&&(f.cfg=l),this.labelOption=f}else this.labelOption=t;return this},n.prototype.state=function(t){return this.stateOption=t,this},n.prototype.customInfo=function(t){return this.customOption=t,this},n.prototype.init=function(t){t===void 0&&(t={}),this.setCfg(t),this.initAttributes(),this.processData(this.data),this.adjustScale()},n.prototype.update=function(t){t===void 0&&(t={});var s=t.data,l=t.isDataChanged,f=t.isCoordinateChanged,d=this,m=d.attributeOption,x=d.lastAttributeOption;(0,E.Xy)(m,x)?s&&(l||!(0,E.Xy)(s,this.data))?(this.setCfg(t),this.initAttributes(),this.processData(s)):this.setCfg(t):this.init(t),this.adjustScale(),this.isCoordinateChanged=f},n.prototype.paint=function(t){var s=this;t===void 0&&(t=!1),this.animateOption&&(this.animateOption=(0,E.b$)({},Kr(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elementsMap={},this.elements=[];var l=this.getOffscreenGroup();l.clear();var f=this.beforeMappingData,d=this.beforeMapping(f);this.dataArray=new Array(d.length);for(var m=0;m<d.length;m++){var x=d[m];this.dataArray[m]=this.mapping(x)}if(this.updateElements(this.dataArray,t),this.lastElementsMap=this.elementsMap,this.canDoGroupAnimation(t)){var A=this.container,P=this.type,k=this.coordinate,B=(0,E.U2)(this.animateOption,"appear"),U=this.getYScale(),W=k.convert({x:0,y:U.scale(this.getYMinValue())});yn(A,B,P,k,W)}if(this.labelOption){var ne=this.useDeferredLabel,de=function(){return s.renderLabels((0,E.xH)(s.dataArray),t)}.bind(this);if(typeof ne=="number"){var ve=typeof ne=="number"&&ne!==1/0?ne:0;if(!window.requestIdleCallback)setTimeout(de,ve);else{var $e=ve&&ve!==1/0?{timeout:ve}:void 0;window.requestIdleCallback(de,$e)}}else de()}this.lastAttributeOption=(0,M.pi)({},this.attributeOption),this.visible===!1&&this.changeVisible(!1)},n.prototype.clear=function(){var t=this,s=t.container,l=t.geometryLabel,f=t.offscreenGroup;s&&s.clear(),l&&l.clear(),f&&f.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},n.prototype.destroy=function(){this.clear();var t=this.container;t.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,i.prototype.destroy.call(this)},n.prototype.getGroupScales=function(){return this.groupScales},n.prototype.getAttribute=function(t){return this.attributes[t]},n.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},n.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},n.prototype.getGroupAttributes=function(){var t=[];return(0,E.S6)(this.attributes,function(s){be.includes(s.type)&&t.push(s)}),t},n.prototype.getDefaultValue=function(t){var s,l=this.getAttribute(t);return l&&(0,E.xb)(l.scales)&&(s=l.values[0]),s},n.prototype.getAttributeValues=function(t,s){for(var l=[],f=t.scales,d=0,m=f.length;d<m;d++){var x=f[d],A=x.field;x.isIdentity?l.push(x.values):l.push(s[A])}return t.mapping.apply(t,(0,M.ev)([],(0,M.CR)(l),!1))},n.prototype.getAdjust=function(t){return this.adjusts[t]},n.prototype.getCoordinate=function(){return this.coordinate},n.prototype.getData=function(){return this.data},n.prototype.getShapeMarker=function(t,s){var l=this.getShapeFactory();return l.getMarker(t,s)},n.prototype.getElementsBy=function(t){return this.elements.filter(function(s){return t(s)})},n.prototype.getElements=function(){return this.elements},n.prototype.getElementId=function(t){t=(0,E.kJ)(t)?t[0]:t;var s=t[Ce];if(this.idFields.length){for(var l=s[this.idFields[0]],f=1;f<this.idFields.length;f++)l+="-"+s[this.idFields[f]];return l}var d=this.type,m=this.getXScale(),x=this.getYScale(),A=m.field||"x",P=x.field||"y",k=s[P],B;m.type==="identity"?B=m.values[0]:B=s[A];var U;d==="interval"||d==="schema"?U="".concat(B):d==="line"||d==="area"||d==="path"?U=d:U="".concat(B,"-").concat(k);for(var W=this.groupScales,f=0,ne=W.length;f<ne;f++){var de=W[f],ve=de.field;U="".concat(U,"-").concat(s[ve])}var $e=this.getAdjust("dodge");if($e){var lt=$e.dodgeBy;lt&&(U="".concat(U,"-").concat(s[lt]))}return this.getAdjust("jitter")&&(U="".concat(U,"-").concat(t.x,"-").concat(t.y)),U},n.prototype.getScaleFields=function(){var t=[],s=new Map,l=this,f=l.attributeOption,d=l.labelOption,m=l.tooltipOption;for(var x in f)if(f.hasOwnProperty(x)){var A=f[x];A.fields?Vf(A.fields,t,s):A.values&&Vf(A.values,t,s)}return d&&d.fields&&Vf(d.fields,t,s),(0,E.Kn)(m)&&m.fields&&Vf(m.fields,t,s),t},n.prototype.changeVisible=function(t){i.prototype.changeVisible.call(this,t);for(var s=this.elements,l=0,f=s.length;l<f;l++){var d=s[l];d.changeVisible(t)}t?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},n.prototype.getFields=function(){var t=new Map,s=[];return Object.values(this.attributeOption).forEach(function(l){var f=(l==null?void 0:l.fields)||[];f.forEach(function(d){t.has(d)||s.push(d),t.set(d,!0)})},[]),s},n.prototype.getGroupFields=function(){for(var t=[],s=new Map,l=0,f=be.length;l<f;l++){var d=be[l],m=this.attributeOption[d];m&&m.fields&&Vf(m.fields,t,s)}return t},n.prototype.getXYFields=function(){var t=(0,M.CR)(this.attributeOption.position.fields,2),s=t[0],l=t[1];return[s,l]},n.prototype.getXField=function(){return(0,E.U2)(this.getXYFields(),[0])},n.prototype.getYField=function(){return(0,E.U2)(this.getXYFields(),[1])},n.prototype.getShapes=function(){return this.elements.map(function(t){return t.shape})},n.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},n.prototype.sort=function(t){if(!this.hasSorted)for(var s=this.getXScale(),l=s.field,f=0;f<t.length;f++){var d=t[f];d.sort(function(m,x){return s.translate(m[Ce][l])-s.translate(x[Ce][l])})}this.hasSorted=!0},n.prototype.adjustScale=function(){var t=this.getYScale();t&&this.getAdjust("stack")&&this.updateStackRange(t,this.beforeMappingData)},n.prototype.getShapeFactory=function(){var t=this.shapeType;if(Ao(t))return this.shapeFactory||(this.shapeFactory=(0,E.d9)(Ao(t))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[t]||{},this.shapeFactory},n.prototype.createShapePointsCfg=function(t){var s=this.getXScale(),l=this.getYScale(),f=this.normalizeValues(t[s.field],s),d;return l?d=this.normalizeValues(t[l.field],l):d=t.y?t.y:.1,{x:f,y:d,y0:l?l.scale(this.getYMinValue()):void 0}},n.prototype.createElement=function(t,s,l){l===void 0&&(l=!1);var f=this.container,d=this.getDrawCfg(t),m=this.getShapeFactory(),x=new bi({shapeFactory:m,container:f,offscreenGroup:this.getOffscreenGroup(),elementIndex:s});return x.animate=this.animateOption,x.geometry=this,x.draw(d,l),x},n.prototype.getDrawCfg=function(t){var s=t[Ce],l={mappingData:t,data:s,x:t.x,y:t.y,color:t.color,size:t.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},f=t.shape;!f&&this.getShapeFactory()&&(f=this.getShapeFactory().defaultShapeType),l.shape=f;var d=this.theme.geometries[this.shapeType];l.defaultStyle=(0,E.U2)(d,[f,"default"],{}).style,!l.defaultStyle&&this.getShapeFactory()&&(l.defaultStyle=this.getShapeFactory().getDefaultStyle(d));var m=this.styleOption;return m&&(l.style=this.getStyleCfg(m,s)),this.generatePoints&&(l.points=t.points,l.nextPoints=t.nextPoints),l},n.prototype.updateElements=function(t,s){var l,f,d,m,x,A;s===void 0&&(s=!1);for(var P=new Map,k=[],B=new Map,U=0,W=0;W<t.length;W++)for(var ne=t[W],de=0;de<ne.length;de++){var ve=ne[de],$e=this.getElementId(ve),lt=P.has($e)?"".concat($e,"-").concat(W,"-").concat(de):$e;k.push(lt),P.set(lt,ve),B.set(lt,U),U++}this.elements=new Array(U);var vt=ys(this.lastElementsMap,k),Ot=vt.added,fr=vt.updated,Tr=vt.removed;try{for(var zr=(0,M.XA)(Ot),cn=zr.next();!cn.done;cn=zr.next()){var $e=cn.value,ve=P.get($e),W=B.get($e),Qr=this.createElement(ve,W,s);this.elements[W]=Qr,this.elementsMap[$e]=Qr,Qr.shape&&Qr.shape.set("zIndex",this.zIndexReversed?this.elements.length-W:W)}}catch(Di){l={error:Di}}finally{try{cn&&!cn.done&&(f=zr.return)&&f.call(zr)}finally{if(l)throw l.error}}try{for(var On=(0,M.XA)(fr),Qn=On.next();!Qn.done;Qn=On.next()){var $e=Qn.value,Qr=this.lastElementsMap[$e],ve=P.get($e),Hi=this.getDrawCfg(ve),oa=Qr.getModel(),W=B.get($e);(this.isCoordinateChanged||qs(Hi,oa))&&(Qr.animate=this.animateOption,Qr.update(Hi)),this.elements[W]=Qr,this.elementsMap[$e]=Qr,Qr.shape&&Qr.shape.set("zIndex",this.zIndexReversed?this.elements.length-W:W)}}catch(Di){d={error:Di}}finally{try{Qn&&!Qn.done&&(m=On.return)&&m.call(On)}finally{if(d)throw d.error}}this.container&&this.container.sort();try{for(var eo=(0,M.XA)(Tr),Nn=eo.next();!Nn.done;Nn=eo.next()){var $e=Nn.value,Qr=this.lastElementsMap[$e];Qr.animate=this.animateOption,Qr.destroy()}}catch(Di){x={error:Di}}finally{try{Nn&&!Nn.done&&(A=eo.return)&&A.call(eo)}finally{if(x)throw x.error}}},n.prototype.getLabelType=function(){var t=this,s=t.labelOption,l=t.coordinate,f=t.type,d=l.type,m=l.isTransposed,x=(0,E.U2)(s,["cfg","type"]);return x||(d==="polar"?x=m?"pie":"polar":d==="theta"?x="pie":f==="interval"||f==="polygon"?x="interval":x="base"),x},n.prototype.getYMinValue=function(){var t=this.getYScale(),s=t.min,l=t.max,f;return s>=0?f=s:l<=0?f=l:f=0,f},n.prototype.createAttrOption=function(t,s,l){if((0,E.UM)(s)||(0,E.Kn)(s))(0,E.Kn)(s)&&(0,E.Xy)(Object.keys(s),["values"])?(0,E.t8)(this.attributeOption,t,{fields:s.values}):(0,E.t8)(this.attributeOption,t,s);else{var f={};(0,E.hj)(s)?f.values=[s]:f.fields=ms(s),l&&((0,E.mf)(l)?f.callback=l:f.values=l),(0,E.t8)(this.attributeOption,t,f)}},n.prototype.initAttributes=function(){var t=this,s=this,l=s.attributes,f=s.attributeOption,d=s.theme,m=s.shapeType;this.groupScales=[];var x={},A=function(B){if(f.hasOwnProperty(B)){var U=f[B];if(!U)return{value:void 0};var W=(0,M.pi)({},U),ne=W.callback,de=W.values,ve=W.fields,$e=ve===void 0?[]:ve,lt=$e.map(function(Ot){var fr=t.scales[Ot];if(!x[Ot]&&be.includes(B)){var Tr=dl(fr,(0,E.U2)(t.scaleDefs,Ot),B,t.type);Tr==="cat"&&(t.groupScales.push(fr),x[Ot]=!0)}return fr});W.scales=lt,B!=="position"&&lt.length===1&&lt[0].type==="identity"?W.values=lt[0].values:!ne&&!de&&(B==="size"?W.values=d.sizes:B==="shape"?W.values=d.shapes[m]||[]:B==="color"&&(lt.length?W.values=lt[0].values.length<=10?d.colors10:d.colors20:W.values=d.colors10));var vt=Ac(B);l[B]=new vt(W)}};for(var P in f){var k=A(P);if(typeof k=="object")return k.value}},n.prototype.processData=function(t){var s,l;this.hasSorted=!1;for(var f=this.getAttribute("position").scales,d=f.filter(function(Tr){return Tr.isCategory}),m=this.groupData(t),x=[],A=0,P=m.length;A<P;A++){for(var k=m[A],B=[],U=0,W=k.length;U<W;U++){var ne=k[U],de={};for(var ve in ne)de[ve]=ne[ve];de[Ce]=ne;try{for(var $e=(s=void 0,(0,M.XA)(d)),lt=$e.next();!lt.done;lt=$e.next()){var vt=lt.value,Ot=vt.field;de[Ot]=vt.translate(de[Ot])}}catch(Tr){s={error:Tr}}finally{try{lt&&!lt.done&&(l=$e.return)&&l.call($e)}finally{if(s)throw s.error}}B.push(de)}x.push(B)}var fr=this.adjustData(x);return this.beforeMappingData=fr,fr},n.prototype.adjustData=function(t){var s=this.adjustOption,l=this,f=l.intervalPadding,d=l.dodgePadding,m=l.theme,x=this.maxColumnWidth||m.maxColumnWidth,A=this.minColumnWidth||m.minColumnWidth,P=this.columnWidthRatio||m.columnWidthRatio,k=t;if(s){var B=this.getXScale(),U=this.getYScale(),W=B.field,ne=U?U.field:null,de=pl(this.coordinate),ve=B.values.length,$e=this.getAttribute("size"),lt=void 0;$e&&(lt=$e.values[0]);for(var vt=0,Ot=s.length;vt<Ot;vt++){var fr=s[vt],Tr=(0,M.pi)({xField:W,yField:ne,intervalPadding:f,dodgePadding:d,xDimensionLength:de,groupNum:ve,defaultSize:lt,maxColumnWidth:x,minColumnWidth:A,columnWidthRatio:P},fr),zr=fr.type;if(zr==="dodge"){var cn=[];if(B.isCategory||B.type==="identity")cn.push("x");else if(!U)cn.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");Tr.adjustNames=cn,Tr.dodgeRatio=P}else if(zr==="stack"){var Qr=this.coordinate;if(!U){Tr.height=Qr.getHeight();var On=this.getDefaultValue("size")||3;Tr.size=On}!Qr.isTransposed&&(0,E.UM)(Tr.reverseOrder)&&(Tr.reverseOrder=!0)}var Qn=st(zr);Tr.dimValuesMap={},B&&B.values&&(Tr.dimValuesMap[B.field]=B.values.map(function(oa){return B.translate(oa)}));var Hi=new Qn(Tr);k=Hi.process(k),this.adjusts[zr]=Hi}}return k},n.prototype.groupData=function(t){for(var s=this.getGroupScales(),l=this.scaleDefs,f={},d=[],m=0;m<s.length;m++){var x=s[m],A=x.field;d.push(A),(0,E.U2)(l,[A,"values"])&&(f[A]=l[A].values)}return Ms(t,d,f)},n.prototype.updateStackRange=function(t,s){for(var l=(0,E.xH)(s),f=t.field,d=t.min,m=t.max,x=0;x<l.length;x++){var A=l[x],P=Math.min.apply(null,A[f]),k=Math.max.apply(null,A[f]);P<d&&(d=P),k>m&&(m=k)}var B=this.scaleDefs,U={};d<t.min&&!(0,E.U2)(B,[f,"min"])&&(U.min=d),m>t.max&&!(0,E.U2)(B,[f,"max"])&&(U.max=m),t.change(U)},n.prototype.beforeMapping=function(t){var s=t;if(this.sortable&&this.sort(s),this.generatePoints)for(var l=0,f=s.length;l<f;l++){var d=s[l];this.generateShapePoints(d);var m=s[l+1];m&&(this.generateShapePoints(m),d[0].nextPoints=m[0].points)}return s},n.prototype.generateShapePoints=function(t){for(var s=this.getShapeFactory(),l=this.getAttribute("shape"),f=0;f<t.length;f++){var d=t[f],m=this.createShapePointsCfg(d),x=l?this.getAttributeValues(l,d):null,A=s.getShapePoints(x,m);d.points=A}},n.prototype.normalizeValues=function(t,s){var l=[];if((0,E.kJ)(t))for(var f=0;f<t.length;f++){var d=t[f];l.push(s.scale(d))}else l=s.scale(t);return l},n.prototype.mapping=function(t){for(var s=this.attributes,l=[],f=0;f<t.length;f++){var d=t[f],m={_origin:d[Ce],points:d.points,nextPoints:d.nextPoints};for(var x in s)if(s.hasOwnProperty(x)){var A=s[x],P=A.names,k=this.getAttributeValues(A,d);if(P.length>1)for(var B=0;B<k.length;B+=1){var U=k[B],W=P[B];m[W]=(0,E.kJ)(U)&&U.length===1?U[0]:U}else m[P[0]]=k.length===1?k[0]:k}this.convertPoint(m),l.push(m)}return l},n.prototype.convertPoint=function(t){var s=t.x,l=t.y,f,d,m,x=this.coordinate;if((0,E.kJ)(s)&&(0,E.kJ)(l)){f=[],d=[];for(var A=0,P=0,k=s.length,B=l.length;A<k&&P<B;A+=1,P+=1)m=x.convert({x:s[A],y:l[P]}),f.push(m.x),d.push(m.y)}else if((0,E.kJ)(l)){d=[];for(var U=0;U<l.length;U++){var W=l[U];m=x.convert({x:s,y:W}),f&&f!==m.x?((0,E.kJ)(f)||(f=[f]),f.push(m.x)):f=m.x,d.push(m.y)}}else if((0,E.kJ)(s)){f=[];for(var U=0;U<s.length;U++){var ne=s[U];m=x.convert({x:ne,y:l}),d&&d!==m.y?((0,E.kJ)(d)||(d=[d]),d.push(m.y)):d=m.y,f.push(m.x)}}else{var de=x.convert({x:s,y:l});f=de.x,d=de.y}t.x=f,t.y=d},n.prototype.getStyleCfg=function(t,s){var l=t.fields,f=l===void 0?[]:l,d=t.callback,m=t.cfg;if(m)return m;var x=f.map(function(A){return s[A]});return d.apply(void 0,(0,M.ev)([],(0,M.CR)(x),!1))},n.prototype.setCfg=function(t){var s=this,l=t.coordinate,f=t.data,d=t.theme,m=t.scaleDefs;l&&(this.coordinate=l),f&&(this.data=f),m&&(this.scaleDefs=m,this.idFields=[],(0,E.S6)(m,function(x,A){x&&x.key&&s.idFields.push(A)})),d&&(this.theme=this.userTheme?(0,E.b$)({},d,this.userTheme):d)},n.prototype.renderLabels=function(t,s){return s===void 0&&(s=!1),(0,M.mG)(this,void 0,void 0,function(){var l,f,d,m,x,A,P,k,B,U,W,ne,de=this;return(0,M.Jh)(this,function(ve){switch(ve.label){case 0:return l=this.geometryLabel,this.emit(tt.BEFORE_RENDER_LABEL),l||(f=this.getLabelType(),d=ca(f),l=new d(this),this.geometryLabel=l),[4,l.render(t,s)];case 1:ve.sent(),m=l.labelsRenderer.shapesMap,x=new Map,(0,E.S6)(m,function($e,lt){for(var vt=$e.getChildren()||[],Ot=0;Ot<vt.length;Ot++){var fr=vt[Ot],Tr=de.elementsMap[fr.get("elementId")||lt.split(" ")[0]];if(Tr){fr.cfg.name=["element","label"],fr.cfg.element=Tr;var zr=x.get(Tr)||new Set;zr.add($e),x.set(Tr,zr)}}});try{for(A=(0,M.XA)(x.entries()),P=A.next();!P.done;P=A.next())k=(0,M.CR)(P.value,2),B=k[0],U=k[1],B.labelShape=(0,M.ev)([],(0,M.CR)(U),!1)}catch($e){W={error:$e}}finally{try{P&&!P.done&&(ne=A.return)&&ne.call(A)}finally{if(W)throw W.error}}return this.emit(tt.AFTER_RENDER_LABEL),[2]}})})},n.prototype.canDoGroupAnimation=function(t){return!t&&this.animateOption&&((0,E.U2)(this.animateOption,"appear")===void 0||(0,E.U2)(this.animateOption,"appear")&&(0,E.U2)(this.animateOption,["appear","animation"])===void 0)},n}(Me),Ls=nu,iu=mo.vs;function Nu(i,n,t){var s=iu(i.getMatrix(),[["t",n,t]]);i.setMatrix(s)}function nl(i,n){var t=i.attr(),s=t.x,l=t.y,f=iu(i.getMatrix(),[["t",-s,-l],["r",n],["t",s,l]]);return f}function il(i,n){var t=nl(i,n);i.setMatrix(t)}function gu(){return[1,0,0,0,1,0,0,0,1]}function al(i,n){var t=i.getBBox(),s=(t.minX+t.maxX)/2,l=(t.minY+t.maxY)/2;i.applyToMatrix([s,l,1]);var f=iu(i.getMatrix(),[["t",-s,-l],["s",n,n],["t",s,l]]);i.setMatrix(f)}function Ba(i){return i.find(function(n){return n.get("type")==="text"})}function Do(i,n,t){t===void 0&&(t=[0,0,0,0]);var s=i&&i.getChildren()[0];if(s){var l=s.clone();n!=null&&n.rotate&&il(l,-n.rotate);var f=l.getCanvasBBox(),d=f.x,m=f.y,x=f.width,A=f.height;l.destroy();var P=t;return(0,E.UM)(P)?P=[2,2,2,2]:(0,E.hj)(P)&&(P=new Array(4).fill(P)),{x:d-P[3],y:m-P[0],width:x+P[1]+P[3],height:A+P[0]+P[2],rotation:(n==null?void 0:n.rotate)||0}}return{x:0,y:0,width:0,height:0,rotation:0}}function Ho(i,n,t){t===void 0&&(t=0);var s=Math.max(0,Math.min(i.x+i.width+t,n.x+n.width+t)-Math.max(i.x-t,n.x-t)),l=Math.max(0,Math.min(i.y+i.height+t,n.y+n.height+t)-Math.max(i.y-t,n.y-t));return s*l}function Na(i,n){var t=i.getBBox();return(0,E.G)(n,function(s){var l=s.getBBox();return Ho(t,l,2)>0})}function Gl(i,n,t){var s=t.data,l=t.origin,f=t.animateCfg,d=t.coordinate,m=(0,E.U2)(f,"update");i.set("data",s),i.set("origin",l),i.set("animateCfg",f),i.set("coordinate",d),i.set("visible",n.get("visible")),(i.getChildren()||[]).forEach(function(x,A){var P=n.getChildByIndex(A);if(!P)i.removeChild(x),x.remove(!0);else{x.set("data",s),x.set("origin",l),x.set("animateCfg",f),x.set("coordinate",d);var k=yh(x,P);m?nn(x,m,{toAttrs:k,coordinate:d}):x.attr(k),P.isGroup()&&Gl(x,P,t)}}),(0,E.S6)(n.getChildren(),function(x,A){A>=i.getCount()&&(x.destroyed||i.add(x))})}var Pl=function(){function i(n){this.shapesMap={};var t=n.layout,s=n.container;this.layout=t,this.container=s}return i.prototype.render=function(n,t,s){return s===void 0&&(s=!1),(0,M.mG)(this,void 0,void 0,function(){var l,f,d,m,x,A,P,k,B=this;return(0,M.Jh)(this,function(U){switch(U.label){case 0:if(l={},f=this.createOffscreenGroup(),!n.length)return[3,2];try{for(d=(0,M.XA)(n),m=d.next();!m.done;m=d.next())x=m.value,x&&(l[x.id]=this.renderLabel(x,f))}catch(W){P={error:W}}finally{try{m&&!m.done&&(k=d.return)&&k.call(d)}finally{if(P)throw P.error}}return[4,this.doLayout(n,t,l)];case 1:U.sent(),this.renderLabelLine(n,l),this.renderLabelBackground(n,l),this.adjustLabel(n,l),U.label=2;case 2:return A=this.shapesMap,(0,E.S6)(l,function(W,ne){if(W.destroyed)delete l[ne];else{if(A[ne]){var de=W.get("data"),ve=W.get("origin"),$e=W.get("coordinate"),lt=W.get("animateCfg"),vt=A[ne];Gl(vt,l[ne],{data:de,origin:ve,animateCfg:lt,coordinate:$e}),l[ne]=vt}else{if(B.container.destroyed)return;B.container.add(W);var Ot=(0,E.U2)(W.get("animateCfg"),s?"enter":"appear");Ot&&nn(W,Ot,{toAttrs:(0,M.pi)({},W.attr()),coordinate:W.get("coordinate")})}delete A[ne]}}),(0,E.S6)(A,function(W){var ne=(0,E.U2)(W.get("animateCfg"),"leave");ne?nn(W,ne,{toAttrs:null,coordinate:W.get("coordinate")}):W.remove(!0)}),this.shapesMap=l,f.destroy(),[2]}})})},i.prototype.clear=function(){this.container.clear(),this.shapesMap={}},i.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null},i.prototype.renderLabel=function(n,t){var s=n.id,l=n.elementId,f=n.data,d=n.mappingData,m=n.coordinate,x=n.animate,A=n.content,P=n.capture,k={id:s,elementId:l,capture:P,data:f,origin:(0,M.pi)((0,M.pi)({},d),{data:d[Ce]}),coordinate:m},B=t.addGroup((0,M.pi)({name:"label",animateCfg:this.animate===!1||x===null||x===!1?!1:(0,E.b$)({},this.animate,x)},k)),U;if(A.isGroup&&A.isGroup()||A.isShape&&A.isShape()){var W=A.getCanvasBBox(),ne=W.width,de=W.height,ve=(0,E.U2)(n,"textAlign","left"),$e=n.x,lt=n.y-de/2;ve==="center"?$e=$e-ne/2:(ve==="right"||ve==="end")&&($e=$e-ne),Nu(A,$e,lt),U=A,B.add(A)}else{var vt=(0,E.U2)(n,["style","fill"]);U=B.addShape("text",(0,M.pi)({attrs:(0,M.pi)((0,M.pi)({x:n.x,y:n.y,textAlign:n.textAlign,textBaseline:(0,E.U2)(n,"textBaseline","middle"),text:n.content},n.style),{fill:(0,E.Ft)(vt)?n.color:vt})},k))}return n.rotate&&il(U,n.rotate),B},i.prototype.doLayout=function(n,t,s){return(0,M.mG)(this,void 0,void 0,function(){var l,f=this;return(0,M.Jh)(this,function(d){switch(d.label){case 0:return this.layout?(l=(0,E.kJ)(this.layout)?this.layout:[this.layout],[4,Promise.all(l.map(function(m){var x=Qa((0,E.U2)(m,"type",""));if(x){var A=[],P=[];return(0,E.S6)(s,function(k,B){A.push(k),P.push(t[k.get("elementId")])}),x(n,A,P,f.region,m.cfg)}}))]):[3,2];case 1:d.sent(),d.label=2;case 2:return[2]}})})},i.prototype.renderLabelLine=function(n,t){(0,E.S6)(n,function(s){var l=(0,E.U2)(s,"coordinate");if(!(!s||!l)){var f=l.getCenter(),d=l.getRadius();if(s.labelLine){var m=(0,E.U2)(s,"labelLine",{}),x=s.id,A=m.path;if(!A){var P=os(f.x,f.y,d,s.angle);A=[["M",P.x,P.y],["L",s.x,s.y]]}var k=t[x];k.destroyed||k.addShape("path",{capture:!1,attrs:(0,M.pi)({path:A,stroke:s.color?s.color:(0,E.U2)(s,["style","fill"],"#000"),fill:null},m.style),id:x,origin:s.mappingData,data:s.data,coordinate:s.coordinate})}}})},i.prototype.renderLabelBackground=function(n,t){(0,E.S6)(n,function(s){var l=(0,E.U2)(s,"coordinate"),f=(0,E.U2)(s,"background");if(!(!f||!l)){var d=s.id,m=t[d];if(!m.destroyed){var x=m.getChildren()[0];if(x){var A=Do(m,s,f.padding),P=A.rotation,k=(0,M._T)(A,["rotation"]),B=m.addShape("rect",{attrs:(0,M.pi)((0,M.pi)({},k),f.style||{}),id:d,origin:s.mappingData,data:s.data,coordinate:s.coordinate});if(B.setZIndex(-1),P){var U=x.getMatrix();B.setMatrix(U)}}}}})},i.prototype.createOffscreenGroup=function(){var n=this.container,t=n.getGroupBase(),s=new t({});return s},i.prototype.adjustLabel=function(n,t){(0,E.S6)(n,function(s){if(s){var l=s.id,f=t[l];if(!f.destroyed){var d=f.findAll(function(m){return m.get("type")!=="path"});(0,E.S6)(d,function(m){m&&(s.offsetX&&m.attr("x",m.attr("x")+s.offsetX),s.offsetY&&m.attr("y",m.attr("y")+s.offsetY))})}}})},i}(),_s=Pl;function au(i){var n=0;return(0,E.S6)(i,function(t){n+=t}),n/i.length}var Ol=function(){function i(n){this.geometry=n}return i.prototype.getLabelItems=function(n){var t=this,s=[],l=this.getLabelCfgs(n);return(0,E.S6)(n,function(f,d){var m=l[d];if(!m||(0,E.UM)(f.x)||(0,E.UM)(f.y)){s.push(null);return}var x=(0,E.kJ)(m.content)?m.content:[m.content];m.content=x;var A=x.length;(0,E.S6)(x,function(P,k){if((0,E.UM)(P)||P===""){s.push(null);return}var B=(0,M.pi)((0,M.pi)({},m),t.getLabelPoint(m,f,k));B.textAlign||(B.textAlign=t.getLabelAlign(B,k,A)),B.offset<=0&&(B.labelLine=null),s.push(B)})}),s},i.prototype.render=function(n,t){return t===void 0&&(t=!1),(0,M.mG)(this,void 0,void 0,function(){var s,l,f;return(0,M.Jh)(this,function(d){switch(d.label){case 0:return s=this.getLabelItems(n),l=this.getLabelsRenderer(),f=this.getGeometryShapes(),[4,l.render(s,f,t)];case 1:return d.sent(),[2]}})})},i.prototype.clear=function(){var n=this.labelsRenderer;n&&n.clear()},i.prototype.destroy=function(){var n=this.labelsRenderer;n&&n.destroy(),this.labelsRenderer=null},i.prototype.getCoordinate=function(){return this.geometry.coordinate},i.prototype.getDefaultLabelCfg=function(n,t){var s=this.geometry,l=s.type,f=s.theme;return l==="polygon"||l==="interval"&&t==="middle"||n<0&&!["line","point","path"].includes(l)?(0,E.U2)(f,"innerLabels",{}):(0,E.U2)(f,"labels",{})},i.prototype.getThemedLabelCfg=function(n){var t=this.geometry,s=this.getDefaultLabelCfg(),l=t.type,f=t.theme,d;return l==="polygon"||n.offset<0&&!["line","point","path"].includes(l)?d=(0,E.b$)({},s,f.innerLabels,n):d=(0,E.b$)({},s,f.labels,n),d},i.prototype.setLabelPosition=function(n,t,s,l){},i.prototype.getLabelOffset=function(n){var t=this.getCoordinate(),s=this.getOffsetVector(n);return t.isTransposed?s[0]:s[1]},i.prototype.getLabelOffsetPoint=function(n,t,s){var l=n.offset,f=this.getCoordinate(),d=f.isTransposed,m=d?"x":"y",x=d?1:-1,A={x:0,y:0};return t>0||s===1?A[m]=l*x:A[m]=l*x*-1,A},i.prototype.getLabelPoint=function(n,t,s){var l=this.getCoordinate(),f=n.content.length;function d(de,ve,$e){$e===void 0&&($e=!1);var lt=de;return(0,E.kJ)(lt)&&(n.content.length===1?$e?lt=au(lt):lt.length<=2?lt=lt[de.length-1]:lt=au(lt):lt=lt[ve]),lt}var m={content:n.content[s],x:0,y:0,start:{x:0,y:0},color:"#fff"},x=(0,E.kJ)(t.shape)?t.shape[0]:t.shape,A=x==="funnel"||x==="pyramid";if(this.geometry.type==="polygon"){var P=yf(t.x,t.y);m.x=P[0],m.y=P[1]}else this.geometry.type==="interval"&&!A?(m.x=d(t.x,s,!0),m.y=d(t.y,s)):(m.x=d(t.x,s),m.y=d(t.y,s));if(A){var k=(0,E.U2)(t,"nextPoints"),B=(0,E.U2)(t,"points");if(k){var U=l.convert(B[1]),W=l.convert(k[1]);m.x=(U.x+W.x)/2,m.y=(U.y+W.y)/2}else if(x==="pyramid"){var U=l.convert(B[1]),W=l.convert(B[2]);m.x=(U.x+W.x)/2,m.y=(U.y+W.y)/2}}n.position&&this.setLabelPosition(m,t,s,n.position);var ne=this.getLabelOffsetPoint(n,s,f);return m.start={x:m.x,y:m.y},m.x+=ne.x,m.y+=ne.y,m.color=t.color,m},i.prototype.getLabelAlign=function(n,t,s){var l="center",f=this.getCoordinate();if(f.isTransposed){var d=n.offset;d<0?l="right":d===0?l="center":l="left",s>1&&t===0&&(l==="right"?l="left":l==="left"&&(l="right"))}return l},i.prototype.getLabelId=function(n){var t=this.geometry,s=t.type,l=t.getXScale(),f=t.getYScale(),d=n[Ce],m=t.getElementId(n);return s==="line"||s==="area"?m+=" ".concat(d[l.field]):s==="path"&&(m+=" ".concat(d[l.field],"-").concat(d[f.field])),m},i.prototype.getLabelsRenderer=function(){var n=this.geometry,t=n.labelsContainer,s=n.labelOption,l=n.canvasRegion,f=n.animateOption,d=this.geometry.coordinate,m=this.labelsRenderer;return m||(m=new _s({container:t,layout:(0,E.U2)(s,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=m),m.region=l,m.animate=f?Kr("label",d):!1,m},i.prototype.getLabelCfgs=function(n){var t=this,s=this.geometry,l=s.labelOption,f=s.scales,d=s.coordinate,m=l,x=m.fields,A=m.callback,P=m.cfg,k=x.map(function(U){return f[U]}),B=[];return(0,E.S6)(n,function(U,W){var ne=U[Ce],de=t.getLabelText(ne,k),ve;if(A){var $e=x.map(function(Tr){return ne[Tr]});if(ve=A.apply(void 0,(0,M.ev)([],(0,M.CR)($e),!1)),(0,E.UM)(ve)){B.push(null);return}}var lt=(0,M.pi)((0,M.pi)({id:t.getLabelId(U),elementId:t.geometry.getElementId(U),data:ne,mappingData:U,coordinate:d},P),ve);(0,E.mf)(lt.position)&&(lt.position=lt.position(ne,U,W));var vt=t.getLabelOffset(lt.offset||0),Ot=t.getDefaultLabelCfg(vt,lt.position);lt=(0,E.b$)({},Ot,lt),lt.offset=t.getLabelOffset(lt.offset||0);var fr=lt.content;(0,E.mf)(fr)?lt.content=fr(ne,U,W):(0,E.o8)(fr)&&(lt.content=de[0]),B.push(lt)}),B},i.prototype.getLabelText=function(n,t){var s=[];return(0,E.S6)(t,function(l){var f=n[l.field];(0,E.kJ)(f)?f=f.map(function(d){return l.getText(d)}):f=l.getText(f),(0,E.UM)(f)||f===""?s.push(null):s.push(f)}),s},i.prototype.getOffsetVector=function(n){n===void 0&&(n=0);var t=this.getCoordinate(),s=0;return(0,E.hj)(n)&&(s=n),t.isTransposed?t.applyMatrix(s,0):t.applyMatrix(0,s)},i.prototype.getGeometryShapes=function(){var n=this.geometry,t={};return(0,E.S6)(n.elementsMap,function(s,l){t[l]=s.shape}),(0,E.S6)(n.getOffscreenGroup().getChildren(),function(s){var l=n.getElementId(s.get("origin").mappingData);t[l]=s}),t},i}(),Co=Ol;function Hf(i,n,t){if(!i)return t;var s;if(i.callback&&i.callback.length>1){var l=Array(i.callback.length-1).fill("");s=i.mapping.apply(i,(0,M.ev)([n],(0,M.CR)(l),!1)).join("")}else s=i.mapping(n).join("");return s||t}var vl={hexagon:function(i,n,t){var s=t/2*Math.sqrt(3);return[["M",i,n-t],["L",i+s,n-t/2],["L",i+s,n+t/2],["L",i,n+t],["L",i-s,n+t/2],["L",i-s,n-t/2],["Z"]]},bowtie:function(i,n,t){var s=t-1.5;return[["M",i-t,n-s],["L",i+t,n+s],["L",i+t,n-s],["L",i-t,n+s],["Z"]]},cross:function(i,n,t){return[["M",i-t,n-t],["L",i+t,n+t],["M",i+t,n-t],["L",i-t,n+t]]},tick:function(i,n,t){return[["M",i-t/2,n-t],["L",i+t/2,n-t],["M",i,n-t],["L",i,n+t],["M",i-t/2,n+t],["L",i+t/2,n+t]]},plus:function(i,n,t){return[["M",i-t,n],["L",i+t,n],["M",i,n-t],["L",i,n+t]]},hyphen:function(i,n,t){return[["M",i-t,n],["L",i+t,n]]},line:function(i,n,t){return[["M",i,n-t],["L",i,n+t]]}},Za=["line","cross","tick","plus","hyphen"];function ra(i,n){return(0,E.mf)(n)?n(i):(0,E.b$)({},i,n)}function _h(i,n){var t=i.symbol;if((0,E.HD)(t)&&Za.indexOf(t)!==-1){var s=(0,E.U2)(i,"style",{}),l=(0,E.U2)(s,"lineWidth",1),f=s.stroke||s.fill||n;i.style=(0,E.b$)({},i.style,{lineWidth:l,stroke:f,fill:null})}}function jf(i){var n=i.symbol;(0,E.HD)(n)&&vl[n]&&(i.symbol=vl[n])}function Np(i){return i.startsWith(me.LEFT)||i.startsWith(me.RIGHT)?"vertical":"horizontal"}function qd(i,n,t,s,l){var f=t.getScale(t.type);if(f.isCategory){var d=f.field,m=n.getAttribute("color"),x=n.getAttribute("shape"),A=i.getTheme().defaultColor,P=n.coordinate.isPolar;return f.getTicks().map(function(k,B){var U,W=k.text,ne=k.value,de=W,ve=f.invert(ne),$e=i.filterFieldData(d,[(U={},U[d]=ve,U)]).length===0;(0,E.S6)(i.views,function(Tr){var zr;Tr.filterFieldData(d,[(zr={},zr[d]=ve,zr)]).length||($e=!0)});var lt=Hf(m,ve,A),vt=Hf(x,ve,"point"),Ot=n.getShapeMarker(vt,{color:lt,isInPolar:P}),fr=l;return(0,E.mf)(fr)&&(fr=fr(de,B,(0,M.pi)({name:de,value:ve},(0,E.b$)({},s,Ot)))),Ot=(0,E.b$)({},s,Ot,Rl((0,M.pi)({},fr),["style"])),_h(Ot,lt),fr&&fr.style&&(Ot.style=ra(Ot.style,fr.style)),jf(Ot),{id:ve,name:de,value:ve,marker:Ot,unchecked:$e}})}return[]}function xg(i,n,t){return t.map(function(s,l){var f=n;(0,E.mf)(f)&&(f=f(s.name,l,(0,E.b$)({},i,s)));var d=(0,E.mf)(s.marker)?s.marker(s.name,l,(0,E.b$)({},i,s)):s.marker,m=(0,E.b$)({},i,f,d);return jf(m),s.marker=m,s})}function zp(i,n){var t=(0,E.U2)(i,["components","legend"],{});return(0,E.b$)({},(0,E.U2)(t,["common"],{}),(0,E.b$)({},(0,E.U2)(t,[n],{})))}function Qd(i){return i?!1:i==null||isNaN(i)}function wm(i){if((0,E.kJ)(i))return Qd(i[1].y);var n=i.y;return(0,E.kJ)(n)?Qd(n[0]):Qd(n)}function md(i,n,t){if(n===void 0&&(n=!1),t===void 0&&(t=!0),!i.length||i.length===1&&!t)return[];if(n){for(var s=[],l=0,f=i.length;l<f;l++){var d=i[l];wm(d)||s.push(d)}return[s]}for(var m=[],x=[],l=0,f=i.length;l<f;l++){var d=i[l];wm(d)?x.length&&(x.length===1&&!t||m.push(x),x=[]):x.push(d)}return x.length&&m.push(x),m}function bg(i){for(var n=[],t=0;t<i.length;t++){var s=i[t];if(s){var l=t===0?"M":"L";n.push([l,s.x,s.y])}}var f=i[0];return f&&(n.push(["L",f.x,f.y]),n.push(["z"])),n}function Cm(i){for(var n=i.length/2,t=[],s=[],l=0;l<i.length;l++)l<n?t.push(i[l]):s.push(i[l]);var f=aa(t,!1),d=aa(s,!1);s.length&&f.push(["L",s[0].x,s[0].y]),d.shift();var m=f.concat(d);return t.length&&m.push(["L",t[0].x,t[0].y]),m.push(["z"]),m}function mu(i,n,t,s){s===void 0&&(s="");var l=i.style,f=l===void 0?{}:l,d=i.defaultStyle,m=i.color,x=i.size,A=(0,M.pi)((0,M.pi)({},d),f);return m&&(n&&(f.stroke||(A.stroke=m)),t&&(f.fill||(A.fill=m))),s&&(0,E.UM)(f[s])&&!(0,E.UM)(x)&&(A[s]=x),A}function Up(i){return(0,E.b$)({},{fill:"#CCD6EC",fillOpacity:.3},(0,E.U2)(i,["background","style"]))}function Pv(i){var n=i.x,t=(0,E.kJ)(i.y)?i.y:[i.y];return t.map(function(s,l){return{x:(0,E.kJ)(n)?n[l]:n,y:s}})}var Ov={line:function(i,n,t){return[["M",i-t,n],["L",i+t,n]]},dot:function(i,n,t){return[["M",i-t,n],["L",i+t,n]]},dash:function(i,n,t){return[["M",i-t,n],["L",i+t,n]]},smooth:function(i,n,t){return[["M",i-t,n],["A",t/2,t/2,0,1,1,i,n],["A",t/2,t/2,0,1,0,i+t,n]]},hv:function(i,n,t){return[["M",i-t-1,n-2.5],["L",i,n-2.5],["L",i,n+2.5],["L",i+t+1,n+2.5]]},vh:function(i,n,t){return[["M",i-t-1,n+2.5],["L",i,n+2.5],["L",i,n-2.5],["L",i+t+1,n-2.5]]},hvh:function(i,n,t){return[["M",i-(t+1),n+2.5],["L",i-t/2,n+2.5],["L",i-t/2,n-2.5],["L",i+t/2,n-2.5],["L",i+t/2,n+2.5],["L",i+t+1,n+2.5]]},vhv:function(i,n){return[["M",i-5,n+2.5],["L",i-5,n],["L",i,n],["L",i,n-3],["L",i,n+3],["L",i+6.5,n+3]]}};function yd(i,n){var t=i.color;return{symbol:Ov[n],style:{lineWidth:2,r:6,stroke:t}}}function Sg(i,n,t){for(var s=i.isStack,l=i.connectNulls,f=i.isInCircle,d=i.showSinglePoint,m=mu(i,!0,!1,"lineWidth"),x=md(i.points,l,d),A=[],P=0,k=x.length;P<k;P++){var B=x[P];A=A.concat(wg(B,f,s,n,t,m))}return m.path=A,m}function Eg(i,n,t,s,l){if(i.length===1)return[["M",i[0].x,i[0].y-l.lineWidth/2],["L",i[0].x,i[0].y],["L",i[0].x,i[0].y+l.lineWidth/2]];var f;return t?(n&&i.length&&i.push({x:i[0].x,y:i[0].y}),f=aa(i,!1,s)):(f=Rn(i,!1),n&&f.push(["Z"])),f}function U0(i,n,t,s,l,f){var d=[],m=[];(0,E.S6)(i,function(P){var k=Pv(P);d.push(k[1]),m.push(k[0])});var x=Eg(d,n,s,l,f),A=Eg(m,n,s,l,f);return t?x:x.concat(A)}function wg(i,n,t,s,l,f){if(i.length){var d=i[0];return(0,E.kJ)(d.y)?U0(i,n,t,s,l,f):Eg(i,n,s,l,f)}return[]}var Z0=io("line",{defaultShapeType:"line"});(0,E.S6)(["line","dot","dash","smooth"],function(i){fi("line",i,{draw:function(n,t){var s=i==="smooth",l;if(s){var f=this.coordinate,d=f.start,m=f.end;l=[[d.x,m.y],[m.x,d.y]]}var x=Sg(n,s,l),A=t.addShape({type:"path",attrs:x,name:"line",capture:!s});return A},getMarker:function(n){return yd(n,i)}})});var y_=null,V0="4.2.10",ec={getLegendItems:qd,translate:Nu,rotate:il,zoom:al,transform:iu,getAngle:vd,getSectorPath:mh,polarToCartesian:os,getDelegationObject:Uo,getTooltipItems:$d,getMappingValue:Hf,getPath:wg,getPathPoints:md},xh={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},Jo={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},Lc=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],Gh=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],Cg=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],Am=function(i){i===void 0&&(i={});var n=i.paletteQualitative10,t=n===void 0?Lc:n,s=i.paletteQualitative20,l=s===void 0?Gh:s,f=i.brandColor,d=f===void 0?t[0]:f,m={backgroundColor:"#141414",brandColor:d,subColor:"rgba(255,255,255,0.05)",paletteQualitative10:t,paletteQualitative20:l,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:Cg,fontFamily:`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`,axisLineBorderColor:Jo[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:Jo[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:xh[85],axisTickLineBorderColor:Jo[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:Jo[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:Jo[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:Jo[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:Jo[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:Lc[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:Jo[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:Jo[45],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:Jo[45],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:Jo[65],legendPageNavigatorTextFontSize:12,sliderRailFillColor:Jo[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:Jo[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:xh[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:xh[25],annotationArcBorderColor:Jo[15],annotationArcBorder:1,annotationLineBorderColor:Jo[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:Jo[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:Jo[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:Jo[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:Jo[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:Jo[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:xh[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:Jo[65],overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:xh[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:Jo[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#fff",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(255,255,255,0.65)",scrollbarThumbFillColor:"rgba(0,0,0,0.35)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.45)",pointFillColor:Lc[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:xh[100],pointBorderOpacity:1,pointActiveBorderColor:Jo[100],pointSelectedBorder:2,pointSelectedBorderColor:Jo[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:Lc[0],hollowPointBorderOpacity:.95,hollowPointFillColor:xh[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:Jo[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:Jo[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:Lc[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:Lc[0],areaFillOpacity:.25,areaActiveFillColor:Lc[0],areaActiveFillOpacity:.5,areaSelectedFillColor:Lc[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:Lc[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:Jo[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:Jo[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:Lc[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:Jo[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:Jo[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:Lc[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:xh[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:Jo[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:Jo[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return(0,M.pi)((0,M.pi)({},m),i)},kv=Am();function Tm(){return window?window.devicePixelRatio:1}function Fv(i,n,t,s){var l=i-t,f=n-s;return Math.sqrt(l*l+f*f)}function _d(i,n,t,s,l,f){return l>=i&&l<=i+t&&f>=n&&f<=n+s}function Ag(i,n){return!(n.minX>i.maxX||n.maxX<i.minX||n.minY>i.maxY||n.maxY<i.minY)}function __(i,n){return!i||!n?i||n:{minX:Math.min(i.minX,n.minX),minY:Math.min(i.minY,n.minY),maxX:Math.max(i.maxX,n.maxX),maxY:Math.max(i.maxY,n.maxY)}}function x_(i,n){return i[0]===n[0]&&i[1]===n[1]}var b_=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,tE=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Mm=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,yu=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Jc(i,n){var t=i.match(yu);(0,E.S6)(t,function(s){var l=s.split(":");n.addColorStop(l[0],l[1])})}function kx(i,n,t){var s=b_.exec(t),l=parseFloat(s[1])%360*(Math.PI/180),f=s[2],d=n.getBBox(),m,x;l>=0&&l<1/2*Math.PI?(m={x:d.minX,y:d.minY},x={x:d.maxX,y:d.maxY}):1/2*Math.PI<=l&&l<Math.PI?(m={x:d.maxX,y:d.minY},x={x:d.minX,y:d.maxY}):Math.PI<=l&&l<3/2*Math.PI?(m={x:d.maxX,y:d.maxY},x={x:d.minX,y:d.minY}):(m={x:d.minX,y:d.maxY},x={x:d.maxX,y:d.minY});var A=Math.tan(l),P=A*A,k=(x.x-m.x+A*(x.y-m.y))/(P+1)+m.x,B=A*(x.x-m.x+A*(x.y-m.y))/(P+1)+m.y,U=i.createLinearGradient(m.x,m.y,k,B);return Jc(f,U),U}function Zp(i,n,t){var s=tE.exec(t),l=parseFloat(s[1]),f=parseFloat(s[2]),d=parseFloat(s[3]),m=s[4];if(d===0){var x=m.match(yu);return x[x.length-1].split(":")[1]}var A=n.getBBox(),P=A.maxX-A.minX,k=A.maxY-A.minY,B=Math.sqrt(P*P+k*k)/2,U=i.createRadialGradient(A.minX+P*l,A.minY+k*f,0,A.minX+P/2,A.minY+k/2,d*B);return Jc(m,U),U}function Rm(i,n,t){if(n.get("patternSource")&&n.get("patternSource")===t)return n.get("pattern");var s,l,f=Mm.exec(t),d=f[1],m=f[2];function x(){s=i.createPattern(l,d),n.set("pattern",s),n.set("patternSource",t)}switch(d){case"a":d="repeat";break;case"x":d="repeat-x";break;case"y":d="repeat-y";break;case"n":d="no-repeat";break;default:d="no-repeat"}return l=new Image,m.match(/^data:/i)||(l.crossOrigin="Anonymous"),l.src=m,l.complete?x():(l.onload=x,l.src=l.src),s}function Bc(i,n,t){var s=n.getBBox();if(isNaN(s.x)||isNaN(s.y)||isNaN(s.width)||isNaN(s.height))return t;if((0,E.HD)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return kx(i,n,t);if(t[0]==="r")return Zp(i,n,t);if(t[0]==="p")return Rm(i,n,t)}return t}if(t instanceof CanvasPattern)return t}function Xh(i){var n=0,t=0,s=0,l=0;return(0,E.kJ)(i)?i.length===1?n=t=s=l=i[0]:i.length===2?(n=s=i[0],t=l=i[1]):i.length===3?(n=i[0],t=l=i[1],s=i[2]):(n=i[0],t=i[1],s=i[2],l=i[3]):n=t=s=l=i,[n,t,s,l]}function ef(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Jd(i,n){return ef(i)*ef(n)?(i[0]*n[0]+i[1]*n[1])/(ef(i)*ef(n)):1}function ev(i,n){return(i[0]*n[1]<i[1]*n[0]?-1:1)*Math.acos(Jd(i,n))}function Vp(i,n){var t=n[1],s=n[2],l=(0,E.wQ)((0,E.c$)(n[3]),Math.PI*2),f=n[4],d=n[5],m=i[0],x=i[1],A=n[6],P=n[7],k=Math.cos(l)*(m-A)/2+Math.sin(l)*(x-P)/2,B=-1*Math.sin(l)*(m-A)/2+Math.cos(l)*(x-P)/2,U=k*k/(t*t)+B*B/(s*s);U>1&&(t*=Math.sqrt(U),s*=Math.sqrt(U));var W=t*t*(B*B)+s*s*(k*k),ne=W?Math.sqrt((t*t*(s*s)-W)/W):1;f===d&&(ne*=-1),isNaN(ne)&&(ne=0);var de=s?ne*t*B/s:0,ve=t?ne*-s*k/t:0,$e=(m+A)/2+Math.cos(l)*de-Math.sin(l)*ve,lt=(x+P)/2+Math.sin(l)*de+Math.cos(l)*ve,vt=[(k-de)/t,(B-ve)/s],Ot=[(-1*k-de)/t,(-1*B-ve)/s],fr=ev([1,0],vt),Tr=ev(vt,Ot);return Jd(vt,Ot)<=-1&&(Tr=Math.PI),Jd(vt,Ot)>=1&&(Tr=0),d===0&&Tr>0&&(Tr=Tr-2*Math.PI),d===1&&Tr<0&&(Tr=Tr+2*Math.PI),{cx:$e,cy:lt,rx:x_(i,[A,P])?0:t,ry:x_(i,[A,P])?0:s,startAngle:fr,endAngle:fr+Tr,xRotation:l,arcFlag:f,sweepFlag:d}}var xd=Math.sin,Dv=Math.cos,Im=Math.atan2,Hp=Math.PI;function Pm(i,n,t,s,l,f,d){var m=n.stroke,x=n.lineWidth,A=t-l,P=s-f,k=Im(P,A),B=new Fx({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*Dv(Hp/6)+","+10*xd(Hp/6)+" L0,0 L"+10*Dv(Hp/6)+",-"+10*xd(Hp/6),stroke:m,lineWidth:x}});B.translate(l,f),B.rotateAtPoint(l,f,k),i.set(d?"startArrowShape":"endArrowShape",B)}function H0(i,n,t,s,l,f,d){var m=n.startArrow,x=n.endArrow,A=n.stroke,P=n.lineWidth,k=d?m:x,B=k.d,U=k.fill,W=k.stroke,ne=k.lineWidth,de=(0,M._T)(k,["d","fill","stroke","lineWidth"]),ve=t-l,$e=s-f,lt=Im($e,ve);B&&(l=l-Dv(lt)*B,f=f-xd(lt)*B);var vt=new Fx({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:(0,M.pi)((0,M.pi)({},de),{stroke:W||A,lineWidth:ne||P,fill:U})});vt.translate(l,f),vt.rotateAtPoint(l,f,lt),i.set(d?"startArrowShape":"endArrowShape",vt)}function bd(i,n,t,s,l){var f=Im(s-n,t-i);return{dx:Dv(f)*l,dy:xd(f)*l}}function Om(i,n,t,s,l,f){typeof n.startArrow=="object"?H0(i,n,t,s,l,f,!0):n.startArrow?Pm(i,n,t,s,l,f,!0):i.set("startArrowShape",null)}function km(i,n,t,s,l,f){typeof n.endArrow=="object"?H0(i,n,t,s,l,f,!1):n.endArrow?Pm(i,n,t,s,l,f,!1):i.set("startArrowShape",null)}var kl={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function zu(i,n){var t=n.attr();for(var s in t){var l=t[s],f=kl[s]?kl[s]:s;f==="matrix"&&l?i.transform(l[0],l[1],l[3],l[4],l[6],l[7]):f==="lineDash"&&i.setLineDash?(0,E.kJ)(l)&&i.setLineDash(l):(f==="strokeStyle"||f==="fillStyle"?l=Bc(i,n,l):f==="globalAlpha"&&(l=l*i.globalAlpha),i[f]=l)}}function Tg(i,n,t){for(var s=0;s<n.length;s++){var l=n[s];l.cfg.visible?l.draw(i,t):l.skipDraw()}}function bh(i,n,t){var s=i.get("refreshElements");(0,E.S6)(s,function(l){if(l!==i)for(var f=l.cfg.parent;f&&f!==i&&!f.cfg.refresh;)f.cfg.refresh=!0,f=f.cfg.parent}),s[0]===i?$h(n,t):Fm(n,t)}function Fm(i,n){for(var t=0;t<i.length;t++){var s=i[t];if(s.cfg.visible)if(s.cfg.hasChanged)s.cfg.refresh=!0,s.isGroup()&&$h(s.cfg.children,n);else if(s.cfg.refresh)s.isGroup()&&Fm(s.cfg.children,n);else{var l=Lv(s,n);s.cfg.refresh=l,l&&s.isGroup()&&Fm(s.cfg.children,n)}}}function Mg(i){for(var n=0;n<i.length;n++){var t=i[n];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&Mg(t.cfg.children)}}function $h(i,n){for(var t=0;t<i.length;t++){var s=i[t];s.cfg.visible&&(s.cfg.refresh=!0,s.isGroup()&&$h(s.get("children"),n))}}function Lv(i,n){var t=i.cfg.cacheCanvasBBox,s=i.cfg.isInView&&t&&Ag(t,n);return s}function tv(i,n,t,s){var l=t.path,f=t.startArrow,d=t.endArrow;if(l){var m=[0,0],x=[0,0],A={dx:0,dy:0};n.beginPath();for(var P=0;P<l.length;P++){var k=l[P],B=k[0];if(P===0&&f&&f.d){var U=i.getStartTangent();A=bd(U[0][0],U[0][1],U[1][0],U[1][1],f.d)}else if(P===l.length-2&&l[P+1][0]==="Z"&&d&&d.d){var W=l[P+1];if(W[0]==="Z"){var U=i.getEndTangent();A=bd(U[0][0],U[0][1],U[1][0],U[1][1],d.d)}}else if(P===l.length-1&&d&&d.d&&l[0]!=="Z"){var U=i.getEndTangent();A=bd(U[0][0],U[0][1],U[1][0],U[1][1],d.d)}var ne=A.dx,de=A.dy;switch(B){case"M":n.moveTo(k[1]-ne,k[2]-de),x=[k[1],k[2]];break;case"L":n.lineTo(k[1]-ne,k[2]-de);break;case"Q":n.quadraticCurveTo(k[1],k[2],k[3]-ne,k[4]-de);break;case"C":n.bezierCurveTo(k[1],k[2],k[3],k[4],k[5]-ne,k[6]-de);break;case"A":{var ve=void 0;s?(ve=s[P],ve||(ve=Vp(m,k),s[P]=ve)):ve=Vp(m,k);var $e=ve.cx,lt=ve.cy,vt=ve.rx,Ot=ve.ry,fr=ve.startAngle,Tr=ve.endAngle,zr=ve.xRotation,cn=ve.sweepFlag;if(n.ellipse)n.ellipse($e,lt,vt,Ot,zr,fr,Tr,1-cn);else{var Qr=vt>Ot?vt:Ot,On=vt>Ot?1:vt/Ot,Qn=vt>Ot?Ot/vt:1;n.translate($e,lt),n.rotate(zr),n.scale(On,Qn),n.arc(0,0,Qr,fr,Tr,1-cn),n.scale(1/On,1/Qn),n.rotate(-zr),n.translate(-$e,-lt)}break}case"Z":n.closePath();break;default:break}if(B==="Z")m=x;else{var Hi=k.length;m=[k[Hi-2],k[Hi-1]]}}}}function rv(i,n){var t=i.get("canvas");t&&(n==="remove"&&(i._cacheCanvasBBox=i.get("cacheCanvasBBox")),i.get("hasChanged")||(i.set("hasChanged",!0),i.cfg.parent&&i.cfg.parent.get("hasChanged")||(t.refreshElement(i,n,t),t.get("autoDraw")&&t.draw())))}function Bv(i){var n;if(i.destroyed)n=i._cacheCanvasBBox;else{var t=i.get("cacheCanvasBBox"),s=t&&!!(t.width&&t.height),l=i.getCanvasBBox(),f=l&&!!(l.width&&l.height);s&&f?n=__(t,l):s?n=t:f&&(n=l)}return n}function S_(i){if(!i.length)return null;var n=[],t=[],s=[],l=[];return(0,E.S6)(i,function(f){var d=Bv(f);d&&(n.push(d.minX),t.push(d.minY),s.push(d.maxX),l.push(d.maxY))}),{minX:(0,E.VV)(n),minY:(0,E.VV)(t),maxX:(0,E.Fp)(s),maxY:(0,E.Fp)(l)}}function E_(i,n){return!i||!n||!Ag(i,n)?null:{minX:Math.max(i.minX,n.minX),minY:Math.max(i.minY,n.minY),maxX:Math.min(i.maxX,n.maxX),maxY:Math.min(i.maxY,n.maxY)}}var w_=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.onCanvasChange=function(t){rv(this,t)},n.prototype.getShapeBase=function(){return ee},n.prototype.getGroupBase=function(){return n},n.prototype._applyClip=function(t,s){s&&(t.save(),zu(t,s),s.createPath(t),t.restore(),t.clip(),s._afterDraw())},n.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,s=[],l=[];(0,E.S6)(t,function(B){var U=B.cfg.cacheCanvasBBox;U&&B.cfg.isInView&&(s.push(U.minX,U.maxX),l.push(U.minY,U.maxY))});var f=null;if(s.length){var d=(0,E.VV)(s),m=(0,E.Fp)(s),x=(0,E.VV)(l),A=(0,E.Fp)(l);f={minX:d,minY:x,x:d,y:x,maxX:m,maxY:A,width:m-d,height:A-x};var P=this.cfg.canvas;if(P){var k=P.getViewRange();this.set("isInView",Ag(f,k))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",f)},n.prototype.draw=function(t,s){var l=this.cfg.children,f=s?this.cfg.refresh:!0;l.length&&f&&(t.save(),zu(t,this),this._applyClip(t,this.getClip()),Tg(t,l,s),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},n.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},n}(ze.AbstractGroup),gt=w_,Dm=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},n.prototype.getShapeBase=function(){return ee},n.prototype.getGroupBase=function(){return gt},n.prototype.onCanvasChange=function(t){rv(this,t)},n.prototype.calculateBBox=function(){var t=this.get("type"),s=this.getHitLineWidth(),l=(0,ze.getBBoxMethod)(t),f=l(this),d=s/2,m=f.x-d,x=f.y-d,A=f.x+f.width+d,P=f.y+f.height+d;return{x:m,minX:m,y:x,minY:x,width:f.width+s,height:f.height+s,maxX:A,maxY:P}},n.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},n.prototype.isStroke=function(){return!!this.attrs.stroke},n.prototype._applyClip=function(t,s){s&&(t.save(),zu(t,s),s.createPath(t),t.restore(),t.clip(),s._afterDraw())},n.prototype.draw=function(t,s){var l=this.cfg.clipShape;if(s){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var f=this.getCanvasBBox();if(!Ag(s,f)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),zu(t,this),this._applyClip(t,l),this.drawPath(t),t.restore(),this._afterDraw()},n.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},n.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var s=this.getCanvasBBox(),l=Ag(s,t);this.set("isInView",l),l?this.set("cacheCanvasBBox",s):this.set("cacheCanvasBBox",null)}},n.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},n.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},n.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},n.prototype.fill=function(t){t.fill()},n.prototype.stroke=function(t){t.stroke()},n.prototype.strokeAndFill=function(t){var s=this.attrs,l=s.lineWidth,f=s.opacity,d=s.strokeOpacity,m=s.fillOpacity;this.isFill()&&(!(0,E.UM)(m)&&m!==1?(t.globalAlpha=m,this.fill(t),t.globalAlpha=f):this.fill(t)),this.isStroke()&&l>0&&(!(0,E.UM)(d)&&d!==1&&(t.globalAlpha=d),this.stroke(t)),this.afterDrawPath(t)},n.prototype.createPath=function(t){},n.prototype.afterDrawPath=function(t){},n.prototype.isInShape=function(t,s){var l=this.isStroke(),f=this.isFill(),d=this.getHitLineWidth();return this.isInStrokeOrPath(t,s,l,f,d)},n.prototype.isInStrokeOrPath=function(t,s,l,f,d){return!1},n.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},n}(ze.AbstractShape),tf=Dm,Yh=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,r:0})},n.prototype.isInStrokeOrPath=function(t,s,l,f,d){var m=this.attr(),x=m.x,A=m.y,P=m.r,k=d/2,B=Fv(x,A,t,s);return f&&l?B<=P+k:f?B<=P:l?B>=P-k&&B<=P+k:!1},n.prototype.createPath=function(t){var s=this.attr(),l=s.x,f=s.y,d=s.r;t.beginPath(),t.arc(l,f,d,0,Math.PI*2,!1),t.closePath()},n}(tf),j0=Yh;function nv(i,n,t,s){return i/(t*t)+n/(s*s)}var Lm=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,rx:0,ry:0})},n.prototype.isInStrokeOrPath=function(t,s,l,f,d){var m=this.attr(),x=d/2,A=m.x,P=m.y,k=m.rx,B=m.ry,U=(t-A)*(t-A),W=(s-P)*(s-P);return f&&l?nv(U,W,k+x,B+x)<=1:f?nv(U,W,k,B)<=1:l?nv(U,W,k-x,B-x)>=1&&nv(U,W,k+x,B+x)<=1:!1},n.prototype.createPath=function(t){var s=this.attr(),l=s.x,f=s.y,d=s.rx,m=s.ry;if(t.beginPath(),t.ellipse)t.ellipse(l,f,d,m,0,0,Math.PI*2,!1);else{var x=d>m?d:m,A=d>m?1:d/m,P=d>m?m/d:1;t.save(),t.translate(l,f),t.scale(A,P),t.arc(0,0,x,0,Math.PI*2),t.restore(),t.closePath()}},n}(tf),W0=Lm;function Kh(i){return i instanceof HTMLElement&&(0,E.HD)(i.nodeName)&&i.nodeName.toUpperCase()==="CANVAS"}var G0=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,width:0,height:0})},n.prototype.initAttrs=function(t){this._setImage(t.img)},n.prototype.isStroke=function(){return!1},n.prototype.isOnlyHitBox=function(){return!0},n.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},n.prototype._setImage=function(t){var s=this,l=this.attrs;if((0,E.HD)(t)){var f=new Image;f.onload=function(){if(s.destroyed)return!1;s.attr("img",f),s.set("loading",!1),s._afterLoading();var d=s.get("callback");d&&d.call(s)},f.crossOrigin="Anonymous",f.src=t,this.set("loading",!0)}else t instanceof Image?(l.width||(l.width=t.width),l.height||(l.height=t.height)):Kh(t)&&(l.width||(l.width=Number(t.getAttribute("width"))),l.height||(l.height,Number(t.getAttribute("height"))))},n.prototype.onAttrChange=function(t,s,l){i.prototype.onAttrChange.call(this,t,s,l),t==="img"&&this._setImage(s)},n.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var s=this.attr(),l=s.x,f=s.y,d=s.width,m=s.height,x=s.sx,A=s.sy,P=s.swidth,k=s.sheight,B=s.img;(B instanceof Image||Kh(B))&&(!(0,E.UM)(x)&&!(0,E.UM)(A)&&!(0,E.UM)(P)&&!(0,E.UM)(k)?t.drawImage(B,x,A,P,k,l,f,d,m):t.drawImage(B,l,f,d,m))},n}(tf),X0=G0,Fl=F(32793);function qh(i,n,t,s,l,f,d){var m=Math.min(i,t),x=Math.max(i,t),A=Math.min(n,s),P=Math.max(n,s),k=l/2;return f>=m-k&&f<=x+k&&d>=A-k&&d<=P+k?Fl.x1.pointToLine(i,n,t,s,f,d)<=l/2:!1}var Nv=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},n.prototype.initAttrs=function(t){this.setArrow()},n.prototype.onAttrChange=function(t,s,l){i.prototype.onAttrChange.call(this,t,s,l),this.setArrow()},n.prototype.setArrow=function(){var t=this.attr(),s=t.x1,l=t.y1,f=t.x2,d=t.y2,m=t.startArrow,x=t.endArrow;m&&Om(this,t,f,d,s,l),x&&km(this,t,s,l,f,d)},n.prototype.isInStrokeOrPath=function(t,s,l,f,d){if(!l||!d)return!1;var m=this.attr(),x=m.x1,A=m.y1,P=m.x2,k=m.y2;return qh(x,A,P,k,d,t,s)},n.prototype.createPath=function(t){var s=this.attr(),l=s.x1,f=s.y1,d=s.x2,m=s.y2,x=s.startArrow,A=s.endArrow,P={dx:0,dy:0},k={dx:0,dy:0};x&&x.d&&(P=bd(l,f,d,m,s.startArrow.d)),A&&A.d&&(k=bd(l,f,d,m,s.endArrow.d)),t.beginPath(),t.moveTo(l+P.dx,f+P.dy),t.lineTo(d-k.dx,m-k.dy)},n.prototype.afterDrawPath=function(t){var s=this.get("startArrowShape"),l=this.get("endArrowShape");s&&s.draw(t),l&&l.draw(t)},n.prototype.getTotalLength=function(){var t=this.attr(),s=t.x1,l=t.y1,f=t.x2,d=t.y2;return Fl.x1.length(s,l,f,d)},n.prototype.getPoint=function(t){var s=this.attr(),l=s.x1,f=s.y1,d=s.x2,m=s.y2;return Fl.x1.pointAt(l,f,d,m,t)},n}(tf),C_=Nv,Bm={circle:function(i,n,t){return[["M",i-t,n],["A",t,t,0,1,0,i+t,n],["A",t,t,0,1,0,i-t,n]]},square:function(i,n,t){return[["M",i-t,n-t],["L",i+t,n-t],["L",i+t,n+t],["L",i-t,n+t],["Z"]]},diamond:function(i,n,t){return[["M",i-t,n],["L",i,n-t],["L",i+t,n],["L",i,n+t],["Z"]]},triangle:function(i,n,t){var s=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,n+s],["L",i,n-s],["L",i+t,n+s],["Z"]]},"triangle-down":function(i,n,t){var s=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,n-s],["L",i+t,n-s],["L",i,n+s],["Z"]]}},A_=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.initAttrs=function(t){this._resetParamsCache()},n.prototype._resetParamsCache=function(){this.set("paramsCache",{})},n.prototype.onAttrChange=function(t,s,l){i.prototype.onAttrChange.call(this,t,s,l),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},n.prototype.isOnlyHitBox=function(){return!0},n.prototype._getR=function(t){return(0,E.UM)(t.r)?t.radius:t.r},n.prototype._getPath=function(){var t=this.attr(),s=t.x,l=t.y,f=t.symbol||"circle",d=this._getR(t),m,x;if((0,E.mf)(f))m=f,x=m(s,l,d),x=(0,zh.wb)(x);else{if(m=n.Symbols[f],!m)return console.warn(f+" marker is not supported."),null;x=m(s,l,d)}return x},n.prototype.createPath=function(t){var s=this._getPath(),l=this.get("paramsCache");tv(this,t,{path:s},l)},n.Symbols=Bm,n}(tf),$0=A_;function Y0(i,n,t){var s=(0,ze.getOffScreenContext)();return i.createPath(s),s.isPointInPath(n,t)}var T_=1e-6;function Nm(i){return Math.abs(i)<T_?0:i<0?-1:1}function Rg(i,n,t){return(t[0]-i[0])*(n[1]-i[1])===(n[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],n[0])<=t[0]&&t[0]<=Math.max(i[0],n[0])&&Math.min(i[1],n[1])<=t[1]&&t[1]<=Math.max(i[1],n[1])}function K0(i,n,t){var s=!1,l=i.length;if(l<=2)return!1;for(var f=0;f<l;f++){var d=i[f],m=i[(f+1)%l];if(Rg(d,m,[n,t]))return!0;Nm(d[1]-t)>0!=Nm(m[1]-t)>0&&Nm(n-(t-d[1])*(d[0]-m[0])/(d[1]-m[1])-d[0])<0&&(s=!s)}return s}function zv(i,n,t,s,l,f,d,m){var x=(Math.atan2(m-n,d-i)+Math.PI*2)%(Math.PI*2);if(x<s||x>l)return!1;var A={x:i+t*Math.cos(x),y:n+t*Math.sin(x)};return Fv(A.x,A.y,d,m)<=f/2}var M_=mo.vs;function q0(i){for(var n=!1,t=i.length,s=0;s<t;s++){var l=i[s],f=l[0];if(f==="C"||f==="A"||f==="Q"){n=!0;break}}return n}function Qh(i,n,t,s,l){for(var f=!1,d=n/2,m=0;m<i.length;m++){var x=i[m],A=x.currentPoint,P=x.params,k=x.prePoint,B=x.box;if(!(B&&!_d(B.x-d,B.y-d,B.width+n,B.height+n,t,s))){switch(x.command){case"L":case"Z":f=qh(k[0],k[1],A[0],A[1],n,t,s);break;case"Q":var U=Fl.lD.pointDistance(k[0],k[1],P[1],P[2],P[3],P[4],t,s);f=U<=n/2;break;case"C":var W=Fl.Ll.pointDistance(k[0],k[1],P[1],P[2],P[3],P[4],P[5],P[6],t,s,l);f=W<=n/2;break;case"A":var ne=x.arcParams,de=ne.cx,ve=ne.cy,$e=ne.rx,lt=ne.ry,vt=ne.startAngle,Ot=ne.endAngle,fr=ne.xRotation,Tr=[t,s,1],zr=$e>lt?$e:lt,cn=$e>lt?1:$e/lt,Qr=$e>lt?lt/$e:1,On=M_(null,[["t",-de,-ve],["r",-fr],["s",1/cn,1/Qr]]);co.transformMat3(Tr,Tr,On),f=zv(0,0,zr,vt,Ot,n,Tr[0],Tr[1]);break;default:break}if(f)break}}return f}function Ig(i){for(var n=i.length,t=[],s=[],l=[],f=0;f<n;f++){var d=i[f],m=d[0];m==="M"?(l.length&&(s.push(l),l=[]),l.push([d[1],d[2]])):m==="Z"?l.length&&(t.push(l),l=[]):l.push([d[1],d[2]])}return l.length>0&&s.push(l),{polygons:t,polylines:s}}var Pg=(0,M.pi)({hasArc:q0,extractPolygons:Ig,isPointInStroke:Qh},ze.PathUtil);function Uv(i,n,t){for(var s=!1,l=0;l<i.length;l++){var f=i[l];if(s=K0(f,n,t),s)break}return s}var Q0=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{startArrow:!1,endArrow:!1})},n.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},n.prototype.onAttrChange=function(t,s,l){i.prototype.onAttrChange.call(this,t,s,l),t==="path"&&this._setPathArr(s),this.setArrow()},n.prototype._setPathArr=function(t){this.attrs.path=(0,zh.wb)(t);var s=Pg.hasArc(t);this.set("hasArc",s),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},n.prototype.getSegments=function(){var t=this.get("segements");return t||(t=(0,zh.zx)(this.attr("path")),this.set("segments",t)),t},n.prototype.setArrow=function(){var t=this.attr(),s=t.startArrow,l=t.endArrow;if(s){var f=this.getStartTangent();Om(this,t,f[0][0],f[0][1],f[1][0],f[1][1])}if(l){var f=this.getEndTangent();km(this,t,f[0][0],f[0][1],f[1][0],f[1][1])}},n.prototype.isInStrokeOrPath=function(t,s,l,f,d){var m=this.getSegments(),x=this.get("hasArc"),A=!1;if(l){var P=this.getTotalLength();A=Pg.isPointInStroke(m,d,t,s,P)}if(!A&&f)if(x)A=Y0(this,t,s);else{var k=this.attr("path"),B=Pg.extractPolygons(k);A=Uv(B.polygons,t,s)||Uv(B.polylines,t,s)}return A},n.prototype.createPath=function(t){var s=this.attr(),l=this.get("paramsCache");tv(this,t,s,l)},n.prototype.afterDrawPath=function(t){var s=this.get("startArrowShape"),l=this.get("endArrowShape");s&&s.draw(t),l&&l.draw(t)},n.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,E.UM)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},n.prototype.getPoint=function(t){var s=this.get("tCache");s||(this._calculateCurve(),this._setTcache(),s=this.get("tCache"));var l,f,d=this.get("curve");if(!s||s.length===0)return d?{x:d[0][1],y:d[0][2]}:null;(0,E.S6)(s,function(P,k){t>=P[0]&&t<=P[1]&&(l=(t-P[0])/(P[1]-P[0]),f=k)});var m=d[f];if((0,E.UM)(m)||(0,E.UM)(f))return null;var x=m.length,A=d[f+1];return Fl.Ll.pointAt(m[x-2],m[x-1],A[1],A[2],A[3],A[4],A[5],A[6],l)},n.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",Pg.pathToCurve(t))},n.prototype._setTcache=function(){var t=0,s=0,l=[],f,d,m,x,A=this.get("curve");if(A){if((0,E.S6)(A,function(P,k){m=A[k+1],x=P.length,m&&(t+=Fl.Ll.length(P[x-2],P[x-1],m[1],m[2],m[3],m[4],m[5],m[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,E.S6)(A,function(P,k){m=A[k+1],x=P.length,m&&(f=[],f[0]=s/t,d=Fl.Ll.length(P[x-2],P[x-1],m[1],m[2],m[3],m[4],m[5],m[6]),s+=d||0,f[1]=s/t,l.push(f))}),this.set("tCache",l)}},n.prototype.getStartTangent=function(){var t=this.getSegments(),s;if(t.length>1){var l=t[0].currentPoint,f=t[1].currentPoint,d=t[1].startTangent;s=[],d?(s.push([l[0]-d[0],l[1]-d[1]]),s.push([l[0],l[1]])):(s.push([f[0],f[1]]),s.push([l[0],l[1]]))}return s},n.prototype.getEndTangent=function(){var t=this.getSegments(),s=t.length,l;if(s>1){var f=t[s-2].currentPoint,d=t[s-1].currentPoint,m=t[s-1].endTangent;l=[],m?(l.push([d[0]-m[0],d[1]-m[1]]),l.push([d[0],d[1]])):(l.push([f[0],f[1]]),l.push([d[0],d[1]]))}return l},n}(tf),Fx=Q0;function Nc(i,n,t,s,l){var f=i.length;if(f<2)return!1;for(var d=0;d<f-1;d++){var m=i[d][0],x=i[d][1],A=i[d+1][0],P=i[d+1][1];if(qh(m,x,A,P,n,t,s))return!0}if(l){var k=i[0],B=i[f-1];if(qh(k[0],k[1],B[0],B[1],n,t,s))return!0}return!1}var oR=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.isInStrokeOrPath=function(t,s,l,f,d){var m=this.attr().points,x=!1;return l&&(x=Nc(m,d,t,s,!0)),!x&&f&&(x=K0(m,t,s)),x},n.prototype.createPath=function(t){var s=this.attr(),l=s.points;if(!(l.length<2)){t.beginPath();for(var f=0;f<l.length;f++){var d=l[f];f===0?t.moveTo(d[0],d[1]):t.lineTo(d[0],d[1])}t.closePath()}},n}(tf),sR=oR,uR=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{startArrow:!1,endArrow:!1})},n.prototype.initAttrs=function(t){this.setArrow()},n.prototype.onAttrChange=function(t,s,l){i.prototype.onAttrChange.call(this,t,s,l),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},n.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},n.prototype.setArrow=function(){var t=this.attr(),s=this.attrs,l=s.points,f=s.startArrow,d=s.endArrow,m=l.length,x=l[0][0],A=l[0][1],P=l[m-1][0],k=l[m-1][1];f&&Om(this,t,l[1][0],l[1][1],x,A),d&&km(this,t,l[m-2][0],l[m-2][1],P,k)},n.prototype.isFill=function(){return!1},n.prototype.isInStrokeOrPath=function(t,s,l,f,d){if(!l||!d)return!1;var m=this.attr().points;return Nc(m,d,t,s,!1)},n.prototype.isStroke=function(){return!0},n.prototype.createPath=function(t){var s=this.attr(),l=s.points,f=s.startArrow,d=s.endArrow,m=l.length;if(!(l.length<2)){var x=l[0][0],A=l[0][1],P=l[m-1][0],k=l[m-1][1];if(f&&f.d){var B=bd(x,A,l[1][0],l[1][1],f.d);x+=B.dx,A+=B.dy}if(d&&d.d){var B=bd(l[m-2][0],l[m-2][1],P,k,d.d);P-=B.dx,k-=B.dy}t.beginPath(),t.moveTo(x,A);for(var U=0;U<m-1;U++){var W=l[U];t.lineTo(W[0],W[1])}t.lineTo(P,k)}},n.prototype.afterDrawPath=function(t){var s=this.get("startArrowShape"),l=this.get("endArrowShape");s&&s.draw(t),l&&l.draw(t)},n.prototype.getTotalLength=function(){var t=this.attr().points,s=this.get("totalLength");return(0,E.UM)(s)?(this.set("totalLength",Fl.aH.length(t)),this.get("totalLength")):s},n.prototype.getPoint=function(t){var s=this.attr().points,l=this.get("tCache");l||(this._setTcache(),l=this.get("tCache"));var f,d;return(0,E.S6)(l,function(m,x){t>=m[0]&&t<=m[1]&&(f=(t-m[0])/(m[1]-m[0]),d=x)}),Fl.x1.pointAt(s[d][0],s[d][1],s[d+1][0],s[d+1][1],f)},n.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var s=this.getTotalLength();if(!(s<=0)){var l=0,f=[],d,m;(0,E.S6)(t,function(x,A){t[A+1]&&(d=[],d[0]=l/s,m=Fl.x1.length(x[0],x[1],t[A+1][0],t[A+1][1]),l+=m,d[1]=l/s,f.push(d))}),this.set("tCache",f)}}},n.prototype.getStartTangent=function(){var t=this.attr().points,s=[];return s.push([t[1][0],t[1][1]]),s.push([t[0][0],t[0][1]]),s},n.prototype.getEndTangent=function(){var t=this.attr().points,s=t.length-1,l=[];return l.push([t[s-1][0],t[s-1][1]]),l.push([t[s][0],t[s][1]]),l},n}(tf),lR=uR;function J0(i,n,t,s,l,f,d){var m=l/2;return _d(i-m,n-m,t,l,f,d)||_d(i+t-m,n-m,l,s,f,d)||_d(i+m,n+s-m,t,l,f,d)||_d(i-m,n+m,l,s,f,d)}function rE(i,n,t,s,l,f,d,m){var x=f/2;return qh(i+l,n,i+t-l,n,f,d,m)||qh(i+t,n+l,i+t,n+s-l,f,d,m)||qh(i+t-l,n+s,i+l,n+s,f,d,m)||qh(i,n+s-l,i,n+l,f,d,m)||zv(i+t-l,n+l,l,1.5*Math.PI,2*Math.PI,f,d,m)||zv(i+t-l,n+s-l,l,0,.5*Math.PI,f,d,m)||zv(i+l,n+s-l,l,.5*Math.PI,Math.PI,f,d,m)||zv(i+l,n+l,l,Math.PI,1.5*Math.PI,f,d,m)}var nE=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,width:0,height:0,radius:0})},n.prototype.isInStrokeOrPath=function(t,s,l,f,d){var m=this.attr(),x=m.x,A=m.y,P=m.width,k=m.height,B=m.radius;if(B){var W=!1;return l&&(W=rE(x,A,P,k,B,d,t,s)),!W&&f&&(W=Y0(this,t,s)),W}else{var U=d/2;if(f&&l)return _d(x-U,A-U,P+U,k+U,t,s);if(f)return _d(x,A,P,k,t,s);if(l)return J0(x,A,P,k,d,t,s)}},n.prototype.createPath=function(t){var s=this.attr(),l=s.x,f=s.y,d=s.width,m=s.height,x=s.radius;if(t.beginPath(),x===0)t.rect(l,f,d,m);else{var A=Xh(x),P=A[0],k=A[1],B=A[2],U=A[3];t.moveTo(l+P,f),t.lineTo(l+d-k,f),k!==0&&t.arc(l+d-k,f+k,k,-Math.PI/2,0),t.lineTo(l+d,f+m-B),B!==0&&t.arc(l+d-B,f+m-B,B,0,Math.PI/2),t.lineTo(l+U,f+m),U!==0&&t.arc(l+U,f+m-U,U,Math.PI/2,Math.PI),t.lineTo(l,f+P),P!==0&&t.arc(l+P,f+P,P,Math.PI,Math.PI*1.5),t.closePath()}},n}(tf),iE=nE,Dx=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},n.prototype.isOnlyHitBox=function(){return!0},n.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},n.prototype._assembleFont=function(){var t=this.attrs;t.font=(0,ze.assembleFont)(t)},n.prototype._setText=function(t){var s=null;(0,E.HD)(t)&&t.indexOf(`
`)!==-1&&(s=t.split(`
`)),this.set("textArr",s)},n.prototype.onAttrChange=function(t,s,l){i.prototype.onAttrChange.call(this,t,s,l),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(s)},n.prototype._getSpaceingY=function(){var t=this.attrs,s=t.lineHeight,l=t.fontSize*1;return s?s-l:l*.14},n.prototype._drawTextArr=function(t,s,l){var f=this.attrs,d=f.textBaseline,m=f.x,x=f.y,A=f.fontSize*1,P=this._getSpaceingY(),k=(0,ze.getTextHeight)(f.text,f.fontSize,f.lineHeight),B;(0,E.S6)(s,function(U,W){B=x+W*(P+A)-k+A,d==="middle"&&(B+=k-A-(k-A)/2),d==="top"&&(B+=k-A),(0,E.UM)(U)||(l?t.fillText(U,m,B):t.strokeText(U,m,B))})},n.prototype._drawText=function(t,s){var l=this.attr(),f=l.x,d=l.y,m=this.get("textArr");if(m)this._drawTextArr(t,m,s);else{var x=l.text;(0,E.UM)(x)||(s?t.fillText(x,f,d):t.strokeText(x,f,d))}},n.prototype.strokeAndFill=function(t){var s=this.attrs,l=s.lineWidth,f=s.opacity,d=s.strokeOpacity,m=s.fillOpacity;this.isStroke()&&l>0&&(!(0,E.UM)(d)&&d!==1&&(t.globalAlpha=f),this.stroke(t)),this.isFill()&&(!(0,E.UM)(m)&&m!==1?(t.globalAlpha=m,this.fill(t),t.globalAlpha=f):this.fill(t)),this.afterDrawPath(t)},n.prototype.fill=function(t){this._drawText(t,!0)},n.prototype.stroke=function(t){this._drawText(t,!1)},n}(tf),aE=Dx;function cR(i,n){if(n){var t=(0,ze.invert)(n);return(0,ze.multiplyVec2)(t,i)}return i}function oE(i,n,t){var s=i.getTotalMatrix();if(s){var l=cR([n,t,1],s),f=l[0],d=l[1];return[f,d]}return[n,t]}function R_(i,n,t){if(i.isCanvas&&i.isCanvas())return!0;if(!(0,ze.isAllowCapture)(i)||i.cfg.isInView===!1)return!1;if(i.cfg.clipShape){var s=oE(i,n,t),l=s[0],f=s[1];if(i.isClipped(l,f))return!1}var d=i.cfg.cacheCanvasBBox||i.getCanvasBBox();return n>=d.minX&&n<=d.maxX&&t>=d.minY&&t<=d.maxY}function I_(i,n,t){if(!R_(i,n,t))return null;for(var s=null,l=i.getChildren(),f=l.length,d=f-1;d>=0;d--){var m=l[d];if(m.isGroup())s=I_(m,n,t);else if(R_(m,n,t)){var x=m,A=oE(m,n,t),P=A[0],k=A[1];x.isInShape(P,k)&&(s=m)}if(s)break}return s}var Lx=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},n.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},n.prototype.getShapeBase=function(){return ee},n.prototype.getGroupBase=function(){return gt},n.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||Tm();return t>=1?Math.ceil(t):1},n.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},n.prototype.createDom=function(){var t=document.createElement("canvas"),s=t.getContext("2d");return this.set("context",s),t},n.prototype.setDOMSize=function(t,s){i.prototype.setDOMSize.call(this,t,s);var l=this.get("context"),f=this.get("el"),d=this.getPixelRatio();f.width=d*t,f.height=d*s,d>1&&l.scale(d,d)},n.prototype.clear=function(){i.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),s=this.get("el");t.clearRect(0,0,s.width,s.height)},n.prototype.getShape=function(t,s){var l;return this.get("quickHit")?l=I_(this,t,s):l=i.prototype.getShape.call(this,t,s,null),l},n.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),s=this.getViewRange(),l;if(t.length&&t[0]===this)l=s;else if(l=S_(t),l){l.minX=Math.floor(l.minX),l.minY=Math.floor(l.minY),l.maxX=Math.ceil(l.maxX),l.maxY=Math.ceil(l.maxY),l.maxY+=1;var f=this.get("clipView");f&&(l=E_(l,s))}return l},n.prototype.refreshElement=function(t){var s=this.get("refreshElements");s.push(t)},n.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,E.VS)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},n.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},n.prototype._drawAll=function(){var t=this.get("context"),s=this.get("el"),l=this.getChildren();t.clearRect(0,0,s.width,s.height),zu(t,this),Tg(t,l),this.set("refreshElements",[])},n.prototype._drawRegion=function(){var t=this.get("context"),s=this.get("refreshElements"),l=this.getChildren(),f=this._getRefreshRegion();f?(t.clearRect(f.minX,f.minY,f.maxX-f.minX,f.maxY-f.minY),t.save(),t.beginPath(),t.rect(f.minX,f.minY,f.maxX-f.minX,f.maxY-f.minY),t.clip(),zu(t,this),bh(this,l,f),Tg(t,l,f),t.restore()):s.length&&Mg(s),(0,E.S6)(s,function(d){d.get("hasChanged")&&d.set("hasChanged",!1)}),this.set("refreshElements",[])},n.prototype._startDraw=function(){var t=this,s=this.get("drawFrame");s||(s=(0,E.U7)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",s))},n.prototype.skipDraw=function(){},n.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},n}(ze.AbstractCanvas),P_=Lx,O_="0.5.12",ey={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},Go={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},Bx=null;function rf(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function bf(i){var n=ey[i.type],t=i.getParent();if(!n)throw new Error("the type "+i.type+" is not supported by svg");var s=rf(n);if(i.get("id")&&(s.id=i.get("id")),i.set("el",s),i.set("attrs",{}),t){var l=t.get("el");l||(l=t.createDom(),t.set("el",l)),l.appendChild(s)}return s}function k_(i,n){var t=i.get("el"),s=(0,E.qo)(t.children).sort(n),l=document.createDocumentFragment();s.forEach(function(f){l.appendChild(f)}),t.appendChild(l)}function Nx(i,n){var t=i.parentNode,s=Array.from(t.childNodes).filter(function(m){return m.nodeType===1&&m.nodeName.toLowerCase()!=="defs"}),l=s[n],f=s.indexOf(i);if(l){if(f>n)t.insertBefore(i,l);else if(f<n){var d=s[n+1];d?t.insertBefore(i,d):t.appendChild(i)}}else t.appendChild(i)}function Zv(i,n){var t=i.cfg.el,s=i.attr(),l={dx:s.shadowOffsetX,dy:s.shadowOffsetY,blur:s.shadowBlur,color:s.shadowColor};if(!l.dx&&!l.dy&&!l.blur&&!l.color)t.removeAttribute("filter");else{var f=n.find("filter",l);f||(f=n.addShadow(l)),t.setAttribute("filter","url(#"+f+")")}}function ty(i){var n=i.attr().matrix;if(n){for(var t=i.cfg.el,s=[],l=0;l<9;l+=3)s.push(n[l]+","+n[l+1]);s=s.join(","),s.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+s+")"):console.warn("invalid matrix:",n)}}function ry(i,n){var t=i.getClip(),s=i.get("el");if(!t)s.removeAttribute("clip-path");else if(t&&!s.hasAttribute("clip-path")){bf(t),t.createPath(n);var l=n.addClip(t);s.setAttribute("clip-path","url(#"+l+")")}}function sE(i,n){n.forEach(function(t){t.draw(i)})}function zx(i,n){var t=i.get("canvas");if(t&&t.get("autoDraw")){var s=t.get("context"),l=i.getParent(),f=l?l.getChildren():[t],d=i.get("el");if(n==="remove"){var m=i.get("isClipShape");if(m){var x=d&&d.parentNode,A=x&&x.parentNode;x&&A&&A.removeChild(x)}else d&&d.parentNode&&d.parentNode.removeChild(d)}else if(n==="show")d.setAttribute("visibility","visible");else if(n==="hide")d.setAttribute("visibility","hidden");else if(n==="zIndex")Nx(d,f.indexOf(i));else if(n==="sort"){var P=i.get("children");P&&P.length&&k_(i,function(k,B){return P.indexOf(k)-P.indexOf(B)?1:0})}else n==="clear"?d&&(d.innerHTML=""):n==="matrix"?ty(i):n==="clip"?ry(i,s):n==="attr"||n==="add"&&i.draw(s)}}var uE=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.isEntityGroup=function(){return!0},n.prototype.createDom=function(){var t=rf("g");this.set("el",t);var s=this.getParent();if(s){var l=s.get("el");l||(l=s.createDom(),s.set("el",l)),l.appendChild(t)}return t},n.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var s=this.get("canvas");if(s&&s.get("autoDraw")){var l=s.get("context");this.createPath(l,t)}},n.prototype.onCanvasChange=function(t){zx(this,t)},n.prototype.getShapeBase=function(){return ce},n.prototype.getGroupBase=function(){return n},n.prototype.draw=function(t){var s=this.getChildren(),l=this.get("el");this.get("destroyed")?l&&l.parentNode.removeChild(l):(l||this.createDom(),ry(this,t),this.createPath(t),s.length&&sE(t,s))},n.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,E.S6)(s||l,function(d,m){Go[m]&&f.setAttribute(Go[m],d)}),ty(this)},n}(ze.AbstractGroup),Og=uE,fR=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},n.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var s=this.get("canvas");if(s&&s.get("autoDraw")){var l=s.get("context");this.draw(l,t)}},n.prototype.getShapeBase=function(){return ce},n.prototype.getGroupBase=function(){return Og},n.prototype.onCanvasChange=function(t){zx(this,t)},n.prototype.calculateBBox=function(){var t=this.get("el"),s=null;if(t)s=t.getBBox();else{var l=(0,ze.getBBoxMethod)(this.get("type"));l&&(s=l(this))}if(s){var f=s.x,d=s.y,m=s.width,x=s.height,A=this.getHitLineWidth(),P=A/2,k=f-P,B=d-P,U=f+m+P,W=d+x+P;return{x:k,y:B,minX:k,minY:B,maxX:U,maxY:W,width:m+A,height:x+A}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},n.prototype.isFill=function(){var t=this.attr(),s=t.fill,l=t.fillStyle;return(s||l||this.isClipShape())&&this.canFill},n.prototype.isStroke=function(){var t=this.attr(),s=t.stroke,l=t.strokeStyle;return(s||l)&&this.canStroke},n.prototype.draw=function(t,s){var l=this.get("el");this.get("destroyed")?l&&l.parentNode.removeChild(l):(l||bf(this),ry(this,t),this.createPath(t,s),this.shadow(t,s),this.strokeAndFill(t,s),this.transform(s))},n.prototype.createPath=function(t,s){},n.prototype.strokeAndFill=function(t,s){var l=s||this.attr(),f=l.fill,d=l.fillStyle,m=l.stroke,x=l.strokeStyle,A=l.fillOpacity,P=l.strokeOpacity,k=l.lineWidth,B=this.get("el");this.canFill&&(s?"fill"in l?this._setColor(t,"fill",f):"fillStyle"in l&&this._setColor(t,"fill",d):this._setColor(t,"fill",f||d),A&&B.setAttribute(Go.fillOpacity,A)),this.canStroke&&k>0&&(s?"stroke"in l?this._setColor(t,"stroke",m):"strokeStyle"in l&&this._setColor(t,"stroke",x):this._setColor(t,"stroke",m||x),P&&B.setAttribute(Go.strokeOpacity,P),k&&B.setAttribute(Go.lineWidth,k))},n.prototype._setColor=function(t,s,l){var f=this.get("el");if(!l){f.setAttribute(Go[s],"none");return}if(l=l.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(l)){var d=t.find("gradient",l);d||(d=t.addGradient(l)),f.setAttribute(Go[s],"url(#"+d+")")}else if(/^[p,P]{1}[\s]*\(/.test(l)){var d=t.find("pattern",l);d||(d=t.addPattern(l)),f.setAttribute(Go[s],"url(#"+d+")")}else f.setAttribute(Go[s],l)},n.prototype.shadow=function(t,s){var l=this.attr(),f=s||l,d=f.shadowOffsetX,m=f.shadowOffsetY,x=f.shadowBlur,A=f.shadowColor;(d||m||x||A)&&Zv(this,t)},n.prototype.transform=function(t){var s=this.attr(),l=(t||s).matrix;l&&ty(this)},n.prototype.isInShape=function(t,s){return this.isPointInPath(t,s)},n.prototype.isPointInPath=function(t,s){var l=this.get("el"),f=this.get("canvas"),d=f.get("el").getBoundingClientRect(),m=t+d.left,x=s+d.top,A=document.elementFromPoint(m,x);return!!(A&&A.isEqualNode(l))},n.prototype.getHitLineWidth=function(){var t=this.attrs,s=t.lineWidth,l=t.lineAppendWidth;return this.isStroke()?s+l:0},n}(ze.AbstractShape),Jh=fR,hR=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,r:0})},n.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,E.S6)(s||l,function(d,m){m==="x"||m==="y"?f.setAttribute("c"+m,d):Go[m]&&f.setAttribute(Go[m],d)})},n}(Jh),lE=hR,pR=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return n.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");if((0,E.S6)(s||l,function(A,P){Go[P]&&f.setAttribute(Go[P],A)}),typeof l.html=="function"){var d=l.html.call(this,l);if(d instanceof Element||d instanceof HTMLDocument){for(var m=f.childNodes,x=m.length-1;x>=0;x--)f.removeChild(m[x]);f.appendChild(d)}else f.innerHTML=d}else f.innerHTML=l.html},n}(Jh),dR=pR,vR=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,rx:0,ry:0})},n.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,E.S6)(s||l,function(d,m){m==="x"||m==="y"?f.setAttribute("c"+m,d):Go[m]&&f.setAttribute(Go[m],d)})},n}(Jh),kg=vR,Ux=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,width:0,height:0})},n.prototype.createPath=function(t,s){var l=this,f=this.attr(),d=this.get("el");(0,E.S6)(s||f,function(m,x){x==="img"?l._setImage(f.img):Go[x]&&d.setAttribute(Go[x],m)})},n.prototype.setAttr=function(t,s){this.attrs[t]=s,t==="img"&&this._setImage(s)},n.prototype._setImage=function(t){var s=this.attr(),l=this.get("el");if((0,E.HD)(t))l.setAttribute("href",t);else if(t instanceof window.Image)s.width||(l.setAttribute("width",t.width),this.attr("width",t.width)),s.height||(l.setAttribute("height",t.height),this.attr("height",t.height)),l.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,E.HD)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")l.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var f=document.createElement("canvas");f.setAttribute("width",""+t.width),f.setAttribute("height",""+t.height),f.getContext("2d").putImageData(t,0,0),s.width||(l.setAttribute("width",""+t.width),this.attr("width",t.width)),s.height||(l.setAttribute("height",""+t.height),this.attr("height",t.height)),l.setAttribute("href",f.toDataURL())}},n}(Jh),F_=Ux,Zx=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},n.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,E.S6)(s||l,function(d,m){if(m==="startArrow"||m==="endArrow")if(d){var x=(0,E.Kn)(d)?t.addArrow(l,Go[m]):t.getDefaultArrow(l,Go[m]);f.setAttribute(Go[m],"url(#"+x+")")}else f.removeAttribute(Go[m]);else Go[m]&&f.setAttribute(Go[m],d)})},n.prototype.getTotalLength=function(){var t=this.attr(),s=t.x1,l=t.y1,f=t.x2,d=t.y2;return Fl.x1.length(s,l,f,d)},n.prototype.getPoint=function(t){var s=this.attr(),l=s.x1,f=s.y1,d=s.x2,m=s.y2;return Fl.x1.pointAt(l,f,d,m,t)},n}(Jh),ny=Zx,zm={circle:function(i,n,t){return[["M",i,n],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(i,n,t){return[["M",i-t,n-t],["L",i+t,n-t],["L",i+t,n+t],["L",i-t,n+t],["Z"]]},diamond:function(i,n,t){return[["M",i-t,n],["L",i,n-t],["L",i+t,n],["L",i,n+t],["Z"]]},triangle:function(i,n,t){var s=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,n+s],["L",i,n-s],["L",i+t,n+s],["z"]]},triangleDown:function(i,n,t){var s=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,n-s],["L",i+t,n-s],["L",i,n+s],["Z"]]}},D_={get:function(i){return zm[i]},register:function(i,n){zm[i]=n},remove:function(i){delete zm[i]},getAll:function(){return zm}},iy=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return n.prototype.createPath=function(t){var s=this.get("el");s.setAttribute("d",this._assembleMarker())},n.prototype._assembleMarker=function(){var t=this._getPath();return(0,E.kJ)(t)?t.map(function(s){return s.join(" ")}).join(""):t},n.prototype._getPath=function(){var t=this.attr(),s=t.x,l=t.y,f=t.r||t.radius,d=t.symbol||"circle",m;return(0,E.mf)(d)?m=d:m=D_.get(d),m?m(s,l,f):(console.warn(m+" symbol is not exist."),null)},n.symbolsFactory=D_,n}(Jh),Vx=iy,ay=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{startArrow:!1,endArrow:!1})},n.prototype.createPath=function(t,s){var l=this,f=this.attr(),d=this.get("el");(0,E.S6)(s||f,function(m,x){if(x==="path"&&(0,E.kJ)(m))d.setAttribute("d",l._formatPath(m));else if(x==="startArrow"||x==="endArrow")if(m){var A=(0,E.Kn)(m)?t.addArrow(f,Go[x]):t.getDefaultArrow(f,Go[x]);d.setAttribute(Go[x],"url(#"+A+")")}else d.removeAttribute(Go[x]);else Go[x]&&d.setAttribute(Go[x],m)})},n.prototype._formatPath=function(t){var s=t.map(function(l){return l.join(" ")}).join("");return~s.indexOf("NaN")?"":s},n.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},n.prototype.getPoint=function(t){var s=this.get("el"),l=this.getTotalLength();if(l===0)return null;var f=s?s.getPointAtLength(t*l):null;return f?{x:f.x,y:f.y}:null},n}(Jh),L_=ay,Sd=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return n.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,E.S6)(s||l,function(d,m){m==="points"&&(0,E.kJ)(d)&&d.length>=2?f.setAttribute("points",d.map(function(x){return x[0]+","+x[1]}).join(" ")):Go[m]&&f.setAttribute(Go[m],d)})},n}(Jh),Hx=Sd,jx=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{startArrow:!1,endArrow:!1})},n.prototype.onAttrChange=function(t,s,l){i.prototype.onAttrChange.call(this,t,s,l),["points"].indexOf(t)!==-1&&this._resetCache()},n.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},n.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,E.S6)(s||l,function(d,m){m==="points"&&(0,E.kJ)(d)&&d.length>=2?f.setAttribute("points",d.map(function(x){return x[0]+","+x[1]}).join(" ")):Go[m]&&f.setAttribute(Go[m],d)})},n.prototype.getTotalLength=function(){var t=this.attr().points,s=this.get("totalLength");return(0,E.UM)(s)?(this.set("totalLength",Fl.aH.length(t)),this.get("totalLength")):s},n.prototype.getPoint=function(t){var s=this.attr().points,l=this.get("tCache");l||(this._setTcache(),l=this.get("tCache"));var f,d;return(0,E.S6)(l,function(m,x){t>=m[0]&&t<=m[1]&&(f=(t-m[0])/(m[1]-m[0]),d=x)}),Fl.x1.pointAt(s[d][0],s[d][1],s[d+1][0],s[d+1][1],f)},n.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var s=this.getTotalLength();if(!(s<=0)){var l=0,f=[],d,m;(0,E.S6)(t,function(x,A){t[A+1]&&(d=[],d[0]=l/s,m=Fl.x1.length(x[0],x[1],t[A+1][0],t[A+1][1]),l+=m,d[1]=l/s,f.push(d))}),this.set("tCache",f)}}},n.prototype.getStartTangent=function(){var t=this.attr().points,s=[];return s.push([t[1][0],t[1][1]]),s.push([t[0][0],t[0][1]]),s},n.prototype.getEndTangent=function(){var t=this.attr().points,s=t.length-1,l=[];return l.push([t[s-1][0],t[s-1][1]]),l.push([t[s][0],t[s][1]]),l},n}(Jh),gR=jx,f4=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,Wx=/[^\s,]+/gi;function cE(i){var n=0,t=0,s=0,l=0;return(0,E.kJ)(i)?i.length===1?n=t=s=l=i[0]:i.length===2?(n=s=i[0],t=l=i[1]):i.length===3?(n=i[0],t=l=i[1],s=i[2]):(n=i[0],t=i[1],s=i[2],l=i[3]):n=t=s=l=i,{r1:n,r2:t,r3:s,r4:l}}function s8(i){if(i=i||[],isArray(i))return i;if(isString(i))return i=i.match(f4),each(i,function(n,t){if(n=n.match(Wx),n[0].length>1){var s=n[0].charAt(0);n.splice(1,0,n[0].substr(1)),n[0]=s}each(n,function(l,f){isNaN(l)||(n[f]=+l)}),i[t]=n}),i}var fE=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,width:0,height:0,radius:0})},n.prototype.createPath=function(t,s){var l=this,f=this.attr(),d=this.get("el"),m=!1,x=["x","y","width","height","radius"];(0,E.S6)(s||f,function(A,P){x.indexOf(P)!==-1&&!m?(d.setAttribute("d",l._assembleRect(f)),m=!0):x.indexOf(P)===-1&&Go[P]&&d.setAttribute(Go[P],A)})},n.prototype._assembleRect=function(t){var s=t.x,l=t.y,f=t.width,d=t.height,m=t.radius;if(!m)return"M "+s+","+l+" l "+f+",0 l 0,"+d+" l"+-f+" 0 z";var x=cE(m);(0,E.kJ)(m)?m.length===1?x.r1=x.r2=x.r3=x.r4=m[0]:m.length===2?(x.r1=x.r3=m[0],x.r2=x.r4=m[1]):m.length===3?(x.r1=m[0],x.r2=x.r4=m[1],x.r3=m[2]):(x.r1=m[0],x.r2=m[1],x.r3=m[2],x.r4=m[3]):x.r1=x.r2=x.r3=x.r4=m;var A=[["M "+(s+x.r1)+","+l],["l "+(f-x.r1-x.r2)+",0"],["a "+x.r2+","+x.r2+",0,0,1,"+x.r2+","+x.r2],["l 0,"+(d-x.r2-x.r3)],["a "+x.r3+","+x.r3+",0,0,1,"+-x.r3+","+x.r3],["l "+(x.r3+x.r4-f)+",0"],["a "+x.r4+","+x.r4+",0,0,1,"+-x.r4+","+-x.r4],["l 0,"+(x.r4+x.r1-d)],["a "+x.r1+","+x.r1+",0,0,1,"+x.r1+","+-x.r1],["z"]];return A.join(" ")},n}(Jh),mR=fE,yR=F(43631),hE=.3,pE={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},_R={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},dE={left:"left",start:"left",center:"middle",right:"end",end:"end"},vE=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},n.prototype.createPath=function(t,s){var l=this,f=this.attr(),d=this.get("el");this._setFont(),(0,E.S6)(s||f,function(m,x){x==="text"?l._setText(""+m):x==="matrix"&&m?ty(l):Go[x]&&d.setAttribute(Go[x],m)}),d.setAttribute("paint-order","stroke"),d.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},n.prototype._setFont=function(){var t=this.get("el"),s=this.attr(),l=s.textBaseline,f=s.textAlign,d=(0,yR.qY)();d&&d.name==="firefox"?t.setAttribute("dominant-baseline",_R[l]||"alphabetic"):t.setAttribute("alignment-baseline",pE[l]||"baseline"),t.setAttribute("text-anchor",dE[f]||"left")},n.prototype._setText=function(t){var s=this.get("el"),l=this.attr(),f=l.x,d=l.textBaseline,m=d===void 0?"bottom":d;if(!t)s.innerHTML="";else if(~t.indexOf(`
`)){var x=t.split(`
`),A=x.length-1,P="";(0,E.S6)(x,function(k,B){B===0?m==="alphabetic"?P+='<tspan x="'+f+'" dy="'+-A+'em">'+k+"</tspan>":m==="top"?P+='<tspan x="'+f+'" dy="0.9em">'+k+"</tspan>":m==="middle"?P+='<tspan x="'+f+'" dy="'+-(A-1)/2+'em">'+k+"</tspan>":m==="bottom"?P+='<tspan x="'+f+'" dy="-'+(A+hE)+'em">'+k+"</tspan>":m==="hanging"&&(P+='<tspan x="'+f+'" dy="'+(-(A-1)-hE)+'em">'+k+"</tspan>"):P+='<tspan x="'+f+'" dy="1em">'+k+"</tspan>"}),s.innerHTML=P}else s.innerHTML=t},n}(Jh),gE=vE,mE=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,yE=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,_E=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function Gx(i){var n=i.match(_E);if(!n)return"";var t="";return n.sort(function(s,l){return s=s.split(":"),l=l.split(":"),Number(s[0])-Number(l[0])}),(0,E.S6)(n,function(s){s=s.split(":"),t+='<stop offset="'+s[0]+'" stop-color="'+s[1]+'"></stop>'}),t}function xE(i,n){var t=mE.exec(i),s=(0,E.wQ)((0,E.c$)(parseFloat(t[1])),Math.PI*2),l=t[2],f,d;s>=0&&s<.5*Math.PI?(f={x:0,y:0},d={x:1,y:1}):.5*Math.PI<=s&&s<Math.PI?(f={x:1,y:0},d={x:0,y:1}):Math.PI<=s&&s<1.5*Math.PI?(f={x:1,y:1},d={x:0,y:0}):(f={x:0,y:1},d={x:1,y:0});var m=Math.tan(s),x=m*m,A=(d.x-f.x+m*(d.y-f.y))/(x+1)+f.x,P=m*(d.x-f.x+m*(d.y-f.y))/(x+1)+f.y;n.setAttribute("x1",f.x),n.setAttribute("y1",f.y),n.setAttribute("x2",A),n.setAttribute("y2",P),n.innerHTML=Gx(l)}function bE(i,n){var t=yE.exec(i),s=parseFloat(t[1]),l=parseFloat(t[2]),f=parseFloat(t[3]),d=t[4];n.setAttribute("cx",s),n.setAttribute("cy",l),n.setAttribute("r",f),n.innerHTML=Gx(d)}var SE=function(){function i(n){this.cfg={};var t=null,s=(0,E.EL)("gradient_");return n.toLowerCase()[0]==="l"?(t=rf("linearGradient"),xE(n,t)):(t=rf("radialGradient"),bE(n,t)),t.setAttribute("id",s),this.el=t,this.id=s,this.cfg=n,this}return i.prototype.match=function(n,t){return this.cfg===t},i}(),EE=SE,wE={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},CE={x:"-40%",y:"-40%",width:"200%",height:"200%"},AE=function(){function i(n){this.type="filter",this.cfg={},this.type="filter";var t=rf("filter");return(0,E.S6)(CE,function(s,l){t.setAttribute(l,s)}),this.el=t,this.id=(0,E.EL)("filter_"),this.el.id=this.id,this.cfg=n,this._parseShadow(n,t),this}return i.prototype.match=function(n,t){if(this.type!==n)return!1;var s=!0,l=this.cfg;return(0,E.S6)(Object.keys(l),function(f){if(l[f]!==t[f])return s=!1,!1}),s},i.prototype.update=function(n,t){var s=this.cfg;return s[wE[n]]=t,this._parseShadow(s,this.el),this},i.prototype._parseShadow=function(n,t){var s=`<feDropShadow
      dx="`+(n.dx||0)+`"
      dy="`+(n.dy||0)+`"
      stdDeviation="`+(n.blur?n.blur/10:0)+`"
      flood-color="`+(n.color?n.color:"#000")+`"
      flood-opacity="`+(n.opacity?n.opacity:1)+`"
      />`;t.innerHTML=s},i}(),TE=AE,ME=function(){function i(n,t){this.cfg={};var s=rf("marker"),l=(0,E.EL)("marker_");s.setAttribute("id",l);var f=rf("path");f.setAttribute("stroke",n.stroke||"none"),f.setAttribute("fill",n.fill||"none"),s.appendChild(f),s.setAttribute("overflow","visible"),s.setAttribute("orient","auto-start-reverse"),this.el=s,this.child=f,this.id=l;var d=n[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=n.stroke||"#000",d===!0?this._setDefaultPath(t,f):(this.cfg=d,this._setMarker(n.lineWidth,f)),this}return i.prototype.match=function(){return!1},i.prototype._setDefaultPath=function(n,t){var s=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),s.setAttribute("refX",""+10*Math.cos(Math.PI/6)),s.setAttribute("refY","5")},i.prototype._setMarker=function(n,t){var s=this.el,l=this.cfg.path,f=this.cfg.d;(0,E.kJ)(l)&&(l=l.map(function(d){return d.join(" ")}).join("")),t.setAttribute("d",l),s.appendChild(t),f&&s.setAttribute("refX",""+f/n)},i.prototype.update=function(n){var t=this.child;t.attr?t.attr("fill",n):t.setAttribute("fill",n)},i}(),Xx=ME,RE=function(){function i(n){this.type="clip",this.cfg={};var t=rf("clipPath");this.el=t,this.id=(0,E.EL)("clip_"),t.id=this.id;var s=n.cfg.el;return t.appendChild(s),this.cfg=n,this}return i.prototype.match=function(){return!1},i.prototype.remove=function(){var n=this.el;n.parentNode.removeChild(n)},i}(),yc=RE,IE=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,PE=function(){function i(n){this.cfg={};var t=rf("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var s=rf("image");t.appendChild(s);var l=(0,E.EL)("pattern_");t.id=l,this.el=t,this.id=l,this.cfg=n;var f=IE.exec(n),d=f[2];s.setAttribute("href",d);var m=new Image;d.match(/^data:/i)||(m.crossOrigin="Anonymous"),m.src=d;function x(){t.setAttribute("width",""+m.width),t.setAttribute("height",""+m.height)}return m.complete?x():(m.onload=x,m.src=m.src),this}return i.prototype.match=function(n,t){return this.cfg===t},i}(),OE=PE,kE=function(){function i(n){var t=rf("defs"),s=(0,E.EL)("defs_");t.id=s,n.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=n}return i.prototype.find=function(n,t){for(var s=this.children,l=null,f=0;f<s.length;f++)if(s[f].match(n,t)){l=s[f].id;break}return l},i.prototype.findById=function(n){for(var t=this.children,s=null,l=0;l<t.length;l++)if(t[l].id===n){s=t[l];break}return s},i.prototype.add=function(n){this.children.push(n),n.canvas=this.canvas,n.parent=this},i.prototype.getDefaultArrow=function(n,t){var s=n.stroke||n.strokeStyle;if(this.defaultArrow[s])return this.defaultArrow[s].id;var l=new Xx(n,t);return this.defaultArrow[s]=l,this.el.appendChild(l.el),this.add(l),l.id},i.prototype.addGradient=function(n){var t=new EE(n);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addArrow=function(n,t){var s=new Xx(n,t);return this.el.appendChild(s.el),this.add(s),s.id},i.prototype.addShadow=function(n){var t=new TE(n);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addPattern=function(n){var t=new OE(n);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addClip=function(n){var t=new yc(n);return this.el.appendChild(t.el),this.add(t),t.id},i}(),FE=kE,DE=function(i){(0,M.ZT)(n,i);function n(t){return i.call(this,(0,M.pi)((0,M.pi)({},t),{autoDraw:!0,renderer:"svg"}))||this}return n.prototype.getShapeBase=function(){return ce},n.prototype.getGroupBase=function(){return Og},n.prototype.getShape=function(t,s,l){var f=l.target||l.srcElement;if(!ey[f.tagName]){for(var d=f.parentNode;d&&!ey[d.tagName];)d=d.parentNode;f=d}return this.find(function(m){return m.get("el")===f})},n.prototype.createDom=function(){var t=rf("svg"),s=new FE(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",s),t},n.prototype.onCanvasChange=function(t){var s=this.get("context"),l=this.get("el");if(t==="sort"){var f=this.get("children");f&&f.length&&k_(this,function(m,x){return f.indexOf(m)-f.indexOf(x)?1:0})}else if(t==="clear"){if(l){l.innerHTML="";var d=s.el;d.innerHTML="",l.appendChild(d)}}else t==="matrix"?ty(this):t==="clip"?ry(this,s):t==="changeSize"&&(l.setAttribute("width",""+this.get("width")),l.setAttribute("height",""+this.get("height")))},n.prototype.draw=function(){var t=this.get("context"),s=this.getChildren();ry(this,t),s.length&&sE(t,s)},n}(ze.AbstractCanvas),LE=DE,BE="0.5.6",NE=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;s.type="path",s.shapeType="line";var l=t.connectNulls,f=l===void 0?!1:l,d=t.showSinglePoint,m=d===void 0?!0:d;return s.connectNulls=f,s.showSinglePoint=m,s}return n.prototype.updateElements=function(t,s){var l,f,d,m,x,A;s===void 0&&(s=!1);for(var P=new Map,k=new Map,B=[],U=0,W=0;W<t.length;W++){var ne=t[W],de=this.getElementId(ne);B.push(de),P.set(de,ne),k.set(de,U),U++}this.elements=new Array(U);var ve=ys(this.lastElementsMap,B),$e=ve.added,lt=ve.updated,vt=ve.removed;try{for(var Ot=(0,M.XA)($e),fr=Ot.next();!fr.done;fr=Ot.next()){var de=fr.value,ne=P.get(de),Tr=this.getShapeFactory(),zr=this.getShapeInfo(ne),W=k.get(de),cn=new bi({shapeFactory:Tr,container:this.container,offscreenGroup:this.getOffscreenGroup(),elementIndex:W});cn.geometry=this,cn.animate=this.animateOption,cn.draw(zr,s),this.elementsMap[de]=cn,this.elements[W]=cn}}catch(eo){l={error:eo}}finally{try{fr&&!fr.done&&(f=Ot.return)&&f.call(Ot)}finally{if(l)throw l.error}}try{for(var Qr=(0,M.XA)(lt),On=Qr.next();!On.done;On=Qr.next()){var de=On.value,ne=P.get(de),cn=this.lastElementsMap[de],W=k.get(de),zr=this.getShapeInfo(ne),Qn=cn.getModel();(this.isCoordinateChanged||qs(Qn,zr))&&(cn.animate=this.animateOption,cn.update(zr)),this.elementsMap[de]=cn,this.elements[W]=cn}}catch(eo){d={error:eo}}finally{try{On&&!On.done&&(m=Qr.return)&&m.call(Qr)}finally{if(d)throw d.error}}try{for(var Hi=(0,M.XA)(vt),oa=Hi.next();!oa.done;oa=Hi.next()){var de=oa.value,cn=this.lastElementsMap[de];cn.animate=this.animateOption,cn.destroy()}}catch(eo){x={error:eo}}finally{try{oa&&!oa.done&&(A=Hi.return)&&A.call(Hi)}finally{if(x)throw x.error}}},n.prototype.getPointsAndData=function(t){for(var s=[],l=[],f=0,d=t.length;f<d;f++){var m=t[f];s.push({x:m.x,y:m.y}),l.push(m[Ce])}return{points:s,data:l}},n.prototype.getShapeInfo=function(t){var s=this.getDrawCfg(t[0]),l=this.getPointsAndData(t),f=l.points,d=l.data;return s.mappingData=t,s.data=d,s.isStack=!!this.getAdjust("stack"),s.points=f,s.connectNulls=this.connectNulls,s.showSinglePoint=this.showSinglePoint,s},n}(Ls),B_=NE;function zE(i,n,t,s,l){var f=[];if(i.length){for(var d=[],m=[],x=0,A=i.length;x<A;x++){var P=i[x];d.push(P[1]),m.push(P[0])}m=m.reverse(),(0,E.S6)([d,m],function(k,B){var U=[],W=s.parsePoints(k),ne=W[0];d.length===1&&m.length===1?U=B===0?[["M",ne.x-.5,ne.y],["L",ne.x+.5,ne.y]]:[["L",ne.x+.5,ne.y],["L",ne.x-.5,ne.y]]:(n&&W.push({x:ne.x,y:ne.y}),t?U=aa(W,!1,l):U=Rn(W,!1),B>0&&(U[0][0]="L")),f=f.concat(U)}),f.push(["Z"])}return f}function oy(i,n,t,s,l){for(var f=mu(i,n,!n,"lineWidth"),d=i.connectNulls,m=i.isInCircle,x=i.points,A=i.showSinglePoint,P=md(x,d,A),k=[],B=0,U=P.length;B<U;B++){var W=P[B];k=k.concat(zE(W,m,t,s,l))}return f.path=k,f}function $x(i){var n=i.start,t=i.end;return[[n.x,t.y],[t.x,n.y]]}var xR=io("area",{defaultShapeType:"area",getDefaultPoints:function(i){var n=i.x,t=i.y0,s=(0,E.kJ)(i.y)?i.y:[t,i.y];return s.map(function(l){return{x:n,y:l}})}});fi("area","area",{draw:function(i,n){var t=oy(i,!1,!1,this),s=n.addShape({type:"path",attrs:t,name:"area"});return s},getMarker:function(i){var n=i.color;return{symbol:function(t,s,l){return l===void 0&&(l=5.5),[["M",t-l,s-4],["L",t+l,s-4],["L",t+l,s+4],["L",t-l,s+4],["Z"]]},style:{r:5,fill:n,fillOpacity:1}}}});var bR=null,UE=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;s.type="area",s.shapeType="area",s.generatePoints=!0,s.startOnZero=!0;var l=t.startOnZero,f=l===void 0?!0:l,d=t.sortable,m=d===void 0?!1:d,x=t.showSinglePoint,A=x===void 0?!1:x;return s.startOnZero=f,s.sortable=m,s.showSinglePoint=A,s}return n.prototype.getPointsAndData=function(t){for(var s=[],l=[],f=0,d=t.length;f<d;f++){var m=t[f];s.push(m.points),l.push(m[Ce])}return{points:s,data:l}},n.prototype.getYMinValue=function(){if(this.startOnZero)return i.prototype.getYMinValue.call(this);var t=this.getYScale();return t.min},n}(B_),SR=UE,h4=io("edge",{defaultShapeType:"line",getDefaultPoints:function(i){return Pv(i)}});fi("edge","line",{draw:function(i,n){var t=mu(i,!0,!1,"lineWidth"),s=Rn(this.parsePoints(i.points),this.coordinate.isPolar);return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s})})},getMarker:function(i){return{symbol:"circle",style:{r:4.5,fill:i.color}}}});var p4=null,ER=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="edge",t.shapeType="edge",t.generatePoints=!0,t}return n}(Ls),ZE=ER,VE=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="heatmap",t.paletteCache={},t}return n.prototype.updateElements=function(t,s){s===void 0&&(s=!1);for(var l=0;l<t.length;l++){var f=t[l],d=this.prepareRange(f),m=this.prepareSize(),x=(0,E.U2)(this.styleOption,["cfg","shadowBlur"]);(0,E.hj)(x)||(x=m/2),this.prepareGreyScaleBlurredCircle(m,x),this.drawWithRange(f,d,m,x)}},n.prototype.color=function(t,s){return this.createAttrOption("color",t,typeof s!="function"?s:""),this},n.prototype.clear=function(){i.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},n.prototype.prepareRange=function(t){var s=this.getAttribute("color"),l=s.getFields()[0],f=1/0,d=-1/0;return t.forEach(function(m){var x=m[Ce][l];x>d&&(d=x),x<f&&(f=x)}),f===d&&(f=d-1),[f,d]},n.prototype.prepareSize=function(){var t=this.getDefaultValue("size");return(0,E.hj)(t)||(t=this.getDefaultSize()),t},n.prototype.prepareGreyScaleBlurredCircle=function(t,s){var l=this.getGrayScaleBlurredCanvas(),f=t+s,d=l.getContext("2d");l.width=l.height=f*2,d.clearRect(0,0,l.width,l.height),d.shadowOffsetX=d.shadowOffsetY=f*2,d.shadowBlur=s,d.shadowColor="black",d.beginPath(),d.arc(-f,-f,t,0,Math.PI*2,!0),d.closePath(),d.fill()},n.prototype.drawWithRange=function(t,s,l,f){var d,m,x=this.coordinate,A=x.start,P=x.end,k=this.coordinate.getWidth(),B=this.coordinate.getHeight(),U=this.getAttribute("color"),W=U.getFields()[0];this.clearShadowCanvasCtx();var ne=this.getShadowCanvasCtx();s&&(t=t.filter(function(Qr){return Qr[Ce][W]<=s[1]&&Qr[Ce][W]>=s[0]}));var de=this.scales[W];try{for(var ve=(0,M.XA)(t),$e=ve.next();!$e.done;$e=ve.next()){var lt=$e.value,vt=this.getDrawCfg(lt),Ot=vt.x,fr=vt.y,Tr=de.scale(lt[Ce][W]);this.drawGrayScaleBlurredCircle(Ot-A.x,fr-P.y,l+f,Tr,ne)}}catch(Qr){d={error:Qr}}finally{try{$e&&!$e.done&&(m=ve.return)&&m.call(ve)}finally{if(d)throw d.error}}var zr=ne.getImageData(0,0,k,B);this.clearShadowCanvasCtx(),this.colorize(zr),ne.putImageData(zr,0,0);var cn=this.getImageShape();cn.attr("x",A.x),cn.attr("y",P.y),cn.attr("width",k),cn.attr("height",B),cn.attr("img",ne.canvas),cn.set("origin",this.getShapeInfo(t))},n.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),s=this.coordinate;return Math.min(s.getWidth()/(t.scales[0].ticks.length*4),s.getHeight()/(t.scales[1].ticks.length*4))},n.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},n.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;return t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight(),t.getContext("2d")},n.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},n.prototype.drawGrayScaleBlurredCircle=function(t,s,l,f,d){var m=this.getGrayScaleBlurredCanvas();d.globalAlpha=f,d.drawImage(m,t-l,s-l)},n.prototype.colorize=function(t){for(var s=this.getAttribute("color"),l=t.data,f=this.paletteCache,d=3;d<l.length;d+=4){var m=l[d];if((0,E.hj)(m)){var x=f[m]?f[m]:Ea.rgb2arr(s.gradient(m/256));l[d-3]=x[0],l[d-2]=x[1],l[d-1]=x[2],l[d]=m}}},n.prototype.getImageShape=function(){var t=this.imageShape;if(t)return t;var s=this.container;return t=s.addShape({type:"image",attrs:{}}),this.imageShape=t,t},n.prototype.getShapeInfo=function(t){var s=this.getDrawCfg(t[0]),l=t.map(function(f){return f[Ce]});return(0,M.pi)((0,M.pi)({},s),{mappingData:t,data:l})},n}(Ls),Yx=VE;function N_(i){var n,t,s=i.x,l=i.y,f=i.y0,d=i.size,m,x;(0,E.kJ)(l)?(n=(0,M.CR)(l,2),m=n[0],x=n[1]):(m=f,x=l);var A,P;(0,E.kJ)(s)?(t=(0,M.CR)(s,2),A=t[0],P=t[1]):(A=s-d/2,P=s+d/2);var k=[{x:A,y:m},{x:A,y:x}];return k.push({x:P,y:x},{x:P,y:m}),k}function z_(i,n){n===void 0&&(n=!0);var t=[],s=i[0];t.push(["M",s.x,s.y]);for(var l=1,f=i.length;l<f;l++)t.push(["L",i[l].x,i[l].y]);return n&&(t.push(["L",s.x,s.y]),t.push(["z"])),t}function Kx(i,n){var t=0,s=0,l=0,f=0;return(0,E.kJ)(i)?i.length===1?t=s=l=f=i[0]:i.length===2?(t=l=i[0],s=f=i[1]):i.length===3?(t=i[0],s=f=i[1],l=i[2]):(t=i[0],s=i[1],l=i[2],f=i[3]):t=s=l=f=i,t+s>n&&(t=t?n/(1+s/t):0,s=n-t),l+f>n&&(l=l?n/(1+f/l):0,f=n-l),[t||0,s||0,l||0,f||0]}function HE(i,n,t){var s=[];if(t.isRect){var l=t.isTransposed?{x:t.start.x,y:n[0].y}:{x:n[0].x,y:t.start.y},f=t.isTransposed?{x:t.end.x,y:n[2].y}:{x:n[3].x,y:t.end.y},d=(0,E.U2)(i,["background","style","radius"]);if(d){var m=t.isTransposed?Math.abs(n[0].y-n[2].y):n[2].x-n[1].x,x=t.isTransposed?t.getWidth():t.getHeight(),A=(0,M.CR)(Kx(d,Math.min(m,x)),4),P=A[0],k=A[1],B=A[2],U=A[3],W=t.isTransposed&&t.isReflect("y"),ne=W?0:1,de=function(fr){return W?-fr:fr};s.push(["M",l.x,f.y+de(P)]),P!==0&&s.push(["A",P,P,0,0,ne,l.x+P,f.y]),s.push(["L",f.x-k,f.y]),k!==0&&s.push(["A",k,k,0,0,ne,f.x,f.y+de(k)]),s.push(["L",f.x,l.y-de(B)]),B!==0&&s.push(["A",B,B,0,0,ne,f.x-B,l.y]),s.push(["L",l.x+U,l.y]),U!==0&&s.push(["A",U,U,0,0,ne,l.x,l.y-de(U)])}else s.push(["M",l.x,l.y]),s.push(["L",f.x,l.y]),s.push(["L",f.x,f.y]),s.push(["L",l.x,f.y]),s.push(["L",l.x,l.y]);s.push(["z"])}if(t.isPolar){var ve=t.getCenter(),$e=vd(i,t),lt=$e.startAngle,vt=$e.endAngle;if(t.type!=="theta"&&!t.isTransposed)s=mh(ve.x,ve.y,t.getRadius(),lt,vt);else{var Ot=function(zr){return Math.pow(zr,2)},P=Math.sqrt(Ot(ve.x-n[0].x)+Ot(ve.y-n[0].y)),k=Math.sqrt(Ot(ve.x-n[2].x)+Ot(ve.y-n[2].y));s=mh(ve.x,ve.y,P,t.startAngle,t.endAngle,k)}}return s}function jE(i,n,t){var s=t.getWidth(),l=t.getHeight(),f=t.type==="rect",d=[],m=(i[2].x-i[1].x)/2,x=t.isTransposed?m*l/s:m*s/l;return n==="round"?(f?(d.push(["M",i[0].x,i[0].y+x]),d.push(["L",i[1].x,i[1].y-x]),d.push(["A",m,m,0,0,1,i[2].x,i[2].y-x]),d.push(["L",i[3].x,i[3].y+x]),d.push(["A",m,m,0,0,1,i[0].x,i[0].y+x])):(d.push(["M",i[0].x,i[0].y]),d.push(["L",i[1].x,i[1].y]),d.push(["A",m,m,0,0,1,i[2].x,i[2].y]),d.push(["L",i[3].x,i[3].y]),d.push(["A",m,m,0,0,1,i[0].x,i[0].y])),d.push(["z"])):d=z_(i),d}function WE(i,n,t){var s=[];return(0,E.UM)(n)?t?s.push(["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["L",(i[2].x+i[3].x)/2,(i[2].y+i[3].y)/2],["Z"]):s.push(["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["L",i[2].x,i[2].y],["L",i[3].x,i[3].y],["Z"]):s.push(["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["L",n[1].x,n[1].y],["L",n[0].x,n[0].y],["Z"]),s}function Um(i,n){return[n,i]}function GE(i,n,t){var s,l,f,d,m,x,A,P=(0,M.CR)((0,M.ev)([],(0,M.CR)(i),!1),4),k=P[0],B=P[1],U=P[2],W=P[3],ne=(0,M.CR)(typeof t=="number"?Array(4).fill(t):t,4),de=ne[0],ve=ne[1],$e=ne[2],lt=ne[3];n.isTransposed&&(s=(0,M.CR)(Um(B,W),2),B=s[0],W=s[1]),n.isReflect("y")&&(l=(0,M.CR)(Um(k,B),2),k=l[0],B=l[1],f=(0,M.CR)(Um(U,W),2),U=f[0],W=f[1]),n.isReflect("x")&&(d=(0,M.CR)(Um(k,W),2),k=d[0],W=d[1],m=(0,M.CR)(Um(B,U),2),B=m[0],U=m[1]);var vt=[],Ot=function(fr){return Math.abs(fr)};return x=(0,M.CR)(Kx([de,ve,$e,lt],Math.min(Ot(W.x-k.x),Ot(B.y-k.y))).map(function(fr){return Ot(fr)}),4),de=x[0],ve=x[1],$e=x[2],lt=x[3],n.isTransposed&&(A=(0,M.CR)([lt,de,ve,$e],4),de=A[0],ve=A[1],$e=A[2],lt=A[3]),k.y<B.y?(vt.push(["M",W.x,W.y+$e]),$e!==0&&vt.push(["A",$e,$e,0,0,0,W.x-$e,W.y]),vt.push(["L",k.x+lt,k.y]),lt!==0&&vt.push(["A",lt,lt,0,0,0,k.x,k.y+lt]),vt.push(["L",B.x,B.y-de]),de!==0&&vt.push(["A",de,de,0,0,0,B.x+de,B.y]),vt.push(["L",U.x-ve,U.y]),ve!==0&&vt.push(["A",ve,ve,0,0,0,U.x,U.y-ve]),vt.push(["L",W.x,W.y+$e]),vt.push(["z"])):W.x<k.x?(vt.push(["M",U.x+ve,U.y]),ve!==0&&vt.push(["A",ve,ve,0,0,0,U.x,U.y+ve]),vt.push(["L",W.x,W.y-$e]),$e!==0&&vt.push(["A",$e,$e,0,0,0,W.x+$e,W.y]),vt.push(["L",k.x-lt,k.y]),lt!==0&&vt.push(["A",lt,lt,0,0,0,k.x,k.y-lt]),vt.push(["L",B.x,B.y+de]),de!==0&&vt.push(["A",de,de,0,0,0,B.x-de,B.y]),vt.push(["L",U.x+ve,U.y]),vt.push(["z"])):(vt.push(["M",B.x,B.y+de]),de!==0&&vt.push(["A",de,de,0,0,1,B.x+de,B.y]),vt.push(["L",U.x-ve,U.y]),ve!==0&&vt.push(["A",ve,ve,0,0,1,U.x,U.y+ve]),vt.push(["L",W.x,W.y-$e]),$e!==0&&vt.push(["A",$e,$e,0,0,1,W.x-$e,W.y]),vt.push(["L",k.x+lt,k.y]),lt!==0&&vt.push(["A",lt,lt,0,0,1,k.x,k.y-lt]),vt.push(["L",B.x,B.y+de]),vt.push(["z"])),vt}var d4=io("interval",{defaultShapeType:"rect",getDefaultPoints:function(i){return N_(i)}});fi("interval","rect",{draw:function(i,n){var t=mu(i,!1,!0),s=n,l=i==null?void 0:i.background;if(l){s=n.addGroup({name:"interval-group"});var f=Up(i),d=HE(i,this.parsePoints(i.points),this.coordinate);s.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},f),{path:d}),capture:!1,zIndex:-1,name:Pn})}var m;t.radius&&this.coordinate.isRect?m=GE(this.parsePoints(i.points),this.coordinate,t.radius):m=this.parsePath(jE(i.points,t.lineCap,this.coordinate));var x=s.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:m}),name:"interval"});return l?s:x},getMarker:function(i){var n=i.color,t=i.isInPolar;return t?{symbol:"circle",style:{r:4.5,fill:n}}:{symbol:"square",style:{r:4,fill:n}}}});var v4=null;function wR(i,n){var t=i.length,s=i;(0,E.HD)(s[0])&&(s=i.map(function(m){return n.translate(m)}));for(var l=s[1]-s[0],f=2;f<t;f++){var d=s[f]-s[f-1];l>d&&(l=d)}return l}function CR(i,n){if(n){var t=(0,E.xH)(i),s=(0,E.I)(t,n);return s.length}return i.length}function qx(i){var n=i.theme,t=i.coordinate,s=i.getXScale(),l=s.values,f=i.beforeMappingData,d=l.length,m=pl(i.coordinate),x=i.intervalPadding,A=i.dodgePadding,P=i.maxColumnWidth||n.maxColumnWidth,k=i.minColumnWidth||n.minColumnWidth,B=i.columnWidthRatio||n.columnWidthRatio,U=i.multiplePieWidthRatio||n.multiplePieWidthRatio,W=i.roseWidthRatio||n.roseWidthRatio;if(s.isLinear&&l.length>1){l.sort();var ne=wR(l,s);d=(s.max-s.min)/ne,l.length>d&&(d=l.length)}var de=s.range,ve=1/d,$e=1;if(t.isPolar?t.isTransposed&&d>1?$e=U:$e=W:(s.isLinear&&(ve*=de[1]-de[0]),$e=B),!(0,E.UM)(x)&&x>=0){var lt=x/m;ve=(1-(d-1)*lt)/d}else ve*=$e;if(i.getAdjust("dodge")){var vt=i.getAdjust("dodge"),Ot=vt.dodgeBy,fr=CR(f,Ot);if(!(0,E.UM)(A)&&A>=0){var Tr=A/m;ve=(ve-Tr*(fr-1))/fr}else!(0,E.UM)(x)&&x>=0&&(ve*=$e),ve=ve/fr;ve=ve>=0?ve:0}if(!(0,E.UM)(P)&&P>=0){var zr=P/m;ve>zr&&(ve=zr)}if(!(0,E.UM)(k)&&k>=0){var cn=k/m;ve<cn&&(ve=cn)}return ve}var XE=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;s.type="interval",s.shapeType="interval",s.generatePoints=!0;var l=t.background;return s.background=l,s}return n.prototype.createShapePointsCfg=function(t){var s=i.prototype.createShapePointsCfg.call(this,t),l,f=this.getAttribute("size");if(f){l=this.getAttributeValues(f,t)[0];var d=this.coordinate,m=pl(d);l=l/m}else this.defaultSize||(this.defaultSize=qx(this)),l=this.defaultSize;return s.size=l,s},n.prototype.adjustScale=function(){i.prototype.adjustScale.call(this);var t=this.getYScale();if(this.coordinate.type==="theta")t.change({nice:!1,min:0,max:dg(t)});else{var s=this.scaleDefs,l=t.field,f=t.min,d=t.max,m=t.type;m!=="time"&&(f>0&&!(0,E.U2)(s,[l,"min"])&&t.change({min:0}),d<=0&&!(0,E.U2)(s,[l,"max"])&&t.change({max:0}))}},n.prototype.getDrawCfg=function(t){var s=i.prototype.getDrawCfg.call(this,t);return s.background=this.background,s},n}(Ls),AR=XE,TR=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;s.type="line";var l=t.sortable,f=l===void 0?!1:l;return s.sortable=f,s}return n}(B_),$E=TR,Qx=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],MR=["cross","tick","plus","hyphen","line"];function Jx(i,n,t,s,l){var f,d,m=mu(n,l,!l,"r"),x=i.parsePoints(n.points),A=x[0];if(n.isStack)A=x[1];else if(x.length>1){var P=t.addGroup();try{for(var k=(0,M.XA)(x),B=k.next();!B.done;B=k.next()){var U=B.value;P.addShape({type:"marker",attrs:(0,M.pi)((0,M.pi)((0,M.pi)({},m),{symbol:vl[s]||s}),U)})}}catch(W){f={error:W}}finally{try{B&&!B.done&&(d=k.return)&&d.call(k)}finally{if(f)throw f.error}}return P}return t.addShape({type:"marker",attrs:(0,M.pi)((0,M.pi)((0,M.pi)({},m),{symbol:vl[s]||s}),A)})}var u8=io("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(i){return Pv(i)}});(0,E.S6)(Qx,function(i){fi("point","hollow-".concat(i),{draw:function(n,t){return Jx(this,n,t,i,!0)},getMarker:function(n){var t=n.color;return{symbol:vl[i]||i,style:{r:4.5,stroke:t,fill:null}}}})});var g4=null,RR=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="point",t.shapeType="point",t.generatePoints=!0,t}return n.prototype.getDrawCfg=function(t){var s=i.prototype.getDrawCfg.call(this,t);return(0,M.pi)((0,M.pi)({},s),{isStack:!!this.getAdjust("stack")})},n}(Ls),nf=RR;function Zm(i){for(var n=i[0],t=1,s=[["M",n.x,n.y]];t<i.length;){var l=i[t];(l.x!==i[t-1].x||l.y!==i[t-1].y)&&(s.push(["L",l.x,l.y]),l.x===n.x&&l.y===n.y&&t<i.length-1&&(n=i[t+1],s.push(["Z"]),s.push(["M",n.x,n.y]),t++)),t++}return(0,E.Xy)((0,E.Z$)(s),n)||s.push(["L",n.x,n.y]),s.push(["Z"]),s}var IR=io("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(i){var n=[];return(0,E.S6)(i.x,function(t,s){var l=i.y[s];n.push({x:t,y:l})}),n}});fi("polygon","polygon",{draw:function(i,n){if(!(0,E.xb)(i.points)){var t=mu(i,!0,!0),s=this.parsePath(Zm(i.points));return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s}),name:"polygon"})}},getMarker:function(i){var n=i.color;return{symbol:"square",style:{r:4,fill:n}}}});var PR=null,U_=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}return n.prototype.createShapePointsCfg=function(t){var s=i.prototype.createShapePointsCfg.call(this,t),l=s.x,f=s.y,d;if(!((0,E.kJ)(l)&&(0,E.kJ)(f))){var m=this.getXScale(),x=this.getYScale(),A=m.values.length,P=x.values.length,k=.5*1/A,B=.5*1/P;m.isCategory&&x.isCategory?(l=[l-k,l-k,l+k,l+k],f=[f-B,f+B,f+B,f-B]):(0,E.kJ)(l)?(d=l,l=[d[0],d[0],d[1],d[1]],f=[f-B/2,f+B/2,f+B/2,f-B/2]):(0,E.kJ)(f)&&(d=f,f=[d[0],d[1],d[1],d[0]],l=[l-k/2,l-k/2,l+k/2,l+k/2]),s.x=l,s.y=f}return s},n}(Ls),YE=U_,OR=io("schema",{defaultShapeType:""}),m4=null,kR=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}return n.prototype.createShapePointsCfg=function(t){var s=i.prototype.createShapePointsCfg.call(this,t),l,f=this.getAttribute("size");if(f){l=this.getAttributeValues(f,t)[0];var d=this.coordinate,m=pl(d);l=l/m}else this.defaultSize||(this.defaultSize=qx(this)),l=this.defaultSize;return s.size=l,s},n}(Ls),FR=kR;function KE(i){if(!(0,E.kJ)(i))return[];var n=(0,E.Fp)(i);return(0,E.UI)(i,function(t){return t/n})}var DR=io("violin",{defaultShapeType:"violin",getDefaultPoints:function(i){var n=i.size/2,t=[],s=KE(i._size);return(0,E.S6)(i.y,function(l,f){var d=s[f]*n,m=f===0,x=f===i.y.length-1;t.push({isMin:m,isMax:x,x:i.x-d,y:l}),t.unshift({isMin:m,isMax:x,x:i.x+d,y:l})}),t}});fi("violin","violin",{draw:function(i,n){var t=mu(i,!0,!0),s=this.parsePath(bg(i.points));return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s}),name:"violin"})},getMarker:function(i){var n=i.color;return{symbol:"circle",style:{r:4,fill:n}}}});var LR=null,eb=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="violin",t.shapeType="violin",t.generatePoints=!0,t}return n.prototype.createShapePointsCfg=function(t){var s=i.prototype.createShapePointsCfg.call(this,t),l,f=this.getAttribute("size");if(f){l=this.getAttributeValues(f,t)[0];var d=this.coordinate,m=pl(d);l=l/m}else this.defaultSize||(this.defaultSize=qx(this)),l=this.defaultSize;return s.size=l,s._size=(0,E.U2)(t[Ce],[this._sizeField]),s},n.prototype.initAttributes=function(){var t=this.attributeOption,s=t.size?t.size.fields[0]:this._sizeField?this._sizeField:"size";this._sizeField=s,delete t.size,i.prototype.initAttributes.call(this)},n}(Ls),qE=eb;fi("area","line",{draw:function(i,n){var t=oy(i,!0,!1,this),s=n.addShape({type:"path",attrs:t,name:"area"});return s},getMarker:function(i){var n=i.color;return{symbol:function(t,s,l){return l===void 0&&(l=5.5),[["M",t-l,s-4],["L",t+l,s-4],["L",t+l,s+4],["L",t-l,s+4],["Z"]]},style:{r:5,stroke:n,fill:null}}}}),fi("area","smooth",{draw:function(i,n){var t=this.coordinate,s=oy(i,!1,!0,this,$x(t)),l=n.addShape({type:"path",attrs:s,name:"area"});return l},getMarker:function(i){var n=i.color;return{symbol:function(t,s,l){return l===void 0&&(l=5.5),[["M",t-l,s-4],["L",t+l,s-4],["L",t+l,s+4],["L",t-l,s+4],["Z"]]},style:{r:5,fill:n,fillOpacity:1}}}}),fi("area","smooth-line",{draw:function(i,n){var t=this.coordinate,s=oy(i,!0,!0,this,$x(t)),l=n.addShape({type:"path",attrs:s,name:"area"});return l},getMarker:function(i){var n=i.color;return{symbol:function(t,s,l){return l===void 0&&(l=5.5),[["M",t-l,s-4],["L",t+l,s-4],["L",t+l,s+4],["L",t-l,s+4],["Z"]]},style:{r:5,stroke:n,fill:null}}}});function tb(i,n){return["C",i.x*1/2+n.x*1/2,i.y,i.x*1/2+n.x*1/2,n.y,n.x,n.y]}function rb(i,n){var t=[];t.push({x:n.x,y:n.y}),t.push(i);var s=["Q"];return(0,E.S6)(t,function(l){s.push(l.x,l.y)}),s}function QE(i,n,t){var s=rb(n,t),l=[["M",i.x,i.y]];return l.push(s),l}function BR(i,n){var t=rb(i[1],n),s=rb(i[3],n),l=[["M",i[0].x,i[0].y]];return l.push(s),l.push(["L",i[3].x,i[3].y]),l.push(["L",i[2].x,i[2].y]),l.push(t),l.push(["L",i[1].x,i[1].y]),l.push(["L",i[0].x,i[0].y]),l.push(["Z"]),l}fi("edge","arc",{draw:function(i,n){var t=mu(i,!0,!1,"lineWidth"),s=i.points,l=s.length>2?"weight":"normal",f;if(i.isInCircle){var d={x:0,y:1};return l==="normal"?f=QE(s[0],s[1],d):(t.fill=t.stroke,f=BR(s,d)),f=this.parsePath(f),n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:f})})}else{if(l==="normal")return s=this.parsePoints(s),f=Zf((s[1].x+s[0].x)/2,s[0].y,Math.abs(s[1].x-s[0].x)/2,Math.PI,Math.PI*2),n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:f})});var m=tb(s[1],s[3]),x=tb(s[2],s[0]);return f=[["M",s[0].x,s[0].y],["L",s[1].x,s[1].y],m,["L",s[3].x,s[3].y],["L",s[2].x,s[2].y],x,["Z"]],f=this.parsePath(f),t.fill=t.stroke,n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:f})})}},getMarker:function(i){return{symbol:"circle",style:{r:4.5,fill:i.color}}}});function JE(i,n){var t=tb(i,n),s=[["M",i.x,i.y]];return s.push(t),s}fi("edge","smooth",{draw:function(i,n){var t=mu(i,!0,!1,"lineWidth"),s=i.points,l=this.parsePath(JE(s[0],s[1]));return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:l})})},getMarker:function(i){return{symbol:"circle",style:{r:4.5,fill:i.color}}}});var sy=1/3;function NR(i,n){var t=[];t.push({x:i.x,y:i.y*(1-sy)+n.y*sy}),t.push({x:n.x,y:i.y*(1-sy)+n.y*sy}),t.push(n);var s=[["M",i.x,i.y]];return(0,E.S6)(t,function(l){s.push(["L",l.x,l.y])}),s}fi("edge","vhv",{draw:function(i,n){var t=mu(i,!0,!1,"lineWidth"),s=i.points,l=this.parsePath(NR(s[0],s[1]));return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:l})})},getMarker:function(i){return{symbol:"circle",style:{r:4.5,fill:i.color}}}}),fi("interval","funnel",{getPoints:function(i){return i.size=i.size*2,N_(i)},draw:function(i,n){var t=mu(i,!1,!0),s=this.parsePath(WE(i.points,i.nextPoints,!1)),l=n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s}),name:"interval"});return l},getMarker:function(i){var n=i.color;return{symbol:"square",style:{r:4,fill:n}}}}),fi("interval","hollow-rect",{draw:function(i,n){var t=mu(i,!0,!1),s=n,l=i==null?void 0:i.background;if(l){s=n.addGroup();var f=Up(i),d=HE(i,this.parsePoints(i.points),this.coordinate);s.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},f),{path:d}),capture:!1,zIndex:-1,name:Pn})}var m=this.parsePath(z_(i.points)),x=s.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:m}),name:"interval"});return l?s:x},getMarker:function(i){var n=i.color,t=i.isInPolar;return t?{symbol:"circle",style:{r:4.5,stroke:n,fill:null}}:{symbol:"square",style:{r:4,stroke:n,fill:null}}}});function zR(i){var n=i.x,t=i.y,s=i.y0;return(0,E.kJ)(t)?t.map(function(l,f){return{x:(0,E.kJ)(n)?n[f]:n,y:l}}):[{x:n,y:s},{x:n,y:t}]}fi("interval","line",{getPoints:function(i){return zR(i)},draw:function(i,n){var t=mu(i,!0,!1,"lineWidth"),s=Rl((0,M.pi)({},t),["fill"]),l=this.parsePath(z_(i.points,!1)),f=n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},s),{path:l}),name:"interval"});return f},getMarker:function(i){var n=i.color;return{symbol:function(t,s,l){return[["M",t,s-l],["L",t,s+l]]},style:{r:5,stroke:n}}}}),fi("interval","pyramid",{getPoints:function(i){return i.size=i.size*2,N_(i)},draw:function(i,n){var t=mu(i,!1,!0),s=this.parsePath(WE(i.points,i.nextPoints,!0)),l=n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s}),name:"interval"});return l},getMarker:function(i){var n=i.color;return{symbol:"square",style:{r:4,fill:n}}}});function UR(i){var n,t=i.x,s=i.y,l=i.y0,f=i.size,d,m;(0,E.kJ)(s)?(n=(0,M.CR)(s,2),d=n[0],m=n[1]):(d=l,m=s);var x=t+f/2,A=t-f/2;return[{x:t,y:d},{x:t,y:m},{x:A,y:d},{x,y:d},{x:A,y:m},{x,y:m}]}function ew(i){return[["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["M",i[2].x,i[2].y],["L",i[3].x,i[3].y],["M",i[4].x,i[4].y],["L",i[5].x,i[5].y]]}fi("interval","tick",{getPoints:function(i){return UR(i)},draw:function(i,n){var t=mu(i,!0,!1),s=this.parsePath(ew(i.points)),l=n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s}),name:"interval"});return l},getMarker:function(i){var n=i.color;return{symbol:function(t,s,l){return[["M",t-l/2,s-l],["L",t+l/2,s-l],["M",t,s-l],["L",t,s+l],["M",t-l/2,s+l],["L",t+l/2,s+l]]},style:{r:5,stroke:n}}}});var tw=function(i,n,t){var s=i.x,l=i.y,f=n.x,d=n.y,m;switch(t){case"hv":m=[{x:f,y:l}];break;case"vh":m=[{x:s,y:d}];break;case"hvh":var x=(f+s)/2;m=[{x,y:l},{x,y:d}];break;case"vhv":var A=(l+d)/2;m=[{x:s,y:A},{x:f,y:A}];break;default:break}return m};function rw(i,n){var t=[];return(0,E.S6)(i,function(s,l){var f=i[l+1];if(t.push(s),f){var d=tw(s,f,n);t=t.concat(d)}}),t}function nb(i){return i.map(function(n,t){return t===0?["M",n.x,n.y]:["L",n.x,n.y]})}function nw(i,n){var t=md(i.points,i.connectNulls,i.showSinglePoint),s=[];return(0,E.S6)(t,function(l){var f=rw(l,n);s=s.concat(nb(f))}),(0,M.pi)((0,M.pi)({},mu(i,!0,!1,"lineWidth")),{path:s})}(0,E.S6)(["hv","vh","hvh","vhv"],function(i){fi("line",i,{draw:function(n,t){var s=nw(n,i),l=t.addShape({type:"path",attrs:s,name:"line"});return l},getMarker:function(n){return yd(n,i)}})}),(0,E.S6)(MR,function(i){fi("point",i,{draw:function(n,t){return Jx(this,n,t,i,!0)},getMarker:function(n){var t=n.color;return{symbol:vl[i],style:{r:4.5,stroke:t,fill:null}}}})}),fi("point","image",{draw:function(i,n){var t,s,l=mu(i,!1,!1,"r").r,f=this.parsePoints(i.points),d=f[0];if(i.isStack)d=f[1];else if(f.length>1){var m=n.addGroup();try{for(var x=(0,M.XA)(f),A=x.next();!A.done;A=x.next()){var P=A.value;m.addShape("image",{attrs:{x:P.x-l/2,y:P.y-l,width:l,height:l,img:i.shape[1]}})}}catch(k){t={error:k}}finally{try{A&&!A.done&&(s=x.return)&&s.call(x)}finally{if(t)throw t.error}}return m}return n.addShape("image",{attrs:{x:d.x-l/2,y:d.y-l,width:l,height:l,img:i.shape[1]}})},getMarker:function(i){var n=i.color;return{symbol:"circle",style:{r:4.5,fill:n}}}}),(0,E.S6)(Qx,function(i){fi("point",i,{draw:function(n,t){return Jx(this,n,t,i,!1)},getMarker:function(n){var t=n.color;return{symbol:vl[i]||i,style:{r:4.5,fill:t}}}})});function iw(i){var n=(0,E.kJ)(i)?i:[i],t=n[0],s=n[n.length-1],l=n.length>1?n[1]:t,f=n.length>3?n[3]:s,d=n.length>2?n[2]:l;return{min:t,max:s,min1:l,max1:f,median:d}}function aw(i,n,t){var s=t/2,l;if((0,E.kJ)(n)){var f=iw(n),d=f.min,m=f.max,x=f.median,A=f.min1,P=f.max1,k=i-s,B=i+s;l=[[k,m],[B,m],[i,m],[i,P],[k,A],[k,P],[B,P],[B,A],[i,A],[i,d],[k,d],[B,d],[k,x],[B,x]]}else{n=(0,E.UM)(n)?.5:n;var U=iw(i),d=U.min,m=U.max,x=U.median,A=U.min1,P=U.max1,W=n-s,ne=n+s;l=[[d,W],[d,ne],[d,n],[A,n],[A,W],[A,ne],[P,ne],[P,W],[P,n],[m,n],[m,W],[m,ne],[x,W],[x,ne]]}return l.map(function(de){return{x:de[0],y:de[1]}})}function ZR(i){return[["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["M",i[2].x,i[2].y],["L",i[3].x,i[3].y],["M",i[4].x,i[4].y],["L",i[5].x,i[5].y],["L",i[6].x,i[6].y],["L",i[7].x,i[7].y],["L",i[4].x,i[4].y],["Z"],["M",i[8].x,i[8].y],["L",i[9].x,i[9].y],["M",i[10].x,i[10].y],["L",i[11].x,i[11].y],["M",i[12].x,i[12].y],["L",i[13].x,i[13].y]]}fi("schema","box",{getPoints:function(i){var n=i.x,t=i.y,s=i.size;return aw(n,t,s)},draw:function(i,n){var t=mu(i,!0,!1),s=this.parsePath(ZR(i.points)),l=n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s,name:"schema"})});return l},getMarker:function(i){var n=i.color;return{symbol:function(t,s,l){var f=[s-6,s-3,s,s+3,s+6],d=aw(t,f,l);return[["M",d[0].x+1,d[0].y],["L",d[1].x-1,d[1].y],["M",d[2].x,d[2].y],["L",d[3].x,d[3].y],["M",d[4].x,d[4].y],["L",d[5].x,d[5].y],["L",d[6].x,d[6].y],["L",d[7].x,d[7].y],["L",d[4].x,d[4].y],["Z"],["M",d[8].x,d[8].y],["L",d[9].x,d[9].y],["M",d[10].x+1,d[10].y],["L",d[11].x-1,d[11].y],["M",d[12].x,d[12].y],["L",d[13].x,d[13].y]]},style:{r:6,lineWidth:1,stroke:n}}}});function VR(i){var n=(0,E.kJ)(i)?i:[i],t=n.sort(function(s,l){return l-s});return Pp(t,4,t[t.length-1])}function Ed(i,n,t){var s=VR(n);return[{x:i,y:s[0]},{x:i,y:s[1]},{x:i-t/2,y:s[2]},{x:i-t/2,y:s[1]},{x:i+t/2,y:s[1]},{x:i+t/2,y:s[2]},{x:i,y:s[2]},{x:i,y:s[3]}]}function ow(i){return[["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["M",i[2].x,i[2].y],["L",i[3].x,i[3].y],["L",i[4].x,i[4].y],["L",i[5].x,i[5].y],["Z"],["M",i[6].x,i[6].y],["L",i[7].x,i[7].y]]}fi("schema","candle",{getPoints:function(i){var n=i.x,t=i.y,s=i.size;return Ed(n,t,s)},draw:function(i,n){var t=mu(i,!0,!0),s=this.parsePath(ow(i.points)),l=n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s,name:"schema"})});return l},getMarker:function(i){var n=i.color;return{symbol:function(t,s,l){var f=[s+7.5,s+3,s-3,s-7.5],d=Ed(t,f,l);return[["M",d[0].x,d[0].y],["L",d[1].x,d[1].y],["M",d[2].x,d[2].y],["L",d[3].x,d[3].y],["L",d[4].x,d[4].y],["L",d[5].x,d[5].y],["Z"],["M",d[6].x,d[6].y],["L",d[7].x,d[7].y]]},style:{lineWidth:1,stroke:n,fill:n,r:6}}}});function sw(i,n){var t=Math.abs(i[0].x-i[2].x),s=Math.abs(i[0].y-i[2].y),l=Math.min(t,s);n&&(l=(0,E.uZ)(n,0,Math.min(t,s))),l=l/2;var f=(i[0].x+i[2].x)/2,d=(i[0].y+i[2].y)/2;return{x:f-l,y:d-l,width:l*2,height:l*2}}fi("polygon","square",{draw:function(i,n){if(!(0,E.xb)(i.points)){var t=mu(i,!0,!0),s=this.parsePoints(i.points);return n.addShape("rect",{attrs:(0,M.pi)((0,M.pi)({},t),sw(s,i.size)),name:"polygon"})}},getMarker:function(i){var n=i.color;return{symbol:"square",style:{r:4,fill:n}}}}),fi("violin","smooth",{draw:function(i,n){var t=mu(i,!0,!0),s=this.parsePath(Cm(i.points));return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s})})},getMarker:function(i){var n=i.color;return{symbol:"circle",style:{stroke:null,r:4,fill:n}}}}),fi("violin","hollow",{draw:function(i,n){var t=mu(i,!0,!1),s=this.parsePath(bg(i.points));return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s})})},getMarker:function(i){var n=i.color;return{symbol:"circle",style:{r:4,fill:null,stroke:n}}}}),fi("violin","hollow-smooth",{draw:function(i,n){var t=mu(i,!0,!1),s=this.parsePath(Cm(i.points));return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s})})},getMarker:function(i){var n=i.color;return{symbol:"circle",style:{r:4,fill:null,stroke:n}}}});var HR=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getLabelValueDir=function(t){var s="y",l=t.points;return l[0][s]<=l[2][s]?1:-1},n.prototype.getLabelOffsetPoint=function(t,s,l,f){var d,m=i.prototype.getLabelOffsetPoint.call(this,t,s,l),x=this.getCoordinate(),A=x.isTransposed,P=A?"x":"y",k=this.getLabelValueDir(t.mappingData);return m=(0,M.pi)((0,M.pi)({},m),(d={},d[P]=m[P]*k,d)),x.isReflect("x")&&(m=(0,M.pi)((0,M.pi)({},m),{x:m.x*-1})),x.isReflect("y")&&(m=(0,M.pi)((0,M.pi)({},m),{y:m.y*-1})),m},n.prototype.getThemedLabelCfg=function(t){var s=this.geometry,l=this.getDefaultLabelCfg(),f=s.theme;return(0,E.b$)({},l,f.labels,t.position==="middle"?{offset:0}:{},t)},n.prototype.setLabelPosition=function(t,s,l,f){var d=this.getCoordinate(),m=d.isTransposed,x=s.points,A=d.convert(x[0]),P=d.convert(x[2]),k=this.getLabelValueDir(s),B,U,W,ne,de=(0,E.kJ)(s.shape)?s.shape[0]:s.shape;if(de==="funnel"||de==="pyramid"){var ve=(0,E.U2)(s,"nextPoints"),$e=(0,E.U2)(s,"points");if(ve){var lt=d.convert($e[0]),vt=d.convert($e[1]),Ot=d.convert(ve[0]),fr=d.convert(ve[1]);m?(B=Math.min(Ot.y,lt.y),W=Math.max(Ot.y,lt.y),U=(vt.x+fr.x)/2,ne=(lt.x+Ot.x)/2):(B=Math.min((vt.y+fr.y)/2,(lt.y+Ot.y)/2),W=Math.max((vt.y+fr.y)/2,(lt.y+Ot.y)/2),U=fr.x,ne=lt.x)}else B=Math.min(P.y,A.y),W=Math.max(P.y,A.y),U=P.x,ne=A.x}else B=Math.min(P.y,A.y),W=Math.max(P.y,A.y),U=P.x,ne=A.x;switch(f){case"right":t.x=U,t.y=(B+W)/2,t.textAlign=(0,E.U2)(t,"textAlign",k>0?"left":"right");break;case"left":t.x=ne,t.y=(B+W)/2,t.textAlign=(0,E.U2)(t,"textAlign",k>0?"left":"right");break;case"bottom":m&&(t.x=(U+ne)/2),t.y=W,t.textAlign=(0,E.U2)(t,"textAlign","center"),t.textBaseline=(0,E.U2)(t,"textBaseline",k>0?"bottom":"top");break;case"middle":m&&(t.x=(U+ne)/2),t.y=(B+W)/2,t.textAlign=(0,E.U2)(t,"textAlign","center"),t.textBaseline=(0,E.U2)(t,"textBaseline","middle");break;case"top":m&&(t.x=(U+ne)/2),t.y=B,t.textAlign=(0,E.U2)(t,"textAlign","center"),t.textBaseline=(0,E.U2)(t,"textBaseline",k>0?"bottom":"top");break;default:break}},n}(Co),jR=HR,Z_=Math.PI/2,WR=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getLabelOffset=function(t){var s=this.getCoordinate(),l=0;if((0,E.hj)(t))l=t;else if((0,E.HD)(t)&&t.indexOf("%")!==-1){var f=s.getRadius();s.innerRadius>0&&(f=f*(1-s.innerRadius)),l=parseFloat(t)*.01*f}return l},n.prototype.getLabelItems=function(t){var s=i.prototype.getLabelItems.call(this,t),l=this.geometry.getYScale();return(0,E.UI)(s,function(f){if(f&&l){var d=l.scale((0,E.U2)(f.data,l.field));return(0,M.pi)((0,M.pi)({},f),{percent:d})}return f})},n.prototype.getLabelAlign=function(t){var s=this.getCoordinate(),l;if(t.labelEmit)l=t.angle<=Math.PI/2&&t.angle>=-Math.PI/2?"left":"right";else if(!s.isTransposed)l="center";else{var f=s.getCenter(),d=t.offset;Math.abs(t.x-f.x)<1?l="center":t.angle>Math.PI||t.angle<=0?l=d>0?"left":"right":l=d>0?"right":"left"}return l},n.prototype.getLabelPoint=function(t,s,l){var f=1,d,m=t.content[l];this.isToMiddle(s)?d=this.getMiddlePoint(s.points):(t.content.length===1&&l===0?l=1:l===0&&(f=-1),d=this.getArcPoint(s,l));var x=t.offset*f,A=this.getPointAngle(d),P=t.labelEmit,k=this.getCirclePoint(A,x,d,P);return k.r===0?k.content="":(k.content=m,k.angle=A,k.color=s.color),k.rotate=t.autoRotate?this.getLabelRotate(A,x,P):t.rotate,k.start={x:d.x,y:d.y},k},n.prototype.getArcPoint=function(t,s){return s===void 0&&(s=0),!(0,E.kJ)(t.x)&&!(0,E.kJ)(t.y)?{x:t.x,y:t.y}:{x:(0,E.kJ)(t.x)?t.x[s]:t.x,y:(0,E.kJ)(t.y)?t.y[s]:t.y}},n.prototype.getPointAngle=function(t){return Vh(this.getCoordinate(),t)},n.prototype.getCirclePoint=function(t,s,l,f){var d=this.getCoordinate(),m=d.getCenter(),x=Op(d,l);if(x===0)return(0,M.pi)((0,M.pi)({},m),{r:x});var A=t;if(d.isTransposed&&x>s&&!f){var P=Math.asin(s/(2*x));A=t+P*2}else x=x+s;return{x:m.x+x*Math.cos(A),y:m.y+x*Math.sin(A),r:x}},n.prototype.getLabelRotate=function(t,s,l){var f=t+Z_;return l&&(f-=Z_),f&&(f>Z_?f=f-Math.PI:f<-Z_&&(f=f+Math.PI)),f},n.prototype.getMiddlePoint=function(t){var s=this.getCoordinate(),l=t.length,f={x:0,y:0};return(0,E.S6)(t,function(d){f.x+=d.x,f.y+=d.y}),f.x/=l,f.y/=l,f=s.convert(f),f},n.prototype.isToMiddle=function(t){return t.x.length>2},n}(Co),V_=WR,GR=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.defaultLayout="distribute",t}return n.prototype.getDefaultLabelCfg=function(t,s){var l=i.prototype.getDefaultLabelCfg.call(this,t,s);return(0,E.b$)({},l,(0,E.U2)(this.geometry.theme,"pieLabels",{}))},n.prototype.getLabelOffset=function(t){return i.prototype.getLabelOffset.call(this,t)||0},n.prototype.getLabelRotate=function(t,s,l){var f;return s<0&&(f=t,f>Math.PI/2&&(f=f-Math.PI),f<-Math.PI/2&&(f=f+Math.PI)),f},n.prototype.getLabelAlign=function(t){var s=this.getCoordinate(),l=s.getCenter(),f;return t.angle<=Math.PI/2&&t.x>=l.x?f="left":f="right",t.offset<=0&&(f==="right"?f="left":f="right"),f},n.prototype.getArcPoint=function(t){return t},n.prototype.getPointAngle=function(t){var s=this.getCoordinate(),l={x:(0,E.kJ)(t.x)?t.x[0]:t.x,y:t.y[0]},f={x:(0,E.kJ)(t.x)?t.x[1]:t.x,y:t.y[1]},d,m=Vh(s,l);if(t.points&&t.points[0].y===t.points[1].y)d=m;else{var x=Vh(s,f);m>=x&&(x=x+Math.PI*2),d=m+(x-m)/2}return d},n.prototype.getCirclePoint=function(t,s){var l=this.getCoordinate(),f=l.getCenter(),d=l.getRadius()+s;return(0,M.pi)((0,M.pi)({},os(f.x,f.y,d,t)),{angle:t,r:d})},n}(V_),uw=GR,ib=4;function XR(i,n,t,s,l,f){var d,m,x=!0,A=s.start,P=s.end,k=Math.min(A.y,P.y),B=Math.abs(A.y-P.y),U,W=0,ne=Number.MIN_VALUE,de=n.map(function(Tr){return Tr.y>W&&(W=Tr.y),Tr.y<ne&&(ne=Tr.y),{size:t,targets:[Tr.y-k]}});for(ne-=k,W-k>B&&(B=W-k);x;)for(de.forEach(function(Tr){var zr=(Math.min.apply(ne,Tr.targets)+Math.max.apply(ne,Tr.targets))/2;Tr.pos=Math.min(Math.max(ne,zr-Tr.size/2),B-Tr.size)}),x=!1,U=de.length;U--;)if(U>0){var ve=de[U-1],$e=de[U];ve.pos+ve.size>$e.pos&&(ve.size+=$e.size,ve.targets=ve.targets.concat($e.targets),ve.pos+ve.size>B&&(ve.pos=B-ve.size),de.splice(U,1),x=!0)}U=0,de.forEach(function(Tr){var zr=k+t/2;Tr.targets.forEach(function(){n[U].y=Tr.pos+zr,zr+=t,U++})});var lt={};try{for(var vt=(0,M.XA)(i),Ot=vt.next();!Ot.done;Ot=vt.next()){var fr=Ot.value;lt[fr.get("id")]=fr}}catch(Tr){d={error:Tr}}finally{try{Ot&&!Ot.done&&(m=vt.return)&&m.call(vt)}finally{if(d)throw d.error}}n.forEach(function(Tr){var zr=Tr.r*Tr.r,cn=Math.pow(Math.abs(Tr.y-l.y),2);if(zr<cn)Tr.x=l.x;else{var Qr=Math.sqrt(zr-cn);f?Tr.x=l.x+Qr:Tr.x=l.x-Qr}var On=lt[Tr.id];On.attr("x",Tr.x),On.attr("y",Tr.y);var Qn=(0,E.sE)(On.getChildren(),function(Hi){return Hi.get("type")==="text"});Qn&&(Qn.attr("y",Tr.y),Qn.attr("x",Tr.x))})}function $R(i,n,t,s){if(!(!i.length||!n.length)){var l=i[0]?i[0].offset:0,f=n[0].get("coordinate"),d=f.getRadius(),m=f.getCenter();if(l>0){var x=14,A=d+l,P=A*2+x*2,k={start:f.start,end:f.end},B=[[],[]];i.forEach(function(U){U&&(U.textAlign==="right"?B[0].push(U):B[1].push(U))}),B.forEach(function(U,W){var ne=P/x;U.length>ne&&(U.sort(function(de,ve){return ve["..percent"]-de["..percent"]}),U.splice(ne,U.length-ne)),U.sort(function(de,ve){return de.y-ve.y}),XR(n,U,x,k,m,W)})}(0,E.S6)(i,function(U){if(U&&U.labelLine){var W=U.offset,ne=U.angle,de=os(m.x,m.y,d,ne),ve=os(m.x,m.y,d+W/2,ne),$e=U.x+(0,E.U2)(U,"offsetX",0),lt=U.y+(0,E.U2)(U,"offsetY",0),vt={x:$e-Math.cos(ne)*ib,y:lt-Math.sin(ne)*ib};(0,E.Kn)(U.labelLine)||(U.labelLine={}),U.labelLine.path=["M ".concat(de.x),"".concat(de.y," Q").concat(ve.x),"".concat(ve.y," ").concat(vt.x),vt.y].join(",")}})}}function lw(i,n,t){var s=i.filter(function(W){return!W.invisible});s.sort(function(W,ne){return W.y-ne.y});var l=!0,f=t.minY,d=t.maxY,m=Math.abs(f-d),x,A=0,P=Number.MIN_VALUE,k=s.map(function(W){return W.y>A&&(A=W.y),W.y<P&&(P=W.y),{content:W.content,size:n,targets:[W.y-f],pos:null}});for(P-=f,A-f>m&&(m=A-f);l;)for(k.forEach(function(W){var ne=(Math.min.apply(P,W.targets)+Math.max.apply(P,W.targets))/2;W.pos=Math.min(Math.max(P,ne-W.size/2),m-W.size),W.pos=Math.max(0,W.pos)}),l=!1,x=k.length;x--;)if(x>0){var B=k[x-1],U=k[x];B.pos+B.size>U.pos&&(B.size+=U.size,B.targets=B.targets.concat(U.targets),B.pos+B.size>m&&(B.pos=m-B.size),k.splice(x,1),l=!0)}x=0,k.forEach(function(W){var ne=f+n/2;W.targets.forEach(function(){s[x].y=W.pos+ne,ne+=n,x++})})}var cw=4;function YR(i,n){var t=n.getCenter(),s=n.getRadius();if(i&&i.labelLine){var l=i.angle,f=i.offset,d=os(t.x,t.y,s,l),m=i.x+(0,E.U2)(i,"offsetX",0)*(Math.cos(l)>0?1:-1),x=i.y+(0,E.U2)(i,"offsetY",0)*(Math.sin(l)>0?1:-1),A={x:m-Math.cos(l)*cw,y:x-Math.sin(l)*cw},P=i.labelLine.smooth,k=[],B=A.x-t.x,U=A.y-t.y,W=Math.atan(U/B);if(B<0&&(W+=Math.PI),P===!1){(0,E.Kn)(i.labelLine)||(i.labelLine={});var ne=0;(l<0&&l>-Math.PI/2||l>Math.PI*1.5)&&A.y>d.y&&(ne=1),l>=0&&l<Math.PI/2&&A.y>d.y&&(ne=1),l>=Math.PI/2&&l<Math.PI&&d.y>A.y&&(ne=1),(l<-Math.PI/2||l>=Math.PI&&l<Math.PI*1.5)&&d.y>A.y&&(ne=1);var de=f/2>4?4:Math.max(f/2-1,0),ve=os(t.x,t.y,s+de,l),$e=os(t.x,t.y,s+f/2,W),lt=0;k.push("M ".concat(d.x," ").concat(d.y)),k.push("L ".concat(ve.x," ").concat(ve.y)),k.push("A ".concat(t.x," ").concat(t.y," 0 ").concat(lt," ").concat(ne," ").concat($e.x," ").concat($e.y)),k.push("L ".concat(A.x," ").concat(A.y))}else{var ve=os(t.x,t.y,s+(f/2>4?4:Math.max(f/2-1,0)),l),vt=d.x<t.x?1:-1;k.push("M ".concat(A.x," ").concat(A.y));var Ot=(d.y-t.y)/(d.x-t.x),fr=(A.y-t.y)/(A.x-t.x);Math.abs(Ot-fr)>Math.pow(Math.E,-16)&&k.push.apply(k,["C",A.x+vt*4,A.y,2*ve.x-d.x,2*ve.y-d.y,d.x,d.y]),k.push("L ".concat(d.x," ").concat(d.y))}i.labelLine.path=k.join(" ")}}function KR(i,n,t,s){var l,f,d=(0,E.hX)(i,function(zr){return!(0,E.UM)(zr)}),m=n[0]&&n[0].get("coordinate");if(m){var x=m.getCenter(),A=m.getRadius(),P={};try{for(var k=(0,M.XA)(n),B=k.next();!B.done;B=k.next()){var U=B.value;P[U.get("id")]=U}}catch(zr){l={error:zr}}finally{try{B&&!B.done&&(f=k.return)&&f.call(k)}finally{if(l)throw l.error}}var W=(0,E.U2)(d[0],"labelHeight",14),ne=(0,E.U2)(d[0],"offset",0);if(!(ne<=0)){var de="left",ve="right",$e=(0,E.vM)(d,function(zr){return zr.x<x.x?de:ve}),lt=m.start,vt=m.end,Ot=Math.min((A+ne+W)*2,m.getHeight()),fr=Ot/2,Tr={minX:lt.x,maxX:vt.x,minY:x.y-fr,maxY:x.y+fr};(0,E.S6)($e,function(zr,cn){var Qr=Math.floor(Ot/W);zr.length>Qr&&(zr.sort(function(On,Qn){return Qn.percent-On.percent}),(0,E.S6)(zr,function(On,Qn){Qn+1>Qr&&(P[On.id].set("visible",!1),On.invisible=!0)})),lw(zr,W,Tr)}),(0,E.S6)($e,function(zr,cn){(0,E.S6)(zr,function(Qr){var On=cn===ve,Qn=P[Qr.id],Hi=Qn.getChildByIndex(0);if(Hi){var oa=A+ne,eo=Qr.y-x.y,Nn=Math.pow(oa,2),Di=Math.pow(eo,2),sa=Nn-Di>0?Nn-Di:0,Li=Math.sqrt(sa),$i=Math.abs(Math.cos(Qr.angle)*oa);On?Qr.x=x.x+Math.max(Li,$i):Qr.x=x.x-Math.max(Li,$i)}Hi&&(Hi.attr("y",Qr.y),Hi.attr("x",Qr.x)),YR(Qr,m)})})}}}var H_=4,fw=4,hw=4;function qR(i,n,t){var s=n.getCenter(),l=n.getRadius(),f={x:i.x-(t?hw:-hw),y:i.y},d=os(s.x,s.y,l+H_,i.angle),m={x:f.x,y:f.y},x={x:d.x,y:d.y},A=os(s.x,s.y,l,i.angle),P="";if(f.y!==d.y){var k=t?4:-4;m.y=f.y,i.angle<0&&i.angle>=-Math.PI/2&&(m.x=Math.max(d.x,f.x-k),f.y<d.y?x.y=m.y:(x.y=d.y,x.x=Math.max(x.x,m.x-k))),i.angle>0&&i.angle<Math.PI/2&&(m.x=Math.max(d.x,f.x-k),f.y>d.y?x.y=m.y:(x.y=d.y,x.x=Math.max(x.x,m.x-k))),i.angle>Math.PI/2&&(m.x=Math.min(d.x,f.x-k),f.y>d.y?x.y=m.y:(x.y=d.y,x.x=Math.min(x.x,m.x-k))),i.angle<-Math.PI/2&&(m.x=Math.min(d.x,f.x-k),f.y<d.y?x.y=m.y:(x.y=d.y,x.x=Math.min(x.x,m.x-k)))}P=["M ".concat(f.x,",").concat(f.y),"L ".concat(m.x,",").concat(m.y),"L ".concat(x.x,",").concat(x.y),"L ".concat(d.x,",").concat(d.y),"L ".concat(A.x,",").concat(A.y)].join(" "),i.labelLine=(0,E.b$)({},i.labelLine,{path:P})}function QR(i,n,t,s){var l,f,d=n[0]&&n[0].get("coordinate");if(d){var m=d.getCenter(),x=d.getRadius(),A={};try{for(var P=(0,M.XA)(n),k=P.next();!k.done;k=P.next()){var B=k.value;A[B.get("id")]=B}}catch(zr){l={error:zr}}finally{try{k&&!k.done&&(f=P.return)&&f.call(P)}finally{if(l)throw l.error}}var U=(0,E.U2)(i[0],"labelHeight",14),W=Math.max((0,E.U2)(i[0],"offset",0),H_);(0,E.S6)(i,function(zr){if(zr){var cn=(0,E.U2)(A,[zr.id]);if(cn){var Qr=zr.x>m.x||zr.x===m.x&&zr.y>m.y,On=(0,E.UM)(zr.offsetX)?fw:zr.offsetX,Qn=os(m.x,m.y,x+H_,zr.angle),Hi=W+On;zr.x=m.x+(Qr?1:-1)*(x+Hi),zr.y=Qn.y}}});var ne=d.start,de=d.end,ve="left",$e="right",lt=(0,E.vM)(i,function(zr){return zr.x<m.x?ve:$e}),vt=(x+W)*2+U;(0,E.S6)(lt,function(zr){var cn=zr.length*U;cn>vt&&(vt=Math.min(cn,Math.abs(ne.y-de.y)))});var Ot={minX:ne.x,maxX:de.x,minY:m.y-vt/2,maxY:m.y+vt/2};(0,E.S6)(lt,function(zr,cn){var Qr=vt/U;zr.length>Qr&&(zr.sort(function(On,Qn){return Qn.percent-On.percent}),(0,E.S6)(zr,function(On,Qn){Qn>Qr&&(A[On.id].set("visible",!1),On.invisible=!0)})),lw(zr,U,Ot)});var fr=Ot.minY,Tr=Ot.maxY;(0,E.S6)(lt,function(zr,cn){var Qr=cn===$e;(0,E.S6)(zr,function(On){var Qn=(0,E.U2)(A,On&&[On.id]);if(Qn){if(On.y<fr||On.y>Tr){Qn.set("visible",!1);return}var Hi=Qn.getChildByIndex(0),oa=Hi.getCanvasBBox(),eo={x:Qr?oa.x:oa.maxX,y:oa.y+oa.height/2};Nu(Hi,On.x-eo.x,On.y-eo.y),On.labelLine&&qR(On,d,Qr)}})})}}function JR(i,n,t,s){(0,E.S6)(n,function(l){var f=s.minX,d=s.minY,m=s.maxX,x=s.maxY,A=l.getCanvasBBox(),P=A.minX,k=A.minY,B=A.maxX,U=A.maxY,W=A.x,ne=A.y,de=A.width,ve=A.height,$e=W,lt=ne;(P<f||B<f)&&($e=f),(k<d||U<d)&&(lt=d),P>m?$e=m-de:B>m&&($e=$e-(B-m)),k>x?lt=x-ve:U>x&&(lt=lt-(U-x)),($e!==W||lt!==ne)&&Nu(l,$e-W,lt-ne)})}function eI(i,n,t,s){(0,E.S6)(n,function(l,f){var d=l.getCanvasBBox(),m=t[f].getBBox();(d.minX<m.minX||d.minY<m.minY||d.maxX>m.maxX||d.maxY>m.maxY)&&l.remove(!0)})}var tI=100,ab=function(){function i(n){n===void 0&&(n={}),this.bitmap={};var t=n.xGap,s=t===void 0?1:t,l=n.yGap,f=l===void 0?8:l;this.xGap=s,this.yGap=f}return i.prototype.hasGap=function(n){for(var t=!0,s=this.bitmap,l=Math.round(n.minX),f=Math.round(n.maxX),d=Math.round(n.minY),m=Math.round(n.maxY),x=l;x<=f;x+=1){if(!s[x]){s[x]={};continue}if(x===l||x===f){for(var A=d;A<=m;A++)if(s[x][A]){t=!1;break}}else if(s[x][d]||s[x][m]){t=!1;break}}return t},i.prototype.fillGap=function(n){for(var t=this.bitmap,s=Math.round(n.minX),l=Math.round(n.maxX),f=Math.round(n.minY),d=Math.round(n.maxY),m=s;m<=l;m+=1)t[m]||(t[m]={});for(var m=s;m<=l;m+=this.xGap){for(var x=f;x<=d;x+=this.yGap)t[m][x]=!0;t[m][d]=!0}if(this.yGap!==1)for(var m=f;m<=d;m+=1)t[s][m]=!0,t[l][m]=!0;if(this.xGap!==1)for(var m=s;m<=l;m+=1)t[m][f]=!0,t[m][d]=!0},i.prototype.destroy=function(){this.bitmap={}},i}();function pw(i,n,t){t===void 0&&(t=tI);var s=-1,l=i.attr(),f=l.x,d=l.y,m=i.getCanvasBBox(),x=Math.sqrt(m.width*m.width+m.height*m.height),A,P=-s,k=0,B=0,U=function(ve){var $e=ve*.1;return[$e*Math.cos($e),$e*Math.sin($e)]};if(n.hasGap(m))return n.fillGap(m),!0;for(var W=!1,ne=0,de={};Math.min(Math.abs(k),Math.abs(B))<x&&ne<t;)if(A=U(P+=s),k=~~A[0],B=~~A[1],!(!k&&!B||de["".concat(k,"-").concat(B)])&&(i.attr({x:f+k,y:d+B}),k+B<0&&i.attr("textAlign","right"),ne++,n.hasGap(i.getCanvasBBox()))){n.fillGap(i.getCanvasBBox()),W=!0,de["".concat(k,"-").concat(B)]=!0;break}return W}function rI(i,n,t,s){var l=i.getCanvasBBox(),f=l.width,d=l.height,m={x:n,y:t,textAlign:"center"};switch(s){case 0:m.y-=d+1,m.x+=1,m.textAlign="left";break;case 1:m.y-=d+1,m.x-=1,m.textAlign="right";break;case 2:m.y+=d+1,m.x-=1,m.textAlign="right";break;case 3:m.y+=d+1,m.x+=1,m.textAlign="left";break;case 5:m.y-=d*2+2;break;case 6:m.y+=d*2+2;break;case 7:m.x+=f+1,m.textAlign="left";break;case 8:m.x-=f+1,m.textAlign="right";break;default:break}return i.attr(m),i.getCanvasBBox()}function nI(i,n,t,s){var l=new ab;(0,E.S6)(n,function(f){var d=f.find(function(m){return m.get("type")==="text"});pw(d,l)||f.remove(!0)}),l.destroy()}function iI(i,n,t,s){var l=new ab;(0,E.S6)(n,function(f){for(var d=f.find(function(U){return U.get("type")==="text"}),m=d.attr(),x=m.x,A=m.y,P=!1,k=0;k<=8;k++){var B=rI(d,x,A,k);if(l.hasGap(B)){l.fillGap(B),P=!0;break}}P||f.remove(!0)}),l.destroy()}function aI(i,n){return(i[0]||0)*(n[0]||0)+(i[1]||0)*(n[1]||0)+(i[2]||0)*(n[2]||0)}function dw(i){if(i.length>4)return[];var n=function(l,f){return[f.x-l.x,f.y-l.y]},t=n(i[0],i[1]),s=n(i[1],i[2]);return[t,s]}function uy(i,n,t){n===void 0&&(n=0),t===void 0&&(t={x:0,y:0});var s=i.x,l=i.y;return{x:(s-t.x)*Math.cos(-n)+(l-t.y)*Math.sin(-n)+t.x,y:(t.x-s)*Math.sin(-n)+(l-t.y)*Math.cos(-n)+t.y}}function ob(i){var n=[{x:i.x,y:i.y},{x:i.x+i.width,y:i.y},{x:i.x+i.width,y:i.y+i.height},{x:i.x,y:i.y+i.height}],t=i.rotation;return t?[uy(n[0],t,n[0]),uy(n[1],t,n[0]),uy(n[2],t,n[0]),uy(n[3],t,n[0])]:n}function vw(i,n){if(i.length>4)return{min:0,max:0};var t=[];return i.forEach(function(s){t.push(aI([s.x,s.y],n))}),{min:Math.min.apply(Math,(0,M.ev)([],(0,M.CR)(t),!1)),max:Math.max.apply(Math,(0,M.ev)([],(0,M.CR)(t),!1))}}function oI(i,n){return i.max>n.min&&i.min<n.max}function sI(i){return typeof i=="number"&&!Number.isNaN(i)&&i!==1/0&&i!==-1/0}function gw(i){return["x","y","width","height"].every(function(n){return sI(i[n])})}function uI(i,n,t){return t===void 0&&(t=0),!(n.x>i.x+i.width+t||n.x+n.width<i.x-t||n.y>i.y+i.height+t||n.y+n.height<i.y-t)}function mw(i,n,t){if(t===void 0&&(t=0),!gw(i)||!gw(n))return!1;if(!i.rotation&&!n.rotation)return uI(i,n,t);for(var s=ob(i),l=ob(n),f=dw(s).concat(dw(l)),d=0;d<f.length;d++){var m=f[d],x=vw(s,m),A=vw(l,m);if(!oI(x,A))return!1}return!0}var yw=function(){function i(n){var t=this;this.queue=[],this.worker=new Worker(n),this.worker.onmessage=function(s){var l;(l=t.queue.shift())===null||l===void 0||l.resolve(s)},this.worker.onmessageerror=function(s){var l;console.warn("[AntV G2] Web worker is not available"),(l=t.queue.shift())===null||l===void 0||l.reject(s)}}return i.prototype.post=function(n,t){var s=this;return new Promise(function(l,f){s.queue.push({resolve:l,reject:f});try{s.worker.postMessage(n)}catch(d){console.warn("[AntV G2] Web worker is not available"),(0,E.mf)(t)&&t()}})},i.prototype.destroy=function(){this.worker.terminate()},i}();function lI(i){if(typeof window!="undefined"){var n;try{n=new Blob([i.toString()],{type:"application/javascript"})}catch(t){n=new window.BlobBuilder,n.append(i.toString()),n=n.getBlob()}return new yw(URL.createObjectURL(n))}}var cI=function(i){function n(){function A(lt,vt){return(lt[0]||0)*(vt[0]||0)+(lt[1]||0)*(vt[1]||0)+(lt[2]||0)*(vt[2]||0)}function P(lt){if(lt.length>4)return[];var vt=function(Tr,zr){return[zr.x-Tr.x,zr.y-Tr.y]},Ot=vt(lt[0],lt[1]),fr=vt(lt[1],lt[2]);return[Ot,fr]}function k(lt,vt,Ot){vt===void 0&&(vt=0),Ot===void 0&&(Ot={x:0,y:0});var fr=lt.x,Tr=lt.y;return{x:(fr-Ot.x)*Math.cos(-vt)+(Tr-Ot.y)*Math.sin(-vt)+Ot.x,y:(Ot.x-fr)*Math.sin(-vt)+(Tr-Ot.y)*Math.cos(-vt)+Ot.y}}function B(lt){var vt=[{x:lt.x,y:lt.y},{x:lt.x+lt.width,y:lt.y},{x:lt.x+lt.width,y:lt.y+lt.height},{x:lt.x,y:lt.y+lt.height}],Ot=lt.rotation;return Ot?[k(vt[0],Ot,vt[0]),k(vt[1],Ot,vt[0]),k(vt[2],Ot,vt[0]),k(vt[3],Ot,vt[0])]:vt}function U(lt,vt){if(lt.length>4)return{min:0,max:0};var Ot=[];return lt.forEach(function(fr){Ot.push(A([fr.x,fr.y],vt))}),{min:Math.min.apply(null,Ot),max:Math.max.apply(null,Ot)}}function W(lt,vt){return lt.max>vt.min&&lt.min<vt.max}function ne(lt){return typeof lt=="number"&&!Number.isNaN(lt)&&lt!==1/0&&lt!==-1/0}function de(lt){return["x","y","width","height"].every(function(vt){return ne(lt[vt])})}function ve(lt,vt,Ot){return Ot===void 0&&(Ot=0),!(vt.x>lt.x+lt.width+Ot||vt.x+vt.width<lt.x-Ot||vt.y>lt.y+lt.height+Ot||vt.y+vt.height<lt.y-Ot)}function $e(lt,vt,Ot){if(Ot===void 0&&(Ot=0),!de(lt)||!de(vt))return!1;if(!lt.rotation&&!vt.rotation)return ve(lt,vt,Ot);for(var fr=B(lt),Tr=B(vt),zr=P(fr).concat(P(Tr)),cn=0;cn<zr.length;cn++){var Qr=zr[cn],On=U(fr,Qr),Qn=U(Tr,Qr);if(!W(On,Qn))return!1}return!0}return{intersect:$e}}var t=n().intersect;function s(A){for(var P=A.slice(),k=0;k<P.length;k++){var B=P[k];if(B.visible)for(var U=k+1;U<P.length;U++){var W=P[U];B!==W&&W.visible&&t(B,W)&&(W.visible=!1)}}return P}var l={"hide-overlap":s};try{var f=JSON.parse(i.data);if(!f||!f.type||!l[f.type])return;var d=f.type,m=f.items,x=l[d](m);self.postMessage(x)}catch(A){throw A}},fI=`
   self.onmessage = `.concat(cI.toString(),`
`),sb=function(i){for(var n=i.slice(),t=0;t<n.length;t++){var s=n[t];if(s.visible)for(var l=t+1;l<n.length;l++){var f=n[l];s!==f&&f.visible&&mw(s,f)&&(f.visible=!1)}}return n},ub=new Map,lb=lI(fI);function _w(i,n,t,s){return(0,M.mG)(this,void 0,void 0,function(){var l,f,d,m,x,A;return(0,M.Jh)(this,function(P){switch(P.label){case 0:return l=n.map(function(k,B){return(0,M.pi)((0,M.pi)({},Do(k,i[B],(0,E.U2)(i[B],"background.padding"))),{visible:!0})}),f=JSON.stringify(l),d=function(k){return ub.set(f,k),(0,E.S6)(k,function(B,U){var W=B.visible,ne=n[U];W?ne==null||ne.show():ne==null||ne.hide()}),k},ub.get(f)?(d(ub.get(f)),[3,7]):[3,1];case 1:if(!lb)return[3,6];P.label=2;case 2:return P.trys.push([2,4,,5]),m=JSON.stringify({type:"hide-overlap",items:l}),[4,lb.post(m,function(){return d(sb(l))})];case 3:return x=P.sent(),d(Array.isArray(x.data)?x.data:[]),[3,5];case 4:return A=P.sent(),console.error(A),d(sb(l)),[3,5];case 5:return[3,7];case 6:d(sb(l)),P.label=7;case 7:return[2]}})})}var xw={"#5B8FF9":!0},hI=function(i){var n=Ea.toRGB(i).toUpperCase();if(xw[n])return xw[n];var t=(0,M.CR)(Ea.rgb2arr(n),3),s=t[0],l=t[1],f=t[2],d=(s*299+l*587+f*114)/1e3<128;return d};function pI(i,n,t){if(t.length!==0){var s=t[0].get("element"),l=s.geometry.theme,f=l.labels||{},d=f.fillColorLight,m=f.fillColorDark;t.forEach(function(x,A){var P=n[A],k=P.find(function(ve){return ve.get("type")==="text"}),B=$o.fromObject(x.getBBox()),U=$o.fromObject(k.getCanvasBBox()),W=!B.contains(U),ne=x.attr("fill"),de=hI(ne);W?k.attr(l.overflowLabels.style):de?d&&k.attr("fill",d):m&&k.attr("fill",m)})}}function dI(i,n,t){var s=i.coordinate,l=Ba(n),f=$o.fromObject(l.getCanvasBBox()),d=$o.fromObject(t.getBBox());return s.isTransposed?d.height>=f.height:d.width>=f.width}function vI(i,n,t){var s=!!i.getAdjust("stack");return s||n.every(function(l,f){var d=t[f];return dI(i,l,d)})}function bw(i,n,t){var s=i.coordinate,l=$o.fromObject(t.getBBox()),f=Ba(n);s.isTransposed?f.attr({x:l.minX+l.width/2,textAlign:"center"}):f.attr({y:l.minY+l.height/2,textBaseline:"middle"})}function Sw(i,n,t){var s;if(t.length!==0){var l=(s=t[0])===null||s===void 0?void 0:s.get("element"),f=l==null?void 0:l.geometry;if(!(!f||f.type!=="interval")){var d=vI(f,n,t);d&&t.forEach(function(m,x){var A=n[x];bw(f,A,m)})}}}function gI(i){var n=500,t=[],s=Math.max(Math.floor(i.length/n),1);return(0,E.S6)(i,function(l,f){f%s===0?t.push(l):l.set("visible",!1)}),t}function mI(i,n,t){var s;if(t.length!==0){var l=(s=t[0])===null||s===void 0?void 0:s.get("element"),f=l==null?void 0:l.geometry;if(!(!f||f.type!=="interval")){var d=gI(n),m=(0,M.CR)(f.getXYFields(),1),x=m[0],A=[],P=[],k=(0,E.vM)(d,function(de){return de.get("data")[x]}),B=(0,E.jj)((0,E.UI)(d,function(de){return de.get("data")[x]})),U;d.forEach(function(de){de.set("visible",!0)});var W=function(de){de&&(de.length&&P.push(de.pop()),P.push.apply(P,(0,M.ev)([],(0,M.CR)(de),!1)))};for((0,E.dp)(B)>0&&(U=B.shift(),W(k[U])),(0,E.dp)(B)>0&&(U=B.pop(),W(k[U])),(0,E.S6)(B.reverse(),function(de){W(k[de])});P.length>0;){var ne=P.shift();ne.get("visible")&&(Na(ne,A)?ne.set("visible",!1):A.push(ne))}}}}function yI(i,n){var t=i.getXYFields()[1],s=[],l=n.sort(function(f,d){return f.get("data")[t]-f.get("data")[t]});return l.length>0&&s.push(l.shift()),l.length>0&&s.push(l.pop()),s.push.apply(s,(0,M.ev)([],(0,M.CR)(l),!1)),s}function Ew(i,n,t){return i.some(function(s){return t(s,n)})}function _I(i,n,t){t===void 0&&(t=0);var s=Math.max(0,Math.min(i.x+i.width+t,n.x+n.width+t)-Math.max(i.x-t,n.x-t)),l=Math.max(0,Math.min(i.y+i.height+t,n.y+n.height+t)-Math.max(i.y-t,n.y-t));return s*l}function cb(i,n){return Ew(i,n,function(t,s){var l=Ba(t),f=Ba(s);return _I(l.getCanvasBBox(),f.getCanvasBBox(),2)>0})}function ww(i,n,t,s,l){var f,d;if(t.length!==0){var m=(f=t[0])===null||f===void 0?void 0:f.get("element"),x=m==null?void 0:m.geometry;if(!(!x||x.type!=="point")){var A=(0,M.CR)(x.getXYFields(),2),P=A[0],k=A[1],B=(0,E.vM)(n,function(ne){return ne.get("data")[P]}),U=[],W=l&&l.offset||((d=i[0])===null||d===void 0?void 0:d.offset)||12;(0,E.UI)((0,E.XP)(B).reverse(),function(ne){for(var de=yI(x,B[ne]);de.length;){var ve=de.shift(),$e=Ba(ve);if(Ew(U,ve,function(Ot,fr){return Ot.get("data")[P]===fr.get("data")[P]&&Ot.get("data")[k]===fr.get("data")[k]})){$e.set("visible",!1);continue}var lt=cb(U,ve),vt=!1;if(lt&&($e.attr("y",$e.attr("y")+2*W),vt=cb(U,ve)),vt){$e.set("visible",!1);continue}U.push(ve)}})}}}function xI(i,n){var t=i.getXYFields()[1],s=[],l=n.sort(function(f,d){return f.get("data")[t]-f.get("data")[t]});return l.length>0&&s.push(l.shift()),l.length>0&&s.push(l.pop()),s.push.apply(s,(0,M.ev)([],(0,M.CR)(l),!1)),s}function Cw(i,n,t){return i.some(function(s){return t(s,n)})}function bI(i,n,t){t===void 0&&(t=0);var s=Math.max(0,Math.min(i.x+i.width+t,n.x+n.width+t)-Math.max(i.x-t,n.x-t)),l=Math.max(0,Math.min(i.y+i.height+t,n.y+n.height+t)-Math.max(i.y-t,n.y-t));return s*l}function Aw(i,n){return Cw(i,n,function(t,s){var l=Ba(t),f=Ba(s);return bI(l.getCanvasBBox(),f.getCanvasBBox(),2)>0})}function SI(i,n,t,s,l){var f,d;if(t.length!==0){var m=(f=t[0])===null||f===void 0?void 0:f.get("element"),x=m==null?void 0:m.geometry;if(!(!x||["path","line","area"].indexOf(x.type)<0)){var A=(0,M.CR)(x.getXYFields(),2),P=A[0],k=A[1],B=(0,E.vM)(n,function(ne){return ne.get("data")[P]}),U=[],W=l&&l.offset||((d=i[0])===null||d===void 0?void 0:d.offset)||12;(0,E.UI)((0,E.XP)(B).reverse(),function(ne){for(var de=xI(x,B[ne]);de.length;){var ve=de.shift(),$e=Ba(ve);if(Cw(U,ve,function(Ot,fr){return Ot.get("data")[P]===fr.get("data")[P]&&Ot.get("data")[k]===fr.get("data")[k]})){$e.set("visible",!1);continue}var lt=Aw(U,ve),vt=!1;if(lt&&($e.attr("y",$e.attr("y")+2*W),vt=Aw(U,ve)),vt){$e.set("visible",!1);continue}U.push(ve)}})}}}var j_;function Tw(){return j_||(j_=document.createElement("canvas").getContext("2d")),j_}var ly=(0,E.HP)(function(i,n){n===void 0&&(n={});var t=n.fontSize,s=n.fontFamily,l=n.fontWeight,f=n.fontStyle,d=n.fontVariant,m=Tw();return m.font=[f,d,l,"".concat(t,"px"),s].join(" "),m.measureText((0,E.HD)(i)?i:"").width},function(i,n){return n===void 0&&(n={}),(0,M.ev)([i],(0,M.CR)((0,E.VO)(n)),!1).join("")}),Mw=function(i,n,t){var s=16,l=ly("...",t),f;(0,E.HD)(i)?f=i:f=(0,E.BB)(i);var d=n,m=[],x,A;if(ly(i,t)<=n)return i;for(;x=f.substr(0,s),A=ly(x,t),!(A+l>d&&A>d);)if(m.push(x),d-=A,f=f.substr(s),!f)return m.join("");for(;x=f.substr(0,1),A=ly(x,t),!(A+l>d);)if(m.push(x),d-=A,f=f.substr(1),!f)return m.join("");return"".concat(m.join(""),"...")};function Vm(i,n,t,s,l){if(!(n.length<=0)){var f=(l==null?void 0:l.direction)||["top","right","bottom","left"],d=(l==null?void 0:l.action)||"translate",m=(l==null?void 0:l.margin)||0,x=n[0].get("coordinate");if(x){var A=mm(x,m),P=A.minX,k=A.minY,B=A.maxX,U=A.maxY;(0,E.S6)(n,function(W){var ne=W.getCanvasBBox(),de=ne.minX,ve=ne.minY,$e=ne.maxX,lt=ne.maxY,vt=ne.x,Ot=ne.y,fr=ne.width,Tr=ne.height,zr=vt,cn=Ot;if(f.indexOf("left")>=0&&(de<P||$e<P)&&(zr=P),f.indexOf("top")>=0&&(ve<k||lt<k)&&(cn=k),f.indexOf("right")>=0&&(de>B?zr=B-fr:$e>B&&(zr=zr-($e-B))),f.indexOf("bottom")>=0&&(ve>U?cn=U-Tr:lt>U&&(cn=cn-(lt-U))),zr!==vt||cn!==Ot){var Qr=zr-vt;if(d==="translate")Nu(W,Qr,cn-Ot);else if(d==="ellipsis"){var On=W.findAll(function(Qn){return Qn.get("type")==="text"});On.forEach(function(Qn){var Hi=(0,E.ei)(Qn.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),oa=Qn.getCanvasBBox(),eo=Mw(Qn.attr("text"),oa.width-Math.abs(Qr),Hi);Qn.attr("text",eo)})}else W.hide()}})}}}function Rw(i,n,t){var s={fillOpacity:(0,E.UM)(i.attr("fillOpacity"))?1:i.attr("fillOpacity"),strokeOpacity:(0,E.UM)(i.attr("strokeOpacity"))?1:i.attr("strokeOpacity"),opacity:(0,E.UM)(i.attr("opacity"))?1:i.attr("opacity")};i.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),i.animate(s,n)}function EI(i,n,t){var s={fillOpacity:0,strokeOpacity:0,opacity:0},l=n.easing,f=n.duration,d=n.delay;i.animate(s,f,l,function(){i.remove(!0)},d)}function Iw(i,n,t){var s,l=(0,M.CR)(n,2),f=l[0],d=l[1];return i.applyToMatrix([f,d,1]),t==="x"?(i.setMatrix(mo.vs(i.getMatrix(),[["t",-f,-d],["s",.01,1],["t",f,d]])),s=mo.vs(i.getMatrix(),[["t",-f,-d],["s",100,1],["t",f,d]])):t==="y"?(i.setMatrix(mo.vs(i.getMatrix(),[["t",-f,-d],["s",1,.01],["t",f,d]])),s=mo.vs(i.getMatrix(),[["t",-f,-d],["s",1,100],["t",f,d]])):t==="xy"&&(i.setMatrix(mo.vs(i.getMatrix(),[["t",-f,-d],["s",.01,.01],["t",f,d]])),s=mo.vs(i.getMatrix(),[["t",-f,-d],["s",100,100],["t",f,d]])),s}function W_(i,n,t,s,l){var f=t.start,d=t.end,m=t.getWidth(),x=t.getHeight(),A,P;l==="y"?(A=f.x+m/2,P=s.y<f.y?s.y:f.y):l==="x"?(A=s.x>f.x?s.x:f.x,P=f.y+x/2):l==="xy"&&(t.isPolar?(A=t.getCenter().x,P=t.getCenter().y):(A=(f.x+d.x)/2,P=(f.y+d.y)/2));var k=Iw(i,[A,P],l);i.animate({matrix:k},n)}function wI(i,n,t){var s=t.coordinate,l=t.minYPoint;W_(i,n,s,l,"x")}function CI(i,n,t){var s=t.coordinate,l=t.minYPoint;W_(i,n,s,l,"y")}function AI(i,n,t){var s=t.coordinate,l=t.minYPoint;W_(i,n,s,l,"xy")}function Pw(i,n,t){var s=i.getTotalLength();i.attr("lineDash",[s]),i.animate(function(l){return{lineDashOffset:(1-l)*s}},n)}function Ow(i,n,t){var s=t.toAttrs,l=s.x,f=s.y;delete s.x,delete s.y,i.attr(s),i.animate({x:l,y:f},n)}function kw(i,n,t){var s=i.getBBox(),l=i.get("origin").mappingData,f=l.points,d=f[0].y-f[1].y>0?s.maxX:s.minX,m=(s.minY+s.maxY)/2;i.applyToMatrix([d,m,1]);var x=mo.vs(i.getMatrix(),[["t",-d,-m],["s",.01,1],["t",d,m]]);i.setMatrix(x),i.animate({matrix:mo.vs(i.getMatrix(),[["t",-d,-m],["s",100,1],["t",d,m]])},n)}function fb(i,n,t){var s=i.getBBox(),l=i.get("origin").mappingData,f=(s.minX+s.maxX)/2,d=l.points,m=d[0].y-d[1].y<=0?s.maxY:s.minY;i.applyToMatrix([f,m,1]);var x=mo.vs(i.getMatrix(),[["t",-f,-m],["s",1,.01],["t",f,m]]);i.setMatrix(x),i.animate({matrix:mo.vs(i.getMatrix(),[["t",-f,-m],["s",1,100],["t",f,m]])},n)}function hb(i,n){var t,s=Vp(i,n),l=s.startAngle,f=s.endAngle;return!(0,E.vQ)(l,-Math.PI*.5)&&l<-Math.PI*.5&&(l+=Math.PI*2),!(0,E.vQ)(f,-Math.PI*.5)&&f<-Math.PI*.5&&(f+=Math.PI*2),n[5]===0&&(t=(0,M.CR)([f,l],2),l=t[0],f=t[1]),(0,E.vQ)(l,Math.PI*1.5)&&(l=Math.PI*-.5),(0,E.vQ)(f,Math.PI*-.5)&&!(0,E.vQ)(l,f)&&(f=Math.PI*1.5),{startAngle:l,endAngle:f}}function Fw(i){var n;return i[0]==="M"||i[0]==="L"?n=[i[1],i[2]]:(i[0]==="a"||i[0]==="A"||i[0]==="C")&&(n=[i[i.length-2],i[i.length-1]]),n}function Dw(i){var n,t,s,l=i.filter(function(lt){return lt[0]==="A"||lt[0]==="a"});if(l.length===0)return{startAngle:0,endAngle:0,radius:0,innerRadius:0};var f=l[0],d=l.length>1?l[1]:l[0],m=i.indexOf(f),x=i.indexOf(d),A=Fw(i[m-1]),P=Fw(i[x-1]),k=hb(A,f),B=k.startAngle,U=k.endAngle,W=hb(P,d),ne=W.startAngle,de=W.endAngle;(0,E.vQ)(B,ne)&&(0,E.vQ)(U,de)?(t=B,s=U):(t=Math.min(B,ne),s=Math.max(U,de));var ve=f[1],$e=l[l.length-1][1];return ve<$e?(n=(0,M.CR)([$e,ve],2),ve=n[0],$e=n[1]):ve===$e&&($e=0),{startAngle:t,endAngle:s,radius:ve,innerRadius:$e}}function TI(i,n,t){var s=t.toAttrs,l=t.coordinate,f=s.path||[],d=f.map(function($e){return $e[0]});if(!(f.length<1)){var m=Dw(f),x=m.startAngle,A=m.endAngle,P=m.radius,k=m.innerRadius,B=Dw(i.attr("path")),U=B.startAngle,W=B.endAngle,ne=l.getCenter(),de=x-U,ve=A-W;if(de===0&&ve===0){i.attr("path",f);return}i.animate(function($e){var lt=U+$e*de,vt=W+$e*ve;return(0,M.pi)((0,M.pi)({},s),{path:(0,E.Xy)(d,["M","A","A","Z"])?Zf(ne.x,ne.y,P,lt,vt):mh(ne.x,ne.y,P,lt,vt,k)})},(0,M.pi)((0,M.pi)({},n),{callback:function(){i.attr("path",f),(0,E.mf)(n.callback)&&n.callback()}}))}}function Lw(i,n,t){var s=Rv(t.coordinate,20),l=s.type,f=s.startState,d=s.endState,m=i.setClip({type:l,attrs:f});t.toAttrs&&i.attr(t.toAttrs),m.animate(d,(0,M.pi)((0,M.pi)({},n),{callback:function(){i&&!i.get("destroyed")&&i.set("clipShape",null),m.remove(!0),(0,E.mf)(n.callback)&&n.callback()}}))}function pb(i,n,t){if(i.isGroup())(0,E.S6)(i.getChildren(),function(m){pb(m,n,t)});else{var s=i.getBBox(),l=(s.minX+s.maxX)/2,f=(s.minY+s.maxY)/2;if(i.applyToMatrix([l,f,1]),t==="zoomIn"){var d=mo.vs(i.getMatrix(),[["t",-l,-f],["s",.01,.01],["t",l,f]]);i.setMatrix(d),i.animate({matrix:mo.vs(i.getMatrix(),[["t",-l,-f],["s",100,100],["t",l,f]])},n)}else i.animate({matrix:mo.vs(i.getMatrix(),[["t",-l,-f],["s",.01,.01],["t",l,f]])},(0,M.pi)((0,M.pi)({},n),{callback:function(){i.remove(!0),(0,E.mf)(n.callback)&&n.callback()}}))}}function Bw(i,n,t){pb(i,n,"zoomIn")}function MI(i,n,t){pb(i,n,"zoomOut")}function iv(i){return[me.TOP,me.BOTTOM].includes(i)?{offsetX:0,offsetY:i===me.TOP?-8:8,style:{textAlign:"center",textBaseline:i===me.TOP?"bottom":"top"}}:[me.LEFT,me.RIGHT].includes(i)?{offsetX:i===me.LEFT?-8:8,offsetY:0,style:{textAlign:i===me.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function Fg(i,n,t){return{x:i.x+n*Math.cos(t),y:i.y+n*Math.sin(t)}}var Nw=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){return(0,E.b$)({},i.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:i.prototype.getDefaultTitleCfg.call(this)})},n.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.getRegion=function(t,s){var l=.5,f={x:.5,y:.5},d=Math.PI*2/t,m=-1*Math.PI/2+d*s,x=l/(1+1/Math.sin(d/2)),A=Fg(f,l-x,m),P=Math.PI*5/4,k=Math.PI*1/4;return{start:Fg(A,x,P),end:Fg(A,x,k)}},n.prototype.afterEachView=function(t,s){this.processAxis(t,s)},n.prototype.beforeEachView=function(t,s){},n.prototype.generateFacets=function(t){var s=this,l=this.cfg,f=l.fields,d=l.type,m=(0,M.CR)(f,1),x=m[0];if(!x)throw new Error("No `fields` specified!");var A=this.getFieldValues(t,x),P=A.length,k=[];return A.forEach(function(B,U){var W=[{field:x,value:B,values:A}],ne=(0,E.hX)(t,s.getFacetDataFilter(W)),de={type:d,data:ne,region:s.getRegion(P,U),columnValue:B,columnField:x,columnIndex:U,columnValuesLength:P,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};k.push(de)}),k},n.prototype.getXAxisOption=function(t,s,l,f){return l},n.prototype.getYAxisOption=function(t,s,l,f){return l},n.prototype.renderTitle=function(){var t=this;(0,E.S6)(this.facets,function(s){var l=s.columnValue,f=s.view,d=(0,E.U2)(t.cfg.title,"formatter"),m=(0,E.b$)({position:["50%","0%"],content:d?d(l):l},iv(me.TOP),t.cfg.title);f.annotation().text(m)})},n}(zn),db=Nw,y4=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){return(0,E.b$)({},i.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:i.prototype.getDefaultTitleCfg.call(this)})},n.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.afterEachView=function(t,s){this.processAxis(t,s)},n.prototype.beforeEachView=function(t,s){},n.prototype.generateFacets=function(t){var s=this,l=this.cfg.fields,f=this.cfg.cols,d=(0,M.CR)(l,1),m=d[0];if(!m)throw new Error("No `fields` specified!");var x=this.getFieldValues(t,m),A=x.length;f=f||A;var P=this.getPageCount(A,f),k=[];return x.forEach(function(B,U){var W=s.getRowCol(U,f),ne=W.row,de=W.col,ve=[{field:m,value:B,values:x}],$e=(0,E.hX)(t,s.getFacetDataFilter(ve)),lt={type:s.cfg.type,data:$e,region:s.getRegion(P,f,de,ne),columnValue:B,rowValue:B,columnField:m,rowField:null,columnIndex:de,rowIndex:ne,columnValuesLength:f,rowValuesLength:P,total:A};k.push(lt)}),k},n.prototype.getXAxisOption=function(t,s,l,f){return f.rowIndex!==f.rowValuesLength-1&&f.columnValuesLength*f.rowIndex+f.columnIndex+1+f.columnValuesLength<=f.total?(0,M.pi)((0,M.pi)({},l),{label:null,title:null}):l},n.prototype.getYAxisOption=function(t,s,l,f){return f.columnIndex!==0?(0,M.pi)((0,M.pi)({},l),{title:null,label:null}):l},n.prototype.renderTitle=function(){var t=this;(0,E.S6)(this.facets,function(s){var l=s.columnValue,f=s.view,d=(0,E.U2)(t.cfg.title,"formatter"),m=(0,E.b$)({position:["50%","0%"],content:d?d(l):l},iv(me.TOP),t.cfg.title);f.annotation().text(m)})},n.prototype.getPageCount=function(t,s){return Math.floor((t+s-1)/s)},n.prototype.getRowCol=function(t,s){var l=Math.floor(t/s),f=t%s;return{row:l,col:f}},n}(zn),Wf=y4,RI=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){return(0,E.b$)({},i.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:(0,M.pi)({},i.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,M.pi)({},i.prototype.getDefaultTitleCfg.call(this))})},n.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.afterEachView=function(t,s){this.processAxis(t,s)},n.prototype.beforeEachView=function(t,s){},n.prototype.generateFacets=function(t){for(var s=this.cfg,l=s.fields,f=s.type,d=l.length,m=d,x=[],A=0;A<m;A++)for(var P=l[A],k=0;k<d;k++){var B=l[k],U={type:f,data:t,region:this.getRegion(d,m,A,k),columnValue:P,rowValue:B,columnField:P,rowField:B,columnIndex:A,rowIndex:k,columnValuesLength:m,rowValuesLength:d};x.push(U)}return x},n.prototype.getXAxisOption=function(t,s,l,f){return f.rowIndex!==f.rowValuesLength-1?(0,M.pi)((0,M.pi)({},l),{label:null,title:null}):l},n.prototype.getYAxisOption=function(t,s,l,f){return f.columnIndex!==0?(0,M.pi)((0,M.pi)({},l),{title:null,label:null}):l},n.prototype.renderTitle=function(){var t=this;(0,E.S6)(this.facets,function(s,l){var f=s.columnIndex,d=s.rowIndex,m=s.columnValuesLength,x=s.rowValuesLength,A=s.columnValue,P=s.rowValue,k=s.view;if(d===0){var B=(0,E.U2)(t.cfg.columnTitle,"formatter"),U=(0,E.b$)({position:["50%","0%"],content:B?B(A):A},iv(me.TOP),t.cfg.columnTitle);k.annotation().text(U)}if(f===m-1){var B=(0,E.U2)(t.cfg.rowTitle,"formatter"),U=(0,E.b$)({position:["100%","50%"],content:B?B(P):P},iv(me.RIGHT),t.cfg.rowTitle);k.annotation().text(U)}})},n}(zn),II=RI,cy=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){return(0,E.b$)({},i.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:i.prototype.getDefaultTitleCfg.call(this),transpose:!1})},n.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.beforeEachView=function(t,s){this.cfg.transpose?s.columnIndex%2===0?t.coordinate().transpose().reflect("x"):t.coordinate().transpose():s.rowIndex%2!==0&&t.coordinate().reflect("y")},n.prototype.afterEachView=function(t,s){this.processAxis(t,s)},n.prototype.generateFacets=function(t){var s=this,l=(0,M.CR)(this.cfg.fields,1),f=l[0],d=[],m=1,x=1,A=[""],P=[""],k,B;return this.cfg.transpose?(k=f,A=this.getFieldValues(t,k).slice(0,2),m=A.length):(B=f,P=this.getFieldValues(t,B).slice(0,2),x=P.length),A.forEach(function(U,W){P.forEach(function(ne,de){var ve=[{field:k,value:U,values:A},{field:B,value:ne,values:P}],$e=(0,E.hX)(t,s.getFacetDataFilter(ve)),lt={type:s.cfg.type,data:$e,region:s.getRegion(x,m,W,de),columnValue:U,rowValue:ne,columnField:k,rowField:B,columnIndex:W,rowIndex:de,columnValuesLength:m,rowValuesLength:x};d.push(lt)})}),d},n.prototype.getXAxisOption=function(t,s,l,f){return f.columnIndex===1||f.rowIndex===1?(0,M.pi)((0,M.pi)({},l),{label:null,title:null}):l},n.prototype.getYAxisOption=function(t,s,l,f){return l},n.prototype.renderTitle=function(){var t=this;(0,E.S6)(this.facets,function(s,l){var f=s.columnValue,d=s.rowValue,m=s.view,x=(0,E.U2)(t.cfg.title,"formatter");if(t.cfg.transpose){var A=(0,E.b$)({position:["50%","0%"],content:x?x(f):f},iv(me.TOP),t.cfg.title);m.annotation().text(A)}else{var A=(0,E.b$)({position:["100%","50%"],content:x?x(d):d},iv(me.RIGHT),t.cfg.title);m.annotation().text(A)}})},n}(zn),PI=cy,_4=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.afterEachView=function(t,s){this.processAxis(t,s)},n.prototype.beforeEachView=function(t,s){},n.prototype.getDefaultCfg=function(){return(0,E.b$)({},i.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:(0,M.pi)({},i.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,M.pi)({},i.prototype.getDefaultTitleCfg.call(this))})},n.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.generateFacets=function(t){var s=this,l=(0,M.CR)(this.cfg.fields,2),f=l[0],d=l[1],m=[],x=1,A=1,P=[""],k=[""];return f&&(P=this.getFieldValues(t,f),x=P.length),d&&(k=this.getFieldValues(t,d),A=k.length),P.forEach(function(B,U){k.forEach(function(W,ne){var de=[{field:f,value:B,values:P},{field:d,value:W,values:k}],ve=(0,E.hX)(t,s.getFacetDataFilter(de)),$e={type:s.cfg.type,data:ve,region:s.getRegion(A,x,U,ne),columnValue:B,rowValue:W,columnField:f,rowField:d,columnIndex:U,rowIndex:ne,columnValuesLength:x,rowValuesLength:A};m.push($e)})}),m},n.prototype.renderTitle=function(){var t=this;(0,E.S6)(this.facets,function(s,l){var f=s.columnIndex,d=s.rowIndex,m=s.columnValuesLength,x=s.columnValue,A=s.rowValue,P=s.view;if(d===0){var k=(0,E.U2)(t.cfg.columnTitle,"formatter"),B=(0,E.b$)({position:["50%","0%"],content:k?k(x):x},iv(me.TOP),t.cfg.columnTitle);P.annotation().text(B)}if(f===m-1){var k=(0,E.U2)(t.cfg.rowTitle,"formatter"),B=(0,E.b$)({position:["100%","50%"],content:k?k(A):A},iv(me.RIGHT),t.cfg.rowTitle);P.annotation().text(B)}})},n.prototype.getXAxisOption=function(t,s,l,f){return f.rowIndex!==f.rowValuesLength-1?(0,M.pi)((0,M.pi)({},l),{title:null,label:null}):f.columnIndex!==Math.floor((f.columnValuesLength-1)/2)?(0,M.pi)((0,M.pi)({},l),{title:null}):l},n.prototype.getYAxisOption=function(t,s,l,f){return f.columnIndex!==0?(0,M.pi)((0,M.pi)({},l),{title:null,label:null}):f.rowIndex!==Math.floor((f.rowValuesLength-1)/2)?(0,M.pi)((0,M.pi)({},l),{title:null}):l},n}(zn),zw=_4,OI=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.afterChartRender=function(){t.facets&&t.cfg.line&&(t.container.clear(),t.drawLines(t.facets))},t}return n.prototype.afterEachView=function(t,s){this.processAxis(t,s)},n.prototype.beforeEachView=function(t,s){},n.prototype.init=function(){i.prototype.init.call(this),this.view.on(Le.AFTER_RENDER,this.afterChartRender)},n.prototype.getDefaultCfg=function(){return(0,E.b$)({},i.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:i.prototype.getDefaultTitleCfg.call(this)})},n.prototype.generateFacets=function(t){var s=this.cfg.fields;if(!s.length)throw new Error("Please specify for the fields for rootFacet!");var l=[],f={type:this.cfg.type,data:t,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return l.push(f),f.children=this.getChildFacets(t,1,l),this.setRegion(l),l},n.prototype.setRegion=function(t){var s=this;this.forceColIndex(t),t.forEach(function(l){l.region=s.getRegion(l.rowValuesLength,l.columnValuesLength,l.columnIndex,l.rowIndex)})},n.prototype.getRegion=function(t,s,l,f){var d=1/s,m=1/t,x={x:d*l,y:m*f},A={x:x.x+d,y:x.y+m*2/3};return{start:x,end:A}},n.prototype.forceColIndex=function(t){var s,l,f=this,d=[],m=0;t.forEach(function(W){f.isLeaf(W)&&(d.push(W),W.columnIndex=m,m++)}),d.forEach(function(W){W.columnValuesLength=d.length});for(var x=this.cfg.fields.length,A=x-1;A>=0;A--){var P=this.getFacetsByLevel(t,A);try{for(var k=(s=void 0,(0,M.XA)(P)),B=k.next();!B.done;B=k.next()){var U=B.value;this.isLeaf(U)||(U.originColIndex=U.columnIndex,U.columnIndex=this.getRegionIndex(U.children),U.columnValuesLength=d.length)}}catch(W){s={error:W}}finally{try{B&&!B.done&&(l=k.return)&&l.call(k)}finally{if(s)throw s.error}}}},n.prototype.getFacetsByLevel=function(t,s){var l=[];return t.forEach(function(f){f.rowIndex===s&&l.push(f)}),l},n.prototype.getRegionIndex=function(t){var s=t[0],l=t[t.length-1];return(l.columnIndex-s.columnIndex)/2+s.columnIndex},n.prototype.isLeaf=function(t){return!t.children||!t.children.length},n.prototype.getRows=function(){return this.cfg.fields.length+1},n.prototype.getChildFacets=function(t,s,l){var f=this,d=this.cfg.fields,m=d.length;if(!(m<s)){var x=[],A=d[s-1],P=this.getFieldValues(t,A);return P.forEach(function(k,B){var U=[{field:A,value:k,values:P}],W=t.filter(f.getFacetDataFilter(U));if(W.length){var ne={type:f.cfg.type,data:W,region:null,columnValue:k,rowValue:"",columnField:A,rowField:"",columnIndex:B,rowValuesLength:f.getRows(),columnValuesLength:1,rowIndex:s,children:f.getChildFacets(W,s+1,l)};x.push(ne),l.push(ne)}}),x}},n.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.renderTitle=function(){var t=this;(0,E.S6)(this.facets,function(s){var l=s.columnValue,f=s.view,d=(0,E.U2)(t.cfg.title,"formatter"),m=(0,E.b$)({position:["50%","0%"],content:d?d(l):l},iv(me.TOP),t.cfg.title);f.annotation().text(m)})},n.prototype.drawLines=function(t){var s=this;t.forEach(function(l){if(!s.isLeaf(l)){var f=l.children;s.addFacetLines(l,f)}})},n.prototype.addFacetLines=function(t,s){var l=this,f=t.view,d=f.coordinateBBox,m={x:d.x+d.width/2,y:d.y+d.height};s.forEach(function(x){var A=x.view.coordinateBBox,P={x:A.bl.x+(A.tr.x-A.bl.x)/2,y:A.tr.y},k={x:m.x,y:m.y+(P.y-m.y)/2},B={x:P.x,y:k.y};l.drawLine([m,k,B,P])})},n.prototype.getPath=function(t){var s=[],l=this.cfg.line.smooth;return l?(s.push(["M",t[0].x,t[0].y]),s.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y])):t.forEach(function(f,d){d===0?s.push(["M",f.x,f.y]):s.push(["L",f.x,f.y])}),s},n.prototype.drawLine=function(t){var s=this.getPath(t),l=this.cfg.line.style;this.container.addShape("path",{attrs:(0,E.f0)({path:s},l)})},n.prototype.getXAxisOption=function(t,s,l,f){return f.rowIndex!==f.rowValuesLength-1?(0,M.pi)((0,M.pi)({},l),{title:null,label:null}):l},n.prototype.getYAxisOption=function(t,s,l,f){return f.originColIndex!==0&&f.columnIndex!==0?(0,M.pi)((0,M.pi)({},l),{title:null,label:null}):l},n}(zn),x4=OI;function Uw(i){var n=(0,M.ev)([],(0,M.CR)(i),!1);n.sort(function(s,l){return s-l});var t=n.length;return t===0?0:t%2===1?n[(t-1)/2]:(n[t/2]+n[t/2-1])/2}function b4(i){var n=(0,E.u4)(i,function(t,s){return t+=isNaN(s)||!(0,E.hj)(s)?0:s},0);return i.length===0?0:n/i.length}function G_(i,n){if(!n)return null;var t;switch(i){case"start":return 0;case"center":return .5;case"end":return 1;case"median":{t=n.isCategory?Uw(n.values.map(function(s,l){return l})):Uw(n.values);break}case"mean":{t=n.isCategory?(n.values.length-1)/2:b4(n.values);break}case"min":t=n.isCategory?0:n[i];break;case"max":t=n.isCategory?n.values.length-1:n[i];break;default:t=i;break}return n.scale(t)}var X_=["regionFilter","shape"],S4=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.cache=new Map,s.foregroundContainer=s.view.getLayer(fe.FORE).addGroup(),s.backgroundContainer=s.view.getLayer(fe.BG).addGroup(),s.option=[],s}return Object.defineProperty(n.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n.prototype.layout=function(){this.update()},n.prototype.render=function(){},n.prototype.update=function(){var t=this;this.onAfterRender(function(){var l=new Map;(0,E.S6)(t.option,function(f){if((0,E.q9)(X_,f.type)){var d=t.updateOrCreate(f);d&&l.set(t.getCacheKey(f),d)}}),t.cache=t.syncCache(l)});var s=new Map;(0,E.S6)(this.option,function(l){if(!(0,E.q9)(X_,l.type)){var f=t.updateOrCreate(l);f&&s.set(t.getCacheKey(l),f)}}),this.cache=this.syncCache(s)},n.prototype.clear=function(t){t===void 0&&(t=!1),i.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),t&&(this.option=[])},n.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},n.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(s){t.push(s)}),t},n.prototype.clearComponents=function(){this.getComponents().forEach(function(t){t.component.destroy()}),this.cache.clear()},n.prototype.onAfterRender=function(t){var s=!1;this.view.getOptions().animate&&this.view.geometries.forEach(function(l){l.animateOption&&(l.once(tt.AFTER_DRAW_ANIMATE,function(){t()}),s=!0)}),s||this.view.getRootView().once(Le.AFTER_RENDER,function(){t()})},n.prototype.createAnnotation=function(t){var s=t.type,l=X[(0,E.jC)(s)];if(l){var f=this.getAnnotationTheme(s),d=this.getAnnotationCfg(s,t,f);if(!d)return null;var m=new l(d);return{component:m,layer:this.isTop(d)?fe.FORE:fe.BG,direction:me.NONE,type:ke.ANNOTATION,extra:t}}},n.prototype.annotation=function(t){this.option.push(t)},n.prototype.arc=function(t){return this.annotation((0,M.pi)({type:"arc"},t)),this},n.prototype.image=function(t){return this.annotation((0,M.pi)({type:"image"},t)),this},n.prototype.line=function(t){return this.annotation((0,M.pi)({type:"line"},t)),this},n.prototype.region=function(t){return this.annotation((0,M.pi)({type:"region"},t)),this},n.prototype.text=function(t){return this.annotation((0,M.pi)({type:"text"},t)),this},n.prototype.dataMarker=function(t){return this.annotation((0,M.pi)({type:"dataMarker"},t)),this},n.prototype.dataRegion=function(t){this.annotation((0,M.pi)({type:"dataRegion"},t))},n.prototype.regionFilter=function(t){this.annotation((0,M.pi)({type:"regionFilter"},t))},n.prototype.shape=function(t){this.annotation((0,M.pi)({type:"shape"},t))},n.prototype.html=function(t){this.annotation((0,M.pi)({type:"html"},t))},n.prototype.parsePosition=function(t){var s,l,f=this.view.getXScale(),d=this.view.getScalesByDim("y"),m=(0,E.mf)(t)?t.call(null,f,d):t,x=0,A=0;if((0,E.kJ)(m)){var P=(0,M.CR)(m,2),k=P[0],B=P[1];if((0,E.HD)(k)&&k.indexOf("%")!==-1&&!isNaN(k.slice(0,-1)))return this.parsePercentPosition(m);x=G_(k,f),A=G_(B,Object.values(d)[0])}else if(!(0,E.UM)(m))try{for(var U=(0,M.XA)((0,E.XP)(m)),W=U.next();!W.done;W=U.next()){var ne=W.value,de=m[ne];ne===f.field&&(x=G_(de,f)),d[ne]&&(A=G_(de,d[ne]))}}catch(ve){s={error:ve}}finally{try{W&&!W.done&&(l=U.return)&&l.call(U)}finally{if(s)throw s.error}}return isNaN(x)||isNaN(A)?null:this.view.getCoordinate().convert({x,y:A})},n.prototype.getRegionPoints=function(t,s){var l=this,f=this.view.getXScale(),d=this.view.getScalesByDim("y"),m=Object.values(d)[0],x=f.field,A=this.view.getData(),P=(0,E.kJ)(t)?t[0]:t[x],k=(0,E.kJ)(s)?s[0]:s[x],B=[],U;return(0,E.S6)(A,function(W,ne){if(W[x]===P&&(U=ne),ne>=U){var de=l.parsePosition([W[x],W[m.field]]);de&&B.push(de)}if(W[x]===k)return!1}),B},n.prototype.parsePercentPosition=function(t){var s=parseFloat(t[0])/100,l=parseFloat(t[1])/100,f=this.view.getCoordinate(),d=f.start,m=f.end,x={x:Math.min(d.x,m.x),y:Math.min(d.y,m.y)},A=f.getWidth()*s+x.x,P=f.getHeight()*l+x.y;return{x:A,y:P}},n.prototype.getCoordinateBBox=function(){var t=this.view.getCoordinate(),s=t.start,l=t.end,f=t.getWidth(),d=t.getHeight(),m={x:Math.min(s.x,l.x),y:Math.min(s.y,l.y)};return{x:m.x,y:m.y,minX:m.x,minY:m.y,maxX:m.x+f,maxY:m.y+d,width:f,height:d}},n.prototype.getAnnotationCfg=function(t,s,l){var f=this,d=this.view.getCoordinate(),m=this.view.getCanvas(),x={};if((0,E.UM)(s))return null;var A=s.start,P=s.end,k=s.position,B=this.parsePosition(A),U=this.parsePosition(P),W=this.parsePosition(k);if(["arc","image","line","region","regionFilter"].includes(t)&&(!B||!U))return null;if(["text","dataMarker","html"].includes(t)&&!W)return null;if(t==="arc"){var ne=s,de=ne.start,ve=ne.end,$e=(0,M._T)(ne,["start","end"]),lt=Vh(d,B),vt=Vh(d,U);lt>vt&&(vt=Math.PI*2+vt),x=(0,M.pi)((0,M.pi)({},$e),{center:d.getCenter(),radius:Op(d,B),startAngle:lt,endAngle:vt})}else if(t==="image"){var Ot=s,fr=Ot.start,Tr=Ot.end,$e=(0,M._T)(Ot,["start","end"]);x=(0,M.pi)((0,M.pi)({},$e),{start:B,end:U,src:s.src})}else if(t==="line"){var zr=s,cn=zr.start,Qr=zr.end,$e=(0,M._T)(zr,["start","end"]);x=(0,M.pi)((0,M.pi)({},$e),{start:B,end:U,text:(0,E.U2)(s,"text",null)})}else if(t==="region"){var On=s,Qn=On.start,Hi=On.end,$e=(0,M._T)(On,["start","end"]);x=(0,M.pi)((0,M.pi)({},$e),{start:B,end:U})}else if(t==="text"){var oa=this.view.getData(),eo=s,Nn=eo.position,Di=eo.content,$e=(0,M._T)(eo,["position","content"]),sa=Di;(0,E.mf)(Di)&&(sa=Di(oa)),x=(0,M.pi)((0,M.pi)((0,M.pi)({},W),$e),{content:sa})}else if(t==="dataMarker"){var Li=s,$i=Li.position,Da=Li.point,xo=Li.line,Bo=Li.text,oo=Li.autoAdjust,To=Li.direction,$e=(0,M._T)(Li,["position","point","line","text","autoAdjust","direction"]);x=(0,M.pi)((0,M.pi)((0,M.pi)({},$e),W),{coordinateBBox:this.getCoordinateBBox(),point:Da,line:xo,text:Bo,autoAdjust:oo,direction:To})}else if(t==="dataRegion"){var Ma=s,_l=Ma.start,xl=Ma.end,rc=Ma.region,Bo=Ma.text,nm=Ma.lineLength,$e=(0,M._T)(Ma,["start","end","region","text","lineLength"]);x=(0,M.pi)((0,M.pi)({},$e),{points:this.getRegionPoints(_l,xl),region:rc,text:Bo,lineLength:nm})}else if(t==="regionFilter"){var Pd=s,b0=Pd.start,im=Pd.end,qf=Pd.apply,Zc=Pd.color,$e=(0,M._T)(Pd,["start","end","apply","color"]),am=this.view.geometries,OS=[],om=function(Od){Od&&(Od.isGroup()?Od.getChildren().forEach(function(ng){return om(ng)}):OS.push(Od))};(0,E.S6)(am,function(Od){qf?(0,E.FX)(qf,Od.type)&&(0,E.S6)(Od.elements,function(ng){om(ng.shape)}):(0,E.S6)(Od.elements,function(ng){om(ng.shape)})}),x=(0,M.pi)((0,M.pi)({},$e),{color:Zc,shapes:OS,start:B,end:U})}else if(t==="shape"){var kS=s,p5=kS.render,S0=(0,M._T)(kS,["render"]),rx=function(v5){if((0,E.mf)(s.render))return p5(v5,f.view,{parsePosition:f.parsePosition.bind(f)})};x=(0,M.pi)((0,M.pi)({},S0),{render:rx})}else if(t==="html"){var nx=s,FS=nx.html,KB=nx.position,S0=(0,M._T)(nx,["html","position"]),d5=function(Od){return(0,E.mf)(FS)?FS(Od,f.view):FS};x=(0,M.pi)((0,M.pi)((0,M.pi)({},S0),W),{parent:m.get("el").parentNode,html:d5})}var of=(0,E.b$)({},l,(0,M.pi)((0,M.pi)({},x),{top:s.top,style:s.style,offsetX:s.offsetX,offsetY:s.offsetY}));return t!=="html"&&(of.container=this.getComponentContainer(of)),of.animate=this.view.getOptions().animate&&of.animate&&(0,E.U2)(s,"animate",of.animate),of.animateOption=(0,E.b$)({},ar,of.animateOption,s.animateOption),of},n.prototype.isTop=function(t){return(0,E.U2)(t,"top",!0)},n.prototype.getComponentContainer=function(t){return this.isTop(t)?this.foregroundContainer:this.backgroundContainer},n.prototype.getAnnotationTheme=function(t){return(0,E.U2)(this.view.getTheme(),["components","annotation",t],{})},n.prototype.updateOrCreate=function(t){var s=this.cache.get(this.getCacheKey(t));if(s){var l=t.type,f=this.getAnnotationTheme(l),d=this.getAnnotationCfg(l,t,f);d&&Rl(d,["container"]),s.component.update((0,M.pi)((0,M.pi)({},d||{}),{visible:!!d})),(0,E.q9)(X_,t.type)&&s.component.render()}else s=this.createAnnotation(t),s&&(s.component.init(),(0,E.q9)(X_,t.type)&&s.component.render());return s},n.prototype.syncCache=function(t){var s=this,l=new Map(this.cache);return t.forEach(function(f,d){l.set(d,f)}),l.forEach(function(f,d){(0,E.sE)(s.option,function(m){return d===s.getCacheKey(m)})||(f.component.destroy(),l.delete(d))}),l},n.prototype.getCacheKey=function(t){return t},n}(Se),E4=S4;function kI(i,n){var t=(0,E.b$)({},(0,E.U2)(i,["components","axis","common"]),(0,E.U2)(i,["components","axis",n]));return(0,E.U2)(t,["grid"],{})}function $_(i,n,t,s){var l=[],f=n.getTicks();return i.isPolar&&f.push({value:1,text:"",tickValue:""}),f.reduce(function(d,m,x){var A=m.value;if(s)l.push({points:[i.convert(t==="y"?{x:0,y:A}:{x:A,y:0}),i.convert(t==="y"?{x:1,y:A}:{x:A,y:1})]});else if(x){var P=d.value,k=(P+A)/2;l.push({points:[i.convert(t==="y"?{x:0,y:k}:{x:k,y:0}),i.convert(t==="y"?{x:1,y:k}:{x:k,y:1})]})}return m},f[0]),l}function Y_(i,n,t,s,l){var f=n.values.length,d=[],m=t.getTicks();return m.reduce(function(x,A){var P=x?x.value:A.value,k=A.value,B=(P+k)/2;return l==="x"?d.push({points:[i.convert({x:s?k:B,y:0}),i.convert({x:s?k:B,y:1})]}):d.push({points:(0,E.UI)(Array(f+1),function(U,W){return i.convert({x:W/f,y:s?k:B})})}),A},m[0]),d}function FI(i,n){var t=(0,E.U2)(n,"grid");if(t===null)return!1;var s=(0,E.U2)(i,"grid");return!(t===void 0&&s===null)}var Vv=["container"],DI=(0,M.pi)((0,M.pi)({},ar),{appear:null}),LI=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.cache=new Map,s.gridContainer=s.view.getLayer(fe.BG).addGroup(),s.gridForeContainer=s.view.getLayer(fe.FORE).addGroup(),s.axisContainer=s.view.getLayer(fe.BG).addGroup(),s.axisForeContainer=s.view.getLayer(fe.FORE).addGroup(),s}return Object.defineProperty(n.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n.prototype.render=function(){this.update()},n.prototype.layout=function(){var t=this,s=this.view.getCoordinate();(0,E.S6)(this.getComponents(),function(l){var f=l.component,d=l.direction,m=l.type,x=l.extra,A=x.dim,P=x.scale,k=x.alignTick,B;if(m===ke.AXIS)s.isPolar?A==="x"?B=s.isTransposed?Hh(s,d):wn(s):A==="y"&&(B=s.isTransposed?wn(s):Hh(s,d)):B=Hh(s,d);else if(m===ke.GRID)if(s.isPolar){var U=void 0;s.isTransposed?U=A==="x"?Y_(s,t.view.getYScales()[0],P,k,A):$_(s,P,A,k):U=A==="x"?$_(s,P,A,k):Y_(s,t.view.getXScale(),P,k,A),B={items:U,center:t.view.getCoordinate().getCenter()}}else B={items:$_(s,P,A,k)};f.update(B)})},n.prototype.update=function(){this.option=this.view.getOptions().axes;var t=new Map;this.updateXAxes(t),this.updateYAxes(t);var s=new Map;this.cache.forEach(function(l,f){t.has(f)?s.set(f,l):l.component.destroy()}),this.cache=s},n.prototype.clear=function(){i.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.gridForeContainer.clear(),this.axisContainer.clear(),this.axisForeContainer.clear()},n.prototype.destroy=function(){i.prototype.destroy.call(this),this.gridContainer.remove(!0),this.gridForeContainer.remove(!0),this.axisContainer.remove(!0),this.axisForeContainer.remove(!0)},n.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(s){t.push(s)}),t},n.prototype.updateXAxes=function(t){var s=this.view.getXScale();if(!(!s||s.isIdentity)){var l=un(this.option,s.field);if(l!==!1){var f=Yr(l,me.BOTTOM),d=fe.BG,m="x",x=this.view.getCoordinate(),A=this.getId("axis",s.field),P=this.getId("grid",s.field);if(x.isRect){var k=this.cache.get(A);if(k){var B=this.getLineAxisCfg(s,l,f);Rl(B,Vv),k.component.update(B),t.set(A,k)}else k=this.createLineAxis(s,l,d,f,m),this.cache.set(A,k),t.set(A,k);var U=this.cache.get(P);if(U){var B=this.getLineGridCfg(s,l,f,m);Rl(B,Vv),U.component.update(B),t.set(P,U)}else U=this.createLineGrid(s,l,d,f,m),U&&(this.cache.set(P,U),t.set(P,U))}else if(x.isPolar){var k=this.cache.get(A);if(k){var B=x.isTransposed?this.getLineAxisCfg(s,l,me.RADIUS):this.getCircleAxisCfg(s,l,f);Rl(B,Vv),k.component.update(B),t.set(A,k)}else{if(x.isTransposed){if((0,E.o8)(l))return;k=this.createLineAxis(s,l,d,me.RADIUS,m)}else k=this.createCircleAxis(s,l,d,f,m);this.cache.set(A,k),t.set(A,k)}var U=this.cache.get(P);if(U){var B=x.isTransposed?this.getCircleGridCfg(s,l,me.RADIUS,m):this.getLineGridCfg(s,l,me.CIRCLE,m);Rl(B,Vv),U.component.update(B),t.set(P,U)}else{if(x.isTransposed){if((0,E.o8)(l))return;U=this.createCircleGrid(s,l,d,me.RADIUS,m)}else U=this.createLineGrid(s,l,d,me.CIRCLE,m);U&&(this.cache.set(P,U),t.set(P,U))}}}}},n.prototype.updateYAxes=function(t){var s=this,l=this.view.getYScales();(0,E.S6)(l,function(f,d){if(!(!f||f.isIdentity)){var m=f.field,x=un(s.option,m);if(x!==!1){var A=fe.BG,P="y",k=s.getId("axis",m),B=s.getId("grid",m),U=s.view.getCoordinate();if(U.isRect){var W=Yr(x,d===0?me.LEFT:me.RIGHT),ne=s.cache.get(k);if(ne){var de=s.getLineAxisCfg(f,x,W);Rl(de,Vv),ne.component.update(de),t.set(k,ne)}else ne=s.createLineAxis(f,x,A,W,P),s.cache.set(k,ne),t.set(k,ne);var ve=s.cache.get(B);if(ve){var de=s.getLineGridCfg(f,x,W,P);Rl(de,Vv),ve.component.update(de),t.set(B,ve)}else ve=s.createLineGrid(f,x,A,W,P),ve&&(s.cache.set(B,ve),t.set(B,ve))}else if(U.isPolar){var ne=s.cache.get(k);if(ne){var de=U.isTransposed?s.getCircleAxisCfg(f,x,me.CIRCLE):s.getLineAxisCfg(f,x,me.RADIUS);Rl(de,Vv),ne.component.update(de),t.set(k,ne)}else{if(U.isTransposed){if((0,E.o8)(x))return;ne=s.createCircleAxis(f,x,A,me.CIRCLE,P)}else ne=s.createLineAxis(f,x,A,me.RADIUS,P);s.cache.set(k,ne),t.set(k,ne)}var ve=s.cache.get(B);if(ve){var de=U.isTransposed?s.getLineGridCfg(f,x,me.CIRCLE,P):s.getCircleGridCfg(f,x,me.RADIUS,P);Rl(de,Vv),ve.component.update(de),t.set(B,ve)}else{if(U.isTransposed){if((0,E.o8)(x))return;ve=s.createLineGrid(f,x,A,me.CIRCLE,P)}else ve=s.createCircleGrid(f,x,A,me.RADIUS,P);ve&&(s.cache.set(B,ve),t.set(B,ve))}}}}})},n.prototype.createLineAxis=function(t,s,l,f,d){var m={component:new Av(this.getLineAxisCfg(t,s,f)),layer:l,direction:f===me.RADIUS?me.NONE:f,type:ke.AXIS,extra:{dim:d,scale:t}};return m.component.set("field",t.field),m.component.init(),m},n.prototype.createLineGrid=function(t,s,l,f,d){var m=this.getLineGridCfg(t,s,f,d);if(m){var x={component:new dd(m),layer:l,direction:me.NONE,type:ke.GRID,extra:{dim:d,scale:t,alignTick:(0,E.U2)(m,"alignTick",!0)}};return x.component.init(),x}},n.prototype.createCircleAxis=function(t,s,l,f,d){var m={component:new Hd(this.getCircleAxisCfg(t,s,f)),layer:l,direction:f,type:ke.AXIS,extra:{dim:d,scale:t}};return m.component.set("field",t.field),m.component.init(),m},n.prototype.createCircleGrid=function(t,s,l,f,d){var m=this.getCircleGridCfg(t,s,f,d);if(m){var x={component:new Tv(m),layer:l,direction:me.NONE,type:ke.GRID,extra:{dim:d,scale:t,alignTick:(0,E.U2)(m,"alignTick",!0)}};return x.component.init(),x}},n.prototype.getLineAxisCfg=function(t,s,l){var f=(0,E.U2)(s,["top"])?this.axisForeContainer:this.axisContainer,d=this.view.getCoordinate(),m=Hh(d,l),x=Yn(t,s),A=dr(this.view.getTheme(),l),P=(0,E.U2)(s,["title"])?(0,E.b$)({title:{style:{text:x}}},{title:on(this.view.getTheme(),l,s.title)},s):s,k=(0,E.b$)((0,M.pi)((0,M.pi)({container:f},m),{ticks:t.getTicks().map(function(lt){return{id:"".concat(lt.tickValue),name:lt.text,value:lt.value}}),verticalFactor:d.isPolar?Gt(m,d.getCenter())*-1:Gt(m,d.getCenter()),theme:A}),A,P),B=this.getAnimateCfg(k),U=B.animate,W=B.animateOption;k.animateOption=W,k.animate=U;var ne=Xe(m),de=(0,E.U2)(k,"verticalLimitLength",ne?1/3:1/2);if(de<=1){var ve=this.view.getCanvas().get("width"),$e=this.view.getCanvas().get("height");k.verticalLimitLength=de*(ne?ve:$e)}return k},n.prototype.getLineGridCfg=function(t,s,l,f){if(FI(dr(this.view.getTheme(),l),s)){var d=kI(this.view.getTheme(),l),m=(0,E.b$)({container:(0,E.U2)(s,["top"])?this.gridForeContainer:this.gridContainer},d,(0,E.U2)(s,"grid"),this.getAnimateCfg(s));return m.items=$_(this.view.getCoordinate(),t,f,(0,E.U2)(m,"alignTick",!0)),m}},n.prototype.getCircleAxisCfg=function(t,s,l){var f=(0,E.U2)(s,["top"])?this.axisForeContainer:this.axisContainer,d=this.view.getCoordinate(),m=t.getTicks().map(function(ne){return{id:"".concat(ne.tickValue),name:ne.text,value:ne.value}});!t.isCategory&&Math.abs(d.endAngle-d.startAngle)===Math.PI*2&&m.length&&(m[m.length-1].name="");var x=Yn(t,s),A=dr(this.view.getTheme(),me.CIRCLE),P=(0,E.U2)(s,["title"])?(0,E.b$)({title:{style:{text:x}}},{title:on(this.view.getTheme(),l,s.title)},s):s,k=(0,E.b$)((0,M.pi)((0,M.pi)({container:f},wn(this.view.getCoordinate())),{ticks:m,verticalFactor:1,theme:A}),A,P),B=this.getAnimateCfg(k),U=B.animate,W=B.animateOption;return k.animate=U,k.animateOption=W,k},n.prototype.getCircleGridCfg=function(t,s,l,f){if(FI(dr(this.view.getTheme(),l),s)){var d=kI(this.view.getTheme(),me.RADIUS),m=(0,E.b$)({container:(0,E.U2)(s,["top"])?this.gridForeContainer:this.gridContainer,center:this.view.getCoordinate().getCenter()},d,(0,E.U2)(s,"grid"),this.getAnimateCfg(s)),x=(0,E.U2)(m,"alignTick",!0),A=f==="x"?this.view.getYScales()[0]:this.view.getXScale();return m.items=Y_(this.view.getCoordinate(),A,t,x,f),m}},n.prototype.getId=function(t,s){var l=this.view.getCoordinate();return"".concat(t,"-").concat(s,"-").concat(l.type)},n.prototype.getAnimateCfg=function(t){return{animate:this.view.getOptions().animate&&(0,E.U2)(t,"animate"),animateOption:t&&t.animateOption?(0,E.b$)({},DI,t.animateOption):DI}},n}(Se),w4=LI;function Hv(i,n,t){return t===me.TOP?[i.minX+i.width/2-n.width/2,i.minY]:t===me.BOTTOM?[i.minX+i.width/2-n.width/2,i.maxY-n.height]:t===me.LEFT?[i.minX,i.minY+i.height/2-n.height/2]:t===me.RIGHT?[i.maxX-n.width,i.minY+i.height/2-n.height/2]:t===me.TOP_LEFT||t===me.LEFT_TOP?[i.tl.x,i.tl.y]:t===me.TOP_RIGHT||t===me.RIGHT_TOP?[i.tr.x-n.width,i.tr.y]:t===me.BOTTOM_LEFT||t===me.LEFT_BOTTOM?[i.bl.x,i.bl.y-n.height]:t===me.BOTTOM_RIGHT||t===me.RIGHT_BOTTOM?[i.br.x-n.width,i.br.y-n.height]:[0,0]}function BI(i,n){if(n.isTransposed)switch(i){case DIRECTION.BOTTOM:return DIRECTION.LEFT;case DIRECTION.LEFT:return DIRECTION.BOTTOM;case DIRECTION.RIGHT:return DIRECTION.TOP;case DIRECTION.TOP:return DIRECTION.RIGHT}return i}function Zw(i){return i===DIRECTION.LEFT?DIRECTION.RIGHT:i===DIRECTION.RIGHT?DIRECTION.LEFT:i}function fy(i){return i===DIRECTION.TOP?DIRECTION.BOTTOM:i===DIRECTION.BOTTOM?DIRECTION.TOP:i}function C4(i,n){var t=n.matrix[0],s=n.matrix[4],l=i;return t<0&&(l=Zw(l)),s<0&&(l=fy(l)),l}function A4(i,n){var t=i;return n.isReflect("x")&&(t=Zw(t)),n.isReflect("y")&&(t=fy(t)),t}function Hm(i,n){var t=i;return t=BI(t,n),t=C4(t,n),t=A4(t,n),t}function gl(i,n){return(0,E.jn)(i)?i===!1?!1:{}:(0,E.U2)(i,[n],i)}function xs(i){return(0,E.U2)(i,"position",me.BOTTOM)}var jm=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.container=s.view.getLayer(fe.FORE).addGroup(),s}return Object.defineProperty(n.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n.prototype.render=function(){this.update()},n.prototype.layout=function(){var t=this;this.layoutBBox=this.view.viewBBox,(0,E.S6)(this.components,function(s){var l=s.component,f=s.direction,d=Np(f),m=l.get("maxWidthRatio"),x=l.get("maxHeightRatio"),A=t.getCategoryLegendSizeCfg(d,m,x),P=l.get("maxWidth"),k=l.get("maxHeight");l.update({maxWidth:Math.min(A.maxWidth,P||0),maxHeight:Math.min(A.maxHeight,k||0)});var B=l.get("padding"),U=l.getLayoutBBox(),W=new $o(U.x,U.y,U.width,U.height).expand(B),ne=(0,M.CR)(Hv(t.view.viewBBox,W,f),2),de=ne[0],ve=ne[1],$e=(0,M.CR)(Hv(t.layoutBBox,W,f),2),lt=$e[0],vt=$e[1],Ot=0,fr=0;f.startsWith("top")||f.startsWith("bottom")?(Ot=de,fr=vt):(Ot=lt,fr=ve),l.setLocation({x:Ot+B[3],y:fr+B[0]}),t.layoutBBox=t.layoutBBox.cut(W,f)})},n.prototype.update=function(){var t=this;this.option=this.view.getOptions().legends;var s={},l=function(B,U,W){var ne=t.getId(W.field),de=t.getComponentById(ne);if(de){var ve=void 0,$e=gl(t.option,W.field);$e!==!1&&((0,E.U2)($e,"custom")?ve=t.getCategoryCfg(B,U,W,$e,!0):W.isLinear?ve=t.getContinuousCfg(B,U,W,$e):W.isCategory&&(ve=t.getCategoryCfg(B,U,W,$e))),ve&&(Rl(ve,["container"]),de.direction=xs($e),de.component.update(ve),s[ne]=!0)}else{var lt=t.createFieldLegend(B,U,W);lt&&(lt.component.init(),t.components.push(lt),s[ne]=!0)}};if((0,E.U2)(this.option,"custom")){var f="global-custom",d=this.getComponentById(f);if(d){var m=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);Rl(m,["container"]),d.component.update(m),s[f]=!0}else{var x=this.createCustomLegend(void 0,void 0,void 0,this.option);if(x){x.init();var A=fe.FORE,P=xs(this.option);this.components.push({id:f,component:x,layer:A,direction:P,type:ke.LEGEND,extra:void 0}),s[f]=!0}}}else this.loopLegends(l);var k=[];(0,E.S6)(this.getComponents(),function(B){s[B.id]?k.push(B):B.component.destroy()}),this.components=k},n.prototype.clear=function(){i.prototype.clear.call(this),this.container.clear()},n.prototype.destroy=function(){i.prototype.destroy.call(this),this.container.remove(!0)},n.prototype.getGeometries=function(t){var s=this,l=t.geometries;return(0,E.S6)(t.views,function(f){l=l.concat(s.getGeometries(f))}),l},n.prototype.loopLegends=function(t){var s=this.view.getRootView()===this.view;if(s){var l=this.getGeometries(this.view),f={};(0,E.S6)(l,function(d){var m=d.getGroupAttributes();(0,E.S6)(m,function(x){var A=x.getScale(x.type);!A||A.type==="identity"||f[A.field]||(t(d,x,A),f[A.field]=!0)})})}},n.prototype.createFieldLegend=function(t,s,l){var f,d=gl(this.option,l.field),m=fe.FORE,x=xs(d);if(d!==!1&&((0,E.U2)(d,"custom")?f=this.createCustomLegend(t,s,l,d):l.isLinear?f=this.createContinuousLegend(t,s,l,d):l.isCategory&&(f=this.createCategoryLegend(t,s,l,d))),f)return f.set("field",l.field),{id:this.getId(l.field),component:f,layer:m,direction:x,type:ke.LEGEND,extra:{scale:l}}},n.prototype.createCustomLegend=function(t,s,l,f){var d=this.getCategoryCfg(t,s,l,f,!0);return new Qc(d)},n.prototype.createContinuousLegend=function(t,s,l,f){var d=this.getContinuousCfg(t,s,l,Rl(f,["value"]));return new Zh(d)},n.prototype.createCategoryLegend=function(t,s,l,f){var d=this.getCategoryCfg(t,s,l,f);return new Qc(d)},n.prototype.getContinuousCfg=function(t,s,l,f){var d=l.getTicks(),m=(0,E.sE)(d,function(ne){return ne.value===0}),x=(0,E.sE)(d,function(ne){return ne.value===1}),A=d.map(function(ne){var de=ne.value,ve=ne.tickValue,$e=s.mapping(l.invert(de)).join("");return{value:ve,attrValue:$e,color:$e,scaleValue:de}});m||A.push({value:l.min,attrValue:s.mapping(l.invert(0)).join(""),color:s.mapping(l.invert(0)).join(""),scaleValue:0}),x||A.push({value:l.max,attrValue:s.mapping(l.invert(1)).join(""),color:s.mapping(l.invert(1)).join(""),scaleValue:1}),A.sort(function(ne,de){return ne.value-de.value});var P={min:(0,E.YM)(A).value,max:(0,E.Z$)(A).value,colors:[],rail:{type:s.type},track:{}};s.type==="size"&&(P.track={style:{fill:s.type==="size"?this.view.getTheme().defaultColor:void 0}}),s.type==="color"&&(P.colors=A.map(function(ne){return ne.attrValue}));var k=this.container,B=xs(f),U=Np(B),W=(0,E.U2)(f,"title");return W&&(W=(0,E.b$)({text:kp(l)},W)),P.container=k,P.layout=U,P.title=W,P.animateOption=ar,this.mergeLegendCfg(P,f,"continuous")},n.prototype.getCategoryCfg=function(t,s,l,f,d){var m=this.container,x=(0,E.U2)(f,"position",me.BOTTOM),A=zp(this.view.getTheme(),x),P=(0,E.U2)(A,["marker"]),k=(0,E.U2)(f,"marker"),B=Np(x),U=(0,E.U2)(A,["pageNavigator"]),W=(0,E.U2)(f,"pageNavigator"),ne=d?xg(P,k,f.items):qd(this.view,t,s,P,k),de=(0,E.U2)(f,"title");de&&(de=(0,E.b$)({text:l?kp(l):""},de));var ve=(0,E.U2)(f,"maxWidthRatio"),$e=(0,E.U2)(f,"maxHeightRatio"),lt=this.getCategoryLegendSizeCfg(B,ve,$e);lt.container=m,lt.layout=B,lt.items=ne,lt.title=de,lt.animateOption=ar,lt.pageNavigator=(0,E.b$)({},U,W);var vt=this.mergeLegendCfg(lt,f,x);vt.reversed&&vt.items.reverse();var Ot=(0,E.U2)(vt,"maxItemWidth");return Ot&&Ot<=1&&(vt.maxItemWidth=this.view.viewBBox.width*Ot),vt},n.prototype.mergeLegendCfg=function(t,s,l){var f=l.split("-")[0],d=zp(this.view.getTheme(),f);return(0,E.b$)({},d,t,s)},n.prototype.getId=function(t){return"".concat(this.name,"-").concat(t)},n.prototype.getComponentById=function(t){return(0,E.sE)(this.components,function(s){return s.id===t})},n.prototype.getCategoryLegendSizeCfg=function(t,s,l){s===void 0&&(s=Et),l===void 0&&(l=Et);var f=this.view.viewBBox,d=f.width,m=f.height;return t==="vertical"?{maxWidth:d*s,maxHeight:m}:{maxWidth:d,maxHeight:m*l}},n}(Se),Gi=jm,vb=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.onChangeFn=E.ZT,s.resetMeasure=function(){s.clear()},s.onValueChange=function(l){var f=(0,M.CR)(l,2),d=f[0],m=f[1];s.start=d,s.end=m,s.changeViewData(d,m)},s.container=s.view.getLayer(fe.FORE).addGroup(),s.onChangeFn=(0,E.P2)(s.onValueChange,20,{leading:!0}),s.width=0,s.view.on(Le.BEFORE_CHANGE_DATA,s.resetMeasure),s.view.on(Le.BEFORE_CHANGE_SIZE,s.resetMeasure),s}return Object.defineProperty(n.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),n.prototype.destroy=function(){i.prototype.destroy.call(this),this.view.off(Le.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(Le.BEFORE_CHANGE_SIZE,this.resetMeasure)},n.prototype.init=function(){},n.prototype.render=function(){this.option=this.view.getOptions().slider;var t=this.getSliderCfg(),s=t.start,l=t.end;(0,E.UM)(this.start)&&(this.start=s,this.end=l);var f=this.view.getOptions().data;this.option&&!(0,E.xb)(f)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},n.prototype.layout=function(){var t=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.start,t.end)},0)),this.slider){var s=this.view.coordinateBBox.width,l=this.slider.component.get("padding"),f=(0,M.CR)(l,4),d=f[0],m=f[1],x=f[2],A=f[3],P=this.slider.component.getLayoutBBox(),k=new $o(P.x,P.y,Math.min(P.width,s),P.height).expand(l),B=this.getMinMaxText(this.start,this.end),U=B.minText,W=B.maxText,ne=(0,M.CR)(Hv(this.view.viewBBox,k,me.BOTTOM),2),de=ne[0],ve=ne[1],$e=(0,M.CR)(Hv(this.view.coordinateBBox,k,me.BOTTOM),2),lt=$e[0],vt=$e[1];this.slider.component.update((0,M.pi)((0,M.pi)({},this.getSliderCfg()),{x:lt+A,y:ve+d,width:this.width,start:this.start,end:this.end,minText:U,maxText:W})),this.view.viewBBox=this.view.viewBBox.cut(k,me.BOTTOM)}},n.prototype.update=function(){this.render()},n.prototype.createSlider=function(){var t=this.getSliderCfg(),s=new gc((0,M.pi)({container:this.container},t));return s.init(),{component:s,layer:fe.FORE,direction:me.BOTTOM,type:ke.SLIDER}},n.prototype.updateSlider=function(){var t=this.getSliderCfg();if(this.width){var s=this.getMinMaxText(this.start,this.end),l=s.minText,f=s.maxText;t=(0,M.pi)((0,M.pi)({},t),{width:this.width,start:this.start,end:this.end,minText:l,maxText:f})}return this.slider.component.update(t),this.slider},n.prototype.measureSlider=function(){var t=this.getSliderCfg().width;this.width=t},n.prototype.getSliderCfg=function(){var t={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if((0,E.Kn)(this.option)){var s=(0,M.pi)({data:this.getData()},(0,E.U2)(this.option,"trendCfg",{}));t=(0,E.b$)({},t,this.getThemeOptions(),this.option),t=(0,M.pi)((0,M.pi)({},t),{trendCfg:s})}return t.start=(0,E.uZ)(Math.min((0,E.UM)(t.start)?0:t.start,(0,E.UM)(t.end)?1:t.end),0,1),t.end=(0,E.uZ)(Math.max((0,E.UM)(t.start)?0:t.start,(0,E.UM)(t.end)?1:t.end),0,1),t},n.prototype.getData=function(){var t=this.view.getOptions().data,s=(0,M.CR)(this.view.getYScales(),1),l=s[0],f=this.view.getGroupScales();if(f.length){var d=f[0],m=d.field,x=d.ticks;return t.reduce(function(A,P){return P[m]===x[0]&&A.push(P[l.field]),A},[])}return t.map(function(A){return A[l.field]||0})},n.prototype.getThemeOptions=function(){var t=this.view.getTheme();return(0,E.U2)(t,["components","slider","common"],{})},n.prototype.getMinMaxText=function(t,s){var l=this.view.getOptions().data,f=this.view.getXScale(),d=!0,m=(0,E.I)(l,f.field);f.isLinear&&(m=m.sort());var x=d?m:m.reverse(),A=(0,E.dp)(l);if(!f||!A)return{};var P=(0,E.dp)(x),k=Math.round(t*(P-1)),B=Math.round(s*(P-1)),U=(0,E.U2)(x,[k]),W=(0,E.U2)(x,[B]),ne=this.getSliderCfg().formatter;return ne&&(U=ne(U,l[k],k),W=ne(W,l[B],B)),{minText:U,maxText:W}},n.prototype.changeViewData=function(t,s){var l=this.view.getOptions().data,f=this.view.getXScale(),d=(0,E.dp)(l);if(!(!f||!d)){var m=!0,x=(0,E.I)(l,f.field),A=this.view.getXScale().isLinear?x.sort(function(W,ne){return Number(W)-Number(ne)}):x,P=m?A:A.reverse(),k=(0,E.dp)(P),B=Math.round(t*(k-1)),U=Math.round(s*(k-1));this.view.filter(f.field,function(W,ne){var de=P.indexOf(W);return de>-1?Ip(de,B,U):!0}),this.view.render(!0)}},n.prototype.getComponents=function(){return this.slider?[this.slider]:[]},n.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},n}(Se),K_=vb,Xl=0,Vw=8,NI=32,zI=20,UI=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.onChangeFn=E.ZT,s.resetMeasure=function(){s.clear()},s.onValueChange=function(l){var f=l.ratio,d=s.getValidScrollbarCfg().animate;s.ratio=(0,E.uZ)(f,0,1);var m=s.view.getOptions().animate;d||s.view.animate(!1),s.changeViewData(s.getScrollRange(),!0),s.view.animate(m)},s.container=s.view.getLayer(fe.FORE).addGroup(),s.onChangeFn=(0,E.P2)(s.onValueChange,20,{leading:!0}),s.trackLen=0,s.thumbLen=0,s.ratio=0,s.view.on(Le.BEFORE_CHANGE_DATA,s.resetMeasure),s.view.on(Le.BEFORE_CHANGE_SIZE,s.resetMeasure),s}return Object.defineProperty(n.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),n.prototype.destroy=function(){i.prototype.destroy.call(this),this.view.off(Le.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(Le.BEFORE_CHANGE_SIZE,this.resetMeasure)},n.prototype.init=function(){},n.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},n.prototype.layout=function(){var t=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.getScrollRange(),!0)})),this.scrollbar){var s=this.view.coordinateBBox.width,l=this.scrollbar.component.get("padding"),f=this.scrollbar.component.getLayoutBBox(),d=new $o(f.x,f.y,Math.min(f.width,s),f.height).expand(l),m=this.getScrollbarComponentCfg(),x=void 0,A=void 0;if(m.isHorizontal){var P=(0,M.CR)(Hv(this.view.viewBBox,d,me.BOTTOM),2),k=P[0],B=P[1],U=(0,M.CR)(Hv(this.view.coordinateBBox,d,me.BOTTOM),2),W=U[0],ne=U[1];x=W,A=B}else{var de=(0,M.CR)(Hv(this.view.viewBBox,d,me.RIGHT),2),k=de[0],B=de[1],ve=(0,M.CR)(Hv(this.view.viewBBox,d,me.RIGHT),2),W=ve[0],ne=ve[1];x=W,A=B}x+=l[3],A+=l[0],this.trackLen?this.scrollbar.component.update((0,M.pi)((0,M.pi)({},m),{x,y:A,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update((0,M.pi)((0,M.pi)({},m),{x,y:A})),this.view.viewBBox=this.view.viewBBox.cut(d,m.isHorizontal?me.BOTTOM:me.RIGHT)}},n.prototype.update=function(){this.render()},n.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},n.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},n.prototype.setValue=function(t){this.onValueChange({ratio:t})},n.prototype.getValue=function(){return this.ratio},n.prototype.getThemeOptions=function(){var t=this.view.getTheme();return(0,E.U2)(t,["components","scrollbar","common"],{})},n.prototype.getScrollbarTheme=function(t){var s=(0,E.U2)(this.view.getTheme(),["components","scrollbar"]),l=t||{},f=l.thumbHighlightColor,d=(0,M._T)(l,["thumbHighlightColor"]);return{default:(0,E.b$)({},(0,E.U2)(s,["default","style"],{}),d),hover:(0,E.b$)({},(0,E.U2)(s,["hover","style"],{}),{thumbColor:f})}},n.prototype.measureScrollbar=function(){var t=this.view.getXScale(),s=this.view.getYScales().slice();this.data=this.getScrollbarData(),this.step=this.getStep(),this.cnt=this.getCnt();var l=this.getScrollbarComponentCfg(),f=l.trackLen,d=l.thumbLen;this.trackLen=f,this.thumbLen=d,this.xScaleCfg={field:t.field,values:t.values||[]},this.yScalesCfg=s},n.prototype.getScrollRange=function(){var t=Math.floor((this.cnt-this.step)*(0,E.uZ)(this.ratio,0,1)),s=Math.min(t+this.step-1,this.cnt-1);return[t,s]},n.prototype.changeViewData=function(t,s){var l=this,f=(0,M.CR)(t,2),d=f[0],m=f[1],x=this.getValidScrollbarCfg().type,A=x!=="vertical",P=(0,E.I)(this.data,this.xScaleCfg.field),k=this.view.getXScale().isLinear?P.sort(function(U,W){return Number(U)-Number(W)}):P,B=A?k:k.reverse();this.yScalesCfg.forEach(function(U){l.view.scale(U.field,{formatter:U.formatter,type:U.type,min:U.min,max:U.max,tickMethod:U.tickMethod})}),this.view.filter(this.xScaleCfg.field,function(U){var W=B.indexOf(U);return W>-1?Ip(W,d,m):!0}),this.view.render(!0)},n.prototype.createScrollbar=function(){var t=this.getValidScrollbarCfg().type,s=t!=="vertical",l=new pd((0,M.pi)((0,M.pi)({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return l.init(),{component:l,layer:fe.FORE,direction:s?me.BOTTOM:me.RIGHT,type:ke.SCROLLBAR}},n.prototype.updateScrollbar=function(){var t=this.getScrollbarComponentCfg(),s=this.trackLen?(0,M.pi)((0,M.pi)({},t),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):(0,M.pi)({},t);return this.scrollbar.component.update(s),this.scrollbar},n.prototype.getStep=function(){if(this.step)return this.step;var t=this.view.coordinateBBox,s=this.getValidScrollbarCfg(),l=s.type,f=s.categorySize,d=l!=="vertical";return Math.floor((d?t.width:t.height)/f)},n.prototype.getCnt=function(){if(this.cnt)return this.cnt;var t=this.view.getXScale(),s=this.getScrollbarData(),l=(0,E.I)(s,t.field);return(0,E.dp)(l)},n.prototype.getScrollbarComponentCfg=function(){var t=this.view,s=t.coordinateBBox,l=t.viewBBox,f=this.getValidScrollbarCfg(),d=f.type,m=f.padding,x=f.width,A=f.height,P=f.style,k=d!=="vertical",B=(0,M.CR)(m,4),U=B[0],W=B[1],ne=B[2],de=B[3],ve=k?{x:s.minX+de,y:l.maxY-A-ne}:{x:l.maxX-x-W,y:s.minY+U},$e=this.getStep(),lt=this.getCnt(),vt=k?s.width-de-W:s.height-U-ne,Ot=Math.max(vt*(0,E.uZ)($e/lt,0,1),zI);return(0,M.pi)((0,M.pi)({},this.getThemeOptions()),{x:ve.x,y:ve.y,size:k?A:x,isHorizontal:k,trackLen:vt,thumbLen:Ot,thumbOffset:0,theme:this.getScrollbarTheme(P)})},n.prototype.getValidScrollbarCfg=function(){var t={type:"horizontal",categorySize:NI,width:Vw,height:Vw,padding:[0,0,0,0],animate:!0,style:{}};return(0,E.Kn)(this.option)&&(t=(0,M.pi)((0,M.pi)({},t),this.option)),(!(0,E.Kn)(this.option)||!this.option.padding)&&(t.padding=t.type==="horizontal"?[Xl,0,Xl,0]:[0,Xl,0,Xl]),t},n.prototype.getScrollbarData=function(){var t=this.view.getCoordinate(),s=this.getValidScrollbarCfg(),l=this.view.getOptions().data||[];return t.isReflect("y")&&s.type==="vertical"&&(l=(0,M.ev)([],(0,M.CR)(l),!1).reverse()),l},n}(Se),Hw=UI,ZI={fill:"#CCD6EC",opacity:.3};function VI(i,n,t){var s,l,f,d,m,x,A=Mu(i,n,t);if(A.length){A=(0,E.xH)(A);try{for(var P=(0,M.XA)(A),k=P.next();!k.done;k=P.next()){var B=k.value;try{for(var U=(f=void 0,(0,M.XA)(B)),W=U.next();!W.done;W=U.next()){var ne=W.value,de=ne.mappingData,ve=de.x,$e=de.y;ne.x=(0,E.kJ)(ve)?ve[ve.length-1]:ve,ne.y=(0,E.kJ)($e)?$e[$e.length-1]:$e}}catch(Qr){f={error:Qr}}finally{try{W&&!W.done&&(d=U.return)&&d.call(U)}finally{if(f)throw f.error}}}}catch(Qr){s={error:Qr}}finally{try{k&&!k.done&&(l=P.return)&&l.call(P)}finally{if(s)throw s.error}}var lt=t.shared;if(lt===!1&&A.length>1){var vt=A[0],Ot=Math.abs(n.y-vt[0].y);try{for(var fr=(0,M.XA)(A),Tr=fr.next();!Tr.done;Tr=fr.next()){var zr=Tr.value,cn=Math.abs(n.y-zr[0].y);cn<=Ot&&(vt=zr,Ot=cn)}}catch(Qr){m={error:Qr}}finally{try{Tr&&!Tr.done&&(x=fr.return)&&x.call(fr)}finally{if(m)throw m.error}}A=[vt]}return(0,E.jj)((0,E.xH)(A))}return[]}var gb=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.show=function(t){var s=this.context.view,l=this.context.event,f=s.getController("tooltip").getTooltipCfg(),d=VI(s,{x:l.x,y:l.y},f);if(!(0,E.Xy)(d,this.items)&&(this.items=d,d.length)){var m=s.getXScale().field,x=d[0].data[m],A=[],P=s.geometries;if((0,E.S6)(P,function(sa){if(sa.type==="interval"||sa.type==="schema"){var Li=sa.getElementsBy(function($i){var Da=$i.getData();return Da[m]===x});A=A.concat(Li)}}),A.length){var k=s.getCoordinate(),B=A[0].shape.getCanvasBBox(),U=A[0].shape.getCanvasBBox(),W=B;(0,E.S6)(A,function(sa){var Li=sa.shape.getCanvasBBox();k.isTransposed?(Li.minY<B.minY&&(B=Li),Li.maxY>U.maxY&&(U=Li)):(Li.minX<B.minX&&(B=Li),Li.maxX>U.maxX&&(U=Li)),W.x=Math.min(Li.minX,W.minX),W.y=Math.min(Li.minY,W.minY),W.width=Math.max(Li.maxX,W.maxX)-W.x,W.height=Math.max(Li.maxY,W.maxY)-W.y});var ne=s.backgroundGroup,de=s.coordinateBBox,ve=void 0;if(k.isRect){var $e=s.getXScale(),lt=t||{},vt=lt.appendRatio,Ot=lt.appendWidth;(0,E.UM)(Ot)&&(vt=(0,E.UM)(vt)?$e.isLinear?0:.25:vt,Ot=k.isTransposed?vt*U.height:vt*B.width);var fr=void 0,Tr=void 0,zr=void 0,cn=void 0;k.isTransposed?(fr=de.minX,Tr=Math.min(U.minY,B.minY)-Ot,zr=de.width,cn=W.height+Ot*2):(fr=Math.min(B.minX,U.minX)-Ot,Tr=de.minY,zr=W.width+Ot*2,cn=de.height),ve=[["M",fr,Tr],["L",fr+zr,Tr],["L",fr+zr,Tr+cn],["L",fr,Tr+cn],["Z"]]}else{var Qr=(0,E.YM)(A),On=(0,E.Z$)(A),Qn=vd(Qr.getModel(),k).startAngle,Hi=vd(On.getModel(),k).endAngle,oa=k.getCenter(),eo=k.getRadius(),Nn=k.innerRadius*eo;ve=mh(oa.x,oa.y,eo,Qn,Hi,Nn)}if(this.regionPath)this.regionPath.attr("path",ve),this.regionPath.show();else{var Di=(0,E.U2)(t,"style",ZI);this.regionPath=ne.addShape({type:"path",name:"active-region",capture:!1,attrs:(0,M.pi)((0,M.pi)({},Di),{path:ve})})}}}},n.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},n.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),i.prototype.destroy.call(this)},n}(En),HI=gb,jw=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.timeStamp=0,t}return n.prototype.show=function(){var t=this.context,s=t.event,l=t.view,f=l.isTooltipLocked();if(!f){var d=this.timeStamp,m=+new Date,x=(0,E.U2)(t.view.getOptions(),"tooltip.showDelay",16);if(m-d>x){var A=this.location,P={x:s.x,y:s.y};(!A||!(0,E.Xy)(A,P))&&this.showTooltip(l,P),this.timeStamp=m,this.location=P}}},n.prototype.hide=function(){var t=this.context.view,s=t.getController("tooltip"),l=this.context.event,f=l.clientX,d=l.clientY;s.isCursorEntered({x:f,y:d})||t.isTooltipLocked()||(this.hideTooltip(t),this.location=null)},n.prototype.showTooltip=function(t,s){t.showTooltip(s)},n.prototype.hideTooltip=function(t){t.hideTooltip()},n}(En),mb=jw,jI=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.showTooltip=function(t,s){var l=hr(t);(0,E.S6)(l,function(f){var d=$r(t,f,s);f.showTooltip(d)})},n.prototype.hideTooltip=function(t){var s=hr(t);(0,E.S6)(s,function(l){l.hideTooltip()})},n}(mb),T4=jI,WI=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.timeStamp=0,t}return n.prototype.destroy=function(){i.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},n.prototype.show=function(){var t=this.context,s=t.event,l=this.timeStamp,f=+new Date;if(f-l>16){var d=this.location,m={x:s.x,y:s.y};(!d||!(0,E.Xy)(d,m))&&this.showTooltip(m),this.timeStamp=f,this.location=m}},n.prototype.hide=function(){this.hideTooltip(),this.location=null},n.prototype.showTooltip=function(t){var s=this.context,l=s.event,f=l.target;if(f&&f.get("tip")){this.tooltip||this.renderTooltip();var d=f.get("tip");this.tooltip.update((0,M.pi)({title:d},t)),this.tooltip.show()}},n.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},n.prototype.renderTooltip=function(){var t,s=this.context.view,l=s.canvas,f={start:{x:0,y:0},end:{x:l.get("width"),y:l.get("height")}},d=s.getTheme(),m=(0,E.U2)(d,["components","tooltip","domStyles"],{}),x=new jd({parent:l.get("el").parentNode,region:f,visible:!1,crosshairs:null,domStyles:(0,M.pi)({},(0,E.b$)({},m,(t={},t[Tl]={"max-width":"50%"},t[Hl]={"word-break":"break-all"},t)))});x.init(),x.setCapture(!1),this.tooltip=x},n}(En),GI=WI,XI=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="",t}return n.prototype.hasState=function(t){return t.hasState(this.stateName)},n.prototype.setElementState=function(t,s){t.setState(this.stateName,s)},n.prototype.setState=function(){this.setStateEnable(!0)},n.prototype.clear=function(){var t=this.context.view;this.clearViewState(t)},n.prototype.clearViewState=function(t){var s=this,l=Us(t,this.stateName);(0,E.S6)(l,function(f){s.setElementState(f,!1)})},n}(En),yb=XI;function Ww(i){return(0,E.U2)(i.get("delegateObject"),"item")}var $I=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.ignoreListItemStates=["unchecked"],t}return n.prototype.isItemIgnore=function(t,s){var l=this.ignoreListItemStates,f=l.filter(function(d){return s.hasState(t,d)});return!!f.length},n.prototype.setStateByComponent=function(t,s,l){var f=this.context.view,d=t.get("field"),m=da(f);this.setElementsStateByItem(m,d,s,l)},n.prototype.setStateByElement=function(t,s){this.setElementState(t,s)},n.prototype.isMathItem=function(t,s,l){var f=this.context.view,d=Ir(f,s),m=Du(t,s);return!(0,E.UM)(m)&&l.name===d.getText(m)},n.prototype.setElementsStateByItem=function(t,s,l,f){var d=this;(0,E.S6)(t,function(m){d.isMathItem(m,s,l)&&m.setState(d.stateName,f)})},n.prototype.setStateEnable=function(t){var s=ss(this.context);if(s)du(this.context)&&this.setStateByElement(s,t);else{var l=Uo(this.context);if(zs(l)){var f=l.item,d=l.component;if(f&&d&&!this.isItemIgnore(f,d)){var m=this.context.event.gEvent;if(m&&m.fromShape&&m.toShape&&Ww(m.fromShape)===Ww(m.toShape))return;this.setStateByComponent(d,f,t)}}}},n.prototype.toggle=function(){var t=ss(this.context);if(t){var s=t.hasState(this.stateName);this.setElementState(t,!s)}},n.prototype.reset=function(){this.setStateEnable(!1)},n}(yb),_b=$I,YI=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return n.prototype.active=function(){this.setState()},n}(_b),KI=YI,Gw=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.cache={},t}return n.prototype.getColorScale=function(t,s){var l=s.geometry.getAttribute("color");if(!l)return null;var f=t.getScaleByField(l.getFields()[0]);return f},n.prototype.getLinkPath=function(t,s){var l=this.context.view,f=l.getCoordinate().isTransposed,d=t.shape.getCanvasBBox(),m=s.shape.getCanvasBBox(),x=f?[["M",d.minX,d.minY],["L",m.minX,m.maxY],["L",m.maxX,m.maxY],["L",d.maxX,d.minY],["Z"]]:[["M",d.maxX,d.minY],["L",m.minX,m.minY],["L",m.minX,m.maxY],["L",d.maxX,d.maxY],["Z"]];return x},n.prototype.addLinkShape=function(t,s,l,f){var d={opacity:.4,fill:s.shape.attr("fill")};t.addShape({type:"path",attrs:(0,M.pi)((0,M.pi)({},(0,E.b$)({},d,(0,E.mf)(f)?f(d,s):f)),{path:this.getLinkPath(s,l)})})},n.prototype.linkByElement=function(t,s){var l=this,f=this.context.view,d=this.getColorScale(f,t);if(d){var m=Du(t,d.field);if(!this.cache[m]){var x=So(f,d.field,m),A=this.linkGroup,P=A.addGroup();this.cache[m]=P;var k=x.length;(0,E.S6)(x,function(B,U){if(U<k-1){var W=x[U+1];l.addLinkShape(P,B,W,s)}})}}},n.prototype.removeLink=function(t){var s=this.getColorScale(this.context.view,t);if(s){var l=Du(t,s.field);this.cache[l]&&(this.cache[l].remove(),this.cache[l]=null)}},n.prototype.link=function(t){var s=this.context;this.linkGroup||(this.linkGroup=s.view.foregroundGroup.addGroup({id:"link-by-color-group",capture:!1}));var l=ss(s);l&&this.linkByElement(l,t==null?void 0:t.style)},n.prototype.unlink=function(){var t=ss(this.context);t&&this.removeLink(t)},n.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},n.prototype.destroy=function(){i.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},n}(En),qI=Gw,QI=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.startPoint=null,t.endPoint=null,t.isStarted=!1,t.effectSiblings=!1,t.effectByRecord=!1,t}return n.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},n.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},n.prototype.getIntersectElements=function(){var t=null;if($s(this.context))t=Ks(this.context,10);else{var s=this.startPoint,l=this.isStarted?this.getCurrentPoint():this.endPoint;if(!s||!l)return;var f={minX:Math.min(s.x,l.x),minY:Math.min(s.y,l.y),maxX:Math.max(s.x,l.x),maxY:Math.max(s.y,l.y)},d=this.context.view;t=ln(d,f)}return t},n.prototype.setStateEnable=function(t){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(t);else{var s=da(this.context.view),l=this.getIntersectElements();l&&l.length?this.effectByRecord?this.setSiblingsStateByRecord(l,t):this.setElementsState(l,t,s):this.clear()}},n.prototype.setSiblingsStateByRecord=function(t,s){var l=this,f=this.context.view,d=hr(f),m=t.map(function(P){return P.getModel().data}),x=f.getXScale().field,A=f.getYScales()[0].field;(0,E.S6)(d,function(P){var k=da(P),B=k.filter(function(U){var W=U.getModel().data;return Ar(m,W,x,A)});l.setElementsState(B,s,k)})},n.prototype.setSiblingsState=function(t){var s=this,l=this.context.view,f=hr(l);$s(this.context)&&(0,E.S6)(f,function(d){var m=da(d),x=Tu(s.context,d,10);x&&x.length?s.setElementsState(x,t,m):s.clearViewState(d)})},n.prototype.setElementsState=function(t,s,l){var f=this;(0,E.S6)(l,function(d){t.includes(d)?f.setElementState(d,s):f.setElementState(d,!1)})},n.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},n.prototype.clear=function(){var t=this,s=this.context.view;if(this.effectSiblings){var l=hr(s);(0,E.S6)(l,function(f){t.clearViewState(f)})}else this.clearViewState(s)},n}(yb),xb=QI,Xw=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return n.prototype.active=function(){this.setState()},n}(xb),JI=Xw,eP=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.setStateEnable=function(t){var s=ss(this.context);if(s){if(!du(this.context))return;t?(this.clear(),this.setElementState(s,!0)):this.hasState(s)&&this.setElementState(s,!1)}},n.prototype.toggle=function(){var t=ss(this.context);if(t){var s=this.hasState(t);s||this.clear(),this.setElementState(t,!s)}},n.prototype.reset=function(){this.setStateEnable(!1)},n}(yb),bb=eP,tP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return n.prototype.active=function(){this.setState()},n}(bb),rP=tP,Wm="inactive",hy="active";function Sb(i){var n=da(i);(0,E.S6)(n,function(t){t.hasState(hy)&&t.setState(hy,!1),t.hasState(Wm)&&t.setState(Wm,!1)})}function $w(i,n,t){(0,E.S6)(i,function(s){n(s)?(s.hasState(Wm)&&s.setState(Wm,!1),s.setState(hy,t)):(s.hasState(hy)&&s.setState(hy,!1),s.setState(Wm,t))})}var Dg=ge.INACTIVE,av=ge.ACTIVE,Yw=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName=av,t}return n.prototype.setElementsStateByItem=function(t,s,l,f){var d=this,m=function(x){return d.isMathItem(x,s,l)};this.setHighlightBy(t,m,f)},n.prototype.setElementHighlight=function(t,s){s(t)?(t.hasState(Dg)&&t.setState(Dg,!1),t.setState(av,!0)):t.hasState(av)||t.setState(Dg,!0)},n.prototype.setHighlightBy=function(t,s,l){var f=this;if(l)(0,E.S6)(t,function(x){f.setElementHighlight(x,s)});else{var d=Us(this.context.view,av),m=!0;(0,E.S6)(d,function(x){if(!s(x))return m=!1,!1}),m?this.clear():(0,E.S6)(t,function(x){s(x)&&(x.hasState(av)&&x.setState(av,!1),x.setState(Dg,!0))})}},n.prototype.setElementState=function(t,s){var l=this.context.view,f=da(l);this.setHighlightBy(f,function(d){return t===d},s)},n.prototype.highlight=function(){this.setState()},n.prototype.clear=function(){var t=this.context.view;Sb(t)},n}(_b),Eb=Yw,Kw=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.setStateByElement=function(t,s){var l=this.context.view,f=t.geometry.getAttribute("color");if(f){var d=l.getScaleByField(f.getFields()[0]),m=Du(t,d.field),x=da(l),A=x.filter(function(P){return Du(P,d.field)===m});this.setHighlightBy(x,function(P){return A.includes(P)},s)}},n}(Eb),wb=Kw,nP=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.setElementHighlight=function(t,s){s(t)?(t.hasState(Dg)&&t.setState(Dg,!1),t.setState(av,!0)):(t.setState(Dg,!0),t.hasState(av)&&t.setState(av,!1))},n.prototype.setStateByElement=function(t,s){var l=this.context.view,f=l.getXScale(),d=Du(t,f.field),m=da(l),x=m.filter(function(A){return Du(A,f.field)===d});this.setHighlightBy(m,function(A){return x.includes(A)},s)},n.prototype.toggle=function(){var t=ss(this.context);if(t){var s=t.hasState(this.stateName);this.setStateByElement(t,!s)}},n}(Eb),iP=nP,wd;(function(i){i.BEFORE_HIGHLIGHT="element-range-highlight:beforehighlight",i.AFTER_HIGHLIGHT="element-range-highlight:afterhighlight",i.BEFORE_CLEAR="element-range-highlight:beforeclear",i.AFTER_CLEAR="element-range-highlight:afterclear"})(wd||(wd={}));var aP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return n.prototype.clearViewState=function(t){Sb(t)},n.prototype.highlight=function(){var t=this.context,s=t.view,l=t.event,f=this.getIntersectElements(),d={view:s,event:l,highlightElements:f};s.emit(wd.BEFORE_HIGHLIGHT,Ya.fromData(s,wd.BEFORE_HIGHLIGHT,d)),this.setState(),s.emit(wd.AFTER_HIGHLIGHT,Ya.fromData(s,wd.AFTER_HIGHLIGHT,d))},n.prototype.clear=function(){var t=this.context.view;t.emit(wd.BEFORE_CLEAR,Ya.fromData(t,wd.BEFORE_CLEAR,{})),i.prototype.clear.call(this),t.emit(wd.AFTER_CLEAR,Ya.fromData(t,wd.AFTER_CLEAR,{}))},n.prototype.setElementsState=function(t,s,l){$w(l,function(f){return t.indexOf(f)>=0},s)},n}(xb),qw=aP,oP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return n.prototype.highlight=function(){this.setState()},n.prototype.setElementState=function(t,s){var l=this.context.view,f=da(l);$w(f,function(d){return t===d},s)},n.prototype.clear=function(){var t=this.context.view;Sb(t)},n}(bb),Gm=oP,sP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="selected",t}return n.prototype.selected=function(){this.setState()},n}(xb),uP=sP,lP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="selected",t}return n.prototype.selected=function(){this.setState()},n}(_b),cP=lP,fP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="selected",t}return n.prototype.selected=function(){this.setState()},n}(bb),hP=fP,pP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="",t.ignoreItemStates=[],t}return n.prototype.getTriggerListInfo=function(){var t=Uo(this.context),s=null;return zs(t)&&(s={item:t.item,list:t.component}),s},n.prototype.getAllowComponents=function(){var t=this,s=this.context.view,l=Ja(s),f=[];return(0,E.S6)(l,function(d){d.isList()&&t.allowSetStateByElement(d)&&f.push(d)}),f},n.prototype.hasState=function(t,s){return t.hasState(s,this.stateName)},n.prototype.clearAllComponentsState=function(){var t=this,s=this.getAllowComponents();(0,E.S6)(s,function(l){l.clearItemsState(t.stateName)})},n.prototype.allowSetStateByElement=function(t){var s=t.get("field");if(!s)return!1;if(this.cfg&&this.cfg.componentNames){var l=t.get("name");if(this.cfg.componentNames.indexOf(l)===-1)return!1}var f=this.context.view,d=Ir(f,s);return d&&d.isCategory},n.prototype.allowSetStateByItem=function(t,s){var l=this.ignoreItemStates;if(l.length){var f=l.filter(function(d){return s.hasState(t,d)});return f.length===0}return!0},n.prototype.setStateByElement=function(t,s,l){var f=t.get("field"),d=this.context.view,m=Ir(d,f),x=Du(s,f),A=m.getText(x);this.setItemsState(t,A,l)},n.prototype.setStateEnable=function(t){var s=this,l=ss(this.context);if(l){var f=this.getAllowComponents();(0,E.S6)(f,function(A){s.setStateByElement(A,l,t)})}else{var d=Uo(this.context);if(zs(d)){var m=d.item,x=d.component;this.allowSetStateByElement(x)&&this.allowSetStateByItem(m,x)&&this.setItemState(x,m,t)}}},n.prototype.setItemsState=function(t,s,l){var f=this,d=t.getItems();(0,E.S6)(d,function(m){m.name===s&&f.setItemState(t,m,l)})},n.prototype.setItemState=function(t,s,l){t.setItemState(s,this.stateName,l)},n.prototype.setState=function(){this.setStateEnable(!0)},n.prototype.reset=function(){this.setStateEnable(!1)},n.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var s=t.list,l=t.item,f=this.hasState(s,l);this.setItemState(s,l,!f)}},n.prototype.clear=function(){var t=this.getTriggerListInfo();t?t.list.clearItemsState(this.stateName):this.clearAllComponentsState()},n}(En),Lg=pP,q_=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return n.prototype.active=function(){this.setState()},n}(Lg),dP=q_,Qw="inactive",Cb="active";function M4(i){var n=i.getItems();(0,E.S6)(n,function(t){i.hasState(t,Cb)&&i.setItemState(t,Cb,!1),i.hasState(t,Qw)&&i.setItemState(t,Qw,!1)})}var py="inactive",Xm="active",R4=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName=Xm,t.ignoreItemStates=["unchecked"],t}return n.prototype.setItemsState=function(t,s,l){this.setHighlightBy(t,function(f){return f.name===s},l)},n.prototype.setItemState=function(t,s,l){var f=t.getItems();this.setHighlightBy(t,function(d){return d===s},l)},n.prototype.setHighlightBy=function(t,s,l){var f=t.getItems();if(l)(0,E.S6)(f,function(x){s(x)?(t.hasState(x,py)&&t.setItemState(x,py,!1),t.setItemState(x,Xm,!0)):t.hasState(x,Xm)||t.setItemState(x,py,!0)});else{var d=t.getItemsByState(Xm),m=!0;(0,E.S6)(d,function(x){if(!s(x))return m=!1,!1}),m?this.clear():(0,E.S6)(f,function(x){s(x)&&(t.hasState(x,Xm)&&t.setItemState(x,Xm,!1),t.setItemState(x,py,!0))})}},n.prototype.highlight=function(){this.setState()},n.prototype.clear=function(){var t=this.getTriggerListInfo();if(t)M4(t.list);else{var s=this.getAllowComponents();(0,E.S6)(s,function(l){l.clearItemsState(Xm),l.clearItemsState(py)})}},n}(Lg),Jw=R4,vP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="selected",t}return n.prototype.selected=function(){this.setState()},n}(Lg),gP=vP,dy=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="unchecked",t}return n.prototype.unchecked=function(){this.setState()},n}(Lg),I4=dy,$m="unchecked",Ab="checked",mP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName=Ab,t}return n.prototype.setItemState=function(t,s,l){this.setCheckedBy(t,function(f){return f===s},l)},n.prototype.setCheckedBy=function(t,s,l){var f=t.getItems();l&&(0,E.S6)(f,function(d){s(d)?(t.hasState(d,$m)&&t.setItemState(d,$m,!1),t.setItemState(d,Ab,!0)):t.hasState(d,Ab)||t.setItemState(d,$m,!0)})},n.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var s=t.list,l=t.item,f=!(0,E.G)(s.getItems(),function(d){return s.hasState(d,$m)});f||s.hasState(l,$m)?this.setItemState(s,l,!0):this.reset()}},n.prototype.checked=function(){this.setState()},n.prototype.reset=function(){var t=this.getAllowComponents();(0,E.S6)(t,function(s){s.clearItemsState(Ab),s.clearItemsState($m)})},n}(Lg),yP=mP,Ym="unchecked",P4=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.toggle=function(){var t,s,l,f,d,m,x,A,P=this.getTriggerListInfo();if(P!=null&&P.item){var k=P.list,B=P.item,U=k.getItems(),W=U.filter(function(Qr){return!k.hasState(Qr,Ym)}),ne=U.filter(function(Qr){return k.hasState(Qr,Ym)}),de=W[0];if(U.length===W.length)try{for(var ve=(0,M.XA)(U),$e=ve.next();!$e.done;$e=ve.next()){var lt=$e.value;k.setItemState(lt,Ym,lt.id!==B.id)}}catch(Qr){t={error:Qr}}finally{try{$e&&!$e.done&&(s=ve.return)&&s.call(ve)}finally{if(t)throw t.error}}else if(U.length-ne.length===1)if(de.id===B.id)try{for(var vt=(0,M.XA)(U),Ot=vt.next();!Ot.done;Ot=vt.next()){var lt=Ot.value;k.setItemState(lt,Ym,!1)}}catch(Qr){l={error:Qr}}finally{try{Ot&&!Ot.done&&(f=vt.return)&&f.call(vt)}finally{if(l)throw l.error}}else try{for(var fr=(0,M.XA)(U),Tr=fr.next();!Tr.done;Tr=fr.next()){var lt=Tr.value;k.setItemState(lt,Ym,lt.id!==B.id)}}catch(Qr){d={error:Qr}}finally{try{Tr&&!Tr.done&&(m=fr.return)&&m.call(fr)}finally{if(d)throw d.error}}else try{for(var zr=(0,M.XA)(U),cn=zr.next();!cn.done;cn=zr.next()){var lt=cn.value;k.setItemState(lt,Ym,lt.id!==B.id)}}catch(Qr){x={error:Qr}}finally{try{cn&&!cn.done&&(A=zr.return)&&A.call(zr)}finally{if(x)throw x.error}}}},n}(Lg),_P=P4,xP="showRadio",eC="legend-radio-tip",O4=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.timeStamp=0,t}return n.prototype.show=function(){var t=this.getTriggerListInfo();if(t!=null&&t.item){var s=t.list,l=t.item;s.setItemState(l,xP,!0)}},n.prototype.hide=function(){var t=this.getTriggerListInfo();if(t!=null&&t.item){var s=t.list,l=t.item;s.setItemState(l,xP,!1)}},n.prototype.destroy=function(){i.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},n.prototype.showTip=function(){var t=this.context,s=t.event,l=this.timeStamp,f=+new Date,d=this.context.event.target;if(f-l>16&&d.get("name")==="legend-item-radio"){var m=this.location,x={x:s.x,y:s.y};this.timeStamp=f,this.location=x,(!m||!(0,E.Xy)(m,x))&&this.showTooltip(x)}},n.prototype.hideTip=function(){this.hideTooltip(),this.location=null},n.prototype.showTooltip=function(t){var s=this.context,l=s.event,f=l.target;if(f&&f.get("tip")){this.tooltip||this.renderTooltip();var d=s.view.getCanvas().get("el").getBoundingClientRect(),m=d.x,x=d.y;this.tooltip.update((0,M.pi)((0,M.pi)({title:f.get("tip")},t),{x:t.x+m,y:t.y+x})),this.tooltip.show()}},n.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},n.prototype.renderTooltip=function(){var t,s=(t={},t[Tl]={padding:"6px 8px",transform:"translate(-50%, -80%)",background:"rgba(0,0,0,0.75)",color:"#fff","border-radius":"2px","z-index":100},t[Hl]={"font-size":"12px","line-height":"14px","margin-bottom":0,"word-break":"break-all"},t);document.getElementById(eC)&&document.body.removeChild(document.getElementById(eC));var l=new jd({parent:document.body,region:null,visible:!1,crosshairs:null,domStyles:s,containerId:eC});l.init(),l.setCapture(!1),this.tooltip=l},n}(Lg),bP=O4,SP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.maskShape=null,t.points=[],t.starting=!1,t.moving=!1,t.preMovePoint=null,t.shapeType="path",t}return n.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},n.prototype.emitEvent=function(t){var s="mask:".concat(t),l=this.context.view,f=this.context.event;l.emit(s,{target:this.maskShape,shape:this.maskShape,points:this.points,x:f.x,y:f.y})},n.prototype.createMask=function(){var t=this.context.view,s=this.getMaskAttrs(),l=t.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:(0,M.pi)({fill:"#C5D4EB",opacity:.3},s)});return l},n.prototype.getMaskPath=function(){return[]},n.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},n.prototype.start=function(t){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(t==null?void 0:t.maskStyle),this.emitEvent("start")},n.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},n.prototype.move=function(){if(!(!this.moving||!this.maskShape)){var t=this.getCurrentPoint(),s=this.preMovePoint,l=t.x-s.x,f=t.y-s.y,d=this.points;(0,E.S6)(d,function(m){m.x+=l,m.y+=f}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t}},n.prototype.updateMask=function(t){var s=(0,E.b$)({},this.getMaskAttrs(),t);this.maskShape.attr(s)},n.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},n.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},n.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},n.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},n.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,i.prototype.destroy.call(this)},n}(En),tC=SP;function Tb(i){var n=(0,E.Z$)(i),t=0,s=0,l=0;if(i.length){var f=i[0];t=Tn(f,n)/2,s=(n.x+f.x)/2,l=(n.y+f.y)/2}return{x:s,y:l,r:t}}var k4=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.shapeType="circle",t}return n.prototype.getMaskAttrs=function(){return Tb(this.points)},n}(tC),EP=k4;function wP(i){return{start:(0,E.YM)(i),end:(0,E.Z$)(i)}}function rC(i,n){var t=Math.min(i.x,n.x),s=Math.min(i.y,n.y),l=Math.abs(n.x-i.x),f=Math.abs(n.y-i.y);return{x:t,y:s,width:l,height:f}}var CP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.shapeType="rect",t}return n.prototype.getRegion=function(){return wP(this.points)},n.prototype.getMaskAttrs=function(){var t=this.getRegion(),s=t.start,l=t.end;return rC(s,l)},n}(tC),Mb=CP;function Rb(i){i.x=(0,E.uZ)(i.x,0,1),i.y=(0,E.uZ)(i.y,0,1)}function Cd(i,n,t,s){var l=null,f=null,d=s.invert((0,E.YM)(i)),m=s.invert((0,E.Z$)(i));return t&&(Rb(d),Rb(m)),n==="x"?(l=s.convert({x:d.x,y:0}),f=s.convert({x:m.x,y:1})):(l=s.convert({x:0,y:d.y}),f=s.convert({x:1,y:m.y})),{start:l,end:f}}var nC=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return n.prototype.getRegion=function(){var t=this.context.view.getCoordinate();return Cd(this.points,this.dim,this.inPlot,t)},n}(Mb),Sh=nC;function iC(i){var n=[];return i.length&&((0,E.S6)(i,function(t,s){s===0?n.push(["M",t.x,t.y]):n.push(["L",t.x,t.y])}),n.push(["L",i[0].x,i[0].y])),n}function AP(i){return{path:iC(i)}}var TP=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getMaskPath=function(){return iC(this.points)},n.prototype.getMaskAttrs=function(){return AP(this.points)},n.prototype.addPoint=function(){this.resize()},n}(tC),MP=TP;function aC(i){return Bt(i,!0)}function oC(i){return{path:aC(i)}}var F4=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getMaskPath=function(){return aC(this.points)},n.prototype.getMaskAttrs=function(){return oC(this.points)},n}(MP),D4=F4,RP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.maskShapes=[],t.starting=!1,t.moving=!1,t.recordPoints=null,t.preMovePoint=null,t.shapeType="path",t.maskType="multi-mask",t}return n.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},n.prototype.emitEvent=function(t){var s="".concat(this.maskType,":").concat(t),l=this.context.view,f=this.context.event,d={type:this.shapeType,name:this.maskType,get:function(m){return d.hasOwnProperty(m)?d[m]:void 0}};l.emit(s,{target:d,maskShapes:this.maskShapes,multiPoints:this.recordPoints,x:f.x,y:f.y})},n.prototype.createMask=function(t){var s=this.context.view,l=this.recordPoints[t],f=this.getMaskAttrs(l),d=s.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:(0,M.pi)({fill:"#C5D4EB",opacity:.3},f)});this.maskShapes.push(d)},n.prototype.getMaskPath=function(t){return[]},n.prototype.show=function(){this.maskShapes.length>0&&(this.maskShapes.forEach(function(t){return t.show()}),this.emitEvent("show"))},n.prototype.start=function(t){this.recordPointStart(),this.starting=!0,this.moving=!1;var s=this.recordPoints.length-1;this.createMask(s),this.updateShapesCapture(!1),this.updateMask(t==null?void 0:t.maskStyle),this.emitEvent("start")},n.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint(),this.updateShapesCapture(!1)},n.prototype.move=function(){if(!(!this.moving||this.maskShapes.length===0)){var t=this.getCurrentPoint(),s=this.preMovePoint,l=t.x-s.x,f=t.y-s.y,d=this.getCurMaskShapeIndex();d>-1&&(this.recordPoints[d].forEach(function(m){m.x+=l,m.y+=f}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t)}},n.prototype.updateMask=function(t){var s=this;this.recordPoints.forEach(function(l,f){var d=(0,E.b$)({},s.getMaskAttrs(l),t);s.maskShapes[f].attr(d)})},n.prototype.resize=function(){this.starting&&this.maskShapes.length>0&&(this.recordPointContinue(),this.updateMask(),this.emitEvent("change"))},n.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null,this.updateShapesCapture(!0)},n.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.updateShapesCapture(!0)},n.prototype.hide=function(){this.maskShapes.length>0&&(this.maskShapes.forEach(function(t){return t.hide()}),this.emitEvent("hide"))},n.prototype.remove=function(){var t=this.getCurMaskShapeIndex();t>-1&&(this.recordPoints.splice(t,1),this.maskShapes[t].remove(),this.maskShapes.splice(t,1),this.preMovePoint=null,this.updateShapesCapture(!0),this.emitEvent("change"))},n.prototype.clearAll=function(){this.recordPointClear(),this.maskShapes.forEach(function(t){return t.remove()}),this.maskShapes=[],this.preMovePoint=null},n.prototype.clear=function(){var t=this.getCurMaskShapeIndex();t===-1?(this.recordPointClear(),this.maskShapes.forEach(function(s){return s.remove()}),this.maskShapes=[],this.emitEvent("clearAll")):(this.recordPoints.splice(t,1),this.maskShapes[t].remove(),this.maskShapes.splice(t,1),this.preMovePoint=null,this.emitEvent("clearSingle")),this.preMovePoint=null},n.prototype.destroy=function(){this.clear(),i.prototype.destroy.call(this)},n.prototype.getRecordPoints=function(){var t;return(0,M.ev)([],(0,M.CR)((t=this.recordPoints)!==null&&t!==void 0?t:[]),!1)},n.prototype.recordPointStart=function(){var t=this.getRecordPoints(),s=this.getCurrentPoint();this.recordPoints=(0,M.ev)((0,M.ev)([],(0,M.CR)(t),!1),[[s]],!1)},n.prototype.recordPointContinue=function(){var t=this.getRecordPoints(),s=this.getCurrentPoint(),l=t.splice(-1,1)[0]||[];l.push(s),this.recordPoints=(0,M.ev)((0,M.ev)([],(0,M.CR)(t),!1),[l],!1)},n.prototype.recordPointClear=function(){this.recordPoints=[]},n.prototype.updateShapesCapture=function(t){this.maskShapes.forEach(function(s){return s.set("capture",t)})},n.prototype.getCurMaskShapeIndex=function(){var t=this.getCurrentPoint();return this.maskShapes.findIndex(function(s){var l=s.attrs,f=l.width,d=l.height,m=l.r,x=f===0||d===0||m===0;return!x&&s.isHit(t.x,t.y)})},n}(En),sC=RP,L4=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.shapeType="rect",t}return n.prototype.getRegion=function(t){return wP(t)},n.prototype.getMaskAttrs=function(t){var s=this.getRegion(t),l=s.start,f=s.end;return rC(l,f)},n}(sC),uC=L4,IP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return n.prototype.getRegion=function(t){var s=this.context.view.getCoordinate();return Cd(t,this.dim,this.inPlot,s)},n}(uC),lC=IP,B4=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.shapeType="circle",t.getMaskAttrs=Tb,t}return n}(sC),N4=B4,z4=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.getMaskPath=iC,t.getMaskAttrs=AP,t}return n.prototype.addPoint=function(){this.resize()},n}(sC),cC=z4,U4=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.getMaskPath=aC,t.getMaskAttrs=oC,t}return n}(cC),Z4=U4,PP=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.setCursor=function(t){var s=this.context.view;s.getCanvas().setCursor(t)},n.prototype.default=function(){this.setCursor("default")},n.prototype.pointer=function(){this.setCursor("pointer")},n.prototype.move=function(){this.setCursor("move")},n.prototype.crosshair=function(){this.setCursor("crosshair")},n.prototype.wait=function(){this.setCursor("wait")},n.prototype.help=function(){this.setCursor("help")},n.prototype.text=function(){this.setCursor("text")},n.prototype.eResize=function(){this.setCursor("e-resize")},n.prototype.wResize=function(){this.setCursor("w-resize")},n.prototype.nResize=function(){this.setCursor("n-resize")},n.prototype.sResize=function(){this.setCursor("s-resize")},n.prototype.neResize=function(){this.setCursor("ne-resize")},n.prototype.nwResize=function(){this.setCursor("nw-resize")},n.prototype.seResize=function(){this.setCursor("se-resize")},n.prototype.swResize=function(){this.setCursor("sw-resize")},n.prototype.nsResize=function(){this.setCursor("ns-resize")},n.prototype.ewResize=function(){this.setCursor("ew-resize")},n.prototype.zoomIn=function(){this.setCursor("zoom-in")},n.prototype.zoomOut=function(){this.setCursor("zoom-out")},n}(En),V4=PP,OP=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.filterView=function(t,s,l){var f=this;t.getScaleByField(s)&&t.filter(s,l),t.views&&t.views.length&&(0,E.S6)(t.views,function(d){f.filterView(d,s,l)})},n.prototype.filter=function(){var t=Uo(this.context);if(t){var s=this.context.view,l=t.component,f=l.get("field");if(zs(t)){if(f){var d=l.getItemsByState("unchecked"),m=Ir(s,f),x=d.map(function(U){return U.name});x.length?this.filterView(s,f,function(U){var W=m.getText(U);return!x.includes(W)}):this.filterView(s,f,null),s.render(!0)}}else if(Fs(t)){var A=l.getValue(),P=(0,M.CR)(A,2),k=P[0],B=P[1];this.filterView(s,f,function(U){return U>=k&&U<=B}),s.render(!0)}}},n}(En),kP=OP;function fC(i,n,t,s){var l=Math.min(t[n],s[n]),f=Math.max(t[n],s[n]),d=(0,M.CR)(i.range,2),m=d[0],x=d[1];if(l<m&&(l=m),f>x&&(f=x),l===x&&f===x)return null;var A=i.invert(l),P=i.invert(f);if(i.isCategory){var k=i.values.indexOf(A),B=i.values.indexOf(P),U=i.values.slice(k,B+1);return function(W){return U.includes(W)}}else return function(W){return W>=A&&W<=P}}var Gf;(function(i){i.FILTER="brush-filter-processing",i.RESET="brush-filter-reset",i.BEFORE_FILTER="brush-filter:beforefilter",i.AFTER_FILTER="brush-filter:afterfilter",i.BEFORE_RESET="brush-filter:beforereset",i.AFTER_RESET="brush-filter:afterreset"})(Gf||(Gf={}));var FP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.dims=["x","y"],t.startPoint=null,t.isStarted=!1,t}return n.prototype.hasDim=function(t){return this.dims.includes(t)},n.prototype.start=function(){var t=this.context;this.isStarted=!0,this.startPoint=t.getCurrentPoint()},n.prototype.filter=function(){var t,s;if($s(this.context)){var l=this.context.event.target,f=l.getCanvasBBox();t={x:f.x,y:f.y},s={x:f.maxX,y:f.maxY}}else{if(!this.isStarted)return;t=this.startPoint,s=this.context.getCurrentPoint()}if(!(Math.abs(t.x-s.x)<5||Math.abs(t.x-s.y)<5)){var d=this.context,m=d.view,x=d.event,A={view:m,event:x,dims:this.dims};m.emit(Gf.BEFORE_FILTER,Ya.fromData(m,Gf.BEFORE_FILTER,A));var P=m.getCoordinate(),k=P.invert(s),B=P.invert(t);if(this.hasDim("x")){var U=m.getXScale(),W=fC(U,"x",k,B);this.filterView(m,U.field,W)}if(this.hasDim("y")){var ne=m.getYScales()[0],W=fC(ne,"y",k,B);this.filterView(m,ne.field,W)}this.reRender(m,{source:Gf.FILTER}),m.emit(Gf.AFTER_FILTER,Ya.fromData(m,Gf.AFTER_FILTER,A))}},n.prototype.end=function(){this.isStarted=!1},n.prototype.reset=function(){var t=this.context.view;if(t.emit(Gf.BEFORE_RESET,Ya.fromData(t,Gf.BEFORE_RESET,{})),this.isStarted=!1,this.hasDim("x")){var s=t.getXScale();this.filterView(t,s.field,null)}if(this.hasDim("y")){var l=t.getYScales()[0];this.filterView(t,l.field,null)}this.reRender(t,{source:Gf.RESET}),t.emit(Gf.AFTER_RESET,Ya.fromData(t,Gf.AFTER_RESET,{}))},n.prototype.filterView=function(t,s,l){t.filter(s,l)},n.prototype.reRender=function(t,s){t.render(!0,s)},n}(En),Q_=FP,H4=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.filterView=function(t,s,l){var f=hr(t);(0,E.S6)(f,function(d){d.filter(s,l)})},n.prototype.reRender=function(t){var s=hr(t);(0,E.S6)(s,function(l){l.render(!0)})},n}(Q_),Ib=H4,j4=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.filter=function(){var t=Uo(this.context),s=this.context.view,l=da(s);if($s(this.context)){var f=Ks(this.context,10);f&&(0,E.S6)(l,function(ne){f.includes(ne)?ne.show():ne.hide()})}else if(t){var d=t.component,m=d.get("field");if(zs(t)){if(m){var x=d.getItemsByState("unchecked"),A=Ir(s,m),P=x.map(function(ne){return ne.name});(0,E.S6)(l,function(ne){var de=Du(ne,m),ve=A.getText(de);P.indexOf(ve)>=0?ne.hide():ne.show()})}}else if(Fs(t)){var k=d.getValue(),B=(0,M.CR)(k,2),U=B[0],W=B[1];(0,E.S6)(l,function(ne){var de=Du(ne,m);de>=U&&de<=W?ne.show():ne.hide()})}}},n.prototype.clear=function(){var t=da(this.context.view);(0,E.S6)(t,function(s){s.show()})},n.prototype.reset=function(){this.clear()},n}(En),W4=j4,DP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.byRecord=!1,t}return n.prototype.filter=function(){$s(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},n.prototype.filterByRecord=function(){var t=this.context.view,s=Ks(this.context,10);if(s){var l=t.getXScale().field,f=t.getYScales()[0].field,d=s.map(function(x){return x.getModel().data}),m=hr(t);(0,E.S6)(m,function(x){var A=da(x);(0,E.S6)(A,function(P){var k=P.getModel().data;Ar(d,k,l,f)?P.show():P.hide()})})}},n.prototype.filterByBBox=function(){var t=this,s=this.context.view,l=hr(s);(0,E.S6)(l,function(f){var d=Tu(t.context,f,10),m=da(f);d&&(0,E.S6)(m,function(x){d.includes(x)?x.show():x.hide()})})},n.prototype.reset=function(){var t=hr(this.context.view);(0,E.S6)(t,function(s){var l=da(s);(0,E.S6)(l,function(f){f.show()})})},n}(En),LP=DP,G4=10,BP=5,jv=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},t}return n.prototype.getButtonCfg=function(){return(0,E.b$)(this.buttonCfg,this.cfg)},n.prototype.drawButton=function(){var t=this.getButtonCfg(),s=this.context.view.foregroundGroup.addGroup({name:t.name}),l=s.addShape({type:"text",name:"button-text",attrs:(0,M.pi)({text:t.text},t.textStyle)}),f=l.getBBox(),d=Dc(t.padding),m=s.addShape({type:"rect",name:"button-rect",attrs:(0,M.pi)({x:f.x-d[3],y:f.y-d[0],width:f.width+d[1]+d[3],height:f.height+d[0]+d[2]},t.style)});m.toBack(),s.on("mouseenter",function(){m.attr(t.activeStyle)}),s.on("mouseleave",function(){m.attr(t.style)}),this.buttonGroup=s},n.prototype.resetPosition=function(){var t=this.context.view,s=t.getCoordinate(),l=s.convert({x:1,y:1}),f=this.buttonGroup,d=f.getBBox(),m=mo.vs(null,[["t",l.x-d.width-G4,l.y+d.height+BP]]);f.setMatrix(m)},n.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},n.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},n.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),i.prototype.destroy.call(this)},n}(En),hC=jv,pC=4,dC=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.starting=!1,t.dragStart=!1,t}return n.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},n.prototype.drag=function(){if(this.startPoint){var t=this.context.getCurrentPoint(),s=this.context.view,l=this.context.event;this.dragStart?s.emit("drag",{target:l.target,x:l.x,y:l.y}):Tn(t,this.startPoint)>pC&&(s.emit("dragstart",{target:l.target,x:l.x,y:l.y}),this.dragStart=!0)}},n.prototype.end=function(){if(this.dragStart){var t=this.context.view,s=this.context.event;t.emit("dragend",{target:s.target,x:s.x,y:s.y})}this.starting=!1,this.dragStart=!1},n}(En),NP=dC,zP=5,UP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.starting=!1,t.isMoving=!1,t.startPoint=null,t.startMatrix=null,t}return n.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},n.prototype.move=function(){if(this.starting){var t=this.startPoint,s=this.context.getCurrentPoint(),l=Tn(t,s);if(l>zP&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var f=this.context.view,d=mo.vs(this.startMatrix,[["t",s.x-t.x,s.y-t.y]]);f.backgroundGroup.setMatrix(d),f.foregroundGroup.setMatrix(d),f.middleGroup.setMatrix(d)}}},n.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},n.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var t=this.context.view;t.backgroundGroup.resetMatrix(),t.foregroundGroup.resetMatrix(),t.middleGroup.resetMatrix(),this.isMoving=!1},n}(En),ZP=UP,Pb="x",J_="y",vC=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.dims=[Pb,J_],t.cfgFields=["dims"],t.cacheScaleDefs={},t}return n.prototype.hasDim=function(t){return this.dims.includes(t)},n.prototype.getScale=function(t){var s=this.context.view;return t==="x"?s.getXScale():s.getYScales()[0]},n.prototype.resetDim=function(t){var s=this.context.view;if(this.hasDim(t)&&this.cacheScaleDefs[t]){var l=this.getScale(t);s.scale(l.field,this.cacheScaleDefs[t]),this.cacheScaleDefs[t]=null}},n.prototype.reset=function(){this.resetDim(Pb),this.resetDim(J_);var t=this.context.view;t.render(!0)},n}(En),gC=vC,VP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.startPoint=null,t.starting=!1,t.startCache={},t}return n.prototype.start=function(){var t=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var s=this.dims;(0,E.S6)(s,function(l){var f=t.getScale(l),d=f.min,m=f.max,x=f.values;t.startCache[l]={min:d,max:m,values:x}})},n.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},n.prototype.translate=function(){var t=this;if(this.starting){var s=this.startPoint,l=this.context.view.getCoordinate(),f=this.context.getCurrentPoint(),d=l.invert(s),m=l.invert(f),x=m.x-d.x,A=m.y-d.y,P=this.context.view,k=this.dims;(0,E.S6)(k,function(B){t.translateDim(B,{x:x*-1,y:A*-1})}),P.render(!0)}},n.prototype.translateDim=function(t,s){if(this.hasDim(t)){var l=this.getScale(t);l.isLinear&&this.translateLinear(t,l,s)}},n.prototype.translateLinear=function(t,s,l){var f=this.context.view,d=this.startCache[t],m=d.min,x=d.max,A=x-m,P=l[t]*A;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:s.nice,min:m,max:x}),f.scale(s.field,{nice:!1,min:m+P,max:x+P})},n.prototype.reset=function(){i.prototype.reset.call(this),this.startPoint=null,this.starting=!1},n}(gC),mC=VP,HP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.zoomRatio=.05,t}return n.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},n.prototype.zoom=function(t){var s=this,l=this.dims;(0,E.S6)(l,function(f){s.zoomDim(f,t)}),this.context.view.render(!0)},n.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},n.prototype.zoomDim=function(t,s){if(this.hasDim(t)){var l=this.getScale(t);l.isLinear&&this.zoomLinear(t,l,s)}},n.prototype.zoomLinear=function(t,s,l){var f=this.context.view;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:s.nice,min:s.min,max:s.max});var d=this.cacheScaleDefs[t],m=d.max-d.min,x=s.min,A=s.max,P=l*m,k=x-P,B=A+P,U=B-k,W=U/m;B>k&&W<100&&W>.01&&f.scale(s.field,{nice:!1,min:x-P,max:A+P})},n}(gC),jP=HP;function Ob(i){var n=i.gEvent.originalEvent;return n.deltaY>0}var yC=1,_C=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.scroll=function(t){var s=this.context,l=s.view,f=s.event;if(l.getOptions().scrollbar){var d=(t==null?void 0:t.wheelDelta)||yC,m=l.getController("scrollbar"),x=l.getXScale(),A=l.getOptions().data,P=(0,E.dp)((0,E.I)(A,x.field)),k=(0,E.dp)(x.values),B=m.getValue(),U=Math.floor((P-k)*B),W=U+(Ob(f)?d:-d),ne=d/(P-k)/1e4,de=(0,E.uZ)(W/(P-k)+ne,0,1);m.setValue(de)}},n}(En),zc=_C,WP="aixs-description-tooltip",GP=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.show=function(){var t=this.context,s=Uo(t).axis,l=s.cfg.title,f=l.description,d=l.text,m=l.descriptionTooltipStyle,x=t.event,A=x.x,P=x.y;this.tooltip||this.renderTooltip(),this.tooltip.update({title:d||"",customContent:function(){return`
          <div class="`.concat(Tl,'" style={').concat(m,`}>
            <div class="`).concat(Hl,`">
              \u5B57\u6BB5\u8BF4\u660E\uFF1A`).concat(f,`
            </div>
          </div>
        `)},x:A,y:P}),this.tooltip.show()},n.prototype.destroy=function(){i.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},n.prototype.hide=function(){this.tooltip&&this.tooltip.hide()},n.prototype.renderTooltip=function(){var t,s=this.context.view,l=s.canvas,f={start:{x:0,y:0},end:{x:l.get("width"),y:l.get("height")}},d=new jd({parent:l.get("el").parentNode,region:f,visible:!1,containerId:WP,domStyles:(0,M.pi)({},(0,E.b$)({},(t={},t[Tl]={"max-width":"50%",padding:"10px","line-height":"15px","font-size":"12px",color:"rgba(0, 0, 0, .65)"},t[Hl]={"word-break":"break-all","margin-bottom":"3px"},t)))});d.init(),d.setCapture(!1),this.tooltip=d},n}(En),xC=GP;Wd("dark",Fo(kv)),te("canvas",xe),te("svg",he),L("Polygon",YE),L("Interval",AR),L("Schema",FR),L("Path",B_),L("Point",nf),L("Line",$E),L("Area",SR),L("Edge",ZE),L("Heatmap",Yx),L("Violin",qE),Ri("base",Co),Ri("interval",jR),Ri("pie",uw),Ri("polar",V_),Ji("overlap",iI),Ji("distribute",$R),Ji("fixed-overlap",nI),Ji("hide-overlap",_w),Ji("limit-in-shape",eI),Ji("limit-in-canvas",JR),Ji("limit-in-plot",Vm),Ji("pie-outer",KR),Ji("adjust-color",pI),Ji("interval-adjust-position",Sw),Ji("interval-hide-overlap",mI),Ji("point-adjust-position",ww),Ji("pie-spider",QR),Ji("path-adjust-position",SI),er("fade-in",Rw),er("fade-out",EI),er("grow-in-x",wI),er("grow-in-xy",AI),er("grow-in-y",CI),er("scale-in-x",kw),er("scale-in-y",fb),er("wave-in",Lw),er("zoom-in",Bw),er("zoom-out",MI),er("position-update",Ow),er("sector-path-update",TI),er("path-in",Pw),ai("rect",zw),ai("mirror",PI),ai("list",Wf),ai("matrix",II),ai("circle",db),ai("tree",x4),jh("axis",w4),jh("legend",Gi),jh("tooltip",ht),jh("annotation",E4),jh("slider",K_),jh("scrollbar",Hw),Vr("tooltip",mb),Vr("sibling-tooltip",T4),Vr("ellipsis-text",GI),Vr("element-active",KI),Vr("element-single-active",rP),Vr("element-range-active",JI),Vr("element-highlight",Eb),Vr("element-highlight-by-x",iP),Vr("element-highlight-by-color",wb),Vr("element-single-highlight",Gm),Vr("element-range-highlight",qw),Vr("element-sibling-highlight",qw,{effectSiblings:!0,effectByRecord:!0}),Vr("element-selected",cP),Vr("element-single-selected",hP),Vr("element-range-selected",uP),Vr("element-link-by-color",qI),Vr("active-region",HI),Vr("list-active",dP),Vr("list-selected",gP),Vr("list-highlight",Jw),Vr("list-unchecked",I4),Vr("list-checked",yP),Vr("list-focus",_P),Vr("list-radio",bP),Vr("legend-item-highlight",Jw,{componentNames:["legend"]}),Vr("axis-label-highlight",Jw,{componentNames:["axis"]}),Vr("axis-description",xC),Vr("rect-mask",Mb),Vr("x-rect-mask",Sh,{dim:"x"}),Vr("y-rect-mask",Sh,{dim:"y"}),Vr("circle-mask",EP),Vr("path-mask",MP),Vr("smooth-path-mask",D4),Vr("rect-multi-mask",uC),Vr("x-rect-multi-mask",lC,{dim:"x"}),Vr("y-rect-multi-mask",lC,{dim:"y"}),Vr("circle-multi-mask",N4),Vr("path-multi-mask",cC),Vr("smooth-path-multi-mask",Z4),Vr("cursor",V4),Vr("data-filter",kP),Vr("brush",Q_),Vr("brush-x",Q_,{dims:["x"]}),Vr("brush-y",Q_,{dims:["y"]}),Vr("sibling-filter",Ib),Vr("sibling-x-filter",Ib,{dims:"x"}),Vr("sibling-y-filter",Ib,{dims:"y"}),Vr("element-filter",W4),Vr("element-sibling-filter",LP),Vr("element-sibling-filter-record",LP,{byRecord:!0}),Vr("view-drag",NP),Vr("view-move",ZP),Vr("scale-translate",mC),Vr("scale-zoom",jP),Vr("reset-button",hC,{name:"reset-button",text:"reset"}),Vr("mousewheel-scroll",zc);function Xf(i){return i.isInPlot()}Fn("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),Fn("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseout",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),Fn("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),Fn("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),Fn("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),Fn("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),Fn("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),Fn("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),Fn("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),Fn("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),Fn("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),Fn("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(i){return!i.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(i){return!i.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),Fn("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Xf,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:Xf,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Xf,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),Fn("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),Fn("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Xf,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:Xf,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Xf,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),Fn("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Xf,action:"path-mask:start"},{trigger:"mousedown",isEnable:Xf,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),Fn("brush-x-multi",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"mousedown",isEnable:Xf,action:["x-rect-multi-mask:start","x-rect-multi-mask:show"]},{trigger:"mask:dragstart",action:["x-rect-multi-mask:moveStart"]}],processing:[{trigger:"mousemove",isEnable:function(i){return!Ys(i)},action:["x-rect-multi-mask:resize"]},{trigger:"multi-mask:change",action:"element-range-highlight:highlight"},{trigger:"mask:drag",action:["x-rect-multi-mask:move"]}],end:[{trigger:"mouseup",action:["x-rect-multi-mask:end"]},{trigger:"mask:dragend",action:["x-rect-multi-mask:moveEnd"]}],rollback:[{trigger:"dblclick",action:["x-rect-multi-mask:clear","cursor:crosshair"]},{trigger:"multi-mask:clearAll",action:["element-range-highlight:clear"]},{trigger:"multi-mask:clearSingle",action:["element-range-highlight:highlight"]}]}),Fn("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),Fn("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:["cursor:pointer","list-radio:show"]},{trigger:"legend-item:mouseleave",action:["cursor:default","list-radio:hide"]}],start:[{trigger:"legend-item:click",isEnable:function(i){return!i.isInShape("legend-item-radio")},action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","data-filter:filter","list-radio:show"]},{trigger:"legend-item-radio:mouseenter",action:["list-radio:showTip"]},{trigger:"legend-item-radio:mouseleave",action:["list-radio:hideTip"]},{trigger:"legend-item-radio:click",action:["list-focus:toggle","data-filter:filter","list-radio:show"]}]}),Fn("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),Fn("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),Fn("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","element-filter:filter"]}]}),Fn("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]}),Fn("axis-description",{start:[{trigger:"axis-description:mousemove",action:"axis-description:show"}],end:[{trigger:"axis-description:mouseleave",action:"axis-description:hide"}]});function bC(i){return i.gEvent.preventDefault(),i.gEvent.originalEvent.deltaY>0}Fn("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(i){return bC(i.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(i){return!bC(i.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),Fn("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]}),Fn("plot-mousewheel-scroll",{start:[{trigger:"plot:mousewheel",action:"mousewheel-scroll:scroll"}]});var Sf=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask","sync"],jp;(function(i){i.ERROR="error",i.WARN="warn",i.INFO="log"})(jp||(jp={}));var vy="AntV/G2Plot";function tc(i){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];var s=0;return"".concat(vy,": ").concat(i.replace(/%s/g,function(){return"".concat(n[s++])}))}function X4(i,n){for(var t=[],s=2;s<arguments.length;s++)t[s-2]=arguments[s];if(!i){var l=new Error(tc.apply(void 0,__spreadArray([n],t,!1)));throw l.name=vy,l}}function Ad(i,n,t){for(var s=[],l=3;l<arguments.length;l++)s[l-3]=arguments[l];n||console[i](tc.apply(void 0,(0,M.ev)([t],s,!1)))}function es(i,n){var t={};return i!==null&&typeof i=="object"&&n.forEach(function(s){var l=i[s];l!==void 0&&(t[s]=l)}),t}function e1(i,n){if(!i)return{};var t=i.filter(function(f){var d=(0,E.U2)(f,[n]);return(0,E.hj)(d)&&!isNaN(d)}),s=t.every(function(f){return(0,E.U2)(f,[n])>=0}),l=t.every(function(f){return(0,E.U2)(f,[n])<=0});return s?{min:0}:l?{max:0}:{}}function kb(i,n,t,s,l){if(l===void 0&&(l=[]),!Array.isArray(i))return{nodes:[],links:[]};var f=[],d={},m=-1;return i.forEach(function(x){var A=x[n],P=x[t],k=x[s],B=es(x,l);d[A]||(d[A]=(0,M.pi)({id:++m,name:A},B)),d[P]||(d[P]=(0,M.pi)({id:++m,name:P},B)),f.push((0,M.pi)({source:d[A].id,target:d[P].id,value:k},B))}),{nodes:Object.values(d).sort(function(x,A){return x.id-A.id}),links:f}}function us(i,n){var t=(0,E.hX)(i,function(s){var l=s[n];return l===null||typeof l=="number"&&!isNaN(l)});return Ad(jp.WARN,t.length===i.length,"illegal data existed in chart data."),t}var Fb=5,$4={}.toString,XP=function(i,n){return $4.call(i)==="[object "+n+"]"},SC=function(i){return XP(i,"Array")},EC=function(i){return typeof i=="object"&&i!==null},$P=function(i){if(!EC(i)||!XP(i,"Object"))return!1;for(var n=i;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(i)===n},gy=function(i,n,t,s){t=t||0,s=s||Fb;for(var l in n)if(Object.prototype.hasOwnProperty.call(n,l)){var f=n[l];f?$P(f)?($P(i[l])||(i[l]={}),t<s?gy(i[l],f,t+1,s):i[l]=n[l]):SC(f)?(i[l]=[],i[l]=i[l].concat(f)):i[l]=f:i[l]=f}},vn=function(i){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];for(var s=0;s<n.length;s+=1)gy(i,n[s]);return i};function ml(i){if(!i)return{width:0,height:0};var n=getComputedStyle(i);return{width:(i.clientWidth||parseInt(n.width,10))-parseInt(n.paddingLeft,10)-parseInt(n.paddingRight,10),height:(i.clientHeight||parseInt(n.height,10))-parseInt(n.paddingTop,10)-parseInt(n.paddingBottom,10)}}function Aa(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return function(t){return i.reduce(function(s,l){return l(s)},t)}}function yl(i,n){return i.geometries.find(function(t){return t.type===n})}function Km(i){return(0,E.u4)(i.geometries,function(n,t){return n.concat(t.elements)},[])}function ep(i){return(0,E.U2)(i,["views","length"],0)<=0?Km(i):(0,E.u4)(i.views,function(n,t){return n.concat(ep(t))},Km(i))}function qm(i){return(0,E.U2)(i,["views","length"],0)<=0?i.geometries:(0,E.u4)(i.views,function(n,t){return n.concat(t.geometries)},i.geometries)}function Dl(i){if(!(0,E.P9)(i,"Object"))return i;var n=(0,M.pi)({},i);return n.formatter&&!n.content&&(n.content=n.formatter),n}var wC;function YP(){return wC||(wC=document.createElement("canvas").getContext("2d")),wC}var ao=(0,E.HP)(function(i,n){n===void 0&&(n={});var t=n.fontSize,s=n.fontFamily,l=s===void 0?"sans-serif":s,f=n.fontWeight,d=n.fontStyle,m=n.fontVariant,x=YP();x.font=[d,f,m,"".concat(t,"px"),l].join(" ");var A=x.measureText((0,E.HD)(i)?i:"");return A.width},function(i,n){return n===void 0&&(n={}),(0,M.ev)([i],(0,E.VO)(n),!0).join("")});function Qm(i){return typeof i=="number"&&!isNaN(i)}function Y4(i,n,t){var s=Math.min(n,t),l=Math.max(n,t);return i>=s&&i<=l}function ov(i){if((0,E.hj)(i))return[i,i,i,i];if((0,E.kJ)(i)){var n=i.length;if(n===1)return[i[0],i[0],i[0],i[0]];if(n===2)return[i[0],i[1],i[0],i[1]];if(n===3)return[i[0],i[1],i[2],i[1]];if(n===4)return i}return[0,0,0,0]}function t1(i,n,t){n===void 0&&(n="bottom"),t===void 0&&(t=25);var s=ov(i),l=[n.startsWith("top")?t:0,n.startsWith("right")?t:0,n.startsWith("bottom")?t:0,n.startsWith("left")?t:0];return[s[0]+l[0],s[1]+l[1],s[2]+l[2],s[3]+l[3]]}function $f(i){var n=i.map(function(s){return ov(s)}),t=[0,0,0,0];return n.length>0&&(t=t.map(function(s,l){return n.forEach(function(f,d){s+=n[d][l]}),s})),t}function yy(i,n){var t=[];if(i.length){t.push(["M",i[0].x,i[0].y]);for(var s=1,l=i.length;s<l;s+=1){var f=i[s];t.push(["L",f.x,f.y])}n&&t.push(["Z"])}return t}var _y=function(i,n,t,s){var l=[],f,d,m=!!s,x,A;if(m){x=[1/0,1/0],A=[-1/0,-1/0];for(var P=0,k=i.length;P<k;P++){var B=i[P];x=ga.VV([0,0],x,B),A=ga.Fp([0,0],A,B)}x=ga.VV([0,0],x,s[0]),A=ga.Fp([0,0],A,s[1])}for(var P=0,U=i.length;P<U;P++){var B=i[P];if(t)f=i[P?P-1:U-1],d=i[(P+1)%U];else if(P===0||P===U-1){l.push(B);continue}else f=i[P-1],d=i[P+1];var W=[0,0];W=ga.lu(W,d,f),W=ga.bA(W,W,n);var ne=ga.TE(B,f),de=ga.TE(B,d),ve=ne+de;ve!==0&&(ne/=ve,de/=ve);var $e=ga.bA([0,0],W,-ne),lt=ga.bA([0,0],W,de),vt=ga.IH([0,0],B,$e),Ot=ga.IH([0,0],B,lt);m&&(vt=ga.Fp([0,0],vt,x),vt=ga.VV([0,0],vt,A),Ot=ga.Fp([0,0],Ot,x),Ot=ga.VV([0,0],Ot,A)),l.push(vt),l.push(Ot)}return t&&l.push(l.shift()),l};function xy(i,n,t){for(var s=!!n,l=[],f=0,d=i.length;f<d;f+=2)l.push([i[f],i[f+1]]);for(var m=_y(l,.4,s,t),x=l.length,A=[],P,k,B,f=0;f<x-1;f++)P=m[f*2],k=m[f*2+1],B=l[f+1],A.push(["C",P[0],P[1],k[0],k[1],B[0],B[1]]);return s&&(P=m[x],k=m[x+1],B=l[0],A.push(["C",P[0],P[1],k[0],k[1],B[0],B[1]])),A}function Db(i,n,t){var s=[],l=i[0],f=null;if(i.length<=2)return yy(i,n);for(var d=0,m=i.length;d<m;d++){var x=i[d];(!f||!(f.x===x.x&&f.y===x.y))&&(s.push(x.x),s.push(x.y),f=x)}var A=t||[[0,0],[1,1]],P=xy(s,n,A);return P.unshift(["M",l.x,l.y]),P}function Lb(i){if(!i)return i;var n=i.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g);return n.map(function(t){return t.toLowerCase()}).join("-")}function Bb(i){var n={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},t=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];(0,E.U2)(i,"fill")&&(n.color=i.fill);var s=es(i,t),l=s.shadowColor,f=s.shadowBlur,d=f===void 0?0:f,m=s.shadowOffsetX,x=m===void 0?0:m,A=s.shadowOffsetY,P=A===void 0?0:A;n["text-shadow"]="".concat([l,"".concat(x,"px"),"".concat(P,"px"),"".concat(d,"px")].join(" "));var k=es(i,t),B=k.stroke,U=k.lineWidth,W=U===void 0?0:U;return n["-webkit-text-stroke"]="".concat(["".concat(W,"px"),B].join(" ")),(0,E.S6)(i,function(ne,de){["fontSize"].includes(de)&&(0,E.hj)(ne)?n[Lb(de)]="".concat(ne,"px"):de&&!t.includes(de)&&(n[Lb(de)]="".concat(ne))}),n}function Nb(i,n){i.style["pointer-events"]="none",(0,E.S6)(n,function(t,s){s&&t&&(i.style[s]=t)})}var by=function(i,n,t){var s=n.statistic,l=n.plotType,f=s.title,d=s.content;[f,d].forEach(function(m,x){if(m){var A="";x===0?A=d?"translate(-50%, -100%)":"translate(-50%, -50%)":A=f?"translate(-50%, 0)":"translate(-50%, -50%)";var P=(0,E.mf)(m.style)?m.style(t):m.style;i.annotation().html((0,M.pi)({position:["50%","50%"],html:function(k,B){var U=B.getCoordinate(),W=0;if(l==="pie"||l==="ring-progress")W=U.getRadius()*U.innerRadius*2;else if(l==="liquid"){var ne=(0,E.U2)(B.geometries,[0,"elements",0,"shape"]);if(ne){var de=ne.find(function(vt){return vt.get("name")==="wrap"}),ve=de.getCanvasBBox().width;W=ve}}else W||(W=U.getWidth());Nb(k,(0,M.pi)({width:"".concat(W,"px"),transform:A},Bb(P)));var $e=B.getData();if(m.customHtml)return m.customHtml(k,B,t,$e);var lt=m.content;return m.formatter&&(lt=m.formatter(t,$e)),lt?(0,E.HD)(lt)?lt:"".concat(lt):"<div></div>"},key:"".concat(x===0?"top":"bottom","-statistic")},es(m,["offsetX","offsetY","rotate","style","formatter"])))}})},zb=function(i,n,t){var s=n.statistic,l=s.title,f=s.content;[l,f].forEach(function(d){if(d){var m=(0,E.mf)(d.style)?d.style(t):d.style;i.annotation().html((0,M.pi)({position:["50%","100%"],html:function(x,A){var P=A.getCoordinate(),k=A.views[0].getCoordinate(),B=k.getCenter(),U=k.getRadius(),W=Math.max(Math.sin(k.startAngle),Math.sin(k.endAngle))*U,ne=B.y+W-P.y.start-parseFloat((0,E.U2)(m,"fontSize",0)),de=P.getRadius()*P.innerRadius*2;Nb(x,(0,M.pi)({width:"".concat(de,"px"),transform:"translate(-50%, ".concat(ne,"px)")},Bb(m)));var ve=A.getData();if(d.customHtml)return d.customHtml(x,A,t,ve);var $e=d.content;return d.formatter&&($e=d.formatter(t,ve)),$e?(0,E.HD)($e)?$e:"".concat($e):"<div></div>"}},es(d,["offsetX","offsetY","rotate","style","formatter"])))}})};function Sy(i,n){return n?(0,E.u4)(n,function(t,s,l){return t.replace(new RegExp("{\\s*".concat(l,"\\s*}"),"g"),s)},i):i}function ho(i,n){return i.views.find(function(t){return t.id===n})}function Jm(i){var n=i.parent;return n?n.views:[]}function Ub(i){return Jm(i).filter(function(n){return n!==i})}function Ey(i,n,t){t===void 0&&(t=i.geometries),typeof n=="boolean"?i.animate(n):i.animate(!0),(0,E.S6)(t,function(s){var l;(0,E.mf)(n)?l=n(s.type||s.shapeType,s)||!0:l=n,s.animate(l)})}function e0(){return typeof window=="object"?window==null?void 0:window.devicePixelRatio:2}function CC(i,n){n===void 0&&(n=i);var t=document.createElement("canvas"),s=e0();t.width=i*s,t.height=n*s,t.style.width="".concat(i,"px"),t.style.height="".concat(n,"px");var l=t.getContext("2d");return l.scale(s,s),t}function Zb(i,n,t,s){s===void 0&&(s=t);var l=n.backgroundColor,f=n.opacity;i.globalAlpha=f,i.fillStyle=l,i.beginPath(),i.fillRect(0,0,t,s),i.closePath()}function KP(i,n,t){var s=i+n;return t?s*2:s}function Vb(i,n){var t=n?[[i*.25,i*.25],[i*.75,i*.75]]:[[i*.5,i*.5]];return t}function Wv(i,n){var t=n*Math.PI/180,s={a:Math.cos(t)*(1/i),b:Math.sin(t)*(1/i),c:-Math.sin(t)*(1/i),d:Math.cos(t)*(1/i),e:0,f:0};return s}var qP={size:6,padding:2,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0,isStagger:!0};function QP(i,n,t,s){var l=n.size,f=n.fill,d=n.lineWidth,m=n.stroke,x=n.fillOpacity;i.beginPath(),i.globalAlpha=x,i.fillStyle=f,i.strokeStyle=m,i.lineWidth=d,i.arc(t,s,l/2,0,2*Math.PI,!1),i.fill(),d&&i.stroke(),i.closePath()}function Hb(i){var n=vn({},qP,i),t=n.size,s=n.padding,l=n.isStagger,f=n.rotation,d=KP(t,s,l),m=Vb(d,l),x=CC(d,d),A=x.getContext("2d");Zb(A,n,d);for(var P=0,k=m;P<k.length;P++){var B=k[P],U=B[0],W=B[1];QP(A,n,U,W)}var ne=A.createPattern(x,"repeat");if(ne){var de=e0(),ve=Wv(de,f);ne.setTransform(ve)}return ne}var JP={rotation:45,spacing:5,opacity:1,backgroundColor:"transparent",strokeOpacity:.5,stroke:"#fff",lineWidth:2};function eO(i,n,t){var s=n.stroke,l=n.lineWidth,f=n.strokeOpacity,d=new Path2D(t);i.globalAlpha=f,i.lineCap="square",i.strokeStyle=l?s:"transparent",i.lineWidth=l,i.stroke(d)}function AC(i){var n=vn({},JP,i),t=n.spacing,s=n.rotation,l=n.lineWidth,f=t+l||1,d=t+l||1,m=`
            M 0 0 L `.concat(f,` 0
            M 0 `).concat(d," L ").concat(f," ").concat(d,`
            `),x=CC(f,d),A=x.getContext("2d");Zb(A,n,f,d),eO(A,n,m);var P=A.createPattern(x,"repeat");if(P){var k=e0(),B=Wv(k,s);P.setTransform(B)}return P}var K4={size:6,padding:1,isStagger:!0,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0};function r1(i,n,t,s){var l=n.stroke,f=n.size,d=n.fill,m=n.lineWidth,x=n.fillOpacity;i.globalAlpha=x,i.strokeStyle=l,i.lineWidth=m,i.fillStyle=d,i.strokeRect(t-f/2,s-f/2,f,f),i.fillRect(t-f/2,s-f/2,f,f)}function n1(i){var n=vn({},K4,i),t=n.size,s=n.padding,l=n.isStagger,f=n.rotation,d=KP(t,s,l),m=Vb(d,l),x=CC(d,d),A=x.getContext("2d");Zb(A,n,d);for(var P=0,k=m;P<k.length;P++){var B=k[P],U=B[0],W=B[1];r1(A,n,U,W)}var ne=A.createPattern(x,"repeat");if(ne){var de=e0(),ve=Wv(de,f);ne.setTransform(ve)}return ne}function q4(i){var n=i.type,t=i.cfg,s;switch(n){case"dot":s=Hb(t);break;case"line":s=AC(t);break;case"square":s=n1(t);break;default:break}return s}function Eh(i){var n=this;return function(t){var s,l=t.options,f=t.chart,d=l.pattern;if(!d)return t;var m=function(x){for(var A,P,k,B=[],U=1;U<arguments.length;U++)B[U-1]=arguments[U];var W=f.getTheme().defaultColor,ne=W,de=(P=(A=f.geometries)===null||A===void 0?void 0:A[0])===null||P===void 0?void 0:P.getAttribute("color");if(de){var ve=de.getFields()[0],$e=(0,E.U2)(x,ve);ne=ec.getMappingValue(de,$e,((k=de.values)===null||k===void 0?void 0:k[0])||W)}var lt=d;typeof d=="function"&&(lt=d.call(n,x,ne)),lt instanceof CanvasPattern||(lt=q4(vn({},{cfg:{backgroundColor:ne}},lt)));var vt=l[i];return(0,M.pi)((0,M.pi)({},typeof vt=="function"?vt.call.apply(vt,(0,M.ev)([n,x],B,!1)):vt||{}),{fill:lt||ne})};return vn({},t,{options:(s={},s[i]=m,s)})}}function t0(i){var n=i.chart,t=i.options,s=t.legend,l=t.colorField,f=t.seriesField;return s===!1?n.legend(!1):(l||f)&&n.legend(l||f,s),i}function Ll(i){var n=i.chart,t=i.options,s=t.tooltip;return s!==void 0&&n.tooltip(s),i}function _u(i){var n=i.chart,t=i.options,s=t.interactions;return(0,E.S6)(s,function(l){l.enable===!1?n.removeInteraction(l.type):n.interaction(l.type,l.cfg||{})}),i}function ls(i){var n=i.chart,t=i.options,s=t.animation;return Ey(n,s),i}function Lo(i){var n=i.chart,t=i.options,s=t.theme;return s&&n.theme(s),i}function Bg(i){var n=i.chart,t=i.options,s=t.state;return s&&(0,E.S6)(n.geometries,function(l){l.state(s)}),i}function i1(i){var n=i.chart,t=i.options,s=t.slider;return n.option("slider",s),i}function jb(i){var n=i.chart,t=i.options,s=t.scrollbar;return n.option("scrollbar",s),i}function Uu(i,n){return function(t){var s=t.chart,l=t.options,f={};return(0,E.S6)(i,function(d,m){f[m]=es(d,Sf)}),f=vn({},n,l.meta,f),s.scale(f),t}}function xu(i){return function(n){var t=n.chart,s=n.options,l=t.getController("annotation");return(0,E.S6)((0,M.ev)((0,M.ev)([],s.annotations||[],!0),i||[],!0),function(f){l.annotation(f)}),n}}function Ng(i){var n=i.chart,t=i.options,s=t.yAxis,l=t.limitInPlot,f=l;return(0,E.Kn)(s)&&(0,E.UM)(l)&&(Object.values(es(s,["min","max","minLimit","maxLimit"])).some(function(d){return!(0,E.UM)(d)})?f=!0:f=!1),n.limitInPlot=f,i}function TC(i){return i===void 0&&(i="rect"),function(n){var t=n.chart,s=n.options,l=s.coordinate,f=Array.from(l||[]).map(function(d){return d.type==="reflectX"?["reflect","x"]:d.type==="reflectY"?["reflect","y"]:d.type==="transpose"?["transpose"]:null}).filter(function(d){return!!d});return f.length!==0&&t.coordinate({type:i,actions:f}),n}}var MC={locale:"en-US"};function Q4(i){each(i,function(n,t){return MC[t]=n})}var a1={};function RC(i,n){a1[i]=n}function Wb(i){return{get:function(n,t){return Sy((0,E.U2)(a1[i],n)||(0,E.U2)(a1[MC.locale],n)||(0,E.U2)(a1["en-US"],n)||n,t)}}}var tO={locale:"en-US",general:{increase:"Increase",decrease:"Decrease",root:"Root"},statistic:{total:"Total"},conversionTag:{label:"Rate"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"Total"}},rO={locale:"zh-CN",general:{increase:"\u589E\u52A0",decrease:"\u51CF\u5C11",root:"\u521D\u59CB"},statistic:{total:"\u603B\u8BA1"},conversionTag:{label:"\u8F6C\u5316\u7387"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"\u603B\u8BA1"}};function tp(i,n){if(i===!1)return{fields:!1};var t=(0,E.U2)(i,"fields"),s=(0,E.U2)(i,"formatter");return s&&!t&&(t=n),{fields:t,formatter:s}}function o1(i,n){var t=i.type,s=i.xField,l=i.yField,f=i.colorField,d=i.shapeField,m=i.sizeField,x=i.styleField,A=i.rawFields,P=[];if(A=((0,E.mf)(A)?A(t,n):A)||[],n==="color")P=(0,M.ev)([f||s],A,!0);else if(n==="shape")P=(0,M.ev)([d||s],A,!0);else if(n==="size")P=(0,M.ev)([m||s],A,!0);else{P=(0,M.ev)([s,l,f,d,m,x],A,!0);var k=["x","y","color","shape","size","style"].indexOf(n),B=P[k];P.splice(k,1),P.unshift(B)}var U=(0,E.jj)(P.filter(function(ne){return!!ne})),W=t==="line"&&[s,l].includes(U.join("*"))?"":U.join("*");return{mappingFields:U,tileMappingField:W}}function r0(i,n){if(n)return function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var l={};return i.forEach(function(f,d){l[f]=t[d]}),delete l.undefined,n(l)}}function Yf(i){var n=i.chart,t=i.options,s=t.type,l=t.args,f=t.mapping,d=t.xField,m=t.yField,x=t.colorField,A=t.shapeField,P=t.sizeField,k=t.tooltipFields,B=t.label,U=t.state,W=t.customInfo;if(!f)return i;var ne=f.color,de=f.shape,ve=f.size,$e=f.style,lt=f.tooltip,vt=n[s](l).position("".concat(d,"*").concat(m));if((0,E.HD)(ne))x?vt.color(x,ne):vt.color(ne);else if((0,E.mf)(ne)){var Ot=o1(t,"color"),fr=Ot.mappingFields,Tr=Ot.tileMappingField;vt.color(Tr,r0(fr,ne))}else x&&vt.color(x,ne);if((0,E.HD)(de))A?vt.shape(A,[de]):vt.shape(de);else if((0,E.mf)(de)){var zr=o1(t,"shape"),fr=zr.mappingFields,Tr=zr.tileMappingField;vt.shape(Tr,r0(fr,de))}else A&&vt.shape(A,de);if((0,E.hj)(ve))P?vt.size(P,ve):vt.size(ve);else if((0,E.mf)(ve)){var cn=o1(t,"size"),fr=cn.mappingFields,Tr=cn.tileMappingField;vt.size(Tr,r0(fr,ve))}else P&&vt.size(P,ve);if((0,E.mf)($e)){var Qr=o1(t,"style"),fr=Qr.mappingFields,Tr=Qr.tileMappingField;vt.style(Tr,r0(fr,$e))}else(0,E.Kn)($e)&&vt.style($e);if(k===!1?vt.tooltip(!1):(0,E.xb)(k)||vt.tooltip(k.join("*"),r0(k,lt)),B===!1)vt.label(!1);else if(B){var On=B.callback,Qn=B.fields,Hi=(0,M._T)(B,["callback","fields"]);vt.label({fields:Qn||[m],callback:On,cfg:Dl(Hi)})}return U&&vt.state(U),W&&vt.customInfo(W),[d,m].filter(function(oa){return oa!==x}).forEach(function(oa){n.legend(oa,!1)}),(0,M.pi)((0,M.pi)({},i),{ext:{geometry:vt}})}function s1(i){var n=i.options,t=n.area,s=n.xField,l=n.yField,f=n.seriesField,d=n.smooth,m=n.tooltip,x=n.useDeferredLabel,A=tp(m,[s,l,f]),P=A.fields,k=A.formatter;return t?Yf(vn({},i,{options:{type:"area",colorField:f,tooltipFields:P,mapping:(0,E.b$)({shape:d?"smooth":"area",tooltip:k},t),args:{useDeferredLabel:x}}})):i}function IC(i){var n=i.options,t=n.edge,s=n.xField,l=n.yField,f=n.seriesField,d=n.tooltip,m=n.useDeferredLabel,x=tp(d,[s,l,f]),A=x.fields,P=x.formatter;return t?Yf(vn({},i,{options:{type:"edge",colorField:f,tooltipFields:A,mapping:(0,M.pi)({tooltip:P},t),args:{useDeferredLabel:m}}})):i}function nO(i){var n=i.chart,t=i.options,s=i.ext,l=t.seriesField,f=t.isGroup,d=t.isStack,m=t.marginRatio,x=t.widthRatio,A=t.groupField,P=t.theme,k=[];if(l&&(f&&k.push({type:"dodge",dodgeBy:A||l,marginRatio:m}),d&&k.push({type:"stack",marginRatio:m})),k.length&&(s!=null&&s.geometry)){var B=s==null?void 0:s.geometry;B.adjust(k)}return(0,E.UM)(x)||n.theme(vn({},(0,E.Kn)(P)?P:Dp(P),{columnWidthRatio:x})),i}function Uc(i){var n=i.options,t=n.xField,s=n.yField,l=n.interval,f=n.seriesField,d=n.tooltip,m=n.minColumnWidth,x=n.maxColumnWidth,A=n.columnBackground,P=n.dodgePadding,k=n.intervalPadding,B=n.useDeferredLabel,U=tp(d,[t,s,f]),W=U.fields,ne=U.formatter,de=(l?Yf(vn({},i,{options:{type:"interval",colorField:f,tooltipFields:W,mapping:(0,M.pi)({tooltip:ne},l),args:{dodgePadding:P,intervalPadding:k,minColumnWidth:m,maxColumnWidth:x,background:A,useDeferredLabel:B}}})):i).ext;return nO((0,M.pi)((0,M.pi)({},i),{ext:de}))}function n0(i){var n=i.options,t=n.line,s=n.stepType,l=n.xField,f=n.yField,d=n.seriesField,m=n.smooth,x=n.connectNulls,A=n.tooltip,P=n.useDeferredLabel,k=tp(A,[l,f,d]),B=k.fields,U=k.formatter;return t?Yf(vn({},i,{options:{type:"line",colorField:d,tooltipFields:B,mapping:(0,E.b$)({shape:s||(m?"smooth":"line"),tooltip:U},t),args:{connectNulls:x,useDeferredLabel:P}}})):i}function wh(i){var n=i.options,t=n.point,s=n.xField,l=n.yField,f=n.seriesField,d=n.sizeField,m=n.shapeField,x=n.tooltip,A=n.useDeferredLabel,P=tp(x,[s,l,f,d,m]),k=P.fields,B=P.formatter;return t?Yf(vn({},i,{options:{type:"point",colorField:f,shapeField:m,tooltipFields:k,mapping:(0,M.pi)({tooltip:B},t),args:{useDeferredLabel:A}}})):i}function u1(i){var n=i.options,t=n.polygon,s=n.xField,l=n.yField,f=n.seriesField,d=n.tooltip,m=n.useDeferredLabel,x=tp(d,[s,l,f]),A=x.fields,P=x.formatter;return t?Yf(vn({},i,{options:{type:"polygon",colorField:f,tooltipFields:A,mapping:(0,M.pi)({tooltip:P},t),args:{useDeferredLabel:m}}})):i}function Gb(i){var n=i.options,t=n.schema,s=n.xField,l=n.yField,f=n.seriesField,d=n.tooltip,m=n.useDeferredLabel,x=tp(d,[s,l,f]),A=x.fields,P=x.formatter;return t?Yf(vn({},i,{options:{type:"schema",colorField:f,tooltipFields:A,mapping:(0,M.pi)({tooltip:P},t),args:{useDeferredLabel:m}}})):i}function iO(i){var n=i.options,t=n.violin,s=n.xField,l=n.yField,f=n.seriesField,d=n.sizeField,m=n.tooltip,x=tp(m,[s,l,f,d]),A=x.fields,P=x.formatter;return t?Yf(vn({},i,{options:{type:"violin",colorField:f,tooltipFields:A,mapping:(0,M.pi)({tooltip:P},t)}})):i}var aO=F(18587),PC="data-chart-source-type",Xb=["padding","appendPadding","renderer","pixelRatio","syncViewPadding","supportCSSTransform","limitInPlot"],Ta=function(i){(0,M.ZT)(n,i);function n(t,s){var l=i.call(this)||this;return l.container=typeof t=="string"?document.getElementById(t):t,l.options=vn({},l.getDefaultOptions(),s),l.createG2(),l.bindEvents(),l}return n.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},n.prototype.createG2=function(){var t=this.options,s=t.width,l=t.height,f=t.defaultInteractions;this.chart=new ae((0,M.pi)((0,M.pi)((0,M.pi)((0,M.pi)({container:this.container,autoFit:!1},this.getChartSize(s,l)),{localRefresh:!1}),es(this.options,Xb)),{defaultInteractions:f})),this.container.setAttribute(PC,"G2Plot")},n.prototype.getChartSize=function(t,s){var l=ml(this.container);return{width:t||l.width||400,height:s||l.height||400}},n.prototype.bindEvents=function(){var t=this;this.chart&&this.chart.on("*",function(s){s!=null&&s.type&&t.emit(s.type,s)})},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},n.prototype.update=function(t){this.updateOption(t),this.render()},n.prototype.updateOption=function(t){this.options=vn({},this.options,t)},n.prototype.setState=function(t,s,l){l===void 0&&(l=!0);var f=ep(this.chart);(0,E.S6)(f,function(d){s(d.getData())&&d.setState(t,l)})},n.prototype.getStates=function(){var t=ep(this.chart),s=[];return(0,E.S6)(t,function(l){var f=l.getData(),d=l.getStates();(0,E.S6)(d,function(m){s.push({data:f,state:m,geometry:l.geometry,element:l})})}),s},n.prototype.changeData=function(t){this.update({data:t})},n.prototype.changeSize=function(t,s){this.chart.changeSize(t,s)},n.prototype.addAnnotations=function(t,s){s=s||this.chart;var l=(0,M.ev)([],t,!0),f=s.getController("annotation"),d=f.getComponents().map(function(A){return A.extra});f.clear(!0);for(var m=function(A){var P=d[A],k=l.findIndex(function(B){return B.id&&B.id===P.id});k!==-1&&(P=vn({},P,l[k]),l.splice(k,1)),f.annotation(P)},x=0;x<d.length;x++)m(x);l.forEach(function(A){return f.annotation(A)}),s.render(!0)},n.prototype.removeAnnotations=function(t){var s=this.chart.getController("annotation"),l=s.getComponents().map(function(m){return m.extra});s.clear(!0);for(var f=function(m){var x=l[m];t.find(function(A){return A.id&&A.id===x.id})||s.annotation(x)},d=0;d<l.length;d++)f(d);this.chart.render(!0)},n.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute(PC)},n.prototype.execAdaptor=function(){var t=this.getSchemaAdaptor(),s=this.options,l=s.padding,f=s.appendPadding;this.chart.padding=l,this.chart.appendPadding=f,t({chart:this.chart,options:this.options})},n.prototype.triggerResize=function(){this.chart.forceFit()},n.prototype.bindSizeSensor=function(){var t=this;if(!this.unbind){var s=this.options.autoFit,l=s===void 0?!0:s;l&&(this.unbind=(0,aO.ak)(this.container,function(){var f=ml(t.container),d=f.width,m=f.height;(d!==t.chart.width||m!==t.chart.height)&&t.triggerResize()}))}},n.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},n}(Je.Z);function OC(i,n,t,s){var l=(0,E.u4)(i,function(f,d){var m=d[t],x=f.has(m)?f.get(m):0,A=d[n];return x=Qm(A)?x+A:x,f.set(m,x),f},new Map);return(0,E.UI)(i,function(f){var d,m=f[n],x=f[t],A=Qm(m)&&l.get(x)!==0?m/l.get(x):0;return(0,M.pi)((0,M.pi)({},f),(d={},d[s]=A,d))})}function oO(i,n,t,s){var l=(0,E.u4)(i,function(f,d){var m=(0,E.u4)(t,function(P,k){return"".concat(P).concat(d[k])},""),x=f.has(m)?f.get(m):0,A=d[n];return x=Qm(A)?x+A:x,f.set(m,x),f},new Map);return(0,E.UI)(i,function(f){var d,m=f[n],x=(0,E.u4)(t,function(P,k){return"".concat(P).concat(f[k])},""),A=Qm(m)&&l.get(x)!==0?m/l.get(x):0;return(0,M.pi)((0,M.pi)({},f),(d={},d[s]=A,d))})}function wy(i,n,t,s,l){return l?OC(i,n,t,s):i}function sO(i){var n=i.chart,t=i.options,s=t.data,l=t.color,f=t.lineStyle,d=t.lineShape,m=t.point,x=t.area,A=t.seriesField,P=m==null?void 0:m.state,k=x==null?void 0:x.state;n.data(s);var B=vn({},i,{options:{shapeField:A,line:{color:l,style:f,shape:d},point:m&&(0,M.pi)({color:l,shape:"circle"},m),area:x&&(0,M.pi)({color:l},x),label:void 0}}),U=vn({},B,{options:{tooltip:!1,state:P}}),W=vn({},B,{options:{tooltip:!1,state:k}});return n0(B),wh(U),s1(W),i}function l1(i){var n,t,s=i.options,l=s.xAxis,f=s.yAxis,d=s.xField,m=s.yField,x=s.data;return Aa(Uu((n={},n[d]=l,n[m]=f,n),(t={},t[d]={type:"cat"},t[m]=e1(x,m),t)))(i)}function uO(i){var n=i.chart,t=i.options,s=t.reflect;if(s){var l=s;(0,E.kJ)(l)||(l=[l]);var f=l.map(function(d){return["reflect",d]});n.coordinate({type:"rect",actions:f})}return i}function kC(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return s===!1?n.axis(f,!1):n.axis(f,s),l===!1?n.axis(d,!1):n.axis(d,l),i}function $b(i){var n=i.chart,t=i.options,s=t.legend,l=t.seriesField;return s&&l?n.legend(l,s):s===!1&&n.legend(!1),i}function lO(i){var n=i.chart,t=i.options,s=t.label,l=t.yField,f=yl(n,"line");if(!s)f.label(!1);else{var d=s.callback,m=(0,M._T)(s,["callback"]);f.label({fields:[l],callback:d,cfg:(0,M.pi)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Dl(m))})}return i}function cO(i){var n=i.chart,t=i.options,s=t.isStack;return s&&(0,E.S6)(n.geometries,function(l){l.adjust("stack")}),i}function FC(i){return Aa(sO,l1,cO,Lo,uO,kC,$b,Ll,lO,i1,jb,_u,ls,xu(),Ng)(i)}function DC(i){var n=i.chart,t=i.options,s=t.data,l=t.areaStyle,f=t.areaShape,d=t.color,m=t.point,x=t.line,A=t.isPercent,P=t.xField,k=t.yField,B=t.tooltip,U=t.seriesField,W=t.startOnZero,ne=m==null?void 0:m.state,de=wy(s,k,P,k,A);n.data(de);var ve=A?(0,M.pi)({formatter:function(Ot){return{name:Ot[U]||Ot[P],value:(Number(Ot[k])*100).toFixed(2)+"%"}}},B):B,$e=vn({},i,{options:{area:{color:d,style:l,shape:f},point:m&&(0,M.pi)({color:d},m),tooltip:ve,label:void 0,args:{startOnZero:W}}}),lt={chart:n,options:vn({line:{size:2}},(0,E.CE)(t,["state"]),{line:x&&(0,M.pi)({color:d},x),sizeField:U,state:x==null?void 0:x.state,tooltip:!1,label:void 0,args:{startOnZero:W}})},vt=vn({},$e,{options:{tooltip:!1,state:ne}});return s1($e),n0(lt),wh(vt),i}function fO(i){var n=i.chart,t=i.options,s=t.label,l=t.yField,f=yl(n,"area");if(!s)f.label(!1);else{var d=s.callback,m=(0,M._T)(s,["callback"]);f.label({fields:[l],callback:d,cfg:(0,M.pi)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Dl(m))})}return i}function hO(i){var n=i.chart,t=i.options,s=t.isStack,l=t.isPercent,f=t.seriesField;return(l||s)&&f&&(0,E.S6)(n.geometries,function(d){d.adjust("stack")}),i}function LC(i){return Aa(Lo,Eh("areaStyle"),TC("rect"),DC,l1,hO,kC,$b,Ll,fO,i1,xu(),_u,ls,Ng)(i)}var pO=vn({},Ta.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left",radio:{}}}),dO=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="area",t}return n.getDefaultOptions=function(){return pO},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this.options,l=s.isPercent,f=s.xField,d=s.yField,m=this,x=m.chart,A=m.options;l1({chart:x,options:A}),this.chart.changeData(wy(t,d,f,d,l))},n.prototype.getSchemaAdaptor=function(){return LC},n}(Ta),vO=10,gO=5,mO={padding:[8,10],text:"reset",textStyle:{default:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"}},buttonStyle:{default:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},active:{fill:"#e6e6e6"}}},yO=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg=(0,M.pi)({name:"button"},mO),t}return n.prototype.getButtonCfg=function(){var t=this.context.view,s=(0,E.U2)(t,["interactions","filter-action","cfg","buttonConfig"]);return vn(this.buttonCfg,s,this.cfg)},n.prototype.drawButton=function(){var t=this.getButtonCfg(),s=this.context.view.foregroundGroup.addGroup({name:t.name}),l=this.drawText(s);this.drawBackground(s,l.getBBox()),this.buttonGroup=s},n.prototype.drawText=function(t){var s,l=this.getButtonCfg();return t.addShape({type:"text",name:"button-text",attrs:(0,M.pi)({text:l.text},(s=l.textStyle)===null||s===void 0?void 0:s.default)})},n.prototype.drawBackground=function(t,s){var l,f=this.getButtonCfg(),d=ov(f.padding),m=t.addShape({type:"rect",name:"button-rect",attrs:(0,M.pi)({x:s.x-d[3],y:s.y-d[0],width:s.width+d[1]+d[3],height:s.height+d[0]+d[2]},(l=f.buttonStyle)===null||l===void 0?void 0:l.default)});return m.toBack(),t.on("mouseenter",function(){var x;m.attr((x=f.buttonStyle)===null||x===void 0?void 0:x.active)}),t.on("mouseleave",function(){var x;m.attr((x=f.buttonStyle)===null||x===void 0?void 0:x.default)}),m},n.prototype.resetPosition=function(){var t=this.context.view,s=t.getCoordinate(),l=s.convert({x:1,y:1}),f=this.buttonGroup,d=f.getBBox(),m=ec.transform(null,[["t",l.x-d.width-vO,l.y+d.height+gO]]);f.setMatrix(m)},n.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},n.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},n.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),i.prototype.destroy.call(this)},n}(En);Vr("brush-reset-button",yO,{name:"brush-reset-button"}),Fn("filter-action",{});function sv(i){return i.isInPlot()}function zg(i,n,t){var s=t||{},l=s.mask,f=s.isStartEnable,d=n||"rect";switch(i){case"brush":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:f||sv,action:["brush:start","".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[null,{maskStyle:l==null?void 0:l.style}]}],processing:[{trigger:"mousemove",isEnable:sv,action:["".concat(d,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:sv,action:["brush:filter","brush:end","".concat(d,"-mask:end"),"".concat(d,"-mask:hide"),"brush-reset-button:show"]}],rollback:[{trigger:"brush-reset-button:click",action:["brush:reset","brush-reset-button:hide","cursor:crosshair"]}]};case"brush-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:default",isEnable:function(m){return f?!f(m):!1}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:f||function(m){return!m.isInShape("mask")},action:["".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[{maskStyle:l==null?void 0:l.style}]},{trigger:"mask:dragstart",action:["".concat(d,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(d,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(d,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(d,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(d,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(m){return!m.isInPlot()},action:["element-range-highlight:clear","".concat(d,"-mask:end"),"".concat(d,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(d,"-mask:hide")]}]};case"brush-x":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:f||sv,action:["brush-x:start","".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[null,{maskStyle:l==null?void 0:l.style}]}],processing:[{trigger:"mousemove",isEnable:sv,action:["".concat(d,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:sv,action:["brush-x:filter","brush-x:end","".concat(d,"-mask:end"),"".concat(d,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]};case"brush-x-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:f||function(m){return!m.isInShape("mask")},action:["".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[{maskStyle:l==null?void 0:l.style}]},{trigger:"mask:dragstart",action:["".concat(d,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(d,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(d,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(d,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(d,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(m){return!m.isInPlot()},action:["element-range-highlight:clear","".concat(d,"-mask:end"),"".concat(d,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(d,"-mask:hide")]}]};case"brush-y":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:f||sv,action:["brush-y:start","".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[null,{maskStyle:l==null?void 0:l.style}]}],processing:[{trigger:"mousemove",isEnable:sv,action:["".concat(d,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:sv,action:["brush-y:filter","brush-y:end","".concat(d,"-mask:end"),"".concat(d,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["brush-y:reset"]}]};case"brush-y-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:f||function(m){return!m.isInShape("mask")},action:["".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[{maskStyle:l==null?void 0:l.style}]},{trigger:"mask:dragstart",action:["".concat(d,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(d,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(d,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(d,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(d,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(m){return!m.isInPlot()},action:["element-range-highlight:clear","".concat(d,"-mask:end"),"".concat(d,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(d,"-mask:hide")]}]};default:return{}}}Fn("brush",zg("brush")),Fn("brush-highlight",zg("brush-highlight")),Fn("brush-x",zg("brush-x","x-rect")),Fn("brush-y",zg("brush-y","y-rect")),Fn("brush-x-highlight",zg("brush-x-highlight","x-rect")),Fn("brush-y-highlight",zg("brush-y-highlight","y-rect"));var _O=["brush","brush-x","brush-y","brush-highlight","brush-x-highlight","brush-y-highlight"];function Cy(i){var n=i.options,t=n.brush,s=(0,E.hX)(n.interactions||[],function(l){return _O.indexOf(l.type)===-1});return t!=null&&t.enabled&&(_O.forEach(function(l){var f=!1;switch(t.type){case"x-rect":f=l===(t.action==="highlight"?"brush-x-highlight":"brush-x");break;case"y-rect":f=l===(t.action==="highlight"?"brush-y-highlight":"brush-y");break;default:f=l===(t.action==="highlight"?"brush-highlight":"brush");break}var d={type:l,enable:f};t&&(d.cfg=zg(l,t.type,t)),s.push(d)}),(t==null?void 0:t.action)!=="highlight"&&s.push({type:"filter-action",cfg:{buttonConfig:t.button}})),vn({},i,{options:{interactions:s}})}var Ug={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"},Ay=function(i,n){return i==="hover"?[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"],arg:[null,{style:n}]}]:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"],arg:[null,null,null,null,{style:n}]}]};Fn(Ug.hover,{start:Ay(Ug.hover),end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]}),Fn(Ug.click,{start:Ay(Ug.click),end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});function J4(i){return i===void 0&&(i=!1),function(n){var t=n.chart,s=n.options,l=s.connectedArea,f=function(){t.removeInteraction(Ug.hover),t.removeInteraction(Ug.click)};if(!i&&l){var d=l.trigger||"hover";f(),t.interaction(Ug[d],{start:Ay(d,l.style)})}else f();return n}}function BC(i,n){return!(0,E.hj)(i)||!(0,E.hj)(n)||i===0&&n===0?"-":i===n?"100%":i===0?"\u221E":"".concat((100*n/i).toFixed(2),"%")}function xO(i,n){return vn({size:n?32:80,spacing:n?8:12,offset:n?32:0,arrow:i.arrow!==!1&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:i.text!==!1&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:BC}},i)}function c1(i,n){return(0,E.UI)(n.getModel().points,function(t){return i.convertPoint(t)})}function bO(i,n,t){var s=i.view,l=i.geometry,f=i.group,d=i.options,m=i.horizontal,x=d.offset,A=d.size,P=d.arrow,k=s.getCoordinate(),B=c1(k,n)[3],U=c1(k,t)[0],W=U.y-B.y,ne=U.x-B.x;if(typeof P!="boolean"){var de=P.headSize,ve=d.spacing,$e;m?(ne-de)/2<ve?(ve=Math.max(1,(ne-de)/2),$e=[[B.x+ve,B.y-x],[B.x+ve,B.y-x-A],[U.x-ve,U.y-x-A/2]]):$e=[[B.x+ve,B.y-x],[B.x+ve,B.y-x-A],[U.x-ve-de,U.y-x-A],[U.x-ve,U.y-x-A/2],[U.x-ve-de,U.y-x]]:(W-de)/2<ve?(ve=Math.max(1,(W-de)/2),$e=[[B.x+x,B.y+ve],[B.x+x+A,B.y+ve],[U.x+x+A/2,U.y-ve]]):$e=[[B.x+x,B.y+ve],[B.x+x+A,B.y+ve],[U.x+x+A,U.y-ve-de],[U.x+x+A/2,U.y-ve],[U.x+x,U.y-ve-de]],f.addShape("polygon",{id:"".concat(s.id,"-conversion-tag-arrow-").concat(l.getElementId(n.getModel().mappingData)),name:"conversion-tag-arrow",origin:{element:n,nextElement:t},attrs:(0,M.pi)((0,M.pi)({},P.style||{}),{points:$e})})}}function SO(i,n,t){var s,l,f,d=i.view,m=i.geometry,x=i.group,A=i.options,P=i.field,k=i.horizontal,B=A.offset,U=A.size;if(typeof A.text!="boolean"){var W=d.getCoordinate(),ne=((s=A.text)===null||s===void 0?void 0:s.formatter)&&((l=A.text)===null||l===void 0?void 0:l.formatter(n.getData()[P],t.getData()[P])),de=c1(W,n)[k?3:0],ve=c1(W,t)[k?0:3],$e=x.addShape("text",{id:"".concat(d.id,"-conversion-tag-text-").concat(m.getElementId(n.getModel().mappingData)),name:"conversion-tag-text",origin:{element:n,nextElement:t},attrs:(0,M.pi)((0,M.pi)({},((f=A.text)===null||f===void 0?void 0:f.style)||{}),{text:ne,x:k?(de.x+ve.x)/2:de.x+B+U/2,y:k?de.y-B-U/2:(de.y+ve.y)/2})});if(k){var lt=ve.x-de.x,vt=$e.getBBox().width;if(vt>lt){var Ot=vt/ne.length,fr=Math.max(1,Math.ceil(lt/Ot)-1),Tr="".concat(ne.slice(0,fr),"...");$e.attr("text",Tr)}}}}function NC(i,n,t){bO(i,n,t),SO(i,n,t)}function EO(i,n,t){return n===void 0&&(n=!0),t===void 0&&(t=!1),function(s){var l=s.options,f=s.chart,d=l.conversionTag,m=l.theme;return d&&!t&&(f.theme(vn({},(0,E.Kn)(m)?m:Dp(m),{columnWidthRatio:1/3})),f.annotation().shape({render:function(x,A){var P=x.addGroup({id:"".concat(f.id,"-conversion-tag-group"),name:"conversion-tag-group"}),k=(0,E.sE)(f.geometries,function(W){return W.type==="interval"}),B={view:A,geometry:k,group:P,field:i,horizontal:n,options:xO(d,n)},U=k.elements;(0,E.S6)(U,function(W,ne){ne>0&&NC(B,U[ne-1],W)})}})),s}}function wO(i){var n=i.options,t=n.legend,s=n.seriesField,l=n.isStack;return s?t!==!1&&(t=(0,M.pi)({position:l?"right-top":"top-left"},t)):t=!1,i.options.legend=t,i}function zC(i){var n=i.chart,t=i.options,s=t.data,l=t.columnStyle,f=t.color,d=t.columnWidthRatio,m=t.isPercent,x=t.isGroup,A=t.isStack,P=t.xField,k=t.yField,B=t.seriesField,U=t.groupField,W=t.tooltip,ne=t.shape,de=m&&x&&A?oO(s,k,[P,U],k):wy(s,k,P,k,m),ve=[];A&&B&&!x?de.forEach(function(vt){var Ot=ve.find(function(fr){return fr[P]===vt[P]&&fr[B]===vt[B]});Ot?Ot[k]+=vt[k]||0:ve.push((0,M.pi)({},vt))}):ve=de,n.data(ve);var $e=m?(0,M.pi)({formatter:function(vt){var Ot;return{name:x&&A?"".concat(vt[B]," - ").concat(vt[U]):(Ot=vt[B])!==null&&Ot!==void 0?Ot:vt[P],value:(Number(vt[k])*100).toFixed(2)+"%"}}},W):W,lt=vn({},i,{options:{data:ve,widthRatio:d,tooltip:$e,interval:{shape:ne,style:l,color:f}}});return Uc(lt),lt}function Yb(i){var n,t,s=i.options,l=s.xAxis,f=s.yAxis,d=s.xField,m=s.yField,x=s.data,A=s.isPercent,P=A?{max:1,min:0,minLimit:0,maxLimit:1}:{};return Aa(Uu((n={},n[d]=l,n[m]=f,n),(t={},t[d]={type:"cat"},t[m]=(0,M.pi)((0,M.pi)({},e1(x,m)),P),t)))(i)}function CO(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return s===!1?n.axis(f,!1):n.axis(f,s),l===!1?n.axis(d,!1):n.axis(d,l),i}function AO(i){var n=i.chart,t=i.options,s=t.legend,l=t.seriesField;return s&&l?n.legend(l,s):s===!1&&n.legend(!1),i}function TO(i){var n=i.chart,t=i.options,s=t.label,l=t.yField,f=t.isRange,d=yl(n,"interval");if(!s)d.label(!1);else{var m=s.callback,x=(0,M._T)(s,["callback"]);d.label({fields:[l],callback:m,cfg:(0,M.pi)({layout:x!=null&&x.position?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Dl(f?(0,M.pi)({content:function(A){var P;return(P=A[l])===null||P===void 0?void 0:P.join("-")}},x):x))})}return i}function eB(i){var n=i.chart,t=i.options,s=t.tooltip,l=t.isGroup,f=t.isStack,d=t.groupField,m=t.data,x=t.xField,A=t.yField,P=t.seriesField;if(s===!1)n.tooltip(!1);else{var k=s;if(l&&f){var B=k.customItems,U=(k==null?void 0:k.formatter)||function(W){return{name:"".concat(W[P]," - ").concat(W[d]),value:W[A]}};k=(0,M.pi)((0,M.pi)({},k),{customItems:function(W){var ne=[];return(0,E.S6)(W,function(de){var ve=(0,E.hX)(m,function($e){return(0,E.BD)($e,es(de.data,[x,P]))});ve.forEach(function($e){ne.push((0,M.pi)((0,M.pi)((0,M.pi)({},de),{value:$e[A],data:$e,mappingData:{_origin:$e}}),U($e)))})}),B?B(ne):ne}})}n.tooltip(k)}return i}function f1(i,n){n===void 0&&(n=!1);var t=i.options,s=t.seriesField;return Aa(wO,Lo,Eh("columnStyle"),Bg,TC("rect"),zC,Yb,CO,AO,eB,i1,jb,TO,Cy,_u,ls,xu(),EO(t.yField,!n,!!s),J4(!t.isStack),Ng)(i)}function MO(i){var n=i.options,t=n.xField,s=n.yField,l=n.xAxis,f=n.yAxis,d={left:"bottom",right:"top",top:"left",bottom:"right"},m=f!==!1?(0,M.pi)({position:d[(f==null?void 0:f.position)||"left"]},f):!1,x=l!==!1?(0,M.pi)({position:d[(l==null?void 0:l.position)||"bottom"]},l):!1;return(0,M.pi)((0,M.pi)({},i),{options:(0,M.pi)((0,M.pi)({},n),{xField:s,yField:t,xAxis:m,yAxis:x})})}function RO(i){var n=i.options,t=n.label;return t&&!t.position&&(t.position="left",t.layout||(t.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}])),vn({},i,{options:{label:t}})}function IO(i){var n=i.options,t=n.seriesField,s=n.isStack,l=n.legend;return t?l!==!1&&(l=(0,M.pi)({position:s?"top-left":"right-top"},l||{})):l=!1,vn({},i,{options:{legend:l}})}function PO(i){var n=i.options,t=[{type:"transpose"},{type:"reflectY"}].concat(n.coordinate||[]);return vn({},i,{options:{coordinate:t}})}function UC(i){var n=i.chart,t=i.options,s=t.barStyle,l=t.barWidthRatio,f=t.minBarWidth,d=t.maxBarWidth,m=t.barBackground;return f1({chart:n,options:(0,M.pi)((0,M.pi)({},t),{columnStyle:s,columnWidthRatio:l,minColumnWidth:f,maxColumnWidth:d,columnBackground:m})},!0)}function OO(i){return Aa(MO,RO,IO,Ll,PO,UC)(i)}var kO=vn({},Ta.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),ZC=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="bar",t}return n.getDefaultOptions=function(){return kO},n.prototype.changeData=function(t){var s,l;this.updateOption({data:t});var f=this,d=f.chart,m=f.options,x=m.isPercent,A=m.xField,P=m.yField,k=m.xAxis,B=m.yAxis;s=[P,A],A=s[0],P=s[1],l=[B,k],k=l[0],B=l[1];var U=(0,M.pi)((0,M.pi)({},m),{xField:A,yField:P,yAxis:B,xAxis:k});Yb({chart:d,options:U}),d.changeData(wy(t,A,P,A,x))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return OO},n}(Ta),FO=vn({},Ta.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),VC=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="column",t}return n.getDefaultOptions=function(){return FO},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this.options,l=s.yField,f=s.xField,d=s.isPercent,m=this,x=m.chart,A=m.options;Yb({chart:x,options:A}),this.chart.changeData(wy(t,l,f,l,d))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return f1},n}(Ta),Kb,Zg="$$percentage$$",Gv="$$mappingValue$$",uv="$$conversion$$",qb="$$totalPercentage$$",Ty="$$x$$",My="$$y$$",Ry={appendPadding:[0,80],minSize:0,maxSize:1,meta:(Kb={},Kb[Gv]={min:0,max:1,nice:!1},Kb),label:{style:{fill:"#fff",fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:"rgba(0,0,0,0.45)"}}},HC="CONVERSION_TAG_NAME";function Qb(i,n,t){var s=[],l=t.yField,f=t.maxSize,d=t.minSize,m=(0,E.U2)((0,E.UT)(n,l),[l]),x=(0,E.hj)(f)?f:1,A=(0,E.hj)(d)?d:0;return s=(0,E.UI)(i,function(P,k){var B=(P[l]||0)/m;return P[Zg]=B,P[Gv]=(x-A)*B+A,P[uv]=[(0,E.U2)(i,[k-1,l]),P[l]],P}),s}function Jb(i){return function(n){var t=n.chart,s=n.options,l=s.conversionTag,f=s.filteredData,d=f||t.getOptions().data;if(l){var m=l.formatter;d.forEach(function(x,A){if(!(A<=0||Number.isNaN(x[Gv]))){var P=i(x,A,d,{top:!0,name:HC,text:{content:(0,E.mf)(m)?m(x,d):m,offsetX:l.offsetX,offsetY:l.offsetY,position:"end",autoRotate:!1,style:(0,M.pi)({textAlign:"start",textBaseline:"middle"},l.style)}});t.annotation().line(P)}})}return n}}function DO(i){var n=i.chart,t=i.options,s=t.data,l=s===void 0?[]:s,f=t.yField,d=t.maxSize,m=t.minSize,x=Qb(l,l,{yField:f,maxSize:d,minSize:m});return n.data(x),i}function jC(i){var n=i.chart,t=i.options,s=t.xField,l=t.yField,f=t.color,d=t.tooltip,m=t.label,x=t.shape,A=x===void 0?"funnel":x,P=t.funnelStyle,k=t.state,B=tp(d,[s,l]),U=B.fields,W=B.formatter;Yf({chart:n,options:{type:"interval",xField:s,yField:Gv,colorField:s,tooltipFields:(0,E.kJ)(U)&&U.concat([Zg,uv]),mapping:{shape:A,tooltip:W,color:f,style:P},label:m,state:k}});var ne=yl(i.chart,"interval");return ne.adjust("symmetric"),i}function LO(i){var n=i.chart,t=i.options,s=t.isTransposed;return n.coordinate({type:"rect",actions:s?[]:[["transpose"],["scale",1,-1]]}),i}function WC(i){var n=i.options,t=i.chart,s=n.maxSize,l=(0,E.U2)(t,["geometries","0","dataArray"],[]),f=(0,E.U2)(t,["options","data","length"]),d=(0,E.UI)(l,function(x){return(0,E.U2)(x,["0","nextPoints","0","x"])*f-.5}),m=function(x,A,P,k){var B=s-(s-x[Gv])/2;return(0,M.pi)((0,M.pi)({},k),{start:[d[A-1]||A-.5,B],end:[d[A-1]||A-.5,B+.05]})};return Jb(m)(i),i}function GC(i){return Aa(DO,jC,LO,WC)(i)}function BO(i){var n,t=i.chart,s=i.options,l=s.data,f=l===void 0?[]:l,d=s.yField;return t.data(f),t.scale((n={},n[d]={sync:!0},n)),i}function NO(i){var n=i.chart,t=i.options,s=t.data,l=t.xField,f=t.yField,d=t.color,m=t.compareField,x=t.isTransposed,A=t.tooltip,P=t.maxSize,k=t.minSize,B=t.label,U=t.funnelStyle,W=t.state,ne=t.showFacetTitle;return n.facet("mirror",{fields:[m],transpose:!x,padding:x?0:[32,0,0,0],showTitle:ne,eachView:function(de,ve){var $e=x?ve.rowIndex:ve.columnIndex;x||de.coordinate({type:"rect",actions:[["transpose"],["scale",$e===0?-1:1,-1]]});var lt=Qb(ve.data,s,{yField:f,maxSize:P,minSize:k});de.data(lt);var vt=tp(A,[l,f,m]),Ot=vt.fields,fr=vt.formatter,Tr=x?{offset:$e===0?10:-23,position:$e===0?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:$e===0?"end":"start"}};Yf({chart:de,options:{type:"interval",xField:l,yField:Gv,colorField:l,tooltipFields:(0,E.kJ)(Ot)&&Ot.concat([Zg,uv]),mapping:{shape:"funnel",tooltip:fr,color:d,style:U},label:B===!1?!1:vn({},Tr,B),state:W}})}}),i}function XC(i){var n=i.chart,t=i.index,s=i.options,l=s.conversionTag,f=s.isTransposed;((0,E.hj)(t)?[n]:n.views).forEach(function(d,m){var x=(0,E.U2)(d,["geometries","0","dataArray"],[]),A=(0,E.U2)(d,["options","data","length"]),P=(0,E.UI)(x,function(B){return(0,E.U2)(B,["0","nextPoints","0","x"])*A-.5}),k=function(B,U,W,ne){var de=(t||m)===0?-1:1;return vn({},ne,{start:[P[U-1]||U-.5,B[Gv]],end:[P[U-1]||U-.5,B[Gv]+.05],text:f?{style:{textAlign:"start"}}:{offsetX:l!==!1?de*l.offsetX:0,style:{textAlign:(t||m)===0?"end":"start"}}})};Jb(k)(vn({},{chart:d,options:s}))})}function zO(i){var n=i.chart;return n.once("beforepaint",function(){return XC(i)}),i}function UO(i){return Aa(BO,NO,zO)(i)}function ZO(i){var n=i.chart,t=i.options,s=t.data,l=s===void 0?[]:s,f=t.yField,d=(0,E.u4)(l,function(A,P){return A+(P[f]||0)},0),m=(0,E.UT)(l,f)[f],x=(0,E.UI)(l,function(A,P){var k=[],B=[];if(A[qb]=(A[f]||0)/d,P){var U=l[P-1][Ty],W=l[P-1][My];k[0]=U[3],B[0]=W[3],k[1]=U[2],B[1]=W[2]}else k[0]=-.5,B[0]=1,k[1]=.5,B[1]=1;return B[2]=B[1]-A[qb],k[2]=(B[2]+1)/4,B[3]=B[2],k[3]=-k[2],A[Ty]=k,A[My]=B,A[Zg]=(A[f]||0)/m,A[uv]=[(0,E.U2)(l,[P-1,f]),A[f]],A});return n.data(x),i}function VO(i){var n=i.chart,t=i.options,s=t.xField,l=t.yField,f=t.color,d=t.tooltip,m=t.label,x=t.funnelStyle,A=t.state,P=tp(d,[s,l]),k=P.fields,B=P.formatter;return Yf({chart:n,options:{type:"polygon",xField:Ty,yField:My,colorField:s,tooltipFields:(0,E.kJ)(k)&&k.concat([Zg,uv]),label:m,state:A,mapping:{tooltip:B,color:f,style:x}}}),i}function HO(i){var n=i.chart,t=i.options,s=t.isTransposed;return n.coordinate({type:"rect",actions:s?[["transpose"],["reflect","x"]]:[]}),i}function jO(i){var n=function(t,s,l,f){return(0,M.pi)((0,M.pi)({},f),{start:[t[Ty][1],t[My][1]],end:[t[Ty][1]+.05,t[My][1]]})};return Jb(n)(i),i}function WO(i){return Aa(ZO,VO,HO,jO)(i)}function GO(i){var n,t=i.chart,s=i.options,l=s.data,f=l===void 0?[]:l,d=s.yField;return t.data(f),t.scale((n={},n[d]={sync:!0},n)),i}function XO(i){var n=i.chart,t=i.options,s=t.seriesField,l=t.isTransposed,f=t.showFacetTitle;return n.facet("rect",{fields:[s],padding:[l?0:32,10,0,10],showTitle:f,eachView:function(d,m){GC(vn({},i,{chart:d,options:{data:m.data}}))}}),i}function $O(i){return Aa(GO,XO)(i)}var $C=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.rendering=!1,t}return n.prototype.change=function(t){var s=this;if(!this.rendering){var l=t.seriesField,f=t.compareField,d=f?XC:WC,m=this.context.view,x=l||f?m.views:[m];(0,E.UI)(x,function(A,P){var k=A.getController("annotation"),B=(0,E.hX)((0,E.U2)(k,["option"],[]),function(W){var ne=W.name;return ne!==HC});k.clear(!0),(0,E.S6)(B,function(W){typeof W=="object"&&A.annotation()[W.type](W)});var U=(0,E.U2)(A,["filteredData"],A.getOptions().data);d({chart:A,index:P,options:(0,M.pi)((0,M.pi)({},t),{filteredData:Qb(U,U,t)})}),A.filterData(U),s.rendering=!0,A.render(!0)})}this.rendering=!1},n}(En),YC="funnel-conversion-tag",e2="funnel-afterrender",t2={trigger:"afterrender",action:"".concat(YC,":change")};Vr(YC,$C),Fn(e2,{start:[t2]});function YO(i){var n=i.options,t=n.compareField,s=n.xField,l=n.yField,f=n.locale,d=n.funnelStyle,m=n.data,x=Wb(f),A={label:t?{fields:[s,l,t,Zg,uv],formatter:function(k){return"".concat(k[l])}}:{fields:[s,l,Zg,uv],offset:0,position:"middle",formatter:function(k){return"".concat(k[s]," ").concat(k[l])}},tooltip:{title:s,formatter:function(k){return{name:k[s],value:k[l]}}},conversionTag:{formatter:function(k){return"".concat(x.get(["conversionTag","label"]),": ").concat(BC.apply(void 0,k[uv]))}}},P;return(t||d)&&(P=function(k){return vn({},t&&{lineWidth:1,stroke:"#fff"},(0,E.mf)(d)?d(k):d)}),vn({options:A},i,{options:{funnelStyle:P,data:(0,E.d9)(m)}})}function r2(i){var n=i.options,t=n.compareField,s=n.dynamicHeight,l=n.seriesField;return l?$O(i):t?UO(i):s?WO(i):GC(i)}function KC(i){var n,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return Aa(Uu((n={},n[f]=s,n[d]=l,n)))(i)}function KO(i){var n=i.chart;return n.axis(!1),i}function qO(i){var n=i.chart,t=i.options,s=t.legend;return s===!1?n.legend(!1):n.legend(s),i}function QO(i){var n=i.chart,t=i.options,s=t.interactions,l=t.dynamicHeight;return(0,E.S6)(s,function(f){f.enable===!1?n.removeInteraction(f.type):n.interaction(f.type,f.cfg||{})}),l?n.removeInteraction(e2):n.interaction(e2,{start:[(0,M.pi)((0,M.pi)({},t2),{arg:t})]}),i}function qC(i){return Aa(YO,r2,KC,KO,Ll,QO,qO,ls,Lo,xu())(i)}var JO=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="funnel",t}return n.getDefaultOptions=function(){return Ry},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return qC},n.prototype.setState=function(t,s,l){l===void 0&&(l=!0);var f=ep(this.chart);(0,E.S6)(f,function(d){s(d.getData())&&d.setState(t,l)})},n.prototype.getStates=function(){var t=ep(this.chart),s=[];return(0,E.S6)(t,function(l){var f=l.getData(),d=l.getStates();(0,E.S6)(d,function(m){s.push({data:f,state:m,geometry:l.geometry,element:l})})}),s},n.CONVERSATION_FIELD=uv,n.PERCENT_FIELD=Zg,n.TOTAL_PERCENT_FIELD=qb,n}(Ta),h1,n2="range",QC="type",lv="percent",JC="#f0f0f0",eA="indicator-view",tA="range-view",ek={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(h1={},h1[n2]={sync:"v"},h1[lv]={sync:"v",tickCount:5,tickInterval:.2},h1),animation:!1};function tk(i,n){return i.map(function(t,s){var l;return l={},l[n2]=t-(i[s-1]||0),l[QC]="".concat(s),l[lv]=n,l})}function i2(i){var n;return[(n={},n[lv]=(0,E.uZ)(i,0,1),n)]}function a2(i,n){var t=(0,E.U2)(n,["ticks"],[]),s=(0,E.dp)(t)?(0,E.jj)(t):[0,(0,E.uZ)(i,0,1),1];return s[0]||s.shift(),tk(s,i)}function rk(i){var n=i.chart,t=i.options,s=t.percent,l=t.range,f=t.radius,d=t.innerRadius,m=t.startAngle,x=t.endAngle,A=t.axis,P=t.indicator,k=t.gaugeStyle,B=t.type,U=t.meter,W=l.color,ne=l.width;if(P){var de=i2(s),ve=n.createView({id:eA});ve.data(de),ve.point().position("".concat(lv,"*1")).shape(P.shape||"gauge-indicator").customInfo({defaultColor:n.getTheme().defaultColor,indicator:P}),ve.coordinate("polar",{startAngle:m,endAngle:x,radius:d*f}),ve.axis(lv,A),ve.scale(lv,es(A,Sf))}var $e=a2(s,t.range),lt=n.createView({id:tA});lt.data($e);var vt=(0,E.HD)(W)?[W,JC]:W,Ot=Uc({chart:lt,options:{xField:"1",yField:n2,seriesField:QC,rawFields:[lv],isStack:!0,interval:{color:vt,style:k,shape:B==="meter"?"meter-gauge":null},args:{zIndexReversed:!0,sortZIndex:!0},minColumnWidth:ne,maxColumnWidth:ne}}).ext,fr=Ot.geometry;return fr.customInfo({meter:U}),lt.coordinate("polar",{innerRadius:d,radius:f,startAngle:m,endAngle:x}).transpose(),i}function nk(i){var n;return Aa(Uu((n={range:{min:0,max:1,maxLimit:1,minLimit:0}},n[lv]={},n)))(i)}function rA(i,n){var t=i.chart,s=i.options,l=s.statistic,f=s.percent;if(t.getController("annotation").clear(!0),l){var d=l.content,m=void 0;d&&(m=vn({},{content:"".concat((f*100).toFixed(2),"%"),style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},d)),zb(t,{statistic:(0,M.pi)((0,M.pi)({},l),{content:m})},{percent:f})}return n&&t.render(!0),i}function ik(i){var n=i.chart,t=i.options,s=t.tooltip;return s?n.tooltip(vn({showTitle:!1,showMarkers:!1,containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',domStyles:{"g2-tooltip":{padding:"4px 8px",fontSize:"10px"}},customContent:function(l,f){var d=(0,E.U2)(f,[0,"data",lv],0);return"".concat((d*100).toFixed(2),"%")}},s)):n.tooltip(!1),i}function ak(i){var n=i.chart;return n.legend(!1),i}function nA(i){return Aa(Lo,ls,rk,nk,ik,rA,_u,xu(),ak)(i)}fi("point","gauge-indicator",{draw:function(i,n){var t=i.customInfo,s=t.indicator,l=t.defaultColor,f=s,d=f.pointer,m=f.pin,x=n.addGroup(),A=this.parsePoint({x:0,y:0});return d&&x.addShape("line",{name:"pointer",attrs:(0,M.pi)({x1:A.x,y1:A.y,x2:i.x,y2:i.y,stroke:l},d.style)}),m&&x.addShape("circle",{name:"pin",attrs:(0,M.pi)({x:A.x,y:A.y,stroke:l},m.style)}),x}}),fi("interval","meter-gauge",{draw:function(i,n){var t=i.customInfo.meter,s=t===void 0?{}:t,l=s.steps,f=l===void 0?50:l,d=s.stepRatio,m=d===void 0?.5:d;f=f<1?1:f,m=(0,E.uZ)(m,0,1);var x=this.coordinate,A=x.startAngle,P=x.endAngle,k=0;if(m>0&&m<1){var B=P-A;k=B/f/(m/(1-m)+1-1/f)}for(var U=k/(1-m)*m,W=n.addGroup(),ne=this.coordinate.getCenter(),de=this.coordinate.getRadius(),ve=ec.getAngle(i,this.coordinate),$e=ve.startAngle,lt=ve.endAngle,vt=$e;vt<lt;){var Ot=void 0,fr=(vt-A)%(U+k);fr<U?Ot=vt+(U-fr):(vt+=U+k-fr,Ot=vt+U);var Tr=ec.getSectorPath(ne.x,ne.y,de,vt,Math.min(Ot,lt),de*this.coordinate.innerRadius);W.addShape("path",{name:"meter-gauge",attrs:{path:Tr,fill:i.color,stroke:i.color,lineWidth:.5}}),vt=Ot+k}return W}});var ok=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="gauge",t}return n.getDefaultOptions=function(){return ek},n.prototype.changeData=function(t){this.chart.emit(Le.BEFORE_CHANGE_DATA,Ya.fromData(this.chart,Le.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t});var s=this.chart.views.find(function(f){return f.id===eA});s&&s.data(i2(t));var l=this.chart.views.find(function(f){return f.id===tA});l&&l.data(a2(t,this.options.range)),rA({chart:this.chart,options:this.options},!0),this.chart.emit(Le.AFTER_CHANGE_DATA,Ya.fromData(this.chart,Le.AFTER_CHANGE_DATA,null))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return nA},n}(Ta);function o2(i,n,t){if(t===1)return[0,n];var s=Math.floor(i/n);return[n*s,n*(s+1)]}function sk(i){return Math.ceil(Math.log(i.length)/Math.LN2)+1}function iA(i,n,t,s,l){var f=(0,E.d9)(i);(0,E.MR)(f,n);var d=(0,E.I)(f,n),m=(0,E.rx)(d),x=m.max-m.min,A=t;if(!t&&s&&(A=s>1?x/(s-1):m.max),!t&&!s){var P=sk(d);A=x/P}var k={},B=(0,E.vM)(f,l);(0,E.xb)(B)?(0,E.S6)(f,function(W){var ne=W[n],de=o2(ne,A,s),ve="".concat(de[0],"-").concat(de[1]);(0,E.wH)(k,ve)||(k[ve]={range:de,count:0}),k[ve].count+=1}):Object.keys(B).forEach(function(W){(0,E.S6)(B[W],function(ne){var de=ne[n],ve=o2(de,A,s),$e="".concat(ve[0],"-").concat(ve[1]),lt="".concat($e,"-").concat(W);(0,E.wH)(k,lt)||(k[lt]={range:ve,count:0},k[lt][l]=W),k[lt].count+=1})});var U=[];return(0,E.S6)(k,function(W){U.push(W)}),U}var p1="range",i0="count",uk=vn({},Ta.getDefaultOptions(),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});function aA(i){var n=i.chart,t=i.options,s=t.data,l=t.binField,f=t.binNumber,d=t.binWidth,m=t.color,x=t.stackField,A=t.legend,P=t.columnStyle,k=iA(s,l,d,f,x);n.data(k);var B=vn({},i,{options:{xField:p1,yField:i0,seriesField:x,isStack:!0,interval:{color:m,style:P}}});return Uc(B),A&&x?n.legend(x,A):n.legend(!1),i}function oA(i){var n,t=i.options,s=t.xAxis,l=t.yAxis;return Aa(Uu((n={},n[p1]=s,n[i0]=l,n)))(i)}function sA(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis;return s===!1?n.axis(p1,!1):n.axis(p1,s),l===!1?n.axis(i0,!1):n.axis(i0,l),i}function uA(i){var n=i.chart,t=i.options,s=t.label,l=yl(n,"interval");if(!s)l.label(!1);else{var f=s.callback,d=(0,M._T)(s,["callback"]);l.label({fields:[i0],callback:f,cfg:Dl(d)})}return i}function lA(i){return Aa(Lo,Eh("columnStyle"),aA,oA,sA,Bg,uA,Ll,_u,ls)(i)}var lk=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="histogram",t}return n.getDefaultOptions=function(){return uk},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this.options,l=s.binField,f=s.binNumber,d=s.binWidth,m=s.stackField;this.chart.changeData(iA(t,l,d,f,m))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return lA},n}(Ta),ck=vn({},Ta.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left",radio:{}},isStack:!1}),fk=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.active=function(){var t=this.getView(),s=this.context.event;if(s.data){var l=s.data.items,f=t.geometries.filter(function(d){return d.type==="point"});(0,E.S6)(f,function(d){(0,E.S6)(d.elements,function(m){var x=(0,E.cx)(l,function(A){return A.data===m.data})!==-1;m.setState("active",x)})})}},n.prototype.reset=function(){var t=this.getView(),s=t.geometries.filter(function(l){return l.type==="point"});(0,E.S6)(s,function(l){(0,E.S6)(l.elements,function(f){f.setState("active",!1)})})},n.prototype.getView=function(){return this.context.view},n}(En);Vr("marker-active",fk),Fn("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}],end:[{trigger:"tooltip:hide",action:"marker-active:reset"}]});var cA=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="line",t}return n.getDefaultOptions=function(){return ck},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this,l=s.chart,f=s.options;l1({chart:l,options:f}),this.chart.changeData(t)},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return FC},n}(Ta),fA=vn({},Ta.getDefaultOptions(),{legend:{position:"right",radio:{}},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}}),hA=[1,0,0,0,1,0,0,0,1];function s2(i,n){var t=n?(0,M.ev)([],n,!0):(0,M.ev)([],hA,!0);return ec.transform(t,i)}var hk=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getActiveElements=function(){var t=ec.getDelegationObject(this.context);if(t){var s=this.context.view,l=t.component,f=t.item,d=l.get("field");if(d){var m=s.geometries[0].elements;return m.filter(function(x){return x.getModel().data[d]===f.value})}}return[]},n.prototype.getActiveElementLabels=function(){var t=this.context.view,s=this.getActiveElements(),l=t.geometries[0].labelsContainer.getChildren();return l.filter(function(f){return s.find(function(d){return(0,E.Xy)(d.getData(),f.get("data"))})})},n.prototype.transfrom=function(t){t===void 0&&(t=7.5);var s=this.getActiveElements(),l=this.getActiveElementLabels();s.forEach(function(f,d){var m=l[d],x=f.geometry.coordinate;if(x.isPolar&&x.isTransposed){var A=ec.getAngle(f.getModel(),x),P=A.startAngle,k=A.endAngle,B=(P+k)/2,U=t,W=U*Math.cos(B),ne=U*Math.sin(B);f.shape.setMatrix(s2([["t",W,ne]])),m.setMatrix(s2([["t",W,ne]]))}})},n.prototype.active=function(){this.transfrom()},n.prototype.reset=function(){this.transfrom(0)},n}(En);function pA(i){var n=i.event,t,s=n.target;return s&&(t=s.get("element")),t}var dA=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getAnnotations=function(t){var s=t||this.context.view;return s.getController("annotation").option},n.prototype.getInitialAnnotation=function(){return this.initialAnnotation},n.prototype.init=function(){var t=this,s=this.context.view;s.removeInteraction("tooltip"),s.on("afterchangesize",function(){var l=t.getAnnotations(s);t.initialAnnotation=l})},n.prototype.change=function(t){var s=this.context,l=s.view,f=s.event;this.initialAnnotation||(this.initialAnnotation=this.getAnnotations());var d=(0,E.U2)(f,["data","data"]);if(f.type.match("legend-item")){var m=ec.getDelegationObject(this.context),x=l.getGroupedFields()[0];if(m&&x){var A=m.item;d=l.getData().find(function(U){return U[x]===A.value})}}if(d){var P=(0,E.U2)(t,"annotations",[]),k=(0,E.U2)(t,"statistic",{});l.getController("annotation").clear(!0),(0,E.S6)(P,function(U){typeof U=="object"&&l.annotation()[U.type](U)}),by(l,{statistic:k,plotType:"pie"},d),l.render(!0)}var B=pA(this.context);B&&B.shape.toFront()},n.prototype.reset=function(){var t=this.context.view,s=t.getController("annotation");s.clear(!0);var l=this.getInitialAnnotation();(0,E.S6)(l,function(f){t.annotation()[f.type](f)}),t.render(!0)},n}(En),a0="pie-statistic";Vr(a0,dA),Fn("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]}),Vr("pie-legend",hk),Fn("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});function vA(i,n){var t=null;return(0,E.S6)(i,function(s){typeof s[n]=="number"&&(t+=s[n])}),t}function gA(i,n){var t;switch(i){case"inner":return t="-30%",(0,E.HD)(n)&&n.endsWith("%")?parseFloat(n)*.01>0?t:n:n<0?n:t;case"outer":return t=12,(0,E.HD)(n)&&n.endsWith("%")?parseFloat(n)*.01<0?t:n:n>0?n:t;default:return n}}function d1(i,n){return(0,E.yW)(us(i,n),function(t){return t[n]===0})}function pk(i){var n=i.chart,t=i.options,s=t.data,l=t.angleField,f=t.colorField,d=t.color,m=t.pieStyle,x=t.shape,A=us(s,l);if(d1(A,l)){var P="$$percentage$$";A=A.map(function(B){var U;return(0,M.pi)((0,M.pi)({},B),(U={},U[P]=1/A.length,U))}),n.data(A);var k=vn({},i,{options:{xField:"1",yField:P,seriesField:f,isStack:!0,interval:{color:d,shape:x,style:m},args:{zIndexReversed:!0,sortZIndex:!0}}});Uc(k)}else{n.data(A);var k=vn({},i,{options:{xField:"1",yField:l,seriesField:f,isStack:!0,interval:{color:d,shape:x,style:m},args:{zIndexReversed:!0,sortZIndex:!0}}});Uc(k)}return i}function dk(i){var n,t=i.chart,s=i.options,l=s.meta,f=s.colorField,d=vn({},l);return t.scale(d,(n={},n[f]={type:"cat"},n)),i}function vk(i){var n=i.chart,t=i.options,s=t.radius,l=t.innerRadius,f=t.startAngle,d=t.endAngle;return n.coordinate({type:"theta",cfg:{radius:s,innerRadius:l,startAngle:f,endAngle:d}}),i}function mA(i){var n=i.chart,t=i.options,s=t.label,l=t.colorField,f=t.angleField,d=n.geometries[0];if(!s)d.label(!1);else{var m=s.callback,x=(0,M._T)(s,["callback"]),A=Dl(x);if(A.content){var P=A.content;A.content=function(W,ne,de){var ve=W[l],$e=W[f],lt=n.getScaleByField(f),vt=lt==null?void 0:lt.scale($e);return(0,E.mf)(P)?P((0,M.pi)((0,M.pi)({},W),{percent:vt}),ne,de):(0,E.HD)(P)?Sy(P,{value:$e,name:ve,percentage:(0,E.hj)(vt)&&!(0,E.UM)($e)?"".concat((vt*100).toFixed(2),"%"):null}):P}}var k={inner:"",outer:"pie-outer",spider:"pie-spider"},B=A.type?k[A.type]:"pie-outer",U=A.layout?(0,E.kJ)(A.layout)?A.layout:[A.layout]:[];A.layout=(B?[{type:B}]:[]).concat(U),d.label({fields:l?[f,l]:[f],callback:m,cfg:(0,M.pi)((0,M.pi)({},A),{offset:gA(A.type,A.offset),type:"pie"})})}return i}function yA(i){var n=i.innerRadius,t=i.statistic,s=i.angleField,l=i.colorField,f=i.meta,d=i.locale,m=Wb(d);if(n&&t){var x=vn({},fA.statistic,t),A=x.title,P=x.content;return A!==!1&&(A=vn({},{formatter:function(k){var B=k?k[l]:(0,E.UM)(A.content)?m.get(["statistic","total"]):A.content,U=(0,E.U2)(f,[l,"formatter"])||function(W){return W};return U(B)}},A)),P!==!1&&(P=vn({},{formatter:function(k,B){var U=k?k[s]:vA(B,s),W=(0,E.U2)(f,[s,"formatter"])||function(ne){return ne};return k||(0,E.UM)(P.content)?W(U):P.content}},P)),vn({},{statistic:{title:A,content:P}},i)}return i}function _A(i){var n=i.chart,t=i.options,s=yA(t),l=s.innerRadius,f=s.statistic;return n.getController("annotation").clear(!0),Aa(xu())(i),l&&f&&by(n,{statistic:f,plotType:"pie"}),i}function v1(i){var n=i.chart,t=i.options,s=t.tooltip,l=t.colorField,f=t.angleField,d=t.data;if(s===!1)n.tooltip(s);else if(n.tooltip(vn({},s,{shared:!1})),d1(d,f)){var m=(0,E.U2)(s,"fields"),x=(0,E.U2)(s,"formatter");(0,E.xb)((0,E.U2)(s,"fields"))&&(m=[l,f],x=x||function(A){return{name:A[l],value:(0,E.BB)(A[f])}}),n.geometries[0].tooltip(m.join("*"),r0(m,x))}return i}function gk(i){var n=i.chart,t=i.options,s=yA(t),l=s.interactions,f=s.statistic,d=s.annotations;return(0,E.S6)(l,function(m){var x,A;if(m.enable===!1)n.removeInteraction(m.type);else if(m.type==="pie-statistic-active"){var P=[];!((x=m.cfg)===null||x===void 0)&&x.start||(P=[{trigger:"element:mouseenter",action:"".concat(a0,":change"),arg:{statistic:f,annotations:d}}]),(0,E.S6)((A=m.cfg)===null||A===void 0?void 0:A.start,function(k){P.push((0,M.pi)((0,M.pi)({},k),{arg:{statistic:f,annotations:d}}))}),n.interaction(m.type,vn({},m.cfg,{start:P}))}else n.interaction(m.type,m.cfg||{})}),i}function xA(i){return Aa(Eh("pieStyle"),pk,dk,Lo,vk,t0,v1,mA,Bg,_A,gk,ls)(i)}var bA=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="pie",t}return n.getDefaultOptions=function(){return fA},n.prototype.changeData=function(t){this.chart.emit(Le.BEFORE_CHANGE_DATA,Ya.fromData(this.chart,Le.BEFORE_CHANGE_DATA,null));var s=this.options,l=this.options.angleField,f=us(s.data,l),d=us(t,l);d1(f,l)||d1(d,l)?this.update({data:t}):(this.updateOption({data:t}),this.chart.data(d),_A({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(Le.AFTER_CHANGE_DATA,Ya.fromData(this.chart,Le.AFTER_CHANGE_DATA,null))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return xA},n}(Ta),SA=["#FAAD14","#E8EDF3"],mk={percent:.2,color:SA,animation:{}};function u2(i){var n=(0,E.uZ)(Qm(i)?i:0,0,1);return[{current:"".concat(n),type:"current",percent:n},{current:"".concat(n),type:"target",percent:1}]}function EA(i){var n=i.chart,t=i.options,s=t.percent,l=t.progressStyle,f=t.color,d=t.barWidthRatio;n.data(u2(s));var m=vn({},i,{options:{xField:"current",yField:"percent",seriesField:"type",widthRatio:d,interval:{style:l,color:(0,E.HD)(f)?[f,SA[1]]:f},args:{zIndexReversed:!0,sortZIndex:!0}}});return Uc(m),n.tooltip(!1),n.axis(!1),n.legend(!1),i}function yk(i){var n=i.chart;return n.coordinate("rect").transpose(),i}function wA(i){return Aa(EA,Uu({}),yk,ls,Lo,xu())(i)}var _k=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="process",t}return n.getDefaultOptions=function(){return mk},n.prototype.changeData=function(t){this.updateOption({percent:t}),this.chart.changeData(u2(t))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return wA},n}(Ta);function xk(i){var n=i.chart,t=i.options,s=t.innerRadius,l=t.radius;return n.coordinate("theta",{innerRadius:s,radius:l}),i}function CA(i,n){var t=i.chart,s=i.options,l=s.innerRadius,f=s.statistic,d=s.percent,m=s.meta;if(t.getController("annotation").clear(!0),l&&f){var x=(0,E.U2)(m,["percent","formatter"])||function(P){return"".concat((P*100).toFixed(2),"%")},A=f.content;A&&(A=vn({},A,{content:(0,E.UM)(A.content)?x(d):A.content})),by(t,{statistic:(0,M.pi)((0,M.pi)({},f),{content:A}),plotType:"ring-progress"},{percent:d})}return n&&t.render(!0),i}function AA(i){return Aa(EA,Uu({}),xk,CA,ls,Lo,xu())(i)}var bk={percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"}}},animation:{}},Sk=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="ring-process",t}return n.getDefaultOptions=function(){return bk},n.prototype.changeData=function(t){this.chart.emit(Le.BEFORE_CHANGE_DATA,Ya.fromData(this.chart,Le.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t}),this.chart.data(u2(t)),CA({chart:this.chart,options:this.options},!0),this.chart.emit(Le.AFTER_CHANGE_DATA,Ya.fromData(this.chart,Le.AFTER_CHANGE_DATA,null))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return AA},n}(Ta),Vg=F(56645),Ek={exp:Vg.regressionExp,linear:Vg.regressionLinear,loess:Vg.regressionLoess,log:Vg.regressionLog,poly:Vg.regressionPoly,pow:Vg.regressionPow,quad:Vg.regressionQuad};function wk(i,n){var t=10,s={regionStyle:[{position:{start:[i,"max"],end:["max",n]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[i,n]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",n],end:[i,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[i,n],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",n],offsetX:-t,offsetY:-t,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",n],offsetX:t,offsetY:-t,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",n],offsetX:t,offsetY:t,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",n],offsetX:-t,offsetY:t,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]};return s}var Ck=function(i,n){var t=n.view,s=n.options,l=s.xField,f=s.yField,d=t.getScaleByField(l),m=t.getScaleByField(f),x=i.map(function(A){return t.getCoordinate().convert({x:d.scale(A[0]),y:m.scale(A[1])})});return Db(x,!1)},Ak=function(i){var n=i.options,t=n.xField,s=n.yField,l=n.data,f=n.regressionLine,d=f.type,m=d===void 0?"linear":d,x=f.algorithm,A=f.equation,P,k=null;if(x)P=(0,E.kJ)(x)?x:x(l),k=A;else{var B=Ek[m]().x(function(U){return U[t]}).y(function(U){return U[s]});P=B(l),k=Mk(m,P)}return[Ck(P,i),k]},Tk=function(i){var n,t=i.meta,s=t===void 0?{}:t,l=i.xField,f=i.yField,d=i.data,m=d[0][l],x=d[0][f],A=m>0,P=x>0;function k(B,U){var W=(0,E.U2)(s,[B]);function ne(ve){return(0,E.U2)(W,ve)}var de={};return U==="x"?((0,E.hj)(m)&&((0,E.hj)(ne("min"))||(de.min=A?0:m*2),(0,E.hj)(ne("max"))||(de.max=A?m*2:0)),de):((0,E.hj)(x)&&((0,E.hj)(ne("min"))||(de.min=P?0:x*2),(0,E.hj)(ne("max"))||(de.max=P?x*2:0)),de)}return(0,M.pi)((0,M.pi)({},s),(n={},n[l]=(0,M.pi)((0,M.pi)({},s[l]),k(l,"x")),n[f]=(0,M.pi)((0,M.pi)({},s[f]),k(f,"y")),n))};function Mk(i,n){var t,s,l,f=function(A,P){return P===void 0&&(P=4),Math.round(A*Math.pow(10,P))/Math.pow(10,P)},d=function(A){return Number.isFinite(A)?f(A):"?"};switch(i){case"linear":return"y = ".concat(d(n.a),"x + ").concat(d(n.b),", R^2 = ").concat(d(n.rSquared));case"exp":return"y = ".concat(d(n.a),"e^(").concat(d(n.b),"x), R^2 = ").concat(d(n.rSquared));case"log":return"y = ".concat(d(n.a),"ln(x) + ").concat(d(n.b),", R^2 = ").concat(d(n.rSquared));case"quad":return"y = ".concat(d(n.a),"x^2 + ").concat(d(n.b),"x + ").concat(d(n.c),", R^2 = ").concat(d(n.rSquared));case"poly":for(var m="y = ".concat(d((t=n.coefficients)===null||t===void 0?void 0:t[0])," + ").concat(d((s=n.coefficients)===null||s===void 0?void 0:s[1]),"x + ").concat(d((l=n.coefficients)===null||l===void 0?void 0:l[2]),"x^2"),x=3;x<n.coefficients.length;++x)m+=" + ".concat(d(n.coefficients[x]),"x^").concat(x);return"".concat(m,", R^2 = ").concat(d(n.rSquared));case"pow":return"y = ".concat(d(n.a),"x^").concat(d(n.b),", R^2 = ").concat(d(n.rSquared))}return null}function TA(i){var n=i.data,t=n===void 0?[]:n,s=i.xField,l=i.yField;if(t.length){for(var f=!0,d=!0,m=t[0],x=void 0,A=1;A<t.length&&(x=t[A],m[s]!==x[s]&&(f=!1),m[l]!==x[l]&&(d=!1),!(!f&&!d));A++)m=x;var P=[];f&&P.push(s),d&&P.push(l);var k=es(Tk(i),P);return vn({},i,{meta:k})}return i}function Rk(i){var n=i.chart,t=i.options,s=t.data,l=t.type,f=t.color,d=t.shape,m=t.pointStyle,x=t.shapeField,A=t.colorField,P=t.xField,k=t.yField,B=t.sizeField,U=t.size,W=t.tooltip;B&&(U||(U=[2,8]),(0,E.hj)(U)&&(U=[U,U])),W&&!W.fields&&(W=(0,M.pi)((0,M.pi)({},W),{fields:[P,k,A,B,x]})),n.data(s),wh(vn({},i,{options:{seriesField:A,point:{color:f,shape:d,size:U,style:m},tooltip:W}}));var ne=yl(n,"point");return l&&ne.adjust(l),i}function g1(i){var n,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField,m=TA(t);return Aa(Uu((n={},n[f]=s,n[d]=l,n)))(vn({},i,{options:m}))}function Ik(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return n.axis(f,s),n.axis(d,l),i}function Pk(i){var n=i.chart,t=i.options,s=t.legend,l=t.colorField,f=t.shapeField,d=t.sizeField,m=t.shapeLegend,x=t.sizeLegend,A=s!==!1;return l&&n.legend(l,A?s:!1),f&&(m?n.legend(f,m):n.legend(f,m===!1?!1:s)),d&&n.legend(d,x||!1),!A&&!m&&!x&&n.legend(!1),i}function Ok(i){var n=i.chart,t=i.options,s=t.label,l=t.yField,f=yl(n,"point");if(!s)f.label(!1);else{var d=s.callback,m=(0,M._T)(s,["callback"]);f.label({fields:[l],callback:d,cfg:Dl(m)})}return i}function kk(i){var n=i.options,t=n.quadrant,s=[];if(t){var l=t.xBaseline,f=l===void 0?0:l,d=t.yBaseline,m=d===void 0?0:d,x=t.labels,A=t.regionStyle,P=t.lineStyle,k=wk(f,m),B=new Array(4).join(",").split(",");B.forEach(function(U,W){s.push((0,M.pi)((0,M.pi)({type:"region",top:!1},k.regionStyle[W].position),{style:vn({},k.regionStyle[W].style,A==null?void 0:A[W])}),(0,M.pi)({type:"text",top:!0},vn({},k.labelStyle[W],x==null?void 0:x[W])))}),s.push({type:"line",top:!1,start:["min",m],end:["max",m],style:vn({},k.lineStyle,P)},{type:"line",top:!1,start:[f,"min"],end:[f,"max"],style:vn({},k.lineStyle,P)})}return Aa(xu(s))(i)}function Fk(i){var n=i.options,t=i.chart,s=n.regressionLine;if(s){var l=s.style,f=s.equationStyle,d=f===void 0?{}:f,m=s.top,x=m===void 0?!1:m,A=s.showEquation,P=A===void 0?!1:A,k={stroke:"#9ba29a",lineWidth:2,opacity:.5},B={x:20,y:20,textAlign:"left",textBaseline:"middle",fontSize:14,fillOpacity:.5};t.annotation().shape({top:x,render:function(U,W){var ne=U.addGroup({id:"".concat(t.id,"-regression-line"),name:"regression-line-group"}),de=Ak({view:W,options:n}),ve=de[0],$e=de[1];ne.addShape("path",{name:"regression-line",attrs:(0,M.pi)((0,M.pi)({path:ve},k),l)}),P&&ne.addShape("text",{name:"regression-equation",attrs:(0,M.pi)((0,M.pi)((0,M.pi)({},B),d),{text:$e})})}})}return i}function Dk(i){var n=i.chart,t=i.options,s=t.tooltip;return s?n.tooltip(s):s===!1&&n.tooltip(!1),i}function MA(i){return Aa(Rk,g1,Ik,Pk,Dk,Ok,Cy,i1,jb,_u,kk,ls,Lo,Fk)(i)}var Lk=vn({},Ta.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}});Fn("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]});var Bk=function(i){(0,M.ZT)(n,i);function n(t,s){var l=i.call(this,t,s)||this;return l.type="scatter",l.on(Le.BEFORE_RENDER,function(f){var d,m,x=l,A=x.options,P=x.chart;if(((d=f.data)===null||d===void 0?void 0:d.source)===Gf.FILTER){var k=l.chart.filterData(l.chart.getData());g1({chart:P,options:(0,M.pi)((0,M.pi)({},A),{data:k})})}((m=f.data)===null||m===void 0?void 0:m.source)===Gf.RESET&&g1({chart:P,options:A})}),l}return n.getDefaultOptions=function(){return Lk},n.prototype.changeData=function(t){this.updateOption(TA(vn({},this.options,{data:t})));var s=this,l=s.options,f=s.chart;g1({chart:f,options:l}),this.chart.changeData(t)},n.prototype.getSchemaAdaptor=function(){return MA},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n}(Ta),Iy="$$stock-range$$",m1="trend",RA="up",Py="down",Nk={showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0,text:function(i,n,t){var s;if(i==="x"){var l=t[0];s=l?l.title:n}else s=n;return{position:i==="y"?"start":"end",content:s,style:{fill:"#dfdfdf"}}},textBackground:{padding:[2,4],style:{fill:"#666"}}}},zk=vn({},Ta.getDefaultOptions(),{tooltip:Nk,interactions:[{type:"tooltip"}],legend:{position:"top-left"},risingFill:"#ef5350",fallingFill:"#26a69a"});function IA(i,n){return(0,E.UI)(i,function(t){var s=t&&(0,M.pi)({},t);if((0,E.kJ)(n)&&s){var l=n[0],f=n[1],d=n[2],m=n[3];s[m1]=s[l]<=s[f]?RA:Py,s[Iy]=[s[l],s[f],s[d],s[m]]}return s})}function Uk(i){var n=i.chart,t=i.options,s=t.yField,l=t.data,f=t.risingFill,d=t.fallingFill,m=t.tooltip,x=t.stockStyle;n.data(IA(l,s));var A=m;return A!==!1&&(A=vn({},{fields:s},A)),Gb(vn({},i,{options:{schema:{shape:"candle",color:[f,d],style:x},yField:Iy,seriesField:m1,rawFields:s,tooltip:A}})),i}function Zk(i){var n,t,s=i.chart,l=i.options,f=l.meta,d=l.xAxis,m=l.yAxis,x=l.xField,A=(n={},n[x]={type:"timeCat",tickCount:6},n[m1]={values:[RA,Py]},n),P=vn(A,f,(t={},t[x]=es(d,Sf),t[Iy]=es(m,Sf),t));return s.scale(P),i}function Vk(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField;return s===!1?n.axis(f,!1):n.axis(f,s),l===!1?n.axis(Iy,!1):n.axis(Iy,l),i}function Hk(i){var n=i.chart,t=i.options,s=t.tooltip;return s!==!1?n.tooltip(s):n.tooltip(!1),i}function jk(i){var n=i.chart,t=i.options,s=t.legend;return s?n.legend(m1,s):s===!1&&n.legend(!1),i}function PA(i){Aa(Lo,Uk,Zk,Vk,Hk,jk,_u,ls,xu(),i1)(i)}var Wk=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="stock",t}return n.getDefaultOptions=function(){return zk},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return PA},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this.options.yField;this.chart.changeData(IA(t,s))},n}(Ta);function Xv(i){return(0,E.UI)(i||[],function(n,t){return{x:"".concat(t),y:n}})}var o0="x",Hg="y",l2={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(i,n){return"".concat((0,E.U2)(n,[0,"data","y"],0))},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}},OA={appendPadding:2,tooltip:(0,M.pi)({},l2),animation:{}};function y1(i){var n=i.chart,t=i.options,s=t.data,l=t.color,f=t.areaStyle,d=t.point,m=t.line,x=d==null?void 0:d.state,A=Xv(s);n.data(A);var P=vn({},i,{options:{xField:o0,yField:Hg,area:{color:l,style:f},line:m,point:d}}),k=vn({},P,{options:{tooltip:!1}}),B=vn({},P,{options:{tooltip:!1,state:x}});return s1(P),n0(k),wh(B),n.axis(!1),n.legend(!1),i}function jg(i){var n,t,s=i.options,l=s.xAxis,f=s.yAxis,d=s.data,m=Xv(d);return Aa(Uu((n={},n[o0]=l,n[Hg]=f,n),(t={},t[o0]={type:"cat"},t[Hg]=e1(m,Hg),t)))(i)}function c2(i){return Aa(Eh("areaStyle"),y1,jg,Ll,Lo,ls,xu())(i)}var Gk={appendPadding:2,tooltip:(0,M.pi)({},l2),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:{}},Xk=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="tiny-area",t}return n.getDefaultOptions=function(){return Gk},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this,l=s.chart,f=s.options;jg({chart:l,options:f}),l.changeData(Xv(t))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return c2},n}(Ta);function kA(i){var n=i.chart,t=i.options,s=t.data,l=t.color,f=t.columnStyle,d=t.columnWidthRatio,m=Xv(s);n.data(m);var x=vn({},i,{options:{xField:o0,yField:Hg,widthRatio:d,interval:{style:f,color:l}}});return Uc(x),n.axis(!1),n.legend(!1),n.interaction("element-active"),i}function f2(i){return Aa(Lo,Eh("columnStyle"),kA,jg,Ll,ls,xu())(i)}var $k={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(i,n){return"".concat((0,E.U2)(n,[0,"data","y"],0))},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}},h2={appendPadding:2,tooltip:(0,M.pi)({},$k),animation:{}},FA=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="tiny-column",t}return n.getDefaultOptions=function(){return h2},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this,l=s.chart,f=s.options;jg({chart:l,options:f}),l.changeData(Xv(t))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return f2},n}(Ta);function Yk(i){var n=i.chart,t=i.options,s=t.data,l=t.color,f=t.lineStyle,d=t.point,m=d==null?void 0:d.state,x=Xv(s);n.data(x);var A=vn({},i,{options:{xField:o0,yField:Hg,line:{color:l,style:f},point:d}}),P=vn({},A,{options:{tooltip:!1,state:m}});return n0(A),wh(P),n.axis(!1),n.legend(!1),i}function p2(i){return Aa(Yk,jg,Lo,Ll,ls,xu())(i)}var Kk=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="tiny-line",t}return n.getDefaultOptions=function(){return OA},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this,l=s.chart,f=s.options;jg({chart:l,options:f}),l.changeData(Xv(t))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return p2},n}(Ta),tB={line:FC,pie:xA,column:f1,bar:OO,area:LC,gauge:nA,"tiny-line":p2,"tiny-column":f2,"tiny-area":c2,"ring-progress":AA,progress:wA,scatter:MA,histogram:lA,funnel:qC,stock:PA},_1={line:cA,pie:bA,column:VC,bar:ZC,area:dO,gauge:ok,"tiny-line":Kk,"tiny-column":FA,"tiny-area":Xk,"ring-progress":Sk,progress:_k,scatter:Bk,histogram:lk,funnel:JO,stock:Wk},DA={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function x1(i,n,t){var s=_1[i];if(!s){console.error("could not find ".concat(i," plot"));return}var l=tB[i];l({chart:n,options:vn({},s.getDefaultOptions(),(0,E.U2)(DA,i,{}),t)})}function rB(i){var n=i.chart,t=i.options,s=t.views,l=t.legend;return(0,E.S6)(s,function(f){var d=f.region,m=f.data,x=f.meta,A=f.axes,P=f.coordinate,k=f.interactions,B=f.annotations,U=f.tooltip,W=f.geometries,ne=n.createView({region:d});ne.data(m);var de={};A&&(0,E.S6)(A,function(ve,$e){de[$e]=es(ve,Sf)}),de=vn({},x,de),ne.scale(de),A?(0,E.S6)(A,function(ve,$e){ne.axis($e,ve)}):ne.axis(!1),ne.coordinate(P),(0,E.S6)(W,function(ve){var $e=Yf({chart:ne,options:ve}).ext,lt=ve.adjust;lt&&$e.geometry.adjust(lt)}),(0,E.S6)(k,function(ve){ve.enable===!1?ne.removeInteraction(ve.type):ne.interaction(ve.type,ve.cfg)}),(0,E.S6)(B,function(ve){ne.annotation()[ve.type]((0,M.pi)({},ve))}),typeof f.animation=="boolean"?ne.animate(!1):(ne.animate(!0),(0,E.S6)(ne.geometries,function(ve){ve.animate(f.animation)})),U&&(ne.interaction("tooltip"),ne.tooltip(U))}),l?(0,E.S6)(l,function(f,d){n.legend(d,f)}):n.legend(!1),n.tooltip(t.tooltip),i}function nB(i){var n=i.chart,t=i.options,s=t.plots,l=t.data,f=l===void 0?[]:l;return(0,E.S6)(s,function(d){var m=d.type,x=d.region,A=d.options,P=A===void 0?{}:A,k=d.top,B=P.tooltip;if(k){x1(m,n,(0,M.pi)((0,M.pi)({},P),{data:f}));return}var U=n.createView((0,M.pi)({region:x},es(P,Xb)));B&&U.interaction("tooltip"),x1(m,U,(0,M.pi)({data:f},P))}),i}function d2(i){var n=i.chart,t=i.options;return n.option("slider",t.slider),i}function v2(i){return Aa(ls,rB,nB,_u,ls,Lo,Ll,d2,xu())(i)}function g2(i,n){var t=i.getModel(),s=t.data,l;return(0,E.kJ)(s)?l=s[0][n]:l=s[n],l}function LA(i){var n=Km(i);(0,E.S6)(n,function(t){t.hasState("active")&&t.setState("active",!1),t.hasState("selected")&&t.setState("selected",!1),t.hasState("inactive")&&t.setState("inactive",!1)})}var b1=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getAssociationItems=function(t,s){var l,f=this.context.event,d=s||{},m=d.linkField,x=d.dim,A=[];if(!((l=f.data)===null||l===void 0)&&l.data){var P=f.data.data;(0,E.S6)(t,function(k){var B,U,W=m;if(x==="x"?W=k.getXScale().field:x==="y"?W=(B=k.getYScales().find(function(de){return de.field===W}))===null||B===void 0?void 0:B.field:W||(W=(U=k.getGroupScales()[0])===null||U===void 0?void 0:U.field),!!W){var ne=(0,E.UI)(Km(k),function(de){var ve=!1,$e=!1,lt=(0,E.kJ)(P)?(0,E.U2)(P[0],W):(0,E.U2)(P,W);return g2(de,W)===lt?ve=!0:$e=!0,{element:de,view:k,active:ve,inactive:$e}});A.push.apply(A,ne)}})}return A},n.prototype.showTooltip=function(t){var s=Ub(this.context.view),l=this.getAssociationItems(s,t);(0,E.S6)(l,function(f){if(f.active){var d=f.element.shape.getCanvasBBox();f.view.showTooltip({x:d.minX+d.width/2,y:d.minY+d.height/2})}})},n.prototype.hideTooltip=function(){var t=Ub(this.context.view);(0,E.S6)(t,function(s){s.hideTooltip()})},n.prototype.active=function(t){var s=Jm(this.context.view),l=this.getAssociationItems(s,t);(0,E.S6)(l,function(f){var d=f.active,m=f.element;d&&m.setState("active",!0)})},n.prototype.selected=function(t){var s=Jm(this.context.view),l=this.getAssociationItems(s,t);(0,E.S6)(l,function(f){var d=f.active,m=f.element;d&&m.setState("selected",!0)})},n.prototype.highlight=function(t){var s=Jm(this.context.view),l=this.getAssociationItems(s,t);(0,E.S6)(l,function(f){var d=f.inactive,m=f.element;d&&m.setState("inactive",!0)})},n.prototype.reset=function(){var t=Jm(this.context.view);(0,E.S6)(t,function(s){LA(s)})},n}(En);Vr("association",b1),Fn("association-active",{start:[{trigger:"element:mouseenter",action:"association:active"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),Fn("association-selected",{start:[{trigger:"element:mouseenter",action:"association:selected"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),Fn("association-highlight",{start:[{trigger:"element:mouseenter",action:"association:highlight"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),Fn("association-tooltip",{start:[{trigger:"element:mousemove",action:"association:showTooltip"}],end:[{trigger:"element:mouseleave",action:"association:hideTooltip"}]});var m2=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="mix",t}return n.prototype.getSchemaAdaptor=function(){return v2},n}(Ta),Oy;(function(i){i.DEV="DEV",i.BETA="BETA",i.STABLE="STABLE"})(Oy||(Oy={}));function iB(i,n){console.warn(i===Oy.DEV?"Plot '".concat(n,"' is in DEV stage, just give us issues."):i===Oy.BETA?"Plot '".concat(n,"' is in BETA stage, DO NOT use it in production env."):i===Oy.STABLE?"Plot '".concat(n,`' is in STABLE stage, import it by "import { `).concat(n,` } from '@antv/g2plot'".`):"invalid Stage type.")}var aB=function(){function i(){}return Object.defineProperty(i,"MultiView",{get:function(){return iB(Oy.STABLE,"MultiView"),m2},enumerable:!1,configurable:!0}),i}(),Td="first-axes-view",Wp="second-axes-view",Wg="series-field-key";function BA(i,n,t,s,l){var f=[];n.forEach(function(k){s.forEach(function(B){var U,W=(U={},U[i]=B[i],U[t]=k,U[k]=B[k],U);f.push(W)})});var d=Object.values((0,E.vM)(f,t)),m=d[0],x=m===void 0?[]:m,A=d[1],P=A===void 0?[]:A;return l?[x.reverse(),P.reverse()]:[x,P]}function Gp(i){return i!=="vertical"}function NA(i,n,t){var s=n[0],l=n[1],f=s.autoPadding,d=l.autoPadding,m=i.__axisPosition,x=m.layout,A=m.position;if(Gp(x)&&A==="top"&&(s.autoPadding=t.instance(f.top,0,f.bottom,f.left),l.autoPadding=t.instance(d.top,f.left,d.bottom,0)),Gp(x)&&A==="bottom"&&(s.autoPadding=t.instance(f.top,f.right/2+5,f.bottom,f.left),l.autoPadding=t.instance(d.top,d.right,d.bottom,f.right/2+5)),!Gp(x)&&A==="bottom"){var P=f.left>=d.left?f.left:d.left;s.autoPadding=t.instance(f.top,f.right,f.bottom/2+5,P),l.autoPadding=t.instance(f.bottom/2+5,d.right,d.bottom,P)}if(!Gp(x)&&A==="top"){var P=f.left>=d.left?f.left:d.left;s.autoPadding=t.instance(f.top,f.right,0,P),l.autoPadding=t.instance(0,d.right,f.top,P)}}function qk(i){var n=i.chart,t=i.options,s=t.data,l=t.xField,f=t.yField,d=t.color,m=t.barStyle,x=t.widthRatio,A=t.legend,P=t.layout,k=BA(l,f,Wg,s,Gp(P));A?n.legend(Wg,A):A===!1&&n.legend(!1);var B,U,W=k[0],ne=k[1];Gp(P)?(B=n.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:Td}),B.coordinate().transpose().reflect("x"),U=n.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:Wp}),U.coordinate().transpose(),B.data(W),U.data(ne)):(B=n.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:Td}),U=n.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:Wp}),U.coordinate().reflect("y"),B.data(W),U.data(ne));var de=vn({},i,{chart:B,options:{widthRatio:x,xField:l,yField:f[0],seriesField:Wg,interval:{color:d,style:m}}});Uc(de);var ve=vn({},i,{chart:U,options:{xField:l,yField:f[1],seriesField:Wg,widthRatio:x,interval:{color:d,style:m}}});return Uc(ve),i}function oB(i){var n,t,s,l=i.options,f=i.chart,d=l.xAxis,m=l.yAxis,x=l.xField,A=l.yField,P=ho(f,Td),k=ho(f,Wp),B={};return(0,E.XP)((l==null?void 0:l.meta)||{}).map(function(U){(0,E.U2)(l==null?void 0:l.meta,[U,"alias"])&&(B[U]=l.meta[U].alias)}),f.scale((n={},n[Wg]={sync:!0,formatter:function(U){return(0,E.U2)(B,U,U)}},n)),Uu((t={},t[x]=d,t[A[0]]=m[A[0]],t))(vn({},i,{chart:P})),Uu((s={},s[x]=d,s[A[1]]=m[A[1]],s))(vn({},i,{chart:k})),i}function Qk(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField,m=t.layout,x=ho(n,Td),A=ho(n,Wp);return(s==null?void 0:s.position)==="bottom"?A.axis(f,(0,M.pi)((0,M.pi)({},s),{label:{formatter:function(){return""}}})):A.axis(f,!1),s===!1?x.axis(f,!1):x.axis(f,(0,M.pi)({position:Gp(m)?"top":"bottom"},s)),l===!1?(x.axis(d[0],!1),A.axis(d[1],!1)):(x.axis(d[0],l[d[0]]),A.axis(d[1],l[d[1]])),n.__axisPosition={position:x.getOptions().axes[f].position,layout:m},i}function zA(i){var n=i.chart;return _u(vn({},i,{chart:ho(n,Td)})),_u(vn({},i,{chart:ho(n,Wp)})),i}function UA(i){var n=i.chart,t=i.options,s=t.yField,l=t.yAxis;return Ng(vn({},i,{chart:ho(n,Td),options:{yAxis:l[s[0]]}})),Ng(vn({},i,{chart:ho(n,Wp),options:{yAxis:l[s[1]]}})),i}function ZA(i){var n=i.chart;return Lo(vn({},i,{chart:ho(n,Td)})),Lo(vn({},i,{chart:ho(n,Wp)})),Lo(i),i}function Jk(i){var n=i.chart;return ls(vn({},i,{chart:ho(n,Td)})),ls(vn({},i,{chart:ho(n,Wp)})),i}function sB(i){var n=this,t,s,l=i.chart,f=i.options,d=f.label,m=f.yField,x=f.layout,A=ho(l,Td),P=ho(l,Wp),k=yl(A,"interval"),B=yl(P,"interval");if(!d)k.label(!1),B.label(!1);else{var U=d.callback,W=(0,M._T)(d,["callback"]);W.position||(W.position="middle"),W.offset===void 0&&(W.offset=2);var ne=(0,M.pi)({},W);if(Gp(x)){var de=((t=ne.style)===null||t===void 0?void 0:t.textAlign)||(W.position==="middle"?"center":"left");W.style=vn({},W.style,{textAlign:de});var ve={left:"right",right:"left",center:"center"};ne.style=vn({},ne.style,{textAlign:ve[de]})}else{var $e={top:"bottom",bottom:"top",middle:"middle"};typeof W.position=="string"?W.position=$e[W.position]:typeof W.position=="function"&&(W.position=function(){for(var Ot=[],fr=0;fr<arguments.length;fr++)Ot[fr]=arguments[fr];return $e[W.position.apply(n,Ot)]});var lt=((s=ne.style)===null||s===void 0?void 0:s.textBaseline)||"bottom";ne.style=vn({},ne.style,{textBaseline:lt});var vt={top:"bottom",bottom:"top",middle:"middle"};W.style=vn({},W.style,{textBaseline:vt[lt]})}k.label({fields:[m[0]],callback:U,cfg:Dl(ne)}),B.label({fields:[m[1]],callback:U,cfg:Dl(W)})}return i}function rp(i){return Aa(qk,oB,Qk,UA,ZA,sB,Ll,zA,Jk)(i)}var y2=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="bidirectional-bar",t}return n.getDefaultOptions=function(){return vn({},i.getDefaultOptions.call(this),{syncViewPadding:NA})},n.prototype.changeData=function(t){t===void 0&&(t=[]),this.chart.emit(Le.BEFORE_CHANGE_DATA,Ya.fromData(this.chart,Le.BEFORE_CHANGE_DATA,null)),this.updateOption({data:t});var s=this.options,l=s.xField,f=s.yField,d=s.layout,m=BA(l,f,Wg,t,Gp(d)),x=m[0],A=m[1],P=ho(this.chart,Td),k=ho(this.chart,Wp);P.data(x),k.data(A),this.chart.render(!0),this.chart.emit(Le.AFTER_CHANGE_DATA,Ya.fromData(this.chart,Le.AFTER_CHANGE_DATA,null))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return rp},n.SERIES_FIELD_KEY=Wg,n}(Ta),S1,$v="$$range$$",uB="low-q1-median-q3-high",eF="$$y_outliers$$",VA="outliers_view",HA=vn({},Ta.getDefaultOptions(),{meta:(S1={},S1[$v]={min:0,alias:uB},S1),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),_2=function(i,n){var t=i;if(Array.isArray(n)){var s=n[0],l=n[1],f=n[2],d=n[3],m=n[4];t=(0,E.UI)(i,function(x){return x[$v]=[x[s],x[l],x[f],x[d],x[m]],x})}return t};function E1(i){var n=i.chart,t=i.options,s=t.xField,l=t.yField,f=t.groupField,d=t.color,m=t.tooltip,x=t.boxStyle;n.data(_2(t.data,l));var A=(0,E.kJ)(l)?$v:l,P=l?(0,E.kJ)(l)?l:[l]:[],k=m;k!==!1&&(k=vn({},{fields:(0,E.kJ)(l)?l:[]},k));var B=Gb(vn({},i,{options:{xField:s,yField:A,seriesField:f,tooltip:k,rawFields:P,label:!1,schema:{shape:"box",color:d,style:x}}})).ext;return f&&B.geometry.adjust("dodge"),i}function Gg(i){var n=i.chart,t=i.options,s=t.xField,l=t.data,f=t.outliersField,d=t.outliersStyle,m=t.padding,x=t.label;if(!f)return i;var A=n.createView({padding:m,id:VA}),P=l.reduce(function(k,B){var U=B[f];return U.forEach(function(W){var ne;return k.push((0,M.pi)((0,M.pi)({},B),(ne={},ne[f]=W,ne)))}),k},[]);return A.data(P),wh({chart:A,options:{xField:s,yField:f,point:{shape:"circle",style:d},label:x}}),A.axis(!1),i}function tF(i){var n,t,s=i.chart,l=i.options,f=l.meta,d=l.xAxis,m=l.yAxis,x=l.xField,A=l.yField,P=l.outliersField,k=Array.isArray(A)?$v:A,B={};if(P){var U=eF;B=(n={},n[P]={sync:U,nice:!0},n[k]={sync:U,nice:!0},n)}var W=vn(B,f,(t={},t[x]=es(d,Sf),t[k]=es(m,Sf),t));return s.scale(W),i}function lB(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField,m=Array.isArray(d)?$v:d;return s===!1?n.axis(f,!1):n.axis(f,s),l===!1?n.axis($v,!1):n.axis(m,l),i}function jA(i){var n=i.chart,t=i.options,s=t.legend,l=t.groupField;return l?s?n.legend(l,s):n.legend(l,{position:"bottom"}):n.legend(!1),i}function WA(i){return Aa(E1,Gg,tF,lB,jA,Ll,xu(),_u,ls,Lo)(i)}var s0=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="box",t}return n.getDefaultOptions=function(){return HA},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this.options.yField,l=this.chart.views.find(function(f){return f.id===VA});l&&l.data(t),this.chart.changeData(_2(t,s))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return WA},n}(Ta);function cv(i,n,t){return i.length>1?"".concat(n,"_").concat(t):"".concat(n)}function x2(i){var n=i.data,t=i.xField,s=i.measureField,l=i.rangeField,f=i.targetField,d=i.layout,m=[],x=[];n.forEach(function(k,B){var U=[k[l]].flat();U.sort(function(de,ve){return de-ve}),U.forEach(function(de,ve){var $e,lt=ve===0?de:U[ve]-U[ve-1];m.push(($e={rKey:"".concat(l,"_").concat(ve)},$e[t]=t?k[t]:String(B),$e[l]=lt,$e))});var W=[k[s]].flat();W.forEach(function(de,ve){var $e;m.push(($e={mKey:cv(W,s,ve)},$e[t]=t?k[t]:String(B),$e[s]=de,$e))});var ne=[k[f]].flat();ne.forEach(function(de,ve){var $e;m.push(($e={tKey:cv(ne,f,ve)},$e[t]=t?k[t]:String(B),$e[f]=de,$e))}),x.push(k[l],k[s],k[f])});var A=Math.min.apply(Math,x.flat(1/0)),P=Math.max.apply(Math,x.flat(1/0));return A=A>0?0:A,d==="vertical"&&m.reverse(),{min:A,max:P,ds:m}}function GA(i){var n=i.chart,t=i.options,s=t.bulletStyle,l=t.targetField,f=t.rangeField,d=t.measureField,m=t.xField,x=t.color,A=t.layout,P=t.size,k=t.label,B=x2(t),U=B.min,W=B.max,ne=B.ds;n.data(ne);var de=vn({},i,{options:{xField:m,yField:f,seriesField:"rKey",isStack:!0,label:(0,E.U2)(k,"range"),interval:{color:(0,E.U2)(x,"range"),style:(0,E.U2)(s,"range"),size:(0,E.U2)(P,"range")}}});Uc(de),n.geometries[0].tooltip(!1);var ve=vn({},i,{options:{xField:m,yField:d,seriesField:"mKey",isStack:!0,label:(0,E.U2)(k,"measure"),interval:{color:(0,E.U2)(x,"measure"),style:(0,E.U2)(s,"measure"),size:(0,E.U2)(P,"measure")}}});Uc(ve);var $e=vn({},i,{options:{xField:m,yField:l,seriesField:"tKey",label:(0,E.U2)(k,"target"),point:{color:(0,E.U2)(x,"target"),style:(0,E.U2)(s,"target"),size:(0,E.mf)((0,E.U2)(P,"target"))?function(lt){return(0,E.U2)(P,"target")(lt)/2}:(0,E.U2)(P,"target")/2,shape:A==="horizontal"?"line":"hyphen"}}});return wh($e),A==="horizontal"&&n.coordinate().transpose(),(0,M.pi)((0,M.pi)({},i),{ext:{data:{min:U,max:W}}})}function ky(i){var n,t,s=i.options,l=i.ext,f=s.xAxis,d=s.yAxis,m=s.targetField,x=s.rangeField,A=s.measureField,P=s.xField,k=l.data;return Aa(Uu((n={},n[P]=f,n[A]=d,n),(t={},t[A]={min:k==null?void 0:k.min,max:k==null?void 0:k.max,sync:!0},t[m]={sync:"".concat(A)},t[x]={sync:"".concat(A)},t)))(i)}function XA(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.measureField,m=t.rangeField,x=t.targetField;return n.axis("".concat(m),!1),n.axis("".concat(x),!1),s===!1?n.axis("".concat(f),!1):n.axis("".concat(f),s),l===!1?n.axis("".concat(d),!1):n.axis("".concat(d),l),i}function $A(i){var n=i.chart,t=i.options,s=t.legend;return n.removeInteraction("legend-filter"),n.legend(s),n.legend("rKey",!1),n.legend("mKey",!1),n.legend("tKey",!1),i}function cB(i){var n=i.chart,t=i.options,s=t.label,l=t.measureField,f=t.targetField,d=t.rangeField,m=n.geometries,x=m[0],A=m[1],P=m[2];return(0,E.U2)(s,"range")?x.label("".concat(d),(0,M.pi)({layout:[{type:"limit-in-plot"}]},Dl(s.range))):x.label(!1),(0,E.U2)(s,"measure")?A.label("".concat(l),(0,M.pi)({layout:[{type:"limit-in-plot"}]},Dl(s.measure))):A.label(!1),(0,E.U2)(s,"target")?P.label("".concat(f),(0,M.pi)({layout:[{type:"limit-in-plot"}]},Dl(s.target))):P.label(!1),i}function fB(i){Aa(GA,ky,XA,$A,Lo,cB,Ll,_u,ls)(i)}var YA=vn({},Ta.getDefaultOptions(),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}}),hB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="bullet",t}return n.getDefaultOptions=function(){return YA},n.prototype.changeData=function(t){this.updateOption({data:t});var s=x2(this.options),l=s.min,f=s.max,d=s.ds;ky({options:this.options,ext:{data:{min:l,max:f}},chart:this.chart}),this.chart.changeData(d)},n.prototype.getSchemaAdaptor=function(){return fB},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n}(Ta),w1={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(i){return i.id},source:function(i){return i.source},target:function(i){return i.target},sourceWeight:function(i){return i.value||1},targetWeight:function(i){return i.value||1},sortBy:null};function rF(i,n,t){(0,E.U5)(i,function(s,l){s.inEdges=n.filter(function(f){return"".concat(t.target(f))==="".concat(l)}),s.outEdges=n.filter(function(f){return"".concat(t.source(f))==="".concat(l)}),s.edges=s.outEdges.concat(s.inEdges),s.frequency=s.edges.length,s.value=0,s.inEdges.forEach(function(f){s.value+=t.targetWeight(f)}),s.outEdges.forEach(function(f){s.value+=t.sourceWeight(f)})})}function b2(i,n){var t={weight:function(l,f){return f.value-l.value},frequency:function(l,f){return f.frequency-l.frequency},id:function(l,f){return"".concat(n.id(l)).localeCompare("".concat(n.id(f)))}},s=t[n.sortBy];!s&&(0,E.mf)(n.sortBy)&&(s=n.sortBy),s&&i.sort(s)}function S2(i,n){var t=i.length;if(!t)throw new TypeError("Invalid nodes: it's empty!");if(n.weight){var s=n.nodePaddingRatio;if(s<0||s>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var l=s/(2*t),f=n.nodeWidthRatio;if(f<=0||f>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var d=0;i.forEach(function(x){d+=x.value}),i.forEach(function(x){x.weight=x.value/d,x.width=x.weight*(1-s),x.height=f}),i.forEach(function(x,A){for(var P=0,k=A-1;k>=0;k--)P+=i[k].width+2*l;var B=x.minX=l+P,U=x.maxX=x.minX+x.width,W=x.minY=n.y-f/2,ne=x.maxY=W+f;x.x=[B,U,U,B],x.y=[W,W,ne,ne]})}else{var m=1/t;i.forEach(function(x,A){x.x=(A+.5)*m,x.y=n.y})}return i}function nF(i,n,t){if(t.weight){var s={};(0,E.U5)(i,function(l,f){s[f]=l.value}),n.forEach(function(l){var f=t.source(l),d=t.target(l),m=i[f],x=i[d];if(m&&x){var A=s[f],P=t.sourceWeight(l),k=m.minX+(m.value-A)/m.value*m.width,B=k+P/m.value*m.width;s[f]-=P;var U=s[d],W=t.targetWeight(l),ne=x.minX+(x.value-U)/x.value*x.width,de=ne+W/x.value*x.width;s[d]-=W;var ve=t.y;l.x=[k,B,ne,de],l.y=[ve,ve,ve,ve],l.source=m,l.target=x}})}else n.forEach(function(l){var f=i[t.source(l)],d=i[t.target(l)];f&&d&&(l.x=[f.x,d.x],l.y=[f.y,d.y],l.source=f,l.target=d)});return n}function iF(i){return(0,E.f0)({},w1,i)}function aF(i,n){var t=iF(i),s={},l=n.nodes,f=n.links;l.forEach(function(x){var A=t.id(x);s[A]=x}),rF(s,f,t),b2(l,t);var d=S2(l,t),m=nF(s,f,t);return{nodes:d,links:m}}var KA="x",qA="y",C1="name",QA="source",oF={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(i,n){var t=(i[0]+i[1])/2,s=t>.5?-4:4;return{offsetX:s,content:n}},labelEmit:!0,style:{fill:"#8c8c8c"}},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value","isNode"],showContent:function(i){return!(0,E.U2)(i,[0,"data","isNode"])},formatter:function(i){var n=i.source,t=i.target,s=i.value;return{name:"".concat(n," -> ").concat(t),value:s}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function sF(i){var n=i.options,t=n.data,s=n.sourceField,l=n.targetField,f=n.weightField,d=n.nodePaddingRatio,m=n.nodeWidthRatio,x=n.rawFields,A=x===void 0?[]:x,P=kb(t,s,l,f),k=aF({weight:!0,nodePaddingRatio:d,nodeWidthRatio:m},P),B=k.nodes,U=k.links,W=B.map(function(de){return(0,M.pi)((0,M.pi)({},es(de,(0,M.ev)(["id","x","y","name"],A,!0))),{isNode:!0})}),ne=U.map(function(de){return(0,M.pi)((0,M.pi)({source:de.source.name,target:de.target.name,name:de.source.name||de.target.name},es(de,(0,M.ev)(["x","y","value"],A,!0))),{isNode:!1})});return(0,M.pi)((0,M.pi)({},i),{ext:(0,M.pi)((0,M.pi)({},i.ext),{chordData:{nodesData:W,edgesData:ne}})})}function JA(i){var n,t=i.chart;return t.scale((n={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}},n[C1]={sync:"color"},n[QA]={sync:"color"},n)),i}function af(i){var n=i.chart;return n.axis(!1),i}function E2(i){var n=i.chart;return n.legend(!1),i}function eT(i){var n=i.chart,t=i.options,s=t.tooltip;return n.tooltip(s),i}function uF(i){var n=i.chart;return n.coordinate("polar").reflect("y"),i}function lF(i){var n=i.chart,t=i.options,s=i.ext.chordData.nodesData,l=t.nodeStyle,f=t.label,d=t.tooltip,m=n.createView();return m.data(s),u1({chart:m,options:{xField:KA,yField:qA,seriesField:C1,polygon:{style:l},label:f,tooltip:d}}),i}function A1(i){var n=i.chart,t=i.options,s=i.ext.chordData.edgesData,l=t.edgeStyle,f=t.tooltip,d=n.createView();d.data(s);var m={xField:KA,yField:qA,seriesField:QA,edge:{style:l,shape:"arc"},tooltip:f};return IC({chart:d,options:m}),i}function w2(i){var n=i.chart,t=i.options,s=t.animation;return Ey(n,s,qm(n)),i}function tT(i){return Aa(Lo,sF,uF,JA,af,E2,eT,A1,lF,_u,Bg,w2)(i)}var pB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="chord",t}return n.getDefaultOptions=function(){return oF},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return tT},n}(Ta),T1=["x","y","r","name","value","path","depth"],C2={colorField:"name",autoFit:!0,pointStyle:{lineWidth:0,stroke:"#fff"},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}},rT=4,M1=0,Xg=5,nT="drilldown-bread-crumb",cF={position:"top-left",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}},Fy="hierarchy-data-transform-params",fF=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.name="drill-down",t.historyCache=[],t.breadCrumbGroup=null,t.breadCrumbCfg=cF,t}return n.prototype.click=function(){var t=(0,E.U2)(this.context,["event","data","data"]);if(!t)return!1;this.drill(t),this.drawBreadCrumb()},n.prototype.resetPosition=function(){if(this.breadCrumbGroup){var t=this.context.view.getCoordinate(),s=this.breadCrumbGroup,l=s.getBBox(),f=this.getButtonCfg().position,d={x:t.start.x,y:t.end.y-(l.height+Xg*2)};t.isPolar&&(d={x:0,y:0}),f==="bottom-left"&&(d={x:t.start.x,y:t.start.y});var m=ec.transform(null,[["t",d.x+M1,d.y+l.height+Xg]]);s.setMatrix(m)}},n.prototype.back=function(){(0,E.dp)(this.historyCache)&&this.backTo(this.historyCache.slice(0,-1))},n.prototype.reset=function(){this.historyCache[0]&&this.backTo(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},n.prototype.drill=function(t){var s=this.context.view,l=(0,E.U2)(s,["interactions","drill-down","cfg","transformData"],function(A){return A}),f=l((0,M.pi)({data:t.data},t[Fy]));s.changeData(f);for(var d=[],m=t;m;){var x=m.data;d.unshift({id:"".concat(x.name,"_").concat(m.height,"_").concat(m.depth),name:x.name,children:l((0,M.pi)({data:x},t[Fy]))}),m=m.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(d)},n.prototype.backTo=function(t){if(!(!t||t.length<=0)){var s=this.context.view,l=(0,E.Z$)(t).children;s.changeData(l),t.length>1?(this.historyCache=t,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},n.prototype.getButtonCfg=function(){var t=this.context.view,s=(0,E.U2)(t,["interactions","drill-down","cfg","drillDownConfig"]);return vn(this.breadCrumbCfg,s==null?void 0:s.breadCrumb,this.cfg)},n.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},n.prototype.drawBreadCrumbGroup=function(){var t=this,s=this.getButtonCfg(),l=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:nT});var f=0;l.forEach(function(d,m){var x=t.breadCrumbGroup.addShape({type:"text",id:d.id,name:"".concat(nT,"_").concat(d.name,"_text"),attrs:(0,M.pi)((0,M.pi)({text:m===0&&!(0,E.UM)(s.rootText)?s.rootText:d.name},s.textStyle),{x:f,y:0})}),A=x.getBBox();if(f+=A.width+rT,x.on("click",function(B){var U,W=B.target.get("id");if(W!==((U=(0,E.Z$)(l))===null||U===void 0?void 0:U.id)){var ne=l.slice(0,l.findIndex(function(de){return de.id===W})+1);t.backTo(ne)}}),x.on("mouseenter",function(B){var U,W=B.target.get("id");W!==((U=(0,E.Z$)(l))===null||U===void 0?void 0:U.id)?x.attr(s.activeTextStyle):x.attr({cursor:"default"})}),x.on("mouseleave",function(){x.attr(s.textStyle)}),m<l.length-1){var P=t.breadCrumbGroup.addShape({type:"text",name:"".concat(s.name,"_").concat(d.name,"_divider"),attrs:(0,M.pi)((0,M.pi)({text:s.dividerText},s.textStyle),{x:f,y:0})}),k=P.getBBox();f+=k.width+rT}})},n.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},n.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),i.prototype.destroy.call(this)},n}(En);function iT(i){return ct()(i)==="object"&&"length"in i?i:Array.from(i)}function hF(i){for(var n=i.length,t,s;n;)s=Math.random()*n--|0,t=i[n],i[n]=i[s],i[s]=t;return i}function A2(i){for(var n=0,t=(i=hF(Array.from(i))).length,s=[],l,f;n<t;)l=i[n],f&&T2(f,l)?++n:(f=pF(s=aT(s,l)),n=0);return f}function aT(i,n){var t,s;if(R1(n,i))return[n];for(t=0;t<i.length;++t)if(Dy(n,i[t])&&R1($g(i[t],n),i))return[i[t],n];for(t=0;t<i.length-1;++t)for(s=t+1;s<i.length;++s)if(Dy($g(i[t],i[s]),n)&&Dy($g(i[t],n),i[s])&&Dy($g(i[s],n),i[t])&&R1(M2(i[t],i[s],n),i))return[i[t],i[s],n];throw new Error}function Dy(i,n){var t=i.r-n.r,s=n.x-i.x,l=n.y-i.y;return t<0||t*t<s*s+l*l}function T2(i,n){var t=i.r-n.r+Math.max(i.r,n.r,1)*1e-9,s=n.x-i.x,l=n.y-i.y;return t>0&&t*t>s*s+l*l}function R1(i,n){for(var t=0;t<n.length;++t)if(!T2(i,n[t]))return!1;return!0}function pF(i){switch(i.length){case 1:return I1(i[0]);case 2:return $g(i[0],i[1]);case 3:return M2(i[0],i[1],i[2])}}function I1(i){return{x:i.x,y:i.y,r:i.r}}function $g(i,n){var t=i.x,s=i.y,l=i.r,f=n.x,d=n.y,m=n.r,x=f-t,A=d-s,P=m-l,k=Math.sqrt(x*x+A*A);return{x:(t+f+x/k*P)/2,y:(s+d+A/k*P)/2,r:(k+l+m)/2}}function M2(i,n,t){var s=i.x,l=i.y,f=i.r,d=n.x,m=n.y,x=n.r,A=t.x,P=t.y,k=t.r,B=s-d,U=s-A,W=l-m,ne=l-P,de=x-f,ve=k-f,$e=s*s+l*l-f*f,lt=$e-d*d-m*m+x*x,vt=$e-A*A-P*P+k*k,Ot=U*W-B*ne,fr=(W*vt-ne*lt)/(Ot*2)-s,Tr=(ne*de-W*ve)/Ot,zr=(U*lt-B*vt)/(Ot*2)-l,cn=(B*ve-U*de)/Ot,Qr=Tr*Tr+cn*cn-1,On=2*(f+fr*Tr+zr*cn),Qn=fr*fr+zr*zr-f*f,Hi=-(Qr?(On+Math.sqrt(On*On-4*Qr*Qn))/(2*Qr):Qn/On);return{x:s+fr+Tr*Hi,y:l+zr+cn*Hi,r:Hi}}function oT(i,n,t){var s=i.x-n.x,l,f,d=i.y-n.y,m,x,A=s*s+d*d;A?(f=n.r+t.r,f*=f,x=i.r+t.r,x*=x,f>x?(l=(A+x-f)/(2*A),m=Math.sqrt(Math.max(0,x/A-l*l)),t.x=i.x-l*s-m*d,t.y=i.y-l*d+m*s):(l=(A+f-x)/(2*A),m=Math.sqrt(Math.max(0,f/A-l*l)),t.x=n.x+l*s-m*d,t.y=n.y+l*d+m*s)):(t.x=n.x+t.r,t.y=n.y)}function sT(i,n){var t=i.r+n.r-1e-6,s=n.x-i.x,l=n.y-i.y;return t>0&&t*t>s*s+l*l}function uT(i){var n=i._,t=i.next._,s=n.r+t.r,l=(n.x*t.r+t.x*n.r)/s,f=(n.y*t.r+t.y*n.r)/s;return l*l+f*f}function P1(i){this._=i,this.next=null,this.previous=null}function u0(i){if(!(l=(i=iT(i)).length))return 0;var n,t,s,l,f,d,m,x,A,P,k;if(n=i[0],n.x=0,n.y=0,!(l>1))return n.r;if(t=i[1],n.x=-t.r,t.x=n.r,t.y=0,!(l>2))return n.r+t.r;oT(t,n,s=i[2]),n=new P1(n),t=new P1(t),s=new P1(s),n.next=s.previous=t,t.next=n.previous=s,s.next=t.previous=n;e:for(m=3;m<l;++m){oT(n._,t._,s=i[m]),s=new P1(s),x=t.next,A=n.previous,P=t._.r,k=n._.r;do if(P<=k){if(sT(x._,s._)){t=x,n.next=t,t.previous=n,--m;continue e}P+=x._.r,x=x.next}else{if(sT(A._,s._)){n=A,n.next=t,t.previous=n,--m;continue e}k+=A._.r,A=A.previous}while(x!==A.next);for(s.previous=n,s.next=t,n.next=t.previous=t=s,f=uT(n);(s=s.next)!==t;)(d=uT(s))<f&&(n=s,f=d);t=n.next}for(n=[t._],s=t;(s=s.next)!==t;)n.push(s._);for(s=A2(n),m=0;m<l;++m)n=i[m],n.x-=s.x,n.y-=s.y;return s.r}function lT(i){return u0(i),i}function dF(i){return i==null?null:Ly(i)}function Ly(i){if(typeof i!="function")throw new Error;return i}function Yv(){return 0}function Yg(i){return function(){return i}}function vF(i){return Math.sqrt(i.value)}function cT(){var i=null,n=1,t=1,s=Yv;function l(f){return f.x=n/2,f.y=t/2,i?f.eachBefore(fT(i)).eachAfter(R2(s,.5)).eachBefore(hT(1)):f.eachBefore(fT(vF)).eachAfter(R2(Yv,1)).eachAfter(R2(s,f.r/Math.min(n,t))).eachBefore(hT(Math.min(n,t)/(2*f.r))),f}return l.radius=function(f){return arguments.length?(i=dF(f),l):i},l.size=function(f){return arguments.length?(n=+f[0],t=+f[1],l):[n,t]},l.padding=function(f){return arguments.length?(s=typeof f=="function"?f:Yg(+f),l):s},l}function fT(i){return function(n){n.children||(n.r=Math.max(0,+i(n)||0))}}function R2(i,n){return function(t){if(s=t.children){var s,l,f=s.length,d=i(t)*n||0,m;if(d)for(l=0;l<f;++l)s[l].r+=d;if(m=u0(s),d)for(l=0;l<f;++l)s[l].r-=d;t.r=m+d}}}function hT(i){return function(n){var t=n.parent;n.r*=i,t&&(n.x=t.x+i*n.x,n.y=t.y+i*n.y)}}var pT=F(9783),gF=F.n(pT);function dT(i){var n=0,t=i.children,s=t&&t.length;if(!s)n=1;else for(;--s>=0;)n+=t[s].value;i.value=n}function vT(){return this.eachAfter(dT)}var gT=F(96695),mT=F.n(gT);function mF(i,n){var t=-1,s=mT()(this),l;try{for(s.s();!(l=s.n()).done;){var f=l.value;i.call(n,f,++t,this)}}catch(d){s.e(d)}finally{s.f()}return this}function yT(i,n){for(var t=this,s=[t],l,f,d=-1;t=s.pop();)if(i.call(n,t,++d,this),l=t.children)for(f=l.length-1;f>=0;--f)s.push(l[f]);return this}function yF(i,n){for(var t=this,s=[t],l=[],f,d,m,x=-1;t=s.pop();)if(l.push(t),f=t.children)for(d=0,m=f.length;d<m;++d)s.push(f[d]);for(;t=l.pop();)i.call(n,t,++x,this);return this}function _F(i,n){var t=-1,s=mT()(this),l;try{for(s.s();!(l=s.n()).done;){var f=l.value;if(i.call(n,f,++t,this))return f}}catch(d){s.e(d)}finally{s.f()}}function xF(i){return this.eachAfter(function(n){for(var t=+i(n.data)||0,s=n.children,l=s&&s.length;--l>=0;)t+=s[l].value;n.value=t})}function I2(i){return this.eachBefore(function(n){n.children&&n.children.sort(i)})}function dB(i){for(var n=this,t=_T(n,i),s=[n];n!==t;)n=n.parent,s.push(n);for(var l=s.length;i!==t;)s.splice(l,0,i),i=i.parent;return s}function _T(i,n){if(i===n)return i;var t=i.ancestors(),s=n.ancestors(),l=null;for(i=t.pop(),n=s.pop();i===n;)l=i,i=t.pop(),n=s.pop();return l}function xT(){for(var i=this,n=[i];i=i.parent;)n.push(i);return n}function bT(){return Array.from(this)}function P2(){var i=[];return this.eachBefore(function(n){n.children||i.push(n)}),i}function O2(){var i=this,n=[];return i.each(function(t){t!==i&&n.push({source:t.parent,target:t})}),n}var Ef=F(15009),O1=F.n(Ef),l0=O1()().mark(bF);function bF(){var i,n,t,s,l,f;return O1()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:i=this,t=[i];case 1:n=t.reverse(),t=[];case 2:if(!(i=n.pop())){m.next=8;break}return m.next=5,i;case 5:if(s=i.children)for(l=0,f=s.length;l<f;++l)t.push(s[l]);m.next=2;break;case 8:if(t.length){m.next=1;break}case 9:case"end":return m.stop()}},l0,this)}function Kg(i,n){i instanceof Map?(i=[void 0,i],n===void 0&&(n=k1)):n===void 0&&(n=vB);for(var t=new qg(i),s,l=[t],f,d,m,x;s=l.pop();)if((d=n(s.data))&&(x=(d=Array.from(d)).length))for(s.children=d,m=x-1;m>=0;--m)l.push(f=d[m]=new qg(d[m])),f.parent=s,f.depth=s.depth+1;return t.eachBefore(k2)}function SF(){return Kg(this).eachBefore(By)}function vB(i){return i.children}function k1(i){return Array.isArray(i)?i[1]:null}function By(i){i.data.value!==void 0&&(i.value=i.data.value),i.data=i.data.data}function k2(i){var n=0;do i.height=n;while((i=i.parent)&&i.height<++n)}function qg(i){this.data=i,this.depth=this.height=0,this.parent=null}qg.prototype=Kg.prototype=gF()({constructor:qg,count:vT,each:mF,eachAfter:yF,eachBefore:yT,find:_F,sum:xF,sort:I2,path:dB,ancestors:xT,descendants:bT,leaves:P2,links:O2,copy:SF},Symbol.iterator,bF);var F2="nodeIndex",Kv="childNodeCount",Ny="nodeAncestor",c0="Invalid field: it must be a string!";function D2(i,n){var t=i.field,s=i.fields;if((0,E.HD)(t))return t;if((0,E.kJ)(t))return console.warn(c0),t[0];if(console.warn("".concat(c0," will try to get fields instead.")),(0,E.HD)(s))return s;if((0,E.kJ)(s)&&s.length)return s[0];if(n)return n;throw new TypeError(c0)}function L2(i){var n=[];if(i&&i.each){var t,s;i.each(function(l){var f,d;l.parent!==t?(t=l.parent,s=0):s+=1;var m=(0,E.hX)((((f=l.ancestors)===null||f===void 0?void 0:f.call(l))||[]).map(function(x){return n.find(function(A){return A.name===x.name})||x}),function(x){var A=x.depth;return A>0&&A<l.depth});l[Ny]=m,l[Kv]=((d=l.children)===null||d===void 0?void 0:d.length)||0,l[F2]=s,n.push(l)})}else i&&i.eachNode&&i.eachNode(function(l){n.push(l)});return n}var f0={field:"value",as:["x","y","r"],sort:function(i,n){return n.value-i.value}};function EF(i,n){n=(0,E.f0)({},f0,n);var t=n.as;if(!(0,E.kJ)(t)||t.length!==3)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');var s;try{s=D2(n)}catch(A){console.warn(A)}var l=function(A){return cT().size(n.size).padding(n.padding)(Kg(A).sum(function(P){return P[s]}).sort(n.sort))},f=l(i),d=t[0],m=t[1],x=t[2];return f.each(function(A){A[d]=A.x,A[m]=A.y,A[x]=A.r}),L2(f)}function ST(i){var n=i.data,t=i.hierarchyConfig,s=i.rawFields,l=s===void 0?[]:s,f=i.enableDrillDown,d=EF(n,(0,M.pi)((0,M.pi)({},t),{field:"value",as:["x","y","r"]})),m=[];return d.forEach(function(x){for(var A,P=x.data.name,k=(0,M.pi)({},x);k.depth>1;)P="".concat((A=k.parent.data)===null||A===void 0?void 0:A.name," / ").concat(P),k=k.parent;if(f&&x.depth>2)return null;var B=vn({},x.data,(0,M.pi)((0,M.pi)((0,M.pi)({},es(x.data,l)),{path:P}),x));B.ext=t,B[Fy]={hierarchyConfig:t,rawFields:l,enableDrillDown:f},m.push(B)}),m}function wF(i,n,t){var s=$f([i,n]),l=s[0],f=s[1],d=s[2],m=s[3],x=t.width,A=t.height,P=x-(m+f),k=A-(l+d),B=Math.min(P,k),U=(P-B)/2,W=(k-B)/2,ne=l+W,de=f+U,ve=d+W,$e=m+U,lt=[ne,de,ve,$e],vt=B<0?0:B;return{finalPadding:lt,finalSize:vt}}function gB(i){var n=i.chart,t=Math.min(n.viewBBox.width,n.viewBBox.height);return vn({options:{size:function(s){var l=s.r;return l*t}}},i)}function mB(i){var n=i.options,t=i.chart,s=t.viewBBox,l=n.padding,f=n.appendPadding,d=n.drilldown,m=f;if(d!=null&&d.enabled){var x=t1(t.appendPadding,(0,E.U2)(d,["breadCrumb","position"]));m=$f([x,f])}var A=wF(l,m,s).finalPadding;return t.padding=A,t.appendPadding=0,i}function yB(i){var n=i.chart,t=i.options,s=n.padding,l=n.appendPadding,f=t.color,d=t.colorField,m=t.pointStyle,x=t.hierarchyConfig,A=t.sizeField,P=t.rawFields,k=P===void 0?[]:P,B=t.drilldown,U=ST({data:t.data,hierarchyConfig:x,enableDrillDown:B==null?void 0:B.enabled,rawFields:k});n.data(U);var W=n.viewBBox,ne=wF(s,l,W).finalSize,de=function(ve){var $e=ve.r;return $e*ne};return A&&(de=function(ve){return ve[A]*ne}),wh(vn({},i,{options:{xField:"x",yField:"y",seriesField:d,sizeField:A,rawFields:(0,M.ev)((0,M.ev)([],T1,!0),k,!0),point:{color:f,style:m,shape:"circle",size:de}}})),i}function _B(i){return Aa(Uu({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(i)}function xB(i){var n=i.chart,t=i.options,s=t.tooltip;if(s===!1)n.tooltip(!1);else{var l=s;(0,E.U2)(s,"fields")||(l=vn({},{customItems:function(f){return f.map(function(d){var m=(0,E.U2)(n.getOptions(),"scales"),x=(0,E.U2)(m,["name","formatter"],function(P){return P}),A=(0,E.U2)(m,["value","formatter"],function(P){return P});return(0,M.pi)((0,M.pi)({},d),{name:x(d.data.name),value:A(d.data.value)})})}},l)),n.tooltip(l)}return i}function bB(i){var n=i.chart;return n.axis(!1),i}function ET(i){var n=i.drilldown,t=i.interactions,s=t===void 0?[]:t;return n!=null&&n.enabled?vn({},i,{interactions:(0,M.ev)((0,M.ev)([],s,!0),[{type:"drill-down",cfg:{drillDownConfig:n,transformData:ST,enableDrillDown:!0}}],!1)}):i}function B2(i){var n=i.chart,t=i.options;return _u({chart:n,options:ET(t)}),i}function SB(i){return Aa(Eh("pointStyle"),gB,mB,Lo,_B,yB,bB,t0,xB,B2,ls,xu())(i)}function N2(i){var n=(0,E.U2)(i,["event","data","data"],{});return(0,E.kJ)(n.children)&&n.children.length>0}function wT(i){var n=i.view.getCoordinate(),t=n.innerRadius;if(t){var s=i.event,l=s.x,f=s.y,d=n.center,m=d.x,x=d.y,A=n.getRadius()*t,P=Math.sqrt(Math.pow(m-l,2)+Math.pow(x-f,2));return P<A}return!1}Vr("drill-down-action",fF),Fn("drill-down",{showEnable:[{trigger:"element:mouseenter",action:"cursor:pointer",isEnable:N2},{trigger:"element:mouseleave",action:"cursor:default"},{trigger:"element:mouseleave",action:"cursor:pointer",isEnable:wT}],start:[{trigger:"element:click",isEnable:N2,action:["drill-down-action:click"]},{trigger:"afterchangesize",action:["drill-down-action:resetPosition"]},{trigger:"click",isEnable:wT,action:["drill-down-action:back"]}]});var l8=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="circle-packing",t}return n.getDefaultOptions=function(){return C2},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return SB},n.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},n}(Ta),Kf="left-axes-view",Ch="right-axes-view",CF={nice:!0,label:{autoHide:!0,autoRotate:!1}},CT=(0,M.pi)((0,M.pi)({},CF),{position:"left"}),AF=(0,M.pi)((0,M.pi)({},CF),{position:"right",grid:null}),zy;(function(i){i.Left="Left",i.Right="Right"})(zy||(zy={}));var Md;(function(i){i.Line="line",i.Column="column"})(Md||(Md={}));function z2(i){return(0,E.U2)(i,"geometry")===Md.Line}function AT(i){return(0,E.U2)(i,"geometry")===Md.Column}function qv(i,n,t){return AT(t)?vn({},{geometry:Md.Column,label:t.label&&t.isRange?{content:function(s){var l;return(l=s[n])===null||l===void 0?void 0:l.join("-")}}:void 0},t):(0,M.pi)({geometry:Md.Line},t)}function U2(i,n){var t=i[0],s=i[1];if((0,E.kJ)(n)){var l=n[0],f=n[1];return[l,f]}var d=(0,E.U2)(n,t),m=(0,E.U2)(n,s);return[d,m]}function Uy(i,n){return n===zy.Left?i===!1?!1:vn({},CT,i):n===zy.Right?i===!1?!1:vn({},AF,i):i}function TF(i){var n=i.options,t=i.chart,s=n.geometryOption,l=s.isStack,f=s.color,d=s.seriesField,m=s.groupField,x=s.isGroup,A=["xField","yField"];if(z2(s)){n0(vn({},i,{options:(0,M.pi)((0,M.pi)((0,M.pi)({},es(n,A)),s),{line:{color:s.color,style:s.lineStyle}})})),wh(vn({},i,{options:(0,M.pi)((0,M.pi)((0,M.pi)({},es(n,A)),s),{point:s.point&&(0,M.pi)({color:f,shape:"circle"},s.point)})}));var P=[];x&&P.push({type:"dodge",dodgeBy:m||d,customOffset:0}),l&&P.push({type:"stack"}),P.length&&(0,E.S6)(t.geometries,function(k){k.adjust(P)})}return AT(s)&&f1(vn({},i,{options:(0,M.pi)((0,M.pi)((0,M.pi)({},es(n,A)),s),{widthRatio:s.columnWidthRatio,interval:(0,M.pi)((0,M.pi)({},es(s,["color"])),{style:s.columnStyle})})})),i}function TT(i){var n=i.view,t=i.geometryOption,s=i.yField,l=i.legend,f=(0,E.U2)(l,"marker"),d=yl(n,z2(t)?"line":"interval");if(!t.seriesField){var m=(0,E.U2)(n,"options.scales.".concat(s,".alias"))||s,x=d.getAttribute("color"),A=n.getTheme().defaultColor;x&&(A=ec.getMappingValue(x,m,(0,E.U2)(x,["values",0],A)));var P=((0,E.mf)(f)?f:!(0,E.xb)(f)&&vn({},{style:{stroke:A,fill:A}},f))||(z2(t)?{symbol:function(B,U,W){return[["M",B-W,U],["L",B+W,U]]},style:{lineWidth:2,r:6,stroke:A}}:{symbol:"square",style:{fill:A}});return[{value:s,name:m,marker:P,isGeometry:!0,viewId:n.id}]}var k=d.getGroupAttributes();return(0,E.u4)(k,function(B,U){var W=ec.getLegendItems(n,d,U,n.getTheme(),f);return B.concat(W)},[])}var Qg=function(i,n){var t=n[0],s=n[1],l=i.getOptions().data,f=i.getXScale(),d=(0,E.dp)(l);if(!(!f||!d)){var m=!0,x=(0,E.I)(l,f.field),A=m?x:x.reverse(),P=(0,E.dp)(A),k=Math.floor(t*(P-1)),B=Math.floor(s*(P-1));i.filter(f.field,function(U){var W=A.indexOf(U);return W>-1?Y4(W,k,B):!0}),i.getRootView().render(!0)}};function MF(i){var n,t=i.options,s=t.geometryOptions,l=s===void 0?[]:s,f=t.xField,d=t.yField,m=(0,E.yW)(l,function(x){var A=x.geometry;return A===Md.Line||A===void 0});return vn({},{options:{geometryOptions:[],meta:(n={},n[f]={type:"cat",sync:!0,range:m?[0,1]:void 0},n),tooltip:{showMarkers:m,showCrosshairs:m,shared:!0,crosshairs:{type:"x"}},interactions:m?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},i,{options:{yAxis:U2(d,t.yAxis),geometryOptions:[qv(f,d[0],l[0]),qv(f,d[1],l[1])],annotations:U2(d,t.annotations)}})}function RF(i){var n,t,s=i.chart,l=i.options,f=l.geometryOptions,d={line:0,column:1},m=[{type:(n=f[0])===null||n===void 0?void 0:n.geometry,id:Kf},{type:(t=f[1])===null||t===void 0?void 0:t.geometry,id:Ch}];return m.sort(function(x,A){return-d[x.type]+d[A.type]}).forEach(function(x){return s.createView({id:x.id})}),i}function EB(i){var n=i.chart,t=i.options,s=t.xField,l=t.yField,f=t.geometryOptions,d=t.data,m=t.tooltip,x=[(0,M.pi)((0,M.pi)({},f[0]),{id:Kf,data:d[0],yField:l[0]}),(0,M.pi)((0,M.pi)({},f[1]),{id:Ch,data:d[1],yField:l[1]})];return x.forEach(function(A){var P=A.id,k=A.data,B=A.yField,U=AT(A)&&A.isPercent,W=U?OC(k,B,s,B):k,ne=ho(n,P).data(W),de=U?(0,M.pi)({formatter:function(ve){return{name:ve[A.seriesField]||B,value:(Number(ve[B])*100).toFixed(2)+"%"}}},m):m;TF({chart:ne,options:{xField:s,yField:B,tooltip:de,geometryOption:A}})}),i}function wB(i){var n,t=i.chart,s=i.options,l=s.geometryOptions,f=((n=t.getTheme())===null||n===void 0?void 0:n.colors10)||[],d=0;return t.once("beforepaint",function(){(0,E.S6)(l,function(m,x){var A=ho(t,x===0?Kf:Ch);if(!m.color){var P=A.getGroupScales(),k=(0,E.U2)(P,[0,"values","length"],1),B=f.slice(d,d+k).concat(x===0?[]:f);A.geometries.forEach(function(U){m.seriesField?U.color(m.seriesField,B):U.color(B[0])}),d+=k}}),t.render(!0)}),i}function CB(i){var n,t,s=i.chart,l=i.options,f=l.xAxis,d=l.yAxis,m=l.xField,x=l.yField;return Uu((n={},n[m]=f,n[x[0]]=d[0],n))(vn({},i,{chart:ho(s,Kf)})),Uu((t={},t[m]=f,t[x[1]]=d[1],t))(vn({},i,{chart:ho(s,Ch)})),i}function AB(i){var n=i.chart,t=i.options,s=ho(n,Kf),l=ho(n,Ch),f=t.xField,d=t.yField,m=t.xAxis,x=t.yAxis;return n.axis(f,!1),n.axis(d[0],!1),n.axis(d[1],!1),s.axis(f,m),s.axis(d[0],Uy(x[0],zy.Left)),l.axis(f,!1),l.axis(d[1],Uy(x[1],zy.Right)),i}function TB(i){var n=i.chart,t=i.options,s=t.tooltip,l=ho(n,Kf),f=ho(n,Ch);return n.tooltip(s),l.tooltip({shared:!0}),f.tooltip({shared:!0}),i}function MB(i){var n=i.chart;return _u(vn({},i,{chart:ho(n,Kf)})),_u(vn({},i,{chart:ho(n,Ch)})),i}function RB(i){var n=i.chart,t=i.options,s=t.annotations,l=(0,E.U2)(s,[0]),f=(0,E.U2)(s,[1]);return xu(l)(vn({},i,{chart:ho(n,Kf),options:{annotations:l}})),xu(f)(vn({},i,{chart:ho(n,Ch),options:{annotations:f}})),i}function MT(i){var n=i.chart;return Lo(vn({},i,{chart:ho(n,Kf)})),Lo(vn({},i,{chart:ho(n,Ch)})),Lo(i),i}function RT(i){var n=i.chart;return ls(vn({},i,{chart:ho(n,Kf)})),ls(vn({},i,{chart:ho(n,Ch)})),i}function IB(i){var n=i.chart,t=i.options,s=t.yAxis;return Ng(vn({},i,{chart:ho(n,Kf),options:{yAxis:s[0]}})),Ng(vn({},i,{chart:ho(n,Ch),options:{yAxis:s[1]}})),i}function Z2(i){var n=i.chart,t=i.options,s=t.legend,l=t.geometryOptions,f=t.yField,d=t.data,m=ho(n,Kf),x=ho(n,Ch);if(s===!1)n.legend(!1);else if((0,E.Kn)(s)&&s.custom===!0)n.legend(s);else{var A=(0,E.U2)(l,[0,"legend"],s),P=(0,E.U2)(l,[1,"legend"],s);n.once("beforepaint",function(){var k=d[0].length?TT({view:m,geometryOption:l[0],yField:f[0],legend:A}):[],B=d[1].length?TT({view:x,geometryOption:l[1],yField:f[1],legend:P}):[];n.legend(vn({},s,{custom:!0,items:k.concat(B)}))}),l[0].seriesField&&m.legend(l[0].seriesField,A),l[1].seriesField&&x.legend(l[1].seriesField,P),n.on("legend-item:click",function(k){var B=(0,E.U2)(k,"gEvent.delegateObject",{});if(B&&B.item){var U=B.item,W=U.value,ne=U.isGeometry,de=U.viewId;if(ne){var ve=(0,E.cx)(f,function(vt){return vt===W});if(ve>-1){var $e=(0,E.U2)(ho(n,de),"geometries");(0,E.S6)($e,function(vt){vt.changeVisible(!B.item.unchecked)})}}else{var lt=(0,E.U2)(n.getController("legend"),"option.items",[]);(0,E.S6)(n.views,function(vt){var Ot=vt.getGroupScales();(0,E.S6)(Ot,function(fr){fr.values&&fr.values.indexOf(W)>-1&&vt.filter(fr.field,function(Tr){var zr=(0,E.sE)(lt,function(cn){return cn.value===Tr});return!zr.unchecked})}),n.render(!0)})}}})}return i}function Zy(i){var n=i.chart,t=i.options,s=t.slider,l=ho(n,Kf),f=ho(n,Ch);return s&&(l.option("slider",s),l.on("slider:valuechanged",function(d){var m=d.event,x=m.value,A=m.originValue;(0,E.Xy)(x,A)||Qg(f,x)}),n.once("afterpaint",function(){if(!(0,E.jn)(s)){var d=s.start,m=s.end;(d||m)&&Qg(f,[d,m])}})),i}function PB(i){return Aa(MF,RF,MT,EB,CB,AB,IB,TB,MB,RB,RT,wB,Z2,Zy)(i)}var IT=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dual-axes",t}return n.prototype.getDefaultOptions=function(){return vn({},i.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},n.prototype.getSchemaAdaptor=function(){return PB},n}(Ta);function V2(i,n){var t=n.data,s=n.coordinate,l=n.interactions,f=n.annotations,d=n.animation,m=n.tooltip,x=n.axes,A=n.meta,P=n.geometries;t&&i.data(t);var k={};x&&(0,E.S6)(x,function(B,U){k[U]=es(B,Sf)}),k=vn({},A,k),i.scale(k),s&&i.coordinate(s),x===!1?i.axis(!1):(0,E.S6)(x,function(B,U){i.axis(U,B)}),(0,E.S6)(P,function(B){var U=Yf({chart:i,options:B}).ext,W=B.adjust;W&&U.geometry.adjust(W)}),(0,E.S6)(l,function(B){B.enable===!1?i.removeInteraction(B.type):i.interaction(B.type,B.cfg)}),(0,E.S6)(f,function(B){i.annotation()[B.type]((0,M.pi)({},B))}),Ey(i,d),m?(i.interaction("tooltip"),i.tooltip(m)):m===!1&&i.removeInteraction("tooltip")}function Vy(i){var n=i.chart,t=i.options,s=t.type,l=t.data,f=t.fields,d=t.eachView,m=(0,E.CE)(t,["type","data","fields","eachView","axes","meta","tooltip","coordinate","theme","legend","interactions","annotations"]);return n.data(l),n.facet(s,(0,M.pi)((0,M.pi)({},m),{fields:f,eachView:function(x,A){var P=d(x,A);if(P.geometries)V2(x,P);else{var k=P,B=k.options;B.tooltip&&x.interaction("tooltip"),x1(k.type,x,B)}}})),i}function IF(i){var n=i.chart,t=i.options,s=t.axes,l=t.meta,f=t.tooltip,d=t.coordinate,m=t.theme,x=t.legend,A=t.interactions,P=t.annotations,k={};return s&&(0,E.S6)(s,function(B,U){k[U]=es(B,Sf)}),k=vn({},l,k),n.scale(k),n.coordinate(d),s?(0,E.S6)(s,function(B,U){n.axis(U,B)}):n.axis(!1),f?(n.interaction("tooltip"),n.tooltip(f)):f===!1&&n.removeInteraction("tooltip"),n.legend(x),m&&n.theme(m),(0,E.S6)(A,function(B){B.enable===!1?n.removeInteraction(B.type):n.interaction(B.type,B.cfg)}),(0,E.S6)(P,function(B){n.annotation()[B.type]((0,M.pi)({},B))}),i}function PT(i){return Aa(Lo,Vy,IF)(i)}var _c={title:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},rowTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},columnTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}}},OB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="area",t}return n.getDefaultOptions=function(){return _c},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return PT},n}(Ta);function PF(i){var n=i.chart,t=i.options,s=t.data,l=t.type,f=t.xField,d=t.yField,m=t.colorField,x=t.sizeField,A=t.sizeRatio,P=t.shape,k=t.color,B=t.tooltip,U=t.heatmapStyle,W=t.meta;n.data(s);var ne="polygon";l==="density"&&(ne="heatmap");var de=tp(B,[f,d,m]),ve=de.fields,$e=de.formatter,lt=1;return(A||A===0)&&(!P&&!x?console.warn("sizeRatio is not in effect: Must define shape or sizeField first"):A<0||A>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):lt=A),Yf(vn({},i,{options:{type:ne,colorField:m,tooltipFields:ve,shapeField:x||"",label:void 0,mapping:{tooltip:$e,shape:P&&(x?function(vt){var Ot=s.map(function(cn){return cn[x]}),fr=(W==null?void 0:W[x])||{},Tr=fr.min,zr=fr.max;return Tr=(0,E.hj)(Tr)?Tr:Math.min.apply(Math,Ot),zr=(0,E.hj)(zr)?zr:Math.max.apply(Math,Ot),[P,((0,E.U2)(vt,x)-Tr)/(zr-Tr),lt]}:function(){return[P,1,lt]}),color:k||m&&n.getTheme().sequenceColors.join("-"),style:U}}})),i}function Rs(i){var n,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return Aa(Uu((n={},n[f]=s,n[d]=l,n)))(i)}function OF(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return s===!1?n.axis(f,!1):n.axis(f,s),l===!1?n.axis(d,!1):n.axis(d,l),i}function Hy(i){var n=i.chart,t=i.options,s=t.legend,l=t.colorField,f=t.sizeField,d=t.sizeLegend,m=s!==!1;return l&&n.legend(l,m?s:!1),f&&n.legend(f,d===void 0?s:d),!m&&!d&&n.legend(!1),i}function jy(i){var n=i.chart,t=i.options,s=t.label,l=t.colorField,f=t.type,d=yl(n,f==="density"?"heatmap":"polygon");if(!s)d.label(!1);else if(l){var m=s.callback,x=(0,M._T)(s,["callback"]);d.label({fields:[l],callback:m,cfg:Dl(x)})}return i}function kF(i){var n,t,s=i.chart,l=i.options,f=l.coordinate,d=l.reflect,m=vn({actions:[]},f!=null?f:{type:"rect"});return d&&((t=(n=m.actions)===null||n===void 0?void 0:n.push)===null||t===void 0||t.call(n,["reflect",d])),s.coordinate(m),i}function FF(i){return Aa(Lo,Eh("heatmapStyle"),Rs,kF,PF,OF,Hy,Ll,jy,xu(),_u,ls,Bg)(i)}var DF=vn({},Ta.getDefaultOptions(),{type:"polygon",legend:!1,coordinate:{type:"rect"},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}});fi("polygon","circle",{draw:function(i,n){var t,s,l=i.x,f=i.y,d=this.parsePoints(i.points),m=Math.abs(d[2].x-d[1].x),x=Math.abs(d[1].y-d[0].y),A=Math.min(m,x)/2,P=Number(i.shape[1]),k=Number(i.shape[2]),B=Math.sqrt(k),U=A*B*Math.sqrt(P),W=((t=i.style)===null||t===void 0?void 0:t.fill)||i.color||((s=i.defaultStyle)===null||s===void 0?void 0:s.fill),ne=n.addShape("circle",{attrs:(0,M.pi)((0,M.pi)((0,M.pi)({x:l,y:f,r:U},i.defaultStyle),i.style),{fill:W})});return ne}}),fi("polygon","square",{draw:function(i,n){var t,s,l=i.x,f=i.y,d=this.parsePoints(i.points),m=Math.abs(d[2].x-d[1].x),x=Math.abs(d[1].y-d[0].y),A=Math.min(m,x),P=Number(i.shape[1]),k=Number(i.shape[2]),B=Math.sqrt(k),U=A*B*Math.sqrt(P),W=((t=i.style)===null||t===void 0?void 0:t.fill)||i.color||((s=i.defaultStyle)===null||s===void 0?void 0:s.fill),ne=n.addShape("rect",{attrs:(0,M.pi)((0,M.pi)((0,M.pi)({x:l-U/2,y:f-U/2,width:U,height:U},i.defaultStyle),i.style),{fill:W})});return ne}});var kB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="heatmap",t}return n.getDefaultOptions=function(){return DF},n.prototype.getSchemaAdaptor=function(){return FF},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n}(Ta),LF="liquid";function H2(i){return[{percent:i,type:LF}]}function OT(i){var n=i.chart,t=i.options,s=t.percent,l=t.liquidStyle,f=t.radius,d=t.outline,m=t.wave,x=t.shape,A=t.shapeStyle,P=t.animation;n.scale({percent:{min:0,max:1}}),n.data(H2(s));var k=t.color||n.getTheme().defaultColor,B=vn({},i,{options:{xField:"type",yField:"percent",widthRatio:f,interval:{color:k,style:l,shape:"liquid-fill-gauge"}}}),U=Uc(B).ext,W=U.geometry,ne=n.getTheme().background,de={percent:s,radius:f,outline:d,wave:m,shape:x,shapeStyle:A,background:ne,animation:P};return W.customInfo(de),n.legend(!1),n.axis(!1),n.tooltip(!1),i}function kT(i,n){var t=i.chart,s=i.options,l=s.statistic,f=s.percent,d=s.meta;t.getController("annotation").clear(!0);var m=(0,E.U2)(d,["percent","formatter"])||function(A){return"".concat((A*100).toFixed(2),"%")},x=l.content;return x&&(x=vn({},x,{content:(0,E.UM)(x.content)?m(f):x.content})),by(t,{statistic:(0,M.pi)((0,M.pi)({},l),{content:x}),plotType:"liquid"},{percent:f}),n&&t.render(!0),i}function BF(i){return Aa(Lo,Eh("liquidStyle"),OT,kT,Uu({}),ls,_u)(i)}var NF={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:"circle"},j2=5e3;function FT(i,n,t){return i+(n-i)*t}function DT(i){var n=(0,M.pi)({opacity:1},i.style);return i.color&&!n.fill&&(n.fill=i.color),n}function zF(i){var n={fill:"#fff",fillOpacity:0,lineWidth:4},t=(0,E.CD)({},n,i.style);return i.color&&!t.stroke&&(t.stroke=i.color),(0,E.hj)(i.opacity)&&(t.opacity=t.strokeOpacity=i.opacity),t}function UF(i,n,t,s){return n===0?[[i+1/2*t/Math.PI/2,s/2],[i+1/2*t/Math.PI,s],[i+t/4,s]]:n===1?[[i+1/2*t/Math.PI/2*(Math.PI-2),s],[i+1/2*t/Math.PI/2*(Math.PI-1),s/2],[i+t/4,0]]:n===2?[[i+1/2*t/Math.PI/2,-s/2],[i+1/2*t/Math.PI,-s],[i+t/4,-s]]:[[i+1/2*t/Math.PI/2*(Math.PI-2),-s],[i+1/2*t/Math.PI/2*(Math.PI-1),-s/2],[i+t/4,0]]}function ZF(i,n,t,s,l,f,d){for(var m=Math.ceil(2*i/t*4)*4,x=[],A=s;A<-Math.PI*2;)A+=Math.PI*2;for(;A>0;)A-=Math.PI*2;A=A/Math.PI/2*t;var P=f-i+A-i*2;x.push(["M",P,n]);for(var k=0,B=0;B<m;++B){var U=B%4,W=UF(B*t/4,U,t,l);x.push(["C",W[0][0]+P,-W[0][1]+n,W[1][0]+P,-W[1][1]+n,W[2][0]+P,-W[2][1]+n]),B===m-1&&(k=W[2][0])}return x.push(["L",k+P,d+i]),x.push(["L",P,d+i]),x.push(["Z"]),x}function VF(i,n,t,s,l,f,d,m,x,A){for(var P=l.fill,k=l.opacity,B=d.getBBox(),U=B.maxX-B.minX,W=B.maxY-B.minY,ne=0;ne<s;ne++){var de=s<=1?1:ne/(s-1),ve=f.addShape("path",{name:"waterwave-path",attrs:{path:ZF(m,B.minY+W*t,x,0,U/32,i,n),fill:P,opacity:FT(.2,.9,de)*k}});try{if(A===!1)return;var $e=s2([["t",x,0]]);ve.stopAnimate(),ve.animate({matrix:$e},{duration:FT(.5*j2,j2,de),repeat:!0})}catch(lt){console.warn("off-screen group animate error!")}}}function HF(i,n,t,s){var l=t*2/3,f=Math.max(l,s),d=l/2,m=i,x=d+n-f/2,A=Math.asin(d/((f-d)*.85)),P=Math.sin(A)*d,k=Math.cos(A)*d,B=m-k,U=x+P,W=i,ne=x+d/Math.sin(A);return`
      M `.concat(B," ").concat(U,`
      A `).concat(d," ").concat(d," 0 1 1 ").concat(B+k*2," ").concat(U,`
      Q `).concat(W," ").concat(ne," ").concat(i," ").concat(n+f/2,`
      Q `).concat(W," ").concat(ne," ").concat(B," ").concat(U,`
      Z 
    `)}function jF(i,n,t,s){var l=t/2,f=s/2;return`
      M `.concat(i," ").concat(n-f,` 
      a `).concat(l," ").concat(f," 0 1 0 0 ").concat(f*2,`
      a `).concat(l," ").concat(f," 0 1 0 0 ").concat(-f*2,`
      Z
    `)}function WF(i,n,t,s){var l=s/2,f=t/2;return`
      M `.concat(i," ").concat(n-l,`
      L `).concat(i+f," ").concat(n,`
      L `).concat(i," ").concat(n+l,`
      L `).concat(i-f," ").concat(n,`
      Z
    `)}function LT(i,n,t,s){var l=s/2,f=t/2;return`
      M `.concat(i," ").concat(n-l,`
      L `).concat(i+f," ").concat(n+l,`
      L `).concat(i-f," ").concat(n+l,`
      Z
    `)}function GF(i,n,t,s){var l=.618,f=s/2,d=t/2*l;return`
      M `.concat(i-d," ").concat(n-f,`
      L `).concat(i+d," ").concat(n-f,`
      L `).concat(i+d," ").concat(n+f,`
      L `).concat(i-d," ").concat(n+f,`
      Z
    `)}var BT={pin:HF,circle:jF,diamond:WF,triangle:LT,rect:GF};fi("interval","liquid-fill-gauge",{draw:function(i,n){var t=.5,s=.5,l=i.customInfo,f=l,d=f.percent,m=f.radius,x=f.shape,A=f.shapeStyle,P=f.background,k=f.animation,B=l.outline,U=l.wave,W=B.border,ne=B.distance,de=U.count,ve=U.length,$e=(0,E.u4)(i.points,function(oa,eo){return Math.min(oa,eo.x)},1/0),lt=this.parsePoint({x:t,y:s}),vt=this.parsePoint({x:$e,y:s}),Ot=lt.x-vt.x,fr=Math.min(Ot,vt.y*m),Tr=DT(i),zr=zF((0,E.CD)({},i,B)),cn=fr-W/2,Qr=typeof x=="function"?x:BT[x]||BT.circle,On=Qr(lt.x,lt.y,cn*2,cn*2);if(A&&n.addShape("path",{name:"shape",attrs:(0,M.pi)({path:On},A)}),d>0){var Qn=n.addGroup({name:"waves"}),Hi=Qn.setClip({type:"path",attrs:{path:On}});VF(lt.x,lt.y,1-i.points[1].y,de,Tr,Qn,Hi,fr*2,ve,k)}return n.addShape("path",{name:"distance",attrs:{path:On,fill:"transparent",lineWidth:W+ne*2,stroke:P==="transparent"?"#fff":P}}),n.addShape("path",{name:"wrap",attrs:(0,E.CD)(zr,{path:On,fill:"transparent",lineWidth:W})}),n}});var FB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="liquid",t}return n.getDefaultOptions=function(){return NF},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.changeData=function(t){this.chart.emit(Le.BEFORE_CHANGE_DATA,Ya.fromData(this.chart,Le.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t}),this.chart.data(H2(t)),kT({chart:this.chart,options:this.options},!0),this.chart.emit(Le.AFTER_CHANGE_DATA,Ya.fromData(this.chart,Le.AFTER_CHANGE_DATA,null))},n.prototype.getSchemaAdaptor=function(){return BF},n}(Ta);function NT(i){var n=i.chart,t=i.options,s=t.data,l=t.lineStyle,f=t.color,d=t.point,m=t.area;n.data(s);var x=vn({},i,{options:{line:{style:l,color:f},point:d&&(0,M.pi)({color:f},d),area:m&&(0,M.pi)({color:f},m),label:void 0}}),A=vn({},x,{options:{tooltip:!1}}),P=(d==null?void 0:d.state)||t.state,k=vn({},x,{options:{tooltip:!1,state:P}});return n0(x),wh(k),s1(A),i}function XF(i){var n,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return Aa(Uu((n={},n[f]=s,n[d]=l,n)))(i)}function $F(i){var n=i.chart,t=i.options,s=t.radius,l=t.startAngle,f=t.endAngle;return n.coordinate("polar",{radius:s,startAngle:l,endAngle:f}),i}function YF(i){var n=i.chart,t=i.options,s=t.xField,l=t.xAxis,f=t.yField,d=t.yAxis;return n.axis(s,l),n.axis(f,d),i}function KF(i){var n=i.chart,t=i.options,s=t.label,l=t.yField,f=yl(n,"line");if(!s)f.label(!1);else{var d=s.callback,m=(0,M._T)(s,["callback"]);f.label({fields:[l],callback:d,cfg:Dl(m)})}return i}function qF(i){return Aa(NT,XF,Lo,$F,YF,t0,Ll,KF,_u,ls,xu())(i)}var QF=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),n.prototype.getTooltipItems=function(t){var s=this.getTooltipCfg(),l=s.shared,f=s.title,d=i.prototype.getTooltipItems.call(this,t);if(d.length>0){var m=this.view.geometries[0],x=m.dataArray,A=d[0].name,P=[];return x.forEach(function(k){k.forEach(function(B){var U=ec.getTooltipItems(B,m),W=U[0];if(!l&&W&&W.name===A){var ne=(0,E.UM)(f)?A:f;P.push((0,M.pi)((0,M.pi)({},W),{name:W.title,title:ne}))}else if(l&&W){var ne=(0,E.UM)(f)?W.name||A:f;P.push((0,M.pi)((0,M.pi)({},W),{name:W.title,title:ne}))}})}),P}return[]},n}(ht);jh("radar-tooltip",QF);var zT=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.init=function(){var t=this.context.view;t.removeInteraction("tooltip")},n.prototype.show=function(){var t=this.context.event,s=this.getTooltipController();s.showTooltip({x:t.x,y:t.y})},n.prototype.hide=function(){var t=this.getTooltipController();t.hideTooltip()},n.prototype.getTooltipController=function(){var t=this.context.view;return t.getController("radar-tooltip")},n}(En);Vr("radar-tooltip",zT),Fn("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]});var DB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="radar",t}return n.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(t)},n.prototype.getDefaultOptions=function(){return vn({},i.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},n.prototype.getSchemaAdaptor=function(){return qF},n}(Ta);function JF(i,n,t){var s=t.map(function(d){return d[n]}).filter(function(d){return d!==void 0}),l=s.length>0?Math.max.apply(Math,s):0,f=Math.abs(i)%360;return f?l*360/f:l}function eD(i,n,t){var s=[];return i.forEach(function(l){var f=s.find(function(d){return d[n]===l[n]});f?f[t]+=l[t]||null:s.push((0,M.pi)({},l))}),s}function tD(i){var n=i.chart,t=i.options,s=t.barStyle,l=t.color,f=t.tooltip,d=t.colorField,m=t.type,x=t.xField,A=t.yField,P=t.data,k=t.shape,B=us(P,A);n.data(B);var U=vn({},i,{options:{tooltip:f,seriesField:d,interval:{style:s,color:l,shape:k||(m==="line"?"line":"intervel")},minColumnWidth:t.minBarWidth,maxColumnWidth:t.maxBarWidth,columnBackground:t.barBackground}});return Uc(U),m==="line"&&wh({chart:n,options:{xField:x,yField:A,seriesField:d,point:{shape:"circle",color:l}}}),i}function UT(i){var n,t=i.options,s=t.yField,l=t.xField,f=t.data,d=t.isStack,m=t.isGroup,x=t.colorField,A=t.maxAngle,P=d&&!m&&x?eD(f,l,s):f,k=us(P,s);return Aa(Uu((n={},n[s]={min:0,max:JF(A,s,k)},n)))(i)}function rD(i){var n=i.chart,t=i.options,s=t.radius,l=t.innerRadius,f=t.startAngle,d=t.endAngle;return n.coordinate({type:"polar",cfg:{radius:s,innerRadius:l,startAngle:f,endAngle:d}}).transpose(),i}function nD(i){var n=i.chart,t=i.options,s=t.xField,l=t.xAxis;return n.axis(s,l),i}function iD(i){var n=i.chart,t=i.options,s=t.label,l=t.yField,f=yl(n,"interval");if(!s)f.label(!1);else{var d=s.callback,m=(0,M._T)(s,["callback"]);f.label({fields:[l],callback:d,cfg:(0,M.pi)((0,M.pi)({},Dl(m)),{type:"polar"})})}return i}function ZT(i){return Aa(Eh("barStyle"),tD,UT,nD,rD,_u,ls,Lo,Ll,t0,xu(),iD)(i)}var aD=vn({},Ta.getDefaultOptions(),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240}),LB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="radial-bar",t}return n.getDefaultOptions=function(){return aD},n.prototype.changeData=function(t){this.updateOption({data:t}),UT({chart:this.chart,options:this.options}),this.chart.changeData(t)},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return ZT},n}(Ta);function oD(i){var n=i.chart,t=i.options,s=t.data,l=t.sectorStyle,f=t.shape,d=t.color;return n.data(s),Aa(Uc)(vn({},i,{options:{marginRatio:1,interval:{style:l,color:d,shape:f}}})),i}function VT(i){var n=i.chart,t=i.options,s=t.label,l=t.xField,f=yl(n,"interval");if(s===!1)f.label(!1);else if((0,E.Kn)(s)){var d=s.callback,m=s.fields,x=(0,M._T)(s,["callback","fields"]),A=x.offset,P=x.layout;(A===void 0||A>=0)&&(P=P?(0,E.kJ)(P)?P:[P]:[],x.layout=(0,E.hX)(P,function(k){return k.type!=="limit-in-shape"}),x.layout.length||delete x.layout),f.label({fields:m||[l],callback:d,cfg:Dl(x)})}else Ad(jp.WARN,s===null,"the label option must be an Object."),f.label({fields:[l]});return i}function sD(i){var n=i.chart,t=i.options,s=t.legend,l=t.seriesField;return s===!1?n.legend(!1):l&&n.legend(l,s),i}function uD(i){var n=i.chart,t=i.options,s=t.radius,l=t.innerRadius,f=t.startAngle,d=t.endAngle;return n.coordinate({type:"polar",cfg:{radius:s,innerRadius:l,startAngle:f,endAngle:d}}),i}function lD(i){var n,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return Aa(Uu((n={},n[f]=s,n[d]=l,n)))(i)}function cD(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return s?n.axis(f,s):n.axis(f,!1),l?n.axis(d,l):n.axis(d,!1),i}function fD(i){Aa(Eh("sectorStyle"),oD,lD,VT,uD,cD,sD,Ll,_u,ls,Lo,xu(),Bg)(i)}var hD=vn({},Ta.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:"right",radio:{}},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]}),pD=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rose",t}return n.getDefaultOptions=function(){return hD},n.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(t)},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return fD},n}(Ta),HT="x",jT="y",WT="name",F1="nodes",D1="edges";function dD(i,n,t){var s=[];return i.forEach(function(l){var f=l[n],d=l[t];s.includes(f)||s.push(f),s.includes(d)||s.push(d)}),s}function vD(i,n,t,s){var l={};return n.forEach(function(f){l[f]={},n.forEach(function(d){l[f][d]=0})}),i.forEach(function(f){l[f[t]][f[s]]=1}),l}function gD(i,n,t){if(!(0,E.kJ)(i))return[];var s=[],l=dD(i,n,t),f=vD(i,l,n,t),d={};l.forEach(function(x){d[x]=0});function m(x){d[x]=1,l.forEach(function(A){if(f[x][A]!=0)if(d[A]==1)s.push("".concat(x,"_").concat(A));else{if(d[A]==-1)return;m(A)}}),d[x]=-1}return l.forEach(function(x){d[x]!=-1&&m(x)}),s.length!==0&&console.warn("sankey data contains circle, ".concat(s.length," records removed."),s),i.filter(function(x){return s.findIndex(function(A){return A==="".concat(x[n],"_").concat(x[t])})<0})}function GT(i){return i.target.depth}function XT(i){return i.depth}function $T(i,n){return n-1-i.height}function Qv(i,n){return i.sourceLinks.length?i.depth:n-1}function YT(i){return i.targetLinks.length?i.depth:i.sourceLinks.length?(0,E.F)(i.sourceLinks,GT)-1:0}function L1(i){return function(){return i}}function W2(i,n){for(var t=0,s=0;s<i.length;s++)t+=n(i[s]);return t}function G2(i,n){for(var t=-1/0,s=0;s<i.length;s++)t=Math.max(n(i[s]),t);return t}function mD(i,n){for(var t=1/0,s=0;s<i.length;s++)t=Math.min(n(i[s]),t);return t}function h0(i,n){return Jv(i.source,n.source)||i.index-n.index}function p0(i,n){return Jv(i.target,n.target)||i.index-n.index}function Jv(i,n){return i.y0-n.y0}function Jg(i){return i.value}function yD(i){return i.index}function KT(i){return i.nodes}function X2(i){return i.links}function qT(i,n){var t=i.get(n);if(!t)throw new Error("missing: "+n);return t}function QT(i){for(var n=i.nodes,t=0,s=n;t<s.length;t++){for(var l=s[t],f=l.y0,d=f,m=0,x=l.sourceLinks;m<x.length;m++){var A=x[m];A.y0=f+A.width/2,f+=A.width}for(var P=0,k=l.targetLinks;P<k.length;P++){var A=k[P];A.y1=d+A.width/2,d+=A.width}}}function JT(){var i=0,n=0,t=1,s=1,l=24,f=8,d,m=yD,x=Qv,A,P,k,B=KT,U=X2,W=6;function ne(Nn){var Di={nodes:B(Nn),links:U(Nn)};return de(Di),ve(Di),$e(Di),lt(Di),fr(Di),QT(Di),Di}ne.update=function(Nn){return QT(Nn),Nn},ne.nodeId=function(Nn){return arguments.length?(m=typeof Nn=="function"?Nn:L1(Nn),ne):m},ne.nodeAlign=function(Nn){return arguments.length?(x=typeof Nn=="function"?Nn:L1(Nn),ne):x},ne.nodeDepth=function(Nn){return arguments.length?(A=Nn,ne):A},ne.nodeSort=function(Nn){return arguments.length?(P=Nn,ne):P},ne.nodeWidth=function(Nn){return arguments.length?(l=+Nn,ne):l},ne.nodePadding=function(Nn){return arguments.length?(f=d=+Nn,ne):f},ne.nodes=function(Nn){return arguments.length?(B=typeof Nn=="function"?Nn:L1(Nn),ne):B},ne.links=function(Nn){return arguments.length?(U=typeof Nn=="function"?Nn:L1(Nn),ne):U},ne.linkSort=function(Nn){return arguments.length?(k=Nn,ne):k},ne.size=function(Nn){return arguments.length?(i=n=0,t=+Nn[0],s=+Nn[1],ne):[t-i,s-n]},ne.extent=function(Nn){return arguments.length?(i=+Nn[0][0],t=+Nn[1][0],n=+Nn[0][1],s=+Nn[1][1],ne):[[i,n],[t,s]]},ne.iterations=function(Nn){return arguments.length?(W=+Nn,ne):W};function de(Nn){var Di=Nn.nodes,sa=Nn.links;Di.forEach(function(To,Ma){To.index=Ma,To.sourceLinks=[],To.targetLinks=[]});var Li=new Map(Di.map(function(To){return[m(To),To]}));if(sa.forEach(function(To,Ma){To.index=Ma;var _l=To.source,xl=To.target;typeof _l!="object"&&(_l=To.source=qT(Li,_l)),typeof xl!="object"&&(xl=To.target=qT(Li,xl)),_l.sourceLinks.push(To),xl.targetLinks.push(To)}),k!=null)for(var $i=0,Da=Di;$i<Da.length;$i++){var xo=Da[$i],Bo=xo.sourceLinks,oo=xo.targetLinks;Bo.sort(k),oo.sort(k)}}function ve(Nn){for(var Di=Nn.nodes,sa=0,Li=Di;sa<Li.length;sa++){var $i=Li[sa];$i.value=$i.fixedValue===void 0?Math.max(W2($i.sourceLinks,Jg),W2($i.targetLinks,Jg)):$i.fixedValue}}function $e(Nn){for(var Di=Nn.nodes,sa=Di.length,Li=new Set(Di),$i=new Set,Da=0;Li.size;){if(Li.forEach(function(To){To.depth=Da;for(var Ma=0,_l=To.sourceLinks;Ma<_l.length;Ma++){var xl=_l[Ma].target;$i.add(xl)}}),++Da>sa)throw new Error("circular link");Li=$i,$i=new Set}if(A)for(var xo=Math.max(G2(Di,function(To){return To.depth})+1,0),Bo=void 0,oo=0;oo<Di.length;oo++)Bo=Di[oo],Bo.depth=A.call(null,Bo,xo)}function lt(Nn){for(var Di=Nn.nodes,sa=Di.length,Li=new Set(Di),$i=new Set,Da=0;Li.size;){if(Li.forEach(function(xo){xo.height=Da;for(var Bo=0,oo=xo.targetLinks;Bo<oo.length;Bo++){var To=oo[Bo].source;$i.add(To)}}),++Da>sa)throw new Error("circular link");Li=$i,$i=new Set}}function vt(Nn){for(var Di=Nn.nodes,sa=Math.max(G2(Di,function(xl){return xl.depth})+1,0),Li=(t-i-l)/(sa-1),$i=new Array(sa).fill(0).map(function(){return[]}),Da=0,xo=Di;Da<xo.length;Da++){var Bo=xo[Da],oo=Math.max(0,Math.min(sa-1,Math.floor(x.call(null,Bo,sa))));Bo.layer=oo,Bo.x0=i+oo*Li,Bo.x1=Bo.x0+l,$i[oo]?$i[oo].push(Bo):$i[oo]=[Bo]}if(P)for(var To=0,Ma=$i;To<Ma.length;To++){var _l=Ma[To];_l.sort(P)}return $i}function Ot(Nn){for(var Di=mD(Nn,function(rc){return(s-n-(rc.length-1)*d)/W2(rc,Jg)}),sa=0,Li=Nn;sa<Li.length;sa++){for(var $i=Li[sa],Da=n,xo=0,Bo=$i;xo<Bo.length;xo++){var oo=Bo[xo];oo.y0=Da,oo.y1=Da+oo.value*Di,Da=oo.y1+d;for(var To=0,Ma=oo.sourceLinks;To<Ma.length;To++){var _l=Ma[To];_l.width=_l.value*Di}}Da=(s-Da+d)/($i.length+1);for(var xl=0;xl<$i.length;++xl){var oo=$i[xl];oo.y0+=Da*(xl+1),oo.y1+=Da*(xl+1)}Hi($i)}}function fr(Nn){var Di=vt(Nn);d=Math.min(f,(s-n)/(G2(Di,function(Da){return Da.length})-1)),Ot(Di);for(var sa=0;sa<W;++sa){var Li=Math.pow(.99,sa),$i=Math.max(1-Li,(sa+1)/W);zr(Di,Li,$i),Tr(Di,Li,$i)}}function Tr(Nn,Di,sa){for(var Li=1,$i=Nn.length;Li<$i;++Li){for(var Da=Nn[Li],xo=0,Bo=Da;xo<Bo.length;xo++){for(var oo=Bo[xo],To=0,Ma=0,_l=0,xl=oo.targetLinks;_l<xl.length;_l++){var rc=xl[_l],nm=rc.source,Pd=rc.value,b0=Pd*(oo.layer-nm.layer);To+=oa(nm,oo)*b0,Ma+=b0}if(Ma>0){var im=(To/Ma-oo.y0)*Di;oo.y0+=im,oo.y1+=im,Qn(oo)}}P===void 0&&Da.sort(Jv),Da.length&&cn(Da,sa)}}function zr(Nn,Di,sa){for(var Li=Nn.length,$i=Li-2;$i>=0;--$i){for(var Da=Nn[$i],xo=0,Bo=Da;xo<Bo.length;xo++){for(var oo=Bo[xo],To=0,Ma=0,_l=0,xl=oo.sourceLinks;_l<xl.length;_l++){var rc=xl[_l],nm=rc.target,Pd=rc.value,b0=Pd*(nm.layer-oo.layer);To+=eo(oo,nm)*b0,Ma+=b0}if(Ma>0){var im=(To/Ma-oo.y0)*Di;oo.y0+=im,oo.y1+=im,Qn(oo)}}P===void 0&&Da.sort(Jv),Da.length&&cn(Da,sa)}}function cn(Nn,Di){var sa=Nn.length>>1,Li=Nn[sa];On(Nn,Li.y0-d,sa-1,Di),Qr(Nn,Li.y1+d,sa+1,Di),On(Nn,s,Nn.length-1,Di),Qr(Nn,n,0,Di)}function Qr(Nn,Di,sa,Li){for(;sa<Nn.length;++sa){var $i=Nn[sa],Da=(Di-$i.y0)*Li;Da>1e-6&&($i.y0+=Da,$i.y1+=Da),Di=$i.y1+d}}function On(Nn,Di,sa,Li){for(;sa>=0;--sa){var $i=Nn[sa],Da=($i.y1-Di)*Li;Da>1e-6&&($i.y0-=Da,$i.y1-=Da),Di=$i.y0-d}}function Qn(Nn){var Di=Nn.sourceLinks,sa=Nn.targetLinks;if(k===void 0){for(var Li=0,$i=sa;Li<$i.length;Li++){var Da=$i[Li].source.sourceLinks;Da.sort(p0)}for(var xo=0,Bo=Di;xo<Bo.length;xo++){var oo=Bo[xo].target.targetLinks;oo.sort(h0)}}}function Hi(Nn){if(k===void 0)for(var Di=0,sa=Nn;Di<sa.length;Di++){var Li=sa[Di],$i=Li.sourceLinks,Da=Li.targetLinks;$i.sort(p0),Da.sort(h0)}}function oa(Nn,Di){for(var sa=Nn.y0-(Nn.sourceLinks.length-1)*d/2,Li=0,$i=Nn.sourceLinks;Li<$i.length;Li++){var Da=$i[Li],xo=Da.target,Bo=Da.width;if(xo===Di)break;sa+=Bo+d}for(var oo=0,To=Di.targetLinks;oo<To.length;oo++){var Ma=To[oo],xo=Ma.source,Bo=Ma.width;if(xo===Nn)break;sa-=Bo}return sa}function eo(Nn,Di){for(var sa=Di.y0-(Di.targetLinks.length-1)*d/2,Li=0,$i=Di.targetLinks;Li<$i.length;Li++){var Da=$i[Li],xo=Da.source,Bo=Da.width;if(xo===Nn)break;sa+=Bo+d}for(var oo=0,To=Nn.sourceLinks;oo<To.length;oo++){var Ma=To[oo],xo=Ma.target,Bo=Ma.width;if(xo===Di)break;sa-=Bo}return sa}return ne}var _D={left:XT,right:$T,center:YT,justify:Qv},BB={nodeId:function(i){return i.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function B1(i){var n=(0,E.HD)(i)?_D[i]:(0,E.mf)(i)?i:null;return n||Qv}function Wy(i){return(0,E.f0)({},BB,i)}function eM(i,n){var t=Wy(i),s=t.nodeId,l=t.nodeSort,f=t.nodeAlign,d=t.nodeWidth,m=t.nodePadding,x=t.nodeDepth,A=JT().nodeSort(l).nodeWidth(d).nodePadding(m).nodeDepth(x).nodeAlign(B1(f)).extent([[0,0],[1,1]]).nodeId(s),P=A(n),k=P.nodes.map(function(U){var W=U.x0,ne=U.x1,de=U.y0,ve=U.y1;return U.x=[W,ne,ne,W],U.y=[de,de,ve,ve],U}).filter(function(U){return U.name!==null}),B=P.links.map(function(U){var W=U.source,ne=U.target,de=W.x1,ve=ne.x0;U.x=[de,de,ve,ve];var $e=U.width/2;return U.y=[U.y0+$e,U.y0-$e,U.y1+$e,U.y1-$e],U}).filter(function(U){var W=U.source,ne=U.target;return W.name!==null&&ne.name!==null});return{nodes:k,links:B}}function xD(i){return i==="node-link"}function bD(i,n,t){return Qm(i)?i/t:n}function tM(i,n,t){return Qm(i)?i/t:n}function SD(i,n,t){var s=i.dataType,l=i.data,f=i.sourceField,d=i.targetField,m=i.weightField,x=i.nodeAlign,A=i.nodeSort,P=i.nodePadding,k=i.nodePaddingRatio,B=i.nodeWidth,U=i.nodeWidthRatio,W=i.nodeDepth,ne=i.rawFields,de=ne===void 0?[]:ne,ve;xD(s)?ve=l:ve=kb(gD(l,f,d),f,d,m,de);var $e=eM({nodeAlign:x,nodePadding:tM(P,k,t),nodeWidth:bD(B,U,n),nodeSort:A,nodeDepth:W},ve),lt=$e.nodes,vt=$e.links;return{nodes:lt.map(function(Ot){return(0,M.pi)((0,M.pi)({},es(Ot,(0,M.ev)(["x","y","name"],de,!0))),{isNode:!0})}),edges:vt.map(function(Ot){return(0,M.pi)((0,M.pi)({source:Ot.source.name,target:Ot.target.name,name:Ot.source.name||Ot.target.name},es(Ot,(0,M.ev)(["x","y","value"],de,!0))),{isNode:!1})})}}function ED(i){var n=i.options,t=n.rawFields,s=t===void 0?[]:t;return vn({},{options:{tooltip:{fields:(0,E.jj)((0,M.ev)(["name","source","target","value","isNode"],s,!0))},label:{fields:(0,E.jj)((0,M.ev)(["x","name"],s,!0))}}},i)}function N1(i){var n=i.chart,t=i.options,s=t.color,l=t.nodeStyle,f=t.edgeStyle,d=t.label,m=t.tooltip,x=t.nodeState,A=t.edgeState,P=t.rawFields,k=P===void 0?[]:P;n.legend(!1),n.tooltip(m),n.axis(!1),n.coordinate().reflect("y");var B=SD(t,n.width,n.height),U=B.nodes,W=B.edges,ne=n.createView({id:D1});ne.data(W),IC({chart:ne,options:{xField:HT,yField:jT,seriesField:WT,rawFields:(0,M.ev)(["source","target"],k,!0),edge:{color:s,style:f,shape:"arc"},tooltip:m,state:A}});var de=n.createView({id:F1});return de.data(U),u1({chart:de,options:{xField:HT,yField:jT,seriesField:WT,polygon:{color:s,style:l},label:d,tooltip:m,state:x}}),n.interaction("element-active"),n.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:"color",type:"cat"}}),i}function rM(i){var n=i.chart,t=i.options,s=t.animation,l=(0,M.ev)((0,M.ev)([],n.views[0].geometries,!0),n.views[1].geometries,!0);return Ey(n,s,l),i}function wD(i){var n=i.chart,t=i.options,s=t.nodeDraggable,l="sankey-node-draggable";return s?n.interaction(l):n.removeInteraction(l),i}function CD(i){var n=i.chart,t=i.options,s=t.interactions,l=s===void 0?[]:s,f=[].concat(l,t.nodeInteractions||[]),d=[].concat(l,t.edgeInteractions||[]),m=ho(n,F1),x=ho(n,D1);return f.forEach(function(A){(A==null?void 0:A.enable)===!1?m.removeInteraction(A.type):m.interaction(A.type,A.cfg||{})}),d.forEach(function(A){(A==null?void 0:A.enable)===!1?x.removeInteraction(A.type):x.interaction(A.type,A.cfg||{})}),i}function nM(i){return Aa(ED,N1,CD,wD,rM,Lo)(i)}var NB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.isDragging=!1,t}return n.prototype.isNodeElement=function(){var t=(0,E.U2)(this.context,"event.target");if(t){var s=t.get("element");return s&&s.getModel().data.isNode}return!1},n.prototype.getNodeView=function(){return ho(this.context.view,F1)},n.prototype.getEdgeView=function(){return ho(this.context.view,D1)},n.prototype.getCurrentDatumIdx=function(t){return this.getNodeView().geometries[0].elements.indexOf(t)},n.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:(0,E.U2)(this.context,"event.x"),y:(0,E.U2)(this.context,"event.y")};var t=this.context.event.target.get("element"),s=this.getCurrentDatumIdx(t);if(s===-1)return;this.currentElementIdx=s,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},n.prototype.translate=function(){if(this.isDragging){var t=this.context.view,s={x:(0,E.U2)(this.context,"event.x"),y:(0,E.U2)(this.context,"event.y")},l=s.x-this.prevPoint.x,f=s.y-this.prevPoint.y,d=this.getNodeView(),m=d.geometries[0].elements[this.currentElementIdx];if(m&&m.getModel()){var x=m.getModel().data,A=d.getOptions().data,P=d.getCoordinate(),k={x:l/P.getWidth(),y:f/P.getHeight()},B=(0,M.pi)((0,M.pi)({},x),{x:x.x.map(function(ve){return ve+=k.x}),y:x.y.map(function(ve){return ve+=k.y})}),U=(0,M.ev)([],A,!0);U[this.currentElementIdx]=B,d.data(U);var W=x.name,ne=this.getEdgeView(),de=ne.getOptions().data;de.forEach(function(ve){ve.source===W&&(ve.x[0]+=k.x,ve.x[1]+=k.x,ve.y[0]+=k.y,ve.y[1]+=k.y),ve.target===W&&(ve.x[2]+=k.x,ve.x[3]+=k.x,ve.y[2]+=k.y,ve.y[3]+=k.y)}),ne.data(de),this.prevPoint=s,t.render(!0)}}},n.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},n}(En);Vr("sankey-node-drag",NB),Fn("sankey-node-draggable",{showEnable:[{trigger:"polygon:mouseenter",action:"cursor:pointer"},{trigger:"polygon:mouseleave",action:"cursor:default"}],start:[{trigger:"polygon:mousedown",action:"sankey-node-drag:start"}],processing:[{trigger:"plot:mousemove",action:"sankey-node-drag:translate"},{isEnable:function(i){return i.isDragging},trigger:"plot:mousemove",action:"cursor:move"}],end:[{trigger:"plot:mouseup",action:"sankey-node-drag:end"}]});var AD=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="sankey",t}return n.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},edgeState:{active:{style:{opacity:.8,lineWidth:0}}},label:{formatter:function(t){var s=t.name;return s},callback:function(t){var s=t[1]===1;return{style:{fill:"#545454",textAlign:s?"end":"start"},offsetX:s?-8:8}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,showContent:function(t){return!(0,E.U2)(t,[0,"data","isNode"])},formatter:function(t){var s=t.source,l=t.target,f=t.value;return{name:s+" -> "+l,value:f}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:"wave-in"},enter:{animation:"wave-in"}}}},n.prototype.changeData=function(t){this.updateOption({data:t});var s=SD(this.options,this.chart.width,this.chart.height),l=s.nodes,f=s.edges,d=ho(this.chart,F1),m=ho(this.chart,D1);d.changeData(l),m.changeData(f)},n.prototype.getSchemaAdaptor=function(){return nM},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n}(Ta),wf="ancestor-node",$2="value",d0="path",Y2=[d0,F2,Ny,Kv,"name","depth","height"],TD=vn({},Ta.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:"value"},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},legend:!1,sunburstStyle:{lineWidth:.5,stroke:"#FFF"},drilldown:{enabled:!0}});function iM(i){i.x0=Math.round(i.x0),i.y0=Math.round(i.y0),i.x1=Math.round(i.x1),i.y1=Math.round(i.y1)}function Gy(i,n,t,s,l){for(var f=i.children,d,m=-1,x=f.length,A=i.value&&(s-n)/i.value;++m<x;)d=f[m],d.y0=t,d.y1=l,d.x0=n,d.x1=n+=d.value*A}function aM(){var i=1,n=1,t=0,s=!1;function l(d){var m=d.height+1;return d.x0=d.y0=t,d.x1=i,d.y1=n/m,d.eachBefore(f(n,m)),s&&d.eachBefore(iM),d}function f(d,m){return function(x){x.children&&Gy(x,x.x0,d*(x.depth+1)/m,x.x1,d*(x.depth+2)/m);var A=x.x0,P=x.y0,k=x.x1-t,B=x.y1-t;k<A&&(A=k=(A+k)/2),B<P&&(P=B=(P+B)/2),x.x0=A,x.y0=P,x.x1=k,x.y1=B}}return l.round=function(d){return arguments.length?(s=!!d,l):s},l.size=function(d){return arguments.length?(i=+d[0],n=+d[1],l):[i,n]},l.padding=function(d){return arguments.length?(t=+d,l):t},l}var MD={field:"value",size:[1,1],round:!1,padding:0,sort:function(i,n){return n.value-i.value},as:["x","y"],ignoreParentValue:!0};function oM(i,n){n=(0,E.f0)({},MD,n);var t=n.as;if(!(0,E.kJ)(t)||t.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var s;try{s=D2(n)}catch(x){console.warn(x)}var l=function(x){return aM().size(n.size).round(n.round).padding(n.padding)(Kg(x).sum(function(A){return(0,E.dp)(A.children)?n.ignoreParentValue?0:A[s]-(0,E.u4)(A.children,function(P,k){return P+k[s]},0):A[s]}).sort(n.sort))},f=l(i),d=t[0],m=t[1];return f.each(function(x){var A,P;x[d]=[x.x0,x.x1,x.x1,x.x0],x[m]=[x.y1,x.y1,x.y0,x.y0],x.name=x.name||((A=x.data)===null||A===void 0?void 0:A.name)||((P=x.data)===null||P===void 0?void 0:P.label),x.data.name=x.name,["x0","x1","y0","y1"].forEach(function(k){t.indexOf(k)===-1&&delete x[k]})}),L2(f)}function sM(i,n){return i.parent===n.parent?1:2}function RD(i){return i.reduce(uM,0)/i.length}function uM(i,n){return i+n.x}function lM(i){return 1+i.reduce(ID,0)}function ID(i,n){return Math.max(i,n.y)}function PD(i){for(var n;n=i.children;)i=n[0];return i}function OD(i){for(var n;n=i.children;)i=n[n.length-1];return i}function kD(){var i=sM,n=1,t=1,s=!1;function l(f){var d,m=0;f.eachAfter(function(B){var U=B.children;U?(B.x=RD(U),B.y=lM(U)):(B.x=d?m+=i(B,d):0,B.y=0,d=B)});var x=PD(f),A=OD(f),P=x.x-i(x,A)/2,k=A.x+i(A,x)/2;return f.eachAfter(s?function(B){B.x=(B.x-f.x)*n,B.y=(f.y-B.y)*t}:function(B){B.x=(B.x-P)/(k-P)*n,B.y=(1-(f.y?B.y/f.y:1))*t})}return l.separation=function(f){return arguments.length?(i=f,l):i},l.size=function(f){return arguments.length?(s=!1,n=+f[0],t=+f[1],l):s?null:[n,t]},l.nodeSize=function(f){return arguments.length?(s=!0,n=+f[0],t=+f[1],l):s?[n,t]:null},l}var FD={depth:-1},cM={};function Xy(i){return i.id}function $y(i){return i.parentId}function DD(){var i=Xy,n=$y;function t(s){var l=Array.from(s),f=l.length,d,m,x,A,P,k,B,U=new Map;for(m=0;m<f;++m)d=l[m],P=l[m]=new qg(d),(k=i(d,m,s))!=null&&(k+="")&&(B=P.id=k,U.set(B,U.has(B)?cM:P)),(k=n(d,m,s))!=null&&(k+="")&&(P.parent=k);for(m=0;m<f;++m)if(P=l[m],k=P.parent){if(A=U.get(k),!A)throw new Error("missing: "+k);if(A===cM)throw new Error("ambiguous: "+k);A.children?A.children.push(P):A.children=[P],P.parent=A}else{if(x)throw new Error("multiple roots");x=P}if(!x)throw new Error("no root");if(x.parent=FD,x.eachBefore(function(W){W.depth=W.parent.depth+1,--f}).eachBefore(k2),x.parent=null,f>0)throw new Error("cycle");return x}return t.id=function(s){return arguments.length?(i=Ly(s),t):i},t.parentId=function(s){return arguments.length?(n=Ly(s),t):n},t}function LD(i,n){return i.parent===n.parent?1:2}function K2(i){var n=i.children;return n?n[0]:i.t}function q2(i){var n=i.children;return n?n[n.length-1]:i.t}function BD(i,n,t){var s=t/(n.i-i.i);n.c-=s,n.s+=t,i.c+=s,n.z+=t,n.m+=t}function em(i){for(var n=0,t=0,s=i.children,l=s.length,f;--l>=0;)f=s[l],f.z+=n,f.m+=n,n+=f.s+(t+=f.c)}function ND(i,n,t){return i.a.parent===n.parent?i.a:t}function z1(i,n){this._=i,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}z1.prototype=Object.create(qg.prototype);function zD(i){for(var n=new z1(i,0),t,s=[n],l,f,d,m;t=s.pop();)if(f=t._.children)for(t.children=new Array(m=f.length),d=m-1;d>=0;--d)s.push(l=t.children[d]=new z1(f[d],d)),l.parent=t;return(n.parent=new z1(null,0)).children=[n],n}function UD(){var i=LD,n=1,t=1,s=null;function l(A){var P=zD(A);if(P.eachAfter(f),P.parent.m=-P.z,P.eachBefore(d),s)A.eachBefore(x);else{var k=A,B=A,U=A;A.eachBefore(function($e){$e.x<k.x&&(k=$e),$e.x>B.x&&(B=$e),$e.depth>U.depth&&(U=$e)});var W=k===B?1:i(k,B)/2,ne=W-k.x,de=n/(B.x+W+ne),ve=t/(U.depth||1);A.eachBefore(function($e){$e.x=($e.x+ne)*de,$e.y=$e.depth*ve})}return A}function f(A){var P=A.children,k=A.parent.children,B=A.i?k[A.i-1]:null;if(P){em(A);var U=(P[0].z+P[P.length-1].z)/2;B?(A.z=B.z+i(A._,B._),A.m=A.z-U):A.z=U}else B&&(A.z=B.z+i(A._,B._));A.parent.A=m(A,B,A.parent.A||k[0])}function d(A){A._.x=A.z+A.parent.m,A.m+=A.parent.m}function m(A,P,k){if(P){for(var B=A,U=A,W=P,ne=B.parent.children[0],de=B.m,ve=U.m,$e=W.m,lt=ne.m,vt;W=q2(W),B=K2(B),W&&B;)ne=K2(ne),U=q2(U),U.a=A,vt=W.z+$e-B.z-de+i(W._,B._),vt>0&&(BD(ND(W,A,k),A,vt),de+=vt,ve+=vt),$e+=W.m,de+=B.m,lt+=ne.m,ve+=U.m;W&&!q2(U)&&(U.t=W,U.m+=$e-ve),B&&!K2(ne)&&(ne.t=B,ne.m+=de-lt,k=A)}return k}function x(A){A.x*=n,A.y=A.depth*t}return l.separation=function(A){return arguments.length?(i=A,l):i},l.size=function(A){return arguments.length?(s=!1,n=+A[0],t=+A[1],l):s?null:[n,t]},l.nodeSize=function(A){return arguments.length?(s=!0,n=+A[0],t=+A[1],l):s?[n,t]:null},l}function U1(i,n,t,s,l){for(var f=i.children,d,m=-1,x=f.length,A=i.value&&(l-t)/i.value;++m<x;)d=f[m],d.x0=n,d.x1=s,d.y0=t,d.y1=t+=d.value*A}var fM=(1+Math.sqrt(5))/2;function hM(i,n,t,s,l,f){for(var d=[],m=n.children,x,A,P=0,k=0,B=m.length,U,W,ne=n.value,de,ve,$e,lt,vt,Ot,fr;P<B;){U=l-t,W=f-s;do de=m[k++].value;while(!de&&k<B);for(ve=$e=de,Ot=Math.max(W/U,U/W)/(ne*i),fr=de*de*Ot,vt=Math.max($e/fr,fr/ve);k<B;++k){if(de+=A=m[k].value,A<ve&&(ve=A),A>$e&&($e=A),fr=de*de*Ot,lt=Math.max($e/fr,fr/ve),lt>vt){de-=A;break}vt=lt}d.push(x={value:de,dice:U<W,children:m.slice(P,k)}),x.dice?Gy(x,t,s,l,ne?s+=W*de/ne:f):U1(x,t,s,ne?t+=U*de/ne:l,f),ne-=de,P=k}return d}var pM=function i(n){function t(s,l,f,d,m){hM(n,s,l,f,d,m)}return t.ratio=function(s){return i((s=+s)>1?s:1)},t}(fM);function dM(){var i=pM,n=!1,t=1,s=1,l=[0],f=Yv,d=Yv,m=Yv,x=Yv,A=Yv;function P(B){return B.x0=B.y0=0,B.x1=t,B.y1=s,B.eachBefore(k),l=[0],n&&B.eachBefore(iM),B}function k(B){var U=l[B.depth],W=B.x0+U,ne=B.y0+U,de=B.x1-U,ve=B.y1-U;de<W&&(W=de=(W+de)/2),ve<ne&&(ne=ve=(ne+ve)/2),B.x0=W,B.y0=ne,B.x1=de,B.y1=ve,B.children&&(U=l[B.depth+1]=f(B)/2,W+=A(B)-U,ne+=d(B)-U,de-=m(B)-U,ve-=x(B)-U,de<W&&(W=de=(W+de)/2),ve<ne&&(ne=ve=(ne+ve)/2),i(B,W,ne,de,ve))}return P.round=function(B){return arguments.length?(n=!!B,P):n},P.size=function(B){return arguments.length?(t=+B[0],s=+B[1],P):[t,s]},P.tile=function(B){return arguments.length?(i=Ly(B),P):i},P.padding=function(B){return arguments.length?P.paddingInner(B).paddingOuter(B):P.paddingInner()},P.paddingInner=function(B){return arguments.length?(f=typeof B=="function"?B:Yg(+B),P):f},P.paddingOuter=function(B){return arguments.length?P.paddingTop(B).paddingRight(B).paddingBottom(B).paddingLeft(B):P.paddingTop()},P.paddingTop=function(B){return arguments.length?(d=typeof B=="function"?B:Yg(+B),P):d},P.paddingRight=function(B){return arguments.length?(m=typeof B=="function"?B:Yg(+B),P):m},P.paddingBottom=function(B){return arguments.length?(x=typeof B=="function"?B:Yg(+B),P):x},P.paddingLeft=function(B){return arguments.length?(A=typeof B=="function"?B:Yg(+B),P):A},P}function ZD(i,n,t,s,l){var f=i.children,d,m=f.length,x,A=new Array(m+1);for(A[0]=x=d=0;d<m;++d)A[d+1]=x+=f[d].value;P(0,m,i.value,n,t,s,l);function P(k,B,U,W,ne,de,ve){if(k>=B-1){var $e=f[k];$e.x0=W,$e.y0=ne,$e.x1=de,$e.y1=ve;return}for(var lt=A[k],vt=U/2+lt,Ot=k+1,fr=B-1;Ot<fr;){var Tr=Ot+fr>>>1;A[Tr]<vt?Ot=Tr+1:fr=Tr}vt-A[Ot-1]<A[Ot]-vt&&k+1<Ot&&--Ot;var zr=A[Ot]-lt,cn=U-zr;if(de-W>ve-ne){var Qr=U?(W*cn+de*zr)/U:de;P(k,Ot,zr,W,ne,Qr,ve),P(Ot,B,cn,Qr,ne,de,ve)}else{var On=U?(ne*cn+ve*zr)/U:ve;P(k,Ot,zr,W,ne,de,On),P(Ot,B,cn,W,On,de,ve)}}}function VD(i,n,t,s,l){(i.depth&1?U1:Gy)(i,n,t,s,l)}var HD=function i(n){function t(s,l,f,d,m){if((x=s._squarify)&&x.ratio===n)for(var x,A,P,k,B=-1,U,W=x.length,ne=s.value;++B<W;){for(A=x[B],P=A.children,k=A.value=0,U=P.length;k<U;++k)A.value+=P[k].value;A.dice?Gy(A,l,f,d,ne?f+=(m-f)*A.value/ne:m):U1(A,l,f,ne?l+=(d-l)*A.value/ne:d,m),ne-=A.value}else s._squarify=x=hM(n,s,l,f,d,m),x.ratio=n}return t.ratio=function(s){return i((s=+s)>1?s:1)},t}(fM),jD={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"],sort:function(i,n){return n.value-i.value},ratio:.5*(1+Math.sqrt(5))};function WD(i,n){return i==="treemapSquarify"?J[i].ratio(n):J[i]}function vM(i,n){n=(0,E.f0)({},jD,n);var t=n.as;if(!(0,E.kJ)(t)||t.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var s;try{s=D2(n)}catch(A){console.warn(A)}var l=WD(n.tile,n.ratio),f=function(A){return dM().tile(l).size(n.size).round(n.round).padding(n.padding).paddingInner(n.paddingInner).paddingOuter(n.paddingOuter).paddingTop(n.paddingTop).paddingRight(n.paddingRight).paddingBottom(n.paddingBottom).paddingLeft(n.paddingLeft)(Kg(A).sum(function(P){return n.ignoreParentValue&&P.children?0:P[s]}).sort(n.sort))},d=f(i),m=t[0],x=t[1];return d.each(function(A){A[m]=[A.x0,A.x1,A.x1,A.x0],A[x]=[A.y1,A.y1,A.y0,A.y0],["x0","x1","y0","y1"].forEach(function(P){t.indexOf(P)===-1&&delete A[P]})}),L2(d)}function gM(i){var n=i.data,t=i.colorField,s=i.rawFields,l=i.hierarchyConfig,f=l===void 0?{}:l,d=f.activeDepth,m={partition:oM,treemap:vM},x=i.seriesField,A=i.type||"partition",P=m[A](n,(0,M.pi)((0,M.pi)({field:x||"value"},(0,E.CE)(f,["activeDepth"])),{type:"hierarchy.".concat(A),as:["x","y"]})),k=[];return P.forEach(function(B){var U,W,ne,de,ve,$e;if(B.depth===0||d>0&&B.depth>d)return null;for(var lt=B.data.name,vt=(0,M.pi)({},B);vt.depth>1;)lt="".concat((W=vt.parent.data)===null||W===void 0?void 0:W.name," / ").concat(lt),vt=vt.parent;var Ot=(0,M.pi)((0,M.pi)((0,M.pi)({},es(B.data,(0,M.ev)((0,M.ev)([],s||[],!0),[f.field],!1))),(U={},U[d0]=lt,U[wf]=vt.data.name,U)),B);x&&(Ot[x]=B.data[x]||((de=(ne=B.parent)===null||ne===void 0?void 0:ne.data)===null||de===void 0?void 0:de[x])),t&&(Ot[t]=B.data[t]||(($e=(ve=B.parent)===null||ve===void 0?void 0:ve.data)===null||$e===void 0?void 0:$e[t])),Ot.ext=f,Ot[Fy]={hierarchyConfig:f,colorField:t,rawFields:s},k.push(Ot)}),k}function GD(i){var n=i.chart,t=i.options,s=t.color,l=t.colorField,f=l===void 0?wf:l,d=t.sunburstStyle,m=t.rawFields,x=m===void 0?[]:m,A=t.shape,P=gM(t);n.data(P);var k;return d&&(k=function(B){return vn({},{fillOpacity:Math.pow(.85,B.depth)},(0,E.mf)(d)?d(B):d)}),u1(vn({},i,{options:{xField:"x",yField:"y",seriesField:f,rawFields:(0,E.jj)((0,M.ev)((0,M.ev)([],Y2,!0),x,!0)),polygon:{color:s,style:k,shape:A}}})),i}function XD(i){var n=i.chart;return n.axis(!1),i}function $D(i){var n=i.chart,t=i.options,s=t.label,l=yl(n,"polygon");if(!s)l.label(!1);else{var f=s.fields,d=f===void 0?["name"]:f,m=s.callback,x=(0,M._T)(s,["fields","callback"]);l.label({fields:d,callback:m,cfg:Dl(x)})}return i}function YD(i){var n=i.chart,t=i.options,s=t.innerRadius,l=t.radius,f=t.reflect,d=n.coordinate({type:"polar",cfg:{innerRadius:s,radius:l}});return f&&d.reflect(f),i}function KD(i){var n,t=i.options,s=t.hierarchyConfig,l=t.meta;return Aa(Uu({},(n={},n[$2]=(0,E.U2)(l,(0,E.U2)(s,["field"],"value")),n)))(i)}function qD(i){var n=i.chart,t=i.options,s=t.tooltip;if(s===!1)n.tooltip(!1);else{var l=s;(0,E.U2)(s,"fields")||(l=vn({},{customItems:function(f){return f.map(function(d){var m=(0,E.U2)(n.getOptions(),"scales"),x=(0,E.U2)(m,[d0,"formatter"],function(P){return P}),A=(0,E.U2)(m,[$2,"formatter"],function(P){return P});return(0,M.pi)((0,M.pi)({},d),{name:x(d.data[d0]),value:A(d.data.value)})})}},l)),n.tooltip(l)}return i}function QD(i){var n=i.drilldown,t=i.interactions,s=t===void 0?[]:t;return n!=null&&n.enabled?vn({},i,{interactions:(0,M.ev)((0,M.ev)([],s,!0),[{type:"drill-down",cfg:{drillDownConfig:n,transformData:gM}}],!1)}):i}function mM(i){var n=i.chart,t=i.options,s=t.drilldown;return _u({chart:n,options:QD(t)}),s!=null&&s.enabled&&(n.appendPadding=t1(n.appendPadding,(0,E.U2)(s,["breadCrumb","position"]))),i}function JD(i){return Aa(Lo,Eh("sunburstStyle"),GD,XD,KD,t0,YD,qD,$D,mM,ls,xu())(i)}var zB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="sunburst",t}return n.getDefaultOptions=function(){return TD},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return JD},n.SUNBURST_ANCESTOR_FIELD=wf,n.SUNBURST_PATH_FIELD=d0,n.NODE_ANCESTORS_FIELD=Ny,n}(Ta);function yM(i,n){if((0,E.kJ)(i))return i.find(function(t){return t.type===n})}function _M(i,n){var t=yM(i,n);return t&&t.enable!==!1}function Q2(i){var n=i.interactions,t=i.drilldown;return(0,E.U2)(t,"enabled")||_M(n,"treemap-drill-down")}function eL(i){var n=i.interactions["drill-down"];if(n){var t=n.context.actions.find(function(s){return s.name==="drill-down-action"});t.reset()}}function J2(i){var n=i.data,t=i.colorField,s=i.enableDrillDown,l=i.hierarchyConfig,f=vM(n,(0,M.pi)((0,M.pi)({},l),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),d=[];return f.forEach(function(m){if(m.depth===0||s&&m.depth!==1||!s&&m.children)return null;var x=m.ancestors().map(function(B){return{data:B.data,height:B.height,value:B.value}}),A=s&&(0,E.kJ)(n.path)?x.concat(n.path.slice(1)):x,P=Object.assign({},m.data,(0,M.pi)({x:m.x,y:m.y,depth:m.depth,value:m.value,path:A},m));if(!m.data[t]&&m.parent){var k=m.ancestors().find(function(B){return B.data[t]});P[t]=k==null?void 0:k.data[t]}else P[t]=m.data[t];P[Fy]={hierarchyConfig:l,colorField:t,enableDrillDown:s},d.push(P)}),d}function tL(i){var n=i.options,t=n.colorField;return vn({options:{rawFields:["value"],tooltip:{fields:["name","value",t,"path"],formatter:function(s){return{name:s.name,value:s.value}}}}},i)}function rL(i){var n=i.chart,t=i.options,s=t.color,l=t.colorField,f=t.rectStyle,d=t.hierarchyConfig,m=t.rawFields,x=J2({data:t.data,colorField:t.colorField,enableDrillDown:Q2(t),hierarchyConfig:d});return n.data(x),u1(vn({},i,{options:{xField:"x",yField:"y",seriesField:l,rawFields:m,polygon:{color:s,style:f}}})),n.coordinate().reflect("y"),i}function nL(i){var n=i.chart;return n.axis(!1),i}function iL(i){var n=i.drilldown,t=i.interactions,s=t===void 0?[]:t,l=Q2(i);return l?vn({},i,{interactions:(0,M.ev)((0,M.ev)([],s,!0),[{type:"drill-down",cfg:{drillDownConfig:n,transformData:J2}}],!1)}):i}function aL(i){var n=i.chart,t=i.options,s=t.interactions,l=t.drilldown;_u({chart:n,options:iL(t)});var f=yM(s,"view-zoom");f&&(f.enable!==!1?n.getCanvas().on("mousewheel",function(m){m.preventDefault()}):n.getCanvas().off("mousewheel"));var d=Q2(t);return d&&(n.appendPadding=t1(n.appendPadding,(0,E.U2)(l,["breadCrumb","position"]))),i}function oL(i){return Aa(tL,Lo,Eh("rectStyle"),rL,nL,t0,Ll,aL,ls,xu())(i)}var sL={colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapSquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:"bottom-left",rootText:"\u521D\u59CB",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}}}},UB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="treemap",t}return n.getDefaultOptions=function(){return sL},n.prototype.changeData=function(t){var s=this.options,l=s.colorField,f=s.interactions,d=s.hierarchyConfig;this.updateOption({data:t});var m=J2({data:t,colorField:l,enableDrillDown:_M(f,"treemap-drill-down"),hierarchyConfig:d});this.chart.changeData(m),eL(this.chart)},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return oL},n}(Ta),fv="id",Yy="path",uL={appendPadding:[10,0,20,0],blendMode:"multiply",tooltip:{showTitle:!1,showMarkers:!1,fields:["id","size"],formatter:function(i){return{name:i.id,value:i.size}}},legend:{position:"top-left"},label:{style:{textAlign:"center",fill:"#fff"}},interactions:[{type:"legend-filter",enable:!1}],state:{active:{style:{stroke:"#000"}},selected:{style:{stroke:"#000",lineWidth:2}},inactive:{style:{fillOpacity:.3,strokeOpacity:.3}}},defaultInteractions:["tooltip","venn-legend-active"]};function Z1(i){if(i){var n=i.geometries[0].elements;n.forEach(function(t){t.shape.toFront()})}}var lL=Ci("element-active"),cL=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.syncElementsPos=function(){Z1(this.context.view)},n.prototype.active=function(){i.prototype.active.call(this),this.syncElementsPos()},n.prototype.toggle=function(){i.prototype.toggle.call(this),this.syncElementsPos()},n.prototype.reset=function(){i.prototype.reset.call(this),this.syncElementsPos()},n}(lL),fL=Ci("element-highlight"),hL=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.syncElementsPos=function(){Z1(this.context.view)},n.prototype.highlight=function(){i.prototype.highlight.call(this),this.syncElementsPos()},n.prototype.toggle=function(){i.prototype.toggle.call(this),this.syncElementsPos()},n.prototype.clear=function(){i.prototype.clear.call(this),this.syncElementsPos()},n.prototype.reset=function(){i.prototype.reset.call(this),this.syncElementsPos()},n}(fL),pL=Ci("element-selected"),dL=Ci("element-single-selected"),vL=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.syncElementsPos=function(){Z1(this.context.view)},n.prototype.selected=function(){i.prototype.selected.call(this),this.syncElementsPos()},n.prototype.toggle=function(){i.prototype.toggle.call(this),this.syncElementsPos()},n.prototype.reset=function(){i.prototype.reset.call(this),this.syncElementsPos()},n}(pL),gL=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.syncElementsPos=function(){Z1(this.context.view)},n.prototype.selected=function(){i.prototype.selected.call(this),this.syncElementsPos()},n.prototype.toggle=function(){i.prototype.toggle.call(this),this.syncElementsPos()},n.prototype.reset=function(){i.prototype.reset.call(this),this.syncElementsPos()},n}(dL);Vr("venn-element-active",cL),Vr("venn-element-highlight",hL),Vr("venn-element-selected",vL),Vr("venn-element-single-selected",gL),Fn("venn-element-active",{start:[{trigger:"element:mouseenter",action:"venn-element-active:active"}],end:[{trigger:"element:mouseleave",action:"venn-element-active:reset"}]}),Fn("venn-element-highlight",{start:[{trigger:"element:mouseenter",action:"venn-element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"venn-element-highlight:reset"}]}),Fn("venn-element-selected",{start:[{trigger:"element:click",action:"venn-element-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-selected:reset"]}]}),Fn("venn-element-single-selected",{start:[{trigger:"element:click",action:"venn-element-single-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-single-selected:reset"]}]}),Fn("venn-legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","venn-element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","venn-element-active:reset"]}]}),Fn("venn-legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","venn-element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","venn-element-highlight:reset"]}]});var mL=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getLabelPoint=function(t,s,l){var f=t.data,d=f.x,m=f.y,x=t.customLabelInfo,A=x.offsetX,P=x.offsetY;return{content:t.content[l],x:d+A,y:m+P}},n}(Co);Ri("venn",mL);var yL=F(27771),Ky=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,_L=new RegExp("([a-z])["+Ky+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Ky+"]*,?["+Ky+"]*)+)","ig"),V1=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Ky+"]*,?["+Ky+"]*","ig");function xL(i){if(!i)return null;if((0,yL.Z)(i))return i;var n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(_L,function(s,l,f){var d=[],m=l.toLowerCase();if(f.replace(V1,function(x,A){A&&d.push(+A)}),m==="m"&&d.length>2&&(t.push([l].concat(d.splice(0,2))),m="l",l=l==="m"?"l":"L"),m==="o"&&d.length===1&&t.push([l,d[0]]),m==="r")t.push([l].concat(d));else for(;d.length>=n[m]&&(t.push([l].concat(d.splice(0,n[m]))),!!n[m]););return""}),t}var bL=/[a-z]/;function xM(i,n){return[n[0]+(n[0]-i[0]),n[1]+(n[1]-i[1])]}function SL(i){var n=parsePathString(i);if(!n||!n.length)return[["M",0,0]];for(var t=!1,s=0;s<n.length;s++){var l=n[s][0];if(bL.test(l)||["V","H","T","S"].indexOf(l)>=0){t=!0;break}}if(!t)return n;var f=[],d=0,m=0,x=0,A=0,P=0,k,B,U=n[0];(U[0]==="M"||U[0]==="m")&&(d=+U[1],m=+U[2],x=d,A=m,P++,f[0]=["M",d,m]);for(var s=P,W=n.length;s<W;s++){var ne=n[s],de=f[s-1],ve=[],l=ne[0],$e=l.toUpperCase();if(l!==$e)switch(ve[0]=$e,$e){case"A":ve[1]=ne[1],ve[2]=ne[2],ve[3]=ne[3],ve[4]=ne[4],ve[5]=ne[5],ve[6]=+ne[6]+d,ve[7]=+ne[7]+m;break;case"V":ve[1]=+ne[1]+m;break;case"H":ve[1]=+ne[1]+d;break;case"M":x=+ne[1]+d,A=+ne[2]+m,ve[1]=x,ve[2]=A;break;default:for(var lt=1,vt=ne.length;lt<vt;lt++)ve[lt]=+ne[lt]+(lt%2?d:m)}else ve=n[s];switch($e){case"Z":d=+x,m=+A;break;case"H":d=ve[1],ve=["L",d,m];break;case"V":m=ve[1],ve=["L",d,m];break;case"T":d=ve[1],m=ve[2];var Ot=xM([de[1],de[2]],[de[3],de[4]]);ve=["Q",Ot[0],Ot[1],d,m];break;case"S":d=ve[ve.length-2],m=ve[ve.length-1];var fr=de.length,Tr=xM([de[fr-4],de[fr-3]],[de[fr-2],de[fr-1]]);ve=["C",Tr[0],Tr[1],ve[1],ve[2],d,m];break;case"M":x=ve[ve.length-2],A=ve[ve.length-1];break;default:d=ve[ve.length-2],m=ve[ve.length-1]}f.push(ve)}return f}var v0=Math.PI*2,H1=function(i,n,t,s,l,f,d){var m=i.x,x=i.y;m*=n,x*=t;var A=s*m-l*x,P=l*m+s*x;return{x:A+f,y:P+d}},EL=function(i,n){var t=n===1.5707963267948966?.551915024494:n===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(n/4),s=Math.cos(i),l=Math.sin(i),f=Math.cos(i+n),d=Math.sin(i+n);return[{x:s-l*t,y:l+s*t},{x:f+d*t,y:d-f*t},{x:f,y:d}]},eS=function(i,n,t,s){var l=i*s-n*t<0?-1:1,f=i*t+n*s;return f>1&&(f=1),f<-1&&(f=-1),l*Math.acos(f)},bM=function(i,n,t,s,l,f,d,m,x,A,P,k){var B=Math.pow(l,2),U=Math.pow(f,2),W=Math.pow(P,2),ne=Math.pow(k,2),de=B*U-B*ne-U*W;de<0&&(de=0),de/=B*ne+U*W,de=Math.sqrt(de)*(d===m?-1:1);var ve=de*l/f*k,$e=de*-f/l*P,lt=A*ve-x*$e+(i+t)/2,vt=x*ve+A*$e+(n+s)/2,Ot=(P-ve)/l,fr=(k-$e)/f,Tr=(-P-ve)/l,zr=(-k-$e)/f,cn=eS(1,0,Ot,fr),Qr=eS(Ot,fr,Tr,zr);return m===0&&Qr>0&&(Qr-=v0),m===1&&Qr<0&&(Qr+=v0),[lt,vt,cn,Qr]},wL=function(i){var n=i.px,t=i.py,s=i.cx,l=i.cy,f=i.rx,d=i.ry,m=i.xAxisRotation,x=m===void 0?0:m,A=i.largeArcFlag,P=A===void 0?0:A,k=i.sweepFlag,B=k===void 0?0:k,U=[];if(f===0||d===0)return[{x1:0,y1:0,x2:0,y2:0,x:s,y:l}];var W=Math.sin(x*v0/360),ne=Math.cos(x*v0/360),de=ne*(n-s)/2+W*(t-l)/2,ve=-W*(n-s)/2+ne*(t-l)/2;if(de===0&&ve===0)return[{x1:0,y1:0,x2:0,y2:0,x:s,y:l}];f=Math.abs(f),d=Math.abs(d);var $e=Math.pow(de,2)/Math.pow(f,2)+Math.pow(ve,2)/Math.pow(d,2);$e>1&&(f*=Math.sqrt($e),d*=Math.sqrt($e));var lt=bM(n,t,s,l,f,d,P,B,W,ne,de,ve),vt=lt[0],Ot=lt[1],fr=lt[2],Tr=lt[3],zr=Math.abs(Tr)/(v0/4);Math.abs(1-zr)<1e-7&&(zr=1);var cn=Math.max(Math.ceil(zr),1);Tr/=cn;for(var Qr=0;Qr<cn;Qr++)U.push(EL(fr,Tr)),fr+=Tr;return U.map(function(On){var Qn=H1(On[0],f,d,ne,W,vt,Ot),Hi=Qn.x,oa=Qn.y,eo=H1(On[1],f,d,ne,W,vt,Ot),Nn=eo.x,Di=eo.y,sa=H1(On[2],f,d,ne,W,vt,Ot),Li=sa.x,$i=sa.y;return{x1:Hi,y1:oa,x2:Nn,y2:Di,x:Li,y:$i}})};function CL(i,n,t,s,l,f,d,m,x){var A=wL({px:i,py:n,cx:m,cy:x,rx:t,ry:s,xAxisRotation:l,largeArcFlag:f,sweepFlag:d});return A.reduce(function(P,k){var B=k.x1,U=k.y1,W=k.x2,ne=k.y2,de=k.x,ve=k.y;return P.push(B,U,W,ne,de,ve),P},[])}function AL(i,n){"TQ".indexOf(i[0])<0&&(n.qx=null,n.qy=null);var t=i.slice(1),s=t[0],l=t[1];switch(i[0]){case"M":return n.x=s,n.y=l,i;case"A":return["C"].concat(arcToCubic.apply(0,[n.x1,n.y1].concat(i.slice(1))));case"Q":return n.qx=s,n.qy=l,["C"].concat(quadToCubic.apply(0,[n.x1,n.y1].concat(i.slice(1))));case"L":return["C"].concat(lineToCubic(n.x1,n.y1,i[1],i[2]));case"H":return["C"].concat(lineToCubic(n.x1,n.y1,i[1],n.y1));case"V":return["C"].concat(lineToCubic(n.x1,n.y1,n.x1,i[1]));case"Z":return["C"].concat(lineToCubic(n.x1,n.y1,n.x,n.y));default:}return i}function ZB(i,n){n===void 0&&(n=!1);for(var t=path2Absolute(i),s={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},l=[],f="",d=t.length,m,x,A=[],P=0;P<d;P+=1)t[P]&&(f=t[P][0]),l[P]=f,t[P]=segmentToCubic(t[P],s),SM(t,l,P),d=t.length,f==="Z"&&A.push(P),m=t[P],x=m.length,s.x1=+m[x-2],s.y1=+m[x-1],s.x2=+m[x-4]||s.x1,s.y2=+m[x-3]||s.y1;return n?[t,A]:t}function SM(i,n,t){if(i[t].length>7){i[t].shift();for(var s=i[t],l=t;s.length;)n[t]="A",i.splice(l+=1,0,["C"].concat(s.splice(0,6)));i.splice(t,1)}}var EM=function(i,n,t,s,l){var f=-3*n+9*t-9*s+3*l,d=i*f+6*n-12*t+6*s;return i*d-3*n+3*t},wM=function(i,n,t,s,l,f,d,m,x){x===null&&(x=1),x=x>1?1:x<0?0:x;for(var A=x/2,P=12,k=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],B=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],U=0,W=0;W<P;W++){var ne=A*k[W]+A,de=EM(ne,i,t,l,d),ve=EM(ne,n,s,f,m),$e=de*de+ve*ve;U+=B[W]*Math.sqrt($e)}return A*U},TL=function(i,n,t,s,l,f,d,m){for(var x=[],A=[[],[]],P,k,B,U,W=0;W<2;++W){if(W===0?(k=6*i-12*t+6*l,P=-3*i+9*t-9*l+3*d,B=3*t-3*i):(k=6*n-12*s+6*f,P=-3*n+9*s-9*f+3*m,B=3*s-3*n),Math.abs(P)<1e-12){if(Math.abs(k)<1e-12)continue;U=-B/k,U>0&&U<1&&x.push(U);continue}var ne=k*k-4*B*P,de=Math.sqrt(ne);if(!(ne<0)){var ve=(-k+de)/(2*P);ve>0&&ve<1&&x.push(ve);var $e=(-k-de)/(2*P);$e>0&&$e<1&&x.push($e)}}for(var lt=x.length,vt=lt,Ot;lt--;)U=x[lt],Ot=1-U,A[0][lt]=Ot*Ot*Ot*i+3*Ot*Ot*U*t+3*Ot*U*U*l+U*U*U*d,A[1][lt]=Ot*Ot*Ot*n+3*Ot*Ot*U*s+3*Ot*U*U*f+U*U*U*m;return A[0][vt]=i,A[1][vt]=n,A[0][vt+1]=d,A[1][vt+1]=m,A[0].length=A[1].length=vt+2,{min:{x:Math.min.apply(0,A[0]),y:Math.min.apply(0,A[1])},max:{x:Math.max.apply(0,A[0]),y:Math.max.apply(0,A[1])}}},ML=function(i,n,t,s,l,f,d,m){if(!(Math.max(i,t)<Math.min(l,d)||Math.min(i,t)>Math.max(l,d)||Math.max(n,s)<Math.min(f,m)||Math.min(n,s)>Math.max(f,m))){var x=(i*s-n*t)*(l-d)-(i-t)*(l*m-f*d),A=(i*s-n*t)*(f-m)-(n-s)*(l*m-f*d),P=(i-t)*(f-m)-(n-s)*(l-d);if(P){var k=x/P,B=A/P,U=+k.toFixed(2),W=+B.toFixed(2);if(!(U<+Math.min(i,t).toFixed(2)||U>+Math.max(i,t).toFixed(2)||U<+Math.min(l,d).toFixed(2)||U>+Math.max(l,d).toFixed(2)||W<+Math.min(n,s).toFixed(2)||W>+Math.max(n,s).toFixed(2)||W<+Math.min(f,m).toFixed(2)||W>+Math.max(f,m).toFixed(2)))return{x:k,y:B}}}},eg=function(i,n,t){return n>=i.x&&n<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},j1=function(i,n,t,s){return i===null&&(i=n=t=s=0),n===null&&(n=i.y,t=i.width,s=i.height,i=i.x),{x:i,y:n,width:t,w:t,height:s,h:s,x2:i+t,y2:n+s,cx:i+t/2,cy:n+s/2,r1:Math.min(t,s)/2,r2:Math.max(t,s)/2,r0:Math.sqrt(t*t+s*s)/2,path:rectPath(i,n,t,s),vb:[i,n,t,s].join(" ")}},CM=function(i,n){return i=j1(i),n=j1(n),eg(n,i.x,i.y)||eg(n,i.x2,i.y)||eg(n,i.x,i.y2)||eg(n,i.x2,i.y2)||eg(i,n.x,n.y)||eg(i,n.x2,n.y)||eg(i,n.x,n.y2)||eg(i,n.x2,n.y2)||(i.x<n.x2&&i.x>n.x||n.x<i.x2&&n.x>i.x)&&(i.y<n.y2&&i.y>n.y||n.y<i.y2&&n.y>i.y)},AM=function(i,n,t,s,l,f,d,m){isArray(i)||(i=[i,n,t,s,l,f,d,m]);var x=TL.apply(null,i);return j1(x.min.x,x.min.y,x.max.x-x.min.x,x.max.y-x.min.y)},tS=function(i,n,t,s,l,f,d,m,x){var A=1-x,P=Math.pow(A,3),k=Math.pow(A,2),B=x*x,U=B*x,W=P*i+k*3*x*t+A*3*x*x*l+U*d,ne=P*n+k*3*x*s+A*3*x*x*f+U*m,de=i+2*x*(t-i)+B*(l-2*t+i),ve=n+2*x*(s-n)+B*(f-2*s+n),$e=t+2*x*(l-t)+B*(d-2*l+t),lt=s+2*x*(f-s)+B*(m-2*f+s),vt=A*i+x*t,Ot=A*n+x*s,fr=A*l+x*d,Tr=A*f+x*m,zr=90-Math.atan2(de-$e,ve-lt)*180/Math.PI;return{x:W,y:ne,m:{x:de,y:ve},n:{x:$e,y:lt},start:{x:vt,y:Ot},end:{x:fr,y:Tr},alpha:zr}},TM=function(i,n,t){var s=AM(i),l=AM(n);if(!CM(s,l))return t?0:[];for(var f=wM.apply(0,i),d=wM.apply(0,n),m=~~(f/8),x=~~(d/8),A=[],P=[],k={},B=t?0:[],U=0;U<m+1;U++){var W=tS.apply(0,i.concat(U/m));A.push({x:W.x,y:W.y,t:U/m})}for(var U=0;U<x+1;U++){var W=tS.apply(0,n.concat(U/x));P.push({x:W.x,y:W.y,t:U/x})}for(var U=0;U<m;U++)for(var ne=0;ne<x;ne++){var de=A[U],ve=A[U+1],$e=P[ne],lt=P[ne+1],vt=Math.abs(ve.x-de.x)<.001?"y":"x",Ot=Math.abs(lt.x-$e.x)<.001?"y":"x",fr=ML(de.x,de.y,ve.x,ve.y,$e.x,$e.y,lt.x,lt.y);if(fr){if(k[fr.x.toFixed(4)]===fr.y.toFixed(4))continue;k[fr.x.toFixed(4)]=fr.y.toFixed(4);var Tr=de.t+Math.abs((fr[vt]-de[vt])/(ve[vt]-de[vt]))*(ve.t-de.t),zr=$e.t+Math.abs((fr[Ot]-$e[Ot])/(lt[Ot]-$e[Ot]))*(lt.t-$e.t);Tr>=0&&Tr<=1&&zr>=0&&zr<=1&&(t?B++:B.push({x:fr.x,y:fr.y,t1:Tr,t2:zr}))}}return B},g0=function(i,n,t){i=path2Curve(i),n=path2Curve(n);for(var s,l,f,d,m,x,A,P,k,B,U=t?0:[],W=0,ne=i.length;W<ne;W++){var de=i[W];if(de[0]==="M")s=m=de[1],l=x=de[2];else{de[0]==="C"?(k=[s,l].concat(de.slice(1)),s=k[6],l=k[7]):(k=[s,l,s,l,m,x,m,x],s=m,l=x);for(var ve=0,$e=n.length;ve<$e;ve++){var lt=n[ve];if(lt[0]==="M")f=A=lt[1],d=P=lt[2];else{lt[0]==="C"?(B=[f,d].concat(lt.slice(1)),f=B[6],d=B[7]):(B=[f,d,f,d,A,P,A,P],f=A,d=P);var vt=TM(k,B,t);if(t)U+=vt;else{for(var Ot=0,fr=vt.length;Ot<fr;Ot++)vt[Ot].segment1=W,vt[Ot].segment2=ve,vt[Ot].bez1=k,vt[Ot].bez2=B;U=U.concat(vt)}}}}}return U};function VB(i,n){return g0(i,n)}function RL(i){return vn({},i.defaultStyle,{fill:i.color},i.style)}fi("schema","venn",{draw:function(i,n){var t=i.data,s=xL(t[Yy]),l=RL(i),f=n.addGroup({name:"venn-shape"});f.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},l),{path:s}),name:"venn-path"});var d=i.customInfo,m=d.offsetX,x=d.offsetY,A=ec.transform(null,[["t",m,x]]);return f.setMatrix(A),f},getMarker:function(i){var n=i.color;return{symbol:"circle",style:{lineWidth:0,stroke:n,fill:n,r:4}}}});var IL=function(i){return function(n,t){var s=[];return s[0]=i(n[0],t[0]),s[1]=i(n[1],t[1]),s[2]=i(n[2],t[2]),s}},PL={normal:function(i){return i},multiply:function(i,n){return i*n/255},screen:function(i,n){return 255*(1-(1-i/255)*(1-n/255))},overlay:function(i,n){return n<128?2*i*n/255:255*(1-2*(1-i/255)*(1-n/255))},darken:function(i,n){return i>n?n:i},lighten:function(i,n){return i>n?i:n},dodge:function(i,n){return i===255?255:(i=255*(n/255)/(1-i/255),i>255?255:i)},burn:function(i,n){return n===255?255:i===0?0:255*(1-Math.min(1,(1-n/255)/(i/255)))}},MM=function(i){if(!PL[i])throw new Error("unknown blend mode "+i);return PL[i]};function RM(i,n,t){t===void 0&&(t="normal");var s=IL(MM(t))(W1(i),W1(n)),l=W1(i),f=l[0],d=l[1],m=l[2],x=l[3],A=W1(n),P=A[0],k=A[1],B=A[2],U=A[3],W=Number((x+U*(1-x)).toFixed(2)),ne=Math.round((x*(1-U)*(f/255)+x*U*(s[0]/255)+(1-x)*U*(P/255))/W*255),de=Math.round((x*(1-U)*(d/255)+x*U*(s[1]/255)+(1-x)*U*(k/255))/W*255),ve=Math.round((x*(1-U)*(m/255)+x*U*(s[2]/255)+(1-x)*U*(B/255))/W*255);return"rgba(".concat(ne,", ").concat(de,", ").concat(ve,", ").concat(W,")")}function W1(i){var n=i.replace("/s+/g",""),t;return typeof n=="string"&&!n.startsWith("rgba")&&!n.startsWith("#")?t=Ea.rgb2arr(Ea.toRGB(n)).concat([1]):(n.startsWith("rgba")&&(t=n.replace("rgba(","").replace(")","").split(",")),n.startsWith("#")&&(t=Ea.rgb2arr(n).concat([1])),t.map(function(s,l){return l===3?Number(s):s|0}))}var Xp=F(87026),rS=1e-10;function G1(i,n){var t=PM(i),s=t.filter(function(Tr){return IM(Tr,i)}),l=0,f=0,d,m=[];if(s.length>1){var x=iS(s);for(d=0;d<s.length;++d){var A=s[d];A.angle=Math.atan2(A.x-x.x,A.y-x.y)}s.sort(function(Tr,zr){return zr.angle-Tr.angle});var P=s[s.length-1];for(d=0;d<s.length;++d){var k=s[d];f+=(P.x+k.x)*(k.y-P.y);for(var B={x:(k.x+P.x)/2,y:(k.y+P.y)/2},U=null,W=0;W<k.parentIndex.length;++W)if(P.parentIndex.indexOf(k.parentIndex[W])>-1){var ne=i[k.parentIndex[W]],de=Math.atan2(k.x-ne.x,k.y-ne.y),ve=Math.atan2(P.x-ne.x,P.y-ne.y),$e=ve-de;$e<0&&($e+=2*Math.PI);var lt=ve-$e/2,vt=np(B,{x:ne.x+ne.radius*Math.sin(lt),y:ne.y+ne.radius*Math.cos(lt)});vt>ne.radius*2&&(vt=ne.radius*2),(U===null||U.width>vt)&&(U={circle:ne,width:vt,p1:k,p2:P})}U!==null&&(m.push(U),l+=X1(U.circle.radius,U.width),P=k)}}else{var Ot=i[0];for(d=1;d<i.length;++d)i[d].radius<Ot.radius&&(Ot=i[d]);var fr=!1;for(d=0;d<i.length;++d)if(np(i[d],Ot)>Math.abs(Ot.radius-i[d].radius)){fr=!0;break}fr?l=f=0:(l=Ot.radius*Ot.radius*Math.PI,m.push({circle:Ot,p1:{x:Ot.x,y:Ot.y+Ot.radius},p2:{x:Ot.x-rS,y:Ot.y+Ot.radius},width:Ot.radius*2}))}return f/=2,n&&(n.area=l+f,n.arcArea=l,n.polygonArea=f,n.arcs=m,n.innerPoints=s,n.intersectionPoints=t),l+f}function IM(i,n){for(var t=0;t<n.length;++t)if(np(i,n[t])>n[t].radius+rS)return!1;return!0}function PM(i){for(var n=[],t=0;t<i.length;++t)for(var s=t+1;s<i.length;++s)for(var l=nS(i[t],i[s]),f=0;f<l.length;++f){var d=l[f];d.parentIndex=[t,s],n.push(d)}return n}function X1(i,n){return i*i*Math.acos(1-n/i)-(i-n)*Math.sqrt(n*(2*i-n))}function np(i,n){return Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y))}function tg(i,n,t){if(t>=i+n)return 0;if(t<=Math.abs(i-n))return Math.PI*Math.min(i,n)*Math.min(i,n);var s=i-(t*t-n*n+i*i)/(2*t),l=n-(t*t-i*i+n*n)/(2*t);return X1(i,s)+X1(n,l)}function nS(i,n){var t=np(i,n),s=i.radius,l=n.radius;if(t>=s+l||t<=Math.abs(s-l))return[];var f=(s*s-l*l+t*t)/(2*t),d=Math.sqrt(s*s-f*f),m=i.x+f*(n.x-i.x)/t,x=i.y+f*(n.y-i.y)/t,A=-(n.y-i.y)*(d/t),P=-(n.x-i.x)*(d/t);return[{x:m+A,y:x-P},{x:m-A,y:x+P}]}function iS(i){for(var n={x:0,y:0},t=0;t<i.length;++t)n.x+=i[t].x,n.y+=i[t].y;return n.x/=i.length,n.y/=i.length,n}function $1(i,n,t){var s=n[0].radius-np(n[0],i),l,f;for(l=1;l<n.length;++l)f=n[l].radius-np(n[l],i),f<=s&&(s=f);for(l=0;l<t.length;++l)f=np(t[l],i)-t[l].radius,f<=s&&(s=f);return s}function aS(i,n){var t=[],s;for(s=0;s<i.length;++s){var l=i[s];t.push({x:l.x,y:l.y}),t.push({x:l.x+l.radius/2,y:l.y}),t.push({x:l.x-l.radius/2,y:l.y}),t.push({x:l.x,y:l.y+l.radius/2}),t.push({x:l.x,y:l.y-l.radius/2})}var f=t[0],d=$1(t[0],i,n);for(s=1;s<t.length;++s){var m=$1(t[s],i,n);m>=d&&(f=t[s],d=m)}var x=(0,Xp.nelderMead)(function(B){return-1*$1({x:B[0],y:B[1]},i,n)},[f.x,f.y],{maxIterations:500,minErrorDelta:1e-10}).x,A={x:x[0],y:x[1]},P=!0;for(s=0;s<i.length;++s)if(np(A,i[s])>i[s].radius){P=!1;break}for(s=0;s<n.length;++s)if(np(A,n[s])<n[s].radius){P=!1;break}if(!P)if(i.length==1)A={x:i[0].x,y:i[0].y};else{var k={};G1(i,k),k.arcs.length===0?A={x:0,y:-1e3,disjoint:!0}:k.arcs.length==1?A={x:k.arcs[0].circle.x,y:k.arcs[0].circle.y}:n.length?A=aS(i,[]):A=iS(k.arcs.map(function(B){return B.p1}))}return A}function OM(i){var n={},t=[];for(var s in i)t.push(s),n[s]=[];for(var l=0;l<t.length;l++)for(var f=i[t[l]],d=l+1;d<t.length;++d){var m=i[t[d]],x=np(f,m);x+m.radius<=f.radius+1e-10?n[t[d]].push(t[l]):x+f.radius<=m.radius+1e-10&&n[t[l]].push(t[d])}return n}function OL(i,n){for(var t={},s=OM(i),l=0;l<n.length;++l){for(var f=n[l].sets,d={},m={},x=0;x<f.length;++x){d[f[x]]=!0;for(var A=s[f[x]],P=0;P<A.length;++P)m[A[P]]=!0}var k=[],B=[];for(var U in i)U in d?k.push(i[U]):U in m||B.push(i[U]);var W=aS(k,B);t[f]=W,W.disjoint&&n[l].size>0&&console.log("WARNING: area "+f+" not represented on screen")}return t}function kM(i,n,t){var s=[],l=i-t,f=n;return s.push("M",l,f),s.push("A",t,t,0,1,0,l+2*t,f),s.push("A",t,t,0,1,0,l,f),s.join(" ")}function kL(i){var n=i.split(" ");return{x:parseFloat(n[1]),y:parseFloat(n[2]),radius:-parseFloat(n[4])}}function FL(i){var n={};G1(i,n);var t=n.arcs;if(t.length===0)return"M 0 0";if(t.length==1){var s=t[0].circle;return kM(s.x,s.y,s.radius)}else{for(var l=[`
M`,t[0].p2.x,t[0].p2.y],f=0;f<t.length;++f){var d=t[f],m=d.circle.radius,x=d.width>m;l.push(`
A`,m,m,0,x?1:0,1,d.p1.x,d.p1.y)}return l.join(" ")}}function FM(i,n){n=n||{},n.maxIterations=n.maxIterations||500;var t=n.initialLayout||Y1,s=n.lossFunction||tm;i=DM(i);var l=t(i,n),f=[],d=[],m;for(m in l)l.hasOwnProperty(m)&&(f.push(l[m].x),f.push(l[m].y),d.push(m));for(var x=(0,Xp.nelderMead)(function(k){for(var B={},U=0;U<d.length;++U){var W=d[U];B[W]={x:k[2*U],y:k[2*U+1],radius:l[W].radius}}return s(B,i)},f,n),A=x.x,P=0;P<d.length;++P)m=d[P],l[m].x=A[2*P],l[m].y=A[2*P+1];return l}var oS=1e-10;function sS(i,n,t){return Math.min(i,n)*Math.min(i,n)*Math.PI<=t+oS?Math.abs(i-n):(0,Xp.bisect)(function(s){return tg(i,n,s)-t},0,i+n)}function DM(i){i=i.slice();var n=[],t={},s,l,f,d;for(s=0;s<i.length;++s){var m=i[s];m.sets.length==1?n.push(m.sets[0]):m.sets.length==2&&(f=m.sets[0],d=m.sets[1],t[[f,d]]=!0,t[[d,f]]=!0)}for(n.sort(function(x,A){return x>A?1:-1}),s=0;s<n.length;++s)for(f=n[s],l=s+1;l<n.length;++l)d=n[l],[f,d]in t||i.push({sets:[f,d],size:0});return i}function uS(i,n,t){var s=(0,Xp.zerosM)(n.length,n.length),l=(0,Xp.zerosM)(n.length,n.length);return i.filter(function(f){return f.sets.length==2}).map(function(f){var d=t[f.sets[0]],m=t[f.sets[1]],x=Math.sqrt(n[d].size/Math.PI),A=Math.sqrt(n[m].size/Math.PI),P=sS(x,A,f.size);s[d][m]=s[m][d]=P;var k=0;f.size+1e-10>=Math.min(n[d].size,n[m].size)?k=1:f.size<=1e-10&&(k=-1),l[d][m]=l[m][d]=k}),{distances:s,constraints:l}}function LM(i,n,t,s){var l=0,f;for(f=0;f<n.length;++f)n[f]=0;for(f=0;f<t.length;++f)for(var d=i[2*f],m=i[2*f+1],x=f+1;x<t.length;++x){var A=i[2*x],P=i[2*x+1],k=t[f][x],B=s[f][x],U=(A-d)*(A-d)+(P-m)*(P-m),W=Math.sqrt(U),ne=U-k*k;B>0&&W<=k||B<0&&W>=k||(l+=2*ne*ne,n[2*f]+=4*ne*(d-A),n[2*f+1]+=4*ne*(m-P),n[2*x]+=4*ne*(A-d),n[2*x+1]+=4*ne*(P-m))}return l}function Y1(i,n){var t=BM(i,n),s=n.lossFunction||tm;if(i.length>=8){var l=DL(i,n),f=s(l,i),d=s(t,i);f+1e-8<d&&(t=l)}return t}function DL(i,n){n=n||{};var t=n.restarts||10,s=[],l={},f;for(f=0;f<i.length;++f){var d=i[f];d.sets.length==1&&(l[d.sets[0]]=s.length,s.push(d))}var m=uS(i,s,l),x=m.distances,A=m.constraints,P=(0,Xp.norm2)(x.map(Xp.norm2))/x.length;x=x.map(function($e){return $e.map(function(lt){return lt/P})});var k=function($e,lt){return LM($e,lt,x,A)},B,U;for(f=0;f<t;++f){var W=(0,Xp.zeros)(x.length*2).map(Math.random);U=(0,Xp.conjugateGradient)(k,W,n),(!B||U.fx<B.fx)&&(B=U)}var ne=B.x,de={};for(f=0;f<s.length;++f){var ve=s[f];de[ve.sets[0]]={x:ne[2*f]*P,y:ne[2*f+1]*P,radius:Math.sqrt(ve.size/Math.PI)}}if(n.history)for(f=0;f<n.history.length;++f)(0,Xp.scale)(n.history[f].x,P);return de}function BM(i,n){for(var t=n&&n.lossFunction?n.lossFunction:tm,s={},l={},f,d=0;d<i.length;++d){var m=i[d];m.sets.length==1&&(f=m.sets[0],s[f]={x:1e10,y:1e10,rowid:Object.keys(s).length,size:m.size,radius:Math.sqrt(m.size/Math.PI)},l[f]=[])}i=i.filter(function(Nn){return Nn.sets.length==2});for(var d=0;d<i.length;++d){var x=i[d],A=x.hasOwnProperty("weight")?x.weight:1,P=x.sets[0],k=x.sets[1];x.size+oS>=Math.min(s[P].size,s[k].size)&&(A=0),l[P].push({set:k,size:x.size,weight:A}),l[k].push({set:P,size:x.size,weight:A})}var B=[];for(f in l)if(l.hasOwnProperty(f)){for(var U=0,d=0;d<l[f].length;++d)U+=l[f][d].size*l[f][d].weight;B.push({set:f,size:U})}function W(Nn,Di){return Di.size-Nn.size}B.sort(W);var ne={};function de(Nn){return Nn.set in ne}function ve(Nn,Di){s[Di].x=Nn.x,s[Di].y=Nn.y,ne[Di]=!0}ve({x:0,y:0},B[0].set);for(var d=1;d<B.length;++d){var $e=B[d].set,lt=l[$e].filter(de);if(f=s[$e],lt.sort(W),lt.length===0)throw"ERROR: missing pairwise overlap information";for(var vt=[],Ot=0;Ot<lt.length;++Ot){var fr=s[lt[Ot].set],Tr=sS(f.radius,fr.radius,lt[Ot].size);vt.push({x:fr.x+Tr,y:fr.y}),vt.push({x:fr.x-Tr,y:fr.y}),vt.push({y:fr.y+Tr,x:fr.x}),vt.push({y:fr.y-Tr,x:fr.x});for(var zr=Ot+1;zr<lt.length;++zr)for(var cn=s[lt[zr].set],Qr=sS(f.radius,cn.radius,lt[zr].size),On=nS({x:fr.x,y:fr.y,radius:Tr},{x:cn.x,y:cn.y,radius:Qr}),Qn=0;Qn<On.length;++Qn)vt.push(On[Qn])}for(var Hi=1e50,oa=vt[0],Ot=0;Ot<vt.length;++Ot){s[$e].x=vt[Ot].x,s[$e].y=vt[Ot].y;var eo=t(s,i);eo<Hi&&(Hi=eo,oa=vt[Ot])}ve(oa,$e)}return s}function tm(i,n){var t=0;function s(P){return P.map(function(k){return i[k]})}for(var l=0;l<n.length;++l){var f=n[l],d=void 0;if(f.sets.length!=1){if(f.sets.length==2){var m=i[f.sets[0]],x=i[f.sets[1]];d=tg(m.radius,x.radius,np(m,x))}else d=G1(s(f.sets));var A=f.hasOwnProperty("weight")?f.weight:1;t+=A*(d-f.size)*(d-f.size)}}return t}function K1(i,n,t){t===null?i.sort(function(ne,de){return de.radius-ne.radius}):i.sort(t);var s;if(i.length>0){var l=i[0].x,f=i[0].y;for(s=0;s<i.length;++s)i[s].x-=l,i[s].y-=f}if(i.length==2){var d=distance(i[0],i[1]);d<Math.abs(i[1].radius-i[0].radius)&&(i[1].x=i[0].x+i[0].radius-i[1].radius-1e-10,i[1].y=i[0].y)}if(i.length>1){var m=Math.atan2(i[1].x,i[1].y)-n,x=void 0,A=void 0,P=Math.cos(m),k=Math.sin(m);for(s=0;s<i.length;++s)x=i[s].x,A=i[s].y,i[s].x=P*x-k*A,i[s].y=k*x+P*A}if(i.length>2){for(var B=Math.atan2(i[2].x,i[2].y)-n;B<0;)B+=2*Math.PI;for(;B>2*Math.PI;)B-=2*Math.PI;if(B>Math.PI){var U=i[1].y/(1e-10+i[1].x);for(s=0;s<i.length;++s){var W=(i[s].x+U*i[s].y)/(1+U*U);i[s].x=2*W-i[s].x,i[s].y=2*W*U-i[s].y}}}}function HB(i){i.map(function(A){A.parent=A});function n(A){return A.parent!==A&&(A.parent=n(A.parent)),A.parent}function t(A,P){var k=n(A),B=n(P);k.parent=B}for(var s=0;s<i.length;++s)for(var l=s+1;l<i.length;++l){var f=i[s].radius+i[l].radius;distance(i[s],i[l])+1e-10<f&&t(i[l],i[s])}for(var d={},m,s=0;s<i.length;++s)m=n(i[s]).parent.setid,m in d||(d[m]=[]),d[m].push(i[s]);i.map(function(A){delete A.parent});var x=[];for(m in d)d.hasOwnProperty(m)&&x.push(d[m]);return x}function NM(i){var n=function(t){var s=Math.max.apply(null,i.map(function(f){return f[t]+f.radius})),l=Math.min.apply(null,i.map(function(f){return f[t]-f.radius}));return{max:s,min:l}};return{xRange:n("x"),yRange:n("y")}}function m0(i,n,t){n===null&&(n=Math.PI/2);var s=[],l,f;for(f in i)if(i.hasOwnProperty(f)){var d=i[f];s.push({x:d.x,y:d.y,radius:d.radius,setid:f})}var m=HB(s);for(l=0;l<m.length;++l){K1(m[l],n,t);var x=NM(m[l]);m[l].size=(x.xRange.max-x.xRange.min)*(x.yRange.max-x.yRange.min),m[l].bounds=x}m.sort(function(W,ne){return ne.size-W.size}),s=m[0];var A=s.bounds,P=(A.xRange.max-A.xRange.min)/50;function k(W,ne,de){if(W){var ve=W.bounds,$e,lt,vt;ne?$e=A.xRange.max-ve.xRange.min+P:($e=A.xRange.max-ve.xRange.max,vt=(ve.xRange.max-ve.xRange.min)/2-(A.xRange.max-A.xRange.min)/2,vt<0&&($e+=vt)),de?lt=A.yRange.max-ve.yRange.min+P:(lt=A.yRange.max-ve.yRange.max,vt=(ve.yRange.max-ve.yRange.min)/2-(A.yRange.max-A.yRange.min)/2,vt<0&&(lt+=vt));for(var Ot=0;Ot<W.length;++Ot)W[Ot].x+=$e,W[Ot].y+=lt,s.push(W[Ot])}}for(var B=1;B<m.length;)k(m[B],!0,!1),k(m[B+1],!1,!0),k(m[B+2],!0,!0),B+=3,A=NM(s);var U={};for(l=0;l<s.length;++l)U[s[l].setid]=s[l];return U}function $p(i,n,t,s){var l=[],f=[];for(var d in i)i.hasOwnProperty(d)&&(f.push(d),l.push(i[d]));n-=2*s,t-=2*s;var m=NM(l),x=m.xRange,A=m.yRange;if(x.max==x.min||A.max==A.min)return console.log("not scaling solution: zero size detected"),i;for(var P=n/(x.max-x.min),k=t/(A.max-A.min),B=Math.min(k,P),U=(n-(x.max-x.min)*B)/2,W=(t-(A.max-A.min)*B)/2,ne={},de=0;de<l.length;++de){var ve=l[de];ne[f[de]]={radius:B*ve.radius,x:s+U+(ve.x-x.min)*B,y:s+W+(ve.y-A.min)*B}}return ne}var zM=(0,E.HP)(function(i,n,t,s){var l=new Map,f=i.length;return n.forEach(function(d,m){if(d[s].length===1)l.set(d[fv],i[(m+f)%f]);else{var x=d[s].map(function(A){return l.get(A)});l.set(d[fv],x.slice(1).reduce(function(A,P){return RM(A,P,t)},x[0]))}}),l},function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return JSON.stringify(i)});function hv(i,n,t,s){s===void 0&&(s=0);var l=i.data,f=i.setsField,d=i.sizeField;if(l.length===0)return Ad(jp.WARN,!1,"warn: %s","\u6570\u636E\u4E0D\u80FD\u4E3A\u7A7A"),[];var m=l.map(function(k){var B;return(0,M.pi)((0,M.pi)({},k),(B={sets:k[f]||[],size:k[d]},B[Yy]="",B[fv]="",B))});m.sort(function(k,B){return k.sets.length-B.sets.length});var x=FM(m),A=$p(x,n,t,s),P=OL(A,m);return m.forEach(function(k){var B=k.sets,U=B.join(",");k[fv]=U;var W=B.map(function(ve){return A[ve]}),ne=FL(W);/[zZ]$/.test(ne)||(ne+=" Z"),k[Yy]=ne;var de=P[U]||{x:0,y:0};(0,E.f0)(k,de)}),m}function UM(i,n){for(var t=0;t<n.length;t++)if(!i.includes(n[t]))return!1;return!0}var lS=40;function q1(i,n,t){var s=i.chart,l=i.options,f=l.blendMode,d=l.setsField,m=s.getTheme(),x=m.colors10,A=m.colors20,P=t;(0,E.kJ)(P)||(P=n.filter(function(B){return B[d].length===1}).length<=10?x:A);var k=zM(P,n,f,d);return function(B){return k.get(B)||P[0]}}function LL(i,n){var t=i.options,s=t.color;if(typeof s!="function"){var l=typeof s=="string"?[s]:s,f=q1(i,n,l);return function(d){return f(d[fv])}}return s}function ZM(i){var n=i.chart,t=i.options,s=t.legend,l=t.appendPadding,f=t.padding,d=ov(l);return s!==!1&&(d=t1(l,(0,E.U2)(s,"position"),lS)),n.appendPadding=$f([d,f]),i}function BL(i){var n=i.options,t=n.data;t||(Ad(jp.WARN,!1,"warn: %s","\u6570\u636E\u4E0D\u80FD\u4E3A\u7A7A"),t=[]);var s=t.filter(function(f){return f.sets.length===1}).map(function(f){return f.sets[0]}),l=t.filter(function(f){var d=f.sets;return UM(s,d)});return(0,E.Xy)(l,t)||Ad(jp.WARN,!1,"warn: %s","\u4EA4\u96C6\u4E2D\u4E0D\u80FD\u51FA\u73B0\u4E0D\u5B58\u5728\u7684\u96C6\u5408, \u8BF7\u8F93\u5165\u5408\u6CD5\u6570\u636E"),(0,E.b$)({},i,{options:{data:l}})}function Q1(i){var n=i.chart,t=i.options,s=t.pointStyle,l=t.setsField,f=t.sizeField,d=ov(n.appendPadding),m=d[0],x=d[1],A=d[2],P=d[3],k={offsetX:P,offsetY:m},B=n.viewBBox,U=B.width,W=B.height,ne=hv(t,Math.max(U-(x+P),0),Math.max(W-(m+A),0),0);n.data(ne);var de=Gb(vn({},i,{options:{xField:"x",yField:"y",sizeField:f,seriesField:fv,rawFields:[l,f],schema:{shape:"venn",style:s}}})).ext,ve=de.geometry;ve.customInfo(k);var $e=LL(i,ne);return typeof $e=="function"&&ve.color(fv,function(lt){var vt=ne.find(function(fr){return fr[fv]===lt}),Ot=q1(i,ne)(lt);return $e(vt,Ot)}),i}function cS(i){var n=i.chart,t=i.options,s=t.label,l=ov(n.appendPadding),f=l[0],d=l[3],m={offsetX:d,offsetY:f},x=yl(n,"schema");if(!s)x.label(!1);else{var A=s.callback,P=(0,M._T)(s,["callback"]);x.label({fields:["id"],callback:A,cfg:(0,E.b$)({},Dl(P),{type:"venn",customLabelInfo:m})})}return i}function jB(i){var n=i.chart,t=i.options,s=t.legend,l=t.sizeField;return n.legend(fv,s),n.legend(l,!1),i}function VM(i){var n=i.chart;return n.axis(!1),i}function WB(i){var n=i.options,t=i.chart,s=n.interactions;if(s){var l={"legend-active":"venn-legend-active","legend-highlight":"venn-legend-highlight"};_u(vn({},i,{options:{interactions:s.map(function(f){return(0,M.pi)((0,M.pi)({},f),{type:l[f.type]||f.type})})}}))}return t.removeInteraction("legend-active"),t.removeInteraction("legend-highlight"),i}function NL(i){return Aa(ZM,Lo,BL,Q1,cS,Uu({}),jB,VM,Ll,WB,ls)(i)}var GB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="venn",t}return n.getDefaultOptions=function(){return uL},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return NL},n.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},n}(Ta),ip="x",rm="violinY",HM="violinSize",fS="minMax",jM="quantile",WM="median",qy="violin_view",hS="min_max_view",GM="quantile_view",XM="median_view",zL=vn({},Ta.getDefaultOptions(),{syncViewPadding:!0,kde:{type:"triangular",sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:"top-left"},tooltip:{showMarkers:!1}}),UL=F(53843),$M=F.n(UL);function pS(i,n){var t=i.length*n;if(i.length===0)throw new Error("quantile requires at least one data point.");if(n<0||n>1)throw new Error("quantiles must be between 0 and 1");return n===1?i[i.length-1]:n===0?i[0]:t%1!==0?i[Math.ceil(t)-1]:i.length%2===0?(i[t-1]+i[t])/2:i[t]}function y0(i,n,t){var s=i[n];i[n]=i[t],i[t]=s}function Qy(i,n,t,s){for(t=t||0,s=s||i.length-1;s>t;){if(s-t>600){var l=s-t+1,f=n-t+1,d=Math.log(l),m=.5*Math.exp(2*d/3),x=.5*Math.sqrt(d*m*(l-m)/l);f-l/2<0&&(x*=-1);var A=Math.max(t,Math.floor(n-f*m/l+x)),P=Math.min(s,Math.floor(n+(l-f)*m/l+x));Qy(i,n,A,P)}var k=i[n],B=t,U=s;for(y0(i,t,n),i[s]>k&&y0(i,t,s);B<U;){for(y0(i,B,U),B++,U--;i[B]<k;)B++;for(;i[U]>k;)U--}i[t]===k?y0(i,t,U):(U++,y0(i,U,s)),U<=n&&(t=U+1),n<=U&&(s=U-1)}}function _0(i,n){var t=i.slice();if(Array.isArray(n)){x0(t,n);for(var s=[],l=0;l<n.length;l++)s[l]=pS(t,n[l]);return s}else{var f=vS(t.length,n);return dS(t,f,0,t.length-1),pS(t,n)}}function dS(i,n,t,s){n%1===0?Qy(i,n,t,s):(n=Math.floor(n),Qy(i,n,t,s),Qy(i,n+1,n+1,s))}function x0(i,n){for(var t=[0],s=0;s<n.length;s++)t.push(vS(i.length,n[s]));t.push(i.length-1),t.sort(YM);for(var l=[0,t.length-1];l.length;){var f=Math.ceil(l.pop()),d=Math.floor(l.pop());if(!(f-d<=1)){var m=Math.floor((d+f)/2);dS(i,t[m],Math.floor(t[d]),Math.ceil(t[f])),l.push(d,m,m,f)}}}function YM(i,n){return i-n}function vS(i,n){var t=i*n;return n===1?i-1:n===0?0:t%1!==0?Math.ceil(t)-1:i%2===0?t-.5:t}var gS=function(i){return{low:(0,E.VV)(i),high:(0,E.Fp)(i),q1:_0(i,.25),q3:_0(i,.75),median:_0(i,[.5]),minMax:[(0,E.VV)(i),(0,E.Fp)(i)],quantile:[_0(i,.25),_0(i,.75)]}},mS=function(i,n){var t=$M().create(i,n);return{violinSize:t.map(function(s){return s.y}),violinY:t.map(function(s){return s.x})}},KM=function(i){var n=i.xField,t=i.yField,s=i.seriesField,l=i.data,f=i.kde,d={min:f.min,max:f.max,size:f.sampleSize,width:f.width};if(!s){var m=(0,E.vM)(l,n);return Object.keys(m).map(function(P){var k=m[P],B=k.map(function(U){return U[t]});return(0,M.pi)((0,M.pi)({x:P},mS(B,d)),gS(B))})}var x=[],A=(0,E.vM)(l,s);return Object.keys(A).forEach(function(P){var k=(0,E.vM)(A[P],n);return Object.keys(k).forEach(function(B){var U,W=k[B],ne=W.map(function(de){return de[t]});x.push((0,M.pi)((0,M.pi)((U={x:B},U[s]=P,U),mS(ne,d)),gS(ne)))})}),x},J1=["low","high","q1","q3","median"],ex=[{type:"dodge",marginRatio:1/32}];function qM(i){var n=i.chart,t=i.options;return n.data(KM(t)),i}function ZL(i){var n=i.chart,t=i.options,s=t.seriesField,l=t.color,f=t.shape,d=f===void 0?"violin":f,m=t.violinStyle,x=t.tooltip,A=t.state,P=n.createView({id:qy});return iO({chart:P,options:{xField:ip,yField:rm,seriesField:s||ip,sizeField:HM,tooltip:(0,M.pi)({fields:J1},x),violin:{style:m,color:l,shape:d},state:A}}),P.geometries[0].adjust(ex),i}function QM(i){var n=i.chart,t=i.options,s=t.seriesField,l=t.color,f=t.tooltip,d=t.box;if(d===!1)return i;var m=n.createView({id:hS});Uc({chart:m,options:{xField:ip,yField:fS,seriesField:s||ip,tooltip:(0,M.pi)({fields:J1},f),state:typeof d=="object"?d.state:{},interval:{color:l,size:1,style:{lineWidth:0}}}}),m.geometries[0].adjust(ex);var x=n.createView({id:GM});Uc({chart:x,options:{xField:ip,yField:jM,seriesField:s||ip,tooltip:(0,M.pi)({fields:J1},f),state:typeof d=="object"?d.state:{},interval:{color:l,size:8,style:{fillOpacity:1}}}}),x.geometries[0].adjust(ex);var A=n.createView({id:XM});return wh({chart:A,options:{xField:ip,yField:WM,seriesField:s||ip,tooltip:(0,M.pi)({fields:J1},f),state:typeof d=="object"?d.state:{},point:{color:l,size:1,style:{fill:"white",lineWidth:0}}}}),A.geometries[0].adjust(ex),x.axis(!1),m.axis(!1),A.axis(!1),A.legend(!1),m.legend(!1),x.legend(!1),i}function VL(i){var n,t=i.chart,s=i.options,l=s.meta,f=s.xAxis,d=s.yAxis,m={},x=vn(m,l,(n={},n[ip]=(0,M.pi)((0,M.pi)({sync:!0},es(f,Sf)),{type:"cat"}),n[rm]=(0,M.pi)({sync:!0},es(d,Sf)),n[fS]=(0,M.pi)({sync:rm},es(d,Sf)),n[jM]=(0,M.pi)({sync:rm},es(d,Sf)),n[WM]=(0,M.pi)({sync:rm},es(d,Sf)),n));return t.scale(x),i}function HL(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis,f=ho(n,qy);return s===!1?f.axis(ip,!1):f.axis(ip,s),l===!1?f.axis(rm,!1):f.axis(rm,l),n.axis(!1),i}function yS(i){var n=i.chart,t=i.options,s=t.legend,l=t.seriesField,f=t.shape;if(s===!1)n.legend(!1);else{var d=l||ip,m=(0,E.CE)(s,["selected"]);(!f||!f.startsWith("hollow"))&&((0,E.U2)(m,["marker","style","lineWidth"])||(0,E.t8)(m,["marker","style","lineWidth"],0)),n.legend(d,m),(0,E.U2)(s,"selected")&&(0,E.S6)(n.views,function(x){return x.legend(d,s)})}return i}function tx(i){var n=i.chart,t=ho(n,qy);return xu()((0,M.pi)((0,M.pi)({},i),{chart:t})),i}function jL(i){var n=i.chart,t=i.options,s=t.animation;return(0,E.S6)(n.views,function(l){Ey(l,s)}),i}function JM(i){return Aa(Lo,qM,ZL,QM,VL,Ll,HL,yS,_u,tx,jL)(i)}var Rd=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="violin",t}return n.getDefaultOptions=function(){return zL},n.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(KM(this.options))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return JM},n}(Ta),Zu="$$yField$$",ap="$$diffField$$",_S="$$absoluteField$$",xS="$$isTotal$$",WL={label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function GL(i){for(var n=[],t=0;t<i.length;t++){var s=i[t];if(s){var l=t===0?"M":"L";n.push([l,s.x,s.y])}}var f=i[0];return n.push(["L",f.x,f.y]),n.push(["z"]),n}function XL(i){return vn({},i.defaultStyle,i.style,{fill:i.color})}fi("interval","waterfall",{draw:function(i,n){var t=i.customInfo,s=i.points,l=i.nextPoints,f=n.addGroup(),d=this.parsePath(GL(s)),m=XL(i);f.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},m),{path:d})});var x=(0,E.U2)(t,"leaderLine");if(x&&l){var A=[["M",s[2].x,s[2].y],["L",l[0].x,l[0].y]];s[2].y===l[1].y&&(A[1]=["L",l[1].x,l[1].y]),A=this.parsePath(A),f.addShape("path",{attrs:(0,M.pi)({path:A},x.style||{})})}return f}});function e3(i,n,t,s,l){var f,d=[];if((0,E.u4)(i,function(x,A){var P;Ad(jp.WARN,(0,E.hj)(A[t]),"".concat(A[t]," is not a valid number"));var k=(0,E.o8)(A[t])?null:A[t];return d.push((0,M.pi)((0,M.pi)({},A),(P={},P[s]=[x,x+k],P))),x+k},0),d.length&&l){var m=(0,E.U2)(d,[[i.length-1],s,[1]]);d.push((f={},f[n]=l.label,f[t]=m,f[s]=[0,m],f))}return d}function t3(i,n,t,s){var l=e3(i,n,t,Zu,s);return l.map(function(f,d){var m;return(0,E.Kn)(f)?(0,M.pi)((0,M.pi)({},f),(m={},m[_S]=f[Zu][1],m[ap]=f[Zu][1]-f[Zu][0],m[xS]=d===i.length,m)):f})}function $L(i){var n=i.options,t=n.locale,s=n.total,l=Wb(t).get(["waterfall","total"]);return s&&typeof s.label!="string"&&l&&(i.options.total.label=l),i}function r3(i){var n=i.chart,t=i.options,s=t.data,l=t.xField,f=t.yField,d=t.total,m=t.leaderLine,x=t.columnWidthRatio,A=t.waterfallStyle,P=t.risingFill,k=t.fallingFill,B=t.color,U=t.shape,W=t.customInfo;n.data(t3(s,l,f,d));var ne=B||function(lt){return(0,E.U2)(lt,[xS])?(0,E.U2)(d,["style","fill"],""):(0,E.U2)(lt,[Zu,1])-(0,E.U2)(lt,[Zu,0])>0?P:k},de=vn({},i,{options:{xField:l,yField:Zu,seriesField:l,rawFields:[f,ap,xS,Zu],widthRatio:x,interval:{style:A,shape:U||"waterfall",color:ne}}}),ve=Uc(de).ext,$e=ve.geometry;return $e.customInfo((0,M.pi)((0,M.pi)({},W),{leaderLine:m})),i}function n3(i){var n,t,s=i.options,l=s.xAxis,f=s.yAxis,d=s.xField,m=s.yField,x=s.meta,A=vn({},{alias:m},(0,E.U2)(x,m));return Aa(Uu((n={},n[d]=l,n[m]=f,n[Zu]=f,n),vn({},x,(t={},t[Zu]=A,t[ap]=A,t[_S]=A,t))))(i)}function YL(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return s===!1?n.axis(f,!1):n.axis(f,s),l===!1?(n.axis(d,!1),n.axis(Zu,!1)):(n.axis(d,l),n.axis(Zu,l)),i}function KL(i){var n=i.chart,t=i.options,s=t.legend,l=t.total,f=t.risingFill,d=t.fallingFill,m=t.locale,x=Wb(m);if(s===!1)n.legend(!1);else{var A=[{name:x.get(["general","increase"]),value:"increase",marker:{symbol:"square",style:{r:5,fill:f}}},{name:x.get(["general","decrease"]),value:"decrease",marker:{symbol:"square",style:{r:5,fill:d}}}];l&&A.push({name:l.label||"",value:"total",marker:{symbol:"square",style:vn({},{r:5},(0,E.U2)(l,"style"))}}),n.legend(vn({},{custom:!0,position:"top",items:A},s)),n.removeInteraction("legend-filter")}return i}function i3(i){var n=i.chart,t=i.options,s=t.label,l=t.labelMode,f=t.xField,d=yl(n,"interval");if(!s)d.label(!1);else{var m=s.callback,x=(0,M._T)(s,["callback"]);d.label({fields:l==="absolute"?[_S,f]:[ap,f],callback:m,cfg:Dl(x)})}return i}function qL(i){var n=i.chart,t=i.options,s=t.tooltip,l=t.xField,f=t.yField;if(s!==!1){n.tooltip((0,M.pi)({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[f]},s));var d=n.geometries[0];s!=null&&s.formatter?d.tooltip("".concat(l,"*").concat(f),s.formatter):d.tooltip(f)}else n.tooltip(!1);return i}function bS(i){return Aa($L,Lo,r3,n3,YL,KL,qL,i3,Bg,_u,ls,xu())(i)}var SS=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="waterfall",t}return n.getDefaultOptions=function(){return WL},n.prototype.changeData=function(t){var s=this.options,l=s.xField,f=s.yField,d=s.total;this.updateOption({data:t}),this.chart.changeData(t3(t,l,f,d))},n.prototype.getSchemaAdaptor=function(){return bS},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n}(Ta),ES="color",QL=vn({},Ta.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value",ES],formatter:function(i){return{name:i.text,value:i.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}}),JL={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function e5(i,n){return n=(0,E.f0)({},JL,n),t5(i,n)}function t5(i,n){var t=u5();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach(function(x){(0,E.UM)(n[x])||t[x](n[x])}),t.words(i),n.imageMask&&t.createMask(n.imageMask);var s=t.start(),l=s._tags;l.forEach(function(x){x.x+=n.size[0]/2,x.y+=n.size[1]/2});var f=n.size,d=f[0],m=f[1];return l.push({text:"",value:0,x:0,y:0,opacity:0}),l.push({text:"",value:0,x:d,y:m,opacity:0}),l}var wS=Math.PI/180,Jy=64,e_=2048;function a3(i){return i.text}function r5(){return"serif"}function o3(){return"normal"}function n5(i){return i.value}function s3(){return~~(Math.random()*2)*90}function u3(){return 1}function l3(i,n,t,s){if(!n.sprite){var l=i.context,f=i.ratio;l.clearRect(0,0,(Jy<<5)/f,e_/f);var d=0,m=0,x=0,A=t.length;for(--s;++s<A;){n=t[s],l.save(),l.font=n.style+" "+n.weight+" "+~~((n.size+1)/f)+"px "+n.font;var P=l.measureText(n.text+"m").width*f,k=n.size<<1;if(n.rotate){var B=Math.sin(n.rotate*wS),U=Math.cos(n.rotate*wS),W=P*U,ne=P*B,de=k*U,ve=k*B;P=Math.max(Math.abs(W+ve),Math.abs(W-ve))+31>>5<<5,k=~~Math.max(Math.abs(ne+de),Math.abs(ne-de))}else P=P+31>>5<<5;if(k>x&&(x=k),d+P>=Jy<<5&&(d=0,m+=x,x=0),m+k>=e_)break;l.translate((d+(P>>1))/f,(m+(k>>1))/f),n.rotate&&l.rotate(n.rotate*wS),l.fillText(n.text,0,0),n.padding&&(l.lineWidth=2*n.padding,l.strokeText(n.text,0,0)),l.restore(),n.width=P,n.height=k,n.xoff=d,n.yoff=m,n.x1=P>>1,n.y1=k>>1,n.x0=-n.x1,n.y0=-n.y1,n.hasText=!0,d+=P}for(var $e=l.getImageData(0,0,(Jy<<5)/f,e_/f).data,lt=[];--s>=0;)if(n=t[s],!!n.hasText){for(var P=n.width,vt=P>>5,k=n.y1-n.y0,Ot=0;Ot<k*vt;Ot++)lt[Ot]=0;if(d=n.xoff,d==null)return;m=n.yoff;for(var fr=0,Tr=-1,zr=0;zr<k;zr++){for(var Ot=0;Ot<P;Ot++){var cn=vt*zr+(Ot>>5),Qr=$e[(m+zr)*(Jy<<5)+(d+Ot)<<2]?1<<31-Ot%32:0;lt[cn]|=Qr,fr|=Qr}fr?Tr=zr:(n.y0++,k--,zr--,m++)}n.y1=n.y0+Tr,n.sprite=lt.slice(0,(n.y1-n.y0)*vt)}}}function XB(i,n,t){t>>=5;for(var s=i.sprite,l=i.width>>5,f=i.x-(l<<4),d=f&127,m=32-d,x=i.y1-i.y0,A=(i.y+i.y0)*t+(f>>5),P,k=0;k<x;k++){P=0;for(var B=0;B<=l;B++)if((P<<m|(B<l?(P=s[k*l+B])>>>d:0))&n[A+B])return!0;A+=t}return!1}function $B(i,n){var t=i[0],s=i[1];n.x+n.x0<t.x&&(t.x=n.x+n.x0),n.y+n.y0<t.y&&(t.y=n.y+n.y0),n.x+n.x1>s.x&&(s.x=n.x+n.x1),n.y+n.y1>s.y&&(s.y=n.y+n.y1)}function i5(i,n){return i.x+i.x1>n[0].x&&i.x+i.x0<n[1].x&&i.y+i.y1>n[0].y&&i.y+i.y0<n[1].y}function c3(i){var n=i[0]/i[1];return function(t){return[n*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function a5(i){var n=4,t=n*i[0]/i[1],s=0,l=0;return function(f){var d=f<0?-1:1;switch(Math.sqrt(1+4*d*f)-d&3){case 0:s+=t;break;case 1:l+=n;break;case 2:s-=t;break;default:l-=n;break}return[s,l]}}function CS(i){for(var n=[],t=-1;++t<i;)n[t]=0;return n}function o5(){return document.createElement("canvas")}function Id(i){return(0,E.mf)(i)?i:function(){return i}}var s5={archimedean:c3,rectangular:a5};function u5(){var i=[256,256],n=r5,t=n5,s=o3,l=s3,f=u3,d=c3,m=Math.random,x=[],A=1/0,P=a3,k=o3,B=o5,U={};U.start=function(){var de=i[0],ve=i[1],$e=W(B()),lt=U.board?U.board:CS((i[0]>>5)*i[1]),vt=x.length,Ot=[],fr=x.map(function(Qr,On,Qn){return Qr.text=P.call(this,Qr,On,Qn),Qr.font=n.call(this,Qr,On,Qn),Qr.style=k.call(this,Qr,On,Qn),Qr.weight=s.call(this,Qr,On,Qn),Qr.rotate=l.call(this,Qr,On,Qn),Qr.size=~~t.call(this,Qr,On,Qn),Qr.padding=f.call(this,Qr,On,Qn),Qr}).sort(function(Qr,On){return On.size-Qr.size}),Tr=-1,zr=U.board?[{x:0,y:0},{x:de,y:ve}]:null;cn();function cn(){for(var Qr=Date.now();Date.now()-Qr<A&&++Tr<vt;){var On=fr[Tr];On.x=de*(m()+.5)>>1,On.y=ve*(m()+.5)>>1,l3($e,On,fr,Tr),On.hasText&&ne(lt,On,zr)&&(Ot.push(On),zr?U.hasImage||$B(zr,On):zr=[{x:On.x+On.x0,y:On.y+On.y0},{x:On.x+On.x1,y:On.y+On.y1}],On.x-=i[0]>>1,On.y-=i[1]>>1)}U._tags=Ot,U._bounds=zr}return U};function W(de){de.width=de.height=1;var ve=Math.sqrt(de.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,1,1).data.length>>2);de.width=(Jy<<5)/ve,de.height=e_/ve;var $e=de.getContext("2d",{willReadFrequently:!0});return $e.fillStyle=$e.strokeStyle="red",$e.textAlign="center",{context:$e,ratio:ve}}function ne(de,ve,$e){for(var lt=ve.x,vt=ve.y,Ot=Math.sqrt(i[0]*i[0]+i[1]*i[1]),fr=d(i),Tr=m()<.5?1:-1,zr,cn=-Tr,Qr,On;(zr=fr(cn+=Tr))&&(Qr=~~zr[0],On=~~zr[1],!(Math.min(Math.abs(Qr),Math.abs(On))>=Ot));)if(ve.x=lt+Qr,ve.y=vt+On,!(ve.x+ve.x0<0||ve.y+ve.y0<0||ve.x+ve.x1>i[0]||ve.y+ve.y1>i[1])&&(!$e||!XB(ve,de,i[0]))&&(!$e||i5(ve,$e))){for(var Qn=ve.sprite,Hi=ve.width>>5,oa=i[0]>>5,eo=ve.x-(Hi<<4),Nn=eo&127,Di=32-Nn,sa=ve.y1-ve.y0,Li=void 0,$i=(ve.y+ve.y0)*oa+(eo>>5),Da=0;Da<sa;Da++){Li=0;for(var xo=0;xo<=Hi;xo++)de[$i+xo]|=Li<<Di|(xo<Hi?(Li=Qn[Da*Hi+xo])>>>Nn:0);$i+=oa}return delete ve.sprite,!0}return!1}return U.createMask=function(de){var ve=document.createElement("canvas"),$e=i[0],lt=i[1];if(!(!$e||!lt)){var vt=$e>>5,Ot=CS(($e>>5)*lt);ve.width=$e,ve.height=lt;var fr=ve.getContext("2d");fr.drawImage(de,0,0,de.width,de.height,0,0,$e,lt);for(var Tr=fr.getImageData(0,0,$e,lt).data,zr=0;zr<lt;zr++)for(var cn=0;cn<$e;cn++){var Qr=vt*zr+(cn>>5),On=zr*$e+cn<<2,Qn=Tr[On]>=250&&Tr[On+1]>=250&&Tr[On+2]>=250,Hi=Qn?1<<31-cn%32:0;Ot[Qr]|=Hi}U.board=Ot,U.hasImage=!0}},U.timeInterval=function(de){A=de==null?1/0:de},U.words=function(de){x=de},U.size=function(de){i=[+de[0],+de[1]]},U.font=function(de){n=Id(de)},U.fontWeight=function(de){s=Id(de)},U.rotate=function(de){l=Id(de)},U.spiral=function(de){d=s5[de]||de},U.fontSize=function(de){t=Id(de)},U.padding=function(de){f=Id(de)},U.random=function(de){m=Id(de)},U}function AS(i){var n=i.options,t=i.chart,s=t,l=s.width,f=s.height,d=s.padding,m=s.appendPadding,x=s.ele,A=n.data,P=n.imageMask,k=n.wordField,B=n.weightField,U=n.colorField,W=n.wordStyle,ne=n.timeInterval,de=n.random,ve=n.spiral,$e=n.autoFit,lt=$e===void 0?!0:$e,vt=n.placementStrategy;if(!A||!A.length)return[];var Ot=W.fontFamily,fr=W.fontWeight,Tr=W.padding,zr=W.fontSize,cn=RS(A,B),Qr=[l5(cn),rg(cn)],On=A.map(function(oa){return{text:oa[k],value:oa[B],color:oa[U],datum:oa}}),Qn={imageMask:P,font:Ot,fontSize:op(zr,Qr),fontWeight:fr,size:TS({width:l,height:f,padding:d,appendPadding:m,autoFit:lt,container:x}),padding:Tr,timeInterval:ne,random:de,spiral:ve,rotate:IS(n)};if((0,E.mf)(vt)){var Hi=On.map(function(oa,eo,Nn){return(0,M.pi)((0,M.pi)((0,M.pi)({},oa),{hasText:!!oa.text,font:Id(Qn.font)(oa,eo,Nn),weight:Id(Qn.fontWeight)(oa,eo,Nn),rotate:Id(Qn.rotate)(oa,eo,Nn),size:Id(Qn.fontSize)(oa,eo,Nn),style:"normal"}),vt.call(t,oa,eo,Nn))});return Hi.push({text:"",value:0,x:0,y:0,opacity:0}),Hi.push({text:"",value:0,x:Qn.size[0],y:Qn.size[1],opacity:0}),Hi}return e5(On,Qn)}function TS(i){var n=i.width,t=i.height,s=i.container,l=i.autoFit,f=i.padding,d=i.appendPadding;if(l){var m=ml(s);n=m.width,t=m.height}n=n||400,t=t||400;var x=MS({padding:f,appendPadding:d}),A=x[0],P=x[1],k=x[2],B=x[3],U=[n-(B+P),t-(A+k)];return U}function MS(i){var n=ov(i.padding),t=ov(i.appendPadding),s=n[0]+t[0],l=n[1]+t[1],f=n[2]+t[2],d=n[3]+t[3];return[s,l,f,d]}function pv(i){return new Promise(function(n,t){if(i instanceof HTMLImageElement){n(i);return}if((0,E.HD)(i)){var s=new Image;s.crossOrigin="anonymous",s.src=i,s.onload=function(){n(s)},s.onerror=function(){Ad(jp.ERROR,!1,"image %s load failed !!!",i),t()};return}Ad(jp.WARN,i===void 0,"The type of imageMask option must be String or HTMLImageElement."),t()})}function op(i,n){if((0,E.mf)(i))return i;if((0,E.kJ)(i)){var t=i[0],s=i[1];if(!n)return function(){return(s+t)/2};var l=n[0],f=n[1];return f===l?function(){return(s+t)/2}:function(m){var x=m.value;return(s-t)/(f-l)*(x-l)+t}}return function(){return i}}function RS(i,n){return i.map(function(t){return t[n]}).filter(function(t){return typeof t=="number"&&!isNaN(t)})}function IS(i){var n=f3(i),t=n.rotation,s=n.rotationSteps;if(!(0,E.kJ)(t))return t;var l=t[0],f=t[1],d=s===1?0:(f-l)/(s-1);return function(){return f===l?f:Math.floor(Math.random()*s)*d}}function f3(i){var n=i.wordStyle.rotationSteps;return n<1&&(Ad(jp.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),n=1),{rotation:i.wordStyle.rotation,rotationSteps:n}}function l5(i){return Math.min.apply(Math,i)}function rg(i){return Math.max.apply(Math,i)}function c5(i){var n=i.chart,t=i.options,s=t.colorField,l=t.color,f=AS(i);n.data(f);var d=vn({},i,{options:{xField:"x",yField:"y",seriesField:s&&ES,rawFields:(0,E.mf)(l)&&(0,M.ev)((0,M.ev)([],(0,E.U2)(t,"rawFields",[]),!0),["datum"],!1),point:{color:l,shape:"word-cloud"}}}),m=wh(d).ext;return m.geometry.label(!1),n.coordinate().reflect("y"),n.axis(!1),i}function f5(i){return Aa(Uu({x:{nice:!1},y:{nice:!1}}))(i)}function h3(i){var n=i.chart,t=i.options,s=t.legend,l=t.colorField;return s===!1?n.legend(!1):l&&n.legend(ES,s),i}function h5(i){Aa(c5,f5,Ll,h3,_u,ls,Lo,Bg)(i)}fi("point","word-cloud",{draw:function(i,n){var t=i.x,s=i.y,l=n.addShape("text",{attrs:(0,M.pi)((0,M.pi)({},p3(i)),{x:t,y:s})}),f=i.data.rotate;return typeof f=="number"&&ec.rotate(l,f*Math.PI/180),l}});function p3(i){return{fontSize:i.data.size,text:i.data.text,textAlign:"center",fontFamily:i.data.font,fontWeight:i.data.weight,fill:i.color||i.defaultStyle.stroke,textBaseline:"alphabetic"}}var Vu=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="word-cloud",t}return n.getDefaultOptions=function(){return QL},n.prototype.changeData=function(t){this.updateOption({data:t}),this.options.imageMask?this.render():this.chart.changeData(AS({chart:this.chart,options:this.options}))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.render=function(){var t=this;return new Promise(function(s){var l=t.options.imageMask;if(!l){i.prototype.render.call(t),s();return}var f=function(d){t.options=(0,M.pi)((0,M.pi)({},t.options),{imageMask:d||null}),i.prototype.render.call(t),s()};pv(l).then(f).catch(f)})},n.prototype.getSchemaAdaptor=function(){return h5},n.prototype.triggerResize=function(){var t=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout(function(){i.prototype.triggerResize.call(t)}))},n}(Ta),PS=function(i){(0,M.ZT)(n,i);function n(t,s,l,f){var d=i.call(this,t,vn({},f,s))||this;return d.type="g2-plot",d.defaultOptions=f,d.adaptor=l,d}return n.prototype.getDefaultOptions=function(){return this.defaultOptions},n.prototype.getSchemaAdaptor=function(){return this.adaptor},n}(Ta),is="2.4.31";RC("en-US",tO),RC("zh-CN",rO);var YB={scale:Uu,legend:t0,tooltip:Ll,annotation:xu,interaction:_u,theme:Lo,animation:ls}},4157:function(){window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',function(xt){try{let ee=function(){G||(G=!0,w())},xe=function(){try{Y.documentElement.doScroll("left")}catch(ce){return void setTimeout(xe,50)}ee()};var Q=ee,oe=xe,F=(F=document.getElementsByTagName("script"))[F.length-1],N=F.getAttribute("data-injectcss"),F=F.getAttribute("data-disable-injectsvg");if(!F){var $,X,w,Y,G,K=function(he,J){J.parentNode.insertBefore(he,J)};if(N&&!xt.__iconfont__svg__cssinject__){xt.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(ce){console&&console.log(ce)}}$=function(){var he,J=document.createElement("div");J.innerHTML=xt._iconfont_svg_string_3580659,(J=J.getElementsByTagName("svg")[0])&&(J.setAttribute("aria-hidden","true"),J.style.position="absolute",J.style.width=0,J.style.height=0,J.style.overflow="hidden",J=J,(he=document.body).firstChild?K(J,he.firstChild):he.appendChild(J))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout($,0):(X=function(){document.removeEventListener("DOMContentLoaded",X,!1),$()},document.addEventListener("DOMContentLoaded",X,!1)):document.attachEvent&&(w=$,Y=xt.document,G=!1,xe(),Y.onreadystatechange=function(){Y.readyState=="complete"&&(Y.onreadystatechange=null,ee())})}}catch(ee){}}(window)},36556:function(xt){(function(N,F){xt.exports=F()})(this,function(){"use strict";var N=function(Xe){return Xe instanceof Uint8Array||Xe instanceof Uint16Array||Xe instanceof Uint32Array||Xe instanceof Int8Array||Xe instanceof Int16Array||Xe instanceof Int32Array||Xe instanceof Float32Array||Xe instanceof Float64Array||Xe instanceof Uint8ClampedArray},F=function(Xe,Gt){for(var dr=Object.keys(Gt),on=0;on<dr.length;++on)Xe[dr[on]]=Gt[dr[on]];return Xe},$=`
`;function X(Xe){return typeof atob!="undefined"?atob(Xe):"base64:"+Xe}function w(Xe){var Gt=new Error("(regl) "+Xe);throw console.error(Gt),Gt}function Y(Xe,Gt){Xe||w(Gt)}function G(Xe){return Xe?": "+Xe:""}function K(Xe,Gt,dr){Xe in Gt||w("unknown parameter ("+Xe+")"+G(dr)+". possible values: "+Object.keys(Gt).join())}function Q(Xe,Gt){N(Xe)||w("invalid parameter type"+G(Gt)+". must be a typed array")}function oe(Xe,Gt){switch(Gt){case"number":return typeof Xe=="number";case"object":return typeof Xe=="object";case"string":return typeof Xe=="string";case"boolean":return typeof Xe=="boolean";case"function":return typeof Xe=="function";case"undefined":return typeof Xe=="undefined";case"symbol":return typeof Xe=="symbol"}}function ee(Xe,Gt,dr){oe(Xe,Gt)||w("invalid parameter type"+G(dr)+". expected "+Gt+", got "+typeof Xe)}function xe(Xe,Gt){Xe>=0&&(Xe|0)===Xe||w("invalid parameter type, ("+Xe+")"+G(Gt)+". must be a nonnegative integer")}function ce(Xe,Gt,dr){Gt.indexOf(Xe)<0&&w("invalid value"+G(dr)+". must be one of: "+Gt)}var he=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function J(Xe){Object.keys(Xe).forEach(function(Gt){he.indexOf(Gt)<0&&w('invalid regl constructor argument "'+Gt+'". must be one of '+he)})}function M(Xe,Gt){for(Xe=Xe+"";Xe.length<Gt;)Xe=" "+Xe;return Xe}function E(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function fe(Xe,Gt){this.number=Xe,this.line=Gt,this.errors=[]}function me(Xe,Gt,dr){this.file=Xe,this.line=Gt,this.message=dr}function ke(){var Xe=new Error,Gt=(Xe.stack||Xe).toString(),dr=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Gt);if(dr)return dr[1];var on=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Gt);return on?on[1]:"unknown"}function Pe(){var Xe=new Error,Gt=(Xe.stack||Xe).toString(),dr=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Gt);if(dr)return dr[1];var on=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Gt);return on?on[1]:"unknown"}function Le(Xe,Gt){var dr=Xe.split(`
`),on=1,wn=0,un={unknown:new E,0:new E};un.unknown.name=un[0].name=Gt||ke(),un.unknown.lines.push(new fe(0,""));for(var Yr=0;Yr<dr.length;++Yr){var Yn=dr[Yr],zn=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Yn);if(zn)switch(zn[1]){case"line":var li=/(\d+)(\s+\d+)?/.exec(zn[2]);li&&(on=li[1]|0,li[2]&&(wn=li[2]|0,wn in un||(un[wn]=new E)));break;case"define":var ni=/SHADER_NAME(_B64)?\s+(.*)$/.exec(zn[2]);ni&&(un[wn].name=ni[1]?X(ni[2]):ni[2]);break}un[wn].lines.push(new fe(on++,Yn))}return Object.keys(un).forEach(function(ai){var xi=un[ai];xi.lines.forEach(function(En){xi.index[En.number]=En})}),un}function tt(Xe){var Gt=[];return Xe.split(`
`).forEach(function(dr){if(!(dr.length<5)){var on=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(dr);on?Gt.push(new me(on[1]|0,on[2]|0,on[3].trim())):dr.length>0&&Gt.push(new me("unknown",0,dr))}}),Gt}function ft(Xe,Gt){Gt.forEach(function(dr){var on=Xe[dr.file];if(on){var wn=on.index[dr.line];if(wn){wn.errors.push(dr),on.hasErrors=!0;return}}Xe.unknown.hasErrors=!0,Xe.unknown.lines[0].errors.push(dr)})}function ge(Xe,Gt,dr,on,wn){if(!Xe.getShaderParameter(Gt,Xe.COMPILE_STATUS)){var un=Xe.getShaderInfoLog(Gt),Yr=on===Xe.FRAGMENT_SHADER?"fragment":"vertex";Qe(dr,"string",Yr+" shader source must be a string",wn);var Yn=Le(dr,wn),zn=tt(un);ft(Yn,zn),Object.keys(Yn).forEach(function(li){var ni=Yn[li];if(!ni.hasErrors)return;var ai=[""],xi=[""];function En(ci,jr){ai.push(ci),xi.push(jr||"")}En("file number "+li+": "+ni.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ni.lines.forEach(function(ci){if(ci.errors.length>0){En(M(ci.number,4)+"|  ","background-color:yellow; font-weight:bold"),En(ci.line+$,"color:red; background-color:yellow; font-weight:bold");var jr=0;ci.errors.forEach(function(mn){var ti=mn.message,Ci=/^\s*'(.*)'\s*:\s*(.*)$/.exec(ti);if(Ci){var Vr=Ci[1];switch(ti=Ci[2],Vr){case"assign":Vr="=";break}jr=Math.max(ci.line.indexOf(Vr,jr),0)}else jr=0;En(M("| ",6)),En(M("^^^",jr+3)+$,"font-weight:bold"),En(M("| ",6)),En(ti+$,"font-weight:bold")}),En(M("| ",6)+$)}else En(M(ci.number,4)+"|  "),En(ci.line+$,"color:red")}),typeof document!="undefined"&&!window.chrome?(xi[0]=ai.join("%c"),console.log.apply(console,xi)):console.log(ai.join(""))}),Y.raise("Error compiling "+Yr+" shader, "+Yn[0].name)}}function be(Xe,Gt,dr,on,wn){if(!Xe.getProgramParameter(Gt,Xe.LINK_STATUS)){var un=Xe.getProgramInfoLog(Gt),Yr=Le(dr,wn),Yn=Le(on,wn),zn='Error linking program with vertex shader, "'+Yn[0].name+'", and fragment shader "'+Yr[0].name+'"';typeof document!="undefined"?console.log("%c"+zn+$+"%c"+un,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(zn+$+un),Y.raise(zn)}}function Ce(Xe){Xe._commandRef=ke()}function Ye(Xe,Gt,dr,on){Ce(Xe);function wn(zn){return zn?on.id(zn):0}Xe._fragId=wn(Xe.static.frag),Xe._vertId=wn(Xe.static.vert);function un(zn,li){Object.keys(li).forEach(function(ni){zn[on.id(ni)]=!0})}var Yr=Xe._uniformSet={};un(Yr,Gt.static),un(Yr,Gt.dynamic);var Yn=Xe._attributeSet={};un(Yn,dr.static),un(Yn,dr.dynamic),Xe._hasCount="count"in Xe.static||"count"in Xe.dynamic||"elements"in Xe.static||"elements"in Xe.dynamic}function je(Xe,Gt){var dr=Pe();w(Xe+" in command "+(Gt||ke())+(dr==="unknown"?"":" called from "+dr))}function Et(Xe,Gt,dr){Xe||je(Gt,dr||ke())}function Ae(Xe,Gt,dr,on){Xe in Gt||je("unknown parameter ("+Xe+")"+G(dr)+". possible values: "+Object.keys(Gt).join(),on||ke())}function Qe(Xe,Gt,dr,on){oe(Xe,Gt)||je("invalid parameter type"+G(dr)+". expected "+Gt+", got "+typeof Xe,on||ke())}function te(Xe){Xe()}function Ze(Xe,Gt,dr){Xe.texture?ce(Xe.texture._texture.internalformat,Gt,"unsupported texture format for attachment"):ce(Xe.renderbuffer._renderbuffer.format,dr,"unsupported renderbuffer format for attachment")}var ie=33071,Oe=9728,nt=9984,ye=9985,Te=9986,Je=9987,pe=5120,Me=5121,ze=5122,De=5123,Ct=5124,Vt=5125,Ve=5126,Ue=32819,Ee=32820,et=33635,st=34042,Re=36193,Ie={};Ie[pe]=Ie[Me]=1,Ie[ze]=Ie[De]=Ie[Re]=Ie[et]=Ie[Ue]=Ie[Ee]=2,Ie[Ct]=Ie[Vt]=Ie[Ve]=Ie[st]=4;function ct(Xe,Gt){return Xe===Ee||Xe===Ue||Xe===et?2:Xe===st?4:Ie[Xe]*Gt}function Tt(Xe){return!(Xe&Xe-1)&&!!Xe}function Qt(Xe,Gt,dr){var on,wn=Gt.width,un=Gt.height,Yr=Gt.channels;Y(wn>0&&wn<=dr.maxTextureSize&&un>0&&un<=dr.maxTextureSize,"invalid texture shape"),(Xe.wrapS!==ie||Xe.wrapT!==ie)&&Y(Tt(wn)&&Tt(un),"incompatible wrap mode for texture, both width and height must be power of 2"),Gt.mipmask===1?wn!==1&&un!==1&&Y(Xe.minFilter!==nt&&Xe.minFilter!==Te&&Xe.minFilter!==ye&&Xe.minFilter!==Je,"min filter requires mipmap"):(Y(Tt(wn)&&Tt(un),"texture must be a square power of 2 to support mipmapping"),Y(Gt.mipmask===(wn<<1)-1,"missing or incomplete mipmap data")),Gt.type===Ve&&(dr.extensions.indexOf("oes_texture_float_linear")<0&&Y(Xe.minFilter===Oe&&Xe.magFilter===Oe,"filter not supported, must enable oes_texture_float_linear"),Y(!Xe.genMipmaps,"mipmap generation not supported with float textures"));var Yn=Gt.images;for(on=0;on<16;++on)if(Yn[on]){var zn=wn>>on,li=un>>on;Y(Gt.mipmask&1<<on,"missing mipmap data");var ni=Yn[on];if(Y(ni.width===zn&&ni.height===li,"invalid shape for mip images"),Y(ni.format===Gt.format&&ni.internalformat===Gt.internalformat&&ni.type===Gt.type,"incompatible type for mip image"),!ni.compressed)if(ni.data){var ai=Math.ceil(ct(ni.type,Yr)*zn/ni.unpackAlignment)*ni.unpackAlignment;Y(ni.data.byteLength===ai*li,"invalid data for image, buffer size is inconsistent with image format")}else ni.element||ni.copy}else Xe.genMipmaps||Y((Gt.mipmask&1<<on)===0,"extra mipmap data");Gt.compressed&&Y(!Xe.genMipmaps,"mipmap generation for compressed images not supported")}function wt(Xe,Gt,dr,on){var wn=Xe.width,un=Xe.height,Yr=Xe.channels;Y(wn>0&&wn<=on.maxTextureSize&&un>0&&un<=on.maxTextureSize,"invalid texture shape"),Y(wn===un,"cube map must be square"),Y(Gt.wrapS===ie&&Gt.wrapT===ie,"wrap mode not supported by cube map");for(var Yn=0;Yn<dr.length;++Yn){var zn=dr[Yn];Y(zn.width===wn&&zn.height===un,"inconsistent cube map face shape"),Gt.genMipmaps&&(Y(!zn.compressed,"can not generate mipmap for compressed textures"),Y(zn.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var li=zn.images,ni=0;ni<16;++ni){var ai=li[ni];if(ai){var xi=wn>>ni,En=un>>ni;Y(zn.mipmask&1<<ni,"missing mipmap data"),Y(ai.width===xi&&ai.height===En,"invalid shape for mip images"),Y(ai.format===Xe.format&&ai.internalformat===Xe.internalformat&&ai.type===Xe.type,"incompatible type for mip image"),ai.compressed||(ai.data?Y(ai.data.byteLength===xi*En*Math.max(ct(ai.type,Yr),ai.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):ai.element||ai.copy)}}}}var se=F(Y,{optional:te,raise:w,commandRaise:je,command:Et,parameter:K,commandParameter:Ae,constructor:J,type:ee,commandType:Qe,isTypedArray:Q,nni:xe,oneOf:ce,shaderError:ge,linkError:be,callSite:Pe,saveCommandRef:Ce,saveDrawInfo:Ye,framebufferFormat:Ze,guessCommand:ke,texture2D:Qt,textureCube:wt}),Ge=0,Ke=0;function bt(Xe,Gt){this.id=Ge++,this.type=Xe,this.data=Gt}function Be(Xe){return Xe.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function pt(Xe){if(Xe.length===0)return[];var Gt=Xe.charAt(0),dr=Xe.charAt(Xe.length-1);if(Xe.length>1&&Gt===dr&&(Gt==='"'||Gt==="'"))return['"'+Be(Xe.substr(1,Xe.length-2))+'"'];var on=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Xe);if(on)return pt(Xe.substr(0,on.index)).concat(pt(on[1])).concat(pt(Xe.substr(on.index+on[0].length)));var wn=Xe.split(".");if(wn.length===1)return['"'+Be(Xe)+'"'];for(var un=[],Yr=0;Yr<wn.length;++Yr)un=un.concat(pt(wn[Yr]));return un}function It(Xe){return"["+pt(Xe).join("][")+"]"}function ot(Xe,Gt){return new bt(Xe,It(Gt+""))}function zt(Xe){return typeof Xe=="function"&&!Xe._reglType||Xe instanceof bt}function Jt(Xe,Gt){return typeof Xe=="function"?new bt(Ke,Xe):Xe}var tr={DynamicVariable:bt,define:ot,isDynamic:zt,unbox:Jt,accessor:It},pr={next:typeof requestAnimationFrame=="function"?function(Xe){return requestAnimationFrame(Xe)}:function(Xe){return setTimeout(Xe,16)},cancel:typeof cancelAnimationFrame=="function"?function(Xe){return cancelAnimationFrame(Xe)}:clearTimeout},br=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Zr(){var Xe={"":0},Gt=[""];return{id:function(dr){var on=Xe[dr];return on||(on=Xe[dr]=Gt.length,Gt.push(dr),on)},str:function(dr){return Gt[dr]}}}function Nr(Xe,Gt,dr){var on=document.createElement("canvas");F(on.style,{border:0,margin:0,padding:0,top:0,left:0}),Xe.appendChild(on),Xe===document.body&&(on.style.position="absolute",F(Xe.style,{margin:0,padding:0}));function wn(){var Yn=window.innerWidth,zn=window.innerHeight;if(Xe!==document.body){var li=Xe.getBoundingClientRect();Yn=li.right-li.left,zn=li.bottom-li.top}on.width=dr*Yn,on.height=dr*zn,F(on.style,{width:Yn+"px",height:zn+"px"})}var un;Xe!==document.body&&typeof ResizeObserver=="function"?(un=new ResizeObserver(function(){setTimeout(wn)}),un.observe(Xe)):window.addEventListener("resize",wn,!1);function Yr(){un?un.disconnect():window.removeEventListener("resize",wn),Xe.removeChild(on)}return wn(),{canvas:on,onDestroy:Yr}}function tn(Xe,Gt){function dr(on){try{return Xe.getContext(on,Gt)}catch(wn){return null}}return dr("webgl")||dr("experimental-webgl")||dr("webgl-experimental")}function Dn(Xe){return typeof Xe.nodeName=="string"&&typeof Xe.appendChild=="function"&&typeof Xe.getBoundingClientRect=="function"}function gn(Xe){return typeof Xe.drawArrays=="function"||typeof Xe.drawElements=="function"}function Vn(Xe){return typeof Xe=="string"?Xe.split():(se(Array.isArray(Xe),"invalid extension array"),Xe)}function Un(Xe){return typeof Xe=="string"?(se(typeof document!="undefined","not supported outside of DOM"),document.querySelector(Xe)):Xe}function mi(Xe){var Gt=Xe||{},dr,on,wn,un,Yr={},Yn=[],zn=[],li=typeof window=="undefined"?1:window.devicePixelRatio,ni=!1,ai=function(ci){ci&&se.raise(ci)},xi=function(){};if(typeof Gt=="string"?(se(typeof document!="undefined","selector queries only supported in DOM enviroments"),dr=document.querySelector(Gt),se(dr,"invalid query string for element")):typeof Gt=="object"?Dn(Gt)?dr=Gt:gn(Gt)?(un=Gt,wn=un.canvas):(se.constructor(Gt),"gl"in Gt?un=Gt.gl:"canvas"in Gt?wn=Un(Gt.canvas):"container"in Gt&&(on=Un(Gt.container)),"attributes"in Gt&&(Yr=Gt.attributes,se.type(Yr,"object","invalid context attributes")),"extensions"in Gt&&(Yn=Vn(Gt.extensions)),"optionalExtensions"in Gt&&(zn=Vn(Gt.optionalExtensions)),"onDone"in Gt&&(se.type(Gt.onDone,"function","invalid or missing onDone callback"),ai=Gt.onDone),"profile"in Gt&&(ni=!!Gt.profile),"pixelRatio"in Gt&&(li=+Gt.pixelRatio,se(li>0,"invalid pixel ratio"))):se.raise("invalid arguments to regl"),dr&&(dr.nodeName.toLowerCase()==="canvas"?wn=dr:on=dr),!un){if(!wn){se(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var En=Nr(on||document.body,ai,li);if(!En)return null;wn=En.canvas,xi=En.onDestroy}Yr.premultipliedAlpha===void 0&&(Yr.premultipliedAlpha=!0),un=tn(wn,Yr)}return un?{gl:un,canvas:wn,container:on,extensions:Yn,optionalExtensions:zn,pixelRatio:li,profile:ni,onDone:ai,onDestroy:xi}:(xi(),ai("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function qn(Xe,Gt){var dr={};function on(Yr){se.type(Yr,"string","extension name must be string");var Yn=Yr.toLowerCase(),zn;try{zn=dr[Yn]=Xe.getExtension(Yn)}catch(li){}return!!zn}for(var wn=0;wn<Gt.extensions.length;++wn){var un=Gt.extensions[wn];if(!on(un))return Gt.onDestroy(),Gt.onDone('"'+un+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Gt.optionalExtensions.forEach(on),{extensions:dr,restore:function(){Object.keys(dr).forEach(function(Yr){if(dr[Yr]&&!on(Yr))throw new Error("(regl): error restoring extension "+Yr)})}}}function Xn(Xe,Gt){for(var dr=Array(Xe),on=0;on<Xe;++on)dr[on]=Gt(on);return dr}var We=5120,it=5121,_t=5122,Pt=5123,jt=5124,gr=5125,Cr=5126;function kt(Xe){for(var Gt=16;Gt<=1<<28;Gt*=16)if(Xe<=Gt)return Gt;return 0}function at(Xe){var Gt,dr;return Gt=(Xe>65535)<<4,Xe>>>=Gt,dr=(Xe>255)<<3,Xe>>>=dr,Gt|=dr,dr=(Xe>15)<<2,Xe>>>=dr,Gt|=dr,dr=(Xe>3)<<1,Xe>>>=dr,Gt|=dr,Gt|Xe>>1}function Rt(){var Xe=Xn(8,function(){return[]});function Gt(un){var Yr=kt(un),Yn=Xe[at(Yr)>>2];return Yn.length>0?Yn.pop():new ArrayBuffer(Yr)}function dr(un){Xe[at(un.byteLength)>>2].push(un)}function on(un,Yr){var Yn=null;switch(un){case We:Yn=new Int8Array(Gt(Yr),0,Yr);break;case it:Yn=new Uint8Array(Gt(Yr),0,Yr);break;case _t:Yn=new Int16Array(Gt(2*Yr),0,Yr);break;case Pt:Yn=new Uint16Array(Gt(2*Yr),0,Yr);break;case jt:Yn=new Int32Array(Gt(4*Yr),0,Yr);break;case gr:Yn=new Uint32Array(Gt(4*Yr),0,Yr);break;case Cr:Yn=new Float32Array(Gt(4*Yr),0,Yr);break;default:return null}return Yn.length!==Yr?Yn.subarray(0,Yr):Yn}function wn(un){dr(un.buffer)}return{alloc:Gt,free:dr,allocType:on,freeType:wn}}var mr=Rt();mr.zero=Rt();var Dr=3408,Ft=3410,Mn=3411,yi=3412,gi=3413,sn=3414,hi=3415,ri=33901,ui=33902,ba=3379,vi=3386,Sa=34921,za=36347,_a=36348,Ga=35661,Ea=35660,hs=34930,uo=36349,Ro=34076,Jn=34024,_i=7936,na=7937,Xa=7938,ps=35724,po=34047,Io=36063,nr=34852,At=3553,Xt=34067,yr=34069,Gr=33984,Cn=6408,kn=5126,_n=5121,Mi=36160,Yi=36053,Wo=36064,Ko=16384,su=function(Xe,Gt){var dr=1;Gt.ext_texture_filter_anisotropic&&(dr=Xe.getParameter(po));var on=1,wn=1;Gt.webgl_draw_buffers&&(on=Xe.getParameter(nr),wn=Xe.getParameter(Io));var un=!!Gt.oes_texture_float;if(un){var Yr=Xe.createTexture();Xe.bindTexture(At,Yr),Xe.texImage2D(At,0,Cn,1,1,0,Cn,kn,null);var Yn=Xe.createFramebuffer();if(Xe.bindFramebuffer(Mi,Yn),Xe.framebufferTexture2D(Mi,Wo,At,Yr,0),Xe.bindTexture(At,null),Xe.checkFramebufferStatus(Mi)!==Yi)un=!1;else{Xe.viewport(0,0,1,1),Xe.clearColor(1,0,0,1),Xe.clear(Ko);var zn=mr.allocType(kn,4);Xe.readPixels(0,0,1,1,Cn,kn,zn),Xe.getError()?un=!1:(Xe.deleteFramebuffer(Yn),Xe.deleteTexture(Yr),un=zn[0]===1),mr.freeType(zn)}}var li=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ni=!0;if(!li){var ai=Xe.createTexture(),xi=mr.allocType(_n,36);Xe.activeTexture(Gr),Xe.bindTexture(Xt,ai),Xe.texImage2D(yr,0,Cn,3,3,0,Cn,_n,xi),mr.freeType(xi),Xe.bindTexture(Xt,null),Xe.deleteTexture(ai),ni=!Xe.getError()}return{colorBits:[Xe.getParameter(Ft),Xe.getParameter(Mn),Xe.getParameter(yi),Xe.getParameter(gi)],depthBits:Xe.getParameter(sn),stencilBits:Xe.getParameter(hi),subpixelBits:Xe.getParameter(Dr),extensions:Object.keys(Gt).filter(function(En){return!!Gt[En]}),maxAnisotropic:dr,maxDrawbuffers:on,maxColorAttachments:wn,pointSizeDims:Xe.getParameter(ri),lineWidthDims:Xe.getParameter(ui),maxViewportDims:Xe.getParameter(vi),maxCombinedTextureUnits:Xe.getParameter(Ga),maxCubeMapSize:Xe.getParameter(Ro),maxRenderbufferSize:Xe.getParameter(Jn),maxTextureUnits:Xe.getParameter(hs),maxTextureSize:Xe.getParameter(ba),maxAttributes:Xe.getParameter(Sa),maxVertexUniforms:Xe.getParameter(za),maxVertexTextureUnits:Xe.getParameter(Ea),maxVaryingVectors:Xe.getParameter(_a),maxFragmentUniforms:Xe.getParameter(uo),glsl:Xe.getParameter(ps),renderer:Xe.getParameter(na),vendor:Xe.getParameter(_i),version:Xe.getParameter(Xa),readFloat:un,npotTextureCube:ni}};function No(Xe){return!!Xe&&typeof Xe=="object"&&Array.isArray(Xe.shape)&&Array.isArray(Xe.stride)&&typeof Xe.offset=="number"&&Xe.shape.length===Xe.stride.length&&(Array.isArray(Xe.data)||N(Xe.data))}var ro=function(Xe){return Object.keys(Xe).map(function(Gt){return Xe[Gt]})},uu={shape:ii,flatten:xn};function qo(Xe,Gt,dr){for(var on=0;on<Gt;++on)dr[on]=Xe[on]}function Dt(Xe,Gt,dr,on){for(var wn=0,un=0;un<Gt;++un)for(var Yr=Xe[un],Yn=0;Yn<dr;++Yn)on[wn++]=Yr[Yn]}function Kt(Xe,Gt,dr,on,wn,un){for(var Yr=un,Yn=0;Yn<Gt;++Yn)for(var zn=Xe[Yn],li=0;li<dr;++li)for(var ni=zn[li],ai=0;ai<on;++ai)wn[Yr++]=ni[ai]}function Or(Xe,Gt,dr,on,wn){for(var un=1,Yr=dr+1;Yr<Gt.length;++Yr)un*=Gt[Yr];var Yn=Gt[dr];if(Gt.length-dr===4){var zn=Gt[dr+1],li=Gt[dr+2],ni=Gt[dr+3];for(Yr=0;Yr<Yn;++Yr)Kt(Xe[Yr],zn,li,ni,on,wn),wn+=un}else for(Yr=0;Yr<Yn;++Yr)Or(Xe[Yr],Gt,dr+1,on,wn),wn+=un}function xn(Xe,Gt,dr,on){var wn=1;if(Gt.length)for(var un=0;un<Gt.length;++un)wn*=Gt[un];else wn=0;var Yr=on||mr.allocType(dr,wn);switch(Gt.length){case 0:break;case 1:qo(Xe,Gt[0],Yr);break;case 2:Dt(Xe,Gt[0],Gt[1],Yr);break;case 3:Kt(Xe,Gt[0],Gt[1],Gt[2],Yr,0);break;default:Or(Xe,Gt,0,Yr,0)}return Yr}function ii(Xe){for(var Gt=[],dr=Xe;dr.length;dr=dr[0])Gt.push(dr.length);return Gt}var Zi={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},lo=5120,Bs=5122,Eo=5124,Po=5121,Hu=5123,uf=5125,th=5126,rh=5126,lu={int8:lo,int16:Bs,int32:Eo,uint8:Po,uint16:Hu,uint32:uf,float:th,float32:rh},nc=35048,Qs=35040,Sl={dynamic:nc,stream:Qs,static:35044},ic=uu.flatten,no=uu.shape,Kl=35044,Es=35040,ds=5121,bc=5126,Sc=[];Sc[5120]=1,Sc[5122]=2,Sc[5124]=4,Sc[5121]=1,Sc[5123]=2,Sc[5125]=4,Sc[5126]=4;function Rf(Xe){return Zi[Object.prototype.toString.call(Xe)]|0}function Bl(Xe,Gt){for(var dr=0;dr<Gt.length;++dr)Xe[dr]=Gt[dr]}function Nl(Xe,Gt,dr,on,wn,un,Yr){for(var Yn=0,zn=0;zn<dr;++zn)for(var li=0;li<on;++li)Xe[Yn++]=Gt[wn*zn+un*li+Yr]}function ql(Xe,Gt,dr,on){var wn=0,un={};function Yr(jr){this.id=wn++,this.buffer=Xe.createBuffer(),this.type=jr,this.usage=Kl,this.byteLength=0,this.dimension=1,this.dtype=ds,this.persistentData=null,dr.profile&&(this.stats={size:0})}Yr.prototype.bind=function(){Xe.bindBuffer(this.type,this.buffer)},Yr.prototype.destroy=function(){xi(this)};var Yn=[];function zn(jr,mn){var ti=Yn.pop();return ti||(ti=new Yr(jr)),ti.bind(),ai(ti,mn,Es,0,1,!1),ti}function li(jr){Yn.push(jr)}function ni(jr,mn,ti){jr.byteLength=mn.byteLength,Xe.bufferData(jr.type,mn,ti)}function ai(jr,mn,ti,Ci,Vr,Bi){var Wn;if(jr.usage=ti,Array.isArray(mn)){if(jr.dtype=Ci||bc,mn.length>0){var Ti;if(Array.isArray(mn[0])){Wn=no(mn);for(var Ln=1,wi=1;wi<Wn.length;++wi)Ln*=Wn[wi];jr.dimension=Ln,Ti=ic(mn,Wn,jr.dtype),ni(jr,Ti,ti),Bi?jr.persistentData=Ti:mr.freeType(Ti)}else if(typeof mn[0]=="number"){jr.dimension=Vr;var ta=mr.allocType(jr.dtype,mn.length);Bl(ta,mn),ni(jr,ta,ti),Bi?jr.persistentData=ta:mr.freeType(ta)}else N(mn[0])?(jr.dimension=mn[0].length,jr.dtype=Ci||Rf(mn[0])||bc,Ti=ic(mn,[mn.length,mn[0].length],jr.dtype),ni(jr,Ti,ti),Bi?jr.persistentData=Ti:mr.freeType(Ti)):se.raise("invalid buffer data")}}else if(N(mn))jr.dtype=Ci||Rf(mn),jr.dimension=Vr,ni(jr,mn,ti),Bi&&(jr.persistentData=new Uint8Array(new Uint8Array(mn.buffer)));else if(No(mn)){Wn=mn.shape;var Ua=mn.stride,Ai=mn.offset,Gn=0,Rn=0,aa=0,to=0;Wn.length===1?(Gn=Wn[0],Rn=1,aa=Ua[0],to=0):Wn.length===2?(Gn=Wn[0],Rn=Wn[1],aa=Ua[0],to=Ua[1]):se.raise("invalid shape"),jr.dtype=Ci||Rf(mn.data)||bc,jr.dimension=Rn;var Oi=mr.allocType(jr.dtype,Gn*Rn);Nl(Oi,mn.data,Gn,Rn,aa,to,Ai),ni(jr,Oi,ti),Bi?jr.persistentData=Oi:mr.freeType(Oi)}else mn instanceof ArrayBuffer?(jr.dtype=ds,jr.dimension=Vr,ni(jr,mn,ti),Bi&&(jr.persistentData=new Uint8Array(new Uint8Array(mn)))):se.raise("invalid buffer data")}function xi(jr){Gt.bufferCount--,on(jr);var mn=jr.buffer;se(mn,"buffer must not be deleted already"),Xe.deleteBuffer(mn),jr.buffer=null,delete un[jr.id]}function En(jr,mn,ti,Ci){Gt.bufferCount++;var Vr=new Yr(mn);un[Vr.id]=Vr;function Bi(Ln){var wi=Kl,ta=null,Ua=0,Ai=0,Gn=1;return Array.isArray(Ln)||N(Ln)||No(Ln)||Ln instanceof ArrayBuffer?ta=Ln:typeof Ln=="number"?Ua=Ln|0:Ln&&(se.type(Ln,"object","buffer arguments must be an object, a number or an array"),"data"in Ln&&(se(ta===null||Array.isArray(ta)||N(ta)||No(ta),"invalid data for buffer"),ta=Ln.data),"usage"in Ln&&(se.parameter(Ln.usage,Sl,"invalid buffer usage"),wi=Sl[Ln.usage]),"type"in Ln&&(se.parameter(Ln.type,lu,"invalid buffer type"),Ai=lu[Ln.type]),"dimension"in Ln&&(se.type(Ln.dimension,"number","invalid dimension"),Gn=Ln.dimension|0),"length"in Ln&&(se.nni(Ua,"buffer length must be a nonnegative integer"),Ua=Ln.length|0)),Vr.bind(),ta?ai(Vr,ta,wi,Ai,Gn,Ci):(Ua&&Xe.bufferData(Vr.type,Ua,wi),Vr.dtype=Ai||ds,Vr.usage=wi,Vr.dimension=Gn,Vr.byteLength=Ua),dr.profile&&(Vr.stats.size=Vr.byteLength*Sc[Vr.dtype]),Bi}function Wn(Ln,wi){se(wi+Ln.byteLength<=Vr.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Ln.byteLength+" starting from offset "+wi+" to a buffer of size "+Vr.byteLength),Xe.bufferSubData(Vr.type,wi,Ln)}function Ti(Ln,wi){var ta=(wi||0)|0,Ua;if(Vr.bind(),N(Ln)||Ln instanceof ArrayBuffer)Wn(Ln,ta);else if(Array.isArray(Ln)){if(Ln.length>0)if(typeof Ln[0]=="number"){var Ai=mr.allocType(Vr.dtype,Ln.length);Bl(Ai,Ln),Wn(Ai,ta),mr.freeType(Ai)}else if(Array.isArray(Ln[0])||N(Ln[0])){Ua=no(Ln);var Gn=ic(Ln,Ua,Vr.dtype);Wn(Gn,ta),mr.freeType(Gn)}else se.raise("invalid buffer data")}else if(No(Ln)){Ua=Ln.shape;var Rn=Ln.stride,aa=0,to=0,Oi=0,Ka=0;Ua.length===1?(aa=Ua[0],to=1,Oi=Rn[0],Ka=0):Ua.length===2?(aa=Ua[0],to=Ua[1],Oi=Rn[0],Ka=Rn[1]):se.raise("invalid shape");var ka=Array.isArray(Ln.data)?Vr.dtype:Rf(Ln.data),xa=mr.allocType(ka,aa*to);Nl(xa,Ln.data,aa,to,Oi,Ka,Ln.offset),Wn(xa,ta),mr.freeType(xa)}else se.raise("invalid data for buffer subdata");return Bi}return ti||Bi(jr),Bi._reglType="buffer",Bi._buffer=Vr,Bi.subdata=Ti,dr.profile&&(Bi.stats=Vr.stats),Bi.destroy=function(){xi(Vr)},Bi}function ci(){ro(un).forEach(function(jr){jr.buffer=Xe.createBuffer(),Xe.bindBuffer(jr.type,jr.buffer),Xe.bufferData(jr.type,jr.persistentData||jr.byteLength,jr.usage)})}return dr.profile&&(Gt.getTotalBufferSize=function(){var jr=0;return Object.keys(un).forEach(function(mn){jr+=un[mn].stats.size}),jr}),{create:En,createStream:zn,destroyStream:li,clear:function(){ro(un).forEach(xi),Yn.forEach(xi)},getBuffer:function(jr){return jr&&jr._buffer instanceof Yr?jr._buffer:null},restore:ci,_initBuffer:ai}}var Pu=0,Ec=0,Sn=1,Vi=1,mv=4,nh=4,ac={points:Pu,point:Ec,lines:Sn,line:Vi,triangles:mv,triangle:nh,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ed=0,Vs=1,wc=4,zl=5120,Js=5121,cu=5122,El=5123,oc=5124,Ul=5125,Cc=34963,Vc=35040,ih=35044;function td(Xe,Gt,dr,on){var wn={},un=0,Yr={uint8:Js,uint16:El};Gt.oes_element_index_uint&&(Yr.uint32=Ul);function Yn(ci){this.id=un++,wn[this.id]=this,this.buffer=ci,this.primType=wc,this.vertCount=0,this.type=0}Yn.prototype.bind=function(){this.buffer.bind()};var zn=[];function li(ci){var jr=zn.pop();return jr||(jr=new Yn(dr.create(null,Cc,!0,!1)._buffer)),ai(jr,ci,Vc,-1,-1,0,0),jr}function ni(ci){zn.push(ci)}function ai(ci,jr,mn,ti,Ci,Vr,Bi){ci.buffer.bind();var Wn;if(jr){var Ti=Bi;!Bi&&(!N(jr)||No(jr)&&!N(jr.data))&&(Ti=Gt.oes_element_index_uint?Ul:El),dr._initBuffer(ci.buffer,jr,mn,Ti,3)}else Xe.bufferData(Cc,Vr,mn),ci.buffer.dtype=Wn||Js,ci.buffer.usage=mn,ci.buffer.dimension=3,ci.buffer.byteLength=Vr;if(Wn=Bi,!Bi){switch(ci.buffer.dtype){case Js:case zl:Wn=Js;break;case El:case cu:Wn=El;break;case Ul:case oc:Wn=Ul;break;default:se.raise("unsupported type for element array")}ci.buffer.dtype=Wn}ci.type=Wn,se(Wn!==Ul||!!Gt.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Ln=Ci;Ln<0&&(Ln=ci.buffer.byteLength,Wn===El?Ln>>=1:Wn===Ul&&(Ln>>=2)),ci.vertCount=Ln;var wi=ti;if(ti<0){wi=wc;var ta=ci.buffer.dimension;ta===1&&(wi=ed),ta===2&&(wi=Vs),ta===3&&(wi=wc)}ci.primType=wi}function xi(ci){on.elementsCount--,se(ci.buffer!==null,"must not double destroy elements"),delete wn[ci.id],ci.buffer.destroy(),ci.buffer=null}function En(ci,jr){var mn=dr.create(null,Cc,!0),ti=new Yn(mn._buffer);on.elementsCount++;function Ci(Vr){if(!Vr)mn(),ti.primType=wc,ti.vertCount=0,ti.type=Js;else if(typeof Vr=="number")mn(Vr),ti.primType=wc,ti.vertCount=Vr|0,ti.type=Js;else{var Bi=null,Wn=ih,Ti=-1,Ln=-1,wi=0,ta=0;Array.isArray(Vr)||N(Vr)||No(Vr)?Bi=Vr:(se.type(Vr,"object","invalid arguments for elements"),"data"in Vr&&(Bi=Vr.data,se(Array.isArray(Bi)||N(Bi)||No(Bi),"invalid data for element buffer")),"usage"in Vr&&(se.parameter(Vr.usage,Sl,"invalid element buffer usage"),Wn=Sl[Vr.usage]),"primitive"in Vr&&(se.parameter(Vr.primitive,ac,"invalid element buffer primitive"),Ti=ac[Vr.primitive]),"count"in Vr&&(se(typeof Vr.count=="number"&&Vr.count>=0,"invalid vertex count for elements"),Ln=Vr.count|0),"type"in Vr&&(se.parameter(Vr.type,Yr,"invalid buffer type"),ta=Yr[Vr.type]),"length"in Vr?wi=Vr.length|0:(wi=Ln,ta===El||ta===cu?wi*=2:(ta===Ul||ta===oc)&&(wi*=4))),ai(ti,Bi,Wn,Ti,Ln,wi,ta)}return Ci}return Ci(ci),Ci._reglType="elements",Ci._elements=ti,Ci.subdata=function(Vr,Bi){return mn.subdata(Vr,Bi),Ci},Ci.destroy=function(){xi(ti)},Ci}return{create:En,createStream:li,destroyStream:ni,getElements:function(ci){return typeof ci=="function"&&ci._elements instanceof Yn?ci._elements:null},clear:function(){ro(wn).forEach(xi)}}}var Zo=new Float32Array(1),Fd=new Uint32Array(Zo.buffer),Ih=5123;function lf(Xe){for(var Gt=mr.allocType(Ih,Xe.length),dr=0;dr<Xe.length;++dr)if(isNaN(Xe[dr]))Gt[dr]=65535;else if(Xe[dr]===1/0)Gt[dr]=31744;else if(Xe[dr]===-1/0)Gt[dr]=64512;else{Zo[0]=Xe[dr];var on=Fd[0],wn=on>>>31<<15,un=(on<<1>>>24)-127,Yr=on>>13&1024-1;if(un<-24)Gt[dr]=wn;else if(un<-14){var Yn=-14-un;Gt[dr]=wn+(Yr+1024>>Yn)}else un>15?Gt[dr]=wn+31744:Gt[dr]=wn+(un+15<<10)+Yr}return Gt}function ts(Xe){return Array.isArray(Xe)||N(Xe)}var hp=function(Xe){return!(Xe&Xe-1)&&!!Xe},pp=34467,Ou=3553,St=34067,cr=34069,kr=6408,Hr=6406,An=6407,di=6409,ua=6410,go=32854,Is=32855,ll=36194,Ku=32819,Oo=32820,dp=33635,Dd=34042,Hc=6402,vp=34041,cf=35904,rd=35906,wa=36193,ff=33776,ah=33777,oh=33778,If=33779,sh=35986,Ns=35987,sc=34798,qu=35840,gp=35841,Ld=35842,nd=35843,jc=36196,hf=5121,uh=5123,mp=5125,Pf=5126,fm=10242,id=10243,Ps=10497,yp=33071,Ph=33648,Bd=10240,_p=10241,xp=9728,yv=9729,Wc=9984,Nd=9985,lh=9986,rs=9987,ch=33170,Ac=4352,uc=4353,co=4354,Xo=34046,mo=3317,ad=37440,Of=37441,bp=37443,_v=37444,ga=33984,Sp=[Wc,lh,Nd,rs],Gc=[0,di,ua,An,kr],Hs={};Hs[di]=Hs[Hr]=Hs[Hc]=1,Hs[vp]=Hs[ua]=2,Hs[An]=Hs[cf]=3,Hs[kr]=Hs[rd]=4;function ws(Xe){return"[object "+Xe+"]"}var fh=ws("HTMLCanvasElement"),od=ws("OffscreenCanvas"),Os=ws("CanvasRenderingContext2D"),zi=ws("ImageBitmap"),ju=ws("HTMLImageElement"),Xc=ws("HTMLVideoElement"),kf=Object.keys(Zi).concat([fh,od,Os,zi,ju,Xc]),cl=[];cl[hf]=1,cl[Pf]=4,cl[wa]=2,cl[uh]=2,cl[mp]=4;var Vo=[];Vo[go]=2,Vo[Is]=2,Vo[ll]=2,Vo[vp]=4,Vo[ff]=.5,Vo[ah]=.5,Vo[oh]=1,Vo[If]=1,Vo[sh]=.5,Vo[Ns]=1,Vo[sc]=1,Vo[qu]=.5,Vo[gp]=.25,Vo[Ld]=.5,Vo[nd]=.25,Vo[jc]=.5;function fu(Xe){return Array.isArray(Xe)&&(Xe.length===0||typeof Xe[0]=="number")}function Si(Xe){if(!Array.isArray(Xe))return!1;var Gt=Xe.length;return!(Gt===0||!ts(Xe[0]))}function Zl(Xe){return Object.prototype.toString.call(Xe)}function hh(Xe){return Zl(Xe)===fh}function Oh(Xe){return Zl(Xe)===od}function Tc(Xe){return Zl(Xe)===Os}function bu(Xe){return Zl(Xe)===zi}function Ep(Xe){return Zl(Xe)===ju}function Mc(Xe){return Zl(Xe)===Xc}function eu(Xe){if(!Xe)return!1;var Gt=Zl(Xe);return kf.indexOf(Gt)>=0?!0:fu(Xe)||Si(Xe)||No(Xe)}function fl(Xe){return Zi[Object.prototype.toString.call(Xe)]|0}function xv(Xe,Gt){var dr=Gt.length;switch(Xe.type){case hf:case uh:case mp:case Pf:var on=mr.allocType(Xe.type,dr);on.set(Gt),Xe.data=on;break;case wa:Xe.data=lf(Gt);break;default:se.raise("unsupported texture type, must specify a typed array")}}function kh(Xe,Gt){return mr.allocType(Xe.type===wa?Pf:Xe.type,Gt)}function Fh(Xe,Gt){Xe.type===wa?(Xe.data=lf(Gt),mr.freeType(Gt)):Xe.data=Gt}function zd(Xe,Gt,dr,on,wn,un){for(var Yr=Xe.width,Yn=Xe.height,zn=Xe.channels,li=Yr*Yn*zn,ni=kh(Xe,li),ai=0,xi=0;xi<Yn;++xi)for(var En=0;En<Yr;++En)for(var ci=0;ci<zn;++ci)ni[ai++]=Gt[dr*En+on*xi+wn*ci+un];Fh(Xe,ni)}function lc(Xe,Gt,dr,on,wn,un){var Yr;if(typeof Vo[Xe]!="undefined"?Yr=Vo[Xe]:Yr=Hs[Xe]*cl[Gt],un&&(Yr*=6),wn){for(var Yn=0,zn=dr;zn>=1;)Yn+=Yr*zn*zn,zn/=2;return Yn}else return Yr*dr*on}function tu(Xe,Gt,dr,on,wn,un,Yr){var Yn={"don't care":Ac,"dont care":Ac,nice:co,fast:uc},zn={repeat:Ps,clamp:yp,mirror:Ph},li={nearest:xp,linear:yv},ni=F({mipmap:rs,"nearest mipmap nearest":Wc,"linear mipmap nearest":Nd,"nearest mipmap linear":lh,"linear mipmap linear":rs},li),ai={none:0,browser:_v},xi={uint8:hf,rgba4:Ku,rgb565:dp,"rgb5 a1":Oo},En={alpha:Hr,luminance:di,"luminance alpha":ua,rgb:An,rgba:kr,rgba4:go,"rgb5 a1":Is,rgb565:ll},ci={};Gt.ext_srgb&&(En.srgb=cf,En.srgba=rd),Gt.oes_texture_float&&(xi.float32=xi.float=Pf),Gt.oes_texture_half_float&&(xi.float16=xi["half float"]=wa),Gt.webgl_depth_texture&&(F(En,{depth:Hc,"depth stencil":vp}),F(xi,{uint16:uh,uint32:mp,"depth stencil":Dd})),Gt.webgl_compressed_texture_s3tc&&F(ci,{"rgb s3tc dxt1":ff,"rgba s3tc dxt1":ah,"rgba s3tc dxt3":oh,"rgba s3tc dxt5":If}),Gt.webgl_compressed_texture_atc&&F(ci,{"rgb atc":sh,"rgba atc explicit alpha":Ns,"rgba atc interpolated alpha":sc}),Gt.webgl_compressed_texture_pvrtc&&F(ci,{"rgb pvrtc 4bppv1":qu,"rgb pvrtc 2bppv1":gp,"rgba pvrtc 4bppv1":Ld,"rgba pvrtc 2bppv1":nd}),Gt.webgl_compressed_texture_etc1&&(ci["rgb etc1"]=jc);var jr=Array.prototype.slice.call(Xe.getParameter(pp));Object.keys(ci).forEach(function(ur){var ln=ci[ur];jr.indexOf(ln)>=0&&(En[ur]=ln)});var mn=Object.keys(En);dr.textureFormats=mn;var ti=[];Object.keys(En).forEach(function(ur){var ln=En[ur];ti[ln]=ur});var Ci=[];Object.keys(xi).forEach(function(ur){var ln=xi[ur];Ci[ln]=ur});var Vr=[];Object.keys(li).forEach(function(ur){var ln=li[ur];Vr[ln]=ur});var Bi=[];Object.keys(ni).forEach(function(ur){var ln=ni[ur];Bi[ln]=ur});var Wn=[];Object.keys(zn).forEach(function(ur){var ln=zn[ur];Wn[ln]=ur});var Ti=mn.reduce(function(ur,ln){var qr=En[ln];return qr===di||qr===Hr||qr===di||qr===ua||qr===Hc||qr===vp||Gt.ext_srgb&&(qr===cf||qr===rd)?ur[qr]=qr:qr===Is||ln.indexOf("rgba")>=0?ur[qr]=kr:ur[qr]=An,ur},{});function Ln(){this.internalformat=kr,this.format=kr,this.type=hf,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=_v,this.width=0,this.height=0,this.channels=0}function wi(ur,ln){ur.internalformat=ln.internalformat,ur.format=ln.format,ur.type=ln.type,ur.compressed=ln.compressed,ur.premultiplyAlpha=ln.premultiplyAlpha,ur.flipY=ln.flipY,ur.unpackAlignment=ln.unpackAlignment,ur.colorSpace=ln.colorSpace,ur.width=ln.width,ur.height=ln.height,ur.channels=ln.channels}function ta(ur,ln){if(!(typeof ln!="object"||!ln)){if("premultiplyAlpha"in ln&&(se.type(ln.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),ur.premultiplyAlpha=ln.premultiplyAlpha),"flipY"in ln&&(se.type(ln.flipY,"boolean","invalid texture flip"),ur.flipY=ln.flipY),"alignment"in ln&&(se.oneOf(ln.alignment,[1,2,4,8],"invalid texture unpack alignment"),ur.unpackAlignment=ln.alignment),"colorSpace"in ln&&(se.parameter(ln.colorSpace,ai,"invalid colorSpace"),ur.colorSpace=ai[ln.colorSpace]),"type"in ln){var qr=ln.type;se(Gt.oes_texture_float||!(qr==="float"||qr==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),se(Gt.oes_texture_half_float||!(qr==="half float"||qr==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),se(Gt.webgl_depth_texture||!(qr==="uint16"||qr==="uint32"||qr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),se.parameter(qr,xi,"invalid texture type"),ur.type=xi[qr]}var ki=ur.width,Ja=ur.height,Tn=ur.channels,Bt=!1;"shape"in ln?(se(Array.isArray(ln.shape)&&ln.shape.length>=2,"shape must be an array"),ki=ln.shape[0],Ja=ln.shape[1],ln.shape.length===3&&(Tn=ln.shape[2],se(Tn>0&&Tn<=4,"invalid number of channels"),Bt=!0),se(ki>=0&&ki<=dr.maxTextureSize,"invalid width"),se(Ja>=0&&Ja<=dr.maxTextureSize,"invalid height")):("radius"in ln&&(ki=Ja=ln.radius,se(ki>=0&&ki<=dr.maxTextureSize,"invalid radius")),"width"in ln&&(ki=ln.width,se(ki>=0&&ki<=dr.maxTextureSize,"invalid width")),"height"in ln&&(Ja=ln.height,se(Ja>=0&&Ja<=dr.maxTextureSize,"invalid height")),"channels"in ln&&(Tn=ln.channels,se(Tn>0&&Tn<=4,"invalid number of channels"),Bt=!0)),ur.width=ki|0,ur.height=Ja|0,ur.channels=Tn|0;var ut=!1;if("format"in ln){var hr=ln.format;se(Gt.webgl_depth_texture||!(hr==="depth"||hr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),se.parameter(hr,En,"invalid texture format");var rn=ur.internalformat=En[hr];ur.format=Ti[rn],hr in xi&&("type"in ln||(ur.type=xi[hr])),hr in ci&&(ur.compressed=!0),ut=!0}!Bt&&ut?ur.channels=Hs[ur.format]:Bt&&!ut?ur.channels!==Gc[ur.format]&&(ur.format=ur.internalformat=Gc[ur.channels]):ut&&Bt&&se(ur.channels===Hs[ur.format],"number of channels inconsistent with specified format")}}function Ua(ur){Xe.pixelStorei(ad,ur.flipY),Xe.pixelStorei(Of,ur.premultiplyAlpha),Xe.pixelStorei(bp,ur.colorSpace),Xe.pixelStorei(mo,ur.unpackAlignment)}function Ai(){Ln.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Gn(ur,ln){var qr=null;if(eu(ln)?qr=ln:ln&&(se.type(ln,"object","invalid pixel data type"),ta(ur,ln),"x"in ln&&(ur.xOffset=ln.x|0),"y"in ln&&(ur.yOffset=ln.y|0),eu(ln.data)&&(qr=ln.data)),se(!ur.compressed||qr instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),ln.copy){se(!qr,"can not specify copy and data field for the same texture");var ki=wn.viewportWidth,Ja=wn.viewportHeight;ur.width=ur.width||ki-ur.xOffset,ur.height=ur.height||Ja-ur.yOffset,ur.needsCopy=!0,se(ur.xOffset>=0&&ur.xOffset<ki&&ur.yOffset>=0&&ur.yOffset<Ja&&ur.width>0&&ur.width<=ki&&ur.height>0&&ur.height<=Ja,"copy texture read out of bounds")}else if(!qr)ur.width=ur.width||1,ur.height=ur.height||1,ur.channels=ur.channels||4;else if(N(qr))ur.channels=ur.channels||4,ur.data=qr,!("type"in ln)&&ur.type===hf&&(ur.type=fl(qr));else if(fu(qr))ur.channels=ur.channels||4,xv(ur,qr),ur.alignment=1,ur.needsFree=!0;else if(No(qr)){var Tn=qr.data;!Array.isArray(Tn)&&ur.type===hf&&(ur.type=fl(Tn));var Bt=qr.shape,ut=qr.stride,hr,rn,$r,Ar,Ir,Lr;Bt.length===3?($r=Bt[2],Lr=ut[2]):(se(Bt.length===2,"invalid ndarray pixel data, must be 2 or 3D"),$r=1,Lr=1),hr=Bt[0],rn=Bt[1],Ar=ut[0],Ir=ut[1],ur.alignment=1,ur.width=hr,ur.height=rn,ur.channels=$r,ur.format=ur.internalformat=Gc[$r],ur.needsFree=!0,zd(ur,Tn,Ar,Ir,Lr,qr.offset)}else if(hh(qr)||Oh(qr)||Tc(qr))hh(qr)||Oh(qr)?ur.element=qr:ur.element=qr.canvas,ur.width=ur.element.width,ur.height=ur.element.height,ur.channels=4;else if(bu(qr))ur.element=qr,ur.width=qr.width,ur.height=qr.height,ur.channels=4;else if(Ep(qr))ur.element=qr,ur.width=qr.naturalWidth,ur.height=qr.naturalHeight,ur.channels=4;else if(Mc(qr))ur.element=qr,ur.width=qr.videoWidth,ur.height=qr.videoHeight,ur.channels=4;else if(Si(qr)){var lr=ur.width||qr[0].length,Rr=ur.height||qr.length,Yt=ur.channels;ts(qr[0][0])?Yt=Yt||qr[0][0].length:Yt=Yt||1;for(var Pr=uu.shape(qr),pn=1,dn=0;dn<Pr.length;++dn)pn*=Pr[dn];var Zn=kh(ur,pn);uu.flatten(qr,Pr,"",Zn),Fh(ur,Zn),ur.alignment=1,ur.width=lr,ur.height=Rr,ur.channels=Yt,ur.format=ur.internalformat=Gc[Yt],ur.needsFree=!0}ur.type===Pf?se(dr.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):ur.type===wa&&se(dr.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Rn(ur,ln,qr){var ki=ur.element,Ja=ur.data,Tn=ur.internalformat,Bt=ur.format,ut=ur.type,hr=ur.width,rn=ur.height;Ua(ur),ki?Xe.texImage2D(ln,qr,Bt,Bt,ut,ki):ur.compressed?Xe.compressedTexImage2D(ln,qr,Tn,hr,rn,0,Ja):ur.needsCopy?(on(),Xe.copyTexImage2D(ln,qr,Bt,ur.xOffset,ur.yOffset,hr,rn,0)):Xe.texImage2D(ln,qr,Bt,hr,rn,0,Bt,ut,Ja||null)}function aa(ur,ln,qr,ki,Ja){var Tn=ur.element,Bt=ur.data,ut=ur.internalformat,hr=ur.format,rn=ur.type,$r=ur.width,Ar=ur.height;Ua(ur),Tn?Xe.texSubImage2D(ln,Ja,qr,ki,hr,rn,Tn):ur.compressed?Xe.compressedTexSubImage2D(ln,Ja,qr,ki,ut,$r,Ar,Bt):ur.needsCopy?(on(),Xe.copyTexSubImage2D(ln,Ja,qr,ki,ur.xOffset,ur.yOffset,$r,Ar)):Xe.texSubImage2D(ln,Ja,qr,ki,$r,Ar,hr,rn,Bt)}var to=[];function Oi(){return to.pop()||new Ai}function Ka(ur){ur.needsFree&&mr.freeType(ur.data),Ai.call(ur),to.push(ur)}function ka(){Ln.call(this),this.genMipmaps=!1,this.mipmapHint=Ac,this.mipmask=0,this.images=Array(16)}function xa(ur,ln,qr){var ki=ur.images[0]=Oi();ur.mipmask=1,ki.width=ur.width=ln,ki.height=ur.height=qr,ki.channels=ur.channels=4}function wo(ur,ln){var qr=null;if(eu(ln))qr=ur.images[0]=Oi(),wi(qr,ur),Gn(qr,ln),ur.mipmask=1;else if(ta(ur,ln),Array.isArray(ln.mipmap))for(var ki=ln.mipmap,Ja=0;Ja<ki.length;++Ja)qr=ur.images[Ja]=Oi(),wi(qr,ur),qr.width>>=Ja,qr.height>>=Ja,Gn(qr,ki[Ja]),ur.mipmask|=1<<Ja;else qr=ur.images[0]=Oi(),wi(qr,ur),Gn(qr,ln),ur.mipmask=1;wi(ur,ur.images[0]),ur.compressed&&(ur.internalformat===ff||ur.internalformat===ah||ur.internalformat===oh||ur.internalformat===If)&&se(ur.width%4===0&&ur.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function pu(ur,ln){for(var qr=ur.images,ki=0;ki<qr.length;++ki){if(!qr[ki])return;Rn(qr[ki],ln,ki)}}var Fu=[];function vo(){var ur=Fu.pop()||new ka;Ln.call(ur),ur.mipmask=0;for(var ln=0;ln<16;++ln)ur.images[ln]=null;return ur}function ss(ur){for(var ln=ur.images,qr=0;qr<ln.length;++qr)ln[qr]&&Ka(ln[qr]),ln[qr]=null;Fu.push(ur)}function Uo(){this.minFilter=xp,this.magFilter=xp,this.wrapS=yp,this.wrapT=yp,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Ac}function du(ur,ln){if("min"in ln){var qr=ln.min;se.parameter(qr,ni),ur.minFilter=ni[qr],Sp.indexOf(ur.minFilter)>=0&&!("faces"in ln)&&(ur.genMipmaps=!0)}if("mag"in ln){var ki=ln.mag;se.parameter(ki,li),ur.magFilter=li[ki]}var Ja=ur.wrapS,Tn=ur.wrapT;if("wrap"in ln){var Bt=ln.wrap;typeof Bt=="string"?(se.parameter(Bt,zn),Ja=Tn=zn[Bt]):Array.isArray(Bt)&&(se.parameter(Bt[0],zn),se.parameter(Bt[1],zn),Ja=zn[Bt[0]],Tn=zn[Bt[1]])}else{if("wrapS"in ln){var ut=ln.wrapS;se.parameter(ut,zn),Ja=zn[ut]}if("wrapT"in ln){var hr=ln.wrapT;se.parameter(hr,zn),Tn=zn[hr]}}if(ur.wrapS=Ja,ur.wrapT=Tn,"anisotropic"in ln){var rn=ln.anisotropic;se(typeof rn=="number"&&rn>=1&&rn<=dr.maxAnisotropic,"aniso samples must be between 1 and "),ur.anisotropic=ln.anisotropic}if("mipmap"in ln){var $r=!1;switch(typeof ln.mipmap){case"string":se.parameter(ln.mipmap,Yn,"invalid mipmap hint"),ur.mipmapHint=Yn[ln.mipmap],ur.genMipmaps=!0,$r=!0;break;case"boolean":$r=ur.genMipmaps=ln.mipmap;break;case"object":se(Array.isArray(ln.mipmap),"invalid mipmap type"),ur.genMipmaps=!1,$r=!0;break;default:se.raise("invalid mipmap type")}$r&&!("min"in ln)&&(ur.minFilter=Wc)}}function zs(ur,ln){Xe.texParameteri(ln,_p,ur.minFilter),Xe.texParameteri(ln,Bd,ur.magFilter),Xe.texParameteri(ln,fm,ur.wrapS),Xe.texParameteri(ln,id,ur.wrapT),Gt.ext_texture_filter_anisotropic&&Xe.texParameteri(ln,Xo,ur.anisotropic),ur.genMipmaps&&(Xe.hint(ch,ur.mipmapHint),Xe.generateMipmap(ln))}var Fs=0,$s={},Ys=dr.maxTextureUnits,Ks=Array(Ys).map(function(){return null});function qa(ur){Ln.call(this),this.mipmask=0,this.internalformat=kr,this.id=Fs++,this.refCount=1,this.target=ur,this.texture=Xe.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Uo,Yr.profile&&(this.stats={size:0})}function Tu(ur){Xe.activeTexture(ga),Xe.bindTexture(ur.target,ur.texture)}function ko(){var ur=Ks[0];ur?Xe.bindTexture(ur.target,ur.texture):Xe.bindTexture(Ou,null)}function ma(ur){var ln=ur.texture;se(ln,"must not double destroy texture");var qr=ur.unit,ki=ur.target;qr>=0&&(Xe.activeTexture(ga+qr),Xe.bindTexture(ki,null),Ks[qr]=null),Xe.deleteTexture(ln),ur.texture=null,ur.params=null,ur.pixels=null,ur.refCount=0,delete $s[ur.id],un.textureCount--}F(qa.prototype,{bind:function(){var ur=this;ur.bindCount+=1;var ln=ur.unit;if(ln<0){for(var qr=0;qr<Ys;++qr){var ki=Ks[qr];if(ki){if(ki.bindCount>0)continue;ki.unit=-1}Ks[qr]=ur,ln=qr;break}ln>=Ys&&se.raise("insufficient number of texture units"),Yr.profile&&un.maxTextureUnits<ln+1&&(un.maxTextureUnits=ln+1),ur.unit=ln,Xe.activeTexture(ga+ln),Xe.bindTexture(ur.target,ur.texture)}return ln},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&ma(this)}});function da(ur,ln){var qr=new qa(Ou);$s[qr.id]=qr,un.textureCount++;function ki(Bt,ut){var hr=qr.texInfo;Uo.call(hr);var rn=vo();return typeof Bt=="number"?typeof ut=="number"?xa(rn,Bt|0,ut|0):xa(rn,Bt|0,Bt|0):Bt?(se.type(Bt,"object","invalid arguments to regl.texture"),du(hr,Bt),wo(rn,Bt)):xa(rn,1,1),hr.genMipmaps&&(rn.mipmask=(rn.width<<1)-1),qr.mipmask=rn.mipmask,wi(qr,rn),se.texture2D(hr,rn,dr),qr.internalformat=rn.internalformat,ki.width=rn.width,ki.height=rn.height,Tu(qr),pu(rn,Ou),zs(hr,Ou),ko(),ss(rn),Yr.profile&&(qr.stats.size=lc(qr.internalformat,qr.type,rn.width,rn.height,hr.genMipmaps,!1)),ki.format=ti[qr.internalformat],ki.type=Ci[qr.type],ki.mag=Vr[hr.magFilter],ki.min=Bi[hr.minFilter],ki.wrapS=Wn[hr.wrapS],ki.wrapT=Wn[hr.wrapT],ki}function Ja(Bt,ut,hr,rn){se(!!Bt,"must specify image data");var $r=ut|0,Ar=hr|0,Ir=rn|0,Lr=Oi();return wi(Lr,qr),Lr.width=0,Lr.height=0,Gn(Lr,Bt),Lr.width=Lr.width||(qr.width>>Ir)-$r,Lr.height=Lr.height||(qr.height>>Ir)-Ar,se(qr.type===Lr.type&&qr.format===Lr.format&&qr.internalformat===Lr.internalformat,"incompatible format for texture.subimage"),se($r>=0&&Ar>=0&&$r+Lr.width<=qr.width&&Ar+Lr.height<=qr.height,"texture.subimage write out of bounds"),se(qr.mipmask&1<<Ir,"missing mipmap data"),se(Lr.data||Lr.element||Lr.needsCopy,"missing image data"),Tu(qr),aa(Lr,Ou,$r,Ar,Ir),ko(),Ka(Lr),ki}function Tn(Bt,ut){var hr=Bt|0,rn=ut|0||hr;if(hr===qr.width&&rn===qr.height)return ki;ki.width=qr.width=hr,ki.height=qr.height=rn,Tu(qr);for(var $r=0;qr.mipmask>>$r;++$r){var Ar=hr>>$r,Ir=rn>>$r;if(!Ar||!Ir)break;Xe.texImage2D(Ou,$r,qr.format,Ar,Ir,0,qr.format,qr.type,null)}return ko(),Yr.profile&&(qr.stats.size=lc(qr.internalformat,qr.type,hr,rn,!1,!1)),ki}return ki(ur,ln),ki.subimage=Ja,ki.resize=Tn,ki._reglType="texture2d",ki._texture=qr,Yr.profile&&(ki.stats=qr.stats),ki.destroy=function(){qr.decRef()},ki}function So(ur,ln,qr,ki,Ja,Tn){var Bt=new qa(St);$s[Bt.id]=Bt,un.cubeCount++;var ut=new Array(6);function hr(Ar,Ir,Lr,lr,Rr,Yt){var Pr,pn=Bt.texInfo;for(Uo.call(pn),Pr=0;Pr<6;++Pr)ut[Pr]=vo();if(typeof Ar=="number"||!Ar){var dn=Ar|0||1;for(Pr=0;Pr<6;++Pr)xa(ut[Pr],dn,dn)}else if(typeof Ar=="object")if(Ir)wo(ut[0],Ar),wo(ut[1],Ir),wo(ut[2],Lr),wo(ut[3],lr),wo(ut[4],Rr),wo(ut[5],Yt);else if(du(pn,Ar),ta(Bt,Ar),"faces"in Ar){var Zn=Ar.faces;for(se(Array.isArray(Zn)&&Zn.length===6,"cube faces must be a length 6 array"),Pr=0;Pr<6;++Pr)se(typeof Zn[Pr]=="object"&&!!Zn[Pr],"invalid input for cube map face"),wi(ut[Pr],Bt),wo(ut[Pr],Zn[Pr])}else for(Pr=0;Pr<6;++Pr)wo(ut[Pr],Ar);else se.raise("invalid arguments to cube map");for(wi(Bt,ut[0]),dr.npotTextureCube||se(hp(Bt.width)&&hp(Bt.height),"your browser does not support non power or two texture dimensions"),pn.genMipmaps?Bt.mipmask=(ut[0].width<<1)-1:Bt.mipmask=ut[0].mipmask,se.textureCube(Bt,pn,ut,dr),Bt.internalformat=ut[0].internalformat,hr.width=ut[0].width,hr.height=ut[0].height,Tu(Bt),Pr=0;Pr<6;++Pr)pu(ut[Pr],cr+Pr);for(zs(pn,St),ko(),Yr.profile&&(Bt.stats.size=lc(Bt.internalformat,Bt.type,hr.width,hr.height,pn.genMipmaps,!0)),hr.format=ti[Bt.internalformat],hr.type=Ci[Bt.type],hr.mag=Vr[pn.magFilter],hr.min=Bi[pn.minFilter],hr.wrapS=Wn[pn.wrapS],hr.wrapT=Wn[pn.wrapT],Pr=0;Pr<6;++Pr)ss(ut[Pr]);return hr}function rn(Ar,Ir,Lr,lr,Rr){se(!!Ir,"must specify image data"),se(typeof Ar=="number"&&Ar===(Ar|0)&&Ar>=0&&Ar<6,"invalid face");var Yt=Lr|0,Pr=lr|0,pn=Rr|0,dn=Oi();return wi(dn,Bt),dn.width=0,dn.height=0,Gn(dn,Ir),dn.width=dn.width||(Bt.width>>pn)-Yt,dn.height=dn.height||(Bt.height>>pn)-Pr,se(Bt.type===dn.type&&Bt.format===dn.format&&Bt.internalformat===dn.internalformat,"incompatible format for texture.subimage"),se(Yt>=0&&Pr>=0&&Yt+dn.width<=Bt.width&&Pr+dn.height<=Bt.height,"texture.subimage write out of bounds"),se(Bt.mipmask&1<<pn,"missing mipmap data"),se(dn.data||dn.element||dn.needsCopy,"missing image data"),Tu(Bt),aa(dn,cr+Ar,Yt,Pr,pn),ko(),Ka(dn),hr}function $r(Ar){var Ir=Ar|0;if(Ir!==Bt.width){hr.width=Bt.width=Ir,hr.height=Bt.height=Ir,Tu(Bt);for(var Lr=0;Lr<6;++Lr)for(var lr=0;Bt.mipmask>>lr;++lr)Xe.texImage2D(cr+Lr,lr,Bt.format,Ir>>lr,Ir>>lr,0,Bt.format,Bt.type,null);return ko(),Yr.profile&&(Bt.stats.size=lc(Bt.internalformat,Bt.type,hr.width,hr.height,!1,!0)),hr}}return hr(ur,ln,qr,ki,Ja,Tn),hr.subimage=rn,hr.resize=$r,hr._reglType="textureCube",hr._texture=Bt,Yr.profile&&(hr.stats=Bt.stats),hr.destroy=function(){Bt.decRef()},hr}function Us(){for(var ur=0;ur<Ys;++ur)Xe.activeTexture(ga+ur),Xe.bindTexture(Ou,null),Ks[ur]=null;ro($s).forEach(ma),un.cubeCount=0,un.textureCount=0}Yr.profile&&(un.getTotalTextureSize=function(){var ur=0;return Object.keys($s).forEach(function(ln){ur+=$s[ln].stats.size}),ur});function Du(){for(var ur=0;ur<Ys;++ur){var ln=Ks[ur];ln&&(ln.bindCount=0,ln.unit=-1,Ks[ur]=null)}ro($s).forEach(function(qr){qr.texture=Xe.createTexture(),Xe.bindTexture(qr.target,qr.texture);for(var ki=0;ki<32;++ki)if(qr.mipmask&1<<ki)if(qr.target===Ou)Xe.texImage2D(Ou,ki,qr.internalformat,qr.width>>ki,qr.height>>ki,0,qr.internalformat,qr.type,null);else for(var Ja=0;Ja<6;++Ja)Xe.texImage2D(cr+Ja,ki,qr.internalformat,qr.width>>ki,qr.height>>ki,0,qr.internalformat,qr.type,null);zs(qr.texInfo,qr.target)})}return{create2D:da,createCube:So,clear:Us,getTexture:function(ur){return null},restore:Du}}var $a=36161,Cs=32854,Ql=32855,Wu=36194,Ff=33189,Rc=36168,Qu=34041,Su=35907,Dh=34836,ea=34842,Ei=34843,wl=[];wl[Cs]=2,wl[Ql]=2,wl[Wu]=2,wl[Ff]=2,wl[Rc]=1,wl[Qu]=4,wl[Su]=4,wl[Dh]=16,wl[ea]=8,wl[Ei]=6;function Ju(Xe,Gt,dr){return wl[Xe]*Gt*dr}var Gu=function(Xe,Gt,dr,on,wn){var un={rgba4:Cs,rgb565:Wu,"rgb5 a1":Ql,depth:Ff,stencil:Rc,"depth stencil":Qu};Gt.ext_srgb&&(un.srgba=Su),Gt.ext_color_buffer_half_float&&(un.rgba16f=ea,un.rgb16f=Ei),Gt.webgl_color_buffer_float&&(un.rgba32f=Dh);var Yr=[];Object.keys(un).forEach(function(En){var ci=un[En];Yr[ci]=En});var Yn=0,zn={};function li(En){this.id=Yn++,this.refCount=1,this.renderbuffer=En,this.format=Cs,this.width=0,this.height=0,wn.profile&&(this.stats={size:0})}li.prototype.decRef=function(){--this.refCount<=0&&ni(this)};function ni(En){var ci=En.renderbuffer;se(ci,"must not double destroy renderbuffer"),Xe.bindRenderbuffer($a,null),Xe.deleteRenderbuffer(ci),En.renderbuffer=null,En.refCount=0,delete zn[En.id],on.renderbufferCount--}function ai(En,ci){var jr=new li(Xe.createRenderbuffer());zn[jr.id]=jr,on.renderbufferCount++;function mn(Ci,Vr){var Bi=0,Wn=0,Ti=Cs;if(typeof Ci=="object"&&Ci){var Ln=Ci;if("shape"in Ln){var wi=Ln.shape;se(Array.isArray(wi)&&wi.length>=2,"invalid renderbuffer shape"),Bi=wi[0]|0,Wn=wi[1]|0}else"radius"in Ln&&(Bi=Wn=Ln.radius|0),"width"in Ln&&(Bi=Ln.width|0),"height"in Ln&&(Wn=Ln.height|0);"format"in Ln&&(se.parameter(Ln.format,un,"invalid renderbuffer format"),Ti=un[Ln.format])}else typeof Ci=="number"?(Bi=Ci|0,typeof Vr=="number"?Wn=Vr|0:Wn=Bi):Ci?se.raise("invalid arguments to renderbuffer constructor"):Bi=Wn=1;if(se(Bi>0&&Wn>0&&Bi<=dr.maxRenderbufferSize&&Wn<=dr.maxRenderbufferSize,"invalid renderbuffer size"),!(Bi===jr.width&&Wn===jr.height&&Ti===jr.format))return mn.width=jr.width=Bi,mn.height=jr.height=Wn,jr.format=Ti,Xe.bindRenderbuffer($a,jr.renderbuffer),Xe.renderbufferStorage($a,Ti,Bi,Wn),se(Xe.getError()===0,"invalid render buffer format"),wn.profile&&(jr.stats.size=Ju(jr.format,jr.width,jr.height)),mn.format=Yr[jr.format],mn}function ti(Ci,Vr){var Bi=Ci|0,Wn=Vr|0||Bi;return Bi===jr.width&&Wn===jr.height||(se(Bi>0&&Wn>0&&Bi<=dr.maxRenderbufferSize&&Wn<=dr.maxRenderbufferSize,"invalid renderbuffer size"),mn.width=jr.width=Bi,mn.height=jr.height=Wn,Xe.bindRenderbuffer($a,jr.renderbuffer),Xe.renderbufferStorage($a,jr.format,Bi,Wn),se(Xe.getError()===0,"invalid render buffer format"),wn.profile&&(jr.stats.size=Ju(jr.format,jr.width,jr.height))),mn}return mn(En,ci),mn.resize=ti,mn._reglType="renderbuffer",mn._renderbuffer=jr,wn.profile&&(mn.stats=jr.stats),mn.destroy=function(){jr.decRef()},mn}wn.profile&&(on.getTotalRenderbufferSize=function(){var En=0;return Object.keys(zn).forEach(function(ci){En+=zn[ci].stats.size}),En});function xi(){ro(zn).forEach(function(En){En.renderbuffer=Xe.createRenderbuffer(),Xe.bindRenderbuffer($a,En.renderbuffer),Xe.renderbufferStorage($a,En.format,En.width,En.height)}),Xe.bindRenderbuffer($a,null)}return{create:ai,clear:function(){ro(zn).forEach(ni)},restore:xi}},As=36160,cc=36161,Df=3553,ph=34069,zo=36064,js=36096,bv=36128,dh=33306,Lf=36053,fc=36054,Ra=36055,vh=36057,$c=36061,sd=36193,Bf=5121,Lh=5126,Ud=6407,fn=6408,vr=6402,Fe=[Ud,fn],Yc=[];Yc[fn]=4,Yc[Ud]=3;var $t=[];$t[Bf]=1,$t[Lh]=4,$t[sd]=2;var ud=32854,Ws=32855,Vl=36194,Bh=33189,Cl=36168,wp=34041,Cp=35907,b=34836,T=34842,C=34843,I=[ud,Ws,Vl,Cp,T,C,b],Z={};Z[Lf]="complete",Z[fc]="incomplete attachment",Z[vh]="incomplete dimensions",Z[Ra]="incomplete, missing attachment",Z[$c]="unsupported";function q(Xe,Gt,dr,on,wn,un){var Yr={cur:null,next:null,dirty:!1,setFBO:null},Yn=["rgba"],zn=["rgba4","rgb565","rgb5 a1"];Gt.ext_srgb&&zn.push("srgba"),Gt.ext_color_buffer_half_float&&zn.push("rgba16f","rgb16f"),Gt.webgl_color_buffer_float&&zn.push("rgba32f");var li=["uint8"];Gt.oes_texture_half_float&&li.push("half float","float16"),Gt.oes_texture_float&&li.push("float","float32");function ni(Ai,Gn,Rn){this.target=Ai,this.texture=Gn,this.renderbuffer=Rn;var aa=0,to=0;Gn?(aa=Gn.width,to=Gn.height):Rn&&(aa=Rn.width,to=Rn.height),this.width=aa,this.height=to}function ai(Ai){Ai&&(Ai.texture&&Ai.texture._texture.decRef(),Ai.renderbuffer&&Ai.renderbuffer._renderbuffer.decRef())}function xi(Ai,Gn,Rn){if(Ai)if(Ai.texture){var aa=Ai.texture._texture,to=Math.max(1,aa.width),Oi=Math.max(1,aa.height);se(to===Gn&&Oi===Rn,"inconsistent width/height for supplied texture"),aa.refCount+=1}else{var Ka=Ai.renderbuffer._renderbuffer;se(Ka.width===Gn&&Ka.height===Rn,"inconsistent width/height for renderbuffer"),Ka.refCount+=1}}function En(Ai,Gn){Gn&&(Gn.texture?Xe.framebufferTexture2D(As,Ai,Gn.target,Gn.texture._texture.texture,0):Xe.framebufferRenderbuffer(As,Ai,cc,Gn.renderbuffer._renderbuffer.renderbuffer))}function ci(Ai){var Gn=Df,Rn=null,aa=null,to=Ai;typeof Ai=="object"&&(to=Ai.data,"target"in Ai&&(Gn=Ai.target|0)),se.type(to,"function","invalid attachment data");var Oi=to._reglType;return Oi==="texture2d"?(Rn=to,se(Gn===Df)):Oi==="textureCube"?(Rn=to,se(Gn>=ph&&Gn<ph+6,"invalid cube map target")):Oi==="renderbuffer"?(aa=to,Gn=cc):se.raise("invalid regl object for attachment"),new ni(Gn,Rn,aa)}function jr(Ai,Gn,Rn,aa,to){if(Rn){var Oi=on.create2D({width:Ai,height:Gn,format:aa,type:to});return Oi._texture.refCount=0,new ni(Df,Oi,null)}else{var Ka=wn.create({width:Ai,height:Gn,format:aa});return Ka._renderbuffer.refCount=0,new ni(cc,null,Ka)}}function mn(Ai){return Ai&&(Ai.texture||Ai.renderbuffer)}function ti(Ai,Gn,Rn){Ai&&(Ai.texture?Ai.texture.resize(Gn,Rn):Ai.renderbuffer&&Ai.renderbuffer.resize(Gn,Rn),Ai.width=Gn,Ai.height=Rn)}var Ci=0,Vr={};function Bi(){this.id=Ci++,Vr[this.id]=this,this.framebuffer=Xe.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Wn(Ai){Ai.colorAttachments.forEach(ai),ai(Ai.depthAttachment),ai(Ai.stencilAttachment),ai(Ai.depthStencilAttachment)}function Ti(Ai){var Gn=Ai.framebuffer;se(Gn,"must not double destroy framebuffer"),Xe.deleteFramebuffer(Gn),Ai.framebuffer=null,un.framebufferCount--,delete Vr[Ai.id]}function Ln(Ai){var Gn;Xe.bindFramebuffer(As,Ai.framebuffer);var Rn=Ai.colorAttachments;for(Gn=0;Gn<Rn.length;++Gn)En(zo+Gn,Rn[Gn]);for(Gn=Rn.length;Gn<dr.maxColorAttachments;++Gn)Xe.framebufferTexture2D(As,zo+Gn,Df,null,0);Xe.framebufferTexture2D(As,dh,Df,null,0),Xe.framebufferTexture2D(As,js,Df,null,0),Xe.framebufferTexture2D(As,bv,Df,null,0),En(js,Ai.depthAttachment),En(bv,Ai.stencilAttachment),En(dh,Ai.depthStencilAttachment);var aa=Xe.checkFramebufferStatus(As);!Xe.isContextLost()&&aa!==Lf&&se.raise("framebuffer configuration not supported, status = "+Z[aa]),Xe.bindFramebuffer(As,Yr.next?Yr.next.framebuffer:null),Yr.cur=Yr.next,Xe.getError()}function wi(Ai,Gn){var Rn=new Bi;un.framebufferCount++;function aa(Oi,Ka){var ka;se(Yr.next!==Rn,"can not update framebuffer which is currently in use");var xa=0,wo=0,pu=!0,Fu=!0,vo=null,ss=!0,Uo="rgba",du="uint8",zs=1,Fs=null,$s=null,Ys=null,Ks=!1;if(typeof Oi=="number")xa=Oi|0,wo=Ka|0||xa;else if(!Oi)xa=wo=1;else{se.type(Oi,"object","invalid arguments for framebuffer");var qa=Oi;if("shape"in qa){var Tu=qa.shape;se(Array.isArray(Tu)&&Tu.length>=2,"invalid shape for framebuffer"),xa=Tu[0],wo=Tu[1]}else"radius"in qa&&(xa=wo=qa.radius),"width"in qa&&(xa=qa.width),"height"in qa&&(wo=qa.height);("color"in qa||"colors"in qa)&&(vo=qa.color||qa.colors,Array.isArray(vo)&&se(vo.length===1||Gt.webgl_draw_buffers,"multiple render targets not supported")),vo||("colorCount"in qa&&(zs=qa.colorCount|0,se(zs>0,"invalid color buffer count")),"colorTexture"in qa&&(ss=!!qa.colorTexture,Uo="rgba4"),"colorType"in qa&&(du=qa.colorType,ss?(se(Gt.oes_texture_float||!(du==="float"||du==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),se(Gt.oes_texture_half_float||!(du==="half float"||du==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):du==="half float"||du==="float16"?(se(Gt.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Uo="rgba16f"):(du==="float"||du==="float32")&&(se(Gt.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Uo="rgba32f"),se.oneOf(du,li,"invalid color type")),"colorFormat"in qa&&(Uo=qa.colorFormat,Yn.indexOf(Uo)>=0?ss=!0:zn.indexOf(Uo)>=0?ss=!1:ss?se.oneOf(qa.colorFormat,Yn,"invalid color format for texture"):se.oneOf(qa.colorFormat,zn,"invalid color format for renderbuffer"))),("depthTexture"in qa||"depthStencilTexture"in qa)&&(Ks=!!(qa.depthTexture||qa.depthStencilTexture),se(!Ks||Gt.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in qa&&(typeof qa.depth=="boolean"?pu=qa.depth:(Fs=qa.depth,Fu=!1)),"stencil"in qa&&(typeof qa.stencil=="boolean"?Fu=qa.stencil:($s=qa.stencil,pu=!1)),"depthStencil"in qa&&(typeof qa.depthStencil=="boolean"?pu=Fu=qa.depthStencil:(Ys=qa.depthStencil,pu=!1,Fu=!1))}var ko=null,ma=null,da=null,So=null;if(Array.isArray(vo))ko=vo.map(ci);else if(vo)ko=[ci(vo)];else for(ko=new Array(zs),ka=0;ka<zs;++ka)ko[ka]=jr(xa,wo,ss,Uo,du);se(Gt.webgl_draw_buffers||ko.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),se(ko.length<=dr.maxColorAttachments,"too many color attachments, not supported"),xa=xa||ko[0].width,wo=wo||ko[0].height,Fs?ma=ci(Fs):pu&&!Fu&&(ma=jr(xa,wo,Ks,"depth","uint32")),$s?da=ci($s):Fu&&!pu&&(da=jr(xa,wo,!1,"stencil","uint8")),Ys?So=ci(Ys):!Fs&&!$s&&Fu&&pu&&(So=jr(xa,wo,Ks,"depth stencil","depth stencil")),se(!!Fs+!!$s+!!Ys<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Us=null;for(ka=0;ka<ko.length;++ka)if(xi(ko[ka],xa,wo),se(!ko[ka]||ko[ka].texture&&Fe.indexOf(ko[ka].texture._texture.format)>=0||ko[ka].renderbuffer&&I.indexOf(ko[ka].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+ka+" is invalid"),ko[ka]&&ko[ka].texture){var Du=Yc[ko[ka].texture._texture.format]*$t[ko[ka].texture._texture.type];Us===null?Us=Du:se(Us===Du,"all color attachments much have the same number of bits per pixel.")}return xi(ma,xa,wo),se(!ma||ma.texture&&ma.texture._texture.format===vr||ma.renderbuffer&&ma.renderbuffer._renderbuffer.format===Bh,"invalid depth attachment for framebuffer object"),xi(da,xa,wo),se(!da||da.renderbuffer&&da.renderbuffer._renderbuffer.format===Cl,"invalid stencil attachment for framebuffer object"),xi(So,xa,wo),se(!So||So.texture&&So.texture._texture.format===wp||So.renderbuffer&&So.renderbuffer._renderbuffer.format===wp,"invalid depth-stencil attachment for framebuffer object"),Wn(Rn),Rn.width=xa,Rn.height=wo,Rn.colorAttachments=ko,Rn.depthAttachment=ma,Rn.stencilAttachment=da,Rn.depthStencilAttachment=So,aa.color=ko.map(mn),aa.depth=mn(ma),aa.stencil=mn(da),aa.depthStencil=mn(So),aa.width=Rn.width,aa.height=Rn.height,Ln(Rn),aa}function to(Oi,Ka){se(Yr.next!==Rn,"can not resize a framebuffer which is currently in use");var ka=Math.max(Oi|0,1),xa=Math.max(Ka|0||ka,1);if(ka===Rn.width&&xa===Rn.height)return aa;for(var wo=Rn.colorAttachments,pu=0;pu<wo.length;++pu)ti(wo[pu],ka,xa);return ti(Rn.depthAttachment,ka,xa),ti(Rn.stencilAttachment,ka,xa),ti(Rn.depthStencilAttachment,ka,xa),Rn.width=aa.width=ka,Rn.height=aa.height=xa,Ln(Rn),aa}return aa(Ai,Gn),F(aa,{resize:to,_reglType:"framebuffer",_framebuffer:Rn,destroy:function(){Ti(Rn),Wn(Rn)},use:function(Oi){Yr.setFBO({framebuffer:aa},Oi)}})}function ta(Ai){var Gn=Array(6);function Rn(to){var Oi;se(Gn.indexOf(Yr.next)<0,"can not update framebuffer which is currently in use");var Ka={color:null},ka=0,xa=null,wo="rgba",pu="uint8",Fu=1;if(typeof to=="number")ka=to|0;else if(!to)ka=1;else{se.type(to,"object","invalid arguments for framebuffer");var vo=to;if("shape"in vo){var ss=vo.shape;se(Array.isArray(ss)&&ss.length>=2,"invalid shape for framebuffer"),se(ss[0]===ss[1],"cube framebuffer must be square"),ka=ss[0]}else"radius"in vo&&(ka=vo.radius|0),"width"in vo?(ka=vo.width|0,"height"in vo&&se(vo.height===ka,"must be square")):"height"in vo&&(ka=vo.height|0);("color"in vo||"colors"in vo)&&(xa=vo.color||vo.colors,Array.isArray(xa)&&se(xa.length===1||Gt.webgl_draw_buffers,"multiple render targets not supported")),xa||("colorCount"in vo&&(Fu=vo.colorCount|0,se(Fu>0,"invalid color buffer count")),"colorType"in vo&&(se.oneOf(vo.colorType,li,"invalid color type"),pu=vo.colorType),"colorFormat"in vo&&(wo=vo.colorFormat,se.oneOf(vo.colorFormat,Yn,"invalid color format for texture"))),"depth"in vo&&(Ka.depth=vo.depth),"stencil"in vo&&(Ka.stencil=vo.stencil),"depthStencil"in vo&&(Ka.depthStencil=vo.depthStencil)}var Uo;if(xa)if(Array.isArray(xa))for(Uo=[],Oi=0;Oi<xa.length;++Oi)Uo[Oi]=xa[Oi];else Uo=[xa];else{Uo=Array(Fu);var du={radius:ka,format:wo,type:pu};for(Oi=0;Oi<Fu;++Oi)Uo[Oi]=on.createCube(du)}for(Ka.color=Array(Uo.length),Oi=0;Oi<Uo.length;++Oi){var zs=Uo[Oi];se(typeof zs=="function"&&zs._reglType==="textureCube","invalid cube map"),ka=ka||zs.width,se(zs.width===ka&&zs.height===ka,"invalid cube map shape"),Ka.color[Oi]={target:ph,data:Uo[Oi]}}for(Oi=0;Oi<6;++Oi){for(var Fs=0;Fs<Uo.length;++Fs)Ka.color[Fs].target=ph+Oi;Oi>0&&(Ka.depth=Gn[0].depth,Ka.stencil=Gn[0].stencil,Ka.depthStencil=Gn[0].depthStencil),Gn[Oi]?Gn[Oi](Ka):Gn[Oi]=wi(Ka)}return F(Rn,{width:ka,height:ka,color:Uo})}function aa(to){var Oi,Ka=to|0;if(se(Ka>0&&Ka<=dr.maxCubeMapSize,"invalid radius for cube fbo"),Ka===Rn.width)return Rn;var ka=Rn.color;for(Oi=0;Oi<ka.length;++Oi)ka[Oi].resize(Ka);for(Oi=0;Oi<6;++Oi)Gn[Oi].resize(Ka);return Rn.width=Rn.height=Ka,Rn}return Rn(Ai),F(Rn,{faces:Gn,resize:aa,_reglType:"framebufferCube",destroy:function(){Gn.forEach(function(to){to.destroy()})}})}function Ua(){Yr.cur=null,Yr.next=null,Yr.dirty=!0,ro(Vr).forEach(function(Ai){Ai.framebuffer=Xe.createFramebuffer(),Ln(Ai)})}return F(Yr,{getFramebuffer:function(Ai){if(typeof Ai=="function"&&Ai._reglType==="framebuffer"){var Gn=Ai._framebuffer;if(Gn instanceof Bi)return Gn}return null},create:wi,createCube:ta,clear:function(){ro(Vr).forEach(Ti)},restore:Ua})}var re=5126,_e=34962;function qe(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=re,this.offset=0,this.stride=0,this.divisor=0}function yt(Xe,Gt,dr,on,wn){for(var un=dr.maxAttributes,Yr=new Array(un),Yn=0;Yn<un;++Yn)Yr[Yn]=new qe;var zn=0,li={},ni={Record:qe,scope:{},state:Yr,currentVAO:null,targetVAO:null,restore:xi()?Vr:function(){},createVAO:Bi,getVAO:ci,destroyBuffer:ai,setVAO:xi()?jr:mn,clear:xi()?ti:function(){}};function ai(Wn){for(var Ti=0;Ti<Yr.length;++Ti){var Ln=Yr[Ti];Ln.buffer===Wn&&(Xe.disableVertexAttribArray(Ti),Ln.buffer=null)}}function xi(){return Gt.oes_vertex_array_object}function En(){return Gt.angle_instanced_arrays}function ci(Wn){return typeof Wn=="function"&&Wn._vao?Wn._vao:null}function jr(Wn){if(Wn!==ni.currentVAO){var Ti=xi();Wn?Ti.bindVertexArrayOES(Wn.vao):Ti.bindVertexArrayOES(null),ni.currentVAO=Wn}}function mn(Wn){if(Wn!==ni.currentVAO){if(Wn)Wn.bindAttrs();else for(var Ti=En(),Ln=0;Ln<Yr.length;++Ln){var wi=Yr[Ln];wi.buffer?(Xe.enableVertexAttribArray(Ln),Xe.vertexAttribPointer(Ln,wi.size,wi.type,wi.normalized,wi.stride,wi.offfset),Ti&&Ti.vertexAttribDivisorANGLE(Ln,wi.divisor)):(Xe.disableVertexAttribArray(Ln),Xe.vertexAttrib4f(Ln,wi.x,wi.y,wi.z,wi.w))}ni.currentVAO=Wn}}function ti(){ro(li).forEach(function(Wn){Wn.destroy()})}function Ci(){this.id=++zn,this.attributes=[];var Wn=xi();Wn?this.vao=Wn.createVertexArrayOES():this.vao=null,li[this.id]=this,this.buffers=[]}Ci.prototype.bindAttrs=function(){for(var Wn=En(),Ti=this.attributes,Ln=0;Ln<Ti.length;++Ln){var wi=Ti[Ln];wi.buffer?(Xe.enableVertexAttribArray(Ln),Xe.bindBuffer(_e,wi.buffer.buffer),Xe.vertexAttribPointer(Ln,wi.size,wi.type,wi.normalized,wi.stride,wi.offset),Wn&&Wn.vertexAttribDivisorANGLE(Ln,wi.divisor)):(Xe.disableVertexAttribArray(Ln),Xe.vertexAttrib4f(Ln,wi.x,wi.y,wi.z,wi.w))}for(var ta=Ti.length;ta<un;++ta)Xe.disableVertexAttribArray(ta)},Ci.prototype.refresh=function(){var Wn=xi();Wn&&(Wn.bindVertexArrayOES(this.vao),this.bindAttrs(),ni.currentVAO=this)},Ci.prototype.destroy=function(){if(this.vao){var Wn=xi();this===ni.currentVAO&&(ni.currentVAO=null,Wn.bindVertexArrayOES(null)),Wn.deleteVertexArrayOES(this.vao),this.vao=null}li[this.id]&&(delete li[this.id],on.vaoCount-=1)};function Vr(){var Wn=xi();Wn&&ro(li).forEach(function(Ti){Ti.refresh()})}function Bi(Wn){var Ti=new Ci;on.vaoCount+=1;function Ln(wi){se(Array.isArray(wi),"arguments to vertex array constructor must be an array"),se(wi.length<un,"too many attributes"),se(wi.length>0,"must specify at least one attribute");for(var ta=0;ta<Ti.buffers.length;++ta)Ti.buffers[ta].destroy();Ti.buffers.length=0;var Ua=Ti.attributes;Ua.length=wi.length;for(var Ai=0;Ai<wi.length;++Ai){var Gn=wi[Ai],Rn=Ua[Ai]=new qe;if(Array.isArray(Gn)||N(Gn)||No(Gn)){var aa=wn.create(Gn,_e,!1,!0);Rn.buffer=wn.getBuffer(aa),Rn.size=Rn.buffer.dimension|0,Rn.normalized=!1,Rn.type=Rn.buffer.dtype,Rn.offset=0,Rn.stride=0,Rn.divisor=0,Rn.state=1,Ti.buffers.push(aa)}else wn.getBuffer(Gn)?(Rn.buffer=wn.getBuffer(Gn),Rn.size=Rn.buffer.dimension|0,Rn.normalized=!1,Rn.type=Rn.buffer.dtype,Rn.offset=0,Rn.stride=0,Rn.divisor=0,Rn.state=1):wn.getBuffer(Gn.buffer)?(Rn.buffer=wn.getBuffer(Gn.buffer),Rn.size=(+Gn.size||Rn.buffer.dimension)|0,Rn.normalized=!!Gn.normalized||!1,"type"in Gn?(se.parameter(Gn.type,lu,"invalid buffer type"),Rn.type=lu[Gn.type]):Rn.type=Rn.buffer.dtype,Rn.offset=(Gn.offset||0)|0,Rn.stride=(Gn.stride||0)|0,Rn.divisor=(Gn.divisor||0)|0,Rn.state=1,se(Rn.size>=1&&Rn.size<=4,"size must be between 1 and 4"),se(Rn.offset>=0,"invalid offset"),se(Rn.stride>=0&&Rn.stride<=255,"stride must be between 0 and 255"),se(Rn.divisor>=0,"divisor must be positive"),se(!Rn.divisor||!!Gt.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Gn?(se(Ai>0,"first attribute must not be a constant"),Rn.x=+Gn.x||0,Rn.y=+Gn.y||0,Rn.z=+Gn.z||0,Rn.w=+Gn.w||0,Rn.state=2):se(!1,"invalid attribute spec for location "+Ai)}return Ti.refresh(),Ln}return Ln.destroy=function(){Ti.destroy()},Ln._vao=Ti,Ln._reglType="vao",Ln(Wn)}return ni}var Ut=35632,Zt=35633,Ht=35718,sr=35721;function or(Xe,Gt,dr,on){var wn={},un={};function Yr(jr,mn,ti,Ci){this.name=jr,this.id=mn,this.location=ti,this.info=Ci}function Yn(jr,mn){for(var ti=0;ti<jr.length;++ti)if(jr[ti].id===mn.id){jr[ti].location=mn.location;return}jr.push(mn)}function zn(jr,mn,ti){var Ci=jr===Ut?wn:un,Vr=Ci[mn];if(!Vr){var Bi=Gt.str(mn);Vr=Xe.createShader(jr),Xe.shaderSource(Vr,Bi),Xe.compileShader(Vr),se.shaderError(Xe,Vr,Bi,jr,ti),Ci[mn]=Vr}return Vr}var li={},ni=[],ai=0;function xi(jr,mn){this.id=ai++,this.fragId=jr,this.vertId=mn,this.program=null,this.uniforms=[],this.attributes=[],on.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function En(jr,mn,ti){var Ci,Vr,Bi=zn(Ut,jr.fragId),Wn=zn(Zt,jr.vertId),Ti=jr.program=Xe.createProgram();if(Xe.attachShader(Ti,Bi),Xe.attachShader(Ti,Wn),ti)for(Ci=0;Ci<ti.length;++Ci){var Ln=ti[Ci];Xe.bindAttribLocation(Ti,Ln[0],Ln[1])}Xe.linkProgram(Ti),se.linkError(Xe,Ti,Gt.str(jr.fragId),Gt.str(jr.vertId),mn);var wi=Xe.getProgramParameter(Ti,Ht);on.profile&&(jr.stats.uniformsCount=wi);var ta=jr.uniforms;for(Ci=0;Ci<wi;++Ci)if(Vr=Xe.getActiveUniform(Ti,Ci),Vr)if(Vr.size>1)for(var Ua=0;Ua<Vr.size;++Ua){var Ai=Vr.name.replace("[0]","["+Ua+"]");Yn(ta,new Yr(Ai,Gt.id(Ai),Xe.getUniformLocation(Ti,Ai),Vr))}else Yn(ta,new Yr(Vr.name,Gt.id(Vr.name),Xe.getUniformLocation(Ti,Vr.name),Vr));var Gn=Xe.getProgramParameter(Ti,sr);on.profile&&(jr.stats.attributesCount=Gn);var Rn=jr.attributes;for(Ci=0;Ci<Gn;++Ci)Vr=Xe.getActiveAttrib(Ti,Ci),Vr&&Yn(Rn,new Yr(Vr.name,Gt.id(Vr.name),Xe.getAttribLocation(Ti,Vr.name),Vr))}on.profile&&(dr.getMaxUniformsCount=function(){var jr=0;return ni.forEach(function(mn){mn.stats.uniformsCount>jr&&(jr=mn.stats.uniformsCount)}),jr},dr.getMaxAttributesCount=function(){var jr=0;return ni.forEach(function(mn){mn.stats.attributesCount>jr&&(jr=mn.stats.attributesCount)}),jr});function ci(){wn={},un={};for(var jr=0;jr<ni.length;++jr)En(ni[jr],null,ni[jr].attributes.map(function(mn){return[mn.location,mn.name]}))}return{clear:function(){var jr=Xe.deleteShader.bind(Xe);ro(wn).forEach(jr),wn={},ro(un).forEach(jr),un={},ni.forEach(function(mn){Xe.deleteProgram(mn.program)}),ni.length=0,li={},dr.shaderCount=0},program:function(jr,mn,ti,Ci){se.command(jr>=0,"missing vertex shader",ti),se.command(mn>=0,"missing fragment shader",ti);var Vr=li[mn];Vr||(Vr=li[mn]={});var Bi=Vr[jr];if(Bi&&!Ci)return Bi;var Wn=new xi(mn,jr);return dr.shaderCount++,En(Wn,ti,Ci),Bi||(Vr[jr]=Wn),ni.push(Wn),Wn},restore:ci,shader:zn,frag:-1,vert:-1}}var Er=6408,rr=5121,wr=3333,Fr=5126;function Wr(Xe,Gt,dr,on,wn,un,Yr){function Yn(ni){var ai;Gt.next===null?(se(wn.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),ai=rr):(se(Gt.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),ai=Gt.next.colorAttachments[0].texture._texture.type,un.oes_texture_float?(se(ai===rr||ai===Fr,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),ai===Fr&&se(Yr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):se(ai===rr,"Reading from a framebuffer is only allowed for the type 'uint8'"));var xi=0,En=0,ci=on.framebufferWidth,jr=on.framebufferHeight,mn=null;N(ni)?mn=ni:ni&&(se.type(ni,"object","invalid arguments to regl.read()"),xi=ni.x|0,En=ni.y|0,se(xi>=0&&xi<on.framebufferWidth,"invalid x offset for regl.read"),se(En>=0&&En<on.framebufferHeight,"invalid y offset for regl.read"),ci=(ni.width||on.framebufferWidth-xi)|0,jr=(ni.height||on.framebufferHeight-En)|0,mn=ni.data||null),mn&&(ai===rr?se(mn instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):ai===Fr&&se(mn instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),se(ci>0&&ci+xi<=on.framebufferWidth,"invalid width for read pixels"),se(jr>0&&jr+En<=on.framebufferHeight,"invalid height for read pixels"),dr();var ti=ci*jr*4;return mn||(ai===rr?mn=new Uint8Array(ti):ai===Fr&&(mn=mn||new Float32Array(ti))),se.isTypedArray(mn,"data buffer for regl.read() must be a typedarray"),se(mn.byteLength>=ti,"data buffer for regl.read() too small"),Xe.pixelStorei(wr,4),Xe.readPixels(xi,En,ci,jr,Er,ai,mn),mn}function zn(ni){var ai;return Gt.setFBO({framebuffer:ni.framebuffer},function(){ai=Yn(ni)}),ai}function li(ni){return!ni||!("framebuffer"in ni)?Yn(ni):zn(ni)}return li}function hn(Xe){return Array.prototype.slice.call(Xe)}function an(Xe){return hn(Xe).join("")}function bn(){var Xe=0,Gt=[],dr=[];function on(ai){for(var xi=0;xi<dr.length;++xi)if(dr[xi]===ai)return Gt[xi];var En="g"+Xe++;return Gt.push(En),dr.push(ai),En}function wn(){var ai=[];function xi(){ai.push.apply(ai,hn(arguments))}var En=[];function ci(){var jr="v"+Xe++;return En.push(jr),arguments.length>0&&(ai.push(jr,"="),ai.push.apply(ai,hn(arguments)),ai.push(";")),jr}return F(xi,{def:ci,toString:function(){return an([En.length>0?"var "+En.join(",")+";":"",an(ai)])}})}function un(){var ai=wn(),xi=wn(),En=ai.toString,ci=xi.toString;function jr(mn,ti){xi(mn,ti,"=",ai.def(mn,ti),";")}return F(function(){ai.apply(ai,hn(arguments))},{def:ai.def,entry:ai,exit:xi,save:jr,set:function(mn,ti,Ci){jr(mn,ti),ai(mn,ti,"=",Ci,";")},toString:function(){return En()+ci()}})}function Yr(){var ai=an(arguments),xi=un(),En=un(),ci=xi.toString,jr=En.toString;return F(xi,{then:function(){return xi.apply(xi,hn(arguments)),this},else:function(){return En.apply(En,hn(arguments)),this},toString:function(){var mn=jr();return mn&&(mn="else{"+mn+"}"),an(["if(",ai,"){",ci(),"}",mn])}})}var Yn=wn(),zn={};function li(ai,xi){var En=[];function ci(){var Vr="a"+En.length;return En.push(Vr),Vr}xi=xi||0;for(var jr=0;jr<xi;++jr)ci();var mn=un(),ti=mn.toString,Ci=zn[ai]=F(mn,{arg:ci,toString:function(){return an(["function(",En.join(),"){",ti(),"}"])}});return Ci}function ni(){var ai=['"use strict";',Yn,"return {"];Object.keys(zn).forEach(function(ci){ai.push('"',ci,'":',zn[ci].toString(),",")}),ai.push("}");var xi=an(ai).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),En=Function.apply(null,Gt.concat(xi));return En.apply(null,dr)}return{global:Yn,link:on,block:wn,proc:li,scope:un,cond:Yr,compile:ni}}var In="xyzw".split(""),pi=5121,ei=1,Ii=2,ia=0,la=1,Ki=2,bo=3,Ni=4,Oa="dither",La="blend.enable",Ia="blend.color",fa="blend.equation",Pa="blend.func",Ca="depth.enable",pa="depth.func",Eu="depth.range",ks="depth.mask",Xu="colorMask",wu="cull.enable",Qo="cull.face",vs="frontFace",Cu="lineWidth",hu="polygonOffset.enable",Kc="polygonOffset.offset",el="sample.alpha",hc="sample.enable",hl="sample.coverage",Nf="stencil.enable",pf="stencil.mask",qc="stencil.func",df="stencil.opFront",pc="stencil.opBack",dc="scissor.enable",vf="scissor.box",ku="viewport",Ts="profile",ru="framebuffer",Al="vert",Jl="frag",yo="elements",$u="primitive",Gs="count",gf="offset",ld="instances",mf="vao",Sv="Width",Tl="Height",Hl=ru+Sv,jl=ru+Tl,zf=ku+Sv,Ap=ku+Tl,Uf="drawingBuffer",Ml=Uf+Sv,Ev=Uf+Tl,cg=[Pa,fa,qc,df,pc,hl,ku,vf,Kc],vc=34962,P0=34963,O0=35632,k0=35633,wv=3553,Cv=34067,Zd=2884,F0=3042,Nh=3024,cd=2960,hm=2929,zh=3089,p_=32823,pm=32926,D0=32928,fg=5126,hg=35664,Vd=35665,fd=35666,gh=5124,Tp=35667,gs=35668,hd=35669,Ic=35670,$n=35671,Pc=35672,Mp=35673,Xs=35674,Oc=35675,gc=35676,Uh=35678,tl=35680,Rp=4,kc=1028,pd=1029,Av=2304,Hd=2305,dd=32775,Tv=32776,Qc=519,Zh=7680,jd=0,dm=1,Mv=32774,vm=513,os=36160,mh=36064,Zf={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},vd=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],yf={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},yh={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ip={frag:O0,vert:k0},Pp={cw:Av,ccw:Hd};function Rl(Xe){return Array.isArray(Xe)||N(Xe)||No(Xe)}function Vf(Xe){return Xe.sort(function(Gt,dr){return Gt===ku?-1:dr===ku?1:Gt<dr?-1:1})}function $o(Xe,Gt,dr,on){this.thisDep=Xe,this.contextDep=Gt,this.propDep=dr,this.append=on}function Il(Xe){return Xe&&!(Xe.thisDep||Xe.contextDep||Xe.propDep)}function Au(Xe){return new $o(!1,!1,!1,Xe)}function pl(Xe,Gt){var dr=Xe.type;if(dr===ia){var on=Xe.data.length;return new $o(!0,on>=1,on>=2,Gt)}else if(dr===Ni){var wn=Xe.data;return new $o(wn.thisDep,wn.contextDep,wn.propDep,Gt)}else return new $o(dr===bo,dr===Ki,dr===la,Gt)}var gm=new $o(!1,!1,!1,function(){});function Op(Xe,Gt,dr,on,wn,un,Yr,Yn,zn,li,ni,ai,xi,En,ci){var jr=li.Record,mn={add:32774,subtract:32778,"reverse subtract":32779};dr.ext_blend_minmax&&(mn.min=dd,mn.max=Tv);var ti=dr.angle_instanced_arrays,Ci=dr.webgl_draw_buffers,Vr={dirty:!0,profile:ci.profile},Bi={},Wn=[],Ti={},Ln={};function wi(Bt){return Bt.replace(".","_")}function ta(Bt,ut,hr){var rn=wi(Bt);Wn.push(Bt),Bi[rn]=Vr[rn]=!!hr,Ti[rn]=ut}function Ua(Bt,ut,hr){var rn=wi(Bt);Wn.push(Bt),Array.isArray(hr)?(Vr[rn]=hr.slice(),Bi[rn]=hr.slice()):Vr[rn]=Bi[rn]=hr,Ln[rn]=ut}ta(Oa,Nh),ta(La,F0),Ua(Ia,"blendColor",[0,0,0,0]),Ua(fa,"blendEquationSeparate",[Mv,Mv]),Ua(Pa,"blendFuncSeparate",[dm,jd,dm,jd]),ta(Ca,hm,!0),Ua(pa,"depthFunc",vm),Ua(Eu,"depthRange",[0,1]),Ua(ks,"depthMask",!0),Ua(Xu,Xu,[!0,!0,!0,!0]),ta(wu,Zd),Ua(Qo,"cullFace",pd),Ua(vs,vs,Hd),Ua(Cu,Cu,1),ta(hu,p_),Ua(Kc,"polygonOffset",[0,0]),ta(el,pm),ta(hc,D0),Ua(hl,"sampleCoverage",[1,!1]),ta(Nf,cd),Ua(pf,"stencilMask",-1),Ua(qc,"stencilFunc",[Qc,0,-1]),Ua(df,"stencilOpSeparate",[kc,Zh,Zh,Zh]),Ua(pc,"stencilOpSeparate",[pd,Zh,Zh,Zh]),ta(dc,zh),Ua(vf,"scissor",[0,0,Xe.drawingBufferWidth,Xe.drawingBufferHeight]),Ua(ku,ku,[0,0,Xe.drawingBufferWidth,Xe.drawingBufferHeight]);var Ai={gl:Xe,context:xi,strings:Gt,next:Bi,current:Vr,draw:ai,elements:un,buffer:wn,shader:ni,attributes:li.state,vao:li,uniforms:zn,framebuffer:Yn,extensions:dr,timer:En,isBufferArgs:Rl},Gn={primTypes:ac,compareFuncs:yf,blendFuncs:Zf,blendEquations:mn,stencilOps:yh,glTypes:lu,orientationType:Pp};se.optional(function(){Ai.isArrayLike=ts}),Ci&&(Gn.backBuffer=[pd],Gn.drawBuffer=Xn(on.maxDrawbuffers,function(Bt){return Bt===0?[0]:Xn(Bt,function(ut){return mh+ut})}));var Rn=0;function aa(){var Bt=bn(),ut=Bt.link,hr=Bt.global;Bt.id=Rn++,Bt.batchId="0";var rn=ut(Ai),$r=Bt.shared={props:"a0"};Object.keys(Ai).forEach(function(Rr){$r[Rr]=hr.def(rn,".",Rr)}),se.optional(function(){Bt.CHECK=ut(se),Bt.commandStr=se.guessCommand(),Bt.command=ut(Bt.commandStr),Bt.assert=function(Rr,Yt,Pr){Rr("if(!(",Yt,"))",this.CHECK,".commandRaise(",ut(Pr),",",this.command,");")},Gn.invalidBlendCombinations=vd});var Ar=Bt.next={},Ir=Bt.current={};Object.keys(Ln).forEach(function(Rr){Array.isArray(Vr[Rr])&&(Ar[Rr]=hr.def($r.next,".",Rr),Ir[Rr]=hr.def($r.current,".",Rr))});var Lr=Bt.constants={};Object.keys(Gn).forEach(function(Rr){Lr[Rr]=hr.def(JSON.stringify(Gn[Rr]))}),Bt.invoke=function(Rr,Yt){switch(Yt.type){case ia:var Pr=["this",$r.context,$r.props,Bt.batchId];return Rr.def(ut(Yt.data),".call(",Pr.slice(0,Math.max(Yt.data.length+1,4)),")");case la:return Rr.def($r.props,Yt.data);case Ki:return Rr.def($r.context,Yt.data);case bo:return Rr.def("this",Yt.data);case Ni:return Yt.data.append(Bt,Rr),Yt.data.ref}},Bt.attribCache={};var lr={};return Bt.scopeAttrib=function(Rr){var Yt=Gt.id(Rr);if(Yt in lr)return lr[Yt];var Pr=li.scope[Yt];Pr||(Pr=li.scope[Yt]=new jr);var pn=lr[Yt]=ut(Pr);return pn},Bt}function to(Bt){var ut=Bt.static,hr=Bt.dynamic,rn;if(Ts in ut){var $r=!!ut[Ts];rn=Au(function(Ir,Lr){return $r}),rn.enable=$r}else if(Ts in hr){var Ar=hr[Ts];rn=pl(Ar,function(Ir,Lr){return Ir.invoke(Lr,Ar)})}return rn}function Oi(Bt,ut){var hr=Bt.static,rn=Bt.dynamic;if(ru in hr){var $r=hr[ru];return $r?($r=Yn.getFramebuffer($r),se.command($r,"invalid framebuffer object"),Au(function(Ir,Lr){var lr=Ir.link($r),Rr=Ir.shared;Lr.set(Rr.framebuffer,".next",lr);var Yt=Rr.context;return Lr.set(Yt,"."+Hl,lr+".width"),Lr.set(Yt,"."+jl,lr+".height"),lr})):Au(function(Ir,Lr){var lr=Ir.shared;Lr.set(lr.framebuffer,".next","null");var Rr=lr.context;return Lr.set(Rr,"."+Hl,Rr+"."+Ml),Lr.set(Rr,"."+jl,Rr+"."+Ev),"null"})}else if(ru in rn){var Ar=rn[ru];return pl(Ar,function(Ir,Lr){var lr=Ir.invoke(Lr,Ar),Rr=Ir.shared,Yt=Rr.framebuffer,Pr=Lr.def(Yt,".getFramebuffer(",lr,")");se.optional(function(){Ir.assert(Lr,"!"+lr+"||"+Pr,"invalid framebuffer object")}),Lr.set(Yt,".next",Pr);var pn=Rr.context;return Lr.set(pn,"."+Hl,Pr+"?"+Pr+".width:"+pn+"."+Ml),Lr.set(pn,"."+jl,Pr+"?"+Pr+".height:"+pn+"."+Ev),Pr})}else return null}function Ka(Bt,ut,hr){var rn=Bt.static,$r=Bt.dynamic;function Ar(lr){if(lr in rn){var Rr=rn[lr];se.commandType(Rr,"object","invalid "+lr,hr.commandStr);var Yt=!0,Pr=Rr.x|0,pn=Rr.y|0,dn,Zn;return"width"in Rr?(dn=Rr.width|0,se.command(dn>=0,"invalid "+lr,hr.commandStr)):Yt=!1,"height"in Rr?(Zn=Rr.height|0,se.command(Zn>=0,"invalid "+lr,hr.commandStr)):Yt=!1,new $o(!Yt&&ut&&ut.thisDep,!Yt&&ut&&ut.contextDep,!Yt&&ut&&ut.propDep,function(qi,Fn){var ji=qi.shared.context,ya=dn;"width"in Rr||(ya=Fn.def(ji,".",Hl,"-",Pr));var Fa=Zn;return"height"in Rr||(Fa=Fn.def(ji,".",jl,"-",pn)),[Pr,pn,ya,Fa]})}else if(lr in $r){var Bn=$r[lr],Hn=pl(Bn,function(qi,Fn){var ji=qi.invoke(Fn,Bn);se.optional(function(){qi.assert(Fn,ji+"&&typeof "+ji+'==="object"',"invalid "+lr)});var ya=qi.shared.context,Fa=Fn.def(ji,".x|0"),Fo=Fn.def(ji,".y|0"),Ha=Fn.def('"width" in ',ji,"?",ji,".width|0:","(",ya,".",Hl,"-",Fa,")"),Wl=Fn.def('"height" in ',ji,"?",ji,".height|0:","(",ya,".",jl,"-",Fo,")");return se.optional(function(){qi.assert(Fn,Ha+">=0&&"+Wl+">=0","invalid "+lr)}),[Fa,Fo,Ha,Wl]});return ut&&(Hn.thisDep=Hn.thisDep||ut.thisDep,Hn.contextDep=Hn.contextDep||ut.contextDep,Hn.propDep=Hn.propDep||ut.propDep),Hn}else return ut?new $o(ut.thisDep,ut.contextDep,ut.propDep,function(qi,Fn){var ji=qi.shared.context;return[0,0,Fn.def(ji,".",Hl),Fn.def(ji,".",jl)]}):null}var Ir=Ar(ku);if(Ir){var Lr=Ir;Ir=new $o(Ir.thisDep,Ir.contextDep,Ir.propDep,function(lr,Rr){var Yt=Lr.append(lr,Rr),Pr=lr.shared.context;return Rr.set(Pr,"."+zf,Yt[2]),Rr.set(Pr,"."+Ap,Yt[3]),Yt})}return{viewport:Ir,scissor_box:Ar(vf)}}function ka(Bt,ut){var hr=Bt.static,rn=typeof hr[Jl]=="string"&&typeof hr[Al]=="string";if(rn){if(Object.keys(ut.dynamic).length>0)return null;var $r=ut.static,Ar=Object.keys($r);if(Ar.length>0&&typeof $r[Ar[0]]=="number"){for(var Ir=[],Lr=0;Lr<Ar.length;++Lr)se(typeof $r[Ar[Lr]]=="number","must specify all vertex attribute locations when using vaos"),Ir.push([$r[Ar[Lr]]|0,Ar[Lr]]);return Ir}}return null}function xa(Bt,ut,hr){var rn=Bt.static,$r=Bt.dynamic;function Ar(Yt){if(Yt in rn){var Pr=Gt.id(rn[Yt]);se.optional(function(){ni.shader(Ip[Yt],Pr,se.guessCommand())});var pn=Au(function(){return Pr});return pn.id=Pr,pn}else if(Yt in $r){var dn=$r[Yt];return pl(dn,function(Zn,Bn){var Hn=Zn.invoke(Bn,dn),qi=Bn.def(Zn.shared.strings,".id(",Hn,")");return se.optional(function(){Bn(Zn.shared.shader,".shader(",Ip[Yt],",",qi,",",Zn.command,");")}),qi})}return null}var Ir=Ar(Jl),Lr=Ar(Al),lr=null,Rr;return Il(Ir)&&Il(Lr)?(lr=ni.program(Lr.id,Ir.id,null,hr),Rr=Au(function(Yt,Pr){return Yt.link(lr)})):Rr=new $o(Ir&&Ir.thisDep||Lr&&Lr.thisDep,Ir&&Ir.contextDep||Lr&&Lr.contextDep,Ir&&Ir.propDep||Lr&&Lr.propDep,function(Yt,Pr){var pn=Yt.shared.shader,dn;Ir?dn=Ir.append(Yt,Pr):dn=Pr.def(pn,".",Jl);var Zn;Lr?Zn=Lr.append(Yt,Pr):Zn=Pr.def(pn,".",Al);var Bn=pn+".program("+Zn+","+dn;return se.optional(function(){Bn+=","+Yt.command}),Pr.def(Bn+")")}),{frag:Ir,vert:Lr,progVar:Rr,program:lr}}function wo(Bt,ut){var hr=Bt.static,rn=Bt.dynamic;function $r(){if(yo in hr){var Yt=hr[yo];Rl(Yt)?Yt=un.getElements(un.create(Yt,!0)):Yt&&(Yt=un.getElements(Yt),se.command(Yt,"invalid elements",ut.commandStr));var Pr=Au(function(dn,Zn){if(Yt){var Bn=dn.link(Yt);return dn.ELEMENTS=Bn,Bn}return dn.ELEMENTS=null,null});return Pr.value=Yt,Pr}else if(yo in rn){var pn=rn[yo];return pl(pn,function(dn,Zn){var Bn=dn.shared,Hn=Bn.isBufferArgs,qi=Bn.elements,Fn=dn.invoke(Zn,pn),ji=Zn.def("null"),ya=Zn.def(Hn,"(",Fn,")"),Fa=dn.cond(ya).then(ji,"=",qi,".createStream(",Fn,");").else(ji,"=",qi,".getElements(",Fn,");");return se.optional(function(){dn.assert(Fa.else,"!"+Fn+"||"+ji,"invalid elements")}),Zn.entry(Fa),Zn.exit(dn.cond(ya).then(qi,".destroyStream(",ji,");")),dn.ELEMENTS=ji,ji})}return null}var Ar=$r();function Ir(){if($u in hr){var Yt=hr[$u];return se.commandParameter(Yt,ac,"invalid primitve",ut.commandStr),Au(function(pn,dn){return ac[Yt]})}else if($u in rn){var Pr=rn[$u];return pl(Pr,function(pn,dn){var Zn=pn.constants.primTypes,Bn=pn.invoke(dn,Pr);return se.optional(function(){pn.assert(dn,Bn+" in "+Zn,"invalid primitive, must be one of "+Object.keys(ac))}),dn.def(Zn,"[",Bn,"]")})}else if(Ar)return Il(Ar)?Ar.value?Au(function(pn,dn){return dn.def(pn.ELEMENTS,".primType")}):Au(function(){return Rp}):new $o(Ar.thisDep,Ar.contextDep,Ar.propDep,function(pn,dn){var Zn=pn.ELEMENTS;return dn.def(Zn,"?",Zn,".primType:",Rp)});return null}function Lr(Yt,Pr){if(Yt in hr){var pn=hr[Yt]|0;return se.command(!Pr||pn>=0,"invalid "+Yt,ut.commandStr),Au(function(Zn,Bn){return Pr&&(Zn.OFFSET=pn),pn})}else if(Yt in rn){var dn=rn[Yt];return pl(dn,function(Zn,Bn){var Hn=Zn.invoke(Bn,dn);return Pr&&(Zn.OFFSET=Hn,se.optional(function(){Zn.assert(Bn,Hn+">=0","invalid "+Yt)})),Hn})}else if(Pr&&Ar)return Au(function(Zn,Bn){return Zn.OFFSET="0",0});return null}var lr=Lr(gf,!0);function Rr(){if(Gs in hr){var Yt=hr[Gs]|0;return se.command(typeof Yt=="number"&&Yt>=0,"invalid vertex count",ut.commandStr),Au(function(){return Yt})}else if(Gs in rn){var Pr=rn[Gs];return pl(Pr,function(Zn,Bn){var Hn=Zn.invoke(Bn,Pr);return se.optional(function(){Zn.assert(Bn,"typeof "+Hn+'==="number"&&'+Hn+">=0&&"+Hn+"===("+Hn+"|0)","invalid vertex count")}),Hn})}else if(Ar)if(Il(Ar)){if(Ar)return lr?new $o(lr.thisDep,lr.contextDep,lr.propDep,function(Zn,Bn){var Hn=Bn.def(Zn.ELEMENTS,".vertCount-",Zn.OFFSET);return se.optional(function(){Zn.assert(Bn,Hn+">=0","invalid vertex offset/element buffer too small")}),Hn}):Au(function(Zn,Bn){return Bn.def(Zn.ELEMENTS,".vertCount")});var pn=Au(function(){return-1});return se.optional(function(){pn.MISSING=!0}),pn}else{var dn=new $o(Ar.thisDep||lr.thisDep,Ar.contextDep||lr.contextDep,Ar.propDep||lr.propDep,function(Zn,Bn){var Hn=Zn.ELEMENTS;return Zn.OFFSET?Bn.def(Hn,"?",Hn,".vertCount-",Zn.OFFSET,":-1"):Bn.def(Hn,"?",Hn,".vertCount:-1")});return se.optional(function(){dn.DYNAMIC=!0}),dn}return null}return{elements:Ar,primitive:Ir(),count:Rr(),instances:Lr(ld,!1),offset:lr}}function pu(Bt,ut){var hr=Bt.static,rn=Bt.dynamic,$r={};return Wn.forEach(function(Ar){var Ir=wi(Ar);function Lr(lr,Rr){if(Ar in hr){var Yt=lr(hr[Ar]);$r[Ir]=Au(function(){return Yt})}else if(Ar in rn){var Pr=rn[Ar];$r[Ir]=pl(Pr,function(pn,dn){return Rr(pn,dn,pn.invoke(dn,Pr))})}}switch(Ar){case wu:case La:case Oa:case Nf:case Ca:case dc:case hu:case el:case hc:case ks:return Lr(function(lr){return se.commandType(lr,"boolean",Ar,ut.commandStr),lr},function(lr,Rr,Yt){return se.optional(function(){lr.assert(Rr,"typeof "+Yt+'==="boolean"',"invalid flag "+Ar,lr.commandStr)}),Yt});case pa:return Lr(function(lr){return se.commandParameter(lr,yf,"invalid "+Ar,ut.commandStr),yf[lr]},function(lr,Rr,Yt){var Pr=lr.constants.compareFuncs;return se.optional(function(){lr.assert(Rr,Yt+" in "+Pr,"invalid "+Ar+", must be one of "+Object.keys(yf))}),Rr.def(Pr,"[",Yt,"]")});case Eu:return Lr(function(lr){return se.command(ts(lr)&&lr.length===2&&typeof lr[0]=="number"&&typeof lr[1]=="number"&&lr[0]<=lr[1],"depth range is 2d array",ut.commandStr),lr},function(lr,Rr,Yt){se.optional(function(){lr.assert(Rr,lr.shared.isArrayLike+"("+Yt+")&&"+Yt+".length===2&&typeof "+Yt+'[0]==="number"&&typeof '+Yt+'[1]==="number"&&'+Yt+"[0]<="+Yt+"[1]","depth range must be a 2d array")});var Pr=Rr.def("+",Yt,"[0]"),pn=Rr.def("+",Yt,"[1]");return[Pr,pn]});case Pa:return Lr(function(lr){se.commandType(lr,"object","blend.func",ut.commandStr);var Rr="srcRGB"in lr?lr.srcRGB:lr.src,Yt="srcAlpha"in lr?lr.srcAlpha:lr.src,Pr="dstRGB"in lr?lr.dstRGB:lr.dst,pn="dstAlpha"in lr?lr.dstAlpha:lr.dst;return se.commandParameter(Rr,Zf,Ir+".srcRGB",ut.commandStr),se.commandParameter(Yt,Zf,Ir+".srcAlpha",ut.commandStr),se.commandParameter(Pr,Zf,Ir+".dstRGB",ut.commandStr),se.commandParameter(pn,Zf,Ir+".dstAlpha",ut.commandStr),se.command(vd.indexOf(Rr+", "+Pr)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Rr+", "+Pr+")",ut.commandStr),[Zf[Rr],Zf[Pr],Zf[Yt],Zf[pn]]},function(lr,Rr,Yt){var Pr=lr.constants.blendFuncs;se.optional(function(){lr.assert(Rr,Yt+"&&typeof "+Yt+'==="object"',"invalid blend func, must be an object")});function pn(ji,ya){var Fa=Rr.def('"',ji,ya,'" in ',Yt,"?",Yt,".",ji,ya,":",Yt,".",ji);return se.optional(function(){lr.assert(Rr,Fa+" in "+Pr,"invalid "+Ar+"."+ji+ya+", must be one of "+Object.keys(Zf))}),Fa}var dn=pn("src","RGB"),Zn=pn("dst","RGB");se.optional(function(){var ji=lr.constants.invalidBlendCombinations;lr.assert(Rr,ji+".indexOf("+dn+'+", "+'+Zn+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Bn=Rr.def(Pr,"[",dn,"]"),Hn=Rr.def(Pr,"[",pn("src","Alpha"),"]"),qi=Rr.def(Pr,"[",Zn,"]"),Fn=Rr.def(Pr,"[",pn("dst","Alpha"),"]");return[Bn,qi,Hn,Fn]});case fa:return Lr(function(lr){if(typeof lr=="string")return se.commandParameter(lr,mn,"invalid "+Ar,ut.commandStr),[mn[lr],mn[lr]];if(typeof lr=="object")return se.commandParameter(lr.rgb,mn,Ar+".rgb",ut.commandStr),se.commandParameter(lr.alpha,mn,Ar+".alpha",ut.commandStr),[mn[lr.rgb],mn[lr.alpha]];se.commandRaise("invalid blend.equation",ut.commandStr)},function(lr,Rr,Yt){var Pr=lr.constants.blendEquations,pn=Rr.def(),dn=Rr.def(),Zn=lr.cond("typeof ",Yt,'==="string"');return se.optional(function(){function Bn(Hn,qi,Fn){lr.assert(Hn,Fn+" in "+Pr,"invalid "+qi+", must be one of "+Object.keys(mn))}Bn(Zn.then,Ar,Yt),lr.assert(Zn.else,Yt+"&&typeof "+Yt+'==="object"',"invalid "+Ar),Bn(Zn.else,Ar+".rgb",Yt+".rgb"),Bn(Zn.else,Ar+".alpha",Yt+".alpha")}),Zn.then(pn,"=",dn,"=",Pr,"[",Yt,"];"),Zn.else(pn,"=",Pr,"[",Yt,".rgb];",dn,"=",Pr,"[",Yt,".alpha];"),Rr(Zn),[pn,dn]});case Ia:return Lr(function(lr){return se.command(ts(lr)&&lr.length===4,"blend.color must be a 4d array",ut.commandStr),Xn(4,function(Rr){return+lr[Rr]})},function(lr,Rr,Yt){return se.optional(function(){lr.assert(Rr,lr.shared.isArrayLike+"("+Yt+")&&"+Yt+".length===4","blend.color must be a 4d array")}),Xn(4,function(Pr){return Rr.def("+",Yt,"[",Pr,"]")})});case pf:return Lr(function(lr){return se.commandType(lr,"number",Ir,ut.commandStr),lr|0},function(lr,Rr,Yt){return se.optional(function(){lr.assert(Rr,"typeof "+Yt+'==="number"',"invalid stencil.mask")}),Rr.def(Yt,"|0")});case qc:return Lr(function(lr){se.commandType(lr,"object",Ir,ut.commandStr);var Rr=lr.cmp||"keep",Yt=lr.ref||0,Pr="mask"in lr?lr.mask:-1;return se.commandParameter(Rr,yf,Ar+".cmp",ut.commandStr),se.commandType(Yt,"number",Ar+".ref",ut.commandStr),se.commandType(Pr,"number",Ar+".mask",ut.commandStr),[yf[Rr],Yt,Pr]},function(lr,Rr,Yt){var Pr=lr.constants.compareFuncs;se.optional(function(){function Bn(){lr.assert(Rr,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Bn(Yt+"&&typeof ",Yt,'==="object"'),Bn('!("cmp" in ',Yt,")||(",Yt,".cmp in ",Pr,")")});var pn=Rr.def('"cmp" in ',Yt,"?",Pr,"[",Yt,".cmp]",":",Zh),dn=Rr.def(Yt,".ref|0"),Zn=Rr.def('"mask" in ',Yt,"?",Yt,".mask|0:-1");return[pn,dn,Zn]});case df:case pc:return Lr(function(lr){se.commandType(lr,"object",Ir,ut.commandStr);var Rr=lr.fail||"keep",Yt=lr.zfail||"keep",Pr=lr.zpass||"keep";return se.commandParameter(Rr,yh,Ar+".fail",ut.commandStr),se.commandParameter(Yt,yh,Ar+".zfail",ut.commandStr),se.commandParameter(Pr,yh,Ar+".zpass",ut.commandStr),[Ar===pc?pd:kc,yh[Rr],yh[Yt],yh[Pr]]},function(lr,Rr,Yt){var Pr=lr.constants.stencilOps;se.optional(function(){lr.assert(Rr,Yt+"&&typeof "+Yt+'==="object"',"invalid "+Ar)});function pn(dn){return se.optional(function(){lr.assert(Rr,'!("'+dn+'" in '+Yt+")||("+Yt+"."+dn+" in "+Pr+")","invalid "+Ar+"."+dn+", must be one of "+Object.keys(yh))}),Rr.def('"',dn,'" in ',Yt,"?",Pr,"[",Yt,".",dn,"]:",Zh)}return[Ar===pc?pd:kc,pn("fail"),pn("zfail"),pn("zpass")]});case Kc:return Lr(function(lr){se.commandType(lr,"object",Ir,ut.commandStr);var Rr=lr.factor|0,Yt=lr.units|0;return se.commandType(Rr,"number",Ir+".factor",ut.commandStr),se.commandType(Yt,"number",Ir+".units",ut.commandStr),[Rr,Yt]},function(lr,Rr,Yt){se.optional(function(){lr.assert(Rr,Yt+"&&typeof "+Yt+'==="object"',"invalid "+Ar)});var Pr=Rr.def(Yt,".factor|0"),pn=Rr.def(Yt,".units|0");return[Pr,pn]});case Qo:return Lr(function(lr){var Rr=0;return lr==="front"?Rr=kc:lr==="back"&&(Rr=pd),se.command(!!Rr,Ir,ut.commandStr),Rr},function(lr,Rr,Yt){return se.optional(function(){lr.assert(Rr,Yt+'==="front"||'+Yt+'==="back"',"invalid cull.face")}),Rr.def(Yt,'==="front"?',kc,":",pd)});case Cu:return Lr(function(lr){return se.command(typeof lr=="number"&&lr>=on.lineWidthDims[0]&&lr<=on.lineWidthDims[1],"invalid line width, must be a positive number between "+on.lineWidthDims[0]+" and "+on.lineWidthDims[1],ut.commandStr),lr},function(lr,Rr,Yt){return se.optional(function(){lr.assert(Rr,"typeof "+Yt+'==="number"&&'+Yt+">="+on.lineWidthDims[0]+"&&"+Yt+"<="+on.lineWidthDims[1],"invalid line width")}),Yt});case vs:return Lr(function(lr){return se.commandParameter(lr,Pp,Ir,ut.commandStr),Pp[lr]},function(lr,Rr,Yt){return se.optional(function(){lr.assert(Rr,Yt+'==="cw"||'+Yt+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Rr.def(Yt+'==="cw"?'+Av+":"+Hd)});case Xu:return Lr(function(lr){return se.command(ts(lr)&&lr.length===4,"color.mask must be length 4 array",ut.commandStr),lr.map(function(Rr){return!!Rr})},function(lr,Rr,Yt){return se.optional(function(){lr.assert(Rr,lr.shared.isArrayLike+"("+Yt+")&&"+Yt+".length===4","invalid color.mask")}),Xn(4,function(Pr){return"!!"+Yt+"["+Pr+"]"})});case hl:return Lr(function(lr){se.command(typeof lr=="object"&&lr,Ir,ut.commandStr);var Rr="value"in lr?lr.value:1,Yt=!!lr.invert;return se.command(typeof Rr=="number"&&Rr>=0&&Rr<=1,"sample.coverage.value must be a number between 0 and 1",ut.commandStr),[Rr,Yt]},function(lr,Rr,Yt){se.optional(function(){lr.assert(Rr,Yt+"&&typeof "+Yt+'==="object"',"invalid sample.coverage")});var Pr=Rr.def('"value" in ',Yt,"?+",Yt,".value:1"),pn=Rr.def("!!",Yt,".invert");return[Pr,pn]})}}),$r}function Fu(Bt,ut){var hr=Bt.static,rn=Bt.dynamic,$r={};return Object.keys(hr).forEach(function(Ar){var Ir=hr[Ar],Lr;if(typeof Ir=="number"||typeof Ir=="boolean")Lr=Au(function(){return Ir});else if(typeof Ir=="function"){var lr=Ir._reglType;lr==="texture2d"||lr==="textureCube"?Lr=Au(function(Rr){return Rr.link(Ir)}):lr==="framebuffer"||lr==="framebufferCube"?(se.command(Ir.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Ar+'"',ut.commandStr),Lr=Au(function(Rr){return Rr.link(Ir.color[0])})):se.commandRaise('invalid data for uniform "'+Ar+'"',ut.commandStr)}else ts(Ir)?Lr=Au(function(Rr){var Yt=Rr.global.def("[",Xn(Ir.length,function(Pr){return se.command(typeof Ir[Pr]=="number"||typeof Ir[Pr]=="boolean","invalid uniform "+Ar,Rr.commandStr),Ir[Pr]}),"]");return Yt}):se.commandRaise('invalid or missing data for uniform "'+Ar+'"',ut.commandStr);Lr.value=Ir,$r[Ar]=Lr}),Object.keys(rn).forEach(function(Ar){var Ir=rn[Ar];$r[Ar]=pl(Ir,function(Lr,lr){return Lr.invoke(lr,Ir)})}),$r}function vo(Bt,ut){var hr=Bt.static,rn=Bt.dynamic,$r={};return Object.keys(hr).forEach(function(Ar){var Ir=hr[Ar],Lr=Gt.id(Ar),lr=new jr;if(Rl(Ir))lr.state=ei,lr.buffer=wn.getBuffer(wn.create(Ir,vc,!1,!0)),lr.type=0;else{var Rr=wn.getBuffer(Ir);if(Rr)lr.state=ei,lr.buffer=Rr,lr.type=0;else if(se.command(typeof Ir=="object"&&Ir,"invalid data for attribute "+Ar,ut.commandStr),"constant"in Ir){var Yt=Ir.constant;lr.buffer="null",lr.state=Ii,typeof Yt=="number"?lr.x=Yt:(se.command(ts(Yt)&&Yt.length>0&&Yt.length<=4,"invalid constant for attribute "+Ar,ut.commandStr),In.forEach(function(qi,Fn){Fn<Yt.length&&(lr[qi]=Yt[Fn])}))}else{Rl(Ir.buffer)?Rr=wn.getBuffer(wn.create(Ir.buffer,vc,!1,!0)):Rr=wn.getBuffer(Ir.buffer),se.command(!!Rr,'missing buffer for attribute "'+Ar+'"',ut.commandStr);var Pr=Ir.offset|0;se.command(Pr>=0,'invalid offset for attribute "'+Ar+'"',ut.commandStr);var pn=Ir.stride|0;se.command(pn>=0&&pn<256,'invalid stride for attribute "'+Ar+'", must be integer betweeen [0, 255]',ut.commandStr);var dn=Ir.size|0;se.command(!("size"in Ir)||dn>0&&dn<=4,'invalid size for attribute "'+Ar+'", must be 1,2,3,4',ut.commandStr);var Zn=!!Ir.normalized,Bn=0;"type"in Ir&&(se.commandParameter(Ir.type,lu,"invalid type for attribute "+Ar,ut.commandStr),Bn=lu[Ir.type]);var Hn=Ir.divisor|0;"divisor"in Ir&&(se.command(Hn===0||ti,'cannot specify divisor for attribute "'+Ar+'", instancing not supported',ut.commandStr),se.command(Hn>=0,'invalid divisor for attribute "'+Ar+'"',ut.commandStr)),se.optional(function(){var qi=ut.commandStr,Fn=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Ir).forEach(function(ji){se.command(Fn.indexOf(ji)>=0,'unknown parameter "'+ji+'" for attribute pointer "'+Ar+'" (valid parameters are '+Fn+")",qi)})}),lr.buffer=Rr,lr.state=ei,lr.size=dn,lr.normalized=Zn,lr.type=Bn||Rr.dtype,lr.offset=Pr,lr.stride=pn,lr.divisor=Hn}}$r[Ar]=Au(function(qi,Fn){var ji=qi.attribCache;if(Lr in ji)return ji[Lr];var ya={isStream:!1};return Object.keys(lr).forEach(function(Fa){ya[Fa]=lr[Fa]}),lr.buffer&&(ya.buffer=qi.link(lr.buffer),ya.type=ya.type||ya.buffer+".dtype"),ji[Lr]=ya,ya})}),Object.keys(rn).forEach(function(Ar){var Ir=rn[Ar];function Lr(lr,Rr){var Yt=lr.invoke(Rr,Ir),Pr=lr.shared,pn=lr.constants,dn=Pr.isBufferArgs,Zn=Pr.buffer;se.optional(function(){lr.assert(Rr,Yt+"&&(typeof "+Yt+'==="object"||typeof '+Yt+'==="function")&&('+dn+"("+Yt+")||"+Zn+".getBuffer("+Yt+")||"+Zn+".getBuffer("+Yt+".buffer)||"+dn+"("+Yt+'.buffer)||("constant" in '+Yt+"&&(typeof "+Yt+'.constant==="number"||'+Pr.isArrayLike+"("+Yt+".constant))))",'invalid dynamic attribute "'+Ar+'"')});var Bn={isStream:Rr.def(!1)},Hn=new jr;Hn.state=ei,Object.keys(Hn).forEach(function(ya){Bn[ya]=Rr.def(""+Hn[ya])});var qi=Bn.buffer,Fn=Bn.type;Rr("if(",dn,"(",Yt,")){",Bn.isStream,"=true;",qi,"=",Zn,".createStream(",vc,",",Yt,");",Fn,"=",qi,".dtype;","}else{",qi,"=",Zn,".getBuffer(",Yt,");","if(",qi,"){",Fn,"=",qi,".dtype;",'}else if("constant" in ',Yt,"){",Bn.state,"=",Ii,";","if(typeof "+Yt+'.constant === "number"){',Bn[In[0]],"=",Yt,".constant;",In.slice(1).map(function(ya){return Bn[ya]}).join("="),"=0;","}else{",In.map(function(ya,Fa){return Bn[ya]+"="+Yt+".constant.length>"+Fa+"?"+Yt+".constant["+Fa+"]:0;"}).join(""),"}}else{","if(",dn,"(",Yt,".buffer)){",qi,"=",Zn,".createStream(",vc,",",Yt,".buffer);","}else{",qi,"=",Zn,".getBuffer(",Yt,".buffer);","}",Fn,'="type" in ',Yt,"?",pn.glTypes,"[",Yt,".type]:",qi,".dtype;",Bn.normalized,"=!!",Yt,".normalized;");function ji(ya){Rr(Bn[ya],"=",Yt,".",ya,"|0;")}return ji("size"),ji("offset"),ji("stride"),ji("divisor"),Rr("}}"),Rr.exit("if(",Bn.isStream,"){",Zn,".destroyStream(",qi,");","}"),Bn}$r[Ar]=pl(Ir,Lr)}),$r}function ss(Bt,ut){var hr=Bt.static,rn=Bt.dynamic;if(mf in hr){var $r=hr[mf];return $r!==null&&li.getVAO($r)===null&&($r=li.createVAO($r)),Au(function(Ir){return Ir.link(li.getVAO($r))})}else if(mf in rn){var Ar=rn[mf];return pl(Ar,function(Ir,Lr){var lr=Ir.invoke(Lr,Ar);return Lr.def(Ir.shared.vao+".getVAO("+lr+")")})}return null}function Uo(Bt){var ut=Bt.static,hr=Bt.dynamic,rn={};return Object.keys(ut).forEach(function($r){var Ar=ut[$r];rn[$r]=Au(function(Ir,Lr){return typeof Ar=="number"||typeof Ar=="boolean"?""+Ar:Ir.link(Ar)})}),Object.keys(hr).forEach(function($r){var Ar=hr[$r];rn[$r]=pl(Ar,function(Ir,Lr){return Ir.invoke(Lr,Ar)})}),rn}function du(Bt,ut,hr,rn,$r){var Ar=Bt.static,Ir=Bt.dynamic;se.optional(function(){var ji=[ru,Al,Jl,yo,$u,gf,Gs,ld,Ts,mf].concat(Wn);function ya(Fa){Object.keys(Fa).forEach(function(Fo){se.command(ji.indexOf(Fo)>=0,'unknown parameter "'+Fo+'"',$r.commandStr)})}ya(Ar),ya(Ir)});var Lr=ka(Bt,ut),lr=Oi(Bt,$r),Rr=Ka(Bt,lr,$r),Yt=wo(Bt,$r),Pr=pu(Bt,$r),pn=xa(Bt,$r,Lr);function dn(ji){var ya=Rr[ji];ya&&(Pr[ji]=ya)}dn(ku),dn(wi(vf));var Zn=Object.keys(Pr).length>0,Bn={framebuffer:lr,draw:Yt,shader:pn,state:Pr,dirty:Zn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Bn.profile=to(Bt,$r),Bn.uniforms=Fu(hr,$r),Bn.drawVAO=Bn.scopeVAO=ss(Bt,$r),!Bn.drawVAO&&pn.program&&!Lr&&dr.angle_instanced_arrays){var Hn=!0,qi=pn.program.attributes.map(function(ji){var ya=ut.static[ji];return Hn=Hn&&!!ya,ya});if(Hn&&qi.length>0){var Fn=li.getVAO(li.createVAO(qi));Bn.drawVAO=new $o(null,null,null,function(ji,ya){return ji.link(Fn)}),Bn.useVAO=!0}}return Lr?Bn.useVAO=!0:Bn.attributes=vo(ut,$r),Bn.context=Uo(rn,$r),Bn}function zs(Bt,ut,hr){var rn=Bt.shared,$r=rn.context,Ar=Bt.scope();Object.keys(hr).forEach(function(Ir){ut.save($r,"."+Ir);var Lr=hr[Ir];Ar($r,".",Ir,"=",Lr.append(Bt,ut),";")}),ut(Ar)}function Fs(Bt,ut,hr,rn){var $r=Bt.shared,Ar=$r.gl,Ir=$r.framebuffer,Lr;Ci&&(Lr=ut.def($r.extensions,".webgl_draw_buffers"));var lr=Bt.constants,Rr=lr.drawBuffer,Yt=lr.backBuffer,Pr;hr?Pr=hr.append(Bt,ut):Pr=ut.def(Ir,".next"),rn||ut("if(",Pr,"!==",Ir,".cur){"),ut("if(",Pr,"){",Ar,".bindFramebuffer(",os,",",Pr,".framebuffer);"),Ci&&ut(Lr,".drawBuffersWEBGL(",Rr,"[",Pr,".colorAttachments.length]);"),ut("}else{",Ar,".bindFramebuffer(",os,",null);"),Ci&&ut(Lr,".drawBuffersWEBGL(",Yt,");"),ut("}",Ir,".cur=",Pr,";"),rn||ut("}")}function $s(Bt,ut,hr){var rn=Bt.shared,$r=rn.gl,Ar=Bt.current,Ir=Bt.next,Lr=rn.current,lr=rn.next,Rr=Bt.cond(Lr,".dirty");Wn.forEach(function(Yt){var Pr=wi(Yt);if(!(Pr in hr.state)){var pn,dn;if(Pr in Ir){pn=Ir[Pr],dn=Ar[Pr];var Zn=Xn(Vr[Pr].length,function(Hn){return Rr.def(pn,"[",Hn,"]")});Rr(Bt.cond(Zn.map(function(Hn,qi){return Hn+"!=="+dn+"["+qi+"]"}).join("||")).then($r,".",Ln[Pr],"(",Zn,");",Zn.map(function(Hn,qi){return dn+"["+qi+"]="+Hn}).join(";"),";"))}else{pn=Rr.def(lr,".",Pr);var Bn=Bt.cond(pn,"!==",Lr,".",Pr);Rr(Bn),Pr in Ti?Bn(Bt.cond(pn).then($r,".enable(",Ti[Pr],");").else($r,".disable(",Ti[Pr],");"),Lr,".",Pr,"=",pn,";"):Bn($r,".",Ln[Pr],"(",pn,");",Lr,".",Pr,"=",pn,";")}}}),Object.keys(hr.state).length===0&&Rr(Lr,".dirty=false;"),ut(Rr)}function Ys(Bt,ut,hr,rn){var $r=Bt.shared,Ar=Bt.current,Ir=$r.current,Lr=$r.gl;Vf(Object.keys(hr)).forEach(function(lr){var Rr=hr[lr];if(!(rn&&!rn(Rr))){var Yt=Rr.append(Bt,ut);if(Ti[lr]){var Pr=Ti[lr];Il(Rr)?Yt?ut(Lr,".enable(",Pr,");"):ut(Lr,".disable(",Pr,");"):ut(Bt.cond(Yt).then(Lr,".enable(",Pr,");").else(Lr,".disable(",Pr,");")),ut(Ir,".",lr,"=",Yt,";")}else if(ts(Yt)){var pn=Ar[lr];ut(Lr,".",Ln[lr],"(",Yt,");",Yt.map(function(dn,Zn){return pn+"["+Zn+"]="+dn}).join(";"),";")}else ut(Lr,".",Ln[lr],"(",Yt,");",Ir,".",lr,"=",Yt,";")}})}function Ks(Bt,ut){ti&&(Bt.instancing=ut.def(Bt.shared.extensions,".angle_instanced_arrays"))}function qa(Bt,ut,hr,rn,$r){var Ar=Bt.shared,Ir=Bt.stats,Lr=Ar.current,lr=Ar.timer,Rr=hr.profile;function Yt(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Pr,pn;function dn(ji){Pr=ut.def(),ji(Pr,"=",Yt(),";"),typeof $r=="string"?ji(Ir,".count+=",$r,";"):ji(Ir,".count++;"),En&&(rn?(pn=ut.def(),ji(pn,"=",lr,".getNumPendingQueries();")):ji(lr,".beginQuery(",Ir,");"))}function Zn(ji){ji(Ir,".cpuTime+=",Yt(),"-",Pr,";"),En&&(rn?ji(lr,".pushScopeStats(",pn,",",lr,".getNumPendingQueries(),",Ir,");"):ji(lr,".endQuery();"))}function Bn(ji){var ya=ut.def(Lr,".profile");ut(Lr,".profile=",ji,";"),ut.exit(Lr,".profile=",ya,";")}var Hn;if(Rr){if(Il(Rr)){Rr.enable?(dn(ut),Zn(ut.exit),Bn("true")):Bn("false");return}Hn=Rr.append(Bt,ut),Bn(Hn)}else Hn=ut.def(Lr,".profile");var qi=Bt.block();dn(qi),ut("if(",Hn,"){",qi,"}");var Fn=Bt.block();Zn(Fn),ut.exit("if(",Hn,"){",Fn,"}")}function Tu(Bt,ut,hr,rn,$r){var Ar=Bt.shared;function Ir(lr){switch(lr){case hg:case Tp:case $n:return 2;case Vd:case gs:case Pc:return 3;case fd:case hd:case Mp:return 4;default:return 1}}function Lr(lr,Rr,Yt){var Pr=Ar.gl,pn=ut.def(lr,".location"),dn=ut.def(Ar.attributes,"[",pn,"]"),Zn=Yt.state,Bn=Yt.buffer,Hn=[Yt.x,Yt.y,Yt.z,Yt.w],qi=["buffer","normalized","offset","stride"];function Fn(){ut("if(!",dn,".buffer){",Pr,".enableVertexAttribArray(",pn,");}");var ya=Yt.type,Fa;if(Yt.size?Fa=ut.def(Yt.size,"||",Rr):Fa=Rr,ut("if(",dn,".type!==",ya,"||",dn,".size!==",Fa,"||",qi.map(function(Ha){return dn+"."+Ha+"!=="+Yt[Ha]}).join("||"),"){",Pr,".bindBuffer(",vc,",",Bn,".buffer);",Pr,".vertexAttribPointer(",[pn,Fa,ya,Yt.normalized,Yt.stride,Yt.offset],");",dn,".type=",ya,";",dn,".size=",Fa,";",qi.map(function(Ha){return dn+"."+Ha+"="+Yt[Ha]+";"}).join(""),"}"),ti){var Fo=Yt.divisor;ut("if(",dn,".divisor!==",Fo,"){",Bt.instancing,".vertexAttribDivisorANGLE(",[pn,Fo],");",dn,".divisor=",Fo,";}")}}function ji(){ut("if(",dn,".buffer){",Pr,".disableVertexAttribArray(",pn,");",dn,".buffer=null;","}if(",In.map(function(ya,Fa){return dn+"."+ya+"!=="+Hn[Fa]}).join("||"),"){",Pr,".vertexAttrib4f(",pn,",",Hn,");",In.map(function(ya,Fa){return dn+"."+ya+"="+Hn[Fa]+";"}).join(""),"}")}Zn===ei?Fn():Zn===Ii?ji():(ut("if(",Zn,"===",ei,"){"),Fn(),ut("}else{"),ji(),ut("}"))}rn.forEach(function(lr){var Rr=lr.name,Yt=hr.attributes[Rr],Pr;if(Yt){if(!$r(Yt))return;Pr=Yt.append(Bt,ut)}else{if(!$r(gm))return;var pn=Bt.scopeAttrib(Rr);se.optional(function(){Bt.assert(ut,pn+".state","missing attribute "+Rr)}),Pr={},Object.keys(new jr).forEach(function(dn){Pr[dn]=ut.def(pn,".",dn)})}Lr(Bt.link(lr),Ir(lr.info.type),Pr)})}function ko(Bt,ut,hr,rn,$r){for(var Ar=Bt.shared,Ir=Ar.gl,Lr,lr=0;lr<rn.length;++lr){var Rr=rn[lr],Yt=Rr.name,Pr=Rr.info.type,pn=hr.uniforms[Yt],dn=Bt.link(Rr),Zn=dn+".location",Bn;if(pn){if(!$r(pn))continue;if(Il(pn)){var Hn=pn.value;if(se.command(Hn!==null&&typeof Hn!="undefined",'missing uniform "'+Yt+'"',Bt.commandStr),Pr===Uh||Pr===tl){se.command(typeof Hn=="function"&&(Pr===Uh&&(Hn._reglType==="texture2d"||Hn._reglType==="framebuffer")||Pr===tl&&(Hn._reglType==="textureCube"||Hn._reglType==="framebufferCube")),"invalid texture for uniform "+Yt,Bt.commandStr);var qi=Bt.link(Hn._texture||Hn.color[0]._texture);ut(Ir,".uniform1i(",Zn,",",qi+".bind());"),ut.exit(qi,".unbind();")}else if(Pr===Xs||Pr===Oc||Pr===gc){se.optional(function(){se.command(ts(Hn),"invalid matrix for uniform "+Yt,Bt.commandStr),se.command(Pr===Xs&&Hn.length===4||Pr===Oc&&Hn.length===9||Pr===gc&&Hn.length===16,"invalid length for matrix uniform "+Yt,Bt.commandStr)});var Fn=Bt.global.def("new Float32Array(["+Array.prototype.slice.call(Hn)+"])"),ji=2;Pr===Oc?ji=3:Pr===gc&&(ji=4),ut(Ir,".uniformMatrix",ji,"fv(",Zn,",false,",Fn,");")}else{switch(Pr){case fg:se.commandType(Hn,"number","uniform "+Yt,Bt.commandStr),Lr="1f";break;case hg:se.command(ts(Hn)&&Hn.length===2,"uniform "+Yt,Bt.commandStr),Lr="2f";break;case Vd:se.command(ts(Hn)&&Hn.length===3,"uniform "+Yt,Bt.commandStr),Lr="3f";break;case fd:se.command(ts(Hn)&&Hn.length===4,"uniform "+Yt,Bt.commandStr),Lr="4f";break;case Ic:se.commandType(Hn,"boolean","uniform "+Yt,Bt.commandStr),Lr="1i";break;case gh:se.commandType(Hn,"number","uniform "+Yt,Bt.commandStr),Lr="1i";break;case $n:se.command(ts(Hn)&&Hn.length===2,"uniform "+Yt,Bt.commandStr),Lr="2i";break;case Tp:se.command(ts(Hn)&&Hn.length===2,"uniform "+Yt,Bt.commandStr),Lr="2i";break;case Pc:se.command(ts(Hn)&&Hn.length===3,"uniform "+Yt,Bt.commandStr),Lr="3i";break;case gs:se.command(ts(Hn)&&Hn.length===3,"uniform "+Yt,Bt.commandStr),Lr="3i";break;case Mp:se.command(ts(Hn)&&Hn.length===4,"uniform "+Yt,Bt.commandStr),Lr="4i";break;case hd:se.command(ts(Hn)&&Hn.length===4,"uniform "+Yt,Bt.commandStr),Lr="4i";break}ut(Ir,".uniform",Lr,"(",Zn,",",ts(Hn)?Array.prototype.slice.call(Hn):Hn,");")}continue}else Bn=pn.append(Bt,ut)}else{if(!$r(gm))continue;Bn=ut.def(Ar.uniforms,"[",Gt.id(Yt),"]")}Pr===Uh?ut("if(",Bn,"&&",Bn,'._reglType==="framebuffer"){',Bn,"=",Bn,".color[0];","}"):Pr===tl&&ut("if(",Bn,"&&",Bn,'._reglType==="framebufferCube"){',Bn,"=",Bn,".color[0];","}"),se.optional(function(){function Wl(xf,bm){Bt.assert(ut,xf,'bad data or missing for uniform "'+Yt+'".  '+bm)}function gg(xf){Wl("typeof "+Bn+'==="'+xf+'"',"invalid type, expected "+xf)}function Fc(xf,bm){Wl(Ar.isArrayLike+"("+Bn+")&&"+Bn+".length==="+xf,"invalid vector, should have length "+xf,Bt.commandStr)}function xm(xf){Wl("typeof "+Bn+'==="function"&&'+Bn+'._reglType==="texture'+(xf===wv?"2d":"Cube")+'"',"invalid texture type",Bt.commandStr)}switch(Pr){case gh:gg("number");break;case Tp:Fc(2,"number");break;case gs:Fc(3,"number");break;case hd:Fc(4,"number");break;case fg:gg("number");break;case hg:Fc(2,"number");break;case Vd:Fc(3,"number");break;case fd:Fc(4,"number");break;case Ic:gg("boolean");break;case $n:Fc(2,"boolean");break;case Pc:Fc(3,"boolean");break;case Mp:Fc(4,"boolean");break;case Xs:Fc(4,"number");break;case Oc:Fc(9,"number");break;case gc:Fc(16,"number");break;case Uh:xm(wv);break;case tl:xm(Cv);break}});var ya=1;switch(Pr){case Uh:case tl:var Fa=ut.def(Bn,"._texture");ut(Ir,".uniform1i(",Zn,",",Fa,".bind());"),ut.exit(Fa,".unbind();");continue;case gh:case Ic:Lr="1i";break;case Tp:case $n:Lr="2i",ya=2;break;case gs:case Pc:Lr="3i",ya=3;break;case hd:case Mp:Lr="4i",ya=4;break;case fg:Lr="1f";break;case hg:Lr="2f",ya=2;break;case Vd:Lr="3f",ya=3;break;case fd:Lr="4f",ya=4;break;case Xs:Lr="Matrix2fv";break;case Oc:Lr="Matrix3fv";break;case gc:Lr="Matrix4fv";break}if(ut(Ir,".uniform",Lr,"(",Zn,","),Lr.charAt(0)==="M"){var Fo=Math.pow(Pr-Xs+2,2),Ha=Bt.global.def("new Float32Array(",Fo,")");ut("false,(Array.isArray(",Bn,")||",Bn," instanceof Float32Array)?",Bn,":(",Xn(Fo,function(Wl){return Ha+"["+Wl+"]="+Bn+"["+Wl+"]"}),",",Ha,")")}else ya>1?ut(Xn(ya,function(Wl){return Bn+"["+Wl+"]"})):ut(Bn);ut(");")}}function ma(Bt,ut,hr,rn){var $r=Bt.shared,Ar=$r.gl,Ir=$r.draw,Lr=rn.draw;function lr(){var Fa=Lr.elements,Fo,Ha=ut;return Fa?((Fa.contextDep&&rn.contextDynamic||Fa.propDep)&&(Ha=hr),Fo=Fa.append(Bt,Ha)):Fo=Ha.def(Ir,".",yo),Fo&&Ha("if("+Fo+")"+Ar+".bindBuffer("+P0+","+Fo+".buffer.buffer);"),Fo}function Rr(){var Fa=Lr.count,Fo,Ha=ut;return Fa?((Fa.contextDep&&rn.contextDynamic||Fa.propDep)&&(Ha=hr),Fo=Fa.append(Bt,Ha),se.optional(function(){Fa.MISSING&&Bt.assert(ut,"false","missing vertex count"),Fa.DYNAMIC&&Bt.assert(Ha,Fo+">=0","missing vertex count")})):(Fo=Ha.def(Ir,".",Gs),se.optional(function(){Bt.assert(Ha,Fo+">=0","missing vertex count")})),Fo}var Yt=lr();function Pr(Fa){var Fo=Lr[Fa];return Fo?Fo.contextDep&&rn.contextDynamic||Fo.propDep?Fo.append(Bt,hr):Fo.append(Bt,ut):ut.def(Ir,".",Fa)}var pn=Pr($u),dn=Pr(gf),Zn=Rr();if(typeof Zn=="number"){if(Zn===0)return}else hr("if(",Zn,"){"),hr.exit("}");var Bn,Hn;ti&&(Bn=Pr(ld),Hn=Bt.instancing);var qi=Yt+".type",Fn=Lr.elements&&Il(Lr.elements);function ji(){function Fa(){hr(Hn,".drawElementsInstancedANGLE(",[pn,Zn,qi,dn+"<<(("+qi+"-"+pi+")>>1)",Bn],");")}function Fo(){hr(Hn,".drawArraysInstancedANGLE(",[pn,dn,Zn,Bn],");")}Yt?Fn?Fa():(hr("if(",Yt,"){"),Fa(),hr("}else{"),Fo(),hr("}")):Fo()}function ya(){function Fa(){hr(Ar+".drawElements("+[pn,Zn,qi,dn+"<<(("+qi+"-"+pi+")>>1)"]+");")}function Fo(){hr(Ar+".drawArrays("+[pn,dn,Zn]+");")}Yt?Fn?Fa():(hr("if(",Yt,"){"),Fa(),hr("}else{"),Fo(),hr("}")):Fo()}ti&&(typeof Bn!="number"||Bn>=0)?typeof Bn=="string"?(hr("if(",Bn,">0){"),ji(),hr("}else if(",Bn,"<0){"),ya(),hr("}")):ji():ya()}function da(Bt,ut,hr,rn,$r){var Ar=aa(),Ir=Ar.proc("body",$r);return se.optional(function(){Ar.commandStr=ut.commandStr,Ar.command=Ar.link(ut.commandStr)}),ti&&(Ar.instancing=Ir.def(Ar.shared.extensions,".angle_instanced_arrays")),Bt(Ar,Ir,hr,rn),Ar.compile().body}function So(Bt,ut,hr,rn){Ks(Bt,ut),hr.useVAO?hr.drawVAO?ut(Bt.shared.vao,".setVAO(",hr.drawVAO.append(Bt,ut),");"):ut(Bt.shared.vao,".setVAO(",Bt.shared.vao,".targetVAO);"):(ut(Bt.shared.vao,".setVAO(null);"),Tu(Bt,ut,hr,rn.attributes,function(){return!0})),ko(Bt,ut,hr,rn.uniforms,function(){return!0}),ma(Bt,ut,ut,hr)}function Us(Bt,ut){var hr=Bt.proc("draw",1);Ks(Bt,hr),zs(Bt,hr,ut.context),Fs(Bt,hr,ut.framebuffer),$s(Bt,hr,ut),Ys(Bt,hr,ut.state),qa(Bt,hr,ut,!1,!0);var rn=ut.shader.progVar.append(Bt,hr);if(hr(Bt.shared.gl,".useProgram(",rn,".program);"),ut.shader.program)So(Bt,hr,ut,ut.shader.program);else{hr(Bt.shared.vao,".setVAO(null);");var $r=Bt.global.def("{}"),Ar=hr.def(rn,".id"),Ir=hr.def($r,"[",Ar,"]");hr(Bt.cond(Ir).then(Ir,".call(this,a0);").else(Ir,"=",$r,"[",Ar,"]=",Bt.link(function(Lr){return da(So,Bt,ut,Lr,1)}),"(",rn,");",Ir,".call(this,a0);"))}Object.keys(ut.state).length>0&&hr(Bt.shared.current,".dirty=true;")}function Du(Bt,ut,hr,rn){Bt.batchId="a1",Ks(Bt,ut);function $r(){return!0}Tu(Bt,ut,hr,rn.attributes,$r),ko(Bt,ut,hr,rn.uniforms,$r),ma(Bt,ut,ut,hr)}function ur(Bt,ut,hr,rn){Ks(Bt,ut);var $r=hr.contextDep,Ar=ut.def(),Ir="a0",Lr="a1",lr=ut.def();Bt.shared.props=lr,Bt.batchId=Ar;var Rr=Bt.scope(),Yt=Bt.scope();ut(Rr.entry,"for(",Ar,"=0;",Ar,"<",Lr,";++",Ar,"){",lr,"=",Ir,"[",Ar,"];",Yt,"}",Rr.exit);function Pr(qi){return qi.contextDep&&$r||qi.propDep}function pn(qi){return!Pr(qi)}if(hr.needsContext&&zs(Bt,Yt,hr.context),hr.needsFramebuffer&&Fs(Bt,Yt,hr.framebuffer),Ys(Bt,Yt,hr.state,Pr),hr.profile&&Pr(hr.profile)&&qa(Bt,Yt,hr,!1,!0),rn)hr.useVAO?hr.drawVAO?Pr(hr.drawVAO)?Yt(Bt.shared.vao,".setVAO(",hr.drawVAO.append(Bt,Yt),");"):Rr(Bt.shared.vao,".setVAO(",hr.drawVAO.append(Bt,Rr),");"):Rr(Bt.shared.vao,".setVAO(",Bt.shared.vao,".targetVAO);"):(Rr(Bt.shared.vao,".setVAO(null);"),Tu(Bt,Rr,hr,rn.attributes,pn),Tu(Bt,Yt,hr,rn.attributes,Pr)),ko(Bt,Rr,hr,rn.uniforms,pn),ko(Bt,Yt,hr,rn.uniforms,Pr),ma(Bt,Rr,Yt,hr);else{var dn=Bt.global.def("{}"),Zn=hr.shader.progVar.append(Bt,Yt),Bn=Yt.def(Zn,".id"),Hn=Yt.def(dn,"[",Bn,"]");Yt(Bt.shared.gl,".useProgram(",Zn,".program);","if(!",Hn,"){",Hn,"=",dn,"[",Bn,"]=",Bt.link(function(qi){return da(Du,Bt,hr,qi,2)}),"(",Zn,");}",Hn,".call(this,a0[",Ar,"],",Ar,");")}}function ln(Bt,ut){var hr=Bt.proc("batch",2);Bt.batchId="0",Ks(Bt,hr);var rn=!1,$r=!0;Object.keys(ut.context).forEach(function(dn){rn=rn||ut.context[dn].propDep}),rn||(zs(Bt,hr,ut.context),$r=!1);var Ar=ut.framebuffer,Ir=!1;Ar?(Ar.propDep?rn=Ir=!0:Ar.contextDep&&rn&&(Ir=!0),Ir||Fs(Bt,hr,Ar)):Fs(Bt,hr,null),ut.state.viewport&&ut.state.viewport.propDep&&(rn=!0);function Lr(dn){return dn.contextDep&&rn||dn.propDep}$s(Bt,hr,ut),Ys(Bt,hr,ut.state,function(dn){return!Lr(dn)}),(!ut.profile||!Lr(ut.profile))&&qa(Bt,hr,ut,!1,"a1"),ut.contextDep=rn,ut.needsContext=$r,ut.needsFramebuffer=Ir;var lr=ut.shader.progVar;if(lr.contextDep&&rn||lr.propDep)ur(Bt,hr,ut,null);else{var Rr=lr.append(Bt,hr);if(hr(Bt.shared.gl,".useProgram(",Rr,".program);"),ut.shader.program)ur(Bt,hr,ut,ut.shader.program);else{hr(Bt.shared.vao,".setVAO(null);");var Yt=Bt.global.def("{}"),Pr=hr.def(Rr,".id"),pn=hr.def(Yt,"[",Pr,"]");hr(Bt.cond(pn).then(pn,".call(this,a0,a1);").else(pn,"=",Yt,"[",Pr,"]=",Bt.link(function(dn){return da(ur,Bt,ut,dn,2)}),"(",Rr,");",pn,".call(this,a0,a1);"))}}Object.keys(ut.state).length>0&&hr(Bt.shared.current,".dirty=true;")}function qr(Bt,ut){var hr=Bt.proc("scope",3);Bt.batchId="a2";var rn=Bt.shared,$r=rn.current;zs(Bt,hr,ut.context),ut.framebuffer&&ut.framebuffer.append(Bt,hr),Vf(Object.keys(ut.state)).forEach(function(Ir){var Lr=ut.state[Ir],lr=Lr.append(Bt,hr);ts(lr)?lr.forEach(function(Rr,Yt){hr.set(Bt.next[Ir],"["+Yt+"]",Rr)}):hr.set(rn.next,"."+Ir,lr)}),qa(Bt,hr,ut,!0,!0),[yo,gf,Gs,ld,$u].forEach(function(Ir){var Lr=ut.draw[Ir];Lr&&hr.set(rn.draw,"."+Ir,""+Lr.append(Bt,hr))}),Object.keys(ut.uniforms).forEach(function(Ir){hr.set(rn.uniforms,"["+Gt.id(Ir)+"]",ut.uniforms[Ir].append(Bt,hr))}),Object.keys(ut.attributes).forEach(function(Ir){var Lr=ut.attributes[Ir].append(Bt,hr),lr=Bt.scopeAttrib(Ir);Object.keys(new jr).forEach(function(Rr){hr.set(lr,"."+Rr,Lr[Rr])})}),ut.scopeVAO&&hr.set(rn.vao,".targetVAO",ut.scopeVAO.append(Bt,hr));function Ar(Ir){var Lr=ut.shader[Ir];Lr&&hr.set(rn.shader,"."+Ir,Lr.append(Bt,hr))}Ar(Al),Ar(Jl),Object.keys(ut.state).length>0&&(hr($r,".dirty=true;"),hr.exit($r,".dirty=true;")),hr("a1(",Bt.shared.context,",a0,",Bt.batchId,");")}function ki(Bt){if(!(typeof Bt!="object"||ts(Bt))){for(var ut=Object.keys(Bt),hr=0;hr<ut.length;++hr)if(tr.isDynamic(Bt[ut[hr]]))return!0;return!1}}function Ja(Bt,ut,hr){var rn=ut.static[hr];if(!rn||!ki(rn))return;var $r=Bt.global,Ar=Object.keys(rn),Ir=!1,Lr=!1,lr=!1,Rr=Bt.global.def("{}");Ar.forEach(function(Pr){var pn=rn[Pr];if(tr.isDynamic(pn)){typeof pn=="function"&&(pn=rn[Pr]=tr.unbox(pn));var dn=pl(pn,null);Ir=Ir||dn.thisDep,lr=lr||dn.propDep,Lr=Lr||dn.contextDep}else{switch($r(Rr,".",Pr,"="),typeof pn){case"number":$r(pn);break;case"string":$r('"',pn,'"');break;case"object":Array.isArray(pn)&&$r("[",pn.join(),"]");break;default:$r(Bt.link(pn));break}$r(";")}});function Yt(Pr,pn){Ar.forEach(function(dn){var Zn=rn[dn];if(tr.isDynamic(Zn)){var Bn=Pr.invoke(pn,Zn);pn(Rr,".",dn,"=",Bn,";")}})}ut.dynamic[hr]=new tr.DynamicVariable(Ni,{thisDep:Ir,contextDep:Lr,propDep:lr,ref:Rr,append:Yt}),delete ut.static[hr]}function Tn(Bt,ut,hr,rn,$r){var Ar=aa();Ar.stats=Ar.link($r),Object.keys(ut.static).forEach(function(Lr){Ja(Ar,ut,Lr)}),cg.forEach(function(Lr){Ja(Ar,Bt,Lr)});var Ir=du(Bt,ut,hr,rn,Ar);return Us(Ar,Ir),qr(Ar,Ir),ln(Ar,Ir),Ar.compile()}return{next:Bi,current:Vr,procs:function(){var Bt=aa(),ut=Bt.proc("poll"),hr=Bt.proc("refresh"),rn=Bt.block();ut(rn),hr(rn);var $r=Bt.shared,Ar=$r.gl,Ir=$r.next,Lr=$r.current;rn(Lr,".dirty=false;"),Fs(Bt,ut),Fs(Bt,hr,null,!0);var lr;ti&&(lr=Bt.link(ti)),dr.oes_vertex_array_object&&hr(Bt.link(dr.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Rr=0;Rr<on.maxAttributes;++Rr){var Yt=hr.def($r.attributes,"[",Rr,"]"),Pr=Bt.cond(Yt,".buffer");Pr.then(Ar,".enableVertexAttribArray(",Rr,");",Ar,".bindBuffer(",vc,",",Yt,".buffer.buffer);",Ar,".vertexAttribPointer(",Rr,",",Yt,".size,",Yt,".type,",Yt,".normalized,",Yt,".stride,",Yt,".offset);").else(Ar,".disableVertexAttribArray(",Rr,");",Ar,".vertexAttrib4f(",Rr,",",Yt,".x,",Yt,".y,",Yt,".z,",Yt,".w);",Yt,".buffer=null;"),hr(Pr),ti&&hr(lr,".vertexAttribDivisorANGLE(",Rr,",",Yt,".divisor);")}return hr(Bt.shared.vao,".currentVAO=null;",Bt.shared.vao,".setVAO(",Bt.shared.vao,".targetVAO);"),Object.keys(Ti).forEach(function(pn){var dn=Ti[pn],Zn=rn.def(Ir,".",pn),Bn=Bt.block();Bn("if(",Zn,"){",Ar,".enable(",dn,")}else{",Ar,".disable(",dn,")}",Lr,".",pn,"=",Zn,";"),hr(Bn),ut("if(",Zn,"!==",Lr,".",pn,"){",Bn,"}")}),Object.keys(Ln).forEach(function(pn){var dn=Ln[pn],Zn=Vr[pn],Bn,Hn,qi=Bt.block();if(qi(Ar,".",dn,"("),ts(Zn)){var Fn=Zn.length;Bn=Bt.global.def(Ir,".",pn),Hn=Bt.global.def(Lr,".",pn),qi(Xn(Fn,function(ji){return Bn+"["+ji+"]"}),");",Xn(Fn,function(ji){return Hn+"["+ji+"]="+Bn+"["+ji+"];"}).join("")),ut("if(",Xn(Fn,function(ji){return Bn+"["+ji+"]!=="+Hn+"["+ji+"]"}).join("||"),"){",qi,"}")}else Bn=rn.def(Ir,".",pn),Hn=rn.def(Lr,".",pn),qi(Bn,");",Lr,".",pn,"=",Bn,";"),ut("if(",Bn,"!==",Hn,"){",qi,"}");hr(qi)}),Bt.compile()}(),compile:Tn}}function pg(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Vh=34918,Rv=34919,mm=35007,_f=function(Xe,Gt){if(!Gt.ext_disjoint_timer_query)return null;var dr=[];function on(){return dr.pop()||Gt.ext_disjoint_timer_query.createQueryEXT()}function wn(ti){dr.push(ti)}var un=[];function Yr(ti){var Ci=on();Gt.ext_disjoint_timer_query.beginQueryEXT(mm,Ci),un.push(Ci),En(un.length-1,un.length,ti)}function Yn(){Gt.ext_disjoint_timer_query.endQueryEXT(mm)}function zn(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var li=[];function ni(){return li.pop()||new zn}function ai(ti){li.push(ti)}var xi=[];function En(ti,Ci,Vr){var Bi=ni();Bi.startQueryIndex=ti,Bi.endQueryIndex=Ci,Bi.sum=0,Bi.stats=Vr,xi.push(Bi)}var ci=[],jr=[];function mn(){var ti,Ci,Vr=un.length;if(Vr!==0){jr.length=Math.max(jr.length,Vr+1),ci.length=Math.max(ci.length,Vr+1),ci[0]=0,jr[0]=0;var Bi=0;for(ti=0,Ci=0;Ci<un.length;++Ci){var Wn=un[Ci];Gt.ext_disjoint_timer_query.getQueryObjectEXT(Wn,Rv)?(Bi+=Gt.ext_disjoint_timer_query.getQueryObjectEXT(Wn,Vh),wn(Wn)):un[ti++]=Wn,ci[Ci+1]=Bi,jr[Ci+1]=ti}for(un.length=ti,ti=0,Ci=0;Ci<xi.length;++Ci){var Ti=xi[Ci],Ln=Ti.startQueryIndex,wi=Ti.endQueryIndex;Ti.sum+=ci[wi]-ci[Ln];var ta=jr[Ln],Ua=jr[wi];Ua===ta?(Ti.stats.gpuTime+=Ti.sum/1e6,ai(Ti)):(Ti.startQueryIndex=ta,Ti.endQueryIndex=Ua,xi[ti++]=Ti)}xi.length=ti}}return{beginQuery:Yr,endQuery:Yn,pushScopeStats:En,update:mn,getNumPendingQueries:function(){return un.length},clear:function(){dr.push.apply(dr,un);for(var ti=0;ti<dr.length;ti++)Gt.ext_disjoint_timer_query.deleteQueryEXT(dr[ti]);un.length=0,dr.length=0},restore:function(){un.length=0,dr.length=0}}},ym=16384,dl=256,L0=1024,Iv=34962,kp="webglcontextlost",Fp="webglcontextrestored",dg=1,vg=2,B0=3;function Hh(Xe,Gt){for(var dr=0;dr<Xe.length;++dr)if(Xe[dr]===Gt)return dr;return-1}function _m(Xe){var Gt=mi(Xe);if(!Gt)return null;var dr=Gt.gl,on=dr.getContextAttributes(),wn=dr.isContextLost(),un=qn(dr,Gt);if(!un)return null;var Yr=Zr(),Yn=pg(),zn=un.extensions,li=_f(dr,zn),ni=br(),ai=dr.drawingBufferWidth,xi=dr.drawingBufferHeight,En={tick:0,time:0,viewportWidth:ai,viewportHeight:xi,framebufferWidth:ai,framebufferHeight:xi,drawingBufferWidth:ai,drawingBufferHeight:xi,pixelRatio:Gt.pixelRatio},ci={},jr={elements:null,primitive:4,count:-1,offset:0,instances:-1},mn=su(dr,zn),ti=ql(dr,Yn,Gt,Vr),Ci=yt(dr,zn,mn,Yn,ti);function Vr(ma){return Ci.destroyBuffer(ma)}var Bi=td(dr,zn,ti,Yn),Wn=or(dr,Yr,Yn,Gt),Ti=tu(dr,zn,mn,function(){ta.procs.poll()},En,Yn,Gt),Ln=Gu(dr,zn,mn,Yn,Gt),wi=q(dr,zn,mn,Ti,Ln,Yn),ta=Op(dr,Yr,zn,mn,ti,Bi,Ti,wi,ci,Ci,Wn,jr,En,li,Gt),Ua=Wr(dr,wi,ta.procs.poll,En,on,zn,mn),Ai=ta.next,Gn=dr.canvas,Rn=[],aa=[],to=[],Oi=[Gt.onDestroy],Ka=null;function ka(){if(Rn.length===0){li&&li.update(),Ka=null;return}Ka=pr.next(ka),Ys();for(var ma=Rn.length-1;ma>=0;--ma){var da=Rn[ma];da&&da(En,null,0)}dr.flush(),li&&li.update()}function xa(){!Ka&&Rn.length>0&&(Ka=pr.next(ka))}function wo(){Ka&&(pr.cancel(ka),Ka=null)}function pu(ma){ma.preventDefault(),wn=!0,wo(),aa.forEach(function(da){da()})}function Fu(ma){dr.getError(),wn=!1,un.restore(),Wn.restore(),ti.restore(),Ti.restore(),Ln.restore(),wi.restore(),Ci.restore(),li&&li.restore(),ta.procs.refresh(),xa(),to.forEach(function(da){da()})}Gn&&(Gn.addEventListener(kp,pu,!1),Gn.addEventListener(Fp,Fu,!1));function vo(){Rn.length=0,wo(),Gn&&(Gn.removeEventListener(kp,pu),Gn.removeEventListener(Fp,Fu)),Wn.clear(),wi.clear(),Ln.clear(),Ti.clear(),Bi.clear(),ti.clear(),Ci.clear(),li&&li.clear(),Oi.forEach(function(ma){ma()})}function ss(ma){se(!!ma,"invalid args to regl({...})"),se.type(ma,"object","invalid args to regl({...})");function da($r){var Ar=F({},$r);delete Ar.uniforms,delete Ar.attributes,delete Ar.context,delete Ar.vao,"stencil"in Ar&&Ar.stencil.op&&(Ar.stencil.opBack=Ar.stencil.opFront=Ar.stencil.op,delete Ar.stencil.op);function Ir(Lr){if(Lr in Ar){var lr=Ar[Lr];delete Ar[Lr],Object.keys(lr).forEach(function(Rr){Ar[Lr+"."+Rr]=lr[Rr]})}}return Ir("blend"),Ir("depth"),Ir("cull"),Ir("stencil"),Ir("polygonOffset"),Ir("scissor"),Ir("sample"),"vao"in $r&&(Ar.vao=$r.vao),Ar}function So($r){var Ar={},Ir={};return Object.keys($r).forEach(function(Lr){var lr=$r[Lr];tr.isDynamic(lr)?Ir[Lr]=tr.unbox(lr,Lr):Ar[Lr]=lr}),{dynamic:Ir,static:Ar}}var Us=So(ma.context||{}),Du=So(ma.uniforms||{}),ur=So(ma.attributes||{}),ln=So(da(ma)),qr={gpuTime:0,cpuTime:0,count:0},ki=ta.compile(ln,ur,Du,Us,qr),Ja=ki.draw,Tn=ki.batch,Bt=ki.scope,ut=[];function hr($r){for(;ut.length<$r;)ut.push(null);return ut}function rn($r,Ar){var Ir;if(wn&&se.raise("context lost"),typeof $r=="function")return Bt.call(this,null,$r,0);if(typeof Ar=="function")if(typeof $r=="number")for(Ir=0;Ir<$r;++Ir)Bt.call(this,null,Ar,Ir);else if(Array.isArray($r))for(Ir=0;Ir<$r.length;++Ir)Bt.call(this,$r[Ir],Ar,Ir);else return Bt.call(this,$r,Ar,0);else if(typeof $r=="number"){if($r>0)return Tn.call(this,hr($r|0),$r|0)}else if(Array.isArray($r)){if($r.length)return Tn.call(this,$r,$r.length)}else return Ja.call(this,$r)}return F(rn,{stats:qr})}var Uo=wi.setFBO=ss({framebuffer:tr.define.call(null,dg,"framebuffer")});function du(ma,da){var So=0;ta.procs.poll();var Us=da.color;Us&&(dr.clearColor(+Us[0]||0,+Us[1]||0,+Us[2]||0,+Us[3]||0),So|=ym),"depth"in da&&(dr.clearDepth(+da.depth),So|=dl),"stencil"in da&&(dr.clearStencil(da.stencil|0),So|=L0),se(!!So,"called regl.clear with no buffer specified"),dr.clear(So)}function zs(ma){if(se(typeof ma=="object"&&ma,"regl.clear() takes an object as input"),"framebuffer"in ma)if(ma.framebuffer&&ma.framebuffer_reglType==="framebufferCube")for(var da=0;da<6;++da)Uo(F({framebuffer:ma.framebuffer.faces[da]},ma),du);else Uo(ma,du);else du(null,ma)}function Fs(ma){se.type(ma,"function","regl.frame() callback must be a function"),Rn.push(ma);function da(){var So=Hh(Rn,ma);se(So>=0,"cannot cancel a frame twice");function Us(){var Du=Hh(Rn,Us);Rn[Du]=Rn[Rn.length-1],Rn.length-=1,Rn.length<=0&&wo()}Rn[So]=Us}return xa(),{cancel:da}}function $s(){var ma=Ai.viewport,da=Ai.scissor_box;ma[0]=ma[1]=da[0]=da[1]=0,En.viewportWidth=En.framebufferWidth=En.drawingBufferWidth=ma[2]=da[2]=dr.drawingBufferWidth,En.viewportHeight=En.framebufferHeight=En.drawingBufferHeight=ma[3]=da[3]=dr.drawingBufferHeight}function Ys(){En.tick+=1,En.time=qa(),$s(),ta.procs.poll()}function Ks(){$s(),ta.procs.refresh(),li&&li.update()}function qa(){return(br()-ni)/1e3}Ks();function Tu(ma,da){se.type(da,"function","listener callback must be a function");var So;switch(ma){case"frame":return Fs(da);case"lost":So=aa;break;case"restore":So=to;break;case"destroy":So=Oi;break;default:se.raise("invalid event, must be one of frame,lost,restore,destroy")}return So.push(da),{cancel:function(){for(var Us=0;Us<So.length;++Us)if(So[Us]===da){So[Us]=So[So.length-1],So.pop();return}}}}var ko=F(ss,{clear:zs,prop:tr.define.bind(null,dg),context:tr.define.bind(null,vg),this:tr.define.bind(null,B0),draw:ss({}),buffer:function(ma){return ti.create(ma,Iv,!1,!1)},elements:function(ma){return Bi.create(ma,!1)},texture:Ti.create2D,cube:Ti.createCube,renderbuffer:Ln.create,framebuffer:wi.create,framebufferCube:wi.createCube,vao:Ci.createVAO,attributes:on,frame:Fs,on:Tu,limits:mn,hasExtension:function(ma){return mn.extensions.indexOf(ma.toLowerCase())>=0},read:Ua,destroy:vo,_gl:dr,_refresh:Ks,poll:function(){Ys(),li&&li.update()},now:qa,stats:Yn});return Gt.onDone(null,ko),ko}return _m})},3876:function(xt,N){"use strict";var F;F={value:!0},F=F=N.Tf=N.Bc=N.jp=N.fL=N.O6=N.rC=void 0,N.rC="l7plot-legend l7plot-legend__category",N.O6="l7plot-legend__title",N.fL="l7plot-legend__category-list",N.jp="l7plot-legend__list-item",N.Bc="l7plot-legend__category-marker",N.Tf="l7plot-legend__category-value",F='<div class="'.concat(N.rC,`">
  <div class="`).concat(N.O6,`"></div>
  <ul class="`).concat(N.fL,`"></ul>
</div>`),F='<li class="'.concat(N.jp,`" data-index={index}>
  <span class="`).concat(N.Bc,`" style="background:{color}"></span>
  <span class="`).concat(N.Tf,`">{value}</span>
</li>`)},56992:function(xt,N){"use strict";var F;F={value:!0},F=F=N.VI=N.bl=N.el=N.I8=N.O6=N.rC=void 0,N.rC="l7plot-legend l7plot-legend__continue",N.O6="l7plot-legend__title",N.I8="l7plot-legend__ribbon-container",N.el="l7plot-legend__ribbon",N.bl="l7plot-legend__gradient-bar",N.VI="l7plot-legend__value-range",F='<div class="'.concat(N.rC,`">
  <div class="`).concat(N.O6,`"></div>
  <div class="`).concat(N.I8,`"></div>
</div>`),F='<div class="'.concat(N.el,`">
  <span class="`).concat(N.VI,`">{min}</span>
  <div class="`).concat(N.bl,`" style="background-image: {backgroundImage}"></div>
  <span class="`).concat(N.VI,`">{max}</span>
</div>`)},77972:function(xt,N){"use strict";var F;F={value:!0},F=F=N.Tf=N.bX=N.jp=N.fL=N.O6=N.rC=void 0,N.rC="l7plot-tooltip",N.O6="l7plot-tooltip__title",N.fL="l7plot-tooltip__list",N.jp="l7plot-tooltip__list-item",N.bX="l7plot-tooltip__name",N.Tf="l7plot-tooltip__value",F='<div class="'.concat(N.rC,`">
  <div class="`).concat(N.O6,`"></div>
  <ul class="`).concat(N.fL,`"></ul>
</div>`),F='<li class="'.concat(N.jp,`" data-index={index}>
  <span class="`).concat(N.bX,`">{name}</span>
  <span class="`).concat(N.Tf,`">{value}</span>
</li>`)},31506:function(xt,N,F){"use strict";F.d(N,{Dg:function(){return ee},lh:function(){return G},m$:function(){return w},vs:function(){return Q},zu:function(){return Y}});var $=F(35600),X=F(31437);function w(ce,he,J){var M=[0,0,0,0,0,0,0,0,0];return $.vc(M,J),$.Jp(ce,M,he)}function Y(ce,he,J){var M=[0,0,0,0,0,0,0,0,0];return $.Us(M,J),$.Jp(ce,M,he)}function G(ce,he,J){var M=[0,0,0,0,0,0,0,0,0];return $.xJ(M,J),$.Jp(ce,M,he)}function K(ce,he,J){return $.Jp(ce,J,he)}function Q(ce,he){for(var J=ce?[].concat(ce):[1,0,0,0,1,0,0,0,1],M=0,E=he.length;M<E;M++){var fe=he[M];switch(fe[0]){case"t":w(J,J,[fe[1],fe[2]]);break;case"s":G(J,J,[fe[1],fe[2]]);break;case"r":Y(J,J,fe[1]);break;case"m":K(J,J,fe[1]);break;default:break}}return J}function oe(ce,he){return ce[0]*he[1]-he[0]*ce[1]}function ee(ce,he,J){var M=X.EU(ce,he),E=oe(ce,he)>=0;return J?E?Math.PI*2-M:M:E?M:Math.PI*2-M}function xe(ce,he,J){return J?(ce[0]=he[1],ce[1]=-1*he[0]):(ce[0]=-1*he[1],ce[1]=he[0]),ce}},39499:function(xt,N,F){"use strict";F.d(N,{e9:function(){return ee},Wq:function(){return bt},tr:function(){return fe},wb:function(){return Pe},zx:function(){return et}});var $=F(21030),X=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,w=/[^\s\,]+/ig;function Y(Be){var pt=Be||[];if((0,$.kJ)(pt))return pt;if((0,$.HD)(pt))return pt=pt.match(X),(0,$.S6)(pt,function(It,ot){if(It=It.match(w),It[0].length>1){var zt=It[0].charAt(0);It.splice(1,0,It[0].substr(1)),It[0]=zt}(0,$.S6)(It,function(Jt,tr){isNaN(Jt)||(It[tr]=+Jt)}),pt[ot]=It}),pt}var G=Y,K=F(31437);function Q(Be,pt,It,ot){var zt=[],Jt=!!ot,tr,pr,br,Zr,Nr,tn,Dn;if(Jt){br=ot[0],Zr=ot[1];for(var gn=0,Vn=Be.length;gn<Vn;gn+=1){var Un=Be[gn];br=K.VV([0,0],br,Un),Zr=K.Fp([0,0],Zr,Un)}}for(var gn=0,mi=Be.length;gn<mi;gn+=1){var Un=Be[gn];if(gn===0&&!It)Dn=Un;else if(gn===mi-1&&!It)tn=Un,zt.push(Dn),zt.push(tn);else{var qn=[gn?gn-1:mi-1,gn-1][It?0:1];tr=Be[qn],pr=Be[It?(gn+1)%mi:gn+1];var Xn=[0,0];Xn=K.lu(Xn,pr,tr),Xn=K.bA(Xn,Xn,pt);var We=K.TE(Un,tr),it=K.TE(Un,pr),_t=We+it;_t!==0&&(We/=_t,it/=_t);var Pt=K.bA([0,0],Xn,-We),jt=K.bA([0,0],Xn,it);tn=K.IH([0,0],Un,Pt),Nr=K.IH([0,0],Un,jt),Nr=K.VV([0,0],Nr,K.Fp([0,0],pr,Un)),Nr=K.Fp([0,0],Nr,K.VV([0,0],pr,Un)),Pt=K.lu([0,0],Nr,Un),Pt=K.bA([0,0],Pt,-We/it),tn=K.IH([0,0],Un,Pt),tn=K.VV([0,0],tn,K.Fp([0,0],tr,Un)),tn=K.Fp([0,0],tn,K.VV([0,0],tr,Un)),jt=K.lu([0,0],Un,tn),jt=K.bA([0,0],jt,it/We),Nr=K.IH([0,0],Un,jt),Jt&&(tn=K.Fp([0,0],tn,br),tn=K.VV([0,0],tn,Zr),Nr=K.Fp([0,0],Nr,br),Nr=K.VV([0,0],Nr,Zr)),zt.push(Dn),zt.push(tn),Dn=Nr}}return It&&zt.push(zt.shift()),zt}function oe(Be,pt,It){pt===void 0&&(pt=!1),It===void 0&&(It=[[0,0],[1,1]]);for(var ot=!!pt,zt=[],Jt=0,tr=Be.length;Jt<tr;Jt+=2)zt.push([Be[Jt],Be[Jt+1]]);for(var pr=Q(zt,.4,ot,It),br=zt.length,Zr=[],Nr,tn,Dn,Jt=0;Jt<br-1;Jt+=1)Nr=pr[Jt*2],tn=pr[Jt*2+1],Dn=zt[Jt+1],Zr.push(["C",Nr[0],Nr[1],tn[0],tn[1],Dn[0],Dn[1]]);return ot&&(Nr=pr[br],tn=pr[br+1],Dn=zt[0],Zr.push(["C",Nr[0],Nr[1],tn[0],tn[1],Dn[0],Dn[1]])),Zr}var ee=oe;function xe(Be,pt,It){var ot=null,zt=It;return pt<zt&&(zt=pt,ot="add"),Be<zt&&(zt=Be,ot="del"),{type:ot,min:zt}}var ce=function(Be,pt){var It=Be.length,ot=pt.length,zt,Jt,tr=0;if(It===0||ot===0)return null;for(var pr=[],br=0;br<=It;br++)pr[br]=[],pr[br][0]={min:br};for(var Zr=0;Zr<=ot;Zr++)pr[0][Zr]={min:Zr};for(var br=1;br<=It;br++){zt=Be[br-1];for(var Zr=1;Zr<=ot;Zr++){Jt=pt[Zr-1],isEqual(zt,Jt)?tr=0:tr=1;var Nr=pr[br-1][Zr].min+1,tn=pr[br][Zr-1].min+1,Dn=pr[br-1][Zr-1].min+tr;pr[br][Zr]=xe(Nr,tn,Dn)}}return pr};function he(Be,pt){var It=ce(Be,pt),ot=Be.length,zt=pt.length,Jt=[],tr=1,pr=1;if(It[ot][zt]!==ot){for(var br=1;br<=ot;br++){var Zr=It[br][br].min;pr=br;for(var Nr=tr;Nr<=zt;Nr++)It[br][Nr].min<Zr&&(Zr=It[br][Nr].min,pr=Nr);tr=pr,It[br][tr].type&&Jt.push({index:br-1,type:It[br][tr].type})}for(var br=Jt.length-1;br>=0;br--)tr=Jt[br].index,Jt[br].type==="add"?Be.splice(tr,0,[].concat(Be[tr])):Be.splice(tr,1)}if(ot=Be.length,ot<zt)for(var br=0;br<zt-ot;br++)Be[ot-1][0]==="z"||Be[ot-1][0]==="Z"?Be.splice(ot-2,0,Be[ot-2]):Be.push(Be[ot-1]);return Be}var J=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,M=new RegExp("([a-z])["+J+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+J+"]*,?["+J+"]*)+)","ig"),E=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+J+"]*,?["+J+"]*","ig");function fe(Be){if(!Be)return null;if((0,$.kJ)(Be))return Be;var pt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},It=[];return String(Be).replace(M,function(ot,zt,Jt){var tr=[],pr=zt.toLowerCase();if(Jt.replace(E,function(br,Zr){Zr&&tr.push(+Zr)}),pr==="m"&&tr.length>2&&(It.push([zt].concat(tr.splice(0,2))),pr="l",zt=zt==="m"?"l":"L"),pr==="o"&&tr.length===1&&It.push([zt,tr[0]]),pr==="r")It.push([zt].concat(tr));else for(;tr.length>=pt[pr]&&(It.push([zt].concat(tr.splice(0,pt[pr]))),!!pt[pr]););return""}),It}var me=/[a-z]/;function ke(Be,pt){return[pt[0]+(pt[0]-Be[0]),pt[1]+(pt[1]-Be[1])]}function Pe(Be){var pt=fe(Be);if(!pt||!pt.length)return[["M",0,0]];for(var It=!1,ot=0;ot<pt.length;ot++){var zt=pt[ot][0];if(me.test(zt)||["V","H","T","S"].indexOf(zt)>=0){It=!0;break}}if(!It)return pt;var Jt=[],tr=0,pr=0,br=0,Zr=0,Nr=0,tn,Dn,gn=pt[0];(gn[0]==="M"||gn[0]==="m")&&(tr=+gn[1],pr=+gn[2],br=tr,Zr=pr,Nr++,Jt[0]=["M",tr,pr]);for(var ot=Nr,Vn=pt.length;ot<Vn;ot++){var Un=pt[ot],mi=Jt[ot-1],qn=[],zt=Un[0],Xn=zt.toUpperCase();if(zt!==Xn)switch(qn[0]=Xn,Xn){case"A":qn[1]=Un[1],qn[2]=Un[2],qn[3]=Un[3],qn[4]=Un[4],qn[5]=Un[5],qn[6]=+Un[6]+tr,qn[7]=+Un[7]+pr;break;case"V":qn[1]=+Un[1]+pr;break;case"H":qn[1]=+Un[1]+tr;break;case"M":br=+Un[1]+tr,Zr=+Un[2]+pr,qn[1]=br,qn[2]=Zr;break;default:for(var We=1,it=Un.length;We<it;We++)qn[We]=+Un[We]+(We%2?tr:pr)}else qn=pt[ot];switch(Xn){case"Z":tr=+br,pr=+Zr;break;case"H":tr=qn[1],qn=["L",tr,pr];break;case"V":pr=qn[1],qn=["L",tr,pr];break;case"T":tr=qn[1],pr=qn[2];var _t=ke([mi[1],mi[2]],[mi[3],mi[4]]);qn=["Q",_t[0],_t[1],tr,pr];break;case"S":tr=qn[qn.length-2],pr=qn[qn.length-1];var Pt=mi.length,jt=ke([mi[Pt-4],mi[Pt-3]],[mi[Pt-2],mi[Pt-1]]);qn=["C",jt[0],jt[1],qn[1],qn[2],tr,pr];break;case"M":br=qn[qn.length-2],Zr=qn[qn.length-1];break;default:tr=qn[qn.length-2],pr=qn[qn.length-1]}Jt.push(qn)}return Jt}var Le=Math.PI*2,tt=function(Be,pt,It,ot,zt,Jt,tr){var pr=Be.x,br=Be.y;pr*=pt,br*=It;var Zr=ot*pr-zt*br,Nr=zt*pr+ot*br;return{x:Zr+Jt,y:Nr+tr}},ft=function(Be,pt){var It=pt===1.5707963267948966?.551915024494:pt===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(pt/4),ot=Math.cos(Be),zt=Math.sin(Be),Jt=Math.cos(Be+pt),tr=Math.sin(Be+pt);return[{x:ot-zt*It,y:zt+ot*It},{x:Jt+tr*It,y:tr-Jt*It},{x:Jt,y:tr}]},ge=function(Be,pt,It,ot){var zt=Be*ot-pt*It<0?-1:1,Jt=Be*It+pt*ot;return Jt>1&&(Jt=1),Jt<-1&&(Jt=-1),zt*Math.acos(Jt)},be=function(Be,pt,It,ot,zt,Jt,tr,pr,br,Zr,Nr,tn){var Dn=Math.pow(zt,2),gn=Math.pow(Jt,2),Vn=Math.pow(Nr,2),Un=Math.pow(tn,2),mi=Dn*gn-Dn*Un-gn*Vn;mi<0&&(mi=0),mi/=Dn*Un+gn*Vn,mi=Math.sqrt(mi)*(tr===pr?-1:1);var qn=mi*zt/Jt*tn,Xn=mi*-Jt/zt*Nr,We=Zr*qn-br*Xn+(Be+It)/2,it=br*qn+Zr*Xn+(pt+ot)/2,_t=(Nr-qn)/zt,Pt=(tn-Xn)/Jt,jt=(-Nr-qn)/zt,gr=(-tn-Xn)/Jt,Cr=ge(1,0,_t,Pt),kt=ge(_t,Pt,jt,gr);return pr===0&&kt>0&&(kt-=Le),pr===1&&kt<0&&(kt+=Le),[We,it,Cr,kt]},Ce=function(Be){var pt=Be.px,It=Be.py,ot=Be.cx,zt=Be.cy,Jt=Be.rx,tr=Be.ry,pr=Be.xAxisRotation,br=pr===void 0?0:pr,Zr=Be.largeArcFlag,Nr=Zr===void 0?0:Zr,tn=Be.sweepFlag,Dn=tn===void 0?0:tn,gn=[];if(Jt===0||tr===0)return[{x1:0,y1:0,x2:0,y2:0,x:ot,y:zt}];var Vn=Math.sin(br*Le/360),Un=Math.cos(br*Le/360),mi=Un*(pt-ot)/2+Vn*(It-zt)/2,qn=-Vn*(pt-ot)/2+Un*(It-zt)/2;if(mi===0&&qn===0)return[{x1:0,y1:0,x2:0,y2:0,x:ot,y:zt}];Jt=Math.abs(Jt),tr=Math.abs(tr);var Xn=Math.pow(mi,2)/Math.pow(Jt,2)+Math.pow(qn,2)/Math.pow(tr,2);Xn>1&&(Jt*=Math.sqrt(Xn),tr*=Math.sqrt(Xn));var We=be(pt,It,ot,zt,Jt,tr,Nr,Dn,Vn,Un,mi,qn),it=We[0],_t=We[1],Pt=We[2],jt=We[3],gr=Math.abs(jt)/(Le/4);Math.abs(1-gr)<1e-7&&(gr=1);var Cr=Math.max(Math.ceil(gr),1);jt/=Cr;for(var kt=0;kt<Cr;kt++)gn.push(ft(Pt,jt)),Pt+=jt;return gn.map(function(at){var Rt=tt(at[0],Jt,tr,Un,Vn,it,_t),mr=Rt.x,Dr=Rt.y,Ft=tt(at[1],Jt,tr,Un,Vn,it,_t),Mn=Ft.x,yi=Ft.y,gi=tt(at[2],Jt,tr,Un,Vn,it,_t),sn=gi.x,hi=gi.y;return{x1:mr,y1:Dr,x2:Mn,y2:yi,x:sn,y:hi}})};function Ye(Be,pt,It,ot,zt,Jt,tr,pr,br){var Zr=Ce({px:Be,py:pt,cx:pr,cy:br,rx:It,ry:ot,xAxisRotation:zt,largeArcFlag:Jt,sweepFlag:tr});return Zr.reduce(function(Nr,tn){var Dn=tn.x1,gn=tn.y1,Vn=tn.x2,Un=tn.y2,mi=tn.x,qn=tn.y;return Nr.push(Dn,gn,Vn,Un,mi,qn),Nr},[])}function je(Be,pt){"TQ".indexOf(Be[0])<0&&(pt.qx=null,pt.qy=null);var It=Be.slice(1),ot=It[0],zt=It[1];switch(Be[0]){case"M":return pt.x=ot,pt.y=zt,Be;case"A":return["C"].concat(arcToCubic.apply(0,[pt.x1,pt.y1].concat(Be.slice(1))));case"Q":return pt.qx=ot,pt.qy=zt,["C"].concat(quadToCubic.apply(0,[pt.x1,pt.y1].concat(Be.slice(1))));case"L":return["C"].concat(lineToCubic(pt.x1,pt.y1,Be[1],Be[2]));case"H":return["C"].concat(lineToCubic(pt.x1,pt.y1,Be[1],pt.y1));case"V":return["C"].concat(lineToCubic(pt.x1,pt.y1,pt.x1,Be[1]));case"Z":return["C"].concat(lineToCubic(pt.x1,pt.y1,pt.x,pt.y));default:}return Be}function Et(Be,pt){pt===void 0&&(pt=!1);for(var It=path2Absolute(Be),ot={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},zt=[],Jt="",tr=It.length,pr,br,Zr=[],Nr=0;Nr<tr;Nr+=1)It[Nr]&&(Jt=It[Nr][0]),zt[Nr]=Jt,It[Nr]=segmentToCubic(It[Nr],ot),Ae(It,zt,Nr),tr=It.length,Jt==="Z"&&Zr.push(Nr),pr=It[Nr],br=pr.length,ot.x1=+pr[br-2],ot.y1=+pr[br-1],ot.x2=+pr[br-4]||ot.x1,ot.y2=+pr[br-3]||ot.y1;return pt?[It,Zr]:It}function Ae(Be,pt,It){if(Be[It].length>7){Be[It].shift();for(var ot=Be[It],zt=It;ot.length;)pt[It]="A",Be.splice(zt+=1,0,["C"].concat(ot.splice(0,6)));Be.splice(It,1)}}var Qe=function(Be,pt,It,ot,zt){var Jt=-3*pt+9*It-9*ot+3*zt,tr=Be*Jt+6*pt-12*It+6*ot;return Be*tr-3*pt+3*It},te=function(Be,pt,It,ot,zt,Jt,tr,pr,br){br===null&&(br=1),br=br>1?1:br<0?0:br;for(var Zr=br/2,Nr=12,tn=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Dn=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],gn=0,Vn=0;Vn<Nr;Vn++){var Un=Zr*tn[Vn]+Zr,mi=Qe(Un,Be,It,zt,tr),qn=Qe(Un,pt,ot,Jt,pr),Xn=mi*mi+qn*qn;gn+=Dn[Vn]*Math.sqrt(Xn)}return Zr*gn},Ze=function(Be,pt,It,ot,zt,Jt,tr,pr){for(var br=[],Zr=[[],[]],Nr,tn,Dn,gn,Vn=0;Vn<2;++Vn){if(Vn===0?(tn=6*Be-12*It+6*zt,Nr=-3*Be+9*It-9*zt+3*tr,Dn=3*It-3*Be):(tn=6*pt-12*ot+6*Jt,Nr=-3*pt+9*ot-9*Jt+3*pr,Dn=3*ot-3*pt),Math.abs(Nr)<1e-12){if(Math.abs(tn)<1e-12)continue;gn=-Dn/tn,gn>0&&gn<1&&br.push(gn);continue}var Un=tn*tn-4*Dn*Nr,mi=Math.sqrt(Un);if(!(Un<0)){var qn=(-tn+mi)/(2*Nr);qn>0&&qn<1&&br.push(qn);var Xn=(-tn-mi)/(2*Nr);Xn>0&&Xn<1&&br.push(Xn)}}for(var We=br.length,it=We,_t;We--;)gn=br[We],_t=1-gn,Zr[0][We]=_t*_t*_t*Be+3*_t*_t*gn*It+3*_t*gn*gn*zt+gn*gn*gn*tr,Zr[1][We]=_t*_t*_t*pt+3*_t*_t*gn*ot+3*_t*gn*gn*Jt+gn*gn*gn*pr;return Zr[0][it]=Be,Zr[1][it]=pt,Zr[0][it+1]=tr,Zr[1][it+1]=pr,Zr[0].length=Zr[1].length=it+2,{min:{x:Math.min.apply(0,Zr[0]),y:Math.min.apply(0,Zr[1])},max:{x:Math.max.apply(0,Zr[0]),y:Math.max.apply(0,Zr[1])}}},ie=function(Be,pt,It,ot,zt,Jt,tr,pr){if(!(Math.max(Be,It)<Math.min(zt,tr)||Math.min(Be,It)>Math.max(zt,tr)||Math.max(pt,ot)<Math.min(Jt,pr)||Math.min(pt,ot)>Math.max(Jt,pr))){var br=(Be*ot-pt*It)*(zt-tr)-(Be-It)*(zt*pr-Jt*tr),Zr=(Be*ot-pt*It)*(Jt-pr)-(pt-ot)*(zt*pr-Jt*tr),Nr=(Be-It)*(Jt-pr)-(pt-ot)*(zt-tr);if(Nr){var tn=br/Nr,Dn=Zr/Nr,gn=+tn.toFixed(2),Vn=+Dn.toFixed(2);if(!(gn<+Math.min(Be,It).toFixed(2)||gn>+Math.max(Be,It).toFixed(2)||gn<+Math.min(zt,tr).toFixed(2)||gn>+Math.max(zt,tr).toFixed(2)||Vn<+Math.min(pt,ot).toFixed(2)||Vn>+Math.max(pt,ot).toFixed(2)||Vn<+Math.min(Jt,pr).toFixed(2)||Vn>+Math.max(Jt,pr).toFixed(2)))return{x:tn,y:Dn}}}},Oe=function(Be,pt,It){return pt>=Be.x&&pt<=Be.x+Be.width&&It>=Be.y&&It<=Be.y+Be.height},nt=function(Be,pt,It,ot){return Be===null&&(Be=pt=It=ot=0),pt===null&&(pt=Be.y,It=Be.width,ot=Be.height,Be=Be.x),{x:Be,y:pt,width:It,w:It,height:ot,h:ot,x2:Be+It,y2:pt+ot,cx:Be+It/2,cy:pt+ot/2,r1:Math.min(It,ot)/2,r2:Math.max(It,ot)/2,r0:Math.sqrt(It*It+ot*ot)/2,path:rectPath(Be,pt,It,ot),vb:[Be,pt,It,ot].join(" ")}},ye=function(Be,pt){return Be=nt(Be),pt=nt(pt),Oe(pt,Be.x,Be.y)||Oe(pt,Be.x2,Be.y)||Oe(pt,Be.x,Be.y2)||Oe(pt,Be.x2,Be.y2)||Oe(Be,pt.x,pt.y)||Oe(Be,pt.x2,pt.y)||Oe(Be,pt.x,pt.y2)||Oe(Be,pt.x2,pt.y2)||(Be.x<pt.x2&&Be.x>pt.x||pt.x<Be.x2&&pt.x>Be.x)&&(Be.y<pt.y2&&Be.y>pt.y||pt.y<Be.y2&&pt.y>Be.y)},Te=function(Be,pt,It,ot,zt,Jt,tr,pr){isArray(Be)||(Be=[Be,pt,It,ot,zt,Jt,tr,pr]);var br=Ze.apply(null,Be);return nt(br.min.x,br.min.y,br.max.x-br.min.x,br.max.y-br.min.y)},Je=function(Be,pt,It,ot,zt,Jt,tr,pr,br){var Zr=1-br,Nr=Math.pow(Zr,3),tn=Math.pow(Zr,2),Dn=br*br,gn=Dn*br,Vn=Nr*Be+tn*3*br*It+Zr*3*br*br*zt+gn*tr,Un=Nr*pt+tn*3*br*ot+Zr*3*br*br*Jt+gn*pr,mi=Be+2*br*(It-Be)+Dn*(zt-2*It+Be),qn=pt+2*br*(ot-pt)+Dn*(Jt-2*ot+pt),Xn=It+2*br*(zt-It)+Dn*(tr-2*zt+It),We=ot+2*br*(Jt-ot)+Dn*(pr-2*Jt+ot),it=Zr*Be+br*It,_t=Zr*pt+br*ot,Pt=Zr*zt+br*tr,jt=Zr*Jt+br*pr,gr=90-Math.atan2(mi-Xn,qn-We)*180/Math.PI;return{x:Vn,y:Un,m:{x:mi,y:qn},n:{x:Xn,y:We},start:{x:it,y:_t},end:{x:Pt,y:jt},alpha:gr}},pe=function(Be,pt,It){var ot=Te(Be),zt=Te(pt);if(!ye(ot,zt))return It?0:[];for(var Jt=te.apply(0,Be),tr=te.apply(0,pt),pr=~~(Jt/8),br=~~(tr/8),Zr=[],Nr=[],tn={},Dn=It?0:[],gn=0;gn<pr+1;gn++){var Vn=Je.apply(0,Be.concat(gn/pr));Zr.push({x:Vn.x,y:Vn.y,t:gn/pr})}for(var gn=0;gn<br+1;gn++){var Vn=Je.apply(0,pt.concat(gn/br));Nr.push({x:Vn.x,y:Vn.y,t:gn/br})}for(var gn=0;gn<pr;gn++)for(var Un=0;Un<br;Un++){var mi=Zr[gn],qn=Zr[gn+1],Xn=Nr[Un],We=Nr[Un+1],it=Math.abs(qn.x-mi.x)<.001?"y":"x",_t=Math.abs(We.x-Xn.x)<.001?"y":"x",Pt=ie(mi.x,mi.y,qn.x,qn.y,Xn.x,Xn.y,We.x,We.y);if(Pt){if(tn[Pt.x.toFixed(4)]===Pt.y.toFixed(4))continue;tn[Pt.x.toFixed(4)]=Pt.y.toFixed(4);var jt=mi.t+Math.abs((Pt[it]-mi[it])/(qn[it]-mi[it]))*(qn.t-mi.t),gr=Xn.t+Math.abs((Pt[_t]-Xn[_t])/(We[_t]-Xn[_t]))*(We.t-Xn.t);jt>=0&&jt<=1&&gr>=0&&gr<=1&&(It?Dn++:Dn.push({x:Pt.x,y:Pt.y,t1:jt,t2:gr}))}}return Dn},Me=function(Be,pt,It){Be=path2Curve(Be),pt=path2Curve(pt);for(var ot,zt,Jt,tr,pr,br,Zr,Nr,tn,Dn,gn=It?0:[],Vn=0,Un=Be.length;Vn<Un;Vn++){var mi=Be[Vn];if(mi[0]==="M")ot=pr=mi[1],zt=br=mi[2];else{mi[0]==="C"?(tn=[ot,zt].concat(mi.slice(1)),ot=tn[6],zt=tn[7]):(tn=[ot,zt,ot,zt,pr,br,pr,br],ot=pr,zt=br);for(var qn=0,Xn=pt.length;qn<Xn;qn++){var We=pt[qn];if(We[0]==="M")Jt=Zr=We[1],tr=Nr=We[2];else{We[0]==="C"?(Dn=[Jt,tr].concat(We.slice(1)),Jt=Dn[6],tr=Dn[7]):(Dn=[Jt,tr,Jt,tr,Zr,Nr,Zr,Nr],Jt=Zr,tr=Nr);var it=pe(tn,Dn,It);if(It)gn+=it;else{for(var _t=0,Pt=it.length;_t<Pt;_t++)it[_t].segment1=Vn,it[_t].segment2=qn,it[_t].bez1=tn,it[_t].bez2=Dn;gn=gn.concat(it)}}}}}return gn};function ze(Be,pt){return Me(Be,pt)}function De(Be){return Math.sqrt(Be[0]*Be[0]+Be[1]*Be[1])}function Ct(Be,pt){return De(Be)*De(pt)?(Be[0]*pt[0]+Be[1]*pt[1])/(De(Be)*De(pt)):1}function Vt(Be,pt){return(Be[0]*pt[1]<Be[1]*pt[0]?-1:1)*Math.acos(Ct(Be,pt))}function Ve(Be,pt){return Be[0]===pt[0]&&Be[1]===pt[1]}function Ue(Be,pt){var It=pt[1],ot=pt[2],zt=(0,$.wQ)((0,$.c$)(pt[3]),Math.PI*2),Jt=pt[4],tr=pt[5],pr=Be[0],br=Be[1],Zr=pt[6],Nr=pt[7],tn=Math.cos(zt)*(pr-Zr)/2+Math.sin(zt)*(br-Nr)/2,Dn=-1*Math.sin(zt)*(pr-Zr)/2+Math.cos(zt)*(br-Nr)/2,gn=tn*tn/(It*It)+Dn*Dn/(ot*ot);gn>1&&(It*=Math.sqrt(gn),ot*=Math.sqrt(gn));var Vn=It*It*(Dn*Dn)+ot*ot*(tn*tn),Un=Vn?Math.sqrt((It*It*(ot*ot)-Vn)/Vn):1;Jt===tr&&(Un*=-1),isNaN(Un)&&(Un=0);var mi=ot?Un*It*Dn/ot:0,qn=It?Un*-ot*tn/It:0,Xn=(pr+Zr)/2+Math.cos(zt)*mi-Math.sin(zt)*qn,We=(br+Nr)/2+Math.sin(zt)*mi+Math.cos(zt)*qn,it=[(tn-mi)/It,(Dn-qn)/ot],_t=[(-1*tn-mi)/It,(-1*Dn-qn)/ot],Pt=Vt([1,0],it),jt=Vt(it,_t);return Ct(it,_t)<=-1&&(jt=Math.PI),Ct(it,_t)>=1&&(jt=0),tr===0&&jt>0&&(jt=jt-2*Math.PI),tr===1&&jt<0&&(jt=jt+2*Math.PI),{cx:Xn,cy:We,rx:Ve(Be,[Zr,Nr])?0:It,ry:Ve(Be,[Zr,Nr])?0:ot,startAngle:Pt,endAngle:Pt+jt,xRotation:zt,arcFlag:Jt,sweepFlag:tr}}function Ee(Be,pt){return[pt[0]+(pt[0]-Be[0]),pt[1]+(pt[1]-Be[1])]}function et(Be){Be=G(Be);for(var pt=[],It=null,ot=null,zt=null,Jt=0,tr=Be.length,pr=0;pr<tr;pr++){var br=Be[pr];ot=Be[pr+1];var Zr=br[0],Nr={command:Zr,prePoint:It,params:br,startTangent:null,endTangent:null};switch(Zr){case"M":zt=[br[1],br[2]],Jt=pr;break;case"A":var tn=Ue(It,br);Nr.arcParams=tn;break;default:break}if(Zr==="Z")It=zt,ot=Be[Jt+1];else{var Dn=br.length;It=[br[Dn-2],br[Dn-1]]}ot&&ot[0]==="Z"&&(ot=Be[Jt],pt[Jt]&&(pt[Jt].prePoint=It)),Nr.currentPoint=It,pt[Jt]&&Ve(It,pt[Jt].currentPoint)&&(pt[Jt].prePoint=Nr.prePoint);var gn=ot?[ot[ot.length-2],ot[ot.length-1]]:null;Nr.nextPoint=gn;var Vn=Nr.prePoint;if(["L","H","V"].includes(Zr))Nr.startTangent=[Vn[0]-It[0],Vn[1]-It[1]],Nr.endTangent=[It[0]-Vn[0],It[1]-Vn[1]];else if(Zr==="Q"){var Un=[br[1],br[2]];Nr.startTangent=[Vn[0]-Un[0],Vn[1]-Un[1]],Nr.endTangent=[It[0]-Un[0],It[1]-Un[1]]}else if(Zr==="T"){var mi=pt[pr-1],Un=Ee(mi.currentPoint,Vn);mi.command==="Q"?(Nr.command="Q",Nr.startTangent=[Vn[0]-Un[0],Vn[1]-Un[1]],Nr.endTangent=[It[0]-Un[0],It[1]-Un[1]]):(Nr.command="TL",Nr.startTangent=[Vn[0]-It[0],Vn[1]-It[1]],Nr.endTangent=[It[0]-Vn[0],It[1]-Vn[1]])}else if(Zr==="C"){var qn=[br[1],br[2]],Xn=[br[3],br[4]];Nr.startTangent=[Vn[0]-qn[0],Vn[1]-qn[1]],Nr.endTangent=[It[0]-Xn[0],It[1]-Xn[1]],Nr.startTangent[0]===0&&Nr.startTangent[1]===0&&(Nr.startTangent=[qn[0]-Xn[0],qn[1]-Xn[1]]),Nr.endTangent[0]===0&&Nr.endTangent[1]===0&&(Nr.endTangent=[Xn[0]-qn[0],Xn[1]-qn[1]])}else if(Zr==="S"){var mi=pt[pr-1],qn=Ee(mi.currentPoint,Vn),Xn=[br[1],br[2]];mi.command==="C"?(Nr.command="C",Nr.startTangent=[Vn[0]-qn[0],Vn[1]-qn[1]],Nr.endTangent=[It[0]-Xn[0],It[1]-Xn[1]]):(Nr.command="SQ",Nr.startTangent=[Vn[0]-Xn[0],Vn[1]-Xn[1]],Nr.endTangent=[It[0]-Xn[0],It[1]-Xn[1]])}else if(Zr==="A"){var We=.001,it=Nr.arcParams||{},_t=it.cx,Pt=_t===void 0?0:_t,jt=it.cy,gr=jt===void 0?0:jt,Cr=it.rx,kt=Cr===void 0?0:Cr,at=it.ry,Rt=at===void 0?0:at,mr=it.sweepFlag,Dr=mr===void 0?0:mr,Ft=it.startAngle,Mn=Ft===void 0?0:Ft,yi=it.endAngle,gi=yi===void 0?0:yi;Dr===0&&(We*=-1);var sn=kt*Math.cos(Mn-We)+Pt,hi=Rt*Math.sin(Mn-We)+gr;Nr.startTangent=[sn-zt[0],hi-zt[1]];var ri=kt*Math.cos(Mn+gi+We)+Pt,ui=Rt*Math.sin(Mn+gi-We)+gr;Nr.endTangent=[Vn[0]-ri,Vn[1]-ui]}pt.push(Nr)}return pt}var st=1e-6;function Re(Be){return Math.abs(Be)<st?0:Be<0?-1:1}function Ie(Be,pt,It){return(It[0]-Be[0])*(pt[1]-Be[1])===(pt[0]-Be[0])*(It[1]-Be[1])&&Math.min(Be[0],pt[0])<=It[0]&&It[0]<=Math.max(Be[0],pt[0])&&Math.min(Be[1],pt[1])<=It[1]&&It[1]<=Math.max(Be[1],pt[1])}function ct(Be,pt,It){var ot=!1,zt=Be.length;if(zt<=2)return!1;for(var Jt=0;Jt<zt;Jt++){var tr=Be[Jt],pr=Be[(Jt+1)%zt];if(Ie(tr,pr,[pt,It]))return!0;Re(tr[1]-It)>0!=Re(pr[1]-It)>0&&Re(pt-(It-tr[1])*(tr[0]-pr[0])/(tr[1]-pr[1])-tr[0])<0&&(ot=!ot)}return ot}var Tt=function(Be,pt,It){return Be>=pt&&Be<=It};function Qt(Be,pt,It,ot){var zt=.001,Jt={x:It.x-Be.x,y:It.y-Be.y},tr={x:pt.x-Be.x,y:pt.y-Be.y},pr={x:ot.x-It.x,y:ot.y-It.y},br=tr.x*pr.y-tr.y*pr.x,Zr=br*br,Nr=tr.x*tr.x+tr.y*tr.y,tn=pr.x*pr.x+pr.y*pr.y,Dn=null;if(Zr>zt*Nr*tn){var gn=(Jt.x*pr.y-Jt.y*pr.x)/br,Vn=(Jt.x*tr.y-Jt.y*tr.x)/br;Tt(gn,0,1)&&Tt(Vn,0,1)&&(Dn={x:Be.x+gn*tr.x,y:Be.y+gn*tr.y})}return Dn}function wt(Be){for(var pt=[],It=Be.length,ot=0;ot<It-1;ot++){var zt=Be[ot],Jt=Be[ot+1];pt.push({from:{x:zt[0],y:zt[1]},to:{x:Jt[0],y:Jt[1]}})}if(pt.length>1){var tr=Be[0],pr=Be[It-1];pt.push({from:{x:pr[0],y:pr[1]},to:{x:tr[0],y:tr[1]}})}return pt}function se(Be,pt){var It=!1;return(0,$.S6)(Be,function(ot){if(Qt(ot.from,ot.to,pt.from,pt.to))return It=!0,!1}),It}function Ge(Be){var pt=Be.map(function(ot){return ot[0]}),It=Be.map(function(ot){return ot[1]});return{minX:Math.min.apply(null,pt),maxX:Math.max.apply(null,pt),minY:Math.min.apply(null,It),maxY:Math.max.apply(null,It)}}function Ke(Be,pt){return!(pt.minX>Be.maxX||pt.maxX<Be.minX||pt.minY>Be.maxY||pt.maxY<Be.minY)}function bt(Be,pt){if(Be.length<2||pt.length<2)return!1;var It=Ge(Be),ot=Ge(pt);if(!Ke(It,ot))return!1;var zt=!1;if((0,$.S6)(pt,function(br){if(ct(Be,br[0],br[1]))return zt=!0,!1}),zt||((0,$.S6)(Be,function(br){if(ct(pt,br[0],br[1]))return zt=!0,!1}),zt))return!0;var Jt=wt(Be),tr=wt(pt),pr=!1;return(0,$.S6)(tr,function(br){if(se(Jt,br))return pr=!0,!1}),pr}},21030:function(xt,N,F){"use strict";F.d(N,{Ct:function(){return Ou},f0:function(){return zl},uZ:function(){return We},VS:function(){return th},d9:function(){return Qs},FX:function(){return Y},Ds:function(){return ic},b$:function(){return bc},e5:function(){return oe},S6:function(){return ke},yW:function(){return Jt},hX:function(){return K},sE:function(){return Et},cx:function(){return Qe},Wx:function(){return Ze},ri:function(){return _t},xH:function(){return Oe},U5:function(){return Ro},U2:function(){return Js},Lo:function(){return hp},rx:function(){return Me},ru:function(){return Dn},vM:function(){return Nr},Ms:function(){return tn},wH:function(){return _i},YM:function(){return Ke},q9:function(){return Y},cq:function(){return Nl},kJ:function(){return E},jn:function(){return Ko},J_:function(){return No},kK:function(){return Hu},xb:function(){return Ec},Xy:function(){return Vi},mf:function(){return he},BD:function(){return ft},UM:function(){return M},Ft:function(){return Kt},hj:function(){return jt},vQ:function(){return yi},Kn:function(){return fe},PO:function(){return Ye},HD:function(){return Tt},P9:function(){return ce},o8:function(){return Eo},XP:function(){return Le},Z$:function(){return bt},vl:function(){return nr},UI:function(){return ac},Q8:function(){return Vs},Fp:function(){return Te},UT:function(){return ui},HP:function(){return no},VV:function(){return Je},F:function(){return ba},CD:function(){return zl},wQ:function(){return Sa},ZT:function(){return Zo},CE:function(){return Ul},ei:function(){return oc},u4:function(){return Re},Od:function(){return ct},U7:function(){return uf},t8:function(){return cu},dp:function(){return Fd},G:function(){return pr},MR:function(){return wt},ng:function(){return Xt},P2:function(){return Cc},qo:function(){return Vc},c$:function(){return uo},BB:function(){return po},jj:function(){return se},EL:function(){return td},jC:function(){return Gr},VO:function(){return Xa},I:function(){return Ge}});var $=function(St){return St!==null&&typeof St!="function"&&isFinite(St.length)},X=$,w=function(St,cr){return X(St)?St.indexOf(cr)>-1:!1},Y=w,G=function(St,cr){if(!X(St))return St;for(var kr=[],Hr=0;Hr<St.length;Hr++){var An=St[Hr];cr(An,Hr)&&kr.push(An)}return kr},K=G,Q=function(St,cr){return cr===void 0&&(cr=[]),K(St,function(kr){return!Y(cr,kr)})},oe=Q,ee={}.toString,xe=function(St,cr){return ee.call(St)==="[object "+cr+"]"},ce=xe,he=function(St){return ce(St,"Function")},J=function(St){return St==null},M=J,E=function(St){return Array.isArray?Array.isArray(St):ce(St,"Array")},fe=function(St){var cr=typeof St;return St!==null&&cr==="object"||cr==="function"};function me(St,cr){if(St){var kr;if(E(St))for(var Hr=0,An=St.length;Hr<An&&(kr=cr(St[Hr],Hr),kr!==!1);Hr++);else if(fe(St)){for(var di in St)if(St.hasOwnProperty(di)&&(kr=cr(St[di],di),kr===!1))break}}}var ke=me,Pe=Object.keys?function(St){return Object.keys(St)}:function(St){var cr=[];return ke(St,function(kr,Hr){he(St)&&Hr==="prototype"||cr.push(Hr)}),cr},Le=Pe;function tt(St,cr){var kr=Le(cr),Hr=kr.length;if(M(St))return!Hr;for(var An=0;An<Hr;An+=1){var di=kr[An];if(cr[di]!==St[di]||!(di in St))return!1}return!0}var ft=tt,ge=function(St){return typeof St=="object"&&St!==null},be=ge,Ce=function(St){if(!be(St)||!ce(St,"Object"))return!1;if(Object.getPrototypeOf(St)===null)return!0;for(var cr=St;Object.getPrototypeOf(cr)!==null;)cr=Object.getPrototypeOf(cr);return Object.getPrototypeOf(St)===cr},Ye=Ce;function je(St,cr){if(!E(St))return null;var kr;if(he(cr)&&(kr=cr),Ye(cr)&&(kr=function(An){return ft(An,cr)}),kr){for(var Hr=0;Hr<St.length;Hr+=1)if(kr(St[Hr]))return St[Hr]}return null}var Et=je;function Ae(St,cr,kr){kr===void 0&&(kr=0);for(var Hr=kr;Hr<St.length;Hr++)if(cr(St[Hr],Hr))return Hr;return-1}var Qe=Ae,te=function(St,cr){for(var kr=null,Hr=0;Hr<St.length;Hr++){var An=St[Hr],di=An[cr];if(!M(di)){E(di)?kr=di[0]:kr=di;break}}return kr},Ze=te,ie=function(St){if(!E(St))return[];for(var cr=[],kr=0;kr<St.length;kr++)cr=cr.concat(St[kr]);return cr},Oe=ie,nt=function(St,cr){if(cr===void 0&&(cr=[]),!isArray(St))cr.push(St);else for(var kr=0;kr<St.length;kr+=1)nt(St[kr],cr);return cr},ye=null,Te=function(St){if(E(St))return St.reduce(function(cr,kr){return Math.max(cr,kr)},St[0])},Je=function(St){if(E(St))return St.reduce(function(cr,kr){return Math.min(cr,kr)},St[0])},pe=function(St){var cr=St.filter(function(ua){return!isNaN(ua)});if(!cr.length)return{min:0,max:0};if(E(St[0])){for(var kr=[],Hr=0;Hr<St.length;Hr++)kr=kr.concat(St[Hr]);cr=kr}var An=Te(cr),di=Je(cr);return{min:di,max:An}},Me=pe,ze=Array.prototype,De=ze.splice,Ct=ze.indexOf,Vt=function(St){for(var cr=[],kr=1;kr<arguments.length;kr++)cr[kr-1]=arguments[kr];for(var Hr=0;Hr<cr.length;Hr++)for(var An=cr[Hr],di=-1;(di=Ct.call(St,An))>-1;)De.call(St,di,1);return St},Ve=null,Ue=Array.prototype.splice,Ee=function(cr,kr){if(!X(cr))return[];for(var Hr=cr?kr.length:0,An=Hr-1;Hr--;){var di=void 0,ua=kr[Hr];(Hr===An||ua!==di)&&(di=ua,Ue.call(cr,ua,1))}return cr},et=Ee,st=function(St,cr,kr){if(!E(St)&&!Ye(St))return St;var Hr=kr;return ke(St,function(An,di){Hr=cr(Hr,An,di)}),Hr},Re=st,Ie=function(St,cr){var kr=[];if(!X(St))return kr;for(var Hr=-1,An=[],di=St.length;++Hr<di;){var ua=St[Hr];cr(ua,Hr,St)&&(kr.push(ua),An.push(Hr))}return et(St,An),kr},ct=Ie,Tt=function(St){return ce(St,"String")};function Qt(St,cr){var kr;if(he(cr))kr=function(An,di){return cr(An)-cr(di)};else{var Hr=[];Tt(cr)?Hr.push(cr):E(cr)&&(Hr=cr),kr=function(An,di){for(var ua=0;ua<Hr.length;ua+=1){var go=Hr[ua];if(An[go]>di[go])return 1;if(An[go]<di[go])return-1}return 0}}return St.sort(kr),St}var wt=Qt;function se(St,cr){cr===void 0&&(cr=new Map);var kr=[];if(Array.isArray(St))for(var Hr=0,An=St.length;Hr<An;Hr++){var di=St[Hr];cr.has(di)||(kr.push(di),cr.set(di,!0))}return kr}var Ge=function(St,cr){for(var kr=[],Hr={},An=0;An<St.length;An++){var di=St[An],ua=di[cr];if(!M(ua)){E(ua)||(ua=[ua]);for(var go=0;go<ua.length;go++){var Is=ua[go];Hr[Is]||(kr.push(Is),Hr[Is]=!0)}}}return kr};function Ke(St){if(X(St))return St[0]}function bt(St){if(X(St)){var cr=St;return cr[cr.length-1]}}function Be(St,cr){return isArray(St)||isString(St)?St[0]===cr:!1}var pt=null;function It(St,cr){return isArray(St)||isString(St)?St[St.length-1]===cr:!1}var ot=null,zt=function(St,cr){for(var kr=0;kr<St.length;kr++)if(!cr(St[kr],kr))return!1;return!0},Jt=zt,tr=function(St,cr){for(var kr=0;kr<St.length;kr++)if(cr(St[kr],kr))return!0;return!1},pr=tr,br=Object.prototype.hasOwnProperty;function Zr(St,cr){if(!cr||!E(St))return{};for(var kr={},Hr=he(cr)?cr:function(go){return go[cr]},An,di=0;di<St.length;di++){var ua=St[di];An=Hr(ua),br.call(kr,An)?kr[An].push(ua):kr[An]=[ua]}return kr}var Nr=Zr;function tn(St,cr){if(!cr)return{0:St};if(!he(cr)){var kr=E(cr)?cr:cr.replace(/\s+/g,"").split("*");cr=function(Hr){for(var An="_",di=0,ua=kr.length;di<ua;di++)An+=Hr[kr[di]]&&Hr[kr[di]].toString();return An}}return Nr(St,cr)}var Dn=function(St,cr){if(!cr)return[St];var kr=tn(St,cr),Hr=[];for(var An in kr)Hr.push(kr[An]);return Hr},gn={};function Vn(St){var cr=gn[St];if(!cr){for(var kr=St.toString(16),Hr=kr.length;Hr<6;Hr++)kr="0"+kr;cr="#"+kr,gn[St]=cr}return cr}var Un=null;function mi(St){var cr=0,kr=0,Hr=0,An=0;return isArray(St)?St.length===1?cr=kr=Hr=An=St[0]:St.length===2?(cr=Hr=St[0],kr=An=St[1]):St.length===3?(cr=St[0],kr=An=St[1],Hr=St[2]):(cr=St[0],kr=St[1],Hr=St[2],An=St[3]):cr=kr=Hr=An=St,{r1:cr,r2:kr,r3:Hr,r4:An}}var qn=null,Xn=function(St,cr,kr){return St<cr?cr:St>kr?kr:St},We=Xn,it=function(St,cr){var kr=cr.toString(),Hr=kr.indexOf(".");if(Hr===-1)return Math.round(St);var An=kr.substr(Hr+1).length;return An>20&&(An=20),parseFloat(St.toFixed(An))},_t=it,Pt=function(St){return ce(St,"Number")},jt=Pt,gr=function(St){return isNumber(St)&&St%1!==0},Cr=null,kt=function(St){return isNumber(St)&&St%2===0},at=null,Rt=Number.isInteger?Number.isInteger:function(St){return jt(St)&&St%1===0},mr=null,Dr=function(St){return isNumber(St)&&St<0},Ft=null,Mn=1e-5;function yi(St,cr,kr){return kr===void 0&&(kr=Mn),Math.abs(St-cr)<kr}var gi=function(St){return isNumber(St)&&St%2!==0},sn=null,hi=function(St){return isNumber(St)&&St>0},ri=null,ui=function(St,cr){if(E(St)){for(var kr,Hr=-1/0,An=0;An<St.length;An++){var di=St[An],ua=he(cr)?cr(di):di[cr];ua>Hr&&(kr=di,Hr=ua)}return kr}},ba=function(St,cr){if(E(St)){for(var kr,Hr=1/0,An=0;An<St.length;An++){var di=St[An],ua=he(cr)?cr(di):di[cr];ua<Hr&&(kr=di,Hr=ua)}return kr}},vi=function(St,cr){return(St%cr+cr)%cr},Sa=vi,za=180/Math.PI,_a=function(St){return za*St},Ga=null,Ea=Math.PI/180,hs=function(St){return Ea*St},uo=hs,Ro=ke,Jn=function(St,cr){return St.hasOwnProperty(cr)},_i=Jn,na=Object.values?function(St){return Object.values(St)}:function(St){var cr=[];return ke(St,function(kr,Hr){he(St)&&Hr==="prototype"||cr.push(kr)}),cr},Xa=na,ps=function(St,cr){return contains(values(St),cr)},po=function(St){return M(St)?"":St.toString()},Io=function(St){return po(St).toLowerCase()},nr=Io;function At(St,cr){return!St||!cr?St:St.replace(/\\?\{([^{}]+)\}/g,function(kr,Hr){return kr.charAt(0)==="\\"?kr.slice(1):cr[Hr]===void 0?"":cr[Hr]})}var Xt=At,yr=function(St){var cr=po(St);return cr.charAt(0).toUpperCase()+cr.substring(1)},Gr=yr,Cn={}.toString,kn=function(St){return Cn.call(St).replace(/^\[object /,"").replace(/]$/,"")},_n=kn,Mi=function(St){return isType(St,"Arguments")},Yi=null,Wo=function(St){return ce(St,"Boolean")},Ko=Wo,su=function(St){return ce(St,"Date")},No=su,ro=function(St){return isType(St,"Error")},uu=null;function qo(St){return isNumber(St)&&isFinite(St)}var Dt=function(St){return St===null},Kt=Dt,Or=Object.prototype,xn=function(St){var cr=St&&St.constructor,kr=typeof cr=="function"&&cr.prototype||Or;return St===kr},ii=xn,Zi=function(St){return isType(St,"RegExp")},lo=null,Bs=function(St){return St===void 0},Eo=Bs,Po=function(St){return St instanceof Element||St instanceof HTMLDocument},Hu=Po;function uf(St){var cr=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(kr){return setTimeout(kr,16)};return cr(St)}function th(St){var cr=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;cr(St)}var rh=function(){for(var St=[],cr=0;cr<arguments.length;cr++)St[cr]=arguments[cr];for(var kr=St[0],Hr=1;Hr<St.length;Hr++){var An=St[Hr];isFunction(An)&&(An=An.prototype),mix(kr.prototype,An)}},lu=null,nc=function(St){if(typeof St!="object"||St===null)return St;var cr;if(E(St)){cr=[];for(var kr=0,Hr=St.length;kr<Hr;kr++)typeof St[kr]=="object"&&St[kr]!=null?cr[kr]=nc(St[kr]):cr[kr]=St[kr]}else{cr={};for(var An in St)typeof St[An]=="object"&&St[An]!=null?cr[An]=nc(St[An]):cr[An]=St[An]}return cr},Qs=nc;function Sl(St,cr,kr){var Hr;return function(){var An=this,di=arguments,ua=function(){Hr=null,kr||St.apply(An,di)},go=kr&&!Hr;clearTimeout(Hr),Hr=setTimeout(ua,cr),go&&St.apply(An,di)}}var ic=Sl,no=function(St,cr){if(!he(St))throw new TypeError("Expected a function");var kr=function(){for(var Hr=[],An=0;An<arguments.length;An++)Hr[An]=arguments[An];var di=cr?cr.apply(this,Hr):Hr[0],ua=kr.cache;if(ua.has(di))return ua.get(di);var go=St.apply(this,Hr);return ua.set(di,go),go};return kr.cache=new Map,kr},Kl=5;function Es(St,cr,kr,Hr){kr=kr||0,Hr=Hr||Kl;for(var An in cr)if(cr.hasOwnProperty(An)){var di=cr[An];di!==null&&Ye(di)?(Ye(St[An])||(St[An]={}),kr<Hr?Es(St[An],di,kr+1,Hr):St[An]=cr[An]):E(di)?(St[An]=[],St[An]=St[An].concat(di)):di!==void 0&&(St[An]=di)}}var ds=function(St){for(var cr=[],kr=1;kr<arguments.length;kr++)cr[kr-1]=arguments[kr];for(var Hr=0;Hr<cr.length;Hr+=1)Es(St,cr[Hr]);return St},bc=ds,Sc=function(St,cr,kr,Hr){isFunction(cr)||(kr=cr,cr=St,St=function(){});var An=Object.create?function(ua,go){return Object.create(ua,{constructor:{value:go}})}:function(ua,go){function Is(){}Is.prototype=ua;var ll=new Is;return ll.constructor=go,ll},di=An(cr.prototype,St);return St.prototype=mix(di,St.prototype),St.superclass=An(cr.prototype,cr),mix(di,kr),mix(St,Hr),St},Rf=null,Bl=function(St,cr){if(!X(St))return-1;var kr=Array.prototype.indexOf;if(kr)return kr.call(St,cr);for(var Hr=-1,An=0;An<St.length;An++)if(St[An]===cr){Hr=An;break}return Hr},Nl=Bl,ql=Object.prototype.hasOwnProperty;function Pu(St){if(M(St))return!0;if(X(St))return!St.length;var cr=_n(St);if(cr==="Map"||cr==="Set")return!St.size;if(ii(St))return!Object.keys(St).length;for(var kr in St)if(ql.call(St,kr))return!1;return!0}var Ec=Pu,Sn=function(St,cr){if(St===cr)return!0;if(!St||!cr||Tt(St)||Tt(cr))return!1;if(X(St)||X(cr)){if(St.length!==cr.length)return!1;for(var kr=!0,Hr=0;Hr<St.length&&(kr=Sn(St[Hr],cr[Hr]),!!kr);Hr++);return kr}if(be(St)||be(cr)){var An=Object.keys(St),di=Object.keys(cr);if(An.length!==di.length)return!1;for(var kr=!0,Hr=0;Hr<An.length&&(kr=Sn(St[An[Hr]],cr[An[Hr]]),!!kr);Hr++);return kr}return!1},Vi=Sn,mv=function(St,cr,kr){return isFunction(kr)?!!kr(St,cr):isEqual(St,cr)},nh=function(St,cr){if(!X(St))return St;for(var kr=[],Hr=0;Hr<St.length;Hr++){var An=St[Hr];kr.push(cr(An,Hr))}return kr},ac=nh,ed=function(St){return St},Vs=function(St,cr){cr===void 0&&(cr=ed);var kr={};return fe(St)&&!M(St)&&Object.keys(St).forEach(function(Hr){kr[Hr]=cr(St[Hr],Hr)}),kr};function wc(St,cr){for(var kr in cr)cr.hasOwnProperty(kr)&&kr!=="constructor"&&cr[kr]!==void 0&&(St[kr]=cr[kr])}function zl(St,cr,kr,Hr){return cr&&wc(St,cr),kr&&wc(St,kr),Hr&&wc(St,Hr),St}var Js=function(St,cr,kr){for(var Hr=0,An=Tt(cr)?cr.split("."):cr;St&&Hr<An.length;)St=St[An[Hr++]];return St===void 0||Hr<An.length?kr:St},cu=function(St,cr,kr){var Hr=St,An=Tt(cr)?cr.split("."):cr;return An.forEach(function(di,ua){ua<An.length-1?(fe(Hr[di])||(Hr[di]=jt(An[ua+1])?[]:{}),Hr=Hr[di]):Hr[di]=kr}),St},El=Object.prototype.hasOwnProperty,oc=function(St,cr){if(St===null||!Ye(St))return{};var kr={};return ke(cr,function(Hr){El.call(St,Hr)&&(kr[Hr]=St[Hr])}),kr},Ul=function(St,cr){return Re(St,function(kr,Hr,An){return cr.includes(An)||(kr[An]=Hr),kr},{})},Cc=function(St,cr,kr){var Hr,An,di,ua,go=0;kr||(kr={});var Is=function(){go=kr.leading===!1?0:Date.now(),Hr=null,ua=St.apply(An,di),Hr||(An=di=null)},ll=function(){var Ku=Date.now();!go&&kr.leading===!1&&(go=Ku);var Oo=cr-(Ku-go);return An=this,di=arguments,Oo<=0||Oo>cr?(Hr&&(clearTimeout(Hr),Hr=null),go=Ku,ua=St.apply(An,di),Hr||(An=di=null)):!Hr&&kr.trailing!==!1&&(Hr=setTimeout(Is,Oo)),ua};return ll.cancel=function(){clearTimeout(Hr),go=0,Hr=An=di=null},ll},Vc=function(St){return X(St)?Array.prototype.slice.call(St):[]},ih={},td=function(St){return St=St||"g",ih[St]?ih[St]+=1:ih[St]=1,St+ih[St]},Zo=function(){};function Fd(St){return M(St)?0:X(St)?St.length:Object.keys(St).length}var Ih=F(97582),lf,ts=no(function(St,cr){cr===void 0&&(cr={});var kr=cr.fontSize,Hr=cr.fontFamily,An=cr.fontWeight,di=cr.fontStyle,ua=cr.fontVariant;return lf||(lf=document.createElement("canvas").getContext("2d")),lf.font=[di,ua,An,kr+"px",Hr].join(" "),lf.measureText(Tt(St)?St:"").width},function(St,cr){return cr===void 0&&(cr={}),(0,Ih.pr)([St],Xa(cr)).join("")}),hp=function(St,cr,kr,Hr){Hr===void 0&&(Hr="...");var An=16,di=ts(Hr,kr),ua=Tt(St)?St:po(St),go=cr,Is=[],ll,Ku;if(ts(St,kr)<=cr)return St;for(;ll=ua.substr(0,An),Ku=ts(ll,kr),!(Ku+di>go&&Ku>go);)if(Is.push(ll),go-=Ku,ua=ua.substr(An),!ua)return Is.join("");for(;ll=ua.substr(0,1),Ku=ts(ll,kr),!(Ku+di>go);)if(Is.push(ll),go-=Ku,ua=ua.substr(1),!ua)return Is.join("");return""+Is.join("")+Hr},pp=function(){function St(){this.map={}}return St.prototype.has=function(cr){return this.map[cr]!==void 0},St.prototype.get=function(cr,kr){var Hr=this.map[cr];return Hr===void 0?kr:Hr},St.prototype.set=function(cr,kr){this.map[cr]=kr},St.prototype.clear=function(){this.map={}},St.prototype.delete=function(cr){delete this.map[cr]},St.prototype.size=function(){return Object.keys(this.map).length},St}(),Ou=pp},131:function(xt,N,F){"use strict";F.r(N),F.d(N,{TinyColor:function(){return $.C},bounds:function(){return tt},convertDecimalToHex:function(){return K.Wl},convertHexToDecimal:function(){return K.T6},default:function(){return ft},fromRatio:function(){return ee},hslToRgb:function(){return K.ve},hsvToRgb:function(){return K.WE},inputToRGB:function(){return ce.uA},isReadable:function(){return Y},isValidCSSUnit:function(){return ce.ky},legacyRandom:function(){return xe},mostReadable:function(){return G},names:function(){return X.R},numberInputToObject:function(){return K.Yt},parseIntFromHex:function(){return K.VD},random:function(){return he},readability:function(){return w},rgbToHex:function(){return K.vq},rgbToHsl:function(){return K.lC},rgbToHsv:function(){return K.py},rgbToRgb:function(){return K.rW},rgbaToArgbHex:function(){return K.GC},rgbaToHex:function(){return K.s},stringInputToObject:function(){return ce.uz},tinycolor:function(){return $.H},toMsFilter:function(){return Q}});var $=F(10274),X=F(48701);function w(ge,be){var Ce=new $.C(ge),Ye=new $.C(be);return(Math.max(Ce.getLuminance(),Ye.getLuminance())+.05)/(Math.min(Ce.getLuminance(),Ye.getLuminance())+.05)}function Y(ge,be,Ce){var Ye,je;Ce===void 0&&(Ce={level:"AA",size:"small"});var Et=w(ge,be);switch(((Ye=Ce.level)!==null&&Ye!==void 0?Ye:"AA")+((je=Ce.size)!==null&&je!==void 0?je:"small")){case"AAsmall":case"AAAlarge":return Et>=4.5;case"AAlarge":return Et>=3;case"AAAsmall":return Et>=7;default:return!1}}function G(ge,be,Ce){Ce===void 0&&(Ce={includeFallbackColors:!1,level:"AA",size:"small"});for(var Ye=null,je=0,Et=Ce.includeFallbackColors,Ae=Ce.level,Qe=Ce.size,te=0,Ze=be;te<Ze.length;te++){var ie=Ze[te],Oe=w(ge,ie);Oe>je&&(je=Oe,Ye=new $.C(ie))}return Y(ge,Ye,{level:Ae,size:Qe})||!Et?Ye:(Ce.includeFallbackColors=!1,G(ge,["#fff","#000"],Ce))}var K=F(86500);function Q(ge,be){var Ce=new $.C(ge),Ye="#"+(0,K.GC)(Ce.r,Ce.g,Ce.b,Ce.a),je=Ye,Et=Ce.gradientType?"GradientType = 1, ":"";if(be){var Ae=new $.C(be);je="#"+(0,K.GC)(Ae.r,Ae.g,Ae.b,Ae.a)}return"progid:DXImageTransform.Microsoft.gradient(".concat(Et,"startColorstr=").concat(Ye,",endColorstr=").concat(je,")")}var oe=F(90279);function ee(ge,be){var Ce={r:(0,oe.JX)(ge.r),g:(0,oe.JX)(ge.g),b:(0,oe.JX)(ge.b)};return ge.a!==void 0&&(Ce.a=Number(ge.a)),new $.C(Ce,be)}function xe(){return new $.C({r:Math.random(),g:Math.random(),b:Math.random()})}var ce=F(1350);function he(ge){if(ge===void 0&&(ge={}),ge.count!==void 0&&ge.count!==null){var be=ge.count,Ce=[];for(ge.count=void 0;be>Ce.length;)ge.count=null,ge.seed&&(ge.seed+=1),Ce.push(he(ge));return ge.count=be,Ce}var Ye=J(ge.hue,ge.seed),je=M(Ye,ge),Et=E(Ye,je,ge),Ae={h:Ye,s:je,v:Et};return ge.alpha!==void 0&&(Ae.a=ge.alpha),new $.C(Ae)}function J(ge,be){var Ce=me(ge),Ye=Pe(Ce,be);return Ye<0&&(Ye=360+Ye),Ye}function M(ge,be){if(be.hue==="monochrome")return 0;if(be.luminosity==="random")return Pe([0,100],be.seed);var Ce=ke(ge).saturationRange,Ye=Ce[0],je=Ce[1];switch(be.luminosity){case"bright":Ye=55;break;case"dark":Ye=je-10;break;case"light":je=55;break;default:break}return Pe([Ye,je],be.seed)}function E(ge,be,Ce){var Ye=fe(ge,be),je=100;switch(Ce.luminosity){case"dark":je=Ye+20;break;case"light":Ye=(je+Ye)/2;break;case"random":Ye=0,je=100;break;default:break}return Pe([Ye,je],Ce.seed)}function fe(ge,be){for(var Ce=ke(ge).lowerBounds,Ye=0;Ye<Ce.length-1;Ye++){var je=Ce[Ye][0],Et=Ce[Ye][1],Ae=Ce[Ye+1][0],Qe=Ce[Ye+1][1];if(be>=je&&be<=Ae){var te=(Qe-Et)/(Ae-je),Ze=Et-te*je;return te*be+Ze}}return 0}function me(ge){var be=parseInt(ge,10);if(!Number.isNaN(be)&&be<360&&be>0)return[be,be];if(typeof ge=="string"){var Ce=tt.find(function(Ae){return Ae.name===ge});if(Ce){var Ye=Le(Ce);if(Ye.hueRange)return Ye.hueRange}var je=new $.C(ge);if(je.isValid){var Et=je.toHsv().h;return[Et,Et]}}return[0,360]}function ke(ge){ge>=334&&ge<=360&&(ge-=360);for(var be=0,Ce=tt;be<Ce.length;be++){var Ye=Ce[be],je=Le(Ye);if(je.hueRange&&ge>=je.hueRange[0]&&ge<=je.hueRange[1])return je}throw Error("Color not found")}function Pe(ge,be){if(be===void 0)return Math.floor(ge[0]+Math.random()*(ge[1]+1-ge[0]));var Ce=ge[1]||1,Ye=ge[0]||0;be=(be*9301+49297)%233280;var je=be/233280;return Math.floor(Ye+je*(Ce-Ye))}function Le(ge){var be=ge.lowerBounds[0][0],Ce=ge.lowerBounds[ge.lowerBounds.length-1][0],Ye=ge.lowerBounds[ge.lowerBounds.length-1][1],je=ge.lowerBounds[0][1];return{name:ge.name,hueRange:ge.hueRange,lowerBounds:ge.lowerBounds,saturationRange:[be,Ce],brightnessRange:[Ye,je]}}var tt=[{name:"monochrome",hueRange:null,lowerBounds:[[0,0],[100,0]]},{name:"red",hueRange:[-26,18],lowerBounds:[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]},{name:"orange",hueRange:[19,46],lowerBounds:[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]},{name:"yellow",hueRange:[47,62],lowerBounds:[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]},{name:"green",hueRange:[63,178],lowerBounds:[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]},{name:"blue",hueRange:[179,257],lowerBounds:[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]},{name:"purple",hueRange:[258,282],lowerBounds:[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]},{name:"pink",hueRange:[283,334],lowerBounds:[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]}],ft=$.H},38163:function(xt){xt.exports=N;function N(X,w){var Y=X&&X.type,G;if(Y==="FeatureCollection")for(G=0;G<X.features.length;G++)N(X.features[G],w);else if(Y==="GeometryCollection")for(G=0;G<X.geometries.length;G++)N(X.geometries[G],w);else if(Y==="Feature")N(X.geometry,w);else if(Y==="Polygon")F(X.coordinates,w);else if(Y==="MultiPolygon")for(G=0;G<X.coordinates.length;G++)F(X.coordinates[G],w);return X}function F(X,w){if(X.length!==0){$(X[0],w);for(var Y=1;Y<X.length;Y++)$(X[Y],!w)}}function $(X,w){for(var Y=0,G=0,K=0,Q=X.length,oe=Q-1;K<Q;oe=K++){var ee=(X[K][0]-X[oe][0])*(X[oe][1]+X[K][1]),xe=Y+ee;G+=Math.abs(Y)>=Math.abs(ee)?Y-xe+ee:ee-xe+Y,Y=xe}Y+G>=0!=!!w&&X.reverse()}},75550:function(xt){"use strict";xt.exports=N;function N(F,$){this.x=F,this.y=$}N.prototype={clone:function(){return new N(this.x,this.y)},add:function(F){return this.clone()._add(F)},sub:function(F){return this.clone()._sub(F)},multByPoint:function(F){return this.clone()._multByPoint(F)},divByPoint:function(F){return this.clone()._divByPoint(F)},mult:function(F){return this.clone()._mult(F)},div:function(F){return this.clone()._div(F)},rotate:function(F){return this.clone()._rotate(F)},rotateAround:function(F,$){return this.clone()._rotateAround(F,$)},matMult:function(F){return this.clone()._matMult(F)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(F){return this.x===F.x&&this.y===F.y},dist:function(F){return Math.sqrt(this.distSqr(F))},distSqr:function(F){var $=F.x-this.x,X=F.y-this.y;return $*$+X*X},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(F){return Math.atan2(this.y-F.y,this.x-F.x)},angleWith:function(F){return this.angleWithSep(F.x,F.y)},angleWithSep:function(F,$){return Math.atan2(this.x*$-this.y*F,this.x*F+this.y*$)},_matMult:function(F){var $=F[0]*this.x+F[1]*this.y,X=F[2]*this.x+F[3]*this.y;return this.x=$,this.y=X,this},_add:function(F){return this.x+=F.x,this.y+=F.y,this},_sub:function(F){return this.x-=F.x,this.y-=F.y,this},_mult:function(F){return this.x*=F,this.y*=F,this},_div:function(F){return this.x/=F,this.y/=F,this},_multByPoint:function(F){return this.x*=F.x,this.y*=F.y,this},_divByPoint:function(F){return this.x/=F.x,this.y/=F.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var F=this.y;return this.y=this.x,this.x=-F,this},_rotate:function(F){var $=Math.cos(F),X=Math.sin(F),w=$*this.x-X*this.y,Y=X*this.x+$*this.y;return this.x=w,this.y=Y,this},_rotateAround:function(F,$){var X=Math.cos(F),w=Math.sin(F),Y=$.x+X*(this.x-$.x)-w*(this.y-$.y),G=$.y+w*(this.x-$.x)+X*(this.y-$.y);return this.x=Y,this.y=G,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},N.convert=function(F){return F instanceof N?F:Array.isArray(F)?new N(F[0],F[1]):F}},49296:function(xt){"use strict";xt.exports=F,xt.exports.default=F;var N=1e20;function F(G,K,Q,oe,ee,xe){this.fontSize=G||24,this.buffer=K===void 0?3:K,this.cutoff=oe||.25,this.fontFamily=ee||"sans-serif",this.fontWeight=xe||"normal",this.radius=Q||8;var ce=this.size=this.fontSize+this.buffer*2,he=ce+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ce,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(he*he),this.gridInner=new Float64Array(he*he),this.f=new Float64Array(he),this.z=new Float64Array(he+1),this.v=new Uint16Array(he),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(ce/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function $(G,K,Q,oe,ee,xe,ce){xe.fill(N,0,K*Q),ce.fill(0,0,K*Q);for(var he=(K-oe)/2,J=0;J<ee;J++)for(var M=0;M<oe;M++){var E=(J+he)*K+M+he,fe=G.data[4*(J*oe+M)+3]/255;if(fe===1)xe[E]=0,ce[E]=N;else if(fe===0)xe[E]=N,ce[E]=0;else{var me=Math.max(0,.5-fe),ke=Math.max(0,fe-.5);xe[E]=me*me,ce[E]=ke*ke}}}function X(G,K,Q,oe,ee,xe,ce){for(var he=0;he<K*Q;he++){var J=Math.sqrt(oe[he])-Math.sqrt(ee[he]);G[he]=Math.round(255-255*(J/xe+ce))}}F.prototype._draw=function(G,K){var Q=this.ctx.measureText(G),oe=Q.width,ee=2*this.buffer,xe,ce,he,J,M,E,fe,me;K&&this.useMetrics?(M=Math.floor(Q.actualBoundingBoxAscent),me=this.buffer+Math.ceil(Q.actualBoundingBoxAscent),E=this.buffer,fe=this.buffer,ce=Math.min(this.size,Math.ceil(Q.actualBoundingBoxRight-Q.actualBoundingBoxLeft)),J=Math.min(this.size-E,Math.ceil(Q.actualBoundingBoxAscent+Q.actualBoundingBoxDescent)),xe=ce+ee,he=J+ee,this.ctx.textBaseline="alphabetic"):(xe=ce=this.size,he=J=this.size,M=19*this.fontSize/24,E=fe=0,me=this.middle,this.ctx.textBaseline="middle");var ke;ce&&J&&(this.ctx.clearRect(fe,E,ce,J),this.ctx.fillText(G,this.buffer,me),ke=this.ctx.getImageData(fe,E,ce,J));var Pe=new Uint8ClampedArray(xe*he);return $(ke,xe,he,ce,J,this.gridOuter,this.gridInner),w(this.gridOuter,xe,he,this.f,this.v,this.z),w(this.gridInner,xe,he,this.f,this.v,this.z),X(Pe,xe,he,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:Pe,metrics:{width:ce,height:J,sdfWidth:xe,sdfHeight:he,top:M,left:0,advance:oe}}},F.prototype.draw=function(G){return this._draw(G,!1).data},F.prototype.drawWithMetrics=function(G){return this._draw(G,!0)};function w(G,K,Q,oe,ee,xe){for(var ce=0;ce<K;ce++)Y(G,ce,K,Q,oe,ee,xe);for(var he=0;he<Q;he++)Y(G,he*K,1,K,oe,ee,xe)}function Y(G,K,Q,oe,ee,xe,ce){var he,J,M,E;for(xe[0]=0,ce[0]=-N,ce[1]=N,he=0;he<oe;he++)ee[he]=G[K+he*Q];for(he=1,J=0,M=0;he<oe;he++){do E=xe[J],M=(ee[he]-ee[E]+he*he-E*E)/(he-E)/2;while(M<=ce[J]&&--J>-1);J++,xe[J]=he,ce[J]=M,ce[J+1]=N}for(he=0,J=0;he<oe;he++){for(;ce[J+1]<he;)J++;E=xe[J],G[K+he*Q]=ee[E]+(he-E)*(he-E)}}},99874:function(xt){xt.exports=N;function N(F,$,X,w){this.cx=3*F,this.bx=3*(X-F)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*$,this.by=3*(w-$)-this.cy,this.ay=1-this.cy-this.by,this.p1x=F,this.p1y=w,this.p2x=X,this.p2y=w}N.prototype.sampleCurveX=function(F){return((this.ax*F+this.bx)*F+this.cx)*F},N.prototype.sampleCurveY=function(F){return((this.ay*F+this.by)*F+this.cy)*F},N.prototype.sampleCurveDerivativeX=function(F){return(3*this.ax*F+2*this.bx)*F+this.cx},N.prototype.solveCurveX=function(F,$){typeof $=="undefined"&&($=1e-6);var X,w,Y,G,K;for(Y=F,K=0;K<8;K++){if(G=this.sampleCurveX(Y)-F,Math.abs(G)<$)return Y;var Q=this.sampleCurveDerivativeX(Y);if(Math.abs(Q)<1e-6)break;Y=Y-G/Q}if(X=0,w=1,Y=F,Y<X)return X;if(Y>w)return w;for(;X<w;){if(G=this.sampleCurveX(Y),Math.abs(G-F)<$)return Y;F>G?X=Y:w=Y,Y=(w-X)*.5+X}return Y},N.prototype.solve=function(F,$){return this.sampleCurveY(this.solveCurveX(F,$))}},38929:function(xt,N,F){xt.exports.VectorTile=F(22779),F(66024),F(59701)},22779:function(xt,N,F){"use strict";var $=F(59701);xt.exports=X;function X(Y,G){this.layers=Y.readFields(w,{},G)}function w(Y,G,K){if(Y===3){var Q=new $(K,K.readVarint()+K.pos);Q.length&&(G[Q.name]=Q)}}},66024:function(xt,N,F){"use strict";var $=F(75550);xt.exports=X;function X(Q,oe,ee,xe,ce){this.properties={},this.extent=ee,this.type=0,this._pbf=Q,this._geometry=-1,this._keys=xe,this._values=ce,Q.readFields(w,this,oe)}function w(Q,oe,ee){Q==1?oe.id=ee.readVarint():Q==2?Y(ee,oe):Q==3?oe.type=ee.readVarint():Q==4&&(oe._geometry=ee.pos)}function Y(Q,oe){for(var ee=Q.readVarint()+Q.pos;Q.pos<ee;){var xe=oe._keys[Q.readVarint()],ce=oe._values[Q.readVarint()];oe.properties[xe]=ce}}X.types=["Unknown","Point","LineString","Polygon"],X.prototype.loadGeometry=function(){var Q=this._pbf;Q.pos=this._geometry;for(var oe=Q.readVarint()+Q.pos,ee=1,xe=0,ce=0,he=0,J=[],M;Q.pos<oe;){if(xe<=0){var E=Q.readVarint();ee=E&7,xe=E>>3}if(xe--,ee===1||ee===2)ce+=Q.readSVarint(),he+=Q.readSVarint(),ee===1&&(M&&J.push(M),M=[]),M.push(new $(ce,he));else if(ee===7)M&&M.push(M[0].clone());else throw new Error("unknown command "+ee)}return M&&J.push(M),J},X.prototype.bbox=function(){var Q=this._pbf;Q.pos=this._geometry;for(var oe=Q.readVarint()+Q.pos,ee=1,xe=0,ce=0,he=0,J=1/0,M=-1/0,E=1/0,fe=-1/0;Q.pos<oe;){if(xe<=0){var me=Q.readVarint();ee=me&7,xe=me>>3}if(xe--,ee===1||ee===2)ce+=Q.readSVarint(),he+=Q.readSVarint(),ce<J&&(J=ce),ce>M&&(M=ce),he<E&&(E=he),he>fe&&(fe=he);else if(ee!==7)throw new Error("unknown command "+ee)}return[J,E,M,fe]},X.prototype.toGeoJSON=function(Q,oe,ee){var xe=this.extent*Math.pow(2,ee),ce=this.extent*Q,he=this.extent*oe,J=this.loadGeometry(),M=X.types[this.type],E,fe;function me(Le){for(var tt=0;tt<Le.length;tt++){var ft=Le[tt],ge=180-(ft.y+he)*360/xe;Le[tt]=[(ft.x+ce)*360/xe-180,360/Math.PI*Math.atan(Math.exp(ge*Math.PI/180))-90]}}switch(this.type){case 1:var ke=[];for(E=0;E<J.length;E++)ke[E]=J[E][0];J=ke,me(J);break;case 2:for(E=0;E<J.length;E++)me(J[E]);break;case 3:for(J=G(J),E=0;E<J.length;E++)for(fe=0;fe<J[E].length;fe++)me(J[E][fe]);break}J.length===1?J=J[0]:M="Multi"+M;var Pe={type:"Feature",geometry:{type:M,coordinates:J},properties:this.properties};return"id"in this&&(Pe.id=this.id),Pe};function G(Q){var oe=Q.length;if(oe<=1)return[Q];for(var ee=[],xe,ce,he=0;he<oe;he++){var J=K(Q[he]);J!==0&&(ce===void 0&&(ce=J<0),ce===J<0?(xe&&ee.push(xe),xe=[Q[he]]):xe.push(Q[he]))}return xe&&ee.push(xe),ee}function K(Q){for(var oe=0,ee=0,xe=Q.length,ce=xe-1,he,J;ee<xe;ce=ee++)he=Q[ee],J=Q[ce],oe+=(J.x-he.x)*(he.y+J.y);return oe}},59701:function(xt,N,F){"use strict";var $=F(66024);xt.exports=X;function X(G,K){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=G,this._keys=[],this._values=[],this._features=[],G.readFields(w,this,K),this.length=this._features.length}function w(G,K,Q){G===15?K.version=Q.readVarint():G===1?K.name=Q.readString():G===5?K.extent=Q.readVarint():G===2?K._features.push(Q.pos):G===3?K._keys.push(Q.readString()):G===4&&K._values.push(Y(Q))}function Y(G){for(var K=null,Q=G.readVarint()+G.pos;G.pos<Q;){var oe=G.readVarint()>>3;K=oe===1?G.readString():oe===2?G.readFloat():oe===3?G.readDouble():oe===4?G.readVarint64():oe===5?G.readVarint():oe===6?G.readSVarint():oe===7?G.readBoolean():null}return K}X.prototype.feature=function(G){if(G<0||G>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[G];var K=this._pbf.readVarint()+this._pbf.pos;return new $(this._pbf,K,this.extent,this._keys,this._values)}},45471:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.PresetStatusColorTypes=void 0,N.isPresetColor=K,N.isPresetStatusColor=Q;var X=$(F(861)),w=F(36496);const Y=w.PresetColors.map(oe=>`${oe}-inverse`),G=N.PresetStatusColorTypes=["success","processing","error","default","warning"];function K(oe){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat((0,X.default)(Y),(0,X.default)(w.PresetColors)).includes(oe):w.PresetColors.includes(oe)}function Q(oe){return G.includes(oe)}},56333:function(xt,N,F){"use strict";"use client";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.containerBaseZIndexOffset=N.consumerBaseZIndexOffset=N.CONTAINER_MAX_OFFSET=void 0,N.useZIndex=ce;var X=$(F(67294)),w=$(F(41401)),Y=$(F(96877));const G=100,K=10,Q=N.CONTAINER_MAX_OFFSET=G*K,oe=N.containerBaseZIndexOffset={Modal:G,Drawer:G,Popover:G,Popconfirm:G,Tooltip:G,Tour:G},ee=N.consumerBaseZIndexOffset={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function xe(he){return he in oe}function ce(he,J){const[,M]=(0,w.default)(),E=X.default.useContext(Y.default),fe=xe(he);if(J!==void 0)return[J,J];let me=E!=null?E:0;return fe?(me+=(E?0:M.zIndexPopupBase)+oe[he],me=Math.min(me,M.zIndexPopupBase+Q)):me+=ee[he],[E===void 0?J:me,me]}},53683:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.getTransitionName=N.default=void 0;const F=()=>({height:0,opacity:0}),$=oe=>{const{scrollHeight:ee}=oe;return{height:ee,opacity:1}},X=oe=>({height:oe?oe.offsetHeight:0}),w=(oe,ee)=>(ee==null?void 0:ee.deadline)===!0||ee.propertyName==="height",Y=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:F,onEnterStart:F,onAppearActive:$,onEnterActive:$,onLeaveStart:X,onLeaveActive:F,onAppearEnd:w,onEnterEnd:w,onLeaveEnd:w,motionDeadline:500}},G=null,K=(oe,ee,xe)=>xe!==void 0?xe:`${oe}-${ee}`;N.getTransitionName=K;var Q=N.default=Y},74132:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=K,N.getOverflowOptions=X;var $=F(9064);function X(Q,oe,ee,xe){if(xe===!1)return{adjustX:!1,adjustY:!1};const ce=xe&&typeof xe=="object"?xe:{},he={};switch(Q){case"top":case"bottom":he.shiftX=oe.dropdownArrowOffset*2+ee,he.shiftY=!0,he.adjustY=!0;break;case"left":case"right":he.shiftY=oe.dropdownArrowOffsetVertical*2+ee,he.shiftX=!0,he.adjustX=!0;break}const J=Object.assign(Object.assign({},he),ce);return J.shiftX||(J.adjustX=!0),J.shiftY||(J.adjustY=!0),J}const w={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},Y={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},G=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function K(Q){const{arrowWidth:oe,autoAdjustOverflow:ee,arrowPointAtCenter:xe,offset:ce,borderRadius:he,visibleFirst:J}=Q,M=oe/2,E={};return Object.keys(w).forEach(fe=>{const me=xe&&Y[fe]||w[fe],ke=Object.assign(Object.assign({},me),{offset:[0,0],dynamicInset:!0});switch(E[fe]=ke,G.has(fe)&&(ke.autoArrow=!1),fe){case"top":case"topLeft":case"topRight":ke.offset[1]=-M-ce;break;case"bottom":case"bottomLeft":case"bottomRight":ke.offset[1]=M+ce;break;case"left":case"leftTop":case"leftBottom":ke.offset[0]=-M-ce;break;case"right":case"rightTop":case"rightBottom":ke.offset[0]=M+ce;break}const Pe=(0,$.getArrowOffset)({contentRadius:he,limitVerticalRadius:!0});if(xe)switch(fe){case"topLeft":case"bottomLeft":ke.offset[0]=-Pe.dropdownArrowOffset-M;break;case"topRight":case"bottomRight":ke.offset[0]=Pe.dropdownArrowOffset+M;break;case"leftTop":case"rightTop":ke.offset[1]=-Pe.dropdownArrowOffset-M;break;case"leftBottom":case"rightBottom":ke.offset[1]=Pe.dropdownArrowOffset+M;break}ke.overflow=X(fe,Pe,oe,ee),J&&(ke.htmlRegion="visibleFirst")}),E}},47419:function(xt,N,F){"use strict";var $=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.cloneElement=K,N.isFragment=Y,N.isValidElement=void 0,N.replaceElement=G;var X=$(F(67294));const{isValidElement:w}=X;N.isValidElement=w;function Y(Q){return Q&&w(Q)&&Q.type===X.Fragment}function G(Q,oe,ee){return w(Q)?X.cloneElement(Q,typeof ee=="function"?ee(Q.props||{}):ee):oe}function K(Q,oe){return G(Q,Q,oe)}},71434:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.getMergedStatus=void 0,N.getStatusClassNames=Y;var X=$(F(94184));const w=null;function Y(K,Q,oe){return(0,X.default)({[`${K}-status-success`]:Q==="success",[`${K}-status-warning`]:Q==="warning",[`${K}-status-error`]:Q==="error",[`${K}-status-validating`]:Q==="validating",[`${K}-has-feedback`]:oe})}const G=(K,Q)=>Q||K;N.getMergedStatus=G},38882:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.canUseDocElement=void 0,Object.defineProperty(N,"isStyleSupport",{enumerable:!0,get:function(){return w.isStyleSupport}});var X=$(F(19158)),w=F(3481);const Y=()=>(0,X.default)()&&window.document.documentElement;N.canUseDocElement=Y},60938:function(xt,N,F){"use strict";"use client";var $=F(75263).default,X=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var w=X(F(27712)),Y=$(F(67294)),G=function(ee,xe){var ce={};for(var he in ee)Object.prototype.hasOwnProperty.call(ee,he)&&xe.indexOf(he)<0&&(ce[he]=ee[he]);if(ee!=null&&typeof Object.getOwnPropertySymbols=="function")for(var J=0,he=Object.getOwnPropertySymbols(ee);J<he.length;J++)xe.indexOf(he[J])<0&&Object.prototype.propertyIsEnumerable.call(ee,he[J])&&(ce[he[J]]=ee[he[J]]);return ce};const K={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},Q=Y.forwardRef((ee,xe)=>{const ce=ke=>{const{keyCode:Pe}=ke;Pe===w.default.ENTER&&ke.preventDefault()},he=ke=>{const{keyCode:Pe}=ke,{onClick:Le}=ee;Pe===w.default.ENTER&&Le&&Le()},{style:J,noStyle:M,disabled:E}=ee,fe=G(ee,["style","noStyle","disabled"]);let me={};return M||(me=Object.assign({},K)),E&&(me.pointerEvents="none"),me=Object.assign(Object.assign({},me),J),Y.createElement("div",Object.assign({role:"button",tabIndex:0,ref:xe},fe,{onKeyDown:ce,onKeyUp:he,style:me}))});var oe=N.default=Q},13594:function(xt,N,F){"use strict";var $=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.devUseWarning=N.default=N.WarningContext=void 0,N.noop=Y,N.resetWarned=K;var X=$(F(67294)),w=$(F(45520));function Y(){}let G=null;function K(){G=null,(0,w.resetWarned)()}let Q=Y;const oe=N.WarningContext=X.createContext({}),ee=N.devUseWarning=()=>{const ce=()=>{};return ce.deprecated=Y,ce};var xe=N.default=Q},96877:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var X=$(F(67294));const w=X.default.createContext(void 0);var Y=N.default=w},1028:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var X=$(F(25633)),w=N.default=X.default},93319:function(xt,N,F){"use strict";"use client";var $=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=N.DisabledContextProvider=void 0;var X=$(F(67294));const w=X.createContext(!1),Y=K=>{let{children:Q,disabled:oe}=K;const ee=X.useContext(w);return X.createElement(w.Provider,{value:oe!=null?oe:ee},Q)};N.DisabledContextProvider=Y;var G=N.default=w},16722:function(xt,N,F){"use strict";"use client";var $=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=G;var X=F(82225),w=$(F(67294)),Y=F(3184);function G(K){const{children:Q}=K,[,oe]=(0,Y.useToken)(),{motion:ee}=oe,xe=w.useRef(!1);return xe.current=xe.current||ee===!1,xe.current?w.createElement(X.Provider,{motion:ee},Q):Q}},11380:function(xt,N,F){"use strict";"use client";var $=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var X=$(F(67294)),w=F(13594);const Y=null;var G=N.default=()=>null},3236:function(xt,N,F){"use strict";"use client";var $=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=N.SizeContextProvider=void 0;var X=$(F(67294));const w=X.createContext(void 0),Y=K=>{let{children:Q,size:oe}=K;const ee=X.useContext(w);return X.createElement(w.Provider,{value:oe||ee},Q)};N.SizeContextProvider=Y;var G=N.default=w},7177:function(xt,N,F){"use strict";var $=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.defaultIconPrefixCls=N.ConfigContext=N.ConfigConsumer=void 0;var X=$(F(67294));const w=N.defaultIconPrefixCls="anticon",Y=(Q,oe)=>oe||(Q?`ant-${Q}`:"ant"),G=N.ConfigContext=X.createContext({getPrefixCls:Y,iconPrefixCls:w}),{Consumer:K}=G;N.ConfigConsumer=K},56301:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.getStyle=oe,N.registerTheme=ee;var X=F(78589),w=F(131),Y=$(F(19158)),G=F(93399),K=$(F(13594));const Q=`-ant-${Date.now()}-${Math.random()}`;function oe(xe,ce){const he={},J=(fe,me)=>{let ke=fe.clone();return ke=(me==null?void 0:me(ke))||ke,ke.toRgbString()},M=(fe,me)=>{const ke=new w.TinyColor(fe),Pe=(0,X.generate)(ke.toRgbString());he[`${me}-color`]=J(ke),he[`${me}-color-disabled`]=Pe[1],he[`${me}-color-hover`]=Pe[4],he[`${me}-color-active`]=Pe[6],he[`${me}-color-outline`]=ke.clone().setAlpha(.2).toRgbString(),he[`${me}-color-deprecated-bg`]=Pe[0],he[`${me}-color-deprecated-border`]=Pe[2]};if(ce.primaryColor){M(ce.primaryColor,"primary");const fe=new w.TinyColor(ce.primaryColor),me=(0,X.generate)(fe.toRgbString());me.forEach((Pe,Le)=>{he[`primary-${Le+1}`]=Pe}),he["primary-color-deprecated-l-35"]=J(fe,Pe=>Pe.lighten(35)),he["primary-color-deprecated-l-20"]=J(fe,Pe=>Pe.lighten(20)),he["primary-color-deprecated-t-20"]=J(fe,Pe=>Pe.tint(20)),he["primary-color-deprecated-t-50"]=J(fe,Pe=>Pe.tint(50)),he["primary-color-deprecated-f-12"]=J(fe,Pe=>Pe.setAlpha(Pe.getAlpha()*.12));const ke=new w.TinyColor(me[0]);he["primary-color-active-deprecated-f-30"]=J(ke,Pe=>Pe.setAlpha(Pe.getAlpha()*.3)),he["primary-color-active-deprecated-d-02"]=J(ke,Pe=>Pe.darken(2))}return ce.successColor&&M(ce.successColor,"success"),ce.warningColor&&M(ce.warningColor,"warning"),ce.errorColor&&M(ce.errorColor,"error"),ce.infoColor&&M(ce.infoColor,"info"),`
  :root {
    ${Object.keys(he).map(fe=>`--${xe}-${fe}: ${he[fe]};`).join(`
`)}
  }
  `.trim()}function ee(xe,ce){const he=oe(xe,ce);(0,Y.default)()&&(0,G.updateCSS)(he,`${Q}-dynamic-theme`)}},5819:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var X=F(67294),w=$(F(93319)),Y=$(F(3236));function G(){const Q=(0,X.useContext)(w.default),oe=(0,X.useContext)(Y.default);return{componentDisabled:Q,componentSize:oe}}var K=N.default=G},65693:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var X=$(F(67294)),w=$(F(3236));const Y=K=>{const Q=X.default.useContext(w.default);return X.default.useMemo(()=>K?typeof K=="string"?K!=null?K:Q:K instanceof Function?K(Q):Q:Q,[K,Q])};var G=N.default=Y},25494:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=G;var X=$(F(67265)),w=$(F(11102)),Y=F(3184);function G(K,Q){const oe=K||{},ee=oe.inherit===!1||!Q?Y.defaultConfig:Q;return(0,X.default)(()=>{if(!K)return Q;const xe=Object.assign({},ee.components);return Object.keys(K.components||{}).forEach(ce=>{xe[ce]=Object.assign(Object.assign({},xe[ce]),K.components[ce])}),Object.assign(Object.assign(Object.assign({},ee),oe),{token:Object.assign(Object.assign({},ee.token),oe.token),components:xe})},[oe,ee],(xe,ce)=>xe.some((he,J)=>{const M=ce[J];return!(0,w.default)(he,M,!0)}))}},31929:function(xt,N,F){"use strict";"use client";"use client";var $=F(64836).default,X=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"ConfigConsumer",{enumerable:!0,get:function(){return E.ConfigConsumer}}),Object.defineProperty(N,"ConfigContext",{enumerable:!0,get:function(){return E.ConfigContext}}),N.default=N.configConsumerProps=void 0,Object.defineProperty(N,"defaultIconPrefixCls",{enumerable:!0,get:function(){return E.defaultIconPrefixCls}}),N.warnContext=N.globalConfig=N.defaultPrefixCls=void 0;var w=X(F(67294)),Y=F(88623),G=$(F(13357)),K=$(F(67265)),Q=F(20059),oe=X(F(13594)),ee=$(F(2197)),xe=X(F(24522)),ce=$(F(44805)),he=$(F(18253)),J=F(89329),M=$(F(98411)),E=F(7177),fe=F(56301),me=F(93319),ke=$(F(5819)),Pe=$(F(25494)),Le=$(F(16722)),tt=$(F(11380)),ft=X(F(3236)),ge=$(F(82932)),be=function(ze,De){var Ct={};for(var Vt in ze)Object.prototype.hasOwnProperty.call(ze,Vt)&&De.indexOf(Vt)<0&&(Ct[Vt]=ze[Vt]);if(ze!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ve=0,Vt=Object.getOwnPropertySymbols(ze);Ve<Vt.length;Ve++)De.indexOf(Vt[Ve])<0&&Object.prototype.propertyIsEnumerable.call(ze,Vt[Ve])&&(Ct[Vt[Ve]]=ze[Vt[Ve]]);return Ct};let Ce=!1;const Ye=N.warnContext=null,je=N.configConsumerProps=["getTargetContainer","getPopupContainer","rootPrefixCls","getPrefixCls","renderEmpty","csp","autoInsertSpaceInButton","locale","pageHeader"],Et=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select","button"],Ae=N.defaultPrefixCls="ant";let Qe,te,Ze;function ie(){return Qe||Ae}function Oe(){return te||E.defaultIconPrefixCls}function nt(ze){return Object.keys(ze).some(De=>De.endsWith("Color"))}const ye=ze=>{let{prefixCls:De,iconPrefixCls:Ct,theme:Vt}=ze;De!==void 0&&(Qe=De),Ct!==void 0&&(te=Ct),Vt&&(nt(Vt)?(0,fe.registerTheme)(ie(),Vt):Ze=Vt)},Te=()=>({getPrefixCls:(ze,De)=>De||(ze?`${ie()}-${ze}`:ie()),getIconPrefixCls:Oe,getRootPrefixCls:()=>Qe||ie(),getTheme:()=>Ze});N.globalConfig=Te;const Je=ze=>{const{children:De,csp:Ct,autoInsertSpaceInButton:Vt,alert:Ve,anchor:Ue,form:Ee,locale:et,componentSize:st,direction:Re,space:Ie,virtual:ct,dropdownMatchSelectWidth:Tt,popupMatchSelectWidth:Qt,popupOverflow:wt,legacyLocale:se,parentContext:Ge,iconPrefixCls:Ke,theme:bt,componentDisabled:Be,segmented:pt,statistic:It,spin:ot,calendar:zt,carousel:Jt,cascader:tr,collapse:pr,typography:br,checkbox:Zr,descriptions:Nr,divider:tn,drawer:Dn,skeleton:gn,steps:Vn,image:Un,layout:mi,list:qn,mentions:Xn,modal:We,progress:it,result:_t,slider:Pt,breadcrumb:jt,menu:gr,pagination:Cr,input:kt,empty:at,badge:Rt,radio:mr,rate:Dr,switch:Ft,transfer:Mn,avatar:yi,message:gi,tag:sn,table:hi,card:ri,tabs:ui,timeline:ba,timePicker:vi,upload:Sa,notification:za,tree:_a,colorPicker:Ga,datePicker:Ea,rangePicker:hs,flex:uo,wave:Ro,dropdown:Jn,warning:_i}=ze,na=w.useCallback((kn,_n)=>{const{prefixCls:Mi}=ze;if(_n)return _n;const Yi=Mi||Ge.getPrefixCls("");return kn?`${Yi}-${kn}`:Yi},[Ge.getPrefixCls,ze.prefixCls]),Xa=Ke||Ge.iconPrefixCls||E.defaultIconPrefixCls,ps=Ct||Ge.csp;(0,ge.default)(Xa,ps);const po=(0,Pe.default)(bt,Ge.theme),Io={csp:ps,autoInsertSpaceInButton:Vt,alert:Ve,anchor:Ue,locale:et||se,direction:Re,space:Ie,virtual:ct,popupMatchSelectWidth:Qt!=null?Qt:Tt,popupOverflow:wt,getPrefixCls:na,iconPrefixCls:Xa,theme:po,segmented:pt,statistic:It,spin:ot,calendar:zt,carousel:Jt,cascader:tr,collapse:pr,typography:br,checkbox:Zr,descriptions:Nr,divider:tn,drawer:Dn,skeleton:gn,steps:Vn,image:Un,input:kt,layout:mi,list:qn,mentions:Xn,modal:We,progress:it,result:_t,slider:Pt,breadcrumb:jt,menu:gr,pagination:Cr,empty:at,badge:Rt,radio:mr,rate:Dr,switch:Ft,transfer:Mn,avatar:yi,message:gi,tag:sn,table:hi,card:ri,tabs:ui,timeline:ba,timePicker:vi,upload:Sa,notification:za,tree:_a,colorPicker:Ga,datePicker:Ea,rangePicker:hs,flex:uo,wave:Ro,dropdown:Jn,warning:_i},nr=Object.assign({},Ge);Object.keys(Io).forEach(kn=>{Io[kn]!==void 0&&(nr[kn]=Io[kn])}),Et.forEach(kn=>{const _n=ze[kn];_n&&(nr[kn]=_n)});const At=(0,K.default)(()=>nr,nr,(kn,_n)=>{const Mi=Object.keys(kn),Yi=Object.keys(_n);return Mi.length!==Yi.length||Mi.some(Wo=>kn[Wo]!==_n[Wo])}),Xt=w.useMemo(()=>({prefixCls:Xa,csp:ps}),[Xa,ps]);let yr=w.createElement(w.Fragment,null,w.createElement(tt.default,{dropdownMatchSelectWidth:Tt}),De);const Gr=w.useMemo(()=>{var kn,_n,Mi,Yi;return(0,Q.merge)(((kn=he.default.Form)===null||kn===void 0?void 0:kn.defaultValidateMessages)||{},((Mi=(_n=At.locale)===null||_n===void 0?void 0:_n.Form)===null||Mi===void 0?void 0:Mi.defaultValidateMessages)||{},((Yi=At.form)===null||Yi===void 0?void 0:Yi.validateMessages)||{},(Ee==null?void 0:Ee.validateMessages)||{})},[At,Ee==null?void 0:Ee.validateMessages]);Object.keys(Gr).length>0&&(yr=w.createElement(ee.default.Provider,{value:Gr},yr)),et&&(yr=w.createElement(xe.default,{locale:et,_ANT_MARK__:xe.ANT_MARK},yr)),(Xa||ps)&&(yr=w.createElement(G.default.Provider,{value:Xt},yr)),st&&(yr=w.createElement(ft.SizeContextProvider,{size:st},yr)),yr=w.createElement(Le.default,null,yr);const Cn=w.useMemo(()=>{const kn=po||{},{algorithm:_n,token:Mi,components:Yi}=kn,Wo=be(kn,["algorithm","token","components"]),Ko=_n&&(!Array.isArray(_n)||_n.length>0)?(0,Y.createTheme)(_n):J.defaultTheme,su={};Object.entries(Yi||{}).forEach(ro=>{let[uu,qo]=ro;const Dt=Object.assign({},qo);"algorithm"in Dt&&(Dt.algorithm===!0?Dt.theme=Ko:(Array.isArray(Dt.algorithm)||typeof Dt.algorithm=="function")&&(Dt.theme=(0,Y.createTheme)(Dt.algorithm)),delete Dt.algorithm),su[uu]=Dt});const No=Object.assign(Object.assign({},M.default),Mi);return Object.assign(Object.assign({},Wo),{theme:Ko,token:No,components:su,override:Object.assign({override:No},su)})},[po]);return bt&&(yr=w.createElement(J.DesignTokenContext.Provider,{value:Cn},yr)),At.warning&&(yr=w.createElement(oe.WarningContext.Provider,{value:At.warning},yr)),Be!==void 0&&(yr=w.createElement(me.DisabledContextProvider,{disabled:Be},yr)),w.createElement(E.ConfigContext.Provider,{value:At},yr)},pe=ze=>{const De=w.useContext(E.ConfigContext),Ct=w.useContext(ce.default);return w.createElement(Je,Object.assign({parentContext:De,legacyLocale:Ct},ze))};pe.ConfigContext=E.ConfigContext,pe.SizeContext=ft.default,pe.config=ye,pe.useConfig=ke.default,Object.defineProperty(pe,"SizeContext",{get:()=>ft.default});var Me=N.default=pe},82932:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return $.useResetIconStyle}});var $=F(3184)},25633:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var X=$(F(27590)),w=$(F(52040));const Y={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},X.default),timePickerLocale:Object.assign({},w.default)};var G=N.default=Y},51130:function(xt,N,F){"use strict";"use client";var $=F(64836).default,X=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.NoStyleItemContext=N.NoFormStyle=N.FormProvider=N.FormItemPrefixContext=N.FormItemInputContext=N.FormContext=void 0;var w=X(F(67294)),Y=w,G=F(43589),K=$(F(18475));const Q=N.FormContext=Y.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),oe=N.NoStyleItemContext=Y.createContext(null),ee=J=>{const M=(0,K.default)(J,["prefixCls"]);return Y.createElement(G.FormProvider,Object.assign({},M))};N.FormProvider=ee;const xe=N.FormItemPrefixContext=Y.createContext({prefixCls:""}),ce=N.FormItemInputContext=Y.createContext({}),he=J=>{let{children:M,status:E,override:fe}=J;const me=(0,w.useContext)(ce),ke=(0,w.useMemo)(()=>{const Pe=Object.assign({},me);return fe&&delete Pe.isFormItemInput,E&&(delete Pe.status,delete Pe.hasFeedback,delete Pe.feedbackIcon),Pe},[E,fe,me]);return Y.createElement(ce.Provider,{value:ke},M)};N.NoFormStyle=he},2197:function(xt,N,F){"use strict";"use client";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var $=F(67294),X=N.default=(0,$.createContext)(void 0)},10815:function(xt,N,F){"use strict";"use client";var $=F(64836).default,X=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0,N.triggerFocus=Pe;var w=X(F(67294)),Y=$(F(43273)),G=$(F(94184)),K=$(F(67656)),Q=F(75531),oe=F(71434),ee=F(13594),xe=F(31929),ce=$(F(93319)),he=$(F(65693)),J=F(51130),M=F(46549),E=$(F(81722)),fe=$(F(89858)),me=F(36714),ke=function(ft,ge){var be={};for(var Ce in ft)Object.prototype.hasOwnProperty.call(ft,Ce)&&ge.indexOf(Ce)<0&&(be[Ce]=ft[Ce]);if(ft!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ye=0,Ce=Object.getOwnPropertySymbols(ft);Ye<Ce.length;Ye++)ge.indexOf(Ce[Ye])<0&&Object.prototype.propertyIsEnumerable.call(ft,Ce[Ye])&&(be[Ce[Ye]]=ft[Ce[Ye]]);return be};function Pe(ft,ge){if(!ft)return;ft.focus(ge);const{cursor:be}=ge||{};if(be){const Ce=ft.value.length;switch(be){case"start":ft.setSelectionRange(0,0);break;case"end":ft.setSelectionRange(Ce,Ce);break;default:ft.setSelectionRange(0,Ce);break}}}const Le=(0,w.forwardRef)((ft,ge)=>{var be;const{prefixCls:Ce,bordered:Ye=!0,status:je,size:Et,disabled:Ae,onBlur:Qe,onFocus:te,suffix:Ze,allowClear:ie,addonAfter:Oe,addonBefore:nt,className:ye,style:Te,styles:Je,rootClassName:pe,onChange:Me,classNames:ze}=ft,De=ke(ft,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames"]),{getPrefixCls:Ct,direction:Vt,input:Ve}=w.default.useContext(xe.ConfigContext),Ue=Ct("input",Ce),Ee=(0,w.useRef)(null),[et,st]=(0,fe.default)(Ue),{compactSize:Re,compactItemClassnames:Ie}=(0,M.useCompactItemContext)(Ue,Vt),ct=(0,he.default)(pr=>{var br;return(br=Et!=null?Et:Re)!==null&&br!==void 0?br:pr}),Tt=w.default.useContext(ce.default),Qt=Ae!=null?Ae:Tt,{status:wt,hasFeedback:se,feedbackIcon:Ge}=(0,w.useContext)(J.FormItemInputContext),Ke=(0,oe.getMergedStatus)(wt,je),bt=(0,me.hasPrefixSuffix)(ft)||!!se,Be=(0,w.useRef)(bt),pt=(0,E.default)(Ee,!0),It=pr=>{pt(),Qe==null||Qe(pr)},ot=pr=>{pt(),te==null||te(pr)},zt=pr=>{pt(),Me==null||Me(pr)},Jt=(se||Ze)&&w.default.createElement(w.default.Fragment,null,Ze,se&&Ge);let tr;return typeof ie=="object"&&(ie!=null&&ie.clearIcon)?tr=ie:ie&&(tr={clearIcon:w.default.createElement(Y.default,null)}),et(w.default.createElement(K.default,Object.assign({ref:(0,Q.composeRef)(ge,Ee),prefixCls:Ue,autoComplete:Ve==null?void 0:Ve.autoComplete},De,{disabled:Qt,onBlur:It,onFocus:ot,style:Object.assign(Object.assign({},Ve==null?void 0:Ve.style),Te),styles:Object.assign(Object.assign({},Ve==null?void 0:Ve.styles),Je),suffix:Jt,allowClear:tr,className:(0,G.default)(ye,pe,Ie,Ve==null?void 0:Ve.className),onChange:zt,addonAfter:Oe&&w.default.createElement(M.NoCompactStyle,null,w.default.createElement(J.NoFormStyle,{override:!0,status:!0},Oe)),addonBefore:nt&&w.default.createElement(M.NoCompactStyle,null,w.default.createElement(J.NoFormStyle,{override:!0,status:!0},nt)),classNames:Object.assign(Object.assign(Object.assign({},ze),Ve==null?void 0:Ve.classNames),{input:(0,G.default)({[`${Ue}-sm`]:ct==="small",[`${Ue}-lg`]:ct==="large",[`${Ue}-rtl`]:Vt==="rtl",[`${Ue}-borderless`]:!Ye},!bt&&(0,oe.getStatusClassNames)(Ue,Ke),ze==null?void 0:ze.input,(be=Ve==null?void 0:Ve.classNames)===null||be===void 0?void 0:be.input,st)}),classes:{affixWrapper:(0,G.default)({[`${Ue}-affix-wrapper-sm`]:ct==="small",[`${Ue}-affix-wrapper-lg`]:ct==="large",[`${Ue}-affix-wrapper-rtl`]:Vt==="rtl",[`${Ue}-affix-wrapper-borderless`]:!Ye},(0,oe.getStatusClassNames)(`${Ue}-affix-wrapper`,Ke,se),st),wrapper:(0,G.default)({[`${Ue}-group-rtl`]:Vt==="rtl"},st),group:(0,G.default)({[`${Ue}-group-wrapper-sm`]:ct==="small",[`${Ue}-group-wrapper-lg`]:ct==="large",[`${Ue}-group-wrapper-rtl`]:Vt==="rtl",[`${Ue}-group-wrapper-disabled`]:Qt},(0,oe.getStatusClassNames)(`${Ue}-group-wrapper`,Ke,se),st)}})))});var tt=N.default=Le},14104:function(xt,N,F){"use strict";"use client";var $=F(64836).default,X=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var w=X(F(67294)),Y=w,G=$(F(43273)),K=$(F(94184)),Q=$(F(43961)),oe=F(71434),ee=F(31929),xe=$(F(93319)),ce=$(F(65693)),he=F(51130),J=F(10815),M=$(F(89858)),E=function(ke,Pe){var Le={};for(var tt in ke)Object.prototype.hasOwnProperty.call(ke,tt)&&Pe.indexOf(tt)<0&&(Le[tt]=ke[tt]);if(ke!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ft=0,tt=Object.getOwnPropertySymbols(ke);ft<tt.length;ft++)Pe.indexOf(tt[ft])<0&&Object.prototype.propertyIsEnumerable.call(ke,tt[ft])&&(Le[tt[ft]]=ke[tt[ft]]);return Le};const fe=(0,w.forwardRef)((ke,Pe)=>{var Le;const{prefixCls:tt,bordered:ft=!0,size:ge,disabled:be,status:Ce,allowClear:Ye,classNames:je,rootClassName:Et,className:Ae}=ke,Qe=E(ke,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className"]),{getPrefixCls:te,direction:Ze}=Y.useContext(ee.ConfigContext),ie=(0,ce.default)(ge),Oe=Y.useContext(xe.default),nt=be!=null?be:Oe,{status:ye,hasFeedback:Te,feedbackIcon:Je}=Y.useContext(he.FormItemInputContext),pe=(0,oe.getMergedStatus)(ye,Ce),Me=Y.useRef(null);Y.useImperativeHandle(Pe,()=>{var Ve;return{resizableTextArea:(Ve=Me.current)===null||Ve===void 0?void 0:Ve.resizableTextArea,focus:Ue=>{var Ee,et;(0,J.triggerFocus)((et=(Ee=Me.current)===null||Ee===void 0?void 0:Ee.resizableTextArea)===null||et===void 0?void 0:et.textArea,Ue)},blur:()=>{var Ue;return(Ue=Me.current)===null||Ue===void 0?void 0:Ue.blur()}}});const ze=te("input",tt);let De;typeof Ye=="object"&&(Ye!=null&&Ye.clearIcon)?De=Ye:Ye&&(De={clearIcon:Y.createElement(G.default,null)});const[Ct,Vt]=(0,M.default)(ze);return Ct(Y.createElement(Q.default,Object.assign({},Qe,{disabled:nt,allowClear:De,className:(0,K.default)(Ae,Et),classes:{affixWrapper:(0,K.default)(`${ze}-textarea-affix-wrapper`,{[`${ze}-affix-wrapper-rtl`]:Ze==="rtl",[`${ze}-affix-wrapper-borderless`]:!ft,[`${ze}-affix-wrapper-sm`]:ie==="small",[`${ze}-affix-wrapper-lg`]:ie==="large",[`${ze}-textarea-show-count`]:ke.showCount||((Le=ke.count)===null||Le===void 0?void 0:Le.show)},(0,oe.getStatusClassNames)(`${ze}-affix-wrapper`,pe),Vt)},classNames:Object.assign(Object.assign({},je),{textarea:(0,K.default)({[`${ze}-borderless`]:!ft,[`${ze}-sm`]:ie==="small",[`${ze}-lg`]:ie==="large"},(0,oe.getStatusClassNames)(ze,pe),Vt,je==null?void 0:je.textarea)}),prefixCls:ze,suffix:Te&&Y.createElement("span",{className:`${ze}-textarea-suffix`},Je),ref:Me})))});var me=N.default=fe},81722:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=X;var $=F(67294);function X(w,Y){const G=(0,$.useRef)([]),K=()=>{G.current.push(setTimeout(()=>{var Q,oe,ee,xe;!((Q=w.current)===null||Q===void 0)&&Q.input&&((oe=w.current)===null||oe===void 0?void 0:oe.input.getAttribute("type"))==="password"&&(!((ee=w.current)===null||ee===void 0)&&ee.input.hasAttribute("value"))&&((xe=w.current)===null||xe===void 0||xe.input.removeAttribute("value"))}))};return(0,$.useEffect)(()=>(Y&&K(),()=>G.current.forEach(Q=>{Q&&clearTimeout(Q)})),[]),K}},89858:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.initComponentToken=N.genStatusStyle=N.genPlaceholderStyle=N.genInputSmallStyle=N.genInputGroupStyle=N.genHoverStyle=N.genDisabledStyle=N.genBasicInputStyle=N.genActiveStyle=N.default=void 0,N.initInputToken=Le;var $=F(98078),X=F(78793),w=F(3184);const Y=ge=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:ge,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}});N.genPlaceholderStyle=Y;const G=ge=>({borderColor:ge.hoverBorderColor,backgroundColor:ge.hoverBg});N.genHoverStyle=G;const K=ge=>({borderColor:ge.activeBorderColor,boxShadow:ge.activeShadow,outline:0,backgroundColor:ge.activeBg});N.genActiveStyle=K;const Q=ge=>({color:ge.colorTextDisabled,backgroundColor:ge.colorBgContainerDisabled,borderColor:ge.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"&:hover":Object.assign({},G((0,w.mergeToken)(ge,{hoverBorderColor:ge.colorBorder,hoverBg:ge.colorBgContainerDisabled})))});N.genDisabledStyle=Q;const oe=ge=>{const{paddingBlockLG:be,fontSizeLG:Ce,lineHeightLG:Ye,borderRadiusLG:je,paddingInlineLG:Et}=ge;return{padding:`${be}px ${Et}px`,fontSize:Ce,lineHeight:Ye,borderRadius:je}},ee=ge=>({padding:`${ge.paddingBlockSM}px ${ge.paddingInlineSM}px`,borderRadius:ge.borderRadiusSM});N.genInputSmallStyle=ee;const xe=(ge,be)=>{const{componentCls:Ce,colorError:Ye,colorWarning:je,errorActiveShadow:Et,warningActiveShadow:Ae,colorErrorBorderHover:Qe,colorWarningBorderHover:te}=ge;return{[`&-status-error:not(${be}-disabled):not(${be}-borderless)${be}`]:{borderColor:Ye,"&:hover":{borderColor:Qe},"&:focus, &:focus-within":Object.assign({},K((0,w.mergeToken)(ge,{activeBorderColor:Ye,activeShadow:Et}))),[`${Ce}-prefix, ${Ce}-suffix`]:{color:Ye}},[`&-status-warning:not(${be}-disabled):not(${be}-borderless)${be}`]:{borderColor:je,"&:hover":{borderColor:te},"&:focus, &:focus-within":Object.assign({},K((0,w.mergeToken)(ge,{activeBorderColor:je,activeShadow:Ae}))),[`${Ce}-prefix, ${Ce}-suffix`]:{color:je}}}};N.genStatusStyle=xe;const ce=ge=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${ge.paddingBlock}px ${ge.paddingInline}px`,color:ge.colorText,fontSize:ge.fontSize,lineHeight:ge.lineHeight,backgroundColor:ge.colorBgContainer,backgroundImage:"none",borderWidth:ge.lineWidth,borderStyle:ge.lineType,borderColor:ge.colorBorder,borderRadius:ge.borderRadius,transition:`all ${ge.motionDurationMid}`},Y(ge.colorTextPlaceholder)),{"&:hover":Object.assign({},G(ge)),"&:focus, &:focus-within":Object.assign({},K(ge)),"&-disabled, &[disabled]":Object.assign({},Q(ge)),"&-borderless":{"&, &:hover, &:focus, &-focused, &-disabled, &[disabled]":{backgroundColor:"transparent",border:"none",boxShadow:"none"}},"textarea&":{maxWidth:"100%",height:"auto",minHeight:ge.controlHeight,lineHeight:ge.lineHeight,verticalAlign:"bottom",transition:`all ${ge.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},oe(ge)),"&-sm":Object.assign({},ee(ge)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}});N.genBasicInputStyle=ce;const he=ge=>{const{componentCls:be,antCls:Ce}=ge;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,["&[class*='col-']"]:{paddingInlineEnd:ge.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${be}, &-lg > ${be}-group-addon`]:Object.assign({},oe(ge)),[`&-sm ${be}, &-sm > ${be}-group-addon`]:Object.assign({},ee(ge)),[`&-lg ${Ce}-select-single ${Ce}-select-selector`]:{height:ge.controlHeightLG},[`&-sm ${Ce}-select-single ${Ce}-select-selector`]:{height:ge.controlHeightSM},[`> ${be}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${be}-group`]:{["&-addon, &-wrap"]:{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${ge.paddingInline}px`,color:ge.colorText,fontWeight:"normal",fontSize:ge.fontSize,textAlign:"center",backgroundColor:ge.addonBg,border:`${ge.lineWidth}px ${ge.lineType} ${ge.colorBorder}`,borderRadius:ge.borderRadius,transition:`all ${ge.motionDurationSlow}`,lineHeight:1,[`${Ce}-select`]:{margin:`-${ge.paddingBlock+1}px -${ge.paddingInline}px`,[`&${Ce}-select-single:not(${Ce}-select-customize-input):not(${Ce}-pagination-size-changer)`]:{[`${Ce}-select-selector`]:{backgroundColor:"inherit",border:`${ge.lineWidth}px ${ge.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${Ce}-select-selector`]:{color:ge.colorPrimary}}},[`${Ce}-cascader-picker`]:{margin:`-9px -${ge.paddingInline}px`,backgroundColor:"transparent",[`${Ce}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}},[`${be}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${be}-search-with-button &`]:{zIndex:0}}},[`> ${be}:first-child, ${be}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${Ce}-select ${Ce}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${be}-affix-wrapper`]:{[`&:not(:first-child) ${be}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${be}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${be}:last-child, ${be}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${Ce}-select ${Ce}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${be}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${be}-search &`]:{borderStartStartRadius:ge.borderRadius,borderEndStartRadius:ge.borderRadius}},[`&:not(:first-child), ${be}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${be}-group-compact`]:Object.assign(Object.assign({display:"block"},(0,$.clearFix)()),{[`${be}-group-addon, ${be}-group-wrap, > ${be}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:ge.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${be}-affix-wrapper,
        & > ${be}-number-affix-wrapper,
        & > ${Ce}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:-ge.lineWidth,borderInlineEndWidth:ge.lineWidth},[`${be}`]:{float:"none"},[`& > ${Ce}-select > ${Ce}-select-selector,
      & > ${Ce}-select-auto-complete ${be},
      & > ${Ce}-cascader-picker ${be},
      & > ${be}-group-wrapper ${be}`]:{borderInlineEndWidth:ge.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${Ce}-select-focused`]:{zIndex:1},[`& > ${Ce}-select > ${Ce}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${Ce}-select:first-child > ${Ce}-select-selector,
      & > ${Ce}-select-auto-complete:first-child ${be},
      & > ${Ce}-cascader-picker:first-child ${be}`]:{borderStartStartRadius:ge.borderRadius,borderEndStartRadius:ge.borderRadius},[`& > *:last-child,
      & > ${Ce}-select:last-child > ${Ce}-select-selector,
      & > ${Ce}-cascader-picker:last-child ${be},
      & > ${Ce}-cascader-picker-focused:last-child ${be}`]:{borderInlineEndWidth:ge.lineWidth,borderStartEndRadius:ge.borderRadius,borderEndEndRadius:ge.borderRadius},[`& > ${Ce}-select-auto-complete ${be}`]:{verticalAlign:"top"},[`${be}-group-wrapper + ${be}-group-wrapper`]:{marginInlineStart:-ge.lineWidth,[`${be}-affix-wrapper`]:{borderRadius:0}},[`${be}-group-wrapper:not(:last-child)`]:{[`&${be}-search > ${be}-group`]:{[`& > ${be}-group-addon > ${be}-search-button`]:{borderRadius:0},[`& > ${be}`]:{borderStartStartRadius:ge.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:ge.borderRadius}}}})}};N.genInputGroupStyle=he;const J=ge=>{const{componentCls:be,controlHeightSM:Ce,lineWidth:Ye}=ge,je=16,Et=(Ce-Ye*2-je)/2;return{[be]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,$.resetComponent)(ge)),ce(ge)),xe(ge,be)),{'&[type="color"]':{height:ge.controlHeight,[`&${be}-lg`]:{height:ge.controlHeightLG},[`&${be}-sm`]:{height:Ce,paddingTop:Et,paddingBottom:Et}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},M=ge=>{const{componentCls:be}=ge;return{[`${be}-clear-icon`]:{margin:0,color:ge.colorTextQuaternary,fontSize:ge.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${ge.motionDurationSlow}`,"&:hover":{color:ge.colorTextTertiary},"&:active":{color:ge.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${ge.inputAffixPadding}px`}}}},E=ge=>{const{componentCls:be,inputAffixPadding:Ce,colorTextDescription:Ye,motionDurationSlow:je,colorIcon:Et,colorIconHover:Ae,iconCls:Qe}=ge;return{[`${be}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ce(ge)),{display:"inline-flex",[`&:not(${be}-affix-wrapper-disabled):hover`]:{zIndex:1,[`${be}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},"&-disabled":{[`${be}[disabled]`]:{background:"transparent"}},[`> input${be}`]:{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${be}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:ge.paddingXS}},"&-show-count-suffix":{color:Ye},"&-show-count-has-suffix":{marginInlineEnd:ge.paddingXXS},"&-prefix":{marginInlineEnd:Ce},"&-suffix":{marginInlineStart:Ce}}}),M(ge)),{[`${Qe}${be}-password-icon`]:{color:Et,cursor:"pointer",transition:`all ${je}`,"&:hover":{color:Ae}}}),xe(ge,`${be}-affix-wrapper`))}},fe=ge=>{const{componentCls:be,colorError:Ce,colorWarning:Ye,borderRadiusLG:je,borderRadiusSM:Et}=ge;return{[`${be}-group`]:Object.assign(Object.assign(Object.assign({},(0,$.resetComponent)(ge)),he(ge)),{"&-rtl":{direction:"rtl"},"&-wrapper":{display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${be}-group-addon`]:{borderRadius:je,fontSize:ge.fontSizeLG}},"&-sm":{[`${be}-group-addon`]:{borderRadius:Et}},"&-status-error":{[`${be}-group-addon`]:{color:Ce,borderColor:Ce}},"&-status-warning":{[`${be}-group-addon`]:{color:Ye,borderColor:Ye}},"&-disabled":{[`${be}-group-addon`]:Object.assign({},Q(ge))},[`&:not(${be}-compact-first-item):not(${be}-compact-last-item)${be}-compact-item`]:{[`${be}, ${be}-group-addon`]:{borderRadius:0}},[`&:not(${be}-compact-last-item)${be}-compact-first-item`]:{[`${be}, ${be}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${be}-compact-first-item)${be}-compact-last-item`]:{[`${be}, ${be}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}})}},me=ge=>{const{componentCls:be,antCls:Ce}=ge,Ye=`${be}-search`;return{[Ye]:{[`${be}`]:{"&:hover, &:focus":{borderColor:ge.colorPrimaryHover,[`+ ${be}-group-addon ${Ye}-button:not(${Ce}-btn-primary)`]:{borderInlineStartColor:ge.colorPrimaryHover}}},[`${be}-affix-wrapper`]:{borderRadius:0},[`${be}-lg`]:{lineHeight:ge.lineHeightLG-2e-4},[`> ${be}-group`]:{[`> ${be}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${Ye}-button`]:{paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:ge.borderRadius,borderEndEndRadius:ge.borderRadius,borderEndStartRadius:0,boxShadow:"none"},[`${Ye}-button:not(${Ce}-btn-primary)`]:{color:ge.colorTextDescription,"&:hover":{color:ge.colorPrimaryHover},"&:active":{color:ge.colorPrimaryActive},[`&${Ce}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${Ye}-button`]:{height:ge.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${Ye}-button`]:{height:ge.controlHeightLG},[`&-small ${Ye}-button`]:{height:ge.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${be}-compact-item`]:{[`&:not(${be}-compact-last-item)`]:{[`${be}-group-addon`]:{[`${be}-search-button`]:{marginInlineEnd:-ge.lineWidth,borderRadius:0}}},[`&:not(${be}-compact-first-item)`]:{[`${be},${be}-affix-wrapper`]:{borderRadius:0}},[`> ${be}-group-addon ${be}-search-button,
        > ${be},
        ${be}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${be}-affix-wrapper-focused`]:{zIndex:2}}}}},ke=ge=>{const{componentCls:be,paddingLG:Ce}=ge,Ye=`${be}-textarea`;return{[Ye]:{position:"relative","&-show-count":{[`> ${be}`]:{height:"100%"},[`${be}-data-count`]:{position:"absolute",bottom:-ge.fontSize*ge.lineHeight,insetInlineEnd:0,color:ge.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},"&-allow-clear":{[`> ${be}`]:{paddingInlineEnd:Ce}},[`&-affix-wrapper${Ye}-has-feedback`]:{[`${be}`]:{paddingInlineEnd:Ce}},[`&-affix-wrapper${be}-affix-wrapper`]:{padding:0,[`> textarea${be}`]:{fontSize:"inherit",border:"none",outline:"none","&:focus":{boxShadow:"none !important"}},[`${be}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${be}-clear-icon`]:{position:"absolute",insetInlineEnd:ge.paddingXS,insetBlockStart:ge.paddingXS},[`${Ye}-suffix`]:{position:"absolute",top:0,insetInlineEnd:ge.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},Pe=ge=>{const{componentCls:be}=ge;return{[`${be}-out-of-range`]:{[`&, & input, & textarea, ${be}-show-count-suffix, ${be}-data-count`]:{color:ge.colorError}}}};function Le(ge){return(0,w.mergeToken)(ge,{inputAffixPadding:ge.paddingXXS})}const tt=ge=>{const{controlHeight:be,fontSize:Ce,lineHeight:Ye,lineWidth:je,controlHeightSM:Et,controlHeightLG:Ae,fontSizeLG:Qe,lineHeightLG:te,paddingSM:Ze,controlPaddingHorizontalSM:ie,controlPaddingHorizontal:Oe,colorFillAlter:nt,colorPrimaryHover:ye,colorPrimary:Te,controlOutlineWidth:Je,controlOutline:pe,colorErrorOutline:Me,colorWarningOutline:ze}=ge;return{paddingBlock:Math.max(Math.round((be-Ce*Ye)/2*10)/10-je,0),paddingBlockSM:Math.max(Math.round((Et-Ce*Ye)/2*10)/10-je,0),paddingBlockLG:Math.ceil((Ae-Qe*te)/2*10)/10-je,paddingInline:Ze-je,paddingInlineSM:ie-je,paddingInlineLG:Oe-je,addonBg:nt,activeBorderColor:Te,hoverBorderColor:ye,activeShadow:`0 0 0 ${Je}px ${pe}`,errorActiveShadow:`0 0 0 ${Je}px ${Me}`,warningActiveShadow:`0 0 0 ${Je}px ${ze}`,hoverBg:"",activeBg:""}};N.initComponentToken=tt;var ft=N.default=(0,w.genComponentStyleHook)("Input",ge=>{const be=(0,w.mergeToken)(ge,Le(ge));return[J(be),ke(be),E(be),fe(be),me(be),Pe(be),(0,X.genCompactItemStyle)(be)]},tt)},36714:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.hasPrefixSuffix=F;function F($){return!!($.prefix||$.suffix||$.allowClear)}},44805:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var $=F(67294);const X=(0,$.createContext)(void 0);var w=N.default=X},18253:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var X=$(F(62273)),w=$(F(1028)),Y=$(F(25633)),G=$(F(52040));const K="${label} is not a valid ${type}",Q={locale:"en",Pagination:X.default,DatePicker:Y.default,TimePicker:G.default,Calendar:w.default,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:K,method:K,array:K,object:K,number:K,date:K,boolean:K,integer:K,float:K,regexp:K,email:K,url:K,hex:K},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"},ColorPicker:{presetEmpty:"Empty"}};var oe=N.default=Q},24522:function(xt,N,F){"use strict";"use client";var $=F(64836).default,X=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=N.ANT_MARK=void 0,Object.defineProperty(N,"useLocale",{enumerable:!0,get:function(){return Q.default}});var w=X(F(67294)),Y=F(13594),G=F(10625),K=$(F(44805)),Q=$(F(76647));const oe=N.ANT_MARK="internalMark",ee=ce=>{const{locale:he={},children:J,_ANT_MARK__:M}=ce;w.useEffect(()=>(0,G.changeConfirmLocale)(he&&he.Modal),[he]);const E=w.useMemo(()=>Object.assign(Object.assign({},he),{exist:!0}),[he]);return w.createElement(K.default.Provider,{value:E},J)};var xe=N.default=ee},76647:function(xt,N,F){"use strict";var $=F(64836).default,X=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var w=X(F(67294)),Y=$(F(44805)),G=$(F(18253));const K=(oe,ee)=>{const xe=w.useContext(Y.default),ce=w.useMemo(()=>{var J;const M=ee||G.default[oe],E=(J=xe==null?void 0:xe[oe])!==null&&J!==void 0?J:{};return Object.assign(Object.assign({},typeof M=="function"?M():M),E||{})},[oe,ee,xe]),he=w.useMemo(()=>{const J=xe==null?void 0:xe.locale;return xe!=null&&xe.exist&&!J?G.default.locale:J},[xe]);return[ce,he]};var Q=N.default=K},10625:function(xt,N,F){"use strict";"use client";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.changeConfirmLocale=K,N.getConfirmLocale=Q;var X=$(F(18253));let w=Object.assign({},X.default.Modal),Y=[];const G=()=>Y.reduce((oe,ee)=>Object.assign(Object.assign({},oe),ee),X.default.Modal);function K(oe){if(oe){const ee=Object.assign({},oe);return Y.push(ee),w=G(),()=>{Y=Y.filter(xe=>xe!==ee),w=G()}}w=Object.assign({},X.default.Modal)}function Q(){return w}},46549:function(xt,N,F){"use strict";"use client";var $=F(75263).default,X=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.useCompactItemContext=N.default=N.SpaceCompactItemContext=N.NoCompactStyle=void 0;var w=X(F(94184)),Y=X(F(45598)),G=$(F(67294)),K=F(31929),Q=X(F(65693)),oe=X(F(54277)),ee=function(fe,me){var ke={};for(var Pe in fe)Object.prototype.hasOwnProperty.call(fe,Pe)&&me.indexOf(Pe)<0&&(ke[Pe]=fe[Pe]);if(fe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Le=0,Pe=Object.getOwnPropertySymbols(fe);Le<Pe.length;Le++)me.indexOf(Pe[Le])<0&&Object.prototype.propertyIsEnumerable.call(fe,Pe[Le])&&(ke[Pe[Le]]=fe[Pe[Le]]);return ke};const xe=N.SpaceCompactItemContext=G.createContext(null),ce=(fe,me)=>{const ke=G.useContext(xe),Pe=G.useMemo(()=>{if(!ke)return"";const{compactDirection:Le,isFirstItem:tt,isLastItem:ft}=ke,ge=Le==="vertical"?"-vertical-":"-";return(0,w.default)(`${fe}-compact${ge}item`,{[`${fe}-compact${ge}first-item`]:tt,[`${fe}-compact${ge}last-item`]:ft,[`${fe}-compact${ge}item-rtl`]:me==="rtl"})},[fe,me,ke]);return{compactSize:ke==null?void 0:ke.compactSize,compactDirection:ke==null?void 0:ke.compactDirection,compactItemClassnames:Pe}};N.useCompactItemContext=ce;const he=fe=>{let{children:me}=fe;return G.createElement(xe.Provider,{value:null},me)};N.NoCompactStyle=he;const J=fe=>{var{children:me}=fe,ke=ee(fe,["children"]);return G.createElement(xe.Provider,{value:ke},me)},M=fe=>{const{getPrefixCls:me,direction:ke}=G.useContext(K.ConfigContext),{size:Pe,direction:Le,block:tt,prefixCls:ft,className:ge,rootClassName:be,children:Ce}=fe,Ye=ee(fe,["size","direction","block","prefixCls","className","rootClassName","children"]),je=(0,Q.default)(nt=>Pe!=null?Pe:nt),Et=me("space-compact",ft),[Ae,Qe]=(0,oe.default)(Et),te=(0,w.default)(Et,Qe,{[`${Et}-rtl`]:ke==="rtl",[`${Et}-block`]:tt,[`${Et}-vertical`]:Le==="vertical"},ge,be),Ze=G.useContext(xe),ie=(0,Y.default)(Ce),Oe=G.useMemo(()=>ie.map((nt,ye)=>{const Te=nt&&nt.key||`${Et}-item-${ye}`;return G.createElement(J,{key:Te,compactSize:je,compactDirection:Le,isFirstItem:ye===0&&(!Ze||(Ze==null?void 0:Ze.isFirstItem)),isLastItem:ye===ie.length-1&&(!Ze||(Ze==null?void 0:Ze.isLastItem))},nt)}),[Pe,ie,Ze]);return ie.length===0?null:Ae(G.createElement("div",Object.assign({className:te},Ye),Oe))};var E=N.default=M},35969:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const F=X=>{const{componentCls:w}=X;return{[w]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}};var $=N.default=F},54277:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var X=F(3184),w=$(F(35969));const Y=Q=>{const{componentCls:oe}=Q;return{[oe]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${oe}-item:empty`]:{display:"none"}}}},G=Q=>{const{componentCls:oe}=Q;return{[oe]:{"&-gap-row-small":{rowGap:Q.spaceGapSmallSize},"&-gap-row-middle":{rowGap:Q.spaceGapMiddleSize},"&-gap-row-large":{rowGap:Q.spaceGapLargeSize},"&-gap-col-small":{columnGap:Q.spaceGapSmallSize},"&-gap-col-middle":{columnGap:Q.spaceGapMiddleSize},"&-gap-col-large":{columnGap:Q.spaceGapLargeSize}}}};var K=N.default=(0,X.genComponentStyleHook)("Space",Q=>{const oe=(0,X.mergeToken)(Q,{spaceGapSmallSize:Q.paddingXS,spaceGapMiddleSize:Q.padding,spaceGapLargeSize:Q.paddingLG});return[Y(oe),G(oe),(0,w.default)(oe)]},()=>({}),{resetStyle:!1})},78793:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.genCompactItemStyle=X;function F(w,Y,G){const{focusElCls:K,focus:Q,borderElCls:oe}=G,ee=oe?"> *":"",xe=["hover",Q?"focus":null,"active"].filter(Boolean).map(ce=>`&:${ce} ${ee}`).join(",");return{[`&-item:not(${Y}-last-item)`]:{marginInlineEnd:-w.lineWidth},"&-item":Object.assign(Object.assign({[xe]:{zIndex:2}},K?{[`&${K}`]:{zIndex:2}}:{}),{[`&[disabled] ${ee}`]:{zIndex:0}})}}function $(w,Y,G){const{borderElCls:K}=G,Q=K?`> ${K}`:"";return{[`&-item:not(${Y}-first-item):not(${Y}-last-item) ${Q}`]:{borderRadius:0},[`&-item:not(${Y}-last-item)${Y}-first-item`]:{[`& ${Q}, &${w}-sm ${Q}, &${w}-lg ${Q}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${Y}-first-item)${Y}-last-item`]:{[`& ${Q}, &${w}-sm ${Q}, &${w}-lg ${Q}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function X(w){let Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:G}=w,K=`${G}-compact`;return{[K]:Object.assign(Object.assign({},F(w,K,Y)),$(G,K,Y))}}},98078:function(xt,N,F){"use strict";"use client";Object.defineProperty(N,"__esModule",{value:!0}),N.genLinkStyle=N.genFocusStyle=N.genFocusOutline=N.genCommonStyle=N.clearFix=void 0,Object.defineProperty(N,"operationUnit",{enumerable:!0,get:function(){return $.operationUnit}}),N.resetIcon=N.resetComponent=void 0,Object.defineProperty(N,"roundedArrow",{enumerable:!0,get:function(){return X.roundedArrow}}),N.textEllipsis=void 0;var $=F(22548),X=F(51337);const w=N.textEllipsis={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},Y=function(ce){let he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:ce.colorText,fontSize:ce.fontSize,lineHeight:ce.lineHeight,listStyle:"none",fontFamily:he?"inherit":ce.fontFamily}};N.resetComponent=Y;const G=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}});N.resetIcon=G;const K=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}});N.clearFix=K;const Q=ce=>({a:{color:ce.colorLink,textDecoration:ce.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${ce.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:ce.colorLinkHover},"&:active":{color:ce.colorLinkActive},[`&:active,
  &:hover`]:{textDecoration:ce.linkHoverDecoration,outline:0},"&:focus":{textDecoration:ce.linkFocusDecoration,outline:0},"&[disabled]":{color:ce.colorTextDisabled,cursor:"not-allowed"}}});N.genLinkStyle=Q;const oe=(ce,he)=>{const{fontFamily:J,fontSize:M}=ce,E=`[class^="${he}"], [class*=" ${he}"]`;return{[E]:{fontFamily:J,fontSize:M,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[E]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}};N.genCommonStyle=oe;const ee=ce=>({outline:`${ce.lineWidthFocus}px solid ${ce.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"});N.genFocusOutline=ee;const xe=ce=>({"&:focus-visible":Object.assign({},ee(ce))});N.genFocusStyle=xe},57253:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const F=X=>({[X.componentCls]:{[`${X.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${X.motionDurationMid} ${X.motionEaseInOut},
        opacity ${X.motionDurationMid} ${X.motionEaseInOut} !important`}},[`${X.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${X.motionDurationMid} ${X.motionEaseInOut},
        opacity ${X.motionDurationMid} ${X.motionEaseInOut} !important`}}});var $=N.default=F},84460:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.initFadeMotion=N.fadeOut=N.fadeIn=void 0;var $=F(88623),X=F(94631);const w=N.fadeIn=new $.Keyframes("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),Y=N.fadeOut=new $.Keyframes("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),G=function(K){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:oe}=K,ee=`${oe}-fade`,xe=Q?"&":"";return[(0,X.initMotion)(ee,w,Y,K.motionDurationMid,Q),{[`
        ${xe}${ee}-enter,
        ${xe}${ee}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${xe}${ee}-leave`]:{animationTimingFunction:"linear"}}]};N.initFadeMotion=G},42836:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"fadeIn",{enumerable:!0,get:function(){return X.fadeIn}}),Object.defineProperty(N,"fadeOut",{enumerable:!0,get:function(){return X.fadeOut}}),Object.defineProperty(N,"genCollapseMotion",{enumerable:!0,get:function(){return K.default}}),Object.defineProperty(N,"initFadeMotion",{enumerable:!0,get:function(){return X.initFadeMotion}}),Object.defineProperty(N,"initMoveMotion",{enumerable:!0,get:function(){return w.initMoveMotion}}),Object.defineProperty(N,"initSlideMotion",{enumerable:!0,get:function(){return Y.initSlideMotion}}),Object.defineProperty(N,"initZoomMotion",{enumerable:!0,get:function(){return G.initZoomMotion}}),Object.defineProperty(N,"moveDownIn",{enumerable:!0,get:function(){return w.moveDownIn}}),Object.defineProperty(N,"moveDownOut",{enumerable:!0,get:function(){return w.moveDownOut}}),Object.defineProperty(N,"moveLeftIn",{enumerable:!0,get:function(){return w.moveLeftIn}}),Object.defineProperty(N,"moveLeftOut",{enumerable:!0,get:function(){return w.moveLeftOut}}),Object.defineProperty(N,"moveRightIn",{enumerable:!0,get:function(){return w.moveRightIn}}),Object.defineProperty(N,"moveRightOut",{enumerable:!0,get:function(){return w.moveRightOut}}),Object.defineProperty(N,"moveUpIn",{enumerable:!0,get:function(){return w.moveUpIn}}),Object.defineProperty(N,"moveUpOut",{enumerable:!0,get:function(){return w.moveUpOut}}),Object.defineProperty(N,"slideDownIn",{enumerable:!0,get:function(){return Y.slideDownIn}}),Object.defineProperty(N,"slideDownOut",{enumerable:!0,get:function(){return Y.slideDownOut}}),Object.defineProperty(N,"slideLeftIn",{enumerable:!0,get:function(){return Y.slideLeftIn}}),Object.defineProperty(N,"slideLeftOut",{enumerable:!0,get:function(){return Y.slideLeftOut}}),Object.defineProperty(N,"slideRightIn",{enumerable:!0,get:function(){return Y.slideRightIn}}),Object.defineProperty(N,"slideRightOut",{enumerable:!0,get:function(){return Y.slideRightOut}}),Object.defineProperty(N,"slideUpIn",{enumerable:!0,get:function(){return Y.slideUpIn}}),Object.defineProperty(N,"slideUpOut",{enumerable:!0,get:function(){return Y.slideUpOut}}),Object.defineProperty(N,"zoomBigIn",{enumerable:!0,get:function(){return G.zoomBigIn}}),Object.defineProperty(N,"zoomBigOut",{enumerable:!0,get:function(){return G.zoomBigOut}}),Object.defineProperty(N,"zoomDownIn",{enumerable:!0,get:function(){return G.zoomDownIn}}),Object.defineProperty(N,"zoomDownOut",{enumerable:!0,get:function(){return G.zoomDownOut}}),Object.defineProperty(N,"zoomIn",{enumerable:!0,get:function(){return G.zoomIn}}),Object.defineProperty(N,"zoomLeftIn",{enumerable:!0,get:function(){return G.zoomLeftIn}}),Object.defineProperty(N,"zoomLeftOut",{enumerable:!0,get:function(){return G.zoomLeftOut}}),Object.defineProperty(N,"zoomOut",{enumerable:!0,get:function(){return G.zoomOut}}),Object.defineProperty(N,"zoomRightIn",{enumerable:!0,get:function(){return G.zoomRightIn}}),Object.defineProperty(N,"zoomRightOut",{enumerable:!0,get:function(){return G.zoomRightOut}}),Object.defineProperty(N,"zoomUpIn",{enumerable:!0,get:function(){return G.zoomUpIn}}),Object.defineProperty(N,"zoomUpOut",{enumerable:!0,get:function(){return G.zoomUpOut}});var X=F(84460),w=F(17060),Y=F(17581),G=F(99269),K=$(F(57253))},94631:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.initMotion=void 0;const F=w=>({animationDuration:w,animationFillMode:"both"}),$=w=>({animationDuration:w,animationFillMode:"both"}),X=function(w,Y,G,K){const oe=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${oe}${w}-enter,
      ${oe}${w}-appear
    `]:Object.assign(Object.assign({},F(K)),{animationPlayState:"paused"}),[`${oe}${w}-leave`]:Object.assign(Object.assign({},$(K)),{animationPlayState:"paused"}),[`
      ${oe}${w}-enter${w}-enter-active,
      ${oe}${w}-appear${w}-appear-active
    `]:{animationName:Y,animationPlayState:"running"},[`${oe}${w}-leave${w}-leave-active`]:{animationName:G,animationPlayState:"running",pointerEvents:"none"}}};N.initMotion=X},17060:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.moveUpOut=N.moveUpIn=N.moveRightOut=N.moveRightIn=N.moveLeftOut=N.moveLeftIn=N.moveDownOut=N.moveDownIn=N.initMoveMotion=void 0;var $=F(88623),X=F(94631);const w=N.moveDownIn=new $.Keyframes("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),Y=N.moveDownOut=new $.Keyframes("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),G=N.moveLeftIn=new $.Keyframes("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),K=N.moveLeftOut=new $.Keyframes("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),Q=N.moveRightIn=new $.Keyframes("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),oe=N.moveRightOut=new $.Keyframes("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),ee=N.moveUpIn=new $.Keyframes("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),xe=N.moveUpOut=new $.Keyframes("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),ce={"move-up":{inKeyframes:ee,outKeyframes:xe},"move-down":{inKeyframes:w,outKeyframes:Y},"move-left":{inKeyframes:G,outKeyframes:K},"move-right":{inKeyframes:Q,outKeyframes:oe}},he=(J,M)=>{const{antCls:E}=J,fe=`${E}-${M}`,{inKeyframes:me,outKeyframes:ke}=ce[M];return[(0,X.initMotion)(fe,me,ke,J.motionDurationMid),{[`
        ${fe}-enter,
        ${fe}-appear
      `]:{opacity:0,animationTimingFunction:J.motionEaseOutCirc},[`${fe}-leave`]:{animationTimingFunction:J.motionEaseInOutCirc}}]};N.initMoveMotion=he},17581:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.slideUpOut=N.slideUpIn=N.slideRightOut=N.slideRightIn=N.slideLeftOut=N.slideLeftIn=N.slideDownOut=N.slideDownIn=N.initSlideMotion=void 0;var $=F(88623),X=F(94631);const w=N.slideUpIn=new $.Keyframes("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),Y=N.slideUpOut=new $.Keyframes("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),G=N.slideDownIn=new $.Keyframes("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),K=N.slideDownOut=new $.Keyframes("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),Q=N.slideLeftIn=new $.Keyframes("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),oe=N.slideLeftOut=new $.Keyframes("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),ee=N.slideRightIn=new $.Keyframes("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),xe=N.slideRightOut=new $.Keyframes("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),ce={"slide-up":{inKeyframes:w,outKeyframes:Y},"slide-down":{inKeyframes:G,outKeyframes:K},"slide-left":{inKeyframes:Q,outKeyframes:oe},"slide-right":{inKeyframes:ee,outKeyframes:xe}},he=(J,M)=>{const{antCls:E}=J,fe=`${E}-${M}`,{inKeyframes:me,outKeyframes:ke}=ce[M];return[(0,X.initMotion)(fe,me,ke,J.motionDurationMid),{[`
      ${fe}-enter,
      ${fe}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:J.motionEaseOutQuint,["&-prepare"]:{transform:"scale(1)"}},[`${fe}-leave`]:{animationTimingFunction:J.motionEaseInQuint}}]};N.initSlideMotion=he},99269:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.zoomUpOut=N.zoomUpIn=N.zoomRightOut=N.zoomRightIn=N.zoomOut=N.zoomLeftOut=N.zoomLeftIn=N.zoomIn=N.zoomDownOut=N.zoomDownIn=N.zoomBigOut=N.zoomBigIn=N.initZoomMotion=void 0;var $=F(88623),X=F(94631);const w=N.zoomIn=new $.Keyframes("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),Y=N.zoomOut=new $.Keyframes("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),G=N.zoomBigIn=new $.Keyframes("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),K=N.zoomBigOut=new $.Keyframes("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),Q=N.zoomUpIn=new $.Keyframes("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),oe=N.zoomUpOut=new $.Keyframes("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),ee=N.zoomLeftIn=new $.Keyframes("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),xe=N.zoomLeftOut=new $.Keyframes("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),ce=N.zoomRightIn=new $.Keyframes("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),he=N.zoomRightOut=new $.Keyframes("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),J=N.zoomDownIn=new $.Keyframes("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),M=N.zoomDownOut=new $.Keyframes("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),E={zoom:{inKeyframes:w,outKeyframes:Y},"zoom-big":{inKeyframes:G,outKeyframes:K},"zoom-big-fast":{inKeyframes:G,outKeyframes:K},"zoom-left":{inKeyframes:ee,outKeyframes:xe},"zoom-right":{inKeyframes:ce,outKeyframes:he},"zoom-up":{inKeyframes:Q,outKeyframes:oe},"zoom-down":{inKeyframes:J,outKeyframes:M}},fe=(me,ke)=>{const{antCls:Pe}=me,Le=`${Pe}-${ke}`,{inKeyframes:tt,outKeyframes:ft}=E[ke];return[(0,X.initMotion)(Le,tt,ft,ke==="zoom-big-fast"?me.motionDurationFast:me.motionDurationMid),{[`
        ${Le}-enter,
        ${Le}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:me.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${Le}-leave`]:{animationTimingFunction:me.motionEaseInOutCirc}}]};N.initZoomMotion=fe},22548:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.operationUnit=void 0;const F=$=>({color:$.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${$.motionDurationSlow}`,"&:focus, &:hover":{color:$.colorLinkHover},"&:active":{color:$.colorLinkActive}});N.operationUnit=F},9064:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.MAX_VERTICAL_CONTENT_RADIUS=void 0,N.default=G,N.getArrowOffset=w;var $=F(51337);const X=N.MAX_VERTICAL_CONTENT_RADIUS=8;function w(K){const Q=X,{contentRadius:oe,limitVerticalRadius:ee}=K,xe=oe>12?oe+2:12;return{dropdownArrowOffset:xe,dropdownArrowOffsetVertical:ee?Q:xe}}function Y(K,Q){return K?Q:{}}function G(K,Q){const{componentCls:oe,sizePopupArrow:ee,borderRadiusXS:xe,borderRadiusOuter:ce,boxShadowPopoverArrow:he}=K,{colorBg:J,contentRadius:M=K.borderRadiusLG,limitVerticalRadius:E,arrowDistance:fe=0,arrowPlacement:me={left:!0,right:!0,top:!0,bottom:!0}}=Q,{dropdownArrowOffsetVertical:ke,dropdownArrowOffset:Pe}=w({contentRadius:M,limitVerticalRadius:E});return{[oe]:Object.assign(Object.assign(Object.assign(Object.assign({[`${oe}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},(0,$.roundedArrow)(ee,xe,ce,J,he)),{"&:before":{background:J}})]},Y(!!me.top,{[[`&-placement-top ${oe}-arrow`,`&-placement-topLeft ${oe}-arrow`,`&-placement-topRight ${oe}-arrow`].join(",")]:{bottom:fe,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top ${oe}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft ${oe}-arrow`]:{left:{_skip_check_:!0,value:Pe}},[`&-placement-topRight ${oe}-arrow`]:{right:{_skip_check_:!0,value:Pe}}})),Y(!!me.bottom,{[[`&-placement-bottom ${oe}-arrow`,`&-placement-bottomLeft ${oe}-arrow`,`&-placement-bottomRight ${oe}-arrow`].join(",")]:{top:fe,transform:"translateY(-100%)"},[`&-placement-bottom ${oe}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft ${oe}-arrow`]:{left:{_skip_check_:!0,value:Pe}},[`&-placement-bottomRight ${oe}-arrow`]:{right:{_skip_check_:!0,value:Pe}}})),Y(!!me.left,{[[`&-placement-left ${oe}-arrow`,`&-placement-leftTop ${oe}-arrow`,`&-placement-leftBottom ${oe}-arrow`].join(",")]:{right:{_skip_check_:!0,value:fe},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left ${oe}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop ${oe}-arrow`]:{top:ke},[`&-placement-leftBottom ${oe}-arrow`]:{bottom:ke}})),Y(!!me.right,{[[`&-placement-right ${oe}-arrow`,`&-placement-rightTop ${oe}-arrow`,`&-placement-rightBottom ${oe}-arrow`].join(",")]:{left:{_skip_check_:!0,value:fe},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right ${oe}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop ${oe}-arrow`]:{top:ke},[`&-placement-rightBottom ${oe}-arrow`]:{bottom:ke}}))}}},51337:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.roundedArrow=void 0;const F=($,X,w,Y,G)=>{const K=$/2,Q=0,oe=K,ee=w*1/Math.sqrt(2),xe=K-w*(1-1/Math.sqrt(2)),ce=K-X*(1/Math.sqrt(2)),he=w*(Math.sqrt(2)-1)+X*(1/Math.sqrt(2)),J=2*K-ce,M=he,E=2*K-ee,fe=xe,me=2*K-Q,ke=oe,Pe=K*Math.sqrt(2)+w*(Math.sqrt(2)-2),Le=w*(Math.sqrt(2)-1);return{pointerEvents:"none",width:$,height:$,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:$,height:$/2,background:Y,clipPath:{_multi_value_:!0,value:[`polygon(${Le}px 100%, 50% ${Le}px, ${2*K-Le}px 100%, ${Le}px 100%)`,`path('M ${Q} ${oe} A ${w} ${w} 0 0 0 ${ee} ${xe} L ${ce} ${he} A ${X} ${X} 0 0 1 ${J} ${M} L ${E} ${fe} A ${w} ${w} 0 0 0 ${me} ${ke} Z')`]},content:'""'},"&::after":{content:'""',position:"absolute",width:Pe,height:Pe,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${X}px 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:G,zIndex:0,background:"transparent"}}};N.roundedArrow=F},89329:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.defaultTheme=N.defaultConfig=N.DesignTokenContext=void 0;var X=$(F(67294)),w=F(88623),Y=$(F(91085)),G=$(F(98411));const K=N.defaultTheme=(0,w.createTheme)(Y.default),Q=N.defaultConfig={token:G.default,override:{override:G.default},hashed:!0},oe=N.DesignTokenContext=X.default.createContext(Q)},36496:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"PresetColors",{enumerable:!0,get:function(){return $.PresetColors}});var $=F(81342)},81342:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.PresetColors=void 0;const F=N.PresetColors=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"]},3184:function(xt,N,F){"use strict";var $=F(75263).default,X=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"DesignTokenContext",{enumerable:!0,get:function(){return xe.DesignTokenContext}}),Object.defineProperty(N,"PresetColors",{enumerable:!0,get:function(){return Y.PresetColors}}),Object.defineProperty(N,"defaultConfig",{enumerable:!0,get:function(){return xe.defaultConfig}}),Object.defineProperty(N,"genComponentStyleHook",{enumerable:!0,get:function(){return K.default}}),Object.defineProperty(N,"genPresetColor",{enumerable:!0,get:function(){return Q.default}}),Object.defineProperty(N,"genSubStyleComponent",{enumerable:!0,get:function(){return K.genSubStyleComponent}}),Object.defineProperty(N,"mergeToken",{enumerable:!0,get:function(){return oe.merge}}),Object.defineProperty(N,"statisticToken",{enumerable:!0,get:function(){return oe.default}}),Object.defineProperty(N,"useResetIconStyle",{enumerable:!0,get:function(){return ee.default}}),Object.defineProperty(N,"useStyleRegister",{enumerable:!0,get:function(){return w.useStyleRegister}}),Object.defineProperty(N,"useToken",{enumerable:!0,get:function(){return G.default}});var w=F(88623),Y=F(36496),G=X(F(41401)),K=$(F(3737)),Q=X(F(36219)),oe=$(F(99636)),ee=X(F(54894)),xe=F(89329)},26162:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.getSolidColor=N.getAlphaColor=void 0;var $=F(131);const X=(Y,G)=>new $.TinyColor(Y).setAlpha(G).toRgbString();N.getAlphaColor=X;const w=(Y,G)=>new $.TinyColor(Y).darken(G).toHexString();N.getSolidColor=w},80373:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.generateNeutralColorPalettes=N.generateColorPalettes=void 0;var $=F(78589),X=F(26162);const w=G=>{const K=(0,$.generate)(G);return{1:K[0],2:K[1],3:K[2],4:K[3],5:K[4],6:K[5],7:K[6],8:K[4],9:K[5],10:K[6]}};N.generateColorPalettes=w;const Y=(G,K)=>{const Q=G||"#fff",oe=K||"#000";return{colorBgBase:Q,colorTextBase:oe,colorText:(0,X.getAlphaColor)(oe,.88),colorTextSecondary:(0,X.getAlphaColor)(oe,.65),colorTextTertiary:(0,X.getAlphaColor)(oe,.45),colorTextQuaternary:(0,X.getAlphaColor)(oe,.25),colorFill:(0,X.getAlphaColor)(oe,.15),colorFillSecondary:(0,X.getAlphaColor)(oe,.06),colorFillTertiary:(0,X.getAlphaColor)(oe,.04),colorFillQuaternary:(0,X.getAlphaColor)(oe,.02),colorBgLayout:(0,X.getSolidColor)(Q,4),colorBgContainer:(0,X.getSolidColor)(Q,0),colorBgElevated:(0,X.getSolidColor)(Q,0),colorBgSpotlight:(0,X.getAlphaColor)(oe,.85),colorBgBlur:"transparent",colorBorder:(0,X.getSolidColor)(Q,15),colorBorderSecondary:(0,X.getSolidColor)(Q,6)}};N.generateNeutralColorPalettes=Y},91085:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=xe;var X=F(78589),w=$(F(54730)),Y=$(F(19216)),G=F(98411),K=$(F(10805)),Q=$(F(81594)),oe=F(80373),ee=$(F(69853));function xe(ce){const he=Object.keys(G.defaultPresetColors).map(J=>{const M=(0,X.generate)(ce[J]);return new Array(10).fill(1).reduce((E,fe,me)=>(E[`${J}-${me+1}`]=M[me],E[`${J}${me+1}`]=M[me],E),{})}).reduce((J,M)=>(J=Object.assign(Object.assign({},J),M),J),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ce),he),(0,K.default)(ce,{generateColorPalettes:oe.generateColorPalettes,generateNeutralColorPalettes:oe.generateNeutralColorPalettes})),(0,ee.default)(ce.fontSize)),(0,Y.default)(ce)),(0,w.default)(ce)),(0,Q.default)(ce))}},98411:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.defaultPresetColors=N.default=void 0;const F=N.defaultPresetColors={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},$=Object.assign(Object.assign({},F),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});var X=N.default=$},10805:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=X;var $=F(131);function X(w,Y){let{generateColorPalettes:G,generateNeutralColorPalettes:K}=Y;const{colorSuccess:Q,colorWarning:oe,colorError:ee,colorInfo:xe,colorPrimary:ce,colorBgBase:he,colorTextBase:J}=w,M=G(ce),E=G(Q),fe=G(oe),me=G(ee),ke=G(xe),Pe=K(he,J),Le=w.colorLink||w.colorInfo,tt=G(Le);return Object.assign(Object.assign({},Pe),{colorPrimaryBg:M[1],colorPrimaryBgHover:M[2],colorPrimaryBorder:M[3],colorPrimaryBorderHover:M[4],colorPrimaryHover:M[5],colorPrimary:M[6],colorPrimaryActive:M[7],colorPrimaryTextHover:M[8],colorPrimaryText:M[9],colorPrimaryTextActive:M[10],colorSuccessBg:E[1],colorSuccessBgHover:E[2],colorSuccessBorder:E[3],colorSuccessBorderHover:E[4],colorSuccessHover:E[4],colorSuccess:E[6],colorSuccessActive:E[7],colorSuccessTextHover:E[8],colorSuccessText:E[9],colorSuccessTextActive:E[10],colorErrorBg:me[1],colorErrorBgHover:me[2],colorErrorBorder:me[3],colorErrorBorderHover:me[4],colorErrorHover:me[5],colorError:me[6],colorErrorActive:me[7],colorErrorTextHover:me[8],colorErrorText:me[9],colorErrorTextActive:me[10],colorWarningBg:fe[1],colorWarningBgHover:fe[2],colorWarningBorder:fe[3],colorWarningBorderHover:fe[4],colorWarningHover:fe[4],colorWarning:fe[6],colorWarningActive:fe[7],colorWarningTextHover:fe[8],colorWarningText:fe[9],colorWarningTextActive:fe[10],colorInfoBg:ke[1],colorInfoBgHover:ke[2],colorInfoBorder:ke[3],colorInfoBorderHover:ke[4],colorInfoHover:ke[4],colorInfo:ke[6],colorInfoActive:ke[7],colorInfoTextHover:ke[8],colorInfoText:ke[9],colorInfoTextActive:ke[10],colorLinkHover:tt[4],colorLink:tt[6],colorLinkActive:tt[7],colorBgMask:new $.TinyColor("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}},81594:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=w;var X=$(F(78117));function w(Y){const{motionUnit:G,motionBase:K,borderRadius:Q,lineWidth:oe}=Y;return Object.assign({motionDurationFast:`${(K+G).toFixed(1)}s`,motionDurationMid:`${(K+G*2).toFixed(1)}s`,motionDurationSlow:`${(K+G*3).toFixed(1)}s`,lineWidthBold:oe+1},(0,X.default)(Q))}},54730:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const F=X=>{const{controlHeight:w}=X;return{controlHeightSM:w*.75,controlHeightXS:w*.5,controlHeightLG:w*1.25}};var $=N.default=F},69853:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var X=$(F(62231));const w=G=>{const K=(0,X.default)(G),Q=K.map(ee=>ee.size),oe=K.map(ee=>ee.lineHeight);return{fontSizeSM:Q[0],fontSize:Q[1],fontSizeLG:Q[2],fontSizeXL:Q[3],fontSizeHeading1:Q[6],fontSizeHeading2:Q[5],fontSizeHeading3:Q[4],fontSizeHeading4:Q[3],fontSizeHeading5:Q[2],lineHeight:oe[1],lineHeightLG:oe[2],lineHeightSM:oe[0],lineHeightHeading1:oe[6],lineHeightHeading2:oe[5],lineHeightHeading3:oe[4],lineHeightHeading4:oe[3],lineHeightHeading5:oe[2]}};var Y=N.default=w},62231:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=F;function F($){const X=new Array(10).fill(null).map((w,Y)=>{const G=Y-1,K=$*Math.pow(2.71828,G/5),Q=Y>1?Math.floor(K):Math.ceil(K);return Math.floor(Q/2)*2});return X[1]=$,X.map(w=>{const Y=w+8;return{size:w,lineHeight:Y/w}})}},78117:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const F=X=>{let w=X,Y=X,G=X,K=X;return X<6&&X>=5?w=X+1:X<16&&X>=6?w=X+2:X>=16&&(w=16),X<7&&X>=5?Y=4:X<8&&X>=7?Y=5:X<14&&X>=8?Y=6:X<16&&X>=14?Y=7:X>=16&&(Y=8),X<6&&X>=2?G=1:X>=6&&(G=2),X>4&&X<8?K=4:X>=8&&(K=6),{borderRadius:X,borderRadiusXS:G,borderRadiusSM:Y,borderRadiusLG:w,borderRadiusOuter:K}};var $=N.default=F},19216:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=F;function F($){const{sizeUnit:X,sizeStep:w}=$;return{sizeXXL:X*(w+8),sizeXL:X*(w+4),sizeLG:X*(w+2),sizeMD:X*(w+1),sizeMS:X*w,size:X*w,sizeSM:X*(w-1),sizeXS:X*(w-2),sizeXXS:X*(w-3)}}},41401:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=xe,N.getComputedToken=void 0;var X=$(F(67294)),w=F(88623),Y=$(F(87629)),G=F(89329),K=$(F(98411)),Q=$(F(27722)),oe=function(ce,he){var J={};for(var M in ce)Object.prototype.hasOwnProperty.call(ce,M)&&he.indexOf(M)<0&&(J[M]=ce[M]);if(ce!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,M=Object.getOwnPropertySymbols(ce);E<M.length;E++)he.indexOf(M[E])<0&&Object.prototype.propertyIsEnumerable.call(ce,M[E])&&(J[M[E]]=ce[M[E]]);return J};const ee=(ce,he,J)=>{const M=J.getDerivativeToken(ce),{override:E}=he,fe=oe(he,["override"]);let me=Object.assign(Object.assign({},M),{override:E});return me=(0,Q.default)(me),fe&&Object.entries(fe).forEach(ke=>{let[Pe,Le]=ke;const{theme:tt}=Le,ft=oe(Le,["theme"]);let ge=ft;tt&&(ge=ee(Object.assign(Object.assign({},me),ft),{override:ft},tt)),me[Pe]=ge}),me};N.getComputedToken=ee;function xe(){const{token:ce,hashed:he,theme:J,override:M}=X.default.useContext(G.DesignTokenContext),E=`${Y.default}-${he||""}`,fe=J||G.defaultTheme,[me,ke]=(0,w.useCacheToken)(fe,[K.default,ce],{salt:E,override:M,getComputedToken:ee,formatToken:Q.default});return[fe,me,he?ke:""]}},27722:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=K;var X=F(131),w=$(F(98411)),Y=$(F(83609)),G=function(Q,oe){var ee={};for(var xe in Q)Object.prototype.hasOwnProperty.call(Q,xe)&&oe.indexOf(xe)<0&&(ee[xe]=Q[xe]);if(Q!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,xe=Object.getOwnPropertySymbols(Q);ce<xe.length;ce++)oe.indexOf(xe[ce])<0&&Object.prototype.propertyIsEnumerable.call(Q,xe[ce])&&(ee[xe[ce]]=Q[xe[ce]]);return ee};function K(Q){const{override:oe}=Q,ee=G(Q,["override"]),xe=Object.assign({},oe);Object.keys(w.default).forEach(Pe=>{delete xe[Pe]});const ce=Object.assign(Object.assign({},ee),xe),he=480,J=576,M=768,E=992,fe=1200,me=1600;if(ce.motion===!1){const Pe="0s";ce.motionDurationFast=Pe,ce.motionDurationMid=Pe,ce.motionDurationSlow=Pe}return Object.assign(Object.assign(Object.assign({},ce),{colorFillContent:ce.colorFillSecondary,colorFillContentHover:ce.colorFill,colorFillAlter:ce.colorFillQuaternary,colorBgContainerDisabled:ce.colorFillTertiary,colorBorderBg:ce.colorBgContainer,colorSplit:(0,Y.default)(ce.colorBorderSecondary,ce.colorBgContainer),colorTextPlaceholder:ce.colorTextQuaternary,colorTextDisabled:ce.colorTextQuaternary,colorTextHeading:ce.colorText,colorTextLabel:ce.colorTextSecondary,colorTextDescription:ce.colorTextTertiary,colorTextLightSolid:ce.colorWhite,colorHighlight:ce.colorError,colorBgTextHover:ce.colorFillSecondary,colorBgTextActive:ce.colorFill,colorIcon:ce.colorTextTertiary,colorIconHover:ce.colorText,colorErrorOutline:(0,Y.default)(ce.colorErrorBg,ce.colorBgContainer),colorWarningOutline:(0,Y.default)(ce.colorWarningBg,ce.colorBgContainer),fontSizeIcon:ce.fontSizeSM,lineWidthFocus:ce.lineWidth*4,lineWidth:ce.lineWidth,controlOutlineWidth:ce.lineWidth*2,controlInteractiveSize:ce.controlHeight/2,controlItemBgHover:ce.colorFillTertiary,controlItemBgActive:ce.colorPrimaryBg,controlItemBgActiveHover:ce.colorPrimaryBgHover,controlItemBgActiveDisabled:ce.colorFill,controlTmpOutline:ce.colorFillQuaternary,controlOutline:(0,Y.default)(ce.colorPrimaryBg,ce.colorBgContainer),lineType:ce.lineType,borderRadius:ce.borderRadius,borderRadiusXS:ce.borderRadiusXS,borderRadiusSM:ce.borderRadiusSM,borderRadiusLG:ce.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:ce.sizeXXS,paddingXS:ce.sizeXS,paddingSM:ce.sizeSM,padding:ce.size,paddingMD:ce.sizeMD,paddingLG:ce.sizeLG,paddingXL:ce.sizeXL,paddingContentHorizontalLG:ce.sizeLG,paddingContentVerticalLG:ce.sizeMS,paddingContentHorizontal:ce.sizeMS,paddingContentVertical:ce.sizeSM,paddingContentHorizontalSM:ce.size,paddingContentVerticalSM:ce.sizeXS,marginXXS:ce.sizeXXS,marginXS:ce.sizeXS,marginSM:ce.sizeSM,margin:ce.size,marginMD:ce.sizeMD,marginLG:ce.sizeLG,marginXL:ce.sizeXL,marginXXL:ce.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:he,screenXSMin:he,screenXSMax:J-1,screenSM:J,screenSMMin:J,screenSMMax:M-1,screenMD:M,screenMDMin:M,screenMDMax:E-1,screenLG:E,screenLGMin:E,screenLGMax:fe-1,screenXL:fe,screenXLMin:fe,screenXLMax:me-1,screenXXL:me,screenXXLMin:me,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new X.TinyColor("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new X.TinyColor("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new X.TinyColor("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),xe)}},3737:function(xt,N,F){"use strict";var $=F(75263).default,X=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=ce,N.genSubStyleComponent=void 0;var w=F(67294),Y=F(88623),G=F(56790),K=F(7177),Q=F(98078),oe=X(F(41401)),ee=$(F(99636)),xe=X(F(54894));function ce(J,M,E){let fe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const me=Array.isArray(J)?J:[J,J],[ke]=me,Pe=me.join("-");return Le=>{const[tt,ft,ge]=(0,oe.default)(),{getPrefixCls:be,iconPrefixCls:Ce,csp:Ye}=(0,w.useContext)(K.ConfigContext),je=be(),Et={theme:tt,token:ft,hashId:ge,nonce:()=>Ye==null?void 0:Ye.nonce,clientOnly:fe.clientOnly,order:fe.order||-999};return(0,Y.useStyleRegister)(Object.assign(Object.assign({},Et),{clientOnly:!1,path:["Shared",je]}),()=>[{"&":(0,Q.genLinkStyle)(ft)}]),(0,xe.default)(Ce,Ye),[(0,Y.useStyleRegister)(Object.assign(Object.assign({},Et),{path:[Pe,Le,Ce]}),()=>{const{token:Ae,flush:Qe}=(0,ee.default)(ft),te=Object.assign({},ft[ke]);if(fe.deprecatedTokens){const{deprecatedTokens:Te}=fe;Te.forEach(Je=>{let[pe,Me]=Je;var ze;(te!=null&&te[pe]||te!=null&&te[Me])&&((ze=te[Me])!==null&&ze!==void 0||(te[Me]=te==null?void 0:te[pe]))})}const Ze=typeof E=="function"?E((0,ee.merge)(Ae,te!=null?te:{})):E,ie=Object.assign(Object.assign({},Ze),te),Oe=`.${Le}`,nt=(0,ee.merge)(Ae,{componentCls:Oe,prefixCls:Le,iconCls:`.${Ce}`,antCls:`.${je}`},ie),ye=M(nt,{hashId:ge,prefixCls:Le,rootPrefixCls:je,iconPrefixCls:Ce,overrideComponentToken:te});return Qe(ke,ie),[fe.resetStyle===!1?null:(0,Q.genCommonStyle)(nt,Le),ye]}),ge]}}const he=(J,M,E,fe)=>{const me=ce(J,M,E,Object.assign({resetStyle:!1,order:-998},fe));return Pe=>{let{prefixCls:Le}=Pe;return me(Le),null}};N.genSubStyleComponent=he},36219:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=X;var $=F(36496);function X(w,Y){return $.PresetColors.reduce((G,K)=>{const Q=w[`${K}1`],oe=w[`${K}3`],ee=w[`${K}6`],xe=w[`${K}7`];return Object.assign(Object.assign({},G),Y(K,{lightColor:Q,lightBorderColor:oe,darkColor:ee,textColor:xe}))},{})}},83609:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var $=F(131);function X(G){return G>=0&&G<=255}function w(G,K){const{r:Q,g:oe,b:ee,a:xe}=new $.TinyColor(G).toRgb();if(xe<1)return G;const{r:ce,g:he,b:J}=new $.TinyColor(K).toRgb();for(let M=.01;M<=1;M+=.01){const E=Math.round((Q-ce*(1-M))/M),fe=Math.round((oe-he*(1-M))/M),me=Math.round((ee-J*(1-M))/M);if(X(E)&&X(fe)&&X(me))return new $.TinyColor({r:E,g:fe,b:me,a:Math.round(M*100)/100}).toRgbString()}return new $.TinyColor({r:Q,g:oe,b:ee,a:1}).toRgbString()}var Y=N.default=w},99636:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N._statistic_build_=void 0,N.default=K,N.merge=X,N.statistic=void 0;const F=typeof CSSINJS_STATISTIC!="undefined";let $=!0;function X(){for(var Q=arguments.length,oe=new Array(Q),ee=0;ee<Q;ee++)oe[ee]=arguments[ee];if(!F)return Object.assign.apply(Object,[{}].concat(oe));$=!1;const xe={};return oe.forEach(ce=>{Object.keys(ce).forEach(J=>{Object.defineProperty(xe,J,{configurable:!0,enumerable:!0,get:()=>ce[J]})})}),$=!0,xe}const w=N.statistic={},Y=N._statistic_build_={};function G(){}function K(Q){let oe,ee=Q,xe=G;return F&&typeof Proxy!="undefined"&&(oe=new Set,ee=new Proxy(Q,{get(ce,he){return $&&oe.add(he),ce[he]}}),xe=(ce,he)=>{var J;w[ce]={global:Array.from(oe),component:Object.assign(Object.assign({},(J=w[ce])===null||J===void 0?void 0:J.component),he)}}),{token:ee,keys:oe,flush:xe}}},54894:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var X=F(88623),w=F(98078),Y=$(F(41401));const G=(Q,oe)=>{const[ee,xe]=(0,Y.default)();return(0,X.useStyleRegister)({theme:ee,token:xe,hashId:"",path:["ant-design-icons",Q],nonce:()=>oe==null?void 0:oe.nonce},()=>[{[`.${Q}`]:Object.assign(Object.assign({},(0,w.resetIcon)()),{[`.${Q} .${Q}-icon`]:{display:"block"}})}])};var K=N.default=G},52040:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const F={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};var $=N.default=F},92125:function(xt,N,F){"use strict";"use client";var $=F(75263).default,X=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var w=X(F(94184)),Y=F(92419),G=$(F(67294)),K=F(31929),Q=X(F(15086)),oe=F(48125);const ee=ce=>{const{prefixCls:he,className:J,placement:M="top",title:E,color:fe,overlayInnerStyle:me}=ce,{getPrefixCls:ke}=G.useContext(K.ConfigContext),Pe=ke("tooltip",he),[Le,tt]=(0,Q.default)(Pe,!0),ft=(0,oe.parseColor)(Pe,fe),ge=ft.arrowStyle,be=Object.assign(Object.assign({},me),ft.overlayStyle),Ce=(0,w.default)(tt,Pe,`${Pe}-pure`,`${Pe}-placement-${M}`,J,ft.className);return Le(G.createElement("div",{className:Ce,style:ge},G.createElement("div",{className:`${Pe}-arrow`}),G.createElement(Y.Popup,Object.assign({},ce,{className:tt,prefixCls:Pe,overlayInnerStyle:be}),E)))};var xe=N.default=ee},94055:function(xt,N,F){"use strict";"use client";var $=F(64836).default,X=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var w=X(F(67294)),Y=$(F(94184)),G=$(F(92419)),K=$(F(60869)),Q=F(56333),oe=F(53683),ee=$(F(74132)),xe=F(47419),ce=F(13594),he=$(F(96877)),J=F(31929),M=F(46549),E=F(3184),fe=$(F(92125)),me=$(F(15086)),ke=F(48125),Pe=function(ft,ge){var be={};for(var Ce in ft)Object.prototype.hasOwnProperty.call(ft,Ce)&&ge.indexOf(Ce)<0&&(be[Ce]=ft[Ce]);if(ft!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ye=0,Ce=Object.getOwnPropertySymbols(ft);Ye<Ce.length;Ye++)ge.indexOf(Ce[Ye])<0&&Object.prototype.propertyIsEnumerable.call(ft,Ce[Ye])&&(be[Ce[Ye]]=ft[Ce[Ye]]);return be};const Le=w.forwardRef((ft,ge)=>{var be,Ce;const{prefixCls:Ye,openClassName:je,getTooltipContainer:Et,overlayClassName:Ae,color:Qe,overlayInnerStyle:te,children:Ze,afterOpenChange:ie,afterVisibleChange:Oe,destroyTooltipOnHide:nt,arrow:ye=!0,title:Te,overlay:Je,builtinPlacements:pe,arrowPointAtCenter:Me=!1,autoAdjustOverflow:ze=!0}=ft,De=!!ye,[,Ct]=(0,E.useToken)(),{getPopupContainer:Vt,getPrefixCls:Ve,direction:Ue}=w.useContext(J.ConfigContext),Ee=(0,ce.devUseWarning)("Tooltip"),et=w.useRef(null),st=()=>{var it;(it=et.current)===null||it===void 0||it.forceAlign()};w.useImperativeHandle(ge,()=>({forceAlign:st,forcePopupAlign:()=>{Ee.deprecated(!1,"forcePopupAlign","forceAlign"),st()}}));const[Re,Ie]=(0,K.default)(!1,{value:(be=ft.open)!==null&&be!==void 0?be:ft.visible,defaultValue:(Ce=ft.defaultOpen)!==null&&Ce!==void 0?Ce:ft.defaultVisible}),ct=!Te&&!Je&&Te!==0,Tt=it=>{var _t,Pt;Ie(ct?!1:it),ct||((_t=ft.onOpenChange)===null||_t===void 0||_t.call(ft,it),(Pt=ft.onVisibleChange)===null||Pt===void 0||Pt.call(ft,it))},Qt=w.useMemo(()=>{var it,_t;let Pt=Me;return typeof ye=="object"&&(Pt=(_t=(it=ye.pointAtCenter)!==null&&it!==void 0?it:ye.arrowPointAtCenter)!==null&&_t!==void 0?_t:Me),pe||(0,ee.default)({arrowPointAtCenter:Pt,autoAdjustOverflow:ze,arrowWidth:De?Ct.sizePopupArrow:0,borderRadius:Ct.borderRadius,offset:Ct.marginXXS,visibleFirst:!0})},[Me,ye,pe,Ct]),wt=w.useMemo(()=>Te===0?Te:Je||Te||"",[Je,Te]),se=w.createElement(M.NoCompactStyle,null,typeof wt=="function"?wt():wt),{getPopupContainer:Ge,placement:Ke="top",mouseEnterDelay:bt=.1,mouseLeaveDelay:Be=.1,overlayStyle:pt,rootClassName:It}=ft,ot=Pe(ft,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),zt=Ve("tooltip",Ye),Jt=Ve(),tr=ft["data-popover-inject"];let pr=Re;!("open"in ft)&&!("visible"in ft)&&ct&&(pr=!1);const br=(0,xe.isValidElement)(Ze)&&!(0,xe.isFragment)(Ze)?Ze:w.createElement("span",null,Ze),Zr=br.props,Nr=!Zr.className||typeof Zr.className=="string"?(0,Y.default)(Zr.className,je||`${zt}-open`):Zr.className,[tn,Dn]=(0,me.default)(zt,!tr),gn=(0,ke.parseColor)(zt,Qe),Vn=gn.arrowStyle,Un=Object.assign(Object.assign({},te),gn.overlayStyle),mi=(0,Y.default)(Ae,{[`${zt}-rtl`]:Ue==="rtl"},gn.className,It,Dn),[qn,Xn]=(0,Q.useZIndex)("Tooltip",ot.zIndex),We=w.createElement(G.default,Object.assign({},ot,{zIndex:qn,showArrow:De,placement:Ke,mouseEnterDelay:bt,mouseLeaveDelay:Be,prefixCls:zt,overlayClassName:mi,overlayStyle:Object.assign(Object.assign({},Vn),pt),getTooltipContainer:Ge||Et||Vt,ref:et,builtinPlacements:Qt,overlay:se,visible:pr,onVisibleChange:Tt,afterVisibleChange:ie!=null?ie:Oe,overlayInnerStyle:Un,arrowContent:w.createElement("span",{className:`${zt}-arrow-content`}),motion:{motionName:(0,oe.getTransitionName)(Jt,"zoom-big-fast",ft.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!nt}),pr?(0,xe.cloneElement)(br,{className:Nr}):br);return tn(w.createElement(he.default.Provider,{value:Xn},We))});Le._InternalPanelDoNotUseOrYouWillBeFired=fe.default;var tt=N.default=Le},15086:function(xt,N,F){"use strict";var $=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var X=F(98078),w=F(42836),Y=$(F(9064)),G=F(3184);const K=oe=>{const{componentCls:ee,tooltipMaxWidth:xe,tooltipColor:ce,tooltipBg:he,tooltipBorderRadius:J,zIndexPopup:M,controlHeight:E,boxShadowSecondary:fe,paddingSM:me,paddingXS:ke,tooltipRadiusOuter:Pe}=oe;return[{[ee]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,X.resetComponent)(oe)),{position:"absolute",zIndex:M,display:"block",width:"max-content",maxWidth:xe,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":he,[`${ee}-inner`]:{minWidth:E,minHeight:E,padding:`${me/2}px ${ke}px`,color:ce,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:he,borderRadius:J,boxShadow:fe,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${ee}-inner`]:{borderRadius:Math.min(J,Y.MAX_VERTICAL_CONTENT_RADIUS)}},[`${ee}-content`]:{position:"relative"}}),(0,G.genPresetColor)(oe,(Le,tt)=>{let{darkColor:ft}=tt;return{[`&${ee}-${Le}`]:{[`${ee}-inner`]:{backgroundColor:ft},[`${ee}-arrow`]:{"--antd-arrow-background-color":ft}}}})),{"&-rtl":{direction:"rtl"}})},(0,Y.default)((0,G.mergeToken)(oe,{borderRadiusOuter:Pe}),{colorBg:"var(--antd-arrow-background-color)",contentRadius:J,limitVerticalRadius:!0}),{[`${ee}-pure`]:{position:"relative",maxWidth:"none",margin:oe.sizePopupArrow}}]};var Q=(oe,ee)=>(0,G.genComponentStyleHook)("Tooltip",ce=>{if(ee===!1)return[];const{borderRadius:he,colorTextLightSolid:J,colorBgDefault:M,borderRadiusOuter:E}=ce,fe=(0,G.mergeToken)(ce,{tooltipMaxWidth:250,tooltipColor:J,tooltipBorderRadius:he,tooltipBg:M,tooltipRadiusOuter:E>4?4:E});return[K(fe),(0,w.initZoomMotion)(ce,"zoom-big-fast")]},ce=>{let{zIndexPopupBase:he,colorBgSpotlight:J}=ce;return{zIndexPopup:he+70,colorBgDefault:J}},{resetStyle:!1})(oe);N.default=Q},48125:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.parseColor=Y;var X=$(F(94184)),w=F(45471);function Y(G,K){const Q=(0,w.isPresetColor)(K),oe=(0,X.default)({[`${G}-${K}`]:K&&Q}),ee={},xe={};return K&&!Q&&(ee.background=K,xe["--antd-arrow-background-color"]=K),{className:oe,overlayStyle:ee,arrowStyle:xe}}},12385:function(xt,N,F){"use strict";"use client";var $=F(64836).default,X=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var w=X(F(67294)),Y=$(F(45598)),G=$(F(82546));function K(fe){const me=typeof fe;return me==="string"||me==="number"}function Q(fe){let me=0;return fe.forEach(ke=>{K(ke)?me+=String(ke).length:me+=1}),me}function oe(fe,me){let ke=0;const Pe=[];for(let Le=0;Le<fe.length;Le+=1){if(ke===me)return Pe;const tt=fe[Le],ge=K(tt)?String(tt).length:1,be=ke+ge;if(be>me){const Ce=me-ke;return Pe.push(String(tt).slice(0,Ce)),Pe}Pe.push(tt),ke=be}return fe}const ee=0,xe=1,ce=2,he=3,J=4,M=fe=>{let{enabledMeasure:me,children:ke,text:Pe,width:Le,fontSize:tt,rows:ft,onEllipsis:ge}=fe;const[[be,Ce,Ye],je]=w.useState([0,0,0]),[Et,Ae]=w.useState(0),[Qe,te]=w.useState(ee),[Ze,ie]=w.useState(0),Oe=w.useRef(null),nt=w.useRef(null),ye=w.useMemo(()=>(0,Y.default)(Pe),[Pe]),Te=w.useMemo(()=>Q(ye),[ye]),Je=w.useMemo(()=>!me||Qe!==he?Et&&Qe!==J&&me?ke(oe(ye,Et),Et<Te):ke(ye,!1):ke(oe(ye,Ce),Ce<Te),[me,Qe,ke,ye,Ce,Te]);(0,G.default)(()=>{me&&Le&&tt&&Te&&(te(xe),je([0,Math.ceil(Te/2),Te]))},[me,Le,tt,Pe,Te,ft]),(0,G.default)(()=>{var De;Qe===xe&&ie(((De=Oe.current)===null||De===void 0?void 0:De.offsetHeight)||0)},[Qe]),(0,G.default)(()=>{var De,Ct;if(Ze){if(Qe===xe){const Vt=((De=nt.current)===null||De===void 0?void 0:De.offsetHeight)||0,Ve=ft*Ze;Vt<=Ve?(te(J),ge(!1)):te(ce)}else if(Qe===ce)if(be!==Ye){const Vt=((Ct=nt.current)===null||Ct===void 0?void 0:Ct.offsetHeight)||0,Ve=ft*Ze;let Ue=be,Ee=Ye;be===Ye-1?Ee=be:Vt<=Ve?Ue=Ce:Ee=Ce;const et=Math.ceil((Ue+Ee)/2);je([Ue,et,Ee])}else te(he),Ae(Ce),ge(!0)}},[Qe,be,Ye,ft,Ze]);const pe={width:Le,whiteSpace:"normal",margin:0,padding:0},Me=(De,Ct,Vt)=>w.createElement("span",{"aria-hidden":!0,ref:Ct,style:Object.assign({position:"fixed",display:"block",left:0,top:0,zIndex:-9999,visibility:"hidden",pointerEvents:"none",fontSize:Math.ceil(tt/2)*2},Vt)},De),ze=(De,Ct)=>{const Vt=oe(ye,De);return Me(ke(Vt,!0),Ct,pe)};return w.createElement(w.Fragment,null,Je,me&&Qe!==he&&Qe!==J&&w.createElement(w.Fragment,null,Me("lg",Oe,{wordBreak:"keep-all",whiteSpace:"nowrap"}),Qe===xe?Me(ke(ye,!1),nt,pe):ze(Ce,nt)))};var E=N.default=M},69274:function(xt,N,F){"use strict";"use client";var $=F(64836).default,X=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var w=X(F(67294)),Y=$(F(94055));const G=Q=>{let{enabledEllipsis:oe,isEllipsis:ee,children:xe,tooltipProps:ce}=Q;return!(ce!=null&&ce.title)||!oe?xe:w.createElement(Y.default,Object.assign({open:ee?void 0:!1},ce),xe)};var K=N.default=G},28460:function(xt,N,F){"use strict";"use client";var $=F(75263).default,X=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var w=X(F(83874)),Y=X(F(90091)),G=X(F(10875)),K=X(F(94184)),Q=X(F(20640)),oe=X(F(48555)),ee=X(F(45598)),xe=X(F(82546)),ce=X(F(60869)),he=X(F(18475)),J=F(75531),M=$(F(67294)),E=F(38882),fe=X(F(60938)),me=F(31929),ke=X(F(76647)),Pe=X(F(94055)),Le=X(F(69425)),tt=X(F(89652)),ft=X(F(92759)),ge=X(F(67312)),be=X(F(12385)),Ce=X(F(69274)),Ye=function(ie,Oe){var nt={};for(var ye in ie)Object.prototype.hasOwnProperty.call(ie,ye)&&Oe.indexOf(ye)<0&&(nt[ye]=ie[ye]);if(ie!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Te=0,ye=Object.getOwnPropertySymbols(ie);Te<ye.length;Te++)Oe.indexOf(ye[Te])<0&&Object.prototype.propertyIsEnumerable.call(ie,ye[Te])&&(nt[ye[Te]]=ie[ye[Te]]);return nt};function je(ie,Oe){let{mark:nt,code:ye,underline:Te,delete:Je,strong:pe,keyboard:Me,italic:ze}=ie,De=Oe;function Ct(Vt,Ve){Ve&&(De=M.createElement(Vt,{},De))}return Ct("strong",pe),Ct("u",Te),Ct("del",Je),Ct("code",ye),Ct("mark",nt),Ct("kbd",Me),Ct("i",ze),De}function Et(ie,Oe,nt){return ie===!0||ie===void 0?Oe:ie||nt&&Oe}function Ae(ie){return ie===!1?[!1,!1]:Array.isArray(ie)?ie:[ie]}const Qe="...",te=M.forwardRef((ie,Oe)=>{var nt,ye,Te;const{prefixCls:Je,className:pe,style:Me,type:ze,disabled:De,children:Ct,ellipsis:Vt,editable:Ve,copyable:Ue,component:Ee,title:et}=ie,st=Ye(ie,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:Re,direction:Ie}=M.useContext(me.ConfigContext),[ct]=(0,ke.default)("Text"),Tt=M.useRef(null),Qt=M.useRef(null),wt=Re("typography",Je),se=(0,he.default)(st,["mark","code","delete","underline","strong","keyboard","italic"]),[Ge,Ke]=(0,ft.default)(Ve),[bt,Be]=(0,ce.default)(!1,{value:Ke.editing}),{triggerType:pt=["icon"]}=Ke,It=Jn=>{var _i;Jn&&((_i=Ke.onStart)===null||_i===void 0||_i.call(Ke)),Be(Jn)};(0,ge.default)(()=>{var Jn;bt||(Jn=Qt.current)===null||Jn===void 0||Jn.focus()},[bt]);const ot=Jn=>{Jn==null||Jn.preventDefault(),It(!0)},zt=Jn=>{var _i;(_i=Ke.onChange)===null||_i===void 0||_i.call(Ke,Jn),It(!1)},Jt=()=>{var Jn;(Jn=Ke.onCancel)===null||Jn===void 0||Jn.call(Ke),It(!1)},[tr,pr]=(0,ft.default)(Ue),[br,Zr]=M.useState(!1),Nr=M.useRef(null),tn={};pr.format&&(tn.format=pr.format);const Dn=()=>{Nr.current&&clearTimeout(Nr.current)},gn=Jn=>{var _i;Jn==null||Jn.preventDefault(),Jn==null||Jn.stopPropagation(),(0,Q.default)(pr.text||String(Ct)||"",tn),Zr(!0),Dn(),Nr.current=setTimeout(()=>{Zr(!1)},3e3),(_i=pr.onCopy)===null||_i===void 0||_i.call(pr,Jn)};M.useEffect(()=>Dn,[]);const[Vn,Un]=M.useState(!1),[mi,qn]=M.useState(!1),[Xn,We]=M.useState(!1),[it,_t]=M.useState(!1),[Pt,jt]=M.useState(!1),[gr,Cr]=M.useState(!0),[kt,at]=(0,ft.default)(Vt,{expandable:!1}),Rt=kt&&!Xn,{rows:mr=1}=at,Dr=M.useMemo(()=>!Rt||at.suffix!==void 0||at.onEllipsis||at.expandable||Ge||tr,[Rt,at,Ge,tr]);(0,xe.default)(()=>{kt&&!Dr&&(Un((0,E.isStyleSupport)("webkitLineClamp")),qn((0,E.isStyleSupport)("textOverflow")))},[Dr,kt]);const Ft=M.useMemo(()=>Dr?!1:mr===1?mi:Vn,[Dr,mi,Vn]),Mn=Rt&&(Ft?Pt:it),yi=Rt&&mr===1&&Ft,gi=Rt&&mr>1&&Ft,sn=Jn=>{var _i;We(!0),(_i=at.onExpand)===null||_i===void 0||_i.call(at,Jn)},[hi,ri]=M.useState(0),[ui,ba]=M.useState(0),vi=(Jn,_i)=>{let{offsetWidth:na}=Jn;var Xa;ri(na),ba(parseInt((Xa=window.getComputedStyle)===null||Xa===void 0?void 0:Xa.call(window,_i).fontSize,10)||0)},Sa=Jn=>{var _i;_t(Jn),it!==Jn&&((_i=at.onEllipsis)===null||_i===void 0||_i.call(at,Jn))};M.useEffect(()=>{const Jn=Tt.current;if(kt&&Ft&&Jn){const _i=gi?Jn.offsetHeight<Jn.scrollHeight:Jn.offsetWidth<Jn.scrollWidth;Pt!==_i&&jt(_i)}},[kt,Ft,Ct,gi,gr]),M.useEffect(()=>{const Jn=Tt.current;if(typeof IntersectionObserver=="undefined"||!Jn||!Ft||!Rt)return;const _i=new IntersectionObserver(()=>{Cr(!!Jn.offsetParent)});return _i.observe(Jn),()=>{_i.disconnect()}},[Ft,Rt]);let za={};at.tooltip===!0?za={title:(nt=Ke.text)!==null&&nt!==void 0?nt:Ct}:M.isValidElement(at.tooltip)?za={title:at.tooltip}:typeof at.tooltip=="object"?za=Object.assign({title:(ye=Ke.text)!==null&&ye!==void 0?ye:Ct},at.tooltip):za={title:at.tooltip};const _a=M.useMemo(()=>{const Jn=_i=>["string","number"].includes(typeof _i);if(!(!kt||Ft)){if(Jn(Ke.text))return Ke.text;if(Jn(Ct))return Ct;if(Jn(et))return et;if(Jn(za.title))return za.title}},[kt,Ft,et,za.title,Mn]);if(bt)return M.createElement(Le.default,{value:(Te=Ke.text)!==null&&Te!==void 0?Te:typeof Ct=="string"?Ct:"",onSave:zt,onCancel:Jt,onEnd:Ke.onEnd,prefixCls:wt,className:pe,style:Me,direction:Ie,component:Ee,maxLength:Ke.maxLength,autoSize:Ke.autoSize,enterIcon:Ke.enterIcon});const Ga=()=>{const{expandable:Jn,symbol:_i}=at;if(!Jn)return null;let na;return _i?na=_i:na=ct==null?void 0:ct.expand,M.createElement("a",{key:"expand",className:`${wt}-expand`,onClick:sn,"aria-label":ct==null?void 0:ct.expand},na)},Ea=()=>{if(!Ge)return;const{icon:Jn,tooltip:_i}=Ke,na=(0,ee.default)(_i)[0]||(ct==null?void 0:ct.edit),Xa=typeof na=="string"?na:"";return pt.includes("icon")?M.createElement(Pe.default,{key:"edit",title:_i===!1?"":na},M.createElement(fe.default,{ref:Qt,className:`${wt}-edit`,onClick:ot,"aria-label":Xa},Jn||M.createElement(G.default,{role:"button"}))):null},hs=()=>{if(!tr)return;const{tooltips:Jn,icon:_i}=pr,na=Ae(Jn),Xa=Ae(_i),ps=br?Et(na[1],ct==null?void 0:ct.copied):Et(na[0],ct==null?void 0:ct.copy),po=br?ct==null?void 0:ct.copied:ct==null?void 0:ct.copy,Io=typeof ps=="string"?ps:po;return M.createElement(Pe.default,{key:"copy",title:ps},M.createElement(fe.default,{className:(0,K.default)(`${wt}-copy`,br&&`${wt}-copy-success`),onClick:gn,"aria-label":Io},br?Et(Xa[1],M.createElement(w.default,null),!0):Et(Xa[0],M.createElement(Y.default,null),!0)))},uo=Jn=>[Jn&&Ga(),Ea(),hs()],Ro=Jn=>[Jn&&M.createElement("span",{"aria-hidden":!0,key:"ellipsis"},Qe),at.suffix,uo(Jn)];return M.createElement(oe.default,{onResize:vi,disabled:!Rt||Ft},Jn=>M.createElement(Ce.default,{tooltipProps:za,enabledEllipsis:Rt,isEllipsis:Mn},M.createElement(tt.default,Object.assign({className:(0,K.default)({[`${wt}-${ze}`]:ze,[`${wt}-disabled`]:De,[`${wt}-ellipsis`]:kt,[`${wt}-single-line`]:Rt&&mr===1,[`${wt}-ellipsis-single-line`]:yi,[`${wt}-ellipsis-multiple-line`]:gi},pe),prefixCls:Je,style:Object.assign(Object.assign({},Me),{WebkitLineClamp:gi?mr:void 0}),component:Ee,ref:(0,J.composeRef)(Jn,Tt,Oe),direction:Ie,onClick:pt.includes("text")?ot:void 0,"aria-label":_a==null?void 0:_a.toString(),title:et},se),M.createElement(be.default,{enabledMeasure:Rt&&!Ft,text:Ct,rows:mr,width:hi,fontSize:ui,onEllipsis:Sa},(_i,na)=>{let Xa=_i;return _i.length&&na&&_a&&(Xa=M.createElement("span",{key:"show-content","aria-hidden":!0},Xa)),je(ie,M.createElement(M.Fragment,null,Xa,Ro(na)))}))))});var Ze=N.default=te},69425:function(xt,N,F){"use strict";"use client";var $=F(75263).default,X=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var w=X(F(7224)),Y=X(F(94184)),G=X(F(27712)),K=$(F(67294)),Q=F(47419),oe=X(F(14104)),ee=X(F(23461));const xe=he=>{const{prefixCls:J,"aria-label":M,className:E,style:fe,direction:me,maxLength:ke,autoSize:Pe=!0,value:Le,onSave:tt,onCancel:ft,onEnd:ge,component:be,enterIcon:Ce=K.createElement(w.default,null)}=he,Ye=K.useRef(null),je=K.useRef(!1),Et=K.useRef(),[Ae,Qe]=K.useState(Le);K.useEffect(()=>{Qe(Le)},[Le]),K.useEffect(()=>{if(Ye.current&&Ye.current.resizableTextArea){const{textArea:De}=Ye.current.resizableTextArea;De.focus();const{length:Ct}=De.value;De.setSelectionRange(Ct,Ct)}},[]);const te=De=>{let{target:Ct}=De;Qe(Ct.value.replace(/[\n\r]/g,""))},Ze=()=>{je.current=!0},ie=()=>{je.current=!1},Oe=De=>{let{keyCode:Ct}=De;je.current||(Et.current=Ct)},nt=()=>{tt(Ae.trim())},ye=De=>{let{keyCode:Ct,ctrlKey:Vt,altKey:Ve,metaKey:Ue,shiftKey:Ee}=De;Et.current===Ct&&!je.current&&!Vt&&!Ve&&!Ue&&!Ee&&(Ct===G.default.ENTER?(nt(),ge==null||ge()):Ct===G.default.ESC&&ft())},Te=()=>{nt()},Je=be?`${J}-${be}`:"",[pe,Me]=(0,ee.default)(J),ze=(0,Y.default)(J,`${J}-edit-content`,{[`${J}-rtl`]:me==="rtl"},E,Je,Me);return pe(K.createElement("div",{className:ze,style:fe},K.createElement(oe.default,{ref:Ye,maxLength:ke,value:Ae,onChange:te,onKeyDown:Oe,onKeyUp:ye,onCompositionStart:Ze,onCompositionEnd:ie,onBlur:Te,"aria-label":M,rows:1,autoSize:Pe}),Ce!==null?(0,Q.cloneElement)(Ce,{className:`${J}-edit-content-confirm`}):null))};var ce=N.default=xe},34528:function(xt,N,F){"use strict";var $,X=F(64836).default,w=F(75263).default;$={value:!0},N.Z=void 0;var Y=w(F(67294)),G=F(13594),K=X(F(28460)),Q=function(ce,he){var J={};for(var M in ce)Object.prototype.hasOwnProperty.call(ce,M)&&he.indexOf(M)<0&&(J[M]=ce[M]);if(ce!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,M=Object.getOwnPropertySymbols(ce);E<M.length;E++)he.indexOf(M[E])<0&&Object.prototype.propertyIsEnumerable.call(ce,M[E])&&(J[M[E]]=ce[M[E]]);return J};const oe=[1,2,3,4,5],ee=Y.forwardRef((ce,he)=>{const{level:J=1}=ce,M=Q(ce,["level"]);let E;return oe.includes(J)?E=`h${J}`:E="h1",Y.createElement(K.default,Object.assign({ref:he},M,{component:E}))});var xe=N.Z=ee},89652:function(xt,N,F){"use strict";"use client";var $=F(64836).default,X=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var w=X(F(67294)),Y=$(F(94184)),G=F(75531),K=F(13594),Q=F(31929),oe=$(F(23461)),ee=function(he,J){var M={};for(var E in he)Object.prototype.hasOwnProperty.call(he,E)&&J.indexOf(E)<0&&(M[E]=he[E]);if(he!=null&&typeof Object.getOwnPropertySymbols=="function")for(var fe=0,E=Object.getOwnPropertySymbols(he);fe<E.length;fe++)J.indexOf(E[fe])<0&&Object.prototype.propertyIsEnumerable.call(he,E[fe])&&(M[E[fe]]=he[E[fe]]);return M};const xe=w.forwardRef((he,J)=>{const{prefixCls:M,component:E="article",className:fe,rootClassName:me,setContentRef:ke,children:Pe,direction:Le,style:tt}=he,ft=ee(he,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:ge,direction:be,typography:Ce}=w.useContext(Q.ConfigContext),Ye=Le!=null?Le:be;let je=J;ke&&(je=(0,G.composeRef)(J,ke));const Et=ge("typography",M),[Ae,Qe]=(0,oe.default)(Et),te=(0,Y.default)(Et,Ce==null?void 0:Ce.className,{[`${Et}-rtl`]:Ye==="rtl"},fe,me,Qe),Ze=Object.assign(Object.assign({},Ce==null?void 0:Ce.style),tt);return Ae(w.createElement(E,Object.assign({className:te,style:Ze,ref:je},ft),Pe))});var ce=N.default=xe},92759:function(xt,N,F){"use strict";var $=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=w;var X=$(F(67294));function w(Y,G){return X.useMemo(()=>{const K=!!Y;return[K,Object.assign(Object.assign({},G),K&&typeof Y=="object"?Y:null)]},[Y])}},67312:function(xt,N,F){"use strict";var $=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var X=$(F(67294));const w=(G,K)=>{const Q=X.useRef(!1);X.useEffect(()=>{Q.current?G():Q.current=!0},K)};var Y=N.default=w},23461:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var $=F(98078),X=F(3184),w=F(48385);const Y=K=>{const{componentCls:Q,titleMarginTop:oe}=K;return{[Q]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:K.colorText,wordBreak:"break-word",lineHeight:K.lineHeight,[`&${Q}-secondary`]:{color:K.colorTextDescription},[`&${Q}-success`]:{color:K.colorSuccess},[`&${Q}-warning`]:{color:K.colorWarning},[`&${Q}-danger`]:{color:K.colorError,"a&:active, a&:focus":{color:K.colorErrorActive},"a&:hover":{color:K.colorErrorHover}},[`&${Q}-disabled`]:{color:K.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},[`
        div&,
        p
      `]:{marginBottom:"1em"}},(0,w.getTitleStyles)(K)),{[`
      & + h1${Q},
      & + h2${Q},
      & + h3${Q},
      & + h4${Q},
      & + h5${Q}
      `]:{marginTop:oe},[`
      div,
      ul,
      li,
      p,
      h1,
      h2,
      h3,
      h4,
      h5`]:{[`
        + h1,
        + h2,
        + h3,
        + h4,
        + h5
        `]:{marginTop:oe}}}),(0,w.getResetStyles)(K)),(0,w.getLinkStyles)(K)),{[`
        ${Q}-expand,
        ${Q}-edit,
        ${Q}-copy
      `]:Object.assign(Object.assign({},(0,$.operationUnit)(K)),{marginInlineStart:K.marginXXS})}),(0,w.getEditableStyles)(K)),(0,w.getCopyableStyles)(K)),(0,w.getEllipsisStyles)()),{"&-rtl":{direction:"rtl"}})}};var G=N.default=(0,X.genComponentStyleHook)("Typography",K=>[Y(K)],()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"}))},48385:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.getTitleStyles=N.getResetStyles=N.getLinkStyles=N.getEllipsisStyles=N.getEditableStyles=N.getCopyableStyles=void 0;var $=F(78589),X=F(98078);const w=(xe,ce,he,J)=>{const{titleMarginBottom:M,fontWeightStrong:E}=J;return{marginBottom:M,color:he,fontWeight:E,fontSize:xe,lineHeight:ce}},Y=xe=>{const ce=[1,2,3,4,5],he={};return ce.forEach(J=>{he[`
      h${J}&,
      div&-h${J},
      div&-h${J} > textarea,
      h${J}
    `]=w(xe[`fontSizeHeading${J}`],xe[`lineHeightHeading${J}`],xe.colorTextHeading,xe)}),he};N.getTitleStyles=Y;const G=xe=>{const{componentCls:ce}=xe;return{"a&, a":Object.assign(Object.assign({},(0,X.operationUnit)(xe)),{textDecoration:xe.linkDecoration,"&:active, &:hover":{textDecoration:xe.linkHoverDecoration},[`&[disabled], &${ce}-disabled`]:{color:xe.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:xe.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}};N.getLinkStyles=G;const K=xe=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:xe.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:xe.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:$.gold[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:xe.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}});N.getResetStyles=K;const Q=xe=>{const{componentCls:ce,paddingSM:he}=xe,J=he;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:-xe.paddingSM,marginTop:-J,marginBottom:`calc(1em - ${J}px)`},[`${ce}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:xe.marginXS+2,insetBlockEnd:xe.marginXS,color:xe.colorTextDescription,fontWeight:"normal",fontSize:xe.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}};N.getEditableStyles=Q;const oe=xe=>({"&-copy-success":{[`
    &,
    &:hover,
    &:focus`]:{color:xe.colorSuccess}}});N.getCopyableStyles=oe;const ee=()=>({[`
  a&-ellipsis,
  span&-ellipsis
  `]:{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}});N.getEllipsisStyles=ee},87629:function(xt,N,F){"use strict";"use client";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var X=$(F(36245)),w=N.default=X.default},36245:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var F=N.default="5.11.3"},83874:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const $=X(F(71079));function X(Y){return Y&&Y.__esModule?Y:{default:Y}}const w=$;N.default=w,xt.exports=w},43273:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const $=X(F(72225));function X(Y){return Y&&Y.__esModule?Y:{default:Y}}const w=$;N.default=w,xt.exports=w},90091:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const $=X(F(29539));function X(Y){return Y&&Y.__esModule?Y:{default:Y}}const w=$;N.default=w,xt.exports=w},10875:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const $=X(F(54825));function X(Y){return Y&&Y.__esModule?Y:{default:Y}}const w=$;N.default=w,xt.exports=w},7224:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const $=X(F(43552));function X(Y){return Y&&Y.__esModule?Y:{default:Y}}const w=$;N.default=w,xt.exports=w},26545:function(xt,N,F){"use client";"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return be}});var $=J(F(67294)),X=ce(F(94184)),w=F(78589),Y=ce(F(13357)),G=ce(F(46648)),K=F(46338),Q=F(49458);function oe(Ce,Ye){(Ye==null||Ye>Ce.length)&&(Ye=Ce.length);for(var je=0,Et=new Array(Ye);je<Ye;je++)Et[je]=Ce[je];return Et}function ee(Ce){if(Array.isArray(Ce))return Ce}function xe(Ce,Ye,je){return Ye in Ce?Object.defineProperty(Ce,Ye,{value:je,enumerable:!0,configurable:!0,writable:!0}):Ce[Ye]=je,Ce}function ce(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}}function he(Ce){if(typeof WeakMap!="function")return null;var Ye=new WeakMap,je=new WeakMap;return(he=function(Et){return Et?je:Ye})(Ce)}function J(Ce,Ye){if(!Ye&&Ce&&Ce.__esModule)return Ce;if(Ce===null||typeof Ce!="object"&&typeof Ce!="function")return{default:Ce};var je=he(Ye);if(je&&je.has(Ce))return je.get(Ce);var Et={},Ae=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Qe in Ce)if(Qe!=="default"&&Object.prototype.hasOwnProperty.call(Ce,Qe)){var te=Ae?Object.getOwnPropertyDescriptor(Ce,Qe):null;te&&(te.get||te.set)?Object.defineProperty(Et,Qe,te):Et[Qe]=Ce[Qe]}return Et.default=Ce,je&&je.set(Ce,Et),Et}function M(Ce,Ye){var je=Ce==null?null:typeof Symbol!="undefined"&&Ce[Symbol.iterator]||Ce["@@iterator"];if(je!=null){var Et=[],Ae=!0,Qe=!1,te,Ze;try{for(je=je.call(Ce);!(Ae=(te=je.next()).done)&&(Et.push(te.value),!(Ye&&Et.length===Ye));Ae=!0);}catch(ie){Qe=!0,Ze=ie}finally{try{!Ae&&je.return!=null&&je.return()}finally{if(Qe)throw Ze}}return Et}}function E(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fe(Ce){for(var Ye=1;Ye<arguments.length;Ye++){var je=arguments[Ye]!=null?arguments[Ye]:{},Et=Object.keys(je);typeof Object.getOwnPropertySymbols=="function"&&(Et=Et.concat(Object.getOwnPropertySymbols(je).filter(function(Ae){return Object.getOwnPropertyDescriptor(je,Ae).enumerable}))),Et.forEach(function(Ae){xe(Ce,Ae,je[Ae])})}return Ce}function me(Ce,Ye){var je=Object.keys(Ce);if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(Ce);Ye&&(Et=Et.filter(function(Ae){return Object.getOwnPropertyDescriptor(Ce,Ae).enumerable})),je.push.apply(je,Et)}return je}function ke(Ce,Ye){return Ye=Ye!=null?Ye:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Ce,Object.getOwnPropertyDescriptors(Ye)):me(Object(Ye)).forEach(function(je){Object.defineProperty(Ce,je,Object.getOwnPropertyDescriptor(Ye,je))}),Ce}function Pe(Ce,Ye){if(Ce==null)return{};var je=Le(Ce,Ye),Et,Ae;if(Object.getOwnPropertySymbols){var Qe=Object.getOwnPropertySymbols(Ce);for(Ae=0;Ae<Qe.length;Ae++)Et=Qe[Ae],!(Ye.indexOf(Et)>=0)&&Object.prototype.propertyIsEnumerable.call(Ce,Et)&&(je[Et]=Ce[Et])}return je}function Le(Ce,Ye){if(Ce==null)return{};var je={},Et=Object.keys(Ce),Ae,Qe;for(Qe=0;Qe<Et.length;Qe++)Ae=Et[Qe],!(Ye.indexOf(Ae)>=0)&&(je[Ae]=Ce[Ae]);return je}function tt(Ce,Ye){return ee(Ce)||M(Ce,Ye)||ft(Ce,Ye)||E()}function ft(Ce,Ye){if(Ce){if(typeof Ce=="string")return oe(Ce,Ye);var je=Object.prototype.toString.call(Ce).slice(8,-1);if(je==="Object"&&Ce.constructor&&(je=Ce.constructor.name),je==="Map"||je==="Set")return Array.from(je);if(je==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(je))return oe(Ce,Ye)}}(0,K.setTwoToneColor)(w.blue.primary);var ge=$.forwardRef(function(Ce,Ye){var je=Ce.className,Et=Ce.icon,Ae=Ce.spin,Qe=Ce.rotate,te=Ce.tabIndex,Ze=Ce.onClick,ie=Ce.twoToneColor,Oe=Pe(Ce,["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"]),nt=$.useContext(Y.default),ye=nt.prefixCls,Te=ye===void 0?"anticon":ye,Je=nt.rootClassName,pe,Me=(0,X.default)(Je,Te,(pe={},xe(pe,"".concat(Te,"-").concat(Et.name),!!Et.name),xe(pe,"".concat(Te,"-spin"),!!Ae||Et.name==="loading"),pe),je),ze=te;ze===void 0&&Ze&&(ze=-1);var De=Qe?{msTransform:"rotate(".concat(Qe,"deg)"),transform:"rotate(".concat(Qe,"deg)")}:void 0,Ct=tt((0,Q.normalizeTwoToneColors)(ie),2),Vt=Ct[0],Ve=Ct[1];return $.createElement("span",ke(fe({role:"img","aria-label":Et.name},Oe),{ref:Ye,tabIndex:ze,onClick:Ze,className:Me}),$.createElement(G.default,{icon:Et,primaryColor:Vt,secondaryColor:Ve,style:De}))});ge.displayName="AntdIcon",ge.getTwoToneColor=K.getTwoToneColor,ge.setTwoToneColor=K.setTwoToneColor;var be=ge},13357:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return w}});var $=F(67294),X=(0,$.createContext)({}),w=X},46648:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return E}});var $=G(F(67294)),X=F(49458);function w(fe,me,ke){return me in fe?Object.defineProperty(fe,me,{value:ke,enumerable:!0,configurable:!0,writable:!0}):fe[me]=ke,fe}function Y(fe){if(typeof WeakMap!="function")return null;var me=new WeakMap,ke=new WeakMap;return(Y=function(Pe){return Pe?ke:me})(fe)}function G(fe,me){if(!me&&fe&&fe.__esModule)return fe;if(fe===null||typeof fe!="object"&&typeof fe!="function")return{default:fe};var ke=Y(me);if(ke&&ke.has(fe))return ke.get(fe);var Pe={},Le=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var tt in fe)if(tt!=="default"&&Object.prototype.hasOwnProperty.call(fe,tt)){var ft=Le?Object.getOwnPropertyDescriptor(fe,tt):null;ft&&(ft.get||ft.set)?Object.defineProperty(Pe,tt,ft):Pe[tt]=fe[tt]}return Pe.default=fe,ke&&ke.set(fe,Pe),Pe}function K(fe){for(var me=1;me<arguments.length;me++){var ke=arguments[me]!=null?arguments[me]:{},Pe=Object.keys(ke);typeof Object.getOwnPropertySymbols=="function"&&(Pe=Pe.concat(Object.getOwnPropertySymbols(ke).filter(function(Le){return Object.getOwnPropertyDescriptor(ke,Le).enumerable}))),Pe.forEach(function(Le){w(fe,Le,ke[Le])})}return fe}function Q(fe,me){var ke=Object.keys(fe);if(Object.getOwnPropertySymbols){var Pe=Object.getOwnPropertySymbols(fe);me&&(Pe=Pe.filter(function(Le){return Object.getOwnPropertyDescriptor(fe,Le).enumerable})),ke.push.apply(ke,Pe)}return ke}function oe(fe,me){return me=me!=null?me:{},Object.getOwnPropertyDescriptors?Object.defineProperties(fe,Object.getOwnPropertyDescriptors(me)):Q(Object(me)).forEach(function(ke){Object.defineProperty(fe,ke,Object.getOwnPropertyDescriptor(me,ke))}),fe}function ee(fe,me){if(fe==null)return{};var ke=xe(fe,me),Pe,Le;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(fe);for(Le=0;Le<tt.length;Le++)Pe=tt[Le],!(me.indexOf(Pe)>=0)&&Object.prototype.propertyIsEnumerable.call(fe,Pe)&&(ke[Pe]=fe[Pe])}return ke}function xe(fe,me){if(fe==null)return{};var ke={},Pe=Object.keys(fe),Le,tt;for(tt=0;tt<Pe.length;tt++)Le=Pe[tt],!(me.indexOf(Le)>=0)&&(ke[Le]=fe[Le]);return ke}var ce={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function he(fe){var me=fe.primaryColor,ke=fe.secondaryColor;ce.primaryColor=me,ce.secondaryColor=ke||(0,X.getSecondaryColor)(me),ce.calculated=!!ke}function J(){return K({},ce)}var M=function(fe){var me=fe.icon,ke=fe.className,Pe=fe.onClick,Le=fe.style,tt=fe.primaryColor,ft=fe.secondaryColor,ge=ee(fe,["icon","className","onClick","style","primaryColor","secondaryColor"]),be=$.useRef(),Ce=ce;if(tt&&(Ce={primaryColor:tt,secondaryColor:ft||(0,X.getSecondaryColor)(tt)}),(0,X.useInsertStyles)(be),(0,X.warning)((0,X.isIconDefinition)(me),"icon should be icon definiton, but got ".concat(me)),!(0,X.isIconDefinition)(me))return null;var Ye=me;return Ye&&typeof Ye.icon=="function"&&(Ye=oe(K({},Ye),{icon:Ye.icon(Ce.primaryColor,Ce.secondaryColor)})),(0,X.generate)(Ye.icon,"svg-".concat(Ye.name),oe(K({className:ke,onClick:Pe,style:Le,"data-icon":Ye.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},ge),{ref:be}))};M.displayName="IconReact",M.getTwoToneColors=J,M.setTwoToneColors=he;var E=M},46338:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0});function $(J,M){for(var E in M)Object.defineProperty(J,E,{enumerable:!0,get:M[E]})}$(N,{setTwoToneColor:function(){return ce},getTwoToneColor:function(){return he}});var X=K(F(46648)),w=F(49458);function Y(J,M){(M==null||M>J.length)&&(M=J.length);for(var E=0,fe=new Array(M);E<M;E++)fe[E]=J[E];return fe}function G(J){if(Array.isArray(J))return J}function K(J){return J&&J.__esModule?J:{default:J}}function Q(J,M){var E=J==null?null:typeof Symbol!="undefined"&&J[Symbol.iterator]||J["@@iterator"];if(E!=null){var fe=[],me=!0,ke=!1,Pe,Le;try{for(E=E.call(J);!(me=(Pe=E.next()).done)&&(fe.push(Pe.value),!(M&&fe.length===M));me=!0);}catch(tt){ke=!0,Le=tt}finally{try{!me&&E.return!=null&&E.return()}finally{if(ke)throw Le}}return fe}}function oe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ee(J,M){return G(J)||Q(J,M)||xe(J,M)||oe()}function xe(J,M){if(J){if(typeof J=="string")return Y(J,M);var E=Object.prototype.toString.call(J).slice(8,-1);if(E==="Object"&&J.constructor&&(E=J.constructor.name),E==="Map"||E==="Set")return Array.from(E);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return Y(J,M)}}function ce(J){var M=ee((0,w.normalizeTwoToneColors)(J),2),E=M[0],fe=M[1];return X.default.setTwoToneColors({primaryColor:E,secondaryColor:fe})}function he(){var J=X.default.getTwoToneColors();return J.calculated?[J.primaryColor,J.secondaryColor]:J.primaryColor}},71079:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return he}});var $=Q(F(67294)),X=G(F(25330)),w=G(F(26545));function Y(J,M,E){return M in J?Object.defineProperty(J,M,{value:E,enumerable:!0,configurable:!0,writable:!0}):J[M]=E,J}function G(J){return J&&J.__esModule?J:{default:J}}function K(J){if(typeof WeakMap!="function")return null;var M=new WeakMap,E=new WeakMap;return(K=function(fe){return fe?E:M})(J)}function Q(J,M){if(!M&&J&&J.__esModule)return J;if(J===null||typeof J!="object"&&typeof J!="function")return{default:J};var E=K(M);if(E&&E.has(J))return E.get(J);var fe={},me=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ke in J)if(ke!=="default"&&Object.prototype.hasOwnProperty.call(J,ke)){var Pe=me?Object.getOwnPropertyDescriptor(J,ke):null;Pe&&(Pe.get||Pe.set)?Object.defineProperty(fe,ke,Pe):fe[ke]=J[ke]}return fe.default=J,E&&E.set(J,fe),fe}function oe(J){for(var M=1;M<arguments.length;M++){var E=arguments[M]!=null?arguments[M]:{},fe=Object.keys(E);typeof Object.getOwnPropertySymbols=="function"&&(fe=fe.concat(Object.getOwnPropertySymbols(E).filter(function(me){return Object.getOwnPropertyDescriptor(E,me).enumerable}))),fe.forEach(function(me){Y(J,me,E[me])})}return J}function ee(J,M){var E=Object.keys(J);if(Object.getOwnPropertySymbols){var fe=Object.getOwnPropertySymbols(J);M&&(fe=fe.filter(function(me){return Object.getOwnPropertyDescriptor(J,me).enumerable})),E.push.apply(E,fe)}return E}function xe(J,M){return M=M!=null?M:{},Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(M)):ee(Object(M)).forEach(function(E){Object.defineProperty(J,E,Object.getOwnPropertyDescriptor(M,E))}),J}var ce=function(J,M){return $.createElement(w.default,xe(oe({},J),{ref:M,icon:X.default}))},he=$.forwardRef(ce)},72225:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return he}});var $=Q(F(67294)),X=G(F(67303)),w=G(F(26545));function Y(J,M,E){return M in J?Object.defineProperty(J,M,{value:E,enumerable:!0,configurable:!0,writable:!0}):J[M]=E,J}function G(J){return J&&J.__esModule?J:{default:J}}function K(J){if(typeof WeakMap!="function")return null;var M=new WeakMap,E=new WeakMap;return(K=function(fe){return fe?E:M})(J)}function Q(J,M){if(!M&&J&&J.__esModule)return J;if(J===null||typeof J!="object"&&typeof J!="function")return{default:J};var E=K(M);if(E&&E.has(J))return E.get(J);var fe={},me=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ke in J)if(ke!=="default"&&Object.prototype.hasOwnProperty.call(J,ke)){var Pe=me?Object.getOwnPropertyDescriptor(J,ke):null;Pe&&(Pe.get||Pe.set)?Object.defineProperty(fe,ke,Pe):fe[ke]=J[ke]}return fe.default=J,E&&E.set(J,fe),fe}function oe(J){for(var M=1;M<arguments.length;M++){var E=arguments[M]!=null?arguments[M]:{},fe=Object.keys(E);typeof Object.getOwnPropertySymbols=="function"&&(fe=fe.concat(Object.getOwnPropertySymbols(E).filter(function(me){return Object.getOwnPropertyDescriptor(E,me).enumerable}))),fe.forEach(function(me){Y(J,me,E[me])})}return J}function ee(J,M){var E=Object.keys(J);if(Object.getOwnPropertySymbols){var fe=Object.getOwnPropertySymbols(J);M&&(fe=fe.filter(function(me){return Object.getOwnPropertyDescriptor(J,me).enumerable})),E.push.apply(E,fe)}return E}function xe(J,M){return M=M!=null?M:{},Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(M)):ee(Object(M)).forEach(function(E){Object.defineProperty(J,E,Object.getOwnPropertyDescriptor(M,E))}),J}var ce=function(J,M){return $.createElement(w.default,xe(oe({},J),{ref:M,icon:X.default}))},he=$.forwardRef(ce)},29539:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return he}});var $=Q(F(67294)),X=G(F(83647)),w=G(F(26545));function Y(J,M,E){return M in J?Object.defineProperty(J,M,{value:E,enumerable:!0,configurable:!0,writable:!0}):J[M]=E,J}function G(J){return J&&J.__esModule?J:{default:J}}function K(J){if(typeof WeakMap!="function")return null;var M=new WeakMap,E=new WeakMap;return(K=function(fe){return fe?E:M})(J)}function Q(J,M){if(!M&&J&&J.__esModule)return J;if(J===null||typeof J!="object"&&typeof J!="function")return{default:J};var E=K(M);if(E&&E.has(J))return E.get(J);var fe={},me=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ke in J)if(ke!=="default"&&Object.prototype.hasOwnProperty.call(J,ke)){var Pe=me?Object.getOwnPropertyDescriptor(J,ke):null;Pe&&(Pe.get||Pe.set)?Object.defineProperty(fe,ke,Pe):fe[ke]=J[ke]}return fe.default=J,E&&E.set(J,fe),fe}function oe(J){for(var M=1;M<arguments.length;M++){var E=arguments[M]!=null?arguments[M]:{},fe=Object.keys(E);typeof Object.getOwnPropertySymbols=="function"&&(fe=fe.concat(Object.getOwnPropertySymbols(E).filter(function(me){return Object.getOwnPropertyDescriptor(E,me).enumerable}))),fe.forEach(function(me){Y(J,me,E[me])})}return J}function ee(J,M){var E=Object.keys(J);if(Object.getOwnPropertySymbols){var fe=Object.getOwnPropertySymbols(J);M&&(fe=fe.filter(function(me){return Object.getOwnPropertyDescriptor(J,me).enumerable})),E.push.apply(E,fe)}return E}function xe(J,M){return M=M!=null?M:{},Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(M)):ee(Object(M)).forEach(function(E){Object.defineProperty(J,E,Object.getOwnPropertyDescriptor(M,E))}),J}var ce=function(J,M){return $.createElement(w.default,xe(oe({},J),{ref:M,icon:X.default}))},he=$.forwardRef(ce)},54825:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return he}});var $=Q(F(67294)),X=G(F(57583)),w=G(F(26545));function Y(J,M,E){return M in J?Object.defineProperty(J,M,{value:E,enumerable:!0,configurable:!0,writable:!0}):J[M]=E,J}function G(J){return J&&J.__esModule?J:{default:J}}function K(J){if(typeof WeakMap!="function")return null;var M=new WeakMap,E=new WeakMap;return(K=function(fe){return fe?E:M})(J)}function Q(J,M){if(!M&&J&&J.__esModule)return J;if(J===null||typeof J!="object"&&typeof J!="function")return{default:J};var E=K(M);if(E&&E.has(J))return E.get(J);var fe={},me=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ke in J)if(ke!=="default"&&Object.prototype.hasOwnProperty.call(J,ke)){var Pe=me?Object.getOwnPropertyDescriptor(J,ke):null;Pe&&(Pe.get||Pe.set)?Object.defineProperty(fe,ke,Pe):fe[ke]=J[ke]}return fe.default=J,E&&E.set(J,fe),fe}function oe(J){for(var M=1;M<arguments.length;M++){var E=arguments[M]!=null?arguments[M]:{},fe=Object.keys(E);typeof Object.getOwnPropertySymbols=="function"&&(fe=fe.concat(Object.getOwnPropertySymbols(E).filter(function(me){return Object.getOwnPropertyDescriptor(E,me).enumerable}))),fe.forEach(function(me){Y(J,me,E[me])})}return J}function ee(J,M){var E=Object.keys(J);if(Object.getOwnPropertySymbols){var fe=Object.getOwnPropertySymbols(J);M&&(fe=fe.filter(function(me){return Object.getOwnPropertyDescriptor(J,me).enumerable})),E.push.apply(E,fe)}return E}function xe(J,M){return M=M!=null?M:{},Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(M)):ee(Object(M)).forEach(function(E){Object.defineProperty(J,E,Object.getOwnPropertyDescriptor(M,E))}),J}var ce=function(J,M){return $.createElement(w.default,xe(oe({},J),{ref:M,icon:X.default}))},he=$.forwardRef(ce)},43552:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return he}});var $=Q(F(67294)),X=G(F(29260)),w=G(F(26545));function Y(J,M,E){return M in J?Object.defineProperty(J,M,{value:E,enumerable:!0,configurable:!0,writable:!0}):J[M]=E,J}function G(J){return J&&J.__esModule?J:{default:J}}function K(J){if(typeof WeakMap!="function")return null;var M=new WeakMap,E=new WeakMap;return(K=function(fe){return fe?E:M})(J)}function Q(J,M){if(!M&&J&&J.__esModule)return J;if(J===null||typeof J!="object"&&typeof J!="function")return{default:J};var E=K(M);if(E&&E.has(J))return E.get(J);var fe={},me=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ke in J)if(ke!=="default"&&Object.prototype.hasOwnProperty.call(J,ke)){var Pe=me?Object.getOwnPropertyDescriptor(J,ke):null;Pe&&(Pe.get||Pe.set)?Object.defineProperty(fe,ke,Pe):fe[ke]=J[ke]}return fe.default=J,E&&E.set(J,fe),fe}function oe(J){for(var M=1;M<arguments.length;M++){var E=arguments[M]!=null?arguments[M]:{},fe=Object.keys(E);typeof Object.getOwnPropertySymbols=="function"&&(fe=fe.concat(Object.getOwnPropertySymbols(E).filter(function(me){return Object.getOwnPropertyDescriptor(E,me).enumerable}))),fe.forEach(function(me){Y(J,me,E[me])})}return J}function ee(J,M){var E=Object.keys(J);if(Object.getOwnPropertySymbols){var fe=Object.getOwnPropertySymbols(J);M&&(fe=fe.filter(function(me){return Object.getOwnPropertyDescriptor(J,me).enumerable})),E.push.apply(E,fe)}return E}function xe(J,M){return M=M!=null?M:{},Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(M)):ee(Object(M)).forEach(function(E){Object.defineProperty(J,E,Object.getOwnPropertyDescriptor(M,E))}),J}var ce=function(J,M){return $.createElement(w.default,xe(oe({},J),{ref:M,icon:X.default}))},he=$.forwardRef(ce)},49458:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0});function $(ge,be){for(var Ce in be)Object.defineProperty(ge,Ce,{enumerable:!0,get:be[Ce]})}$(N,{warning:function(){return M},isIconDefinition:function(){return E},normalizeAttrs:function(){return fe},generate:function(){return me},getSecondaryColor:function(){return ke},normalizeTwoToneColors:function(){return Pe},svgBaseProps:function(){return Le},iconStyles:function(){return tt},useInsertStyles:function(){return ft}});var X=F(78589),w=F(93399),Y=F(63298),G=ee(F(45520)),K=ce(F(67294)),Q=ee(F(13357));function oe(ge,be,Ce){return be in ge?Object.defineProperty(ge,be,{value:Ce,enumerable:!0,configurable:!0,writable:!0}):ge[be]=Ce,ge}function ee(ge){return ge&&ge.__esModule?ge:{default:ge}}function xe(ge){if(typeof WeakMap!="function")return null;var be=new WeakMap,Ce=new WeakMap;return(xe=function(Ye){return Ye?Ce:be})(ge)}function ce(ge,be){if(!be&&ge&&ge.__esModule)return ge;if(ge===null||typeof ge!="object"&&typeof ge!="function")return{default:ge};var Ce=xe(be);if(Ce&&Ce.has(ge))return Ce.get(ge);var Ye={},je=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Et in ge)if(Et!=="default"&&Object.prototype.hasOwnProperty.call(ge,Et)){var Ae=je?Object.getOwnPropertyDescriptor(ge,Et):null;Ae&&(Ae.get||Ae.set)?Object.defineProperty(Ye,Et,Ae):Ye[Et]=ge[Et]}return Ye.default=ge,Ce&&Ce.set(ge,Ye),Ye}function he(ge){for(var be=1;be<arguments.length;be++){var Ce=arguments[be]!=null?arguments[be]:{},Ye=Object.keys(Ce);typeof Object.getOwnPropertySymbols=="function"&&(Ye=Ye.concat(Object.getOwnPropertySymbols(Ce).filter(function(je){return Object.getOwnPropertyDescriptor(Ce,je).enumerable}))),Ye.forEach(function(je){oe(ge,je,Ce[je])})}return ge}function J(ge){return ge.replace(/-(.)/g,function(be,Ce){return Ce.toUpperCase()})}function M(ge,be){(0,G.default)(ge,"[@ant-design/icons] ".concat(be))}function E(ge){return typeof ge=="object"&&typeof ge.name=="string"&&typeof ge.theme=="string"&&(typeof ge.icon=="object"||typeof ge.icon=="function")}function fe(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(ge).reduce(function(be,Ce){var Ye=ge[Ce];switch(Ce){case"class":be.className=Ye,delete be.class;break;default:delete be[Ce],be[J(Ce)]=Ye}return be},{})}function me(ge,be,Ce){return Ce?K.default.createElement(ge.tag,he({key:be},fe(ge.attrs),Ce),(ge.children||[]).map(function(Ye,je){return me(Ye,"".concat(be,"-").concat(ge.tag,"-").concat(je))})):K.default.createElement(ge.tag,he({key:be},fe(ge.attrs)),(ge.children||[]).map(function(Ye,je){return me(Ye,"".concat(be,"-").concat(ge.tag,"-").concat(je))}))}function ke(ge){return(0,X.generate)(ge)[0]}function Pe(ge){return ge?Array.isArray(ge)?ge:[ge]:[]}var Le={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},tt=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,ft=function(ge){var be=(0,K.useContext)(Q.default),Ce=be.csp,Ye=be.prefixCls,je=tt;Ye&&(je=je.replace(/anticon/g,Ye)),(0,K.useEffect)(function(){var Et=ge.current,Ae=(0,Y.getShadowRoot)(Et);(0,w.updateCSS)(je,"@ant-design-icons",{prepend:!0,csp:Ce,attachTo:Ae})},[])}},56645:function(xt,N){(function(F,$){$(N)})(this,function(F){"use strict";function $(je,Et){return X(je)||w(je,Et)||Y()}function X(je){if(Array.isArray(je))return je}function w(je,Et){var Ae=[],Qe=!0,te=!1,Ze=void 0;try{for(var ie=je[Symbol.iterator](),Oe;!(Qe=(Oe=ie.next()).done)&&(Ae.push(Oe.value),!(Et&&Ae.length===Et));Qe=!0);}catch(nt){te=!0,Ze=nt}finally{try{!Qe&&ie.return!=null&&ie.return()}finally{if(te)throw Ze}}return Ae}function Y(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function G(je,Et,Ae,Qe){je=je.filter(function(ze,De){var Ct=Et(ze,De),Vt=Ae(ze,De);return Ct!=null&&isFinite(Ct)&&Vt!=null&&isFinite(Vt)}),Qe&&je.sort(function(ze,De){return Et(ze)-Et(De)});for(var te=je.length,Ze=new Float64Array(te),ie=new Float64Array(te),Oe=0,nt=0,ye,Te,Je,pe=0;pe<te;)Je=je[pe],Ze[pe]=ye=+Et(Je,pe,je),ie[pe]=Te=+Ae(Je,pe,je),++pe,Oe+=(ye-Oe)/pe,nt+=(Te-nt)/pe;for(var Me=0;Me<te;++Me)Ze[Me]-=Oe,ie[Me]-=nt;return[Ze,ie,Oe,nt]}function K(je,Et,Ae,Qe){for(var te=0,Ze=0,ie=je.length;Ze<ie;Ze++){var Oe=je[Ze],nt=+Et(Oe,Ze,je),ye=+Ae(Oe,Ze,je);nt!=null&&isFinite(nt)&&ye!=null&&isFinite(ye)&&Qe(nt,ye,te++)}}function Q(je,Et,Ae,Qe,te){var Ze=0,ie=0;return K(je,Et,Ae,function(Oe,nt){var ye=nt-te(Oe),Te=nt-Qe;Ze+=ye*ye,ie+=Te*Te}),1-Ze/ie}function oe(je){return Math.atan2(je[1][1]-je[0][1],je[1][0]-je[0][0])*180/Math.PI}function ee(je){return[(je[0][0]+je[1][0])/2,(je[0][1]+je[1][1])/2]}function xe(je,Et,Ae){for(var Qe=Math.log(Et-je)*Math.LOG10E+1|0,te=1*Math.pow(10,-Qe/2-1),Ze=1e4,ie=[nt(je),nt(Et)],Oe=0;ye(ie)&&Oe<Ze;);return ie;function nt(Te){return[Te,Ae(Te)]}function ye(Te){Oe++;for(var Je=Te.length,pe=!1,Me=0;Me<Je-1;Me++){var ze=Te[Me],De=Te[Me+1],Ct=ee([ze,De]),Vt=nt(Ct[0]),Ve=oe([ze,Ct]),Ue=oe([ze,Vt]),Ee=Math.abs(Ve-Ue);Ee>te&&(Te.splice(Me+1,0,Vt),pe=!0)}return pe}}function ce(je,Et,Ae,Qe){var te=Qe-je*je,Ze=Math.abs(te)<1e-24?0:(Ae-je*Et)/te,ie=Et-Ze*je;return[ie,Ze]}function he(){var je=function(Ze){return Ze[0]},Et=function(Ze){return Ze[1]},Ae;function Qe(te){var Ze=0,ie=0,Oe=0,nt=0,ye=0,Te=0,Je=Ae?+Ae[0]:1/0,pe=Ae?+Ae[1]:-1/0;K(te,je,Et,function(Ue,Ee){var et=Math.log(Ee),st=Ue*Ee;++Ze,ie+=(Ee-ie)/Ze,nt+=(st-nt)/Ze,Te+=(Ue*st-Te)/Ze,Oe+=(Ee*et-Oe)/Ze,ye+=(st*et-ye)/Ze,Ae||(Ue<Je&&(Je=Ue),Ue>pe&&(pe=Ue))});var Me=ce(nt/ie,Oe/ie,ye/ie,Te/ie),ze=$(Me,2),De=ze[0],Ct=ze[1];De=Math.exp(De);var Vt=function(Ee){return De*Math.exp(Ct*Ee)},Ve=xe(Je,pe,Vt);return Ve.a=De,Ve.b=Ct,Ve.predict=Vt,Ve.rSquared=Q(te,je,Et,ie,Vt),Ve}return Qe.domain=function(te){return arguments.length?(Ae=te,Qe):Ae},Qe.x=function(te){return arguments.length?(je=te,Qe):je},Qe.y=function(te){return arguments.length?(Et=te,Qe):Et},Qe}function J(){var je=function(Ze){return Ze[0]},Et=function(Ze){return Ze[1]},Ae;function Qe(te){var Ze=0,ie=0,Oe=0,nt=0,ye=0,Te=Ae?+Ae[0]:1/0,Je=Ae?+Ae[1]:-1/0;K(te,je,Et,function(Ve,Ue){++Ze,ie+=(Ve-ie)/Ze,Oe+=(Ue-Oe)/Ze,nt+=(Ve*Ue-nt)/Ze,ye+=(Ve*Ve-ye)/Ze,Ae||(Ve<Te&&(Te=Ve),Ve>Je&&(Je=Ve))});var pe=ce(ie,Oe,nt,ye),Me=$(pe,2),ze=Me[0],De=Me[1],Ct=function(Ue){return De*Ue+ze},Vt=[[Te,Ct(Te)],[Je,Ct(Je)]];return Vt.a=De,Vt.b=ze,Vt.predict=Ct,Vt.rSquared=Q(te,je,Et,Oe,Ct),Vt}return Qe.domain=function(te){return arguments.length?(Ae=te,Qe):Ae},Qe.x=function(te){return arguments.length?(je=te,Qe):je},Qe.y=function(te){return arguments.length?(Et=te,Qe):Et},Qe}function M(je){je.sort(function(Ae,Qe){return Ae-Qe});var Et=je.length/2;return Et%1===0?(je[Et-1]+je[Et])/2:je[Math.floor(Et)]}var E=2,fe=1e-12;function me(){var je=function(Ze){return Ze[0]},Et=function(Ze){return Ze[1]},Ae=.3;function Qe(te){for(var Ze=G(te,je,Et,!0),ie=$(Ze,4),Oe=ie[0],nt=ie[1],ye=ie[2],Te=ie[3],Je=Oe.length,pe=Math.max(2,~~(Ae*Je)),Me=new Float64Array(Je),ze=new Float64Array(Je),De=new Float64Array(Je).fill(1),Ct=-1;++Ct<=E;){for(var Vt=[0,pe-1],Ve=0;Ve<Je;++Ve){for(var Ue=Oe[Ve],Ee=Vt[0],et=Vt[1],st=Ue-Oe[Ee]>Oe[et]-Ue?Ee:et,Re=0,Ie=0,ct=0,Tt=0,Qt=0,wt=1/Math.abs(Oe[st]-Ue||1),se=Ee;se<=et;++se){var Ge=Oe[se],Ke=nt[se],bt=ke(Math.abs(Ue-Ge)*wt)*De[se],Be=Ge*bt;Re+=bt,Ie+=Be,ct+=Ke*bt,Tt+=Ke*Be,Qt+=Ge*Be}var pt=ce(Ie/Re,ct/Re,Tt/Re,Qt/Re),It=$(pt,2),ot=It[0],zt=It[1];Me[Ve]=ot+zt*Ue,ze[Ve]=Math.abs(nt[Ve]-Me[Ve]),Pe(Oe,Ve+1,Vt)}if(Ct===E)break;var Jt=M(ze);if(Math.abs(Jt)<fe)break;for(var tr=0,pr,br;tr<Je;++tr)pr=ze[tr]/(6*Jt),De[tr]=pr>=1?fe:(br=1-pr*pr)*br}return Le(Oe,Me,ye,Te)}return Qe.bandwidth=function(te){return arguments.length?(Ae=te,Qe):Ae},Qe.x=function(te){return arguments.length?(je=te,Qe):je},Qe.y=function(te){return arguments.length?(Et=te,Qe):Et},Qe}function ke(je){return(je=1-je*je*je)*je*je}function Pe(je,Et,Ae){var Qe=je[Et],te=Ae[0],Ze=Ae[1]+1;if(!(Ze>=je.length))for(;Et>te&&je[Ze]-Qe<=Qe-je[te];)Ae[0]=++te,Ae[1]=Ze,++Ze}function Le(je,Et,Ae,Qe){for(var te=je.length,Ze=[],ie=0,Oe=0,nt=[],ye;ie<te;++ie)ye=je[ie]+Ae,nt[0]===ye?nt[1]+=(Et[ie]-nt[1])/++Oe:(Oe=0,nt[1]+=Qe,nt=[ye,Et[ie]],Ze.push(nt));return nt[1]+=Qe,Ze}function tt(){var je=function(ie){return ie[0]},Et=function(ie){return ie[1]},Ae=Math.E,Qe;function te(Ze){var ie=0,Oe=0,nt=0,ye=0,Te=0,Je=Qe?+Qe[0]:1/0,pe=Qe?+Qe[1]:-1/0,Me=Math.log(Ae);K(Ze,je,Et,function(Ee,et){var st=Math.log(Ee)/Me;++ie,Oe+=(st-Oe)/ie,nt+=(et-nt)/ie,ye+=(st*et-ye)/ie,Te+=(st*st-Te)/ie,Qe||(Ee<Je&&(Je=Ee),Ee>pe&&(pe=Ee))});var ze=ce(Oe,nt,ye,Te),De=$(ze,2),Ct=De[0],Vt=De[1],Ve=function(et){return Vt*Math.log(et)/Me+Ct},Ue=xe(Je,pe,Ve);return Ue.a=Vt,Ue.b=Ct,Ue.predict=Ve,Ue.rSquared=Q(Ze,je,Et,nt,Ve),Ue}return te.domain=function(Ze){return arguments.length?(Qe=Ze,te):Qe},te.x=function(Ze){return arguments.length?(je=Ze,te):je},te.y=function(Ze){return arguments.length?(Et=Ze,te):Et},te.base=function(Ze){return arguments.length?(Ae=Ze,te):Ae},te}function ft(){var je=function(Ze){return Ze[0]},Et=function(Ze){return Ze[1]},Ae;function Qe(te){var Ze=G(te,je,Et),ie=$(Ze,4),Oe=ie[0],nt=ie[1],ye=ie[2],Te=ie[3],Je=Oe.length,pe=0,Me=0,ze=0,De=0,Ct=0,Vt,Ve,Ue,Ee;for(Vt=0;Vt<Je;)Ve=Oe[Vt],Ue=nt[Vt++],Ee=Ve*Ve,pe+=(Ee-pe)/Vt,Me+=(Ee*Ve-Me)/Vt,ze+=(Ee*Ee-ze)/Vt,De+=(Ve*Ue-De)/Vt,Ct+=(Ee*Ue-Ct)/Vt;var et=0,st=0,Re=Ae?+Ae[0]:1/0,Ie=Ae?+Ae[1]:-1/0;K(te,je,Et,function(bt,Be){st++,et+=(Be-et)/st,Ae||(bt<Re&&(Re=bt),bt>Ie&&(Ie=bt))});var ct=ze-pe*pe,Tt=pe*ct-Me*Me,Qt=(Ct*pe-De*Me)/Tt,wt=(De*ct-Ct*Me)/Tt,se=-Qt*pe,Ge=function(Be){return Be=Be-ye,Qt*Be*Be+wt*Be+se+Te},Ke=xe(Re,Ie,Ge);return Ke.a=Qt,Ke.b=wt-2*Qt*ye,Ke.c=se-wt*ye+Qt*ye*ye+Te,Ke.predict=Ge,Ke.rSquared=Q(te,je,Et,et,Ge),Ke}return Qe.domain=function(te){return arguments.length?(Ae=te,Qe):Ae},Qe.x=function(te){return arguments.length?(je=te,Qe):je},Qe.y=function(te){return arguments.length?(Et=te,Qe):Et},Qe}function ge(){var je=function(ie){return ie[0]},Et=function(ie){return ie[1]},Ae=3,Qe;function te(Ze){if(Ae===1){var ie=J().x(je).y(Et).domain(Qe)(Ze);return ie.coefficients=[ie.b,ie.a],delete ie.a,delete ie.b,ie}if(Ae===2){var Oe=ft().x(je).y(Et).domain(Qe)(Ze);return Oe.coefficients=[Oe.c,Oe.b,Oe.a],delete Oe.a,delete Oe.b,delete Oe.c,Oe}var nt=G(Ze,je,Et),ye=$(nt,4),Te=ye[0],Je=ye[1],pe=ye[2],Me=ye[3],ze=Te.length,De=[],Ct=[],Vt=Ae+1,Ve=0,Ue=0,Ee=Qe?+Qe[0]:1/0,et=Qe?+Qe[1]:-1/0;K(Ze,je,Et,function(Ge,Ke){++Ue,Ve+=(Ke-Ve)/Ue,Qe||(Ge<Ee&&(Ee=Ge),Ge>et&&(et=Ge))});var st,Re,Ie,ct,Tt;for(st=0;st<Vt;++st){for(Ie=0,ct=0;Ie<ze;++Ie)ct+=Math.pow(Te[Ie],st)*Je[Ie];for(De.push(ct),Tt=new Float64Array(Vt),Re=0;Re<Vt;++Re){for(Ie=0,ct=0;Ie<ze;++Ie)ct+=Math.pow(Te[Ie],st+Re);Tt[Re]=ct}Ct.push(Tt)}Ct.push(De);var Qt=Ce(Ct),wt=function(Ke){Ke-=pe;var bt=Me+Qt[0]+Qt[1]*Ke+Qt[2]*Ke*Ke;for(st=3;st<Vt;++st)bt+=Qt[st]*Math.pow(Ke,st);return bt},se=xe(Ee,et,wt);return se.coefficients=be(Vt,Qt,-pe,Me),se.predict=wt,se.rSquared=Q(Ze,je,Et,Ve,wt),se}return te.domain=function(Ze){return arguments.length?(Qe=Ze,te):Qe},te.x=function(Ze){return arguments.length?(je=Ze,te):je},te.y=function(Ze){return arguments.length?(Et=Ze,te):Et},te.order=function(Ze){return arguments.length?(Ae=Ze,te):Ae},te}function be(je,Et,Ae,Qe){var te=Array(je),Ze,ie,Oe,nt;for(Ze=0;Ze<je;++Ze)te[Ze]=0;for(Ze=je-1;Ze>=0;--Ze)for(Oe=Et[Ze],nt=1,te[Ze]+=Oe,ie=1;ie<=Ze;++ie)nt*=(Ze+1-ie)/ie,te[Ze-ie]+=Oe*Math.pow(Ae,ie)*nt;return te[0]+=Qe,te}function Ce(je){var Et=je.length-1,Ae=[],Qe,te,Ze,ie,Oe;for(Qe=0;Qe<Et;++Qe){for(ie=Qe,te=Qe+1;te<Et;++te)Math.abs(je[Qe][te])>Math.abs(je[Qe][ie])&&(ie=te);for(Ze=Qe;Ze<Et+1;++Ze)Oe=je[Ze][Qe],je[Ze][Qe]=je[Ze][ie],je[Ze][ie]=Oe;for(te=Qe+1;te<Et;++te)for(Ze=Et;Ze>=Qe;Ze--)je[Ze][te]-=je[Ze][Qe]*je[Qe][te]/je[Qe][Qe]}for(te=Et-1;te>=0;--te){for(Oe=0,Ze=te+1;Ze<Et;++Ze)Oe+=je[Ze][te]*Ae[Ze];Ae[te]=(je[Et][te]-Oe)/je[te][te]}return Ae}function Ye(){var je=function(Ze){return Ze[0]},Et=function(Ze){return Ze[1]},Ae;function Qe(te){var Ze=0,ie=0,Oe=0,nt=0,ye=0,Te=0,Je=Ae?+Ae[0]:1/0,pe=Ae?+Ae[1]:-1/0;K(te,je,Et,function(Ue,Ee){var et=Math.log(Ue),st=Math.log(Ee);++Ze,ie+=(et-ie)/Ze,Oe+=(st-Oe)/Ze,nt+=(et*st-nt)/Ze,ye+=(et*et-ye)/Ze,Te+=(Ee-Te)/Ze,Ae||(Ue<Je&&(Je=Ue),Ue>pe&&(pe=Ue))});var Me=ce(ie,Oe,nt,ye),ze=$(Me,2),De=ze[0],Ct=ze[1];De=Math.exp(De);var Vt=function(Ee){return De*Math.pow(Ee,Ct)},Ve=xe(Je,pe,Vt);return Ve.a=De,Ve.b=Ct,Ve.predict=Vt,Ve.rSquared=Q(te,je,Et,Te,Vt),Ve}return Qe.domain=function(te){return arguments.length?(Ae=te,Qe):Ae},Qe.x=function(te){return arguments.length?(je=te,Qe):je},Qe.y=function(te){return arguments.length?(Et=te,Qe):Et},Qe}F.regressionExp=he,F.regressionLinear=J,F.regressionLoess=me,F.regressionLog=tt,F.regressionPoly=ge,F.regressionPow=Ye,F.regressionQuad=ft,Object.defineProperty(F,"__esModule",{value:!0})})},43631:function(xt,N,F){"use strict";F.d(N,{qY:function(){return J}});var $=F(34155),X=function(Le,tt,ft){if(ft||arguments.length===2)for(var ge=0,be=tt.length,Ce;ge<be;ge++)(Ce||!(ge in tt))&&(Ce||(Ce=Array.prototype.slice.call(tt,0,ge)),Ce[ge]=tt[ge]);return Le.concat(Ce||Array.prototype.slice.call(tt))},w=function(){function Le(tt,ft,ge){this.name=tt,this.version=ft,this.os=ge,this.type="browser"}return Le}(),Y=function(){function Le(tt){this.version=tt,this.type="node",this.name="node",this.os=$.platform}return Le}(),G=function(){function Le(tt,ft,ge,be){this.name=tt,this.version=ft,this.os=ge,this.bot=be,this.type="bot-device"}return Le}(),K=function(){function Le(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return Le}(),Q=function(){function Le(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return Le}(),oe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,ee=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,xe=3,ce=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",oe]],he=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function J(Le){return Le?fe(Le):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new Q:typeof navigator!="undefined"?fe(navigator.userAgent):ke()}function M(Le){return Le!==""&&ce.reduce(function(tt,ft){var ge=ft[0],be=ft[1];if(tt)return tt;var Ce=be.exec(Le);return!!Ce&&[ge,Ce]},!1)}function E(Le){var tt=M(Le);return tt?tt[0]:null}function fe(Le){var tt=M(Le);if(!tt)return null;var ft=tt[0],ge=tt[1];if(ft==="searchbot")return new K;var be=ge[1]&&ge[1].split(".").join("_").split("_").slice(0,3);be?be.length<xe&&(be=X(X([],be,!0),Pe(xe-be.length),!0)):be=[];var Ce=be.join("."),Ye=me(Le),je=ee.exec(Le);return je&&je[1]?new G(ft,Ce,Ye,je[1]):new w(ft,Ce,Ye)}function me(Le){for(var tt=0,ft=he.length;tt<ft;tt++){var ge=he[tt],be=ge[0],Ce=ge[1],Ye=Ce.exec(Le);if(Ye)return be}return null}function ke(){var Le=typeof $!="undefined"&&$.version;return Le?new Y($.version.slice(1)):null}function Pe(Le){for(var tt=[],ft=0;ft<Le;ft++)tt.push("0");return tt}},9187:function(xt){"use strict";xt.exports=N,xt.exports.default=N;function N(te,Ze,ie){ie=ie||2;var Oe=Ze&&Ze.length,nt=Oe?Ze[0]*ie:te.length,ye=F(te,0,nt,ie,!0),Te=[];if(!ye||ye.next===ye.prev)return Te;var Je,pe,Me,ze,De,Ct,Vt;if(Oe&&(ye=Q(te,Ze,ye,ie)),te.length>80*ie){Je=Me=te[0],pe=ze=te[1];for(var Ve=ie;Ve<nt;Ve+=ie)De=te[Ve],Ct=te[Ve+1],De<Je&&(Je=De),Ct<pe&&(pe=Ct),De>Me&&(Me=De),Ct>ze&&(ze=Ct);Vt=Math.max(Me-Je,ze-pe),Vt=Vt!==0?32767/Vt:0}return X(ye,Te,ie,Je,pe,Vt,0),Te}function F(te,Ze,ie,Oe,nt){var ye,Te;if(nt===Qe(te,Ze,ie,Oe)>0)for(ye=Ze;ye<ie;ye+=Oe)Te=je(ye,te[ye],te[ye+1],Te);else for(ye=ie-Oe;ye>=Ze;ye-=Oe)Te=je(ye,te[ye],te[ye+1],Te);return Te&&Pe(Te,Te.next)&&(Et(Te),Te=Te.next),Te}function $(te,Ze){if(!te)return te;Ze||(Ze=te);var ie=te,Oe;do if(Oe=!1,!ie.steiner&&(Pe(ie,ie.next)||ke(ie.prev,ie,ie.next)===0)){if(Et(ie),ie=Ze=ie.prev,ie===ie.next)break;Oe=!0}else ie=ie.next;while(Oe||ie!==Ze);return Ze}function X(te,Ze,ie,Oe,nt,ye,Te){if(te){!Te&&ye&&he(te,Oe,nt,ye);for(var Je=te,pe,Me;te.prev!==te.next;){if(pe=te.prev,Me=te.next,ye?Y(te,Oe,nt,ye):w(te)){Ze.push(pe.i/ie|0),Ze.push(te.i/ie|0),Ze.push(Me.i/ie|0),Et(te),te=Me.next,Je=Me.next;continue}if(te=Me,te===Je){Te?Te===1?(te=G($(te),Ze,ie),X(te,Ze,ie,Oe,nt,ye,2)):Te===2&&K(te,Ze,ie,Oe,nt,ye):X($(te),Ze,ie,Oe,nt,ye,1);break}}}}function w(te){var Ze=te.prev,ie=te,Oe=te.next;if(ke(Ze,ie,Oe)>=0)return!1;for(var nt=Ze.x,ye=ie.x,Te=Oe.x,Je=Ze.y,pe=ie.y,Me=Oe.y,ze=nt<ye?nt<Te?nt:Te:ye<Te?ye:Te,De=Je<pe?Je<Me?Je:Me:pe<Me?pe:Me,Ct=nt>ye?nt>Te?nt:Te:ye>Te?ye:Te,Vt=Je>pe?Je>Me?Je:Me:pe>Me?pe:Me,Ve=Oe.next;Ve!==Ze;){if(Ve.x>=ze&&Ve.x<=Ct&&Ve.y>=De&&Ve.y<=Vt&&fe(nt,Je,ye,pe,Te,Me,Ve.x,Ve.y)&&ke(Ve.prev,Ve,Ve.next)>=0)return!1;Ve=Ve.next}return!0}function Y(te,Ze,ie,Oe){var nt=te.prev,ye=te,Te=te.next;if(ke(nt,ye,Te)>=0)return!1;for(var Je=nt.x,pe=ye.x,Me=Te.x,ze=nt.y,De=ye.y,Ct=Te.y,Vt=Je<pe?Je<Me?Je:Me:pe<Me?pe:Me,Ve=ze<De?ze<Ct?ze:Ct:De<Ct?De:Ct,Ue=Je>pe?Je>Me?Je:Me:pe>Me?pe:Me,Ee=ze>De?ze>Ct?ze:Ct:De>Ct?De:Ct,et=M(Vt,Ve,Ze,ie,Oe),st=M(Ue,Ee,Ze,ie,Oe),Re=te.prevZ,Ie=te.nextZ;Re&&Re.z>=et&&Ie&&Ie.z<=st;){if(Re.x>=Vt&&Re.x<=Ue&&Re.y>=Ve&&Re.y<=Ee&&Re!==nt&&Re!==Te&&fe(Je,ze,pe,De,Me,Ct,Re.x,Re.y)&&ke(Re.prev,Re,Re.next)>=0||(Re=Re.prevZ,Ie.x>=Vt&&Ie.x<=Ue&&Ie.y>=Ve&&Ie.y<=Ee&&Ie!==nt&&Ie!==Te&&fe(Je,ze,pe,De,Me,Ct,Ie.x,Ie.y)&&ke(Ie.prev,Ie,Ie.next)>=0))return!1;Ie=Ie.nextZ}for(;Re&&Re.z>=et;){if(Re.x>=Vt&&Re.x<=Ue&&Re.y>=Ve&&Re.y<=Ee&&Re!==nt&&Re!==Te&&fe(Je,ze,pe,De,Me,Ct,Re.x,Re.y)&&ke(Re.prev,Re,Re.next)>=0)return!1;Re=Re.prevZ}for(;Ie&&Ie.z<=st;){if(Ie.x>=Vt&&Ie.x<=Ue&&Ie.y>=Ve&&Ie.y<=Ee&&Ie!==nt&&Ie!==Te&&fe(Je,ze,pe,De,Me,Ct,Ie.x,Ie.y)&&ke(Ie.prev,Ie,Ie.next)>=0)return!1;Ie=Ie.nextZ}return!0}function G(te,Ze,ie){var Oe=te;do{var nt=Oe.prev,ye=Oe.next.next;!Pe(nt,ye)&&Le(nt,Oe,Oe.next,ye)&&be(nt,ye)&&be(ye,nt)&&(Ze.push(nt.i/ie|0),Ze.push(Oe.i/ie|0),Ze.push(ye.i/ie|0),Et(Oe),Et(Oe.next),Oe=te=ye),Oe=Oe.next}while(Oe!==te);return $(Oe)}function K(te,Ze,ie,Oe,nt,ye){var Te=te;do{for(var Je=Te.next.next;Je!==Te.prev;){if(Te.i!==Je.i&&me(Te,Je)){var pe=Ye(Te,Je);Te=$(Te,Te.next),pe=$(pe,pe.next),X(Te,Ze,ie,Oe,nt,ye,0),X(pe,Ze,ie,Oe,nt,ye,0);return}Je=Je.next}Te=Te.next}while(Te!==te)}function Q(te,Ze,ie,Oe){var nt=[],ye,Te,Je,pe,Me;for(ye=0,Te=Ze.length;ye<Te;ye++)Je=Ze[ye]*Oe,pe=ye<Te-1?Ze[ye+1]*Oe:te.length,Me=F(te,Je,pe,Oe,!1),Me===Me.next&&(Me.steiner=!0),nt.push(E(Me));for(nt.sort(oe),ye=0;ye<nt.length;ye++)ie=ee(nt[ye],ie);return ie}function oe(te,Ze){return te.x-Ze.x}function ee(te,Ze){var ie=xe(te,Ze);if(!ie)return Ze;var Oe=Ye(ie,te);return $(Oe,Oe.next),$(ie,ie.next)}function xe(te,Ze){var ie=Ze,Oe=te.x,nt=te.y,ye=-1/0,Te;do{if(nt<=ie.y&&nt>=ie.next.y&&ie.next.y!==ie.y){var Je=ie.x+(nt-ie.y)*(ie.next.x-ie.x)/(ie.next.y-ie.y);if(Je<=Oe&&Je>ye&&(ye=Je,Te=ie.x<ie.next.x?ie:ie.next,Je===Oe))return Te}ie=ie.next}while(ie!==Ze);if(!Te)return null;var pe=Te,Me=Te.x,ze=Te.y,De=1/0,Ct;ie=Te;do Oe>=ie.x&&ie.x>=Me&&Oe!==ie.x&&fe(nt<ze?Oe:ye,nt,Me,ze,nt<ze?ye:Oe,nt,ie.x,ie.y)&&(Ct=Math.abs(nt-ie.y)/(Oe-ie.x),be(ie,te)&&(Ct<De||Ct===De&&(ie.x>Te.x||ie.x===Te.x&&ce(Te,ie)))&&(Te=ie,De=Ct)),ie=ie.next;while(ie!==pe);return Te}function ce(te,Ze){return ke(te.prev,te,Ze.prev)<0&&ke(Ze.next,te,te.next)<0}function he(te,Ze,ie,Oe){var nt=te;do nt.z===0&&(nt.z=M(nt.x,nt.y,Ze,ie,Oe)),nt.prevZ=nt.prev,nt.nextZ=nt.next,nt=nt.next;while(nt!==te);nt.prevZ.nextZ=null,nt.prevZ=null,J(nt)}function J(te){var Ze,ie,Oe,nt,ye,Te,Je,pe,Me=1;do{for(ie=te,te=null,ye=null,Te=0;ie;){for(Te++,Oe=ie,Je=0,Ze=0;Ze<Me&&(Je++,Oe=Oe.nextZ,!!Oe);Ze++);for(pe=Me;Je>0||pe>0&&Oe;)Je!==0&&(pe===0||!Oe||ie.z<=Oe.z)?(nt=ie,ie=ie.nextZ,Je--):(nt=Oe,Oe=Oe.nextZ,pe--),ye?ye.nextZ=nt:te=nt,nt.prevZ=ye,ye=nt;ie=Oe}ye.nextZ=null,Me*=2}while(Te>1);return te}function M(te,Ze,ie,Oe,nt){return te=(te-ie)*nt|0,Ze=(Ze-Oe)*nt|0,te=(te|te<<8)&16711935,te=(te|te<<4)&252645135,te=(te|te<<2)&858993459,te=(te|te<<1)&1431655765,Ze=(Ze|Ze<<8)&16711935,Ze=(Ze|Ze<<4)&252645135,Ze=(Ze|Ze<<2)&858993459,Ze=(Ze|Ze<<1)&1431655765,te|Ze<<1}function E(te){var Ze=te,ie=te;do(Ze.x<ie.x||Ze.x===ie.x&&Ze.y<ie.y)&&(ie=Ze),Ze=Ze.next;while(Ze!==te);return ie}function fe(te,Ze,ie,Oe,nt,ye,Te,Je){return(nt-Te)*(Ze-Je)>=(te-Te)*(ye-Je)&&(te-Te)*(Oe-Je)>=(ie-Te)*(Ze-Je)&&(ie-Te)*(ye-Je)>=(nt-Te)*(Oe-Je)}function me(te,Ze){return te.next.i!==Ze.i&&te.prev.i!==Ze.i&&!ge(te,Ze)&&(be(te,Ze)&&be(Ze,te)&&Ce(te,Ze)&&(ke(te.prev,te,Ze.prev)||ke(te,Ze.prev,Ze))||Pe(te,Ze)&&ke(te.prev,te,te.next)>0&&ke(Ze.prev,Ze,Ze.next)>0)}function ke(te,Ze,ie){return(Ze.y-te.y)*(ie.x-Ze.x)-(Ze.x-te.x)*(ie.y-Ze.y)}function Pe(te,Ze){return te.x===Ze.x&&te.y===Ze.y}function Le(te,Ze,ie,Oe){var nt=ft(ke(te,Ze,ie)),ye=ft(ke(te,Ze,Oe)),Te=ft(ke(ie,Oe,te)),Je=ft(ke(ie,Oe,Ze));return!!(nt!==ye&&Te!==Je||nt===0&&tt(te,ie,Ze)||ye===0&&tt(te,Oe,Ze)||Te===0&&tt(ie,te,Oe)||Je===0&&tt(ie,Ze,Oe))}function tt(te,Ze,ie){return Ze.x<=Math.max(te.x,ie.x)&&Ze.x>=Math.min(te.x,ie.x)&&Ze.y<=Math.max(te.y,ie.y)&&Ze.y>=Math.min(te.y,ie.y)}function ft(te){return te>0?1:te<0?-1:0}function ge(te,Ze){var ie=te;do{if(ie.i!==te.i&&ie.next.i!==te.i&&ie.i!==Ze.i&&ie.next.i!==Ze.i&&Le(ie,ie.next,te,Ze))return!0;ie=ie.next}while(ie!==te);return!1}function be(te,Ze){return ke(te.prev,te,te.next)<0?ke(te,Ze,te.next)>=0&&ke(te,te.prev,Ze)>=0:ke(te,Ze,te.prev)<0||ke(te,te.next,Ze)<0}function Ce(te,Ze){var ie=te,Oe=!1,nt=(te.x+Ze.x)/2,ye=(te.y+Ze.y)/2;do ie.y>ye!=ie.next.y>ye&&ie.next.y!==ie.y&&nt<(ie.next.x-ie.x)*(ye-ie.y)/(ie.next.y-ie.y)+ie.x&&(Oe=!Oe),ie=ie.next;while(ie!==te);return Oe}function Ye(te,Ze){var ie=new Ae(te.i,te.x,te.y),Oe=new Ae(Ze.i,Ze.x,Ze.y),nt=te.next,ye=Ze.prev;return te.next=Ze,Ze.prev=te,ie.next=nt,nt.prev=ie,Oe.next=ie,ie.prev=Oe,ye.next=Oe,Oe.prev=ye,Oe}function je(te,Ze,ie,Oe){var nt=new Ae(te,Ze,ie);return Oe?(nt.next=Oe.next,nt.prev=Oe,Oe.next.prev=nt,Oe.next=nt):(nt.prev=nt,nt.next=nt),nt}function Et(te){te.next.prev=te.prev,te.prev.next=te.next,te.prevZ&&(te.prevZ.nextZ=te.nextZ),te.nextZ&&(te.nextZ.prevZ=te.prevZ)}function Ae(te,Ze,ie){this.i=te,this.x=Ze,this.y=ie,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}N.deviation=function(te,Ze,ie,Oe){var nt=Ze&&Ze.length,ye=nt?Ze[0]*ie:te.length,Te=Math.abs(Qe(te,0,ye,ie));if(nt)for(var Je=0,pe=Ze.length;Je<pe;Je++){var Me=Ze[Je]*ie,ze=Je<pe-1?Ze[Je+1]*ie:te.length;Te-=Math.abs(Qe(te,Me,ze,ie))}var De=0;for(Je=0;Je<Oe.length;Je+=3){var Ct=Oe[Je]*ie,Vt=Oe[Je+1]*ie,Ve=Oe[Je+2]*ie;De+=Math.abs((te[Ct]-te[Ve])*(te[Vt+1]-te[Ct+1])-(te[Ct]-te[Vt])*(te[Ve+1]-te[Ct+1]))}return Te===0&&De===0?0:Math.abs((De-Te)/Te)};function Qe(te,Ze,ie,Oe){for(var nt=0,ye=Ze,Te=ie-Oe;ye<ie;ye+=Oe)nt+=(te[Te]-te[ye])*(te[ye+1]+te[Te+1]),Te=ye;return nt}N.flatten=function(te){for(var Ze=te[0][0].length,ie={vertices:[],holes:[],dimensions:Ze},Oe=0,nt=0;nt<te.length;nt++){for(var ye=0;ye<te[nt].length;ye++)for(var Te=0;Te<Ze;Te++)ie.vertices.push(te[nt][ye][Te]);nt>0&&(Oe+=te[nt-1].length,ie.holes.push(Oe))}return ie}},67709:function(xt){function N($){var X=$.target||$.srcElement;X.__resizeRAF__&&cancelAnimationFrame(X.__resizeRAF__),X.__resizeRAF__=requestAnimationFrame(function(){var w=X.__resizeTrigger__,Y=w&&w.__resizeListeners__;Y&&Y.forEach(function(G){G.call(w,$)})})}var F=function(X,w){var Y=this,G=Y.document,K,Q=G.attachEvent;typeof navigator!="undefined"&&(K=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/));function oe(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",N)}if(!X.__resizeListeners__)if(X.__resizeListeners__=[],Q)X.__resizeTrigger__=X,X.attachEvent("onresize",N);else{getComputedStyle(X).position==="static"&&(X.style.position="relative");var ee=X.__resizeTrigger__=G.createElement("object");ee.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),ee.setAttribute("class","resize-sensor"),ee.setAttribute("tabindex","-1"),ee.setAttribute("title",""),ee.__resizeElement__=X,ee.onload=oe,ee.type="text/html",K&&X.appendChild(ee),ee.data="about:blank",K||X.appendChild(ee)}X.__resizeListeners__.push(w)};xt.exports=typeof window=="undefined"?F:F.bind(window),xt.exports.unbind=function($,X){var w=document.attachEvent,Y=$.__resizeListeners__||[];if(X){var G=Y.indexOf(X);G!==-1&&Y.splice(G,1)}else Y=$.__resizeListeners__=[];if(!Y.length){if(w)$.detachEvent("onresize",N);else if($.__resizeTrigger__){var K=$.__resizeTrigger__.contentDocument,Q=K&&K.defaultView;Q&&(Q.removeEventListener("resize",N),delete Q.__resizeTrigger__),$.__resizeTrigger__=!$.removeChild($.__resizeTrigger__)}delete $.__resizeListeners__}}},26729:function(xt){"use strict";var N=Object.prototype.hasOwnProperty,F="~";function $(){}Object.create&&($.prototype=Object.create(null),new $().__proto__||(F=!1));function X(K,Q,oe){this.fn=K,this.context=Q,this.once=oe||!1}function w(K,Q,oe,ee,xe){if(typeof oe!="function")throw new TypeError("The listener must be a function");var ce=new X(oe,ee||K,xe),he=F?F+Q:Q;return K._events[he]?K._events[he].fn?K._events[he]=[K._events[he],ce]:K._events[he].push(ce):(K._events[he]=ce,K._eventsCount++),K}function Y(K,Q){--K._eventsCount===0?K._events=new $:delete K._events[Q]}function G(){this._events=new $,this._eventsCount=0}G.prototype.eventNames=function(){var Q=[],oe,ee;if(this._eventsCount===0)return Q;for(ee in oe=this._events)N.call(oe,ee)&&Q.push(F?ee.slice(1):ee);return Object.getOwnPropertySymbols?Q.concat(Object.getOwnPropertySymbols(oe)):Q},G.prototype.listeners=function(Q){var oe=F?F+Q:Q,ee=this._events[oe];if(!ee)return[];if(ee.fn)return[ee.fn];for(var xe=0,ce=ee.length,he=new Array(ce);xe<ce;xe++)he[xe]=ee[xe].fn;return he},G.prototype.listenerCount=function(Q){var oe=F?F+Q:Q,ee=this._events[oe];return ee?ee.fn?1:ee.length:0},G.prototype.emit=function(Q,oe,ee,xe,ce,he){var J=F?F+Q:Q;if(!this._events[J])return!1;var M=this._events[J],E=arguments.length,fe,me;if(M.fn){switch(M.once&&this.removeListener(Q,M.fn,void 0,!0),E){case 1:return M.fn.call(M.context),!0;case 2:return M.fn.call(M.context,oe),!0;case 3:return M.fn.call(M.context,oe,ee),!0;case 4:return M.fn.call(M.context,oe,ee,xe),!0;case 5:return M.fn.call(M.context,oe,ee,xe,ce),!0;case 6:return M.fn.call(M.context,oe,ee,xe,ce,he),!0}for(me=1,fe=new Array(E-1);me<E;me++)fe[me-1]=arguments[me];M.fn.apply(M.context,fe)}else{var ke=M.length,Pe;for(me=0;me<ke;me++)switch(M[me].once&&this.removeListener(Q,M[me].fn,void 0,!0),E){case 1:M[me].fn.call(M[me].context);break;case 2:M[me].fn.call(M[me].context,oe);break;case 3:M[me].fn.call(M[me].context,oe,ee);break;case 4:M[me].fn.call(M[me].context,oe,ee,xe);break;default:if(!fe)for(Pe=1,fe=new Array(E-1);Pe<E;Pe++)fe[Pe-1]=arguments[Pe];M[me].fn.apply(M[me].context,fe)}}return!0},G.prototype.on=function(Q,oe,ee){return w(this,Q,oe,ee,!1)},G.prototype.once=function(Q,oe,ee){return w(this,Q,oe,ee,!0)},G.prototype.removeListener=function(Q,oe,ee,xe){var ce=F?F+Q:Q;if(!this._events[ce])return this;if(!oe)return Y(this,ce),this;var he=this._events[ce];if(he.fn)he.fn===oe&&(!xe||he.once)&&(!ee||he.context===ee)&&Y(this,ce);else{for(var J=0,M=[],E=he.length;J<E;J++)(he[J].fn!==oe||xe&&!he[J].once||ee&&he[J].context!==ee)&&M.push(he[J]);M.length?this._events[ce]=M.length===1?M[0]:M:Y(this,ce)}return this},G.prototype.removeAllListeners=function(Q){var oe;return Q?(oe=F?F+Q:Q,this._events[oe]&&Y(this,oe)):(this._events=new $,this._eventsCount=0),this},G.prototype.off=G.prototype.removeListener,G.prototype.addListener=G.prototype.on,G.prefixed=F,G.EventEmitter=G,xt.exports=G},87026:function(xt,N){(function(F,$){$(N)})(this,function(F){"use strict";function $(J,M,E,fe){fe=fe||{};var me=fe.maxIterations||100,ke=fe.tolerance||1e-10,Pe=J(M),Le=J(E),tt=E-M;if(Pe*Le>0)throw"Initial bisect points must have opposite signs";if(Pe===0)return M;if(Le===0)return E;for(var ft=0;ft<me;++ft){tt/=2;var ge=M+tt,be=J(ge);if(be*Pe>=0&&(M=ge),Math.abs(tt)<ke||be===0)return ge}return M+tt}function X(J){for(var M=new Array(J),E=0;E<J;++E)M[E]=0;return M}function w(J,M){return X(J).map(function(){return X(M)})}function Y(J,M){for(var E=0,fe=0;fe<J.length;++fe)E+=J[fe]*M[fe];return E}function G(J){return Math.sqrt(Y(J,J))}function K(J,M,E){for(var fe=0;fe<M.length;++fe)J[fe]=M[fe]*E}function Q(J,M,E,fe,me){for(var ke=0;ke<J.length;++ke)J[ke]=M*E[ke]+fe*me[ke]}function oe(J,M,E){E=E||{};var fe=E.maxIterations||M.length*200,me=E.nonZeroDelta||1.05,ke=E.zeroDelta||.001,Pe=E.minErrorDelta||1e-6,Le=E.minErrorDelta||1e-5,tt=E.rho!==void 0?E.rho:1,ft=E.chi!==void 0?E.chi:2,ge=E.psi!==void 0?E.psi:-.5,be=E.sigma!==void 0?E.sigma:.5,Ce,Ye=M.length,je=new Array(Ye+1);je[0]=M,je[0].fx=J(M),je[0].id=0;for(var Et=0;Et<Ye;++Et){var Ae=M.slice();Ae[Et]=Ae[Et]?Ae[Et]*me:ke,je[Et+1]=Ae,je[Et+1].fx=J(Ae),je[Et+1].id=Et+1}function Qe(ze){for(var De=0;De<ze.length;De++)je[Ye][De]=ze[De];je[Ye].fx=ze.fx}for(var te=function(ze,De){return ze.fx-De.fx},Ze=M.slice(),ie=M.slice(),Oe=M.slice(),nt=M.slice(),ye=0;ye<fe;++ye){if(je.sort(te),E.history){var Te=je.map(function(ze){var De=ze.slice();return De.fx=ze.fx,De.id=ze.id,De});Te.sort(function(ze,De){return ze.id-De.id}),E.history.push({x:je[0].slice(),fx:je[0].fx,simplex:Te})}for(Ce=0,Et=0;Et<Ye;++Et)Ce=Math.max(Ce,Math.abs(je[0][Et]-je[1][Et]));if(Math.abs(je[0].fx-je[Ye].fx)<Pe&&Ce<Le)break;for(Et=0;Et<Ye;++Et){Ze[Et]=0;for(var Je=0;Je<Ye;++Je)Ze[Et]+=je[Je][Et];Ze[Et]/=Ye}var pe=je[Ye];if(Q(ie,1+tt,Ze,-tt,pe),ie.fx=J(ie),ie.fx<je[0].fx)Q(nt,1+ft,Ze,-ft,pe),nt.fx=J(nt),nt.fx<ie.fx?Qe(nt):Qe(ie);else if(ie.fx>=je[Ye-1].fx){var Me=!1;if(ie.fx>pe.fx?(Q(Oe,1+ge,Ze,-ge,pe),Oe.fx=J(Oe),Oe.fx<pe.fx?Qe(Oe):Me=!0):(Q(Oe,1-ge*tt,Ze,ge*tt,pe),Oe.fx=J(Oe),Oe.fx<ie.fx?Qe(Oe):Me=!0),Me){if(be>=1)break;for(Et=1;Et<je.length;++Et)Q(je[Et],1-be,je[0],be,je[Et]),je[Et].fx=J(je[Et])}}else Qe(ie)}return je.sort(te),{fx:je[0].fx,x:je[0]}}function ee(J,M,E,fe,me,ke,Pe){var Le=E.fx,tt=Y(E.fxprime,M),ft=Le,ge=Le,be=tt,Ce=0;me=me||1,ke=ke||1e-6,Pe=Pe||.1;function Ye(Et,Ae,Qe){for(var te=0;te<16;++te)if(me=(Et+Ae)/2,Q(fe.x,1,E.x,me,M),ft=fe.fx=J(fe.x,fe.fxprime),be=Y(fe.fxprime,M),ft>Le+ke*me*tt||ft>=Qe)Ae=me;else{if(Math.abs(be)<=-Pe*tt)return me;be*(Ae-Et)>=0&&(Ae=Et),Et=me,Qe=ft}return 0}for(var je=0;je<10;++je){if(Q(fe.x,1,E.x,me,M),ft=fe.fx=J(fe.x,fe.fxprime),be=Y(fe.fxprime,M),ft>Le+ke*me*tt||je&&ft>=ge)return Ye(Ce,me,ge);if(Math.abs(be)<=-Pe*tt)return me;if(be>=0)return Ye(me,Ce,ft);ge=ft,Ce=me,me*=2}return me}function xe(J,M,E){var fe={x:M.slice(),fx:0,fxprime:M.slice()},me={x:M.slice(),fx:0,fxprime:M.slice()},ke=M.slice(),Pe,Le,tt=1,ft;E=E||{},ft=E.maxIterations||M.length*20,fe.fx=J(fe.x,fe.fxprime),Pe=fe.fxprime.slice(),K(Pe,fe.fxprime,-1);for(var ge=0;ge<ft;++ge){if(tt=ee(J,Pe,fe,me,tt),E.history&&E.history.push({x:fe.x.slice(),fx:fe.fx,fxprime:fe.fxprime.slice(),alpha:tt}),!tt)K(Pe,fe.fxprime,-1);else{Q(ke,1,me.fxprime,-1,fe.fxprime);var be=Y(fe.fxprime,fe.fxprime),Ce=Math.max(0,Y(ke,me.fxprime)/be);Q(Pe,Ce,Pe,-1,me.fxprime),Le=fe,fe=me,me=Le}if(G(fe.fxprime)<=1e-5)break}return E.history&&E.history.push({x:fe.x.slice(),fx:fe.fx,fxprime:fe.fxprime.slice(),alpha:tt}),fe}function ce(J,M,E){E=E||{};for(var fe=E.maxIterations||M.length*100,me=E.learnRate||.001,ke={x:M.slice(),fx:0,fxprime:M.slice()},Pe=0;Pe<fe&&(ke.fx=J(ke.x,ke.fxprime),E.history&&E.history.push({x:ke.x.slice(),fx:ke.fx,fxprime:ke.fxprime.slice()}),Q(ke.x,1,ke.x,-me,ke.fxprime),!(G(ke.fxprime)<=1e-5));++Pe);return ke}function he(J,M,E){E=E||{};var fe={x:M.slice(),fx:0,fxprime:M.slice()},me={x:M.slice(),fx:0,fxprime:M.slice()},ke=E.maxIterations||M.length*100,Pe=E.learnRate||1,Le=M.slice(),tt=E.c1||.001,ft=E.c2||.1,ge,be=[];if(E.history){var Ce=J;J=function(je,Et){return be.push(je.slice()),Ce(je,Et)}}fe.fx=J(fe.x,fe.fxprime);for(var Ye=0;Ye<ke&&(K(Le,fe.fxprime,-1),Pe=ee(J,Le,fe,me,Pe,tt,ft),E.history&&(E.history.push({x:fe.x.slice(),fx:fe.fx,fxprime:fe.fxprime.slice(),functionCalls:be,learnRate:Pe,alpha:Pe}),be=[]),ge=fe,fe=me,me=ge,!(Pe===0||G(fe.fxprime)<1e-5));++Ye);return fe}F.bisect=$,F.nelderMead=oe,F.conjugateGradient=xe,F.gradientDescent=ce,F.gradientDescentLineSearch=he,F.zeros=X,F.zerosM=w,F.norm2=G,F.weightedSum=Q,F.scale=K})},49685:function(xt,N,F){"use strict";F.d(N,{FD:function(){return w},Ib:function(){return $},WT:function(){return X}});var $=1e-6,X=typeof Float32Array!="undefined"?Float32Array:Array,w=Math.random;function Y(oe){X=oe}var G=Math.PI/180;function K(oe){return oe*G}function Q(oe,ee){return Math.abs(oe-ee)<=$*Math.max(1,Math.abs(oe),Math.abs(ee))}Math.hypot||(Math.hypot=function(){for(var oe=0,ee=arguments.length;ee--;)oe+=arguments[ee]*arguments[ee];return Math.sqrt(oe)})},35600:function(xt,N,F){"use strict";F.d(N,{Jp:function(){return he},U_:function(){return ee},Us:function(){return me},vc:function(){return fe},xJ:function(){return ke}});function $(){var ie=new glMatrix.ARRAY_TYPE(9);return glMatrix.ARRAY_TYPE!=Float32Array&&(ie[1]=0,ie[2]=0,ie[3]=0,ie[5]=0,ie[6]=0,ie[7]=0),ie[0]=1,ie[4]=1,ie[8]=1,ie}function X(ie,Oe){return ie[0]=Oe[0],ie[1]=Oe[1],ie[2]=Oe[2],ie[3]=Oe[4],ie[4]=Oe[5],ie[5]=Oe[6],ie[6]=Oe[8],ie[7]=Oe[9],ie[8]=Oe[10],ie}function w(ie){var Oe=new glMatrix.ARRAY_TYPE(9);return Oe[0]=ie[0],Oe[1]=ie[1],Oe[2]=ie[2],Oe[3]=ie[3],Oe[4]=ie[4],Oe[5]=ie[5],Oe[6]=ie[6],Oe[7]=ie[7],Oe[8]=ie[8],Oe}function Y(ie,Oe){return ie[0]=Oe[0],ie[1]=Oe[1],ie[2]=Oe[2],ie[3]=Oe[3],ie[4]=Oe[4],ie[5]=Oe[5],ie[6]=Oe[6],ie[7]=Oe[7],ie[8]=Oe[8],ie}function G(ie,Oe,nt,ye,Te,Je,pe,Me,ze){var De=new glMatrix.ARRAY_TYPE(9);return De[0]=ie,De[1]=Oe,De[2]=nt,De[3]=ye,De[4]=Te,De[5]=Je,De[6]=pe,De[7]=Me,De[8]=ze,De}function K(ie,Oe,nt,ye,Te,Je,pe,Me,ze,De){return ie[0]=Oe,ie[1]=nt,ie[2]=ye,ie[3]=Te,ie[4]=Je,ie[5]=pe,ie[6]=Me,ie[7]=ze,ie[8]=De,ie}function Q(ie){return ie[0]=1,ie[1]=0,ie[2]=0,ie[3]=0,ie[4]=1,ie[5]=0,ie[6]=0,ie[7]=0,ie[8]=1,ie}function oe(ie,Oe){if(ie===Oe){var nt=Oe[1],ye=Oe[2],Te=Oe[5];ie[1]=Oe[3],ie[2]=Oe[6],ie[3]=nt,ie[5]=Oe[7],ie[6]=ye,ie[7]=Te}else ie[0]=Oe[0],ie[1]=Oe[3],ie[2]=Oe[6],ie[3]=Oe[1],ie[4]=Oe[4],ie[5]=Oe[7],ie[6]=Oe[2],ie[7]=Oe[5],ie[8]=Oe[8];return ie}function ee(ie,Oe){var nt=Oe[0],ye=Oe[1],Te=Oe[2],Je=Oe[3],pe=Oe[4],Me=Oe[5],ze=Oe[6],De=Oe[7],Ct=Oe[8],Vt=Ct*pe-Me*De,Ve=-Ct*Je+Me*ze,Ue=De*Je-pe*ze,Ee=nt*Vt+ye*Ve+Te*Ue;return Ee?(Ee=1/Ee,ie[0]=Vt*Ee,ie[1]=(-Ct*ye+Te*De)*Ee,ie[2]=(Me*ye-Te*pe)*Ee,ie[3]=Ve*Ee,ie[4]=(Ct*nt-Te*ze)*Ee,ie[5]=(-Me*nt+Te*Je)*Ee,ie[6]=Ue*Ee,ie[7]=(-De*nt+ye*ze)*Ee,ie[8]=(pe*nt-ye*Je)*Ee,ie):null}function xe(ie,Oe){var nt=Oe[0],ye=Oe[1],Te=Oe[2],Je=Oe[3],pe=Oe[4],Me=Oe[5],ze=Oe[6],De=Oe[7],Ct=Oe[8];return ie[0]=pe*Ct-Me*De,ie[1]=Te*De-ye*Ct,ie[2]=ye*Me-Te*pe,ie[3]=Me*ze-Je*Ct,ie[4]=nt*Ct-Te*ze,ie[5]=Te*Je-nt*Me,ie[6]=Je*De-pe*ze,ie[7]=ye*ze-nt*De,ie[8]=nt*pe-ye*Je,ie}function ce(ie){var Oe=ie[0],nt=ie[1],ye=ie[2],Te=ie[3],Je=ie[4],pe=ie[5],Me=ie[6],ze=ie[7],De=ie[8];return Oe*(De*Je-pe*ze)+nt*(-De*Te+pe*Me)+ye*(ze*Te-Je*Me)}function he(ie,Oe,nt){var ye=Oe[0],Te=Oe[1],Je=Oe[2],pe=Oe[3],Me=Oe[4],ze=Oe[5],De=Oe[6],Ct=Oe[7],Vt=Oe[8],Ve=nt[0],Ue=nt[1],Ee=nt[2],et=nt[3],st=nt[4],Re=nt[5],Ie=nt[6],ct=nt[7],Tt=nt[8];return ie[0]=Ve*ye+Ue*pe+Ee*De,ie[1]=Ve*Te+Ue*Me+Ee*Ct,ie[2]=Ve*Je+Ue*ze+Ee*Vt,ie[3]=et*ye+st*pe+Re*De,ie[4]=et*Te+st*Me+Re*Ct,ie[5]=et*Je+st*ze+Re*Vt,ie[6]=Ie*ye+ct*pe+Tt*De,ie[7]=Ie*Te+ct*Me+Tt*Ct,ie[8]=Ie*Je+ct*ze+Tt*Vt,ie}function J(ie,Oe,nt){var ye=Oe[0],Te=Oe[1],Je=Oe[2],pe=Oe[3],Me=Oe[4],ze=Oe[5],De=Oe[6],Ct=Oe[7],Vt=Oe[8],Ve=nt[0],Ue=nt[1];return ie[0]=ye,ie[1]=Te,ie[2]=Je,ie[3]=pe,ie[4]=Me,ie[5]=ze,ie[6]=Ve*ye+Ue*pe+De,ie[7]=Ve*Te+Ue*Me+Ct,ie[8]=Ve*Je+Ue*ze+Vt,ie}function M(ie,Oe,nt){var ye=Oe[0],Te=Oe[1],Je=Oe[2],pe=Oe[3],Me=Oe[4],ze=Oe[5],De=Oe[6],Ct=Oe[7],Vt=Oe[8],Ve=Math.sin(nt),Ue=Math.cos(nt);return ie[0]=Ue*ye+Ve*pe,ie[1]=Ue*Te+Ve*Me,ie[2]=Ue*Je+Ve*ze,ie[3]=Ue*pe-Ve*ye,ie[4]=Ue*Me-Ve*Te,ie[5]=Ue*ze-Ve*Je,ie[6]=De,ie[7]=Ct,ie[8]=Vt,ie}function E(ie,Oe,nt){var ye=nt[0],Te=nt[1];return ie[0]=ye*Oe[0],ie[1]=ye*Oe[1],ie[2]=ye*Oe[2],ie[3]=Te*Oe[3],ie[4]=Te*Oe[4],ie[5]=Te*Oe[5],ie[6]=Oe[6],ie[7]=Oe[7],ie[8]=Oe[8],ie}function fe(ie,Oe){return ie[0]=1,ie[1]=0,ie[2]=0,ie[3]=0,ie[4]=1,ie[5]=0,ie[6]=Oe[0],ie[7]=Oe[1],ie[8]=1,ie}function me(ie,Oe){var nt=Math.sin(Oe),ye=Math.cos(Oe);return ie[0]=ye,ie[1]=nt,ie[2]=0,ie[3]=-nt,ie[4]=ye,ie[5]=0,ie[6]=0,ie[7]=0,ie[8]=1,ie}function ke(ie,Oe){return ie[0]=Oe[0],ie[1]=0,ie[2]=0,ie[3]=0,ie[4]=Oe[1],ie[5]=0,ie[6]=0,ie[7]=0,ie[8]=1,ie}function Pe(ie,Oe){return ie[0]=Oe[0],ie[1]=Oe[1],ie[2]=0,ie[3]=Oe[2],ie[4]=Oe[3],ie[5]=0,ie[6]=Oe[4],ie[7]=Oe[5],ie[8]=1,ie}function Le(ie,Oe){var nt=Oe[0],ye=Oe[1],Te=Oe[2],Je=Oe[3],pe=nt+nt,Me=ye+ye,ze=Te+Te,De=nt*pe,Ct=ye*pe,Vt=ye*Me,Ve=Te*pe,Ue=Te*Me,Ee=Te*ze,et=Je*pe,st=Je*Me,Re=Je*ze;return ie[0]=1-Vt-Ee,ie[3]=Ct-Re,ie[6]=Ve+st,ie[1]=Ct+Re,ie[4]=1-De-Ee,ie[7]=Ue-et,ie[2]=Ve-st,ie[5]=Ue+et,ie[8]=1-De-Vt,ie}function tt(ie,Oe){var nt=Oe[0],ye=Oe[1],Te=Oe[2],Je=Oe[3],pe=Oe[4],Me=Oe[5],ze=Oe[6],De=Oe[7],Ct=Oe[8],Vt=Oe[9],Ve=Oe[10],Ue=Oe[11],Ee=Oe[12],et=Oe[13],st=Oe[14],Re=Oe[15],Ie=nt*Me-ye*pe,ct=nt*ze-Te*pe,Tt=nt*De-Je*pe,Qt=ye*ze-Te*Me,wt=ye*De-Je*Me,se=Te*De-Je*ze,Ge=Ct*et-Vt*Ee,Ke=Ct*st-Ve*Ee,bt=Ct*Re-Ue*Ee,Be=Vt*st-Ve*et,pt=Vt*Re-Ue*et,It=Ve*Re-Ue*st,ot=Ie*It-ct*pt+Tt*Be+Qt*bt-wt*Ke+se*Ge;return ot?(ot=1/ot,ie[0]=(Me*It-ze*pt+De*Be)*ot,ie[1]=(ze*bt-pe*It-De*Ke)*ot,ie[2]=(pe*pt-Me*bt+De*Ge)*ot,ie[3]=(Te*pt-ye*It-Je*Be)*ot,ie[4]=(nt*It-Te*bt+Je*Ke)*ot,ie[5]=(ye*bt-nt*pt-Je*Ge)*ot,ie[6]=(et*se-st*wt+Re*Qt)*ot,ie[7]=(st*Tt-Ee*se-Re*ct)*ot,ie[8]=(Ee*wt-et*Tt+Re*Ie)*ot,ie):null}function ft(ie,Oe,nt){return ie[0]=2/Oe,ie[1]=0,ie[2]=0,ie[3]=0,ie[4]=-2/nt,ie[5]=0,ie[6]=-1,ie[7]=1,ie[8]=1,ie}function ge(ie){return"mat3("+ie[0]+", "+ie[1]+", "+ie[2]+", "+ie[3]+", "+ie[4]+", "+ie[5]+", "+ie[6]+", "+ie[7]+", "+ie[8]+")"}function be(ie){return Math.hypot(ie[0],ie[1],ie[2],ie[3],ie[4],ie[5],ie[6],ie[7],ie[8])}function Ce(ie,Oe,nt){return ie[0]=Oe[0]+nt[0],ie[1]=Oe[1]+nt[1],ie[2]=Oe[2]+nt[2],ie[3]=Oe[3]+nt[3],ie[4]=Oe[4]+nt[4],ie[5]=Oe[5]+nt[5],ie[6]=Oe[6]+nt[6],ie[7]=Oe[7]+nt[7],ie[8]=Oe[8]+nt[8],ie}function Ye(ie,Oe,nt){return ie[0]=Oe[0]-nt[0],ie[1]=Oe[1]-nt[1],ie[2]=Oe[2]-nt[2],ie[3]=Oe[3]-nt[3],ie[4]=Oe[4]-nt[4],ie[5]=Oe[5]-nt[5],ie[6]=Oe[6]-nt[6],ie[7]=Oe[7]-nt[7],ie[8]=Oe[8]-nt[8],ie}function je(ie,Oe,nt){return ie[0]=Oe[0]*nt,ie[1]=Oe[1]*nt,ie[2]=Oe[2]*nt,ie[3]=Oe[3]*nt,ie[4]=Oe[4]*nt,ie[5]=Oe[5]*nt,ie[6]=Oe[6]*nt,ie[7]=Oe[7]*nt,ie[8]=Oe[8]*nt,ie}function Et(ie,Oe,nt,ye){return ie[0]=Oe[0]+nt[0]*ye,ie[1]=Oe[1]+nt[1]*ye,ie[2]=Oe[2]+nt[2]*ye,ie[3]=Oe[3]+nt[3]*ye,ie[4]=Oe[4]+nt[4]*ye,ie[5]=Oe[5]+nt[5]*ye,ie[6]=Oe[6]+nt[6]*ye,ie[7]=Oe[7]+nt[7]*ye,ie[8]=Oe[8]+nt[8]*ye,ie}function Ae(ie,Oe){return ie[0]===Oe[0]&&ie[1]===Oe[1]&&ie[2]===Oe[2]&&ie[3]===Oe[3]&&ie[4]===Oe[4]&&ie[5]===Oe[5]&&ie[6]===Oe[6]&&ie[7]===Oe[7]&&ie[8]===Oe[8]}function Qe(ie,Oe){var nt=ie[0],ye=ie[1],Te=ie[2],Je=ie[3],pe=ie[4],Me=ie[5],ze=ie[6],De=ie[7],Ct=ie[8],Vt=Oe[0],Ve=Oe[1],Ue=Oe[2],Ee=Oe[3],et=Oe[4],st=Oe[5],Re=Oe[6],Ie=Oe[7],ct=Oe[8];return Math.abs(nt-Vt)<=glMatrix.EPSILON*Math.max(1,Math.abs(nt),Math.abs(Vt))&&Math.abs(ye-Ve)<=glMatrix.EPSILON*Math.max(1,Math.abs(ye),Math.abs(Ve))&&Math.abs(Te-Ue)<=glMatrix.EPSILON*Math.max(1,Math.abs(Te),Math.abs(Ue))&&Math.abs(Je-Ee)<=glMatrix.EPSILON*Math.max(1,Math.abs(Je),Math.abs(Ee))&&Math.abs(pe-et)<=glMatrix.EPSILON*Math.max(1,Math.abs(pe),Math.abs(et))&&Math.abs(Me-st)<=glMatrix.EPSILON*Math.max(1,Math.abs(Me),Math.abs(st))&&Math.abs(ze-Re)<=glMatrix.EPSILON*Math.max(1,Math.abs(ze),Math.abs(Re))&&Math.abs(De-Ie)<=glMatrix.EPSILON*Math.max(1,Math.abs(De),Math.abs(Ie))&&Math.abs(Ct-ct)<=glMatrix.EPSILON*Math.max(1,Math.abs(Ct),Math.abs(ct))}var te=null,Ze=null},31437:function(xt,N,F){"use strict";F.d(N,{$X:function(){return oe},AK:function(){return Ce},EU:function(){return Oe},Fp:function(){return M},Fv:function(){return be},I6:function(){return Te},IH:function(){return Q},JG:function(){return G},TE:function(){return ke},Ue:function(){return X},VV:function(){return J},al:function(){return Y},bA:function(){return fe},kE:function(){return Le},kK:function(){return te},lu:function(){return Me},t7:function(){return je},t8:function(){return K},tk:function(){return ft}});var $=F(49685);function X(){var Ee=new $.WT(2);return $.WT!=Float32Array&&(Ee[0]=0,Ee[1]=0),Ee}function w(Ee){var et=new glMatrix.ARRAY_TYPE(2);return et[0]=Ee[0],et[1]=Ee[1],et}function Y(Ee,et){var st=new $.WT(2);return st[0]=Ee,st[1]=et,st}function G(Ee,et){return Ee[0]=et[0],Ee[1]=et[1],Ee}function K(Ee,et,st){return Ee[0]=et,Ee[1]=st,Ee}function Q(Ee,et,st){return Ee[0]=et[0]+st[0],Ee[1]=et[1]+st[1],Ee}function oe(Ee,et,st){return Ee[0]=et[0]-st[0],Ee[1]=et[1]-st[1],Ee}function ee(Ee,et,st){return Ee[0]=et[0]*st[0],Ee[1]=et[1]*st[1],Ee}function xe(Ee,et,st){return Ee[0]=et[0]/st[0],Ee[1]=et[1]/st[1],Ee}function ce(Ee,et){return Ee[0]=Math.ceil(et[0]),Ee[1]=Math.ceil(et[1]),Ee}function he(Ee,et){return Ee[0]=Math.floor(et[0]),Ee[1]=Math.floor(et[1]),Ee}function J(Ee,et,st){return Ee[0]=Math.min(et[0],st[0]),Ee[1]=Math.min(et[1],st[1]),Ee}function M(Ee,et,st){return Ee[0]=Math.max(et[0],st[0]),Ee[1]=Math.max(et[1],st[1]),Ee}function E(Ee,et){return Ee[0]=Math.round(et[0]),Ee[1]=Math.round(et[1]),Ee}function fe(Ee,et,st){return Ee[0]=et[0]*st,Ee[1]=et[1]*st,Ee}function me(Ee,et,st,Re){return Ee[0]=et[0]+st[0]*Re,Ee[1]=et[1]+st[1]*Re,Ee}function ke(Ee,et){var st=et[0]-Ee[0],Re=et[1]-Ee[1];return Math.hypot(st,Re)}function Pe(Ee,et){var st=et[0]-Ee[0],Re=et[1]-Ee[1];return st*st+Re*Re}function Le(Ee){var et=Ee[0],st=Ee[1];return Math.hypot(et,st)}function tt(Ee){var et=Ee[0],st=Ee[1];return et*et+st*st}function ft(Ee,et){return Ee[0]=-et[0],Ee[1]=-et[1],Ee}function ge(Ee,et){return Ee[0]=1/et[0],Ee[1]=1/et[1],Ee}function be(Ee,et){var st=et[0],Re=et[1],Ie=st*st+Re*Re;return Ie>0&&(Ie=1/Math.sqrt(Ie)),Ee[0]=et[0]*Ie,Ee[1]=et[1]*Ie,Ee}function Ce(Ee,et){return Ee[0]*et[0]+Ee[1]*et[1]}function Ye(Ee,et,st){var Re=et[0]*st[1]-et[1]*st[0];return Ee[0]=Ee[1]=0,Ee[2]=Re,Ee}function je(Ee,et,st,Re){var Ie=et[0],ct=et[1];return Ee[0]=Ie+Re*(st[0]-Ie),Ee[1]=ct+Re*(st[1]-ct),Ee}function Et(Ee,et){et=et||1;var st=glMatrix.RANDOM()*2*Math.PI;return Ee[0]=Math.cos(st)*et,Ee[1]=Math.sin(st)*et,Ee}function Ae(Ee,et,st){var Re=et[0],Ie=et[1];return Ee[0]=st[0]*Re+st[2]*Ie,Ee[1]=st[1]*Re+st[3]*Ie,Ee}function Qe(Ee,et,st){var Re=et[0],Ie=et[1];return Ee[0]=st[0]*Re+st[2]*Ie+st[4],Ee[1]=st[1]*Re+st[3]*Ie+st[5],Ee}function te(Ee,et,st){var Re=et[0],Ie=et[1];return Ee[0]=st[0]*Re+st[3]*Ie+st[6],Ee[1]=st[1]*Re+st[4]*Ie+st[7],Ee}function Ze(Ee,et,st){var Re=et[0],Ie=et[1];return Ee[0]=st[0]*Re+st[4]*Ie+st[12],Ee[1]=st[1]*Re+st[5]*Ie+st[13],Ee}function ie(Ee,et,st,Re){var Ie=et[0]-st[0],ct=et[1]-st[1],Tt=Math.sin(Re),Qt=Math.cos(Re);return Ee[0]=Ie*Qt-ct*Tt+st[0],Ee[1]=Ie*Tt+ct*Qt+st[1],Ee}function Oe(Ee,et){var st=Ee[0],Re=Ee[1],Ie=et[0],ct=et[1],Tt=Math.sqrt(st*st+Re*Re)*Math.sqrt(Ie*Ie+ct*ct),Qt=Tt&&(st*Ie+Re*ct)/Tt;return Math.acos(Math.min(Math.max(Qt,-1),1))}function nt(Ee){return Ee[0]=0,Ee[1]=0,Ee}function ye(Ee){return"vec2("+Ee[0]+", "+Ee[1]+")"}function Te(Ee,et){return Ee[0]===et[0]&&Ee[1]===et[1]}function Je(Ee,et){var st=Ee[0],Re=Ee[1],Ie=et[0],ct=et[1];return Math.abs(st-Ie)<=glMatrix.EPSILON*Math.max(1,Math.abs(st),Math.abs(Ie))&&Math.abs(Re-ct)<=glMatrix.EPSILON*Math.max(1,Math.abs(Re),Math.abs(ct))}var pe=null,Me=oe,ze=null,De=null,Ct=null,Vt=null,Ve=null,Ue=function(){var Ee=X();return function(et,st,Re,Ie,ct,Tt){var Qt,wt;for(st||(st=2),Re||(Re=0),Ie?wt=Math.min(Ie*st+Re,et.length):wt=et.length,Qt=Re;Qt<wt;Qt+=st)Ee[0]=et[Qt],Ee[1]=et[Qt+1],ct(Ee,Ee,Tt),et[Qt]=Ee[0],et[Qt+1]=Ee[1];return et}}()},77160:function(xt,N,F){"use strict";F.r(N),F.d(N,{add:function(){return oe},angle:function(){return Te},bezier:function(){return Ae},ceil:function(){return he},clone:function(){return w},copy:function(){return K},create:function(){return X},cross:function(){return Ye},dist:function(){return Ve},distance:function(){return Pe},div:function(){return Vt},divide:function(){return ce},dot:function(){return Ce},equals:function(){return ze},exactEquals:function(){return Me},floor:function(){return J},forEach:function(){return st},fromValues:function(){return G},hermite:function(){return Et},inverse:function(){return ge},len:function(){return Ee},length:function(){return Y},lerp:function(){return je},max:function(){return E},min:function(){return M},mul:function(){return Ct},multiply:function(){return xe},negate:function(){return ft},normalize:function(){return be},random:function(){return Qe},rotateX:function(){return Oe},rotateY:function(){return nt},rotateZ:function(){return ye},round:function(){return fe},scale:function(){return me},scaleAndAdd:function(){return ke},set:function(){return Q},sqrDist:function(){return Ue},sqrLen:function(){return et},squaredDistance:function(){return Le},squaredLength:function(){return tt},str:function(){return pe},sub:function(){return De},subtract:function(){return ee},transformMat3:function(){return Ze},transformMat4:function(){return te},transformQuat:function(){return ie},zero:function(){return Je}});var $=F(49685);function X(){var Re=new $.WT(3);return $.WT!=Float32Array&&(Re[0]=0,Re[1]=0,Re[2]=0),Re}function w(Re){var Ie=new $.WT(3);return Ie[0]=Re[0],Ie[1]=Re[1],Ie[2]=Re[2],Ie}function Y(Re){var Ie=Re[0],ct=Re[1],Tt=Re[2];return Math.hypot(Ie,ct,Tt)}function G(Re,Ie,ct){var Tt=new $.WT(3);return Tt[0]=Re,Tt[1]=Ie,Tt[2]=ct,Tt}function K(Re,Ie){return Re[0]=Ie[0],Re[1]=Ie[1],Re[2]=Ie[2],Re}function Q(Re,Ie,ct,Tt){return Re[0]=Ie,Re[1]=ct,Re[2]=Tt,Re}function oe(Re,Ie,ct){return Re[0]=Ie[0]+ct[0],Re[1]=Ie[1]+ct[1],Re[2]=Ie[2]+ct[2],Re}function ee(Re,Ie,ct){return Re[0]=Ie[0]-ct[0],Re[1]=Ie[1]-ct[1],Re[2]=Ie[2]-ct[2],Re}function xe(Re,Ie,ct){return Re[0]=Ie[0]*ct[0],Re[1]=Ie[1]*ct[1],Re[2]=Ie[2]*ct[2],Re}function ce(Re,Ie,ct){return Re[0]=Ie[0]/ct[0],Re[1]=Ie[1]/ct[1],Re[2]=Ie[2]/ct[2],Re}function he(Re,Ie){return Re[0]=Math.ceil(Ie[0]),Re[1]=Math.ceil(Ie[1]),Re[2]=Math.ceil(Ie[2]),Re}function J(Re,Ie){return Re[0]=Math.floor(Ie[0]),Re[1]=Math.floor(Ie[1]),Re[2]=Math.floor(Ie[2]),Re}function M(Re,Ie,ct){return Re[0]=Math.min(Ie[0],ct[0]),Re[1]=Math.min(Ie[1],ct[1]),Re[2]=Math.min(Ie[2],ct[2]),Re}function E(Re,Ie,ct){return Re[0]=Math.max(Ie[0],ct[0]),Re[1]=Math.max(Ie[1],ct[1]),Re[2]=Math.max(Ie[2],ct[2]),Re}function fe(Re,Ie){return Re[0]=Math.round(Ie[0]),Re[1]=Math.round(Ie[1]),Re[2]=Math.round(Ie[2]),Re}function me(Re,Ie,ct){return Re[0]=Ie[0]*ct,Re[1]=Ie[1]*ct,Re[2]=Ie[2]*ct,Re}function ke(Re,Ie,ct,Tt){return Re[0]=Ie[0]+ct[0]*Tt,Re[1]=Ie[1]+ct[1]*Tt,Re[2]=Ie[2]+ct[2]*Tt,Re}function Pe(Re,Ie){var ct=Ie[0]-Re[0],Tt=Ie[1]-Re[1],Qt=Ie[2]-Re[2];return Math.hypot(ct,Tt,Qt)}function Le(Re,Ie){var ct=Ie[0]-Re[0],Tt=Ie[1]-Re[1],Qt=Ie[2]-Re[2];return ct*ct+Tt*Tt+Qt*Qt}function tt(Re){var Ie=Re[0],ct=Re[1],Tt=Re[2];return Ie*Ie+ct*ct+Tt*Tt}function ft(Re,Ie){return Re[0]=-Ie[0],Re[1]=-Ie[1],Re[2]=-Ie[2],Re}function ge(Re,Ie){return Re[0]=1/Ie[0],Re[1]=1/Ie[1],Re[2]=1/Ie[2],Re}function be(Re,Ie){var ct=Ie[0],Tt=Ie[1],Qt=Ie[2],wt=ct*ct+Tt*Tt+Qt*Qt;return wt>0&&(wt=1/Math.sqrt(wt)),Re[0]=Ie[0]*wt,Re[1]=Ie[1]*wt,Re[2]=Ie[2]*wt,Re}function Ce(Re,Ie){return Re[0]*Ie[0]+Re[1]*Ie[1]+Re[2]*Ie[2]}function Ye(Re,Ie,ct){var Tt=Ie[0],Qt=Ie[1],wt=Ie[2],se=ct[0],Ge=ct[1],Ke=ct[2];return Re[0]=Qt*Ke-wt*Ge,Re[1]=wt*se-Tt*Ke,Re[2]=Tt*Ge-Qt*se,Re}function je(Re,Ie,ct,Tt){var Qt=Ie[0],wt=Ie[1],se=Ie[2];return Re[0]=Qt+Tt*(ct[0]-Qt),Re[1]=wt+Tt*(ct[1]-wt),Re[2]=se+Tt*(ct[2]-se),Re}function Et(Re,Ie,ct,Tt,Qt,wt){var se=wt*wt,Ge=se*(2*wt-3)+1,Ke=se*(wt-2)+wt,bt=se*(wt-1),Be=se*(3-2*wt);return Re[0]=Ie[0]*Ge+ct[0]*Ke+Tt[0]*bt+Qt[0]*Be,Re[1]=Ie[1]*Ge+ct[1]*Ke+Tt[1]*bt+Qt[1]*Be,Re[2]=Ie[2]*Ge+ct[2]*Ke+Tt[2]*bt+Qt[2]*Be,Re}function Ae(Re,Ie,ct,Tt,Qt,wt){var se=1-wt,Ge=se*se,Ke=wt*wt,bt=Ge*se,Be=3*wt*Ge,pt=3*Ke*se,It=Ke*wt;return Re[0]=Ie[0]*bt+ct[0]*Be+Tt[0]*pt+Qt[0]*It,Re[1]=Ie[1]*bt+ct[1]*Be+Tt[1]*pt+Qt[1]*It,Re[2]=Ie[2]*bt+ct[2]*Be+Tt[2]*pt+Qt[2]*It,Re}function Qe(Re,Ie){Ie=Ie||1;var ct=$.FD()*2*Math.PI,Tt=$.FD()*2-1,Qt=Math.sqrt(1-Tt*Tt)*Ie;return Re[0]=Math.cos(ct)*Qt,Re[1]=Math.sin(ct)*Qt,Re[2]=Tt*Ie,Re}function te(Re,Ie,ct){var Tt=Ie[0],Qt=Ie[1],wt=Ie[2],se=ct[3]*Tt+ct[7]*Qt+ct[11]*wt+ct[15];return se=se||1,Re[0]=(ct[0]*Tt+ct[4]*Qt+ct[8]*wt+ct[12])/se,Re[1]=(ct[1]*Tt+ct[5]*Qt+ct[9]*wt+ct[13])/se,Re[2]=(ct[2]*Tt+ct[6]*Qt+ct[10]*wt+ct[14])/se,Re}function Ze(Re,Ie,ct){var Tt=Ie[0],Qt=Ie[1],wt=Ie[2];return Re[0]=Tt*ct[0]+Qt*ct[3]+wt*ct[6],Re[1]=Tt*ct[1]+Qt*ct[4]+wt*ct[7],Re[2]=Tt*ct[2]+Qt*ct[5]+wt*ct[8],Re}function ie(Re,Ie,ct){var Tt=ct[0],Qt=ct[1],wt=ct[2],se=ct[3],Ge=Ie[0],Ke=Ie[1],bt=Ie[2],Be=Qt*bt-wt*Ke,pt=wt*Ge-Tt*bt,It=Tt*Ke-Qt*Ge,ot=Qt*It-wt*pt,zt=wt*Be-Tt*It,Jt=Tt*pt-Qt*Be,tr=se*2;return Be*=tr,pt*=tr,It*=tr,ot*=2,zt*=2,Jt*=2,Re[0]=Ge+Be+ot,Re[1]=Ke+pt+zt,Re[2]=bt+It+Jt,Re}function Oe(Re,Ie,ct,Tt){var Qt=[],wt=[];return Qt[0]=Ie[0]-ct[0],Qt[1]=Ie[1]-ct[1],Qt[2]=Ie[2]-ct[2],wt[0]=Qt[0],wt[1]=Qt[1]*Math.cos(Tt)-Qt[2]*Math.sin(Tt),wt[2]=Qt[1]*Math.sin(Tt)+Qt[2]*Math.cos(Tt),Re[0]=wt[0]+ct[0],Re[1]=wt[1]+ct[1],Re[2]=wt[2]+ct[2],Re}function nt(Re,Ie,ct,Tt){var Qt=[],wt=[];return Qt[0]=Ie[0]-ct[0],Qt[1]=Ie[1]-ct[1],Qt[2]=Ie[2]-ct[2],wt[0]=Qt[2]*Math.sin(Tt)+Qt[0]*Math.cos(Tt),wt[1]=Qt[1],wt[2]=Qt[2]*Math.cos(Tt)-Qt[0]*Math.sin(Tt),Re[0]=wt[0]+ct[0],Re[1]=wt[1]+ct[1],Re[2]=wt[2]+ct[2],Re}function ye(Re,Ie,ct,Tt){var Qt=[],wt=[];return Qt[0]=Ie[0]-ct[0],Qt[1]=Ie[1]-ct[1],Qt[2]=Ie[2]-ct[2],wt[0]=Qt[0]*Math.cos(Tt)-Qt[1]*Math.sin(Tt),wt[1]=Qt[0]*Math.sin(Tt)+Qt[1]*Math.cos(Tt),wt[2]=Qt[2],Re[0]=wt[0]+ct[0],Re[1]=wt[1]+ct[1],Re[2]=wt[2]+ct[2],Re}function Te(Re,Ie){var ct=Re[0],Tt=Re[1],Qt=Re[2],wt=Ie[0],se=Ie[1],Ge=Ie[2],Ke=Math.sqrt(ct*ct+Tt*Tt+Qt*Qt),bt=Math.sqrt(wt*wt+se*se+Ge*Ge),Be=Ke*bt,pt=Be&&Ce(Re,Ie)/Be;return Math.acos(Math.min(Math.max(pt,-1),1))}function Je(Re){return Re[0]=0,Re[1]=0,Re[2]=0,Re}function pe(Re){return"vec3("+Re[0]+", "+Re[1]+", "+Re[2]+")"}function Me(Re,Ie){return Re[0]===Ie[0]&&Re[1]===Ie[1]&&Re[2]===Ie[2]}function ze(Re,Ie){var ct=Re[0],Tt=Re[1],Qt=Re[2],wt=Ie[0],se=Ie[1],Ge=Ie[2];return Math.abs(ct-wt)<=$.Ib*Math.max(1,Math.abs(ct),Math.abs(wt))&&Math.abs(Tt-se)<=$.Ib*Math.max(1,Math.abs(Tt),Math.abs(se))&&Math.abs(Qt-Ge)<=$.Ib*Math.max(1,Math.abs(Qt),Math.abs(Ge))}var De=ee,Ct=xe,Vt=ce,Ve=Pe,Ue=Le,Ee=Y,et=tt,st=function(){var Re=X();return function(Ie,ct,Tt,Qt,wt,se){var Ge,Ke;for(ct||(ct=3),Tt||(Tt=0),Qt?Ke=Math.min(Qt*ct+Tt,Ie.length):Ke=Ie.length,Ge=Tt;Ge<Ke;Ge+=ct)Re[0]=Ie[Ge],Re[1]=Ie[Ge+1],Re[2]=Ie[Ge+2],wt(Re,Re,se),Ie[Ge]=Re[0],Ie[Ge+1]=Re[1],Ie[Ge+2]=Re[2];return Ie}}()},50840:function(xt,N,F){var $;(function(X,w,Y,G){"use strict";var K=["","webkit","Moz","MS","ms","o"],Q=w.createElement("div"),oe="function",ee=Math.round,xe=Math.abs,ce=Date.now;function he(Dt,Kt,Or){return setTimeout(Le(Dt,Or),Kt)}function J(Dt,Kt,Or){return Array.isArray(Dt)?(M(Dt,Or[Kt],Or),!0):!1}function M(Dt,Kt,Or){var xn;if(Dt)if(Dt.forEach)Dt.forEach(Kt,Or);else if(Dt.length!==G)for(xn=0;xn<Dt.length;)Kt.call(Or,Dt[xn],xn,Dt),xn++;else for(xn in Dt)Dt.hasOwnProperty(xn)&&Kt.call(Or,Dt[xn],xn,Dt)}function E(Dt,Kt,Or){var xn="DEPRECATED METHOD: "+Kt+`
`+Or+` AT 
`;return function(){var ii=new Error("get-stack-trace"),Zi=ii&&ii.stack?ii.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",lo=X.console&&(X.console.warn||X.console.log);return lo&&lo.call(X.console,xn,Zi),Dt.apply(this,arguments)}}var fe;typeof Object.assign!="function"?fe=function(Kt){if(Kt===G||Kt===null)throw new TypeError("Cannot convert undefined or null to object");for(var Or=Object(Kt),xn=1;xn<arguments.length;xn++){var ii=arguments[xn];if(ii!==G&&ii!==null)for(var Zi in ii)ii.hasOwnProperty(Zi)&&(Or[Zi]=ii[Zi])}return Or}:fe=Object.assign;var me=E(function(Kt,Or,xn){for(var ii=Object.keys(Or),Zi=0;Zi<ii.length;)(!xn||xn&&Kt[ii[Zi]]===G)&&(Kt[ii[Zi]]=Or[ii[Zi]]),Zi++;return Kt},"extend","Use `assign`."),ke=E(function(Kt,Or){return me(Kt,Or,!0)},"merge","Use `assign`.");function Pe(Dt,Kt,Or){var xn=Kt.prototype,ii;ii=Dt.prototype=Object.create(xn),ii.constructor=Dt,ii._super=xn,Or&&fe(ii,Or)}function Le(Dt,Kt){return function(){return Dt.apply(Kt,arguments)}}function tt(Dt,Kt){return typeof Dt==oe?Dt.apply(Kt&&Kt[0]||G,Kt):Dt}function ft(Dt,Kt){return Dt===G?Kt:Dt}function ge(Dt,Kt,Or){M(je(Kt),function(xn){Dt.addEventListener(xn,Or,!1)})}function be(Dt,Kt,Or){M(je(Kt),function(xn){Dt.removeEventListener(xn,Or,!1)})}function Ce(Dt,Kt){for(;Dt;){if(Dt==Kt)return!0;Dt=Dt.parentNode}return!1}function Ye(Dt,Kt){return Dt.indexOf(Kt)>-1}function je(Dt){return Dt.trim().split(/\s+/g)}function Et(Dt,Kt,Or){if(Dt.indexOf&&!Or)return Dt.indexOf(Kt);for(var xn=0;xn<Dt.length;){if(Or&&Dt[xn][Or]==Kt||!Or&&Dt[xn]===Kt)return xn;xn++}return-1}function Ae(Dt){return Array.prototype.slice.call(Dt,0)}function Qe(Dt,Kt,Or){for(var xn=[],ii=[],Zi=0;Zi<Dt.length;){var lo=Kt?Dt[Zi][Kt]:Dt[Zi];Et(ii,lo)<0&&xn.push(Dt[Zi]),ii[Zi]=lo,Zi++}return Or&&(Kt?xn=xn.sort(function(Eo,Po){return Eo[Kt]>Po[Kt]}):xn=xn.sort()),xn}function te(Dt,Kt){for(var Or,xn,ii=Kt[0].toUpperCase()+Kt.slice(1),Zi=0;Zi<K.length;){if(Or=K[Zi],xn=Or?Or+ii:Kt,xn in Dt)return xn;Zi++}return G}var Ze=1;function ie(){return Ze++}function Oe(Dt){var Kt=Dt.ownerDocument||Dt;return Kt.defaultView||Kt.parentWindow||X}var nt=/mobile|tablet|ip(ad|hone|od)|android/i,ye="ontouchstart"in X,Te=te(X,"PointerEvent")!==G,Je=ye&&nt.test(navigator.userAgent),pe="touch",Me="pen",ze="mouse",De="kinect",Ct=25,Vt=1,Ve=2,Ue=4,Ee=8,et=1,st=2,Re=4,Ie=8,ct=16,Tt=st|Re,Qt=Ie|ct,wt=Tt|Qt,se=["x","y"],Ge=["clientX","clientY"];function Ke(Dt,Kt){var Or=this;this.manager=Dt,this.callback=Kt,this.element=Dt.element,this.target=Dt.options.inputTarget,this.domHandler=function(xn){tt(Dt.options.enable,[Dt])&&Or.handler(xn)},this.init()}Ke.prototype={handler:function(){},init:function(){this.evEl&&ge(this.element,this.evEl,this.domHandler),this.evTarget&&ge(this.target,this.evTarget,this.domHandler),this.evWin&&ge(Oe(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&be(this.element,this.evEl,this.domHandler),this.evTarget&&be(this.target,this.evTarget,this.domHandler),this.evWin&&be(Oe(this.element),this.evWin,this.domHandler)}};function bt(Dt){var Kt,Or=Dt.options.inputClass;return Or?Kt=Or:Te?Kt=it:Je?Kt=Rt:ye?Kt=Mn:Kt=Un,new Kt(Dt,Be)}function Be(Dt,Kt,Or){var xn=Or.pointers.length,ii=Or.changedPointers.length,Zi=Kt&Vt&&xn-ii===0,lo=Kt&(Ue|Ee)&&xn-ii===0;Or.isFirst=!!Zi,Or.isFinal=!!lo,Zi&&(Dt.session={}),Or.eventType=Kt,pt(Dt,Or),Dt.emit("hammer.input",Or),Dt.recognize(Or),Dt.session.prevInput=Or}function pt(Dt,Kt){var Or=Dt.session,xn=Kt.pointers,ii=xn.length;Or.firstInput||(Or.firstInput=zt(Kt)),ii>1&&!Or.firstMultiple?Or.firstMultiple=zt(Kt):ii===1&&(Or.firstMultiple=!1);var Zi=Or.firstInput,lo=Or.firstMultiple,Bs=lo?lo.center:Zi.center,Eo=Kt.center=Jt(xn);Kt.timeStamp=ce(),Kt.deltaTime=Kt.timeStamp-Zi.timeStamp,Kt.angle=Zr(Bs,Eo),Kt.distance=br(Bs,Eo),It(Or,Kt),Kt.offsetDirection=pr(Kt.deltaX,Kt.deltaY);var Po=tr(Kt.deltaTime,Kt.deltaX,Kt.deltaY);Kt.overallVelocityX=Po.x,Kt.overallVelocityY=Po.y,Kt.overallVelocity=xe(Po.x)>xe(Po.y)?Po.x:Po.y,Kt.scale=lo?tn(lo.pointers,xn):1,Kt.rotation=lo?Nr(lo.pointers,xn):0,Kt.maxPointers=Or.prevInput?Kt.pointers.length>Or.prevInput.maxPointers?Kt.pointers.length:Or.prevInput.maxPointers:Kt.pointers.length,ot(Or,Kt);var Hu=Dt.element;Ce(Kt.srcEvent.target,Hu)&&(Hu=Kt.srcEvent.target),Kt.target=Hu}function It(Dt,Kt){var Or=Kt.center,xn=Dt.offsetDelta||{},ii=Dt.prevDelta||{},Zi=Dt.prevInput||{};(Kt.eventType===Vt||Zi.eventType===Ue)&&(ii=Dt.prevDelta={x:Zi.deltaX||0,y:Zi.deltaY||0},xn=Dt.offsetDelta={x:Or.x,y:Or.y}),Kt.deltaX=ii.x+(Or.x-xn.x),Kt.deltaY=ii.y+(Or.y-xn.y)}function ot(Dt,Kt){var Or=Dt.lastInterval||Kt,xn=Kt.timeStamp-Or.timeStamp,ii,Zi,lo,Bs;if(Kt.eventType!=Ee&&(xn>Ct||Or.velocity===G)){var Eo=Kt.deltaX-Or.deltaX,Po=Kt.deltaY-Or.deltaY,Hu=tr(xn,Eo,Po);Zi=Hu.x,lo=Hu.y,ii=xe(Hu.x)>xe(Hu.y)?Hu.x:Hu.y,Bs=pr(Eo,Po),Dt.lastInterval=Kt}else ii=Or.velocity,Zi=Or.velocityX,lo=Or.velocityY,Bs=Or.direction;Kt.velocity=ii,Kt.velocityX=Zi,Kt.velocityY=lo,Kt.direction=Bs}function zt(Dt){for(var Kt=[],Or=0;Or<Dt.pointers.length;)Kt[Or]={clientX:ee(Dt.pointers[Or].clientX),clientY:ee(Dt.pointers[Or].clientY)},Or++;return{timeStamp:ce(),pointers:Kt,center:Jt(Kt),deltaX:Dt.deltaX,deltaY:Dt.deltaY}}function Jt(Dt){var Kt=Dt.length;if(Kt===1)return{x:ee(Dt[0].clientX),y:ee(Dt[0].clientY)};for(var Or=0,xn=0,ii=0;ii<Kt;)Or+=Dt[ii].clientX,xn+=Dt[ii].clientY,ii++;return{x:ee(Or/Kt),y:ee(xn/Kt)}}function tr(Dt,Kt,Or){return{x:Kt/Dt||0,y:Or/Dt||0}}function pr(Dt,Kt){return Dt===Kt?et:xe(Dt)>=xe(Kt)?Dt<0?st:Re:Kt<0?Ie:ct}function br(Dt,Kt,Or){Or||(Or=se);var xn=Kt[Or[0]]-Dt[Or[0]],ii=Kt[Or[1]]-Dt[Or[1]];return Math.sqrt(xn*xn+ii*ii)}function Zr(Dt,Kt,Or){Or||(Or=se);var xn=Kt[Or[0]]-Dt[Or[0]],ii=Kt[Or[1]]-Dt[Or[1]];return Math.atan2(ii,xn)*180/Math.PI}function Nr(Dt,Kt){return Zr(Kt[1],Kt[0],Ge)+Zr(Dt[1],Dt[0],Ge)}function tn(Dt,Kt){return br(Kt[0],Kt[1],Ge)/br(Dt[0],Dt[1],Ge)}var Dn={mousedown:Vt,mousemove:Ve,mouseup:Ue},gn="mousedown",Vn="mousemove mouseup";function Un(){this.evEl=gn,this.evWin=Vn,this.pressed=!1,Ke.apply(this,arguments)}Pe(Un,Ke,{handler:function(Kt){var Or=Dn[Kt.type];Or&Vt&&Kt.button===0&&(this.pressed=!0),Or&Ve&&Kt.which!==1&&(Or=Ue),this.pressed&&(Or&Ue&&(this.pressed=!1),this.callback(this.manager,Or,{pointers:[Kt],changedPointers:[Kt],pointerType:ze,srcEvent:Kt}))}});var mi={pointerdown:Vt,pointermove:Ve,pointerup:Ue,pointercancel:Ee,pointerout:Ee},qn={2:pe,3:Me,4:ze,5:De},Xn="pointerdown",We="pointermove pointerup pointercancel";X.MSPointerEvent&&!X.PointerEvent&&(Xn="MSPointerDown",We="MSPointerMove MSPointerUp MSPointerCancel");function it(){this.evEl=Xn,this.evWin=We,Ke.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}Pe(it,Ke,{handler:function(Kt){var Or=this.store,xn=!1,ii=Kt.type.toLowerCase().replace("ms",""),Zi=mi[ii],lo=qn[Kt.pointerType]||Kt.pointerType,Bs=lo==pe,Eo=Et(Or,Kt.pointerId,"pointerId");Zi&Vt&&(Kt.button===0||Bs)?Eo<0&&(Or.push(Kt),Eo=Or.length-1):Zi&(Ue|Ee)&&(xn=!0),!(Eo<0)&&(Or[Eo]=Kt,this.callback(this.manager,Zi,{pointers:Or,changedPointers:[Kt],pointerType:lo,srcEvent:Kt}),xn&&Or.splice(Eo,1))}});var _t={touchstart:Vt,touchmove:Ve,touchend:Ue,touchcancel:Ee},Pt="touchstart",jt="touchstart touchmove touchend touchcancel";function gr(){this.evTarget=Pt,this.evWin=jt,this.started=!1,Ke.apply(this,arguments)}Pe(gr,Ke,{handler:function(Kt){var Or=_t[Kt.type];if(Or===Vt&&(this.started=!0),!!this.started){var xn=Cr.call(this,Kt,Or);Or&(Ue|Ee)&&xn[0].length-xn[1].length===0&&(this.started=!1),this.callback(this.manager,Or,{pointers:xn[0],changedPointers:xn[1],pointerType:pe,srcEvent:Kt})}}});function Cr(Dt,Kt){var Or=Ae(Dt.touches),xn=Ae(Dt.changedTouches);return Kt&(Ue|Ee)&&(Or=Qe(Or.concat(xn),"identifier",!0)),[Or,xn]}var kt={touchstart:Vt,touchmove:Ve,touchend:Ue,touchcancel:Ee},at="touchstart touchmove touchend touchcancel";function Rt(){this.evTarget=at,this.targetIds={},Ke.apply(this,arguments)}Pe(Rt,Ke,{handler:function(Kt){var Or=kt[Kt.type],xn=mr.call(this,Kt,Or);xn&&this.callback(this.manager,Or,{pointers:xn[0],changedPointers:xn[1],pointerType:pe,srcEvent:Kt})}});function mr(Dt,Kt){var Or=Ae(Dt.touches),xn=this.targetIds;if(Kt&(Vt|Ve)&&Or.length===1)return xn[Or[0].identifier]=!0,[Or,Or];var ii,Zi,lo=Ae(Dt.changedTouches),Bs=[],Eo=this.target;if(Zi=Or.filter(function(Po){return Ce(Po.target,Eo)}),Kt===Vt)for(ii=0;ii<Zi.length;)xn[Zi[ii].identifier]=!0,ii++;for(ii=0;ii<lo.length;)xn[lo[ii].identifier]&&Bs.push(lo[ii]),Kt&(Ue|Ee)&&delete xn[lo[ii].identifier],ii++;if(Bs.length)return[Qe(Zi.concat(Bs),"identifier",!0),Bs]}var Dr=2500,Ft=25;function Mn(){Ke.apply(this,arguments);var Dt=Le(this.handler,this);this.touch=new Rt(this.manager,Dt),this.mouse=new Un(this.manager,Dt),this.primaryTouch=null,this.lastTouches=[]}Pe(Mn,Ke,{handler:function(Kt,Or,xn){var ii=xn.pointerType==pe,Zi=xn.pointerType==ze;if(!(Zi&&xn.sourceCapabilities&&xn.sourceCapabilities.firesTouchEvents)){if(ii)yi.call(this,Or,xn);else if(Zi&&sn.call(this,xn))return;this.callback(Kt,Or,xn)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function yi(Dt,Kt){Dt&Vt?(this.primaryTouch=Kt.changedPointers[0].identifier,gi.call(this,Kt)):Dt&(Ue|Ee)&&gi.call(this,Kt)}function gi(Dt){var Kt=Dt.changedPointers[0];if(Kt.identifier===this.primaryTouch){var Or={x:Kt.clientX,y:Kt.clientY};this.lastTouches.push(Or);var xn=this.lastTouches,ii=function(){var Zi=xn.indexOf(Or);Zi>-1&&xn.splice(Zi,1)};setTimeout(ii,Dr)}}function sn(Dt){for(var Kt=Dt.srcEvent.clientX,Or=Dt.srcEvent.clientY,xn=0;xn<this.lastTouches.length;xn++){var ii=this.lastTouches[xn],Zi=Math.abs(Kt-ii.x),lo=Math.abs(Or-ii.y);if(Zi<=Ft&&lo<=Ft)return!0}return!1}var hi=te(Q.style,"touchAction"),ri=hi!==G,ui="compute",ba="auto",vi="manipulation",Sa="none",za="pan-x",_a="pan-y",Ga=uo();function Ea(Dt,Kt){this.manager=Dt,this.set(Kt)}Ea.prototype={set:function(Dt){Dt==ui&&(Dt=this.compute()),ri&&this.manager.element.style&&Ga[Dt]&&(this.manager.element.style[hi]=Dt),this.actions=Dt.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Dt=[];return M(this.manager.recognizers,function(Kt){tt(Kt.options.enable,[Kt])&&(Dt=Dt.concat(Kt.getTouchAction()))}),hs(Dt.join(" "))},preventDefaults:function(Dt){var Kt=Dt.srcEvent,Or=Dt.offsetDirection;if(this.manager.session.prevented){Kt.preventDefault();return}var xn=this.actions,ii=Ye(xn,Sa)&&!Ga[Sa],Zi=Ye(xn,_a)&&!Ga[_a],lo=Ye(xn,za)&&!Ga[za];if(ii){var Bs=Dt.pointers.length===1,Eo=Dt.distance<2,Po=Dt.deltaTime<250;if(Bs&&Eo&&Po)return}if(!(lo&&Zi)&&(ii||Zi&&Or&Tt||lo&&Or&Qt))return this.preventSrc(Kt)},preventSrc:function(Dt){this.manager.session.prevented=!0,Dt.preventDefault()}};function hs(Dt){if(Ye(Dt,Sa))return Sa;var Kt=Ye(Dt,za),Or=Ye(Dt,_a);return Kt&&Or?Sa:Kt||Or?Kt?za:_a:Ye(Dt,vi)?vi:ba}function uo(){if(!ri)return!1;var Dt={},Kt=X.CSS&&X.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Or){Dt[Or]=Kt?X.CSS.supports("touch-action",Or):!0}),Dt}var Ro=1,Jn=2,_i=4,na=8,Xa=na,ps=16,po=32;function Io(Dt){this.options=fe({},this.defaults,Dt||{}),this.id=ie(),this.manager=null,this.options.enable=ft(this.options.enable,!0),this.state=Ro,this.simultaneous={},this.requireFail=[]}Io.prototype={defaults:{},set:function(Dt){return fe(this.options,Dt),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Dt){if(J(Dt,"recognizeWith",this))return this;var Kt=this.simultaneous;return Dt=Xt(Dt,this),Kt[Dt.id]||(Kt[Dt.id]=Dt,Dt.recognizeWith(this)),this},dropRecognizeWith:function(Dt){return J(Dt,"dropRecognizeWith",this)?this:(Dt=Xt(Dt,this),delete this.simultaneous[Dt.id],this)},requireFailure:function(Dt){if(J(Dt,"requireFailure",this))return this;var Kt=this.requireFail;return Dt=Xt(Dt,this),Et(Kt,Dt)===-1&&(Kt.push(Dt),Dt.requireFailure(this)),this},dropRequireFailure:function(Dt){if(J(Dt,"dropRequireFailure",this))return this;Dt=Xt(Dt,this);var Kt=Et(this.requireFail,Dt);return Kt>-1&&this.requireFail.splice(Kt,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Dt){return!!this.simultaneous[Dt.id]},emit:function(Dt){var Kt=this,Or=this.state;function xn(ii){Kt.manager.emit(ii,Dt)}Or<na&&xn(Kt.options.event+nr(Or)),xn(Kt.options.event),Dt.additionalEvent&&xn(Dt.additionalEvent),Or>=na&&xn(Kt.options.event+nr(Or))},tryEmit:function(Dt){if(this.canEmit())return this.emit(Dt);this.state=po},canEmit:function(){for(var Dt=0;Dt<this.requireFail.length;){if(!(this.requireFail[Dt].state&(po|Ro)))return!1;Dt++}return!0},recognize:function(Dt){var Kt=fe({},Dt);if(!tt(this.options.enable,[this,Kt])){this.reset(),this.state=po;return}this.state&(Xa|ps|po)&&(this.state=Ro),this.state=this.process(Kt),this.state&(Jn|_i|na|ps)&&this.tryEmit(Kt)},process:function(Dt){},getTouchAction:function(){},reset:function(){}};function nr(Dt){return Dt&ps?"cancel":Dt&na?"end":Dt&_i?"move":Dt&Jn?"start":""}function At(Dt){return Dt==ct?"down":Dt==Ie?"up":Dt==st?"left":Dt==Re?"right":""}function Xt(Dt,Kt){var Or=Kt.manager;return Or?Or.get(Dt):Dt}function yr(){Io.apply(this,arguments)}Pe(yr,Io,{defaults:{pointers:1},attrTest:function(Dt){var Kt=this.options.pointers;return Kt===0||Dt.pointers.length===Kt},process:function(Dt){var Kt=this.state,Or=Dt.eventType,xn=Kt&(Jn|_i),ii=this.attrTest(Dt);return xn&&(Or&Ee||!ii)?Kt|ps:xn||ii?Or&Ue?Kt|na:Kt&Jn?Kt|_i:Jn:po}});function Gr(){yr.apply(this,arguments),this.pX=null,this.pY=null}Pe(Gr,yr,{defaults:{event:"pan",threshold:10,pointers:1,direction:wt},getTouchAction:function(){var Dt=this.options.direction,Kt=[];return Dt&Tt&&Kt.push(_a),Dt&Qt&&Kt.push(za),Kt},directionTest:function(Dt){var Kt=this.options,Or=!0,xn=Dt.distance,ii=Dt.direction,Zi=Dt.deltaX,lo=Dt.deltaY;return ii&Kt.direction||(Kt.direction&Tt?(ii=Zi===0?et:Zi<0?st:Re,Or=Zi!=this.pX,xn=Math.abs(Dt.deltaX)):(ii=lo===0?et:lo<0?Ie:ct,Or=lo!=this.pY,xn=Math.abs(Dt.deltaY))),Dt.direction=ii,Or&&xn>Kt.threshold&&ii&Kt.direction},attrTest:function(Dt){return yr.prototype.attrTest.call(this,Dt)&&(this.state&Jn||!(this.state&Jn)&&this.directionTest(Dt))},emit:function(Dt){this.pX=Dt.deltaX,this.pY=Dt.deltaY;var Kt=At(Dt.direction);Kt&&(Dt.additionalEvent=this.options.event+Kt),this._super.emit.call(this,Dt)}});function Cn(){yr.apply(this,arguments)}Pe(Cn,yr,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Sa]},attrTest:function(Dt){return this._super.attrTest.call(this,Dt)&&(Math.abs(Dt.scale-1)>this.options.threshold||this.state&Jn)},emit:function(Dt){if(Dt.scale!==1){var Kt=Dt.scale<1?"in":"out";Dt.additionalEvent=this.options.event+Kt}this._super.emit.call(this,Dt)}});function kn(){Io.apply(this,arguments),this._timer=null,this._input=null}Pe(kn,Io,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ba]},process:function(Dt){var Kt=this.options,Or=Dt.pointers.length===Kt.pointers,xn=Dt.distance<Kt.threshold,ii=Dt.deltaTime>Kt.time;if(this._input=Dt,!xn||!Or||Dt.eventType&(Ue|Ee)&&!ii)this.reset();else if(Dt.eventType&Vt)this.reset(),this._timer=he(function(){this.state=Xa,this.tryEmit()},Kt.time,this);else if(Dt.eventType&Ue)return Xa;return po},reset:function(){clearTimeout(this._timer)},emit:function(Dt){this.state===Xa&&(Dt&&Dt.eventType&Ue?this.manager.emit(this.options.event+"up",Dt):(this._input.timeStamp=ce(),this.manager.emit(this.options.event,this._input)))}});function _n(){yr.apply(this,arguments)}Pe(_n,yr,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Sa]},attrTest:function(Dt){return this._super.attrTest.call(this,Dt)&&(Math.abs(Dt.rotation)>this.options.threshold||this.state&Jn)}});function Mi(){yr.apply(this,arguments)}Pe(Mi,yr,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Tt|Qt,pointers:1},getTouchAction:function(){return Gr.prototype.getTouchAction.call(this)},attrTest:function(Dt){var Kt=this.options.direction,Or;return Kt&(Tt|Qt)?Or=Dt.overallVelocity:Kt&Tt?Or=Dt.overallVelocityX:Kt&Qt&&(Or=Dt.overallVelocityY),this._super.attrTest.call(this,Dt)&&Kt&Dt.offsetDirection&&Dt.distance>this.options.threshold&&Dt.maxPointers==this.options.pointers&&xe(Or)>this.options.velocity&&Dt.eventType&Ue},emit:function(Dt){var Kt=At(Dt.offsetDirection);Kt&&this.manager.emit(this.options.event+Kt,Dt),this.manager.emit(this.options.event,Dt)}});function Yi(){Io.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}Pe(Yi,Io,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[vi]},process:function(Dt){var Kt=this.options,Or=Dt.pointers.length===Kt.pointers,xn=Dt.distance<Kt.threshold,ii=Dt.deltaTime<Kt.time;if(this.reset(),Dt.eventType&Vt&&this.count===0)return this.failTimeout();if(xn&&ii&&Or){if(Dt.eventType!=Ue)return this.failTimeout();var Zi=this.pTime?Dt.timeStamp-this.pTime<Kt.interval:!0,lo=!this.pCenter||br(this.pCenter,Dt.center)<Kt.posThreshold;this.pTime=Dt.timeStamp,this.pCenter=Dt.center,!lo||!Zi?this.count=1:this.count+=1,this._input=Dt;var Bs=this.count%Kt.taps;if(Bs===0)return this.hasRequireFailures()?(this._timer=he(function(){this.state=Xa,this.tryEmit()},Kt.interval,this),Jn):Xa}return po},failTimeout:function(){return this._timer=he(function(){this.state=po},this.options.interval,this),po},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Xa&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Wo(Dt,Kt){return Kt=Kt||{},Kt.recognizers=ft(Kt.recognizers,Wo.defaults.preset),new No(Dt,Kt)}Wo.VERSION="2.0.7",Wo.defaults={domEvents:!1,touchAction:ui,enable:!0,inputTarget:null,inputClass:null,preset:[[_n,{enable:!1}],[Cn,{enable:!1},["rotate"]],[Mi,{direction:Tt}],[Gr,{direction:Tt},["swipe"]],[Yi],[Yi,{event:"doubletap",taps:2},["tap"]],[kn]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ko=1,su=2;function No(Dt,Kt){this.options=fe({},Wo.defaults,Kt||{}),this.options.inputTarget=this.options.inputTarget||Dt,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Dt,this.input=bt(this),this.touchAction=new Ea(this,this.options.touchAction),ro(this,!0),M(this.options.recognizers,function(Or){var xn=this.add(new Or[0](Or[1]));Or[2]&&xn.recognizeWith(Or[2]),Or[3]&&xn.requireFailure(Or[3])},this)}No.prototype={set:function(Dt){return fe(this.options,Dt),Dt.touchAction&&this.touchAction.update(),Dt.inputTarget&&(this.input.destroy(),this.input.target=Dt.inputTarget,this.input.init()),this},stop:function(Dt){this.session.stopped=Dt?su:Ko},recognize:function(Dt){var Kt=this.session;if(!Kt.stopped){this.touchAction.preventDefaults(Dt);var Or,xn=this.recognizers,ii=Kt.curRecognizer;(!ii||ii&&ii.state&Xa)&&(ii=Kt.curRecognizer=null);for(var Zi=0;Zi<xn.length;)Or=xn[Zi],Kt.stopped!==su&&(!ii||Or==ii||Or.canRecognizeWith(ii))?Or.recognize(Dt):Or.reset(),!ii&&Or.state&(Jn|_i|na)&&(ii=Kt.curRecognizer=Or),Zi++}},get:function(Dt){if(Dt instanceof Io)return Dt;for(var Kt=this.recognizers,Or=0;Or<Kt.length;Or++)if(Kt[Or].options.event==Dt)return Kt[Or];return null},add:function(Dt){if(J(Dt,"add",this))return this;var Kt=this.get(Dt.options.event);return Kt&&this.remove(Kt),this.recognizers.push(Dt),Dt.manager=this,this.touchAction.update(),Dt},remove:function(Dt){if(J(Dt,"remove",this))return this;if(Dt=this.get(Dt),Dt){var Kt=this.recognizers,Or=Et(Kt,Dt);Or!==-1&&(Kt.splice(Or,1),this.touchAction.update())}return this},on:function(Dt,Kt){if(Dt!==G&&Kt!==G){var Or=this.handlers;return M(je(Dt),function(xn){Or[xn]=Or[xn]||[],Or[xn].push(Kt)}),this}},off:function(Dt,Kt){if(Dt!==G){var Or=this.handlers;return M(je(Dt),function(xn){Kt?Or[xn]&&Or[xn].splice(Et(Or[xn],Kt),1):delete Or[xn]}),this}},emit:function(Dt,Kt){this.options.domEvents&&uu(Dt,Kt);var Or=this.handlers[Dt]&&this.handlers[Dt].slice();if(!(!Or||!Or.length)){Kt.type=Dt,Kt.preventDefault=function(){Kt.srcEvent.preventDefault()};for(var xn=0;xn<Or.length;)Or[xn](Kt),xn++}},destroy:function(){this.element&&ro(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function ro(Dt,Kt){var Or=Dt.element;if(Or.style){var xn;M(Dt.options.cssProps,function(ii,Zi){xn=te(Or.style,Zi),Kt?(Dt.oldCssProps[xn]=Or.style[xn],Or.style[xn]=ii):Or.style[xn]=Dt.oldCssProps[xn]||""}),Kt||(Dt.oldCssProps={})}}function uu(Dt,Kt){var Or=w.createEvent("Event");Or.initEvent(Dt,!0,!0),Or.gesture=Kt,Kt.target.dispatchEvent(Or)}fe(Wo,{INPUT_START:Vt,INPUT_MOVE:Ve,INPUT_END:Ue,INPUT_CANCEL:Ee,STATE_POSSIBLE:Ro,STATE_BEGAN:Jn,STATE_CHANGED:_i,STATE_ENDED:na,STATE_RECOGNIZED:Xa,STATE_CANCELLED:ps,STATE_FAILED:po,DIRECTION_NONE:et,DIRECTION_LEFT:st,DIRECTION_RIGHT:Re,DIRECTION_UP:Ie,DIRECTION_DOWN:ct,DIRECTION_HORIZONTAL:Tt,DIRECTION_VERTICAL:Qt,DIRECTION_ALL:wt,Manager:No,Input:Ke,TouchAction:Ea,TouchInput:Rt,MouseInput:Un,PointerEventInput:it,TouchMouseInput:Mn,SingleTouchInput:gr,Recognizer:Io,AttrRecognizer:yr,Tap:Yi,Pan:Gr,Swipe:Mi,Pinch:Cn,Rotate:_n,Press:kn,on:ge,off:be,each:M,merge:ke,extend:me,assign:fe,inherit:Pe,bindFn:Le,prefixed:te});var qo=typeof X!="undefined"?X:typeof self!="undefined"?self:{};qo.Hammer=Wo,$=function(){return Wo}.call(N,F,N,xt),$!==G&&(xt.exports=$)})(window,document,"Hammer")},7375:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var F=Symbol.for("INJECTION");function $(K,Q,oe,ee){function xe(){return ee&&!Reflect.hasMetadata(F,this,Q)&&Reflect.defineMetadata(F,oe(),this,Q),Reflect.hasMetadata(F,this,Q)?Reflect.getMetadata(F,this,Q):oe()}function ce(he){Reflect.defineMetadata(F,he,this,Q)}Object.defineProperty(K,Q,{configurable:!0,enumerable:!0,get:xe,set:ce})}function X(K,Q){return function(oe){return function(ee,xe){var ce=function(){return K.get(oe)};$(ee,xe,ce,Q)}}}N.makePropertyInjectDecorator=X;function w(K,Q){return function(oe,ee){return function(xe,ce){var he=function(){return K.getNamed(oe,ee)};$(xe,ce,he,Q)}}}N.makePropertyInjectNamedDecorator=w;function Y(K,Q){return function(oe,ee,xe){return function(ce,he){var J=function(){return K.getTagged(oe,ee,xe)};$(ce,he,J,Q)}}}N.makePropertyInjectTaggedDecorator=Y;function G(K,Q){return function(oe){return function(ee,xe){var ce=function(){return K.getAll(oe)};$(ee,xe,ce,Q)}}}N.makePropertyMultiInjectDecorator=G},84879:function(xt,N,F){"use strict";var $;$={value:!0};var X=F(7375);function w(Y,G){G===void 0&&(G=!0);var K=X.makePropertyInjectDecorator(Y,G),Q=X.makePropertyInjectNamedDecorator(Y,G),oe=X.makePropertyInjectTaggedDecorator(Y,G),ee=X.makePropertyMultiInjectDecorator(Y,G);return{lazyInject:K,lazyInjectNamed:Q,lazyInjectTagged:oe,lazyMultiInject:ee}}N.Z=w},99934:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.tagProperty=N.tagParameter=N.decorate=void 0;var $=F(16674),X=F(6867);function w(ee,xe,ce,he){var J=X.TAGGED;G(J,ee,xe,he,ce)}N.tagParameter=w;function Y(ee,xe,ce){var he=X.TAGGED_PROP;G(he,ee.constructor,xe,ce)}N.tagProperty=Y;function G(ee,xe,ce,he,J){var M={},E=typeof J=="number",fe=J!==void 0&&E?J.toString():ce;if(E&&ce!==void 0)throw new Error($.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(ee,xe)&&(M=Reflect.getMetadata(ee,xe));var me=M[fe];if(!Array.isArray(me))me=[];else for(var ke=0,Pe=me;ke<Pe.length;ke++){var Le=Pe[ke];if(Le.key===he.key)throw new Error($.DUPLICATED_METADATA+" "+Le.key.toString())}me.push(he),M[fe]=me,Reflect.defineMetadata(ee,M,xe)}function K(ee,xe){Reflect.decorate(ee,xe)}function Q(ee,xe){return function(ce,he){xe(ce,he,ee)}}function oe(ee,xe,ce){typeof ce=="number"?K([Q(ce,ee)],xe):typeof ce=="string"?Reflect.decorate([ee],xe,ce):K([ee],xe)}N.decorate=oe},5744:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.inject=N.LazyServiceIdentifer=void 0;var $=F(16674),X=F(6867),w=F(47738),Y=F(99934),G=function(){function Q(oe){this._cb=oe}return Q.prototype.unwrap=function(){return this._cb()},Q}();N.LazyServiceIdentifer=G;function K(Q){return function(oe,ee,xe){if(Q===void 0)throw new Error($.UNDEFINED_INJECT_ANNOTATION(oe.name));var ce=new w.Metadata(X.INJECT_TAG,Q);typeof xe=="number"?Y.tagParameter(oe,ee,xe,ce):Y.tagProperty(oe,ee,ce)}}N.inject=K},64315:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.injectable=void 0;var $=F(16674),X=F(6867);function w(){return function(Y){if(Reflect.hasOwnMetadata(X.PARAM_TYPES,Y))throw new Error($.DUPLICATED_INJECTABLE_DECORATOR);var G=Reflect.getMetadata(X.DESIGN_PARAM_TYPES,Y)||[];return Reflect.defineMetadata(X.PARAM_TYPES,G,Y),Y}}N.injectable=w},71693:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.multiInject=void 0;var $=F(6867),X=F(47738),w=F(99934);function Y(G){return function(K,Q,oe){var ee=new X.Metadata($.MULTI_INJECT_TAG,G);typeof oe=="number"?w.tagParameter(K,Q,oe,ee):w.tagProperty(K,Q,ee)}}N.multiInject=Y},38085:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.named=void 0;var $=F(6867),X=F(47738),w=F(99934);function Y(G){return function(K,Q,oe){var ee=new X.Metadata($.NAMED_TAG,G);typeof oe=="number"?w.tagParameter(K,Q,oe,ee):w.tagProperty(K,Q,ee)}}N.named=Y},6515:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.optional=void 0;var $=F(6867),X=F(47738),w=F(99934);function Y(){return function(G,K,Q){var oe=new X.Metadata($.OPTIONAL_TAG,!0);typeof Q=="number"?w.tagParameter(G,K,Q,oe):w.tagProperty(G,K,oe)}}N.optional=Y},7014:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.postConstruct=void 0;var $=F(16674),X=F(6867),w=F(47738);function Y(){return function(G,K,Q){var oe=new w.Metadata(X.POST_CONSTRUCT,K);if(Reflect.hasOwnMetadata(X.POST_CONSTRUCT,G.constructor))throw new Error($.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(X.POST_CONSTRUCT,oe,G.constructor)}}N.postConstruct=Y},32052:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.tagged=void 0;var $=F(47738),X=F(99934);function w(Y,G){return function(K,Q,oe){var ee=new $.Metadata(Y,G);typeof oe=="number"?X.tagParameter(K,Q,oe,ee):X.tagProperty(K,Q,ee)}}N.tagged=w},55638:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.targetName=void 0;var $=F(6867),X=F(47738),w=F(99934);function Y(G){return function(K,Q,oe){var ee=new X.Metadata($.NAME_TAG,G);w.tagParameter(K,Q,oe,ee)}}N.targetName=Y},86757:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.unmanaged=void 0;var $=F(6867),X=F(47738),w=F(99934);function Y(){return function(G,K,Q){var oe=new X.Metadata($.UNMANAGED_TAG,!0);w.tagParameter(G,K,Q,oe)}}N.unmanaged=Y},44290:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Binding=void 0;var $=F(28421),X=F(37791),w=function(){function Y(G,K){this.id=X.id(),this.activated=!1,this.serviceIdentifier=G,this.scope=K,this.type=$.BindingTypeEnum.Invalid,this.constraint=function(Q){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return Y.prototype.clone=function(){var G=new Y(this.serviceIdentifier,this.scope);return G.activated=G.scope===$.BindingScopeEnum.Singleton?this.activated:!1,G.implementationType=this.implementationType,G.dynamicValue=this.dynamicValue,G.scope=this.scope,G.type=this.type,G.factory=this.factory,G.provider=this.provider,G.constraint=this.constraint,G.onActivation=this.onActivation,G.cache=this.cache,G},Y}();N.Binding=w},23184:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingCount=void 0;var F={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};N.BindingCount=F},16674:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.STACK_OVERFLOW=N.CIRCULAR_DEPENDENCY_IN_FACTORY=N.POST_CONSTRUCT_ERROR=N.MULTIPLE_POST_CONSTRUCT_METHODS=N.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=N.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=N.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=N.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=N.ARGUMENTS_LENGTH_MISMATCH=N.INVALID_DECORATOR_OPERATION=N.INVALID_TO_SELF_VALUE=N.INVALID_FUNCTION_BINDING=N.INVALID_MIDDLEWARE_RETURN=N.NO_MORE_SNAPSHOTS_AVAILABLE=N.INVALID_BINDING_TYPE=N.NOT_IMPLEMENTED=N.CIRCULAR_DEPENDENCY=N.UNDEFINED_INJECT_ANNOTATION=N.MISSING_INJECT_ANNOTATION=N.MISSING_INJECTABLE_ANNOTATION=N.NOT_REGISTERED=N.CANNOT_UNBIND=N.AMBIGUOUS_MATCH=N.KEY_NOT_FOUND=N.NULL_ARGUMENT=N.DUPLICATED_METADATA=N.DUPLICATED_INJECTABLE_DECORATOR=void 0,N.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",N.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",N.NULL_ARGUMENT="NULL argument",N.KEY_NOT_FOUND="Key Not Found",N.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",N.CANNOT_UNBIND="Could not unbind serviceIdentifier:",N.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",N.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",N.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var F=function(Y){return"@inject called with undefined this could mean that the class "+Y+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};N.UNDEFINED_INJECT_ANNOTATION=F,N.CIRCULAR_DEPENDENCY="Circular dependency found:",N.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",N.INVALID_BINDING_TYPE="Invalid binding type:",N.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",N.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",N.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",N.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",N.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var $=function(){for(var Y=[],G=0;G<arguments.length;G++)Y[G]=arguments[G];return"The number of constructor arguments in the derived class "+(Y[0]+" must be >= than the number of constructor arguments of its base class.")};N.ARGUMENTS_LENGTH_MISMATCH=$,N.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",N.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",N.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",N.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",N.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var X=function(){for(var Y=[],G=0;G<arguments.length;G++)Y[G]=arguments[G];return"@postConstruct error in class "+Y[0]+": "+Y[1]};N.POST_CONSTRUCT_ERROR=X;var w=function(){for(var Y=[],G=0;G<arguments.length;G++)Y[G]=arguments[G];return"It looks like there is a circular dependency "+("in one of the '"+Y[0]+"' bindings. Please investigate bindings with")+("service identifier '"+Y[1]+"'.")};N.CIRCULAR_DEPENDENCY_IN_FACTORY=w,N.STACK_OVERFLOW="Maximum call stack size exceeded"},28421:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.TargetTypeEnum=N.BindingTypeEnum=N.BindingScopeEnum=void 0;var F={Request:"Request",Singleton:"Singleton",Transient:"Transient"};N.BindingScopeEnum=F;var $={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};N.BindingTypeEnum=$;var X={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};N.TargetTypeEnum=X},6867:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.NON_CUSTOM_TAG_KEYS=N.POST_CONSTRUCT=N.DESIGN_PARAM_TYPES=N.PARAM_TYPES=N.TAGGED_PROP=N.TAGGED=N.MULTI_INJECT_TAG=N.INJECT_TAG=N.OPTIONAL_TAG=N.UNMANAGED_TAG=N.NAME_TAG=N.NAMED_TAG=void 0,N.NAMED_TAG="named",N.NAME_TAG="name",N.UNMANAGED_TAG="unmanaged",N.OPTIONAL_TAG="optional",N.INJECT_TAG="inject",N.MULTI_INJECT_TAG="multi_inject",N.TAGGED="inversify:tagged",N.TAGGED_PROP="inversify:tagged_props",N.PARAM_TYPES="inversify:paramtypes",N.DESIGN_PARAM_TYPES="design:paramtypes",N.POST_CONSTRUCT="post_construct";function F(){return[N.INJECT_TAG,N.MULTI_INJECT_TAG,N.NAME_TAG,N.UNMANAGED_TAG,N.NAMED_TAG,N.OPTIONAL_TAG]}N.NON_CUSTOM_TAG_KEYS=F()},51389:function(xt,N,F){"use strict";var $=this&&this.__awaiter||function(me,ke,Pe,Le){function tt(ft){return ft instanceof Pe?ft:new Pe(function(ge){ge(ft)})}return new(Pe||(Pe=Promise))(function(ft,ge){function be(je){try{Ye(Le.next(je))}catch(Et){ge(Et)}}function Ce(je){try{Ye(Le.throw(je))}catch(Et){ge(Et)}}function Ye(je){je.done?ft(je.value):tt(je.value).then(be,Ce)}Ye((Le=Le.apply(me,ke||[])).next())})},X=this&&this.__generator||function(me,ke){var Pe={label:0,sent:function(){if(ft[0]&1)throw ft[1];return ft[1]},trys:[],ops:[]},Le,tt,ft,ge;return ge={next:be(0),throw:be(1),return:be(2)},typeof Symbol=="function"&&(ge[Symbol.iterator]=function(){return this}),ge;function be(Ye){return function(je){return Ce([Ye,je])}}function Ce(Ye){if(Le)throw new TypeError("Generator is already executing.");for(;Pe;)try{if(Le=1,tt&&(ft=Ye[0]&2?tt.return:Ye[0]?tt.throw||((ft=tt.return)&&ft.call(tt),0):tt.next)&&!(ft=ft.call(tt,Ye[1])).done)return ft;switch(tt=0,ft&&(Ye=[Ye[0]&2,ft.value]),Ye[0]){case 0:case 1:ft=Ye;break;case 4:return Pe.label++,{value:Ye[1],done:!1};case 5:Pe.label++,tt=Ye[1],Ye=[0];continue;case 7:Ye=Pe.ops.pop(),Pe.trys.pop();continue;default:if(ft=Pe.trys,!(ft=ft.length>0&&ft[ft.length-1])&&(Ye[0]===6||Ye[0]===2)){Pe=0;continue}if(Ye[0]===3&&(!ft||Ye[1]>ft[0]&&Ye[1]<ft[3])){Pe.label=Ye[1];break}if(Ye[0]===6&&Pe.label<ft[1]){Pe.label=ft[1],ft=Ye;break}if(ft&&Pe.label<ft[2]){Pe.label=ft[2],Pe.ops.push(Ye);break}ft[2]&&Pe.ops.pop(),Pe.trys.pop();continue}Ye=ke.call(me,Pe)}catch(je){Ye=[6,je],tt=0}finally{Le=ft=0}if(Ye[0]&5)throw Ye[1];return{value:Ye[0]?Ye[1]:void 0,done:!0}}},w=this&&this.__spreadArray||function(me,ke){for(var Pe=0,Le=ke.length,tt=me.length;Pe<Le;Pe++,tt++)me[tt]=ke[Pe];return me};Object.defineProperty(N,"__esModule",{value:!0}),N.Container=void 0;var Y=F(44290),G=F(16674),K=F(28421),Q=F(6867),oe=F(51377),ee=F(86311),xe=F(31927),ce=F(51860),he=F(37791),J=F(55800),M=F(85700),E=F(80175),fe=function(){function me(ke){this._appliedMiddleware=[];var Pe=ke||{};if(typeof Pe!="object")throw new Error(""+G.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(Pe.defaultScope===void 0)Pe.defaultScope=K.BindingScopeEnum.Transient;else if(Pe.defaultScope!==K.BindingScopeEnum.Singleton&&Pe.defaultScope!==K.BindingScopeEnum.Transient&&Pe.defaultScope!==K.BindingScopeEnum.Request)throw new Error(""+G.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(Pe.autoBindInjectable===void 0)Pe.autoBindInjectable=!1;else if(typeof Pe.autoBindInjectable!="boolean")throw new Error(""+G.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(Pe.skipBaseClassChecks===void 0)Pe.skipBaseClassChecks=!1;else if(typeof Pe.skipBaseClassChecks!="boolean")throw new Error(""+G.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:Pe.autoBindInjectable,defaultScope:Pe.defaultScope,skipBaseClassChecks:Pe.skipBaseClassChecks},this.id=he.id(),this._bindingDictionary=new E.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new oe.MetadataReader}return me.merge=function(ke,Pe){for(var Le=[],tt=2;tt<arguments.length;tt++)Le[tt-2]=arguments[tt];var ft=new me,ge=w([ke,Pe],Le).map(function(Ye){return ee.getBindingDictionary(Ye)}),be=ee.getBindingDictionary(ft);function Ce(Ye,je){Ye.traverse(function(Et,Ae){Ae.forEach(function(Qe){je.add(Qe.serviceIdentifier,Qe.clone())})})}return ge.forEach(function(Ye){Ce(Ye,be)}),ft},me.prototype.load=function(){for(var ke=[],Pe=0;Pe<arguments.length;Pe++)ke[Pe]=arguments[Pe];for(var Le=this._getContainerModuleHelpersFactory(),tt=0,ft=ke;tt<ft.length;tt++){var ge=ft[tt],be=Le(ge.id);ge.registry(be.bindFunction,be.unbindFunction,be.isboundFunction,be.rebindFunction)}},me.prototype.loadAsync=function(){for(var ke=[],Pe=0;Pe<arguments.length;Pe++)ke[Pe]=arguments[Pe];return $(this,void 0,void 0,function(){var Le,tt,ft,ge,be;return X(this,function(Ce){switch(Ce.label){case 0:Le=this._getContainerModuleHelpersFactory(),tt=0,ft=ke,Ce.label=1;case 1:return tt<ft.length?(ge=ft[tt],be=Le(ge.id),[4,ge.registry(be.bindFunction,be.unbindFunction,be.isboundFunction,be.rebindFunction)]):[3,4];case 2:Ce.sent(),Ce.label=3;case 3:return tt++,[3,1];case 4:return[2]}})})},me.prototype.unload=function(){for(var ke=this,Pe=[],Le=0;Le<arguments.length;Le++)Pe[Le]=arguments[Le];var tt=function(ft){return function(ge){return ge.moduleId===ft}};Pe.forEach(function(ft){var ge=tt(ft.id);ke._bindingDictionary.removeByCondition(ge)})},me.prototype.bind=function(ke){var Pe=this.options.defaultScope||K.BindingScopeEnum.Transient,Le=new Y.Binding(ke,Pe);return this._bindingDictionary.add(ke,Le),new ce.BindingToSyntax(Le)},me.prototype.rebind=function(ke){return this.unbind(ke),this.bind(ke)},me.prototype.unbind=function(ke){try{this._bindingDictionary.remove(ke)}catch(Pe){throw new Error(G.CANNOT_UNBIND+" "+J.getServiceIdentifierAsString(ke))}},me.prototype.unbindAll=function(){this._bindingDictionary=new E.Lookup},me.prototype.isBound=function(ke){var Pe=this._bindingDictionary.hasKey(ke);return!Pe&&this.parent&&(Pe=this.parent.isBound(ke)),Pe},me.prototype.isBoundNamed=function(ke,Pe){return this.isBoundTagged(ke,Q.NAMED_TAG,Pe)},me.prototype.isBoundTagged=function(ke,Pe,Le){var tt=!1;if(this._bindingDictionary.hasKey(ke)){var ft=this._bindingDictionary.get(ke),ge=ee.createMockRequest(this,ke,Pe,Le);tt=ft.some(function(be){return be.constraint(ge)})}return!tt&&this.parent&&(tt=this.parent.isBoundTagged(ke,Pe,Le)),tt},me.prototype.snapshot=function(){this._snapshots.push(M.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},me.prototype.restore=function(){var ke=this._snapshots.pop();if(ke===void 0)throw new Error(G.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=ke.bindings,this._middleware=ke.middleware},me.prototype.createChild=function(ke){var Pe=new me(ke||this.options);return Pe.parent=this,Pe},me.prototype.applyMiddleware=function(){for(var ke=[],Pe=0;Pe<arguments.length;Pe++)ke[Pe]=arguments[Pe];this._appliedMiddleware=this._appliedMiddleware.concat(ke);var Le=this._middleware?this._middleware:this._planAndResolve();this._middleware=ke.reduce(function(tt,ft){return ft(tt)},Le)},me.prototype.applyCustomMetadataReader=function(ke){this._metadataReader=ke},me.prototype.get=function(ke){return this._get(!1,!1,K.TargetTypeEnum.Variable,ke)},me.prototype.getTagged=function(ke,Pe,Le){return this._get(!1,!1,K.TargetTypeEnum.Variable,ke,Pe,Le)},me.prototype.getNamed=function(ke,Pe){return this.getTagged(ke,Q.NAMED_TAG,Pe)},me.prototype.getAll=function(ke){return this._get(!0,!0,K.TargetTypeEnum.Variable,ke)},me.prototype.getAllTagged=function(ke,Pe,Le){return this._get(!1,!0,K.TargetTypeEnum.Variable,ke,Pe,Le)},me.prototype.getAllNamed=function(ke,Pe){return this.getAllTagged(ke,Q.NAMED_TAG,Pe)},me.prototype.resolve=function(ke){var Pe=this.createChild();return Pe.bind(ke).toSelf(),this._appliedMiddleware.forEach(function(Le){Pe.applyMiddleware(Le)}),Pe.get(ke)},me.prototype._getContainerModuleHelpersFactory=function(){var ke=this,Pe=function(be,Ce){be._binding.moduleId=Ce},Le=function(be){return function(Ce){var Ye=ke.bind.bind(ke),je=Ye(Ce);return Pe(je,be),je}},tt=function(be){return function(Ce){var Ye=ke.unbind.bind(ke);Ye(Ce)}},ft=function(be){return function(Ce){var Ye=ke.isBound.bind(ke);return Ye(Ce)}},ge=function(be){return function(Ce){var Ye=ke.rebind.bind(ke),je=Ye(Ce);return Pe(je,be),je}};return function(be){return{bindFunction:Le(be),isboundFunction:ft(be),rebindFunction:ge(be),unbindFunction:tt(be)}}},me.prototype._get=function(ke,Pe,Le,tt,ft,ge){var be=null,Ce={avoidConstraints:ke,contextInterceptor:function(Ye){return Ye},isMultiInject:Pe,key:ft,serviceIdentifier:tt,targetType:Le,value:ge};if(this._middleware){if(be=this._middleware(Ce),be==null)throw new Error(G.INVALID_MIDDLEWARE_RETURN)}else be=this._planAndResolve()(Ce);return be},me.prototype._planAndResolve=function(){var ke=this;return function(Pe){var Le=ee.plan(ke._metadataReader,ke,Pe.isMultiInject,Pe.targetType,Pe.serviceIdentifier,Pe.key,Pe.value,Pe.avoidConstraints);Le=Pe.contextInterceptor(Le);var tt=xe.resolve(Le);return tt}},me}();N.Container=fe},33244:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.AsyncContainerModule=N.ContainerModule=void 0;var $=F(37791),X=function(){function Y(G){this.id=$.id(),this.registry=G}return Y}();N.ContainerModule=X;var w=function(){function Y(G){this.id=$.id(),this.registry=G}return Y}();N.AsyncContainerModule=w},85700:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.ContainerSnapshot=void 0;var F=function(){function $(){}return $.of=function(X,w){var Y=new $;return Y.bindings=X,Y.middleware=w,Y},$}();N.ContainerSnapshot=F},80175:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Lookup=void 0;var $=F(16674),X=function(){function w(){this._map=new Map}return w.prototype.getMap=function(){return this._map},w.prototype.add=function(Y,G){if(Y==null)throw new Error($.NULL_ARGUMENT);if(G==null)throw new Error($.NULL_ARGUMENT);var K=this._map.get(Y);K!==void 0?(K.push(G),this._map.set(Y,K)):this._map.set(Y,[G])},w.prototype.get=function(Y){if(Y==null)throw new Error($.NULL_ARGUMENT);var G=this._map.get(Y);if(G!==void 0)return G;throw new Error($.KEY_NOT_FOUND)},w.prototype.remove=function(Y){if(Y==null)throw new Error($.NULL_ARGUMENT);if(!this._map.delete(Y))throw new Error($.KEY_NOT_FOUND)},w.prototype.removeByCondition=function(Y){var G=this;this._map.forEach(function(K,Q){var oe=K.filter(function(ee){return!Y(ee)});oe.length>0?G._map.set(Q,oe):G._map.delete(Q)})},w.prototype.hasKey=function(Y){if(Y==null)throw new Error($.NULL_ARGUMENT);return this._map.has(Y)},w.prototype.clone=function(){var Y=new w;return this._map.forEach(function(G,K){G.forEach(function(Q){return Y.add(K,Q.clone())})}),Y},w.prototype.traverse=function(Y){this._map.forEach(function(G,K){Y(K,G)})},w}();N.Lookup=X},86700:function(xt,N,F){"use strict";var $;$={value:!0},$=$=$=$=$=$=N.GW=$=$=N.zY=$=$=$=$=$=N.f3=$=$=N.b2=$=$=$=$=$=N.W2=$=void 0;var X=F(6867);$=X;var w=F(51389);Object.defineProperty(N,"W2",{enumerable:!0,get:function(){return w.Container}});var Y=F(28421);$={enumerable:!0,get:function(){return Y.BindingScopeEnum}},$={enumerable:!0,get:function(){return Y.BindingTypeEnum}},$={enumerable:!0,get:function(){return Y.TargetTypeEnum}};var G=F(33244);$={enumerable:!0,get:function(){return G.AsyncContainerModule}},$={enumerable:!0,get:function(){return G.ContainerModule}};var K=F(64315);Object.defineProperty(N,"b2",{enumerable:!0,get:function(){return K.injectable}});var Q=F(32052);$={enumerable:!0,get:function(){return Q.tagged}};var oe=F(38085);$={enumerable:!0,get:function(){return oe.named}};var ee=F(5744);Object.defineProperty(N,"f3",{enumerable:!0,get:function(){return ee.inject}}),$={enumerable:!0,get:function(){return ee.LazyServiceIdentifer}};var xe=F(6515);$={enumerable:!0,get:function(){return xe.optional}};var ce=F(86757);$={enumerable:!0,get:function(){return ce.unmanaged}};var he=F(71693);$={enumerable:!0,get:function(){return he.multiInject}};var J=F(55638);$={enumerable:!0,get:function(){return J.targetName}};var M=F(7014);Object.defineProperty(N,"zY",{enumerable:!0,get:function(){return M.postConstruct}});var E=F(51377);$={enumerable:!0,get:function(){return E.MetadataReader}};var fe=F(37791);$={enumerable:!0,get:function(){return fe.id}};var me=F(99934);Object.defineProperty(N,"GW",{enumerable:!0,get:function(){return me.decorate}});var ke=F(80758);$={enumerable:!0,get:function(){return ke.traverseAncerstors}},$={enumerable:!0,get:function(){return ke.taggedConstraint}},$={enumerable:!0,get:function(){return ke.namedConstraint}},$={enumerable:!0,get:function(){return ke.typeConstraint}};var Pe=F(55800);$={enumerable:!0,get:function(){return Pe.getServiceIdentifierAsString}};var Le=F(70600);$={enumerable:!0,get:function(){return Le.multiBindToService}}},95228:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Context=void 0;var $=F(37791),X=function(){function w(Y){this.id=$.id(),this.container=Y}return w.prototype.addPlan=function(Y){this.plan=Y},w.prototype.setCurrentRequest=function(Y){this.currentRequest=Y},w}();N.Context=X},47738:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Metadata=void 0;var $=F(6867),X=function(){function w(Y,G){this.key=Y,this.value=G}return w.prototype.toString=function(){return this.key===$.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},w}();N.Metadata=X},51377:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.MetadataReader=void 0;var $=F(6867),X=function(){function w(){}return w.prototype.getConstructorMetadata=function(Y){var G=Reflect.getMetadata($.PARAM_TYPES,Y),K=Reflect.getMetadata($.TAGGED,Y);return{compilerGeneratedMetadata:G,userGeneratedMetadata:K||{}}},w.prototype.getPropertiesMetadata=function(Y){var G=Reflect.getMetadata($.TAGGED_PROP,Y)||[];return G},w}();N.MetadataReader=X},55314:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Plan=void 0;var F=function(){function $(X,w){this.parentContext=X,this.rootRequest=w}return $}();N.Plan=F},86311:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.getBindingDictionary=N.createMockRequest=N.plan=void 0;var $=F(23184),X=F(16674),w=F(28421),Y=F(6867),G=F(54623),K=F(55800),Q=F(95228),oe=F(47738),ee=F(55314),xe=F(6e3),ce=F(6748),he=F(18924);function J(tt){return tt._bindingDictionary}N.getBindingDictionary=J;function M(tt,ft,ge,be,Ce,Ye){var je=tt?Y.MULTI_INJECT_TAG:Y.INJECT_TAG,Et=new oe.Metadata(je,ge),Ae=new he.Target(ft,be,ge,Et);if(Ce!==void 0){var Qe=new oe.Metadata(Ce,Ye);Ae.metadata.push(Qe)}return Ae}function E(tt,ft,ge,be,Ce){var Ye=ke(ge.container,Ce.serviceIdentifier),je=[];return Ye.length===$.BindingCount.NoBindingsAvailable&&ge.container.options.autoBindInjectable&&typeof Ce.serviceIdentifier=="function"&&tt.getConstructorMetadata(Ce.serviceIdentifier).compilerGeneratedMetadata&&(ge.container.bind(Ce.serviceIdentifier).toSelf(),Ye=ke(ge.container,Ce.serviceIdentifier)),ft?je=Ye:je=Ye.filter(function(Et){var Ae=new ce.Request(Et.serviceIdentifier,ge,be,Et,Ce);return Et.constraint(Ae)}),fe(Ce.serviceIdentifier,je,Ce,ge.container),je}function fe(tt,ft,ge,be){switch(ft.length){case $.BindingCount.NoBindingsAvailable:if(ge.isOptional())return ft;var Ce=K.getServiceIdentifierAsString(tt),Ye=X.NOT_REGISTERED;throw Ye+=K.listMetadataForTarget(Ce,ge),Ye+=K.listRegisteredBindingsForServiceIdentifier(be,Ce,ke),new Error(Ye);case $.BindingCount.OnlyOneBindingAvailable:if(!ge.isArray())return ft;case $.BindingCount.MultipleBindingsAvailable:default:if(ge.isArray())return ft;var Ce=K.getServiceIdentifierAsString(tt),Ye=X.AMBIGUOUS_MATCH+" "+Ce;throw Ye+=K.listRegisteredBindingsForServiceIdentifier(be,Ce,ke),new Error(Ye)}}function me(tt,ft,ge,be,Ce,Ye){var je,Et;if(Ce===null){je=E(tt,ft,be,null,Ye),Et=new ce.Request(ge,be,null,je,Ye);var Ae=new ee.Plan(be,Et);be.addPlan(Ae)}else je=E(tt,ft,be,Ce,Ye),Et=Ce.addChildRequest(Ye.serviceIdentifier,je,Ye);je.forEach(function(Qe){var te=null;if(Ye.isArray())te=Et.addChildRequest(Qe.serviceIdentifier,Qe,Ye);else{if(Qe.cache)return;te=Et}if(Qe.type===w.BindingTypeEnum.Instance&&Qe.implementationType!==null){var Ze=xe.getDependencies(tt,Qe.implementationType);if(!be.container.options.skipBaseClassChecks){var ie=xe.getBaseClassDependencyCount(tt,Qe.implementationType);if(Ze.length<ie){var Oe=X.ARGUMENTS_LENGTH_MISMATCH(xe.getFunctionName(Qe.implementationType));throw new Error(Oe)}}Ze.forEach(function(nt){me(tt,!1,nt.serviceIdentifier,be,te,nt)})}})}function ke(tt,ft){var ge=[],be=J(tt);return be.hasKey(ft)?ge=be.get(ft):tt.parent!==null&&(ge=ke(tt.parent,ft)),ge}function Pe(tt,ft,ge,be,Ce,Ye,je,Et){Et===void 0&&(Et=!1);var Ae=new Q.Context(ft),Qe=M(ge,be,Ce,"",Ye,je);try{return me(tt,Et,Ce,Ae,null,Qe),Ae}catch(te){throw G.isStackOverflowExeption(te)&&Ae.plan&&K.circularDependencyToException(Ae.plan.rootRequest),te}}N.plan=Pe;function Le(tt,ft,ge,be){var Ce=new he.Target(w.TargetTypeEnum.Variable,"",ft,new oe.Metadata(ge,be)),Ye=new Q.Context(tt),je=new ce.Request(ft,Ye,null,[],Ce);return je}N.createMockRequest=Le},88460:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.QueryableString=void 0;var F=function(){function $(X){this.str=X}return $.prototype.startsWith=function(X){return this.str.indexOf(X)===0},$.prototype.endsWith=function(X){var w="",Y=X.split("").reverse().join("");return w=this.str.split("").reverse().join(""),this.startsWith.call({str:w},Y)},$.prototype.contains=function(X){return this.str.indexOf(X)!==-1},$.prototype.equals=function(X){return this.str===X},$.prototype.value=function(){return this.str},$}();N.QueryableString=F},6e3:function(xt,N,F){"use strict";var $=this&&this.__spreadArray||function(E,fe){for(var me=0,ke=fe.length,Pe=E.length;me<ke;me++,Pe++)E[Pe]=fe[me];return E};Object.defineProperty(N,"__esModule",{value:!0}),N.getFunctionName=N.getBaseClassDependencyCount=N.getDependencies=void 0;var X=F(5744),w=F(16674),Y=F(28421),G=F(6867),K=F(55800);Object.defineProperty(N,"getFunctionName",{enumerable:!0,get:function(){return K.getFunctionName}});var Q=F(18924);function oe(E,fe){var me=K.getFunctionName(fe),ke=ee(E,me,fe,!1);return ke}N.getDependencies=oe;function ee(E,fe,me,ke){var Pe=E.getConstructorMetadata(me),Le=Pe.compilerGeneratedMetadata;if(Le===void 0){var tt=w.MISSING_INJECTABLE_ANNOTATION+" "+fe+".";throw new Error(tt)}var ft=Pe.userGeneratedMetadata,ge=Object.keys(ft),be=me.length===0&&ge.length>0,Ce=ge.length>me.length,Ye=be||Ce?ge.length:me.length,je=ce(ke,fe,Le,ft,Ye),Et=he(E,me),Ae=$($([],je),Et);return Ae}function xe(E,fe,me,ke,Pe){var Le=Pe[E.toString()]||[],tt=M(Le),ft=tt.unmanaged!==!0,ge=ke[E],be=tt.inject||tt.multiInject;if(ge=be||ge,ge instanceof X.LazyServiceIdentifer&&(ge=ge.unwrap()),ft){var Ce=ge===Object,Ye=ge===Function,je=ge===void 0,Et=Ce||Ye||je;if(!fe&&Et){var Ae=w.MISSING_INJECT_ANNOTATION+" argument "+E+" in class "+me+".";throw new Error(Ae)}var Qe=new Q.Target(Y.TargetTypeEnum.ConstructorArgument,tt.targetName,ge);return Qe.metadata=Le,Qe}return null}function ce(E,fe,me,ke,Pe){for(var Le=[],tt=0;tt<Pe;tt++){var ft=tt,ge=xe(ft,E,fe,me,ke);ge!==null&&Le.push(ge)}return Le}function he(E,fe){for(var me=E.getPropertiesMetadata(fe),ke=[],Pe=Object.keys(me),Le=0,tt=Pe;Le<tt.length;Le++){var ft=tt[Le],ge=me[ft],be=M(me[ft]),Ce=be.targetName||ft,Ye=be.inject||be.multiInject,je=new Q.Target(Y.TargetTypeEnum.ClassProperty,Ce,Ye);je.metadata=ge,ke.push(je)}var Et=Object.getPrototypeOf(fe.prototype).constructor;if(Et!==Object){var Ae=he(E,Et);ke=$($([],ke),Ae)}return ke}function J(E,fe){var me=Object.getPrototypeOf(fe.prototype).constructor;if(me!==Object){var ke=K.getFunctionName(me),Pe=ee(E,ke,me,!0),Le=Pe.map(function(ge){return ge.metadata.filter(function(be){return be.key===G.UNMANAGED_TAG})}),tt=[].concat.apply([],Le).length,ft=Pe.length-tt;return ft>0?ft:J(E,me)}else return 0}N.getBaseClassDependencyCount=J;function M(E){var fe={};return E.forEach(function(me){fe[me.key.toString()]=me.value}),{inject:fe[G.INJECT_TAG],multiInject:fe[G.MULTI_INJECT_TAG],targetName:fe[G.NAME_TAG],unmanaged:fe[G.UNMANAGED_TAG]}}},6748:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Request=void 0;var $=F(37791),X=function(){function w(Y,G,K,Q,oe){this.id=$.id(),this.serviceIdentifier=Y,this.parentContext=G,this.parentRequest=K,this.target=oe,this.childRequests=[],this.bindings=Array.isArray(Q)?Q:[Q],this.requestScope=K===null?new Map:null}return w.prototype.addChildRequest=function(Y,G,K){var Q=new w(Y,this.parentContext,this,G,K);return this.childRequests.push(Q),Q},w}();N.Request=X},18924:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Target=void 0;var $=F(6867),X=F(37791),w=F(47738),Y=F(88460),G=function(){function K(Q,oe,ee,xe){this.id=X.id(),this.type=Q,this.serviceIdentifier=ee,this.name=new Y.QueryableString(oe||""),this.metadata=new Array;var ce=null;typeof xe=="string"?ce=new w.Metadata($.NAMED_TAG,xe):xe instanceof w.Metadata&&(ce=xe),ce!==null&&this.metadata.push(ce)}return K.prototype.hasTag=function(Q){for(var oe=0,ee=this.metadata;oe<ee.length;oe++){var xe=ee[oe];if(xe.key===Q)return!0}return!1},K.prototype.isArray=function(){return this.hasTag($.MULTI_INJECT_TAG)},K.prototype.matchesArray=function(Q){return this.matchesTag($.MULTI_INJECT_TAG)(Q)},K.prototype.isNamed=function(){return this.hasTag($.NAMED_TAG)},K.prototype.isTagged=function(){return this.metadata.some(function(Q){return $.NON_CUSTOM_TAG_KEYS.every(function(oe){return Q.key!==oe})})},K.prototype.isOptional=function(){return this.matchesTag($.OPTIONAL_TAG)(!0)},K.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(Q){return Q.key===$.NAMED_TAG})[0]:null},K.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(Q){return $.NON_CUSTOM_TAG_KEYS.every(function(oe){return Q.key!==oe})}):null},K.prototype.matchesNamedTag=function(Q){return this.matchesTag($.NAMED_TAG)(Q)},K.prototype.matchesTag=function(Q){var oe=this;return function(ee){for(var xe=0,ce=oe.metadata;xe<ce.length;xe++){var he=ce[xe];if(he.key===Q&&he.value===ee)return!0}return!1}},K}();N.Target=G},52279:function(xt,N,F){"use strict";var $=this&&this.__spreadArray||function(ee,xe){for(var ce=0,he=xe.length,J=ee.length;ce<he;ce++,J++)ee[J]=xe[ce];return ee};Object.defineProperty(N,"__esModule",{value:!0}),N.resolveInstance=void 0;var X=F(16674),w=F(28421),Y=F(6867);function G(ee,xe,ce){var he=xe.filter(function(M){return M.target!==null&&M.target.type===w.TargetTypeEnum.ClassProperty}),J=he.map(ce);return he.forEach(function(M,E){var fe="";fe=M.target.name.value();var me=J[E];ee[fe]=me}),ee}function K(ee,xe){return new(ee.bind.apply(ee,$([void 0],xe)))}function Q(ee,xe){if(Reflect.hasMetadata(Y.POST_CONSTRUCT,ee)){var ce=Reflect.getMetadata(Y.POST_CONSTRUCT,ee);try{xe[ce.value]()}catch(he){throw new Error(X.POST_CONSTRUCT_ERROR(ee.name,he.message))}}}function oe(ee,xe,ce){var he=null;if(xe.length>0){var J=xe.filter(function(E){return E.target!==null&&E.target.type===w.TargetTypeEnum.ConstructorArgument}),M=J.map(ce);he=K(ee,M),he=G(he,xe,ce)}else he=new ee;return Q(ee,he),he}N.resolveInstance=oe},31927:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.resolve=void 0;var $=F(16674),X=F(28421),w=F(54623),Y=F(55800),G=F(52279),K=function(ee,xe,ce){try{return ce()}catch(he){throw w.isStackOverflowExeption(he)?new Error($.CIRCULAR_DEPENDENCY_IN_FACTORY(ee,xe.toString())):he}},Q=function(ee){return function(xe){xe.parentContext.setCurrentRequest(xe);var ce=xe.bindings,he=xe.childRequests,J=xe.target&&xe.target.isArray(),M=!xe.parentRequest||!xe.parentRequest.target||!xe.target||!xe.parentRequest.target.matchesArray(xe.target.serviceIdentifier);if(J&&M)return he.map(function(Le){var tt=Q(ee);return tt(Le)});var E=null;if(xe.target.isOptional()&&ce.length===0)return;var fe=ce[0],me=fe.scope===X.BindingScopeEnum.Singleton,ke=fe.scope===X.BindingScopeEnum.Request;if(me&&fe.activated)return fe.cache;if(ke&&ee!==null&&ee.has(fe.id))return ee.get(fe.id);if(fe.type===X.BindingTypeEnum.ConstantValue)E=fe.cache,fe.activated=!0;else if(fe.type===X.BindingTypeEnum.Function)E=fe.cache,fe.activated=!0;else if(fe.type===X.BindingTypeEnum.Constructor)E=fe.implementationType;else if(fe.type===X.BindingTypeEnum.DynamicValue&&fe.dynamicValue!==null)E=K("toDynamicValue",fe.serviceIdentifier,function(){return fe.dynamicValue(xe.parentContext)});else if(fe.type===X.BindingTypeEnum.Factory&&fe.factory!==null)E=K("toFactory",fe.serviceIdentifier,function(){return fe.factory(xe.parentContext)});else if(fe.type===X.BindingTypeEnum.Provider&&fe.provider!==null)E=K("toProvider",fe.serviceIdentifier,function(){return fe.provider(xe.parentContext)});else if(fe.type===X.BindingTypeEnum.Instance&&fe.implementationType!==null)E=G.resolveInstance(fe.implementationType,he,Q(ee));else{var Pe=Y.getServiceIdentifierAsString(xe.serviceIdentifier);throw new Error($.INVALID_BINDING_TYPE+" "+Pe)}return typeof fe.onActivation=="function"&&(E=fe.onActivation(xe.parentContext,E)),me&&(fe.cache=E,fe.activated=!0),ke&&ee!==null&&!ee.has(fe.id)&&ee.set(fe.id,E),E}};function oe(ee){var xe=Q(ee.plan.rootRequest.requestScope);return xe(ee.plan.rootRequest)}N.resolve=oe},83366:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingInSyntax=void 0;var $=F(28421),X=F(71325),w=function(){function Y(G){this._binding=G}return Y.prototype.inRequestScope=function(){return this._binding.scope=$.BindingScopeEnum.Request,new X.BindingWhenOnSyntax(this._binding)},Y.prototype.inSingletonScope=function(){return this._binding.scope=$.BindingScopeEnum.Singleton,new X.BindingWhenOnSyntax(this._binding)},Y.prototype.inTransientScope=function(){return this._binding.scope=$.BindingScopeEnum.Transient,new X.BindingWhenOnSyntax(this._binding)},Y}();N.BindingInSyntax=w},99812:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingInWhenOnSyntax=void 0;var $=F(83366),X=F(51811),w=F(98370),Y=function(){function G(K){this._binding=K,this._bindingWhenSyntax=new w.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new X.BindingOnSyntax(this._binding),this._bindingInSyntax=new $.BindingInSyntax(K)}return G.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},G.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},G.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},G.prototype.when=function(K){return this._bindingWhenSyntax.when(K)},G.prototype.whenTargetNamed=function(K){return this._bindingWhenSyntax.whenTargetNamed(K)},G.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},G.prototype.whenTargetTagged=function(K,Q){return this._bindingWhenSyntax.whenTargetTagged(K,Q)},G.prototype.whenInjectedInto=function(K){return this._bindingWhenSyntax.whenInjectedInto(K)},G.prototype.whenParentNamed=function(K){return this._bindingWhenSyntax.whenParentNamed(K)},G.prototype.whenParentTagged=function(K,Q){return this._bindingWhenSyntax.whenParentTagged(K,Q)},G.prototype.whenAnyAncestorIs=function(K){return this._bindingWhenSyntax.whenAnyAncestorIs(K)},G.prototype.whenNoAncestorIs=function(K){return this._bindingWhenSyntax.whenNoAncestorIs(K)},G.prototype.whenAnyAncestorNamed=function(K){return this._bindingWhenSyntax.whenAnyAncestorNamed(K)},G.prototype.whenAnyAncestorTagged=function(K,Q){return this._bindingWhenSyntax.whenAnyAncestorTagged(K,Q)},G.prototype.whenNoAncestorNamed=function(K){return this._bindingWhenSyntax.whenNoAncestorNamed(K)},G.prototype.whenNoAncestorTagged=function(K,Q){return this._bindingWhenSyntax.whenNoAncestorTagged(K,Q)},G.prototype.whenAnyAncestorMatches=function(K){return this._bindingWhenSyntax.whenAnyAncestorMatches(K)},G.prototype.whenNoAncestorMatches=function(K){return this._bindingWhenSyntax.whenNoAncestorMatches(K)},G.prototype.onActivation=function(K){return this._bindingOnSyntax.onActivation(K)},G}();N.BindingInWhenOnSyntax=Y},51811:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingOnSyntax=void 0;var $=F(98370),X=function(){function w(Y){this._binding=Y}return w.prototype.onActivation=function(Y){return this._binding.onActivation=Y,new $.BindingWhenSyntax(this._binding)},w}();N.BindingOnSyntax=X},51860:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingToSyntax=void 0;var $=F(16674),X=F(28421),w=F(99812),Y=F(71325),G=function(){function K(Q){this._binding=Q}return K.prototype.to=function(Q){return this._binding.type=X.BindingTypeEnum.Instance,this._binding.implementationType=Q,new w.BindingInWhenOnSyntax(this._binding)},K.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+$.INVALID_TO_SELF_VALUE);var Q=this._binding.serviceIdentifier;return this.to(Q)},K.prototype.toConstantValue=function(Q){return this._binding.type=X.BindingTypeEnum.ConstantValue,this._binding.cache=Q,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=X.BindingScopeEnum.Singleton,new Y.BindingWhenOnSyntax(this._binding)},K.prototype.toDynamicValue=function(Q){return this._binding.type=X.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=Q,this._binding.implementationType=null,new w.BindingInWhenOnSyntax(this._binding)},K.prototype.toConstructor=function(Q){return this._binding.type=X.BindingTypeEnum.Constructor,this._binding.implementationType=Q,this._binding.scope=X.BindingScopeEnum.Singleton,new Y.BindingWhenOnSyntax(this._binding)},K.prototype.toFactory=function(Q){return this._binding.type=X.BindingTypeEnum.Factory,this._binding.factory=Q,this._binding.scope=X.BindingScopeEnum.Singleton,new Y.BindingWhenOnSyntax(this._binding)},K.prototype.toFunction=function(Q){if(typeof Q!="function")throw new Error($.INVALID_FUNCTION_BINDING);var oe=this.toConstantValue(Q);return this._binding.type=X.BindingTypeEnum.Function,this._binding.scope=X.BindingScopeEnum.Singleton,oe},K.prototype.toAutoFactory=function(Q){return this._binding.type=X.BindingTypeEnum.Factory,this._binding.factory=function(oe){var ee=function(){return oe.container.get(Q)};return ee},this._binding.scope=X.BindingScopeEnum.Singleton,new Y.BindingWhenOnSyntax(this._binding)},K.prototype.toProvider=function(Q){return this._binding.type=X.BindingTypeEnum.Provider,this._binding.provider=Q,this._binding.scope=X.BindingScopeEnum.Singleton,new Y.BindingWhenOnSyntax(this._binding)},K.prototype.toService=function(Q){this.toDynamicValue(function(oe){return oe.container.get(Q)})},K}();N.BindingToSyntax=G},71325:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingWhenOnSyntax=void 0;var $=F(51811),X=F(98370),w=function(){function Y(G){this._binding=G,this._bindingWhenSyntax=new X.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new $.BindingOnSyntax(this._binding)}return Y.prototype.when=function(G){return this._bindingWhenSyntax.when(G)},Y.prototype.whenTargetNamed=function(G){return this._bindingWhenSyntax.whenTargetNamed(G)},Y.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},Y.prototype.whenTargetTagged=function(G,K){return this._bindingWhenSyntax.whenTargetTagged(G,K)},Y.prototype.whenInjectedInto=function(G){return this._bindingWhenSyntax.whenInjectedInto(G)},Y.prototype.whenParentNamed=function(G){return this._bindingWhenSyntax.whenParentNamed(G)},Y.prototype.whenParentTagged=function(G,K){return this._bindingWhenSyntax.whenParentTagged(G,K)},Y.prototype.whenAnyAncestorIs=function(G){return this._bindingWhenSyntax.whenAnyAncestorIs(G)},Y.prototype.whenNoAncestorIs=function(G){return this._bindingWhenSyntax.whenNoAncestorIs(G)},Y.prototype.whenAnyAncestorNamed=function(G){return this._bindingWhenSyntax.whenAnyAncestorNamed(G)},Y.prototype.whenAnyAncestorTagged=function(G,K){return this._bindingWhenSyntax.whenAnyAncestorTagged(G,K)},Y.prototype.whenNoAncestorNamed=function(G){return this._bindingWhenSyntax.whenNoAncestorNamed(G)},Y.prototype.whenNoAncestorTagged=function(G,K){return this._bindingWhenSyntax.whenNoAncestorTagged(G,K)},Y.prototype.whenAnyAncestorMatches=function(G){return this._bindingWhenSyntax.whenAnyAncestorMatches(G)},Y.prototype.whenNoAncestorMatches=function(G){return this._bindingWhenSyntax.whenNoAncestorMatches(G)},Y.prototype.onActivation=function(G){return this._bindingOnSyntax.onActivation(G)},Y}();N.BindingWhenOnSyntax=w},98370:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingWhenSyntax=void 0;var $=F(51811),X=F(80758),w=function(){function Y(G){this._binding=G}return Y.prototype.when=function(G){return this._binding.constraint=G,new $.BindingOnSyntax(this._binding)},Y.prototype.whenTargetNamed=function(G){return this._binding.constraint=X.namedConstraint(G),new $.BindingOnSyntax(this._binding)},Y.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(G){var K=G.target!==null&&!G.target.isNamed()&&!G.target.isTagged();return K},new $.BindingOnSyntax(this._binding)},Y.prototype.whenTargetTagged=function(G,K){return this._binding.constraint=X.taggedConstraint(G)(K),new $.BindingOnSyntax(this._binding)},Y.prototype.whenInjectedInto=function(G){return this._binding.constraint=function(K){return X.typeConstraint(G)(K.parentRequest)},new $.BindingOnSyntax(this._binding)},Y.prototype.whenParentNamed=function(G){return this._binding.constraint=function(K){return X.namedConstraint(G)(K.parentRequest)},new $.BindingOnSyntax(this._binding)},Y.prototype.whenParentTagged=function(G,K){return this._binding.constraint=function(Q){return X.taggedConstraint(G)(K)(Q.parentRequest)},new $.BindingOnSyntax(this._binding)},Y.prototype.whenAnyAncestorIs=function(G){return this._binding.constraint=function(K){return X.traverseAncerstors(K,X.typeConstraint(G))},new $.BindingOnSyntax(this._binding)},Y.prototype.whenNoAncestorIs=function(G){return this._binding.constraint=function(K){return!X.traverseAncerstors(K,X.typeConstraint(G))},new $.BindingOnSyntax(this._binding)},Y.prototype.whenAnyAncestorNamed=function(G){return this._binding.constraint=function(K){return X.traverseAncerstors(K,X.namedConstraint(G))},new $.BindingOnSyntax(this._binding)},Y.prototype.whenNoAncestorNamed=function(G){return this._binding.constraint=function(K){return!X.traverseAncerstors(K,X.namedConstraint(G))},new $.BindingOnSyntax(this._binding)},Y.prototype.whenAnyAncestorTagged=function(G,K){return this._binding.constraint=function(Q){return X.traverseAncerstors(Q,X.taggedConstraint(G)(K))},new $.BindingOnSyntax(this._binding)},Y.prototype.whenNoAncestorTagged=function(G,K){return this._binding.constraint=function(Q){return!X.traverseAncerstors(Q,X.taggedConstraint(G)(K))},new $.BindingOnSyntax(this._binding)},Y.prototype.whenAnyAncestorMatches=function(G){return this._binding.constraint=function(K){return X.traverseAncerstors(K,G)},new $.BindingOnSyntax(this._binding)},Y.prototype.whenNoAncestorMatches=function(G){return this._binding.constraint=function(K){return!X.traverseAncerstors(K,G)},new $.BindingOnSyntax(this._binding)},Y}();N.BindingWhenSyntax=w},80758:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.typeConstraint=N.namedConstraint=N.taggedConstraint=N.traverseAncerstors=void 0;var $=F(6867),X=F(47738),w=function(Q,oe){var ee=Q.parentRequest;return ee!==null?oe(ee)?!0:w(ee,oe):!1};N.traverseAncerstors=w;var Y=function(Q){return function(oe){var ee=function(xe){return xe!==null&&xe.target!==null&&xe.target.matchesTag(Q)(oe)};return ee.metaData=new X.Metadata(Q,oe),ee}};N.taggedConstraint=Y;var G=Y($.NAMED_TAG);N.namedConstraint=G;var K=function(Q){return function(oe){var ee=null;if(oe!==null)if(ee=oe.bindings[0],typeof Q=="string"){var xe=ee.serviceIdentifier;return xe===Q}else{var ce=oe.bindings[0].implementationType;return Q===ce}return!1}};N.typeConstraint=K},70600:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.multiBindToService=void 0;var F=function($){return function(X){return function(){for(var w=[],Y=0;Y<arguments.length;Y++)w[Y]=arguments[Y];return w.forEach(function(G){return $.bind(G).toService(X)})}}};N.multiBindToService=F},54623:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.isStackOverflowExeption=void 0;var $=F(16674);function X(w){return w instanceof RangeError||w.message===$.STACK_OVERFLOW}N.isStackOverflowExeption=X},37791:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.id=void 0;var F=0;function $(){return F++}N.id=$},55800:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.circularDependencyToException=N.listMetadataForTarget=N.listRegisteredBindingsForServiceIdentifier=N.getServiceIdentifierAsString=N.getFunctionName=void 0;var $=F(16674);function X(ee){if(typeof ee=="function"){var xe=ee;return xe.name}else{if(typeof ee=="symbol")return ee.toString();var xe=ee;return xe}}N.getServiceIdentifierAsString=X;function w(ee,xe,ce){var he="",J=ce(ee,xe);return J.length!==0&&(he=`
Registered bindings:`,J.forEach(function(M){var E="Object";M.implementationType!==null&&(E=oe(M.implementationType)),he=he+`
 `+E,M.constraint.metaData&&(he=he+" - "+M.constraint.metaData)})),he}N.listRegisteredBindingsForServiceIdentifier=w;function Y(ee,xe){return ee.parentRequest===null?!1:ee.parentRequest.serviceIdentifier===xe?!0:Y(ee.parentRequest,xe)}function G(ee){function xe(he,J){J===void 0&&(J=[]);var M=X(he.serviceIdentifier);return J.push(M),he.parentRequest!==null?xe(he.parentRequest,J):J}var ce=xe(ee);return ce.reverse().join(" --> ")}function K(ee){ee.childRequests.forEach(function(xe){if(Y(xe,xe.serviceIdentifier)){var ce=G(xe);throw new Error($.CIRCULAR_DEPENDENCY+" "+ce)}else K(xe)})}N.circularDependencyToException=K;function Q(ee,xe){if(xe.isTagged()||xe.isNamed()){var ce="",he=xe.getNamedTag(),J=xe.getCustomTags();return he!==null&&(ce+=he.toString()+`
`),J!==null&&J.forEach(function(M){ce+=M.toString()+`
`})," "+ee+`
 `+ee+" - "+ce}else return" "+ee}N.listMetadataForTarget=Q;function oe(ee){if(ee.name)return ee.name;var xe=ee.toString(),ce=xe.match(/^function\s*([^\s(]+)/);return ce?ce[1]:"Anonymous function: "+xe}N.getFunctionName=oe},47443:function(xt,N,F){var $=F(42118);function X(w,Y){var G=w==null?0:w.length;return!!G&&$(w,Y,0)>-1}xt.exports=X},1196:function(xt){function N(F,$,X){for(var w=-1,Y=F==null?0:F.length;++w<Y;)if(X($,F[w]))return!0;return!1}xt.exports=N},29750:function(xt){function N(F,$,X){return F===F&&(X!==void 0&&(F=F<=X?F:X),$!==void 0&&(F=F>=$?F:$)),F}xt.exports=N},41848:function(xt){function N(F,$,X,w){for(var Y=F.length,G=X+(w?1:-1);w?G--:++G<Y;)if($(F[G],G,F))return G;return-1}xt.exports=N},42118:function(xt,N,F){var $=F(41848),X=F(62722),w=F(42351);function Y(G,K,Q){return K===K?w(G,K,Q):$(G,X,Q)}xt.exports=Y},74221:function(xt){function N(F,$,X,w){for(var Y=X-1,G=F.length;++Y<G;)if(w(F[Y],$))return Y;return-1}xt.exports=N},62722:function(xt){function N(F){return F!==F}xt.exports=N},65464:function(xt,N,F){var $=F(29932),X=F(42118),w=F(74221),Y=F(7518),G=F(278),K=Array.prototype,Q=K.splice;function oe(ee,xe,ce,he){var J=he?w:X,M=-1,E=xe.length,fe=ee;for(ee===xe&&(xe=G(xe)),ce&&(fe=$(ee,Y(ce)));++M<E;)for(var me=0,ke=xe[M],Pe=ce?ce(ke):ke;(me=J(fe,Pe,me,he))>-1;)fe!==ee&&Q.call(fe,me,1),Q.call(ee,me,1);return ee}xt.exports=oe},45652:function(xt,N,F){var $=F(88668),X=F(47443),w=F(1196),Y=F(74757),G=F(23593),K=F(21814),Q=200;function oe(ee,xe,ce){var he=-1,J=X,M=ee.length,E=!0,fe=[],me=fe;if(ce)E=!1,J=w;else if(M>=Q){var ke=xe?null:G(ee);if(ke)return K(ke);E=!1,J=Y,me=new $}else me=xe?[]:fe;e:for(;++he<M;){var Pe=ee[he],Le=xe?xe(Pe):Pe;if(Pe=ce||Pe!==0?Pe:0,E&&Le===Le){for(var tt=me.length;tt--;)if(me[tt]===Le)continue e;xe&&me.push(Le),fe.push(Pe)}else J(me,Le,ce)||(me!==fe&&me.push(Le),fe.push(Pe))}return fe}xt.exports=oe},23593:function(xt,N,F){var $=F(58525),X=F(50308),w=F(21814),Y=1/0,G=$&&1/w(new $([,-0]))[1]==Y?function(K){return new $(K)}:X;xt.exports=G},42351:function(xt){function N(F,$,X){for(var w=X-1,Y=F.length;++w<Y;)if(F[w]===$)return w;return-1}xt.exports=N},74691:function(xt,N,F){var $=F(29750),X=F(14841);function w(Y,G,K){return K===void 0&&(K=G,G=void 0),K!==void 0&&(K=X(K),K=K===K?K:0),G!==void 0&&(G=X(G),G=G===G?G:0),$(X(Y),G,K)}xt.exports=w},51584:function(xt,N,F){var $=F(44239),X=F(37005),w="[object Boolean]";function Y(G){return G===!0||G===!1||X(G)&&$(G)==w}xt.exports=Y},18446:function(xt,N,F){var $=F(90939);function X(w,Y){return $(w,Y)}xt.exports=X},14293:function(xt){function N(F){return F==null}xt.exports=N},81763:function(xt,N,F){var $=F(44239),X=F(37005),w="[object Number]";function Y(G){return typeof G=="number"||X(G)&&$(G)==w}xt.exports=Y},52353:function(xt){function N(F){return F===void 0}xt.exports=N},30236:function(xt,N,F){var $=F(42980),X=F(21463),w=X(function(Y,G,K,Q){$(Y,G,K,Q)});xt.exports=w},50308:function(xt){function N(){}xt.exports=N},97019:function(xt,N,F){var $=F(5976),X=F(45604),w=$(X);xt.exports=w},45604:function(xt,N,F){var $=F(65464);function X(w,Y){return w&&w.length&&Y&&Y.length?$(w,Y):w}xt.exports=X},44908:function(xt,N,F){var $=F(45652);function X(w){return w&&w.length?$(w):[]}xt.exports=X},6158:function(xt){(function(N,F){xt.exports=F()})(this,function(){"use strict";var N,F,$;function X(w,Y){if(!N)N=Y;else if(!F)F=Y;else{var G="var sharedChunk = {}; ("+N+")(sharedChunk); ("+F+")(sharedChunk);",K={};N(K),$=Y(K),typeof window!="undefined"&&($.workerUrl=window.URL.createObjectURL(new Blob([G],{type:"text/javascript"})))}}return X(["exports"],function(w){"use strict";function Y(h,v){return h(v={exports:{}},v.exports),v.exports}var G=K;function K(h,v,_,R){this.cx=3*h,this.bx=3*(_-h)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*v,this.by=3*(R-v)-this.cy,this.ay=1-this.cy-this.by,this.p1x=h,this.p1y=R,this.p2x=_,this.p2y=R}K.prototype.sampleCurveX=function(h){return((this.ax*h+this.bx)*h+this.cx)*h},K.prototype.sampleCurveY=function(h){return((this.ay*h+this.by)*h+this.cy)*h},K.prototype.sampleCurveDerivativeX=function(h){return(3*this.ax*h+2*this.bx)*h+this.cx},K.prototype.solveCurveX=function(h,v){var _,R,L,z,j;for(v===void 0&&(v=1e-6),L=h,j=0;j<8;j++){if(z=this.sampleCurveX(L)-h,Math.abs(z)<v)return L;var ae=this.sampleCurveDerivativeX(L);if(Math.abs(ae)<1e-6)break;L-=z/ae}if((L=h)<(_=0))return _;if(L>(R=1))return R;for(;_<R;){if(z=this.sampleCurveX(L),Math.abs(z-h)<v)return L;h>z?_=L:R=L,L=.5*(R-_)+_}return L},K.prototype.solve=function(h,v){return this.sampleCurveY(this.solveCurveX(h,v))};var Q=oe;function oe(h,v){this.x=h,this.y=v}oe.prototype={clone:function(){return new oe(this.x,this.y)},add:function(h){return this.clone()._add(h)},sub:function(h){return this.clone()._sub(h)},multByPoint:function(h){return this.clone()._multByPoint(h)},divByPoint:function(h){return this.clone()._divByPoint(h)},mult:function(h){return this.clone()._mult(h)},div:function(h){return this.clone()._div(h)},rotate:function(h){return this.clone()._rotate(h)},rotateAround:function(h,v){return this.clone()._rotateAround(h,v)},matMult:function(h){return this.clone()._matMult(h)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(h){return this.x===h.x&&this.y===h.y},dist:function(h){return Math.sqrt(this.distSqr(h))},distSqr:function(h){var v=h.x-this.x,_=h.y-this.y;return v*v+_*_},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(h){return Math.atan2(this.y-h.y,this.x-h.x)},angleWith:function(h){return this.angleWithSep(h.x,h.y)},angleWithSep:function(h,v){return Math.atan2(this.x*v-this.y*h,this.x*h+this.y*v)},_matMult:function(h){var v=h[2]*this.x+h[3]*this.y;return this.x=h[0]*this.x+h[1]*this.y,this.y=v,this},_add:function(h){return this.x+=h.x,this.y+=h.y,this},_sub:function(h){return this.x-=h.x,this.y-=h.y,this},_mult:function(h){return this.x*=h,this.y*=h,this},_div:function(h){return this.x/=h,this.y/=h,this},_multByPoint:function(h){return this.x*=h.x,this.y*=h.y,this},_divByPoint:function(h){return this.x/=h.x,this.y/=h.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var h=this.y;return this.y=this.x,this.x=-h,this},_rotate:function(h){var v=Math.cos(h),_=Math.sin(h),R=_*this.x+v*this.y;return this.x=v*this.x-_*this.y,this.y=R,this},_rotateAround:function(h,v){var _=Math.cos(h),R=Math.sin(h),L=v.y+R*(this.x-v.x)+_*(this.y-v.y);return this.x=v.x+_*(this.x-v.x)-R*(this.y-v.y),this.y=L,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},oe.convert=function(h){return h instanceof oe?h:Array.isArray(h)?new oe(h[0],h[1]):h};var ee=typeof self!="undefined"?self:{},xe=Math.pow(2,53)-1;function ce(h,v,_,R){var L=new G(h,v,_,R);return function(z){return L.solve(z)}}var he=ce(.25,.1,.25,1);function J(h,v,_){return Math.min(_,Math.max(v,h))}function M(h,v,_){var R=_-v,L=((h-v)%R+R)%R+v;return L===v?_:L}function E(h){for(var v=[],_=arguments.length-1;_-- >0;)v[_]=arguments[_+1];for(var R=0,L=v;R<L.length;R+=1){var z=L[R];for(var j in z)h[j]=z[j]}return h}var fe=1;function me(){return fe++}function ke(){return function h(v){return v?(v^16*Math.random()>>v/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,h)}()}function Pe(h){return!!h&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(h)}function Le(h,v){h.forEach(function(_){v[_]&&(v[_]=v[_].bind(v))})}function tt(h,v){return h.indexOf(v,h.length-v.length)!==-1}function ft(h,v,_){var R={};for(var L in h)R[L]=v.call(_||this,h[L],L,h);return R}function ge(h,v,_){var R={};for(var L in h)v.call(_||this,h[L],L,h)&&(R[L]=h[L]);return R}function be(h){return Array.isArray(h)?h.map(be):typeof h=="object"&&h?ft(h,be):h}var Ce={};function Ye(h){Ce[h]||(typeof console!="undefined"&&console.warn(h),Ce[h]=!0)}function je(h,v,_){return(_.y-h.y)*(v.x-h.x)>(v.y-h.y)*(_.x-h.x)}function Et(h){for(var v=0,_=0,R=h.length,L=R-1,z=void 0,j=void 0;_<R;L=_++)v+=((j=h[L]).x-(z=h[_]).x)*(z.y+j.y);return v}function Ae(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function Qe(h){var v={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(R,L,z,j){var ae=z||j;return v[L]=!ae||ae.toLowerCase(),""}),v["max-age"]){var _=parseInt(v["max-age"],10);isNaN(_)?delete v["max-age"]:v["max-age"]=_}return v}var te=null;function Ze(h){if(te==null){var v=h.navigator?h.navigator.userAgent:null;te=!!h.safari||!(!v||!(/\b(iPad|iPhone|iPod)\b/.test(v)||v.match("Safari")&&!v.match("Chrome")))}return te}function ie(h){try{var v=ee[h];return v.setItem("_mapbox_test_",1),v.removeItem("_mapbox_test_"),!0}catch(_){return!1}}var Oe,nt,ye,Te,Je=ee.performance&&ee.performance.now?ee.performance.now.bind(ee.performance):Date.now.bind(Date),pe=ee.requestAnimationFrame||ee.mozRequestAnimationFrame||ee.webkitRequestAnimationFrame||ee.msRequestAnimationFrame,Me=ee.cancelAnimationFrame||ee.mozCancelAnimationFrame||ee.webkitCancelAnimationFrame||ee.msCancelAnimationFrame,ze={now:Je,frame:function(h){var v=pe(h);return{cancel:function(){return Me(v)}}},getImageData:function(h,v){v===void 0&&(v=0);var _=ee.document.createElement("canvas"),R=_.getContext("2d");if(!R)throw new Error("failed to create canvas 2d context");return _.width=h.width,_.height=h.height,R.drawImage(h,0,0,h.width,h.height),R.getImageData(-v,-v,h.width+2*v,h.height+2*v)},resolveURL:function(h){return Oe||(Oe=ee.document.createElement("a")),Oe.href=h,Oe.href},hardwareConcurrency:ee.navigator&&ee.navigator.hardwareConcurrency||4,get devicePixelRatio(){return ee.devicePixelRatio},get prefersReducedMotion(){return!!ee.matchMedia&&(nt==null&&(nt=ee.matchMedia("(prefers-reduced-motion: reduce)")),nt.matches)}},De={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Ct={supported:!1,testSupport:function(h){!Vt&&Te&&(Ve?Ue(h):ye=h)}},Vt=!1,Ve=!1;function Ue(h){var v=h.createTexture();h.bindTexture(h.TEXTURE_2D,v);try{if(h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,Te),h.isContextLost())return;Ct.supported=!0}catch(_){}h.deleteTexture(v),Vt=!0}ee.document&&((Te=ee.document.createElement("img")).onload=function(){ye&&Ue(ye),ye=null,Ve=!0},Te.onerror=function(){Vt=!0,ye=null},Te.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Ee="01",et=function(h,v){this._transformRequestFn=h,this._customAccessToken=v,this._createSkuToken()};function st(h){return h.indexOf("mapbox:")===0}et.prototype._createSkuToken=function(){var h=function(){for(var v="",_=0;_<10;_++)v+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Ee,v].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=h.token,this._skuTokenExpiresAt=h.tokenExpiresAt},et.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},et.prototype.transformRequest=function(h,v){return this._transformRequestFn&&this._transformRequestFn(h,v)||{url:h}},et.prototype.normalizeStyleURL=function(h,v){if(!st(h))return h;var _=Tt(h);return _.path="/styles/v1"+_.path,this._makeAPIURL(_,this._customAccessToken||v)},et.prototype.normalizeGlyphsURL=function(h,v){if(!st(h))return h;var _=Tt(h);return _.path="/fonts/v1"+_.path,this._makeAPIURL(_,this._customAccessToken||v)},et.prototype.normalizeSourceURL=function(h,v){if(!st(h))return h;var _=Tt(h);return _.path="/v4/"+_.authority+".json",_.params.push("secure"),this._makeAPIURL(_,this._customAccessToken||v)},et.prototype.normalizeSpriteURL=function(h,v,_,R){var L=Tt(h);return st(h)?(L.path="/styles/v1"+L.path+"/sprite"+v+_,this._makeAPIURL(L,this._customAccessToken||R)):(L.path+=""+v+_,Qt(L))},et.prototype.normalizeTileURL=function(h,v){if(this._isSkuTokenExpired()&&this._createSkuToken(),h&&!st(h))return h;var _=Tt(h);_.path=_.path.replace(/(\.(png|jpg)\d*)(?=$)/,(ze.devicePixelRatio>=2||v===512?"@2x":"")+(Ct.supported?".webp":"$1")),_.path=_.path.replace(/^.+\/v4\//,"/"),_.path="/v4"+_.path;var R=this._customAccessToken||function(L){for(var z=0,j=L;z<j.length;z+=1){var ae=j[z].match(/^access_token=(.*)$/);if(ae)return ae[1]}return null}(_.params)||De.ACCESS_TOKEN;return De.REQUIRE_ACCESS_TOKEN&&R&&this._skuToken&&_.params.push("sku="+this._skuToken),this._makeAPIURL(_,R)},et.prototype.canonicalizeTileURL=function(h,v){var _=Tt(h);if(!_.path.match(/(^\/v4\/)/)||!_.path.match(/\.[\w]+$/))return h;var R="mapbox://tiles/";R+=_.path.replace("/v4/","");var L=_.params;return v&&(L=L.filter(function(z){return!z.match(/^access_token=/)})),L.length&&(R+="?"+L.join("&")),R},et.prototype.canonicalizeTileset=function(h,v){for(var _=!!v&&st(v),R=[],L=0,z=h.tiles||[];L<z.length;L+=1){var j=z[L];Ie(j)?R.push(this.canonicalizeTileURL(j,_)):R.push(j)}return R},et.prototype._makeAPIURL=function(h,v){var _="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",R=Tt(De.API_URL);if(h.protocol=R.protocol,h.authority=R.authority,h.protocol==="http"){var L=h.params.indexOf("secure");L>=0&&h.params.splice(L,1)}if(R.path!=="/"&&(h.path=""+R.path+h.path),!De.REQUIRE_ACCESS_TOKEN)return Qt(h);if(!(v=v||De.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+_);if(v[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+_);return h.params=h.params.filter(function(z){return z.indexOf("access_token")===-1}),h.params.push("access_token="+v),Qt(h)};var Re=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Ie(h){return Re.test(h)}var ct=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Tt(h){var v=h.match(ct);if(!v)throw new Error("Unable to parse URL object");return{protocol:v[1],authority:v[2],path:v[3]||"/",params:v[4]?v[4].split("&"):[]}}function Qt(h){var v=h.params.length?"?"+h.params.join("&"):"";return h.protocol+"://"+h.authority+h.path+v}function wt(h){if(!h)return null;var v=h.split(".");if(!v||v.length!==3)return null;try{return JSON.parse(decodeURIComponent(ee.atob(v[1]).split("").map(function(_){return"%"+("00"+_.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(_){return null}}var se=function(h){this.type=h,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};se.prototype.getStorageKey=function(h){var v,_=wt(De.ACCESS_TOKEN);return v=_&&_.u?ee.btoa(encodeURIComponent(_.u).replace(/%([0-9A-F]{2})/g,function(R,L){return String.fromCharCode(+("0x"+L))})):De.ACCESS_TOKEN||"",h?"mapbox.eventData."+h+":"+v:"mapbox.eventData:"+v},se.prototype.fetchEventData=function(){var h=ie("localStorage"),v=this.getStorageKey(),_=this.getStorageKey("uuid");if(h)try{var R=ee.localStorage.getItem(v);R&&(this.eventData=JSON.parse(R));var L=ee.localStorage.getItem(_);L&&(this.anonId=L)}catch(z){Ye("Unable to read from LocalStorage")}},se.prototype.saveEventData=function(){var h=ie("localStorage"),v=this.getStorageKey(),_=this.getStorageKey("uuid");if(h)try{ee.localStorage.setItem(_,this.anonId),Object.keys(this.eventData).length>=1&&ee.localStorage.setItem(v,JSON.stringify(this.eventData))}catch(R){Ye("Unable to write to LocalStorage")}},se.prototype.processRequests=function(h){},se.prototype.postEvent=function(h,v,_,R){var L=this;if(De.EVENTS_URL){var z=Tt(De.EVENTS_URL);z.params.push("access_token="+(R||De.ACCESS_TOKEN||""));var j={event:this.type,created:new Date(h).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:Ee,userId:this.anonId},ae=v?E(j,v):j,Se={url:Qt(z),headers:{"Content-Type":"text/plain"},body:JSON.stringify([ae])};this.pendingRequest=Xn(Se,function(He){L.pendingRequest=null,_(He),L.saveEventData(),L.processRequests(R)})}},se.prototype.queueRequest=function(h,v){this.queue.push(h),this.processRequests(v)};var Ge,Ke,bt=function(h){function v(){h.call(this,"map.load"),this.success={},this.skuToken=""}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.postMapLoadEvent=function(_,R,L,z){this.skuToken=L;var j=!(!z&&!De.ACCESS_TOKEN),ae=Array.isArray(_)&&_.some(function(Se){return st(Se)||Ie(Se)});De.EVENTS_URL&&j&&ae&&this.queueRequest({id:R,timestamp:Date.now()},z)},v.prototype.processRequests=function(_){var R=this;if(!this.pendingRequest&&this.queue.length!==0){var L=this.queue.shift(),z=L.id,j=L.timestamp;z&&this.success[z]||(this.anonId||this.fetchEventData(),Pe(this.anonId)||(this.anonId=ke()),this.postEvent(j,{skuToken:this.skuToken},function(ae){ae||z&&(R.success[z]=!0)},_))}},v}(se),Be=new(function(h){function v(_){h.call(this,"appUserTurnstile"),this._customAccessToken=_}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.postTurnstileEvent=function(_,R){De.EVENTS_URL&&De.ACCESS_TOKEN&&Array.isArray(_)&&_.some(function(L){return st(L)||Ie(L)})&&this.queueRequest(Date.now(),R)},v.prototype.processRequests=function(_){var R=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var L=wt(De.ACCESS_TOKEN),z=L?L.u:De.ACCESS_TOKEN,j=z!==this.eventData.tokenU;Pe(this.anonId)||(this.anonId=ke(),j=!0);var ae=this.queue.shift();if(this.eventData.lastSuccess){var Se=new Date(this.eventData.lastSuccess),He=new Date(ae),rt=(ae-this.eventData.lastSuccess)/864e5;j=j||rt>=1||rt<-1||Se.getDate()!==He.getDate()}else j=!0;if(!j)return this.processRequests();this.postEvent(ae,{"enabled.telemetry":!1},function(ht){ht||(R.eventData.lastSuccess=ae,R.eventData.tokenU=z)},_)}},v}(se)),pt=Be.postTurnstileEvent.bind(Be),It=new bt,ot=It.postMapLoadEvent.bind(It),zt=500,Jt=50;function tr(){ee.caches&&!Ge&&(Ge=ee.caches.open("mapbox-tiles"))}function pr(h){var v=h.indexOf("?");return v<0?h:h.slice(0,v)}var br,Zr=1/0;function Nr(){return br==null&&(br=ee.OffscreenCanvas&&new ee.OffscreenCanvas(1,1).getContext("2d")&&typeof ee.createImageBitmap=="function"),br}var tn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(tn);var Dn=function(h){function v(_,R,L){R===401&&Ie(L)&&(_+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),h.call(this,_),this.status=R,this.url=L,this.name=this.constructor.name,this.message=_}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},v}(Error),gn=Ae()?function(){return self.worker&&self.worker.referrer}:function(){return(ee.location.protocol==="blob:"?ee.parent:ee).location.href},Vn,Un,mi=function(h,v){if(!(/^file:/.test(_=h.url)||/^file:/.test(gn())&&!/^\w+:/.test(_))){if(ee.fetch&&ee.Request&&ee.AbortController&&ee.Request.prototype.hasOwnProperty("signal"))return function(R,L){var z,j=new ee.AbortController,ae=new ee.Request(R.url,{method:R.method||"GET",body:R.body,credentials:R.credentials,headers:R.headers,referrer:gn(),signal:j.signal}),Se=!1,He=!1,rt=(z=ae.url).indexOf("sku=")>0&&Ie(z);R.type==="json"&&ae.headers.set("Accept","application/json");var ht=function(Nt,er,ar){if(!He){if(Nt&&Nt.message!=="SecurityError"&&Ye(Nt),er&&ar)return Mt(er);var Mr=Date.now();ee.fetch(ae).then(function(_r){if(_r.ok){var Ur=rt?_r.clone():null;return Mt(_r,Ur,Mr)}return L(new Dn(_r.statusText,_r.status,R.url))}).catch(function(_r){_r.code!==20&&L(new Error(_r.message))})}},Mt=function(Nt,er,ar){(R.type==="arrayBuffer"?Nt.arrayBuffer():R.type==="json"?Nt.json():Nt.text()).then(function(Mr){He||(er&&ar&&function(_r,Ur,Kr){if(tr(),Ge){var nn={status:Ur.status,statusText:Ur.statusText,headers:new ee.Headers};Ur.headers.forEach(function(Pn,oi){return nn.headers.set(oi,Pn)});var yn=Qe(Ur.headers.get("Cache-Control")||"");yn["no-store"]||(yn["max-age"]&&nn.headers.set("Expires",new Date(Kr+1e3*yn["max-age"]).toUTCString()),new Date(nn.headers.get("Expires")).getTime()-Kr<42e4||function(Pn,oi){if(Ke===void 0)try{new Response(new ReadableStream),Ke=!0}catch(bi){Ke=!1}Ke?oi(Pn.body):Pn.blob().then(oi)}(Ur,function(Pn){var oi=new ee.Response(Pn,nn);tr(),Ge&&Ge.then(function(bi){return bi.put(pr(_r.url),oi)}).catch(function(bi){return Ye(bi.message)})}))}}(ae,er,ar),Se=!0,L(null,Mr,Nt.headers.get("Cache-Control"),Nt.headers.get("Expires")))}).catch(function(Mr){He||L(new Error(Mr.message))})};return rt?function(Nt,er){if(tr(),!Ge)return er(null);var ar=pr(Nt.url);Ge.then(function(Mr){Mr.match(ar).then(function(_r){var Ur=function(Kr){if(!Kr)return!1;var nn=new Date(Kr.headers.get("Expires")||0),yn=Qe(Kr.headers.get("Cache-Control")||"");return nn>Date.now()&&!yn["no-cache"]}(_r);Mr.delete(ar),Ur&&Mr.put(ar,_r.clone()),er(null,_r,Ur)}).catch(er)}).catch(er)}(ae,ht):ht(null,null),{cancel:function(){He=!0,Se||j.abort()}}}(h,v);if(Ae()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",h,v,void 0,!0)}var _;return function(R,L){var z=new ee.XMLHttpRequest;for(var j in z.open(R.method||"GET",R.url,!0),R.type==="arrayBuffer"&&(z.responseType="arraybuffer"),R.headers)z.setRequestHeader(j,R.headers[j]);return R.type==="json"&&(z.responseType="text",z.setRequestHeader("Accept","application/json")),z.withCredentials=R.credentials==="include",z.onerror=function(){L(new Error(z.statusText))},z.onload=function(){if((z.status>=200&&z.status<300||z.status===0)&&z.response!==null){var ae=z.response;if(R.type==="json")try{ae=JSON.parse(z.response)}catch(Se){return L(Se)}L(null,ae,z.getResponseHeader("Cache-Control"),z.getResponseHeader("Expires"))}else L(new Dn(z.statusText,z.status,R.url))},z.send(R.body),{cancel:function(){return z.abort()}}}(h,v)},qn=function(h,v){return mi(E(h,{type:"arrayBuffer"}),v)},Xn=function(h,v){return mi(E(h,{method:"POST"}),v)},We="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Vn=[],Un=0;var it=function(h,v){if(Ct.supported&&(h.headers||(h.headers={}),h.headers.accept="image/webp,*/*"),Un>=De.MAX_PARALLEL_IMAGE_REQUESTS){var _={requestParameters:h,callback:v,cancelled:!1,cancel:function(){this.cancelled=!0}};return Vn.push(_),_}Un++;var R=!1,L=function(){if(!R)for(R=!0,Un--;Vn.length&&Un<De.MAX_PARALLEL_IMAGE_REQUESTS;){var j=Vn.shift();j.cancelled||(j.cancel=it(j.requestParameters,j.callback).cancel)}},z=qn(h,function(j,ae,Se,He){L(),j?v(j):ae&&(Nr()?function(rt,ht){var Mt=new ee.Blob([new Uint8Array(rt)],{type:"image/png"});ee.createImageBitmap(Mt).then(function(Nt){ht(null,Nt)}).catch(function(Nt){ht(new Error("Could not load image because of "+Nt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(ae,v):function(rt,ht,Mt,Nt){var er=new ee.Image,ar=ee.URL;er.onload=function(){ht(null,er),ar.revokeObjectURL(er.src),er.onload=null,ee.requestAnimationFrame(function(){er.src=We})},er.onerror=function(){return ht(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Mr=new ee.Blob([new Uint8Array(rt)],{type:"image/png"});er.cacheControl=Mt,er.expires=Nt,er.src=rt.byteLength?ar.createObjectURL(Mr):We}(ae,v,Se,He))});return{cancel:function(){z.cancel(),L()}}};function _t(h,v,_){_[h]&&_[h].indexOf(v)!==-1||(_[h]=_[h]||[],_[h].push(v))}function Pt(h,v,_){if(_&&_[h]){var R=_[h].indexOf(v);R!==-1&&_[h].splice(R,1)}}var jt=function(h,v){v===void 0&&(v={}),E(this,v),this.type=h},gr=function(h){function v(_,R){R===void 0&&(R={}),h.call(this,"error",E({error:_},R))}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v}(jt),Cr=function(){};Cr.prototype.on=function(h,v){return this._listeners=this._listeners||{},_t(h,v,this._listeners),this},Cr.prototype.off=function(h,v){return Pt(h,v,this._listeners),Pt(h,v,this._oneTimeListeners),this},Cr.prototype.once=function(h,v){return this._oneTimeListeners=this._oneTimeListeners||{},_t(h,v,this._oneTimeListeners),this},Cr.prototype.fire=function(h,v){typeof h=="string"&&(h=new jt(h,v||{}));var _=h.type;if(this.listens(_)){h.target=this;for(var R=0,L=this._listeners&&this._listeners[_]?this._listeners[_].slice():[];R<L.length;R+=1)L[R].call(this,h);for(var z=0,j=this._oneTimeListeners&&this._oneTimeListeners[_]?this._oneTimeListeners[_].slice():[];z<j.length;z+=1){var ae=j[z];Pt(_,ae,this._oneTimeListeners),ae.call(this,h)}var Se=this._eventedParent;Se&&(E(h,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Se.fire(h))}else h instanceof gr&&console.error(h.error);return this},Cr.prototype.listens=function(h){return this._listeners&&this._listeners[h]&&this._listeners[h].length>0||this._oneTimeListeners&&this._oneTimeListeners[h]&&this._oneTimeListeners[h].length>0||this._eventedParent&&this._eventedParent.listens(h)},Cr.prototype.setEventedParent=function(h,v){return this._eventedParent=h,this._eventedParentData=v,this};var kt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},at=function(h,v,_,R){this.message=(h?h+": ":"")+_,R&&(this.identifier=R),v!=null&&v.__line__&&(this.line=v.__line__)};function Rt(h){var v=h.value;return v?[new at(h.key,v,"constants have been deprecated as of v8")]:[]}function mr(h){for(var v=[],_=arguments.length-1;_-- >0;)v[_]=arguments[_+1];for(var R=0,L=v;R<L.length;R+=1){var z=L[R];for(var j in z)h[j]=z[j]}return h}function Dr(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function Ft(h){if(Array.isArray(h))return h.map(Ft);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){var v={};for(var _ in h)v[_]=Ft(h[_]);return v}return Dr(h)}var Mn=function(h){function v(_,R){h.call(this,R),this.message=R,this.key=_}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v}(Error),yi=function(h,v){v===void 0&&(v=[]),this.parent=h,this.bindings={};for(var _=0,R=v;_<R.length;_+=1){var L=R[_];this.bindings[L[0]]=L[1]}};yi.prototype.concat=function(h){return new yi(this,h)},yi.prototype.get=function(h){if(this.bindings[h])return this.bindings[h];if(this.parent)return this.parent.get(h);throw new Error(h+" not found in scope.")},yi.prototype.has=function(h){return!!this.bindings[h]||!!this.parent&&this.parent.has(h)};var gi={kind:"null"},sn={kind:"number"},hi={kind:"string"},ri={kind:"boolean"},ui={kind:"color"},ba={kind:"object"},vi={kind:"value"},Sa={kind:"collator"},za={kind:"formatted"},_a={kind:"resolvedImage"};function Ga(h,v){return{kind:"array",itemType:h,N:v}}function Ea(h){if(h.kind==="array"){var v=Ea(h.itemType);return typeof h.N=="number"?"array<"+v+", "+h.N+">":h.itemType.kind==="value"?"array":"array<"+v+">"}return h.kind}var hs=[gi,sn,hi,ri,ui,za,ba,Ga(vi),_a];function uo(h,v){if(v.kind==="error")return null;if(h.kind==="array"){if(v.kind==="array"&&(v.N===0&&v.itemType.kind==="value"||!uo(h.itemType,v.itemType))&&(typeof h.N!="number"||h.N===v.N))return null}else{if(h.kind===v.kind)return null;if(h.kind==="value"){for(var _=0,R=hs;_<R.length;_+=1)if(!uo(R[_],v))return null}}return"Expected "+Ea(h)+" but found "+Ea(v)+" instead."}function Ro(h,v){return v.some(function(_){return _.kind===h.kind})}function Jn(h,v){return v.some(function(_){return _==="null"?h===null:_==="array"?Array.isArray(h):_==="object"?h&&!Array.isArray(h)&&typeof h=="object":_===typeof h})}var _i=Y(function(h,v){var _={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function R(ae){return(ae=Math.round(ae))<0?0:ae>255?255:ae}function L(ae){return R(ae[ae.length-1]==="%"?parseFloat(ae)/100*255:parseInt(ae))}function z(ae){return(Se=ae[ae.length-1]==="%"?parseFloat(ae)/100:parseFloat(ae))<0?0:Se>1?1:Se;var Se}function j(ae,Se,He){return He<0?He+=1:He>1&&(He-=1),6*He<1?ae+(Se-ae)*He*6:2*He<1?Se:3*He<2?ae+(Se-ae)*(2/3-He)*6:ae}try{v.parseCSSColor=function(ae){var Se,He=ae.replace(/ /g,"").toLowerCase();if(He in _)return _[He].slice();if(He[0]==="#")return He.length===4?(Se=parseInt(He.substr(1),16))>=0&&Se<=4095?[(3840&Se)>>4|(3840&Se)>>8,240&Se|(240&Se)>>4,15&Se|(15&Se)<<4,1]:null:He.length===7&&(Se=parseInt(He.substr(1),16))>=0&&Se<=16777215?[(16711680&Se)>>16,(65280&Se)>>8,255&Se,1]:null;var rt=He.indexOf("("),ht=He.indexOf(")");if(rt!==-1&&ht+1===He.length){var Mt=He.substr(0,rt),Nt=He.substr(rt+1,ht-(rt+1)).split(","),er=1;switch(Mt){case"rgba":if(Nt.length!==4)return null;er=z(Nt.pop());case"rgb":return Nt.length!==3?null:[L(Nt[0]),L(Nt[1]),L(Nt[2]),er];case"hsla":if(Nt.length!==4)return null;er=z(Nt.pop());case"hsl":if(Nt.length!==3)return null;var ar=(parseFloat(Nt[0])%360+360)%360/360,Mr=z(Nt[1]),_r=z(Nt[2]),Ur=_r<=.5?_r*(Mr+1):_r+Mr-_r*Mr,Kr=2*_r-Ur;return[R(255*j(Kr,Ur,ar+1/3)),R(255*j(Kr,Ur,ar)),R(255*j(Kr,Ur,ar-1/3)),er];default:return null}}return null}}catch(ae){}}).parseCSSColor,na=function(h,v,_,R){R===void 0&&(R=1),this.r=h,this.g=v,this.b=_,this.a=R};na.parse=function(h){if(h){if(h instanceof na)return h;if(typeof h=="string"){var v=_i(h);if(v)return new na(v[0]/255*v[3],v[1]/255*v[3],v[2]/255*v[3],v[3])}}},na.prototype.toString=function(){var h=this.toArray(),v=h[1],_=h[2],R=h[3];return"rgba("+Math.round(h[0])+","+Math.round(v)+","+Math.round(_)+","+R+")"},na.prototype.toArray=function(){var h=this.a;return h===0?[0,0,0,0]:[255*this.r/h,255*this.g/h,255*this.b/h,h]},na.black=new na(0,0,0,1),na.white=new na(1,1,1,1),na.transparent=new na(0,0,0,0),na.red=new na(1,0,0,1);var Xa=function(h,v,_){this.sensitivity=h?v?"variant":"case":v?"accent":"base",this.locale=_,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Xa.prototype.compare=function(h,v){return this.collator.compare(h,v)},Xa.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ps=function(h,v,_,R,L){this.text=h,this.image=v,this.scale=_,this.fontStack=R,this.textColor=L},po=function(h){this.sections=h};po.fromString=function(h){return new po([new ps(h,null,null,null,null)])},po.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(h){return h.text.length!==0||h.image&&h.image.name.length!==0})},po.factory=function(h){return h instanceof po?h:po.fromString(h)},po.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(h){return h.text}).join("")},po.prototype.serialize=function(){for(var h=["format"],v=0,_=this.sections;v<_.length;v+=1){var R=_[v];if(R.image)h.push(["image",R.image.name]);else{h.push(R.text);var L={};R.fontStack&&(L["text-font"]=["literal",R.fontStack.split(",")]),R.scale&&(L["font-scale"]=R.scale),R.textColor&&(L["text-color"]=["rgba"].concat(R.textColor.toArray())),h.push(L)}}return h};var Io=function(h){this.name=h.name,this.available=h.available};function nr(h,v,_,R){return typeof h=="number"&&h>=0&&h<=255&&typeof v=="number"&&v>=0&&v<=255&&typeof _=="number"&&_>=0&&_<=255?R===void 0||typeof R=="number"&&R>=0&&R<=1?null:"Invalid rgba value ["+[h,v,_,R].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof R=="number"?[h,v,_,R]:[h,v,_]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function At(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof na||h instanceof Xa||h instanceof po||h instanceof Io)return!0;if(Array.isArray(h)){for(var v=0,_=h;v<_.length;v+=1)if(!At(_[v]))return!1;return!0}if(typeof h=="object"){for(var R in h)if(!At(h[R]))return!1;return!0}return!1}function Xt(h){if(h===null)return gi;if(typeof h=="string")return hi;if(typeof h=="boolean")return ri;if(typeof h=="number")return sn;if(h instanceof na)return ui;if(h instanceof Xa)return Sa;if(h instanceof po)return za;if(h instanceof Io)return _a;if(Array.isArray(h)){for(var v,_=h.length,R=0,L=h;R<L.length;R+=1){var z=Xt(L[R]);if(v){if(v===z)continue;v=vi;break}v=z}return Ga(v||vi,_)}return ba}function yr(h){var v=typeof h;return h===null?"":v==="string"||v==="number"||v==="boolean"?String(h):h instanceof na||h instanceof po||h instanceof Io?h.toString():JSON.stringify(h)}Io.prototype.toString=function(){return this.name},Io.fromString=function(h){return h?new Io({name:h,available:!1}):null},Io.prototype.serialize=function(){return["image",this.name]};var Gr=function(h,v){this.type=h,this.value=v};Gr.parse=function(h,v){if(h.length!==2)return v.error("'literal' expression requires exactly one argument, but found "+(h.length-1)+" instead.");if(!At(h[1]))return v.error("invalid value");var _=h[1],R=Xt(_),L=v.expectedType;return R.kind!=="array"||R.N!==0||!L||L.kind!=="array"||typeof L.N=="number"&&L.N!==0||(R=L),new Gr(R,_)},Gr.prototype.evaluate=function(){return this.value},Gr.prototype.eachChild=function(){},Gr.prototype.outputDefined=function(){return!0},Gr.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof na?["rgba"].concat(this.value.toArray()):this.value instanceof po?this.value.serialize():this.value};var Cn=function(h){this.name="ExpressionEvaluationError",this.message=h};Cn.prototype.toJSON=function(){return this.message};var kn={string:hi,number:sn,boolean:ri,object:ba},_n=function(h,v){this.type=h,this.args=v};_n.parse=function(h,v){if(h.length<2)return v.error("Expected at least one argument.");var _,R=1,L=h[0];if(L==="array"){var z,j;if(h.length>2){var ae=h[1];if(typeof ae!="string"||!(ae in kn)||ae==="object")return v.error('The item type argument of "array" must be one of string, number, boolean',1);z=kn[ae],R++}else z=vi;if(h.length>3){if(h[2]!==null&&(typeof h[2]!="number"||h[2]<0||h[2]!==Math.floor(h[2])))return v.error('The length argument to "array" must be a positive integer literal',2);j=h[2],R++}_=Ga(z,j)}else _=kn[L];for(var Se=[];R<h.length;R++){var He=v.parse(h[R],R,vi);if(!He)return null;Se.push(He)}return new _n(_,Se)},_n.prototype.evaluate=function(h){for(var v=0;v<this.args.length;v++){var _=this.args[v].evaluate(h);if(!uo(this.type,Xt(_)))return _;if(v===this.args.length-1)throw new Cn("Expected value to be of type "+Ea(this.type)+", but found "+Ea(Xt(_))+" instead.")}return null},_n.prototype.eachChild=function(h){this.args.forEach(h)},_n.prototype.outputDefined=function(){return this.args.every(function(h){return h.outputDefined()})},_n.prototype.serialize=function(){var h=this.type,v=[h.kind];if(h.kind==="array"){var _=h.itemType;if(_.kind==="string"||_.kind==="number"||_.kind==="boolean"){v.push(_.kind);var R=h.N;(typeof R=="number"||this.args.length>1)&&v.push(R)}}return v.concat(this.args.map(function(L){return L.serialize()}))};var Mi=function(h){this.type=za,this.sections=h};Mi.parse=function(h,v){if(h.length<2)return v.error("Expected at least one argument.");var _=h[1];if(!Array.isArray(_)&&typeof _=="object")return v.error("First argument must be an image or text section.");for(var R=[],L=!1,z=1;z<=h.length-1;++z){var j=h[z];if(L&&typeof j=="object"&&!Array.isArray(j)){L=!1;var ae=null;if(j["font-scale"]&&!(ae=v.parse(j["font-scale"],1,sn)))return null;var Se=null;if(j["text-font"]&&!(Se=v.parse(j["text-font"],1,Ga(hi))))return null;var He=null;if(j["text-color"]&&!(He=v.parse(j["text-color"],1,ui)))return null;var rt=R[R.length-1];rt.scale=ae,rt.font=Se,rt.textColor=He}else{var ht=v.parse(h[z],1,vi);if(!ht)return null;var Mt=ht.type.kind;if(Mt!=="string"&&Mt!=="value"&&Mt!=="null"&&Mt!=="resolvedImage")return v.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");L=!0,R.push({content:ht,scale:null,font:null,textColor:null})}}return new Mi(R)},Mi.prototype.evaluate=function(h){return new po(this.sections.map(function(v){var _=v.content.evaluate(h);return Xt(_)===_a?new ps("",_,null,null,null):new ps(yr(_),null,v.scale?v.scale.evaluate(h):null,v.font?v.font.evaluate(h).join(","):null,v.textColor?v.textColor.evaluate(h):null)}))},Mi.prototype.eachChild=function(h){for(var v=0,_=this.sections;v<_.length;v+=1){var R=_[v];h(R.content),R.scale&&h(R.scale),R.font&&h(R.font),R.textColor&&h(R.textColor)}},Mi.prototype.outputDefined=function(){return!1},Mi.prototype.serialize=function(){for(var h=["format"],v=0,_=this.sections;v<_.length;v+=1){var R=_[v];h.push(R.content.serialize());var L={};R.scale&&(L["font-scale"]=R.scale.serialize()),R.font&&(L["text-font"]=R.font.serialize()),R.textColor&&(L["text-color"]=R.textColor.serialize()),h.push(L)}return h};var Yi=function(h){this.type=_a,this.input=h};Yi.parse=function(h,v){if(h.length!==2)return v.error("Expected two arguments.");var _=v.parse(h[1],1,hi);return _?new Yi(_):v.error("No image name provided.")},Yi.prototype.evaluate=function(h){var v=this.input.evaluate(h),_=Io.fromString(v);return _&&h.availableImages&&(_.available=h.availableImages.indexOf(v)>-1),_},Yi.prototype.eachChild=function(h){h(this.input)},Yi.prototype.outputDefined=function(){return!1},Yi.prototype.serialize=function(){return["image",this.input.serialize()]};var Wo={"to-boolean":ri,"to-color":ui,"to-number":sn,"to-string":hi},Ko=function(h,v){this.type=h,this.args=v};Ko.parse=function(h,v){if(h.length<2)return v.error("Expected at least one argument.");var _=h[0];if((_==="to-boolean"||_==="to-string")&&h.length!==2)return v.error("Expected one argument.");for(var R=Wo[_],L=[],z=1;z<h.length;z++){var j=v.parse(h[z],z,vi);if(!j)return null;L.push(j)}return new Ko(R,L)},Ko.prototype.evaluate=function(h){if(this.type.kind==="boolean")return!!this.args[0].evaluate(h);if(this.type.kind==="color"){for(var v,_,R=0,L=this.args;R<L.length;R+=1){if(_=null,(v=L[R].evaluate(h))instanceof na)return v;if(typeof v=="string"){var z=h.parseColor(v);if(z)return z}else if(Array.isArray(v)&&!(_=v.length<3||v.length>4?"Invalid rbga value "+JSON.stringify(v)+": expected an array containing either three or four numeric values.":nr(v[0],v[1],v[2],v[3])))return new na(v[0]/255,v[1]/255,v[2]/255,v[3])}throw new Cn(_||"Could not parse color from value '"+(typeof v=="string"?v:String(JSON.stringify(v)))+"'")}if(this.type.kind==="number"){for(var j=null,ae=0,Se=this.args;ae<Se.length;ae+=1){if((j=Se[ae].evaluate(h))===null)return 0;var He=Number(j);if(!isNaN(He))return He}throw new Cn("Could not convert "+JSON.stringify(j)+" to number.")}return this.type.kind==="formatted"?po.fromString(yr(this.args[0].evaluate(h))):this.type.kind==="resolvedImage"?Io.fromString(yr(this.args[0].evaluate(h))):yr(this.args[0].evaluate(h))},Ko.prototype.eachChild=function(h){this.args.forEach(h)},Ko.prototype.outputDefined=function(){return this.args.every(function(h){return h.outputDefined()})},Ko.prototype.serialize=function(){if(this.type.kind==="formatted")return new Mi([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Yi(this.args[0]).serialize();var h=["to-"+this.type.kind];return this.eachChild(function(v){h.push(v.serialize())}),h};var su=["Unknown","Point","LineString","Polygon"],No=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};No.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},No.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?su[this.feature.type]:this.feature.type:null},No.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},No.prototype.canonicalID=function(){return this.canonical},No.prototype.properties=function(){return this.feature&&this.feature.properties||{}},No.prototype.parseColor=function(h){var v=this._parseColorCache[h];return v||(v=this._parseColorCache[h]=na.parse(h)),v};var ro=function(h,v,_,R){this.name=h,this.type=v,this._evaluate=_,this.args=R};ro.prototype.evaluate=function(h){return this._evaluate(h,this.args)},ro.prototype.eachChild=function(h){this.args.forEach(h)},ro.prototype.outputDefined=function(){return!1},ro.prototype.serialize=function(){return[this.name].concat(this.args.map(function(h){return h.serialize()}))},ro.parse=function(h,v){var _,R=h[0],L=ro.definitions[R];if(!L)return v.error('Unknown expression "'+R+'". If you wanted a literal array, use ["literal", [...]].',0);for(var z=Array.isArray(L)?L[0]:L.type,j=Array.isArray(L)?[[L[1],L[2]]]:L.overloads,ae=j.filter(function(ca){var Ri=ca[0];return!Array.isArray(Ri)||Ri.length===h.length-1}),Se=null,He=0,rt=ae;He<rt.length;He+=1){var ht=rt[He],Mt=ht[0],Nt=ht[1];Se=new no(v.registry,v.path,null,v.scope);for(var er=[],ar=!1,Mr=1;Mr<h.length;Mr++){var _r=h[Mr],Ur=Array.isArray(Mt)?Mt[Mr-1]:Mt.type,Kr=Se.parse(_r,1+er.length,Ur);if(!Kr){ar=!0;break}er.push(Kr)}if(!ar)if(Array.isArray(Mt)&&Mt.length!==er.length)Se.error("Expected "+Mt.length+" arguments, but found "+er.length+" instead.");else{for(var nn=0;nn<er.length;nn++){var yn=Array.isArray(Mt)?Mt[nn]:Mt.type,Pn=er[nn];Se.concat(nn+1).checkSubtype(yn,Pn.type)}if(Se.errors.length===0)return new ro(R,z,Nt,er)}}if(ae.length===1)(_=v.errors).push.apply(_,Se.errors);else{for(var oi=(ae.length?ae:j).map(function(ca){var Ri;return Ri=ca[0],Array.isArray(Ri)?"("+Ri.map(Ea).join(", ")+")":"("+Ea(Ri.type)+"...)"}).join(" | "),bi=[],Qi=1;Qi<h.length;Qi++){var Fi=v.parse(h[Qi],1+bi.length);if(!Fi)return null;bi.push(Ea(Fi.type))}v.error("Expected arguments of type "+oi+", but found ("+bi.join(", ")+") instead.")}return null},ro.register=function(h,v){for(var _ in ro.definitions=v,v)h[_]=ro};var uu=function(h,v,_){this.type=Sa,this.locale=_,this.caseSensitive=h,this.diacriticSensitive=v};function qo(h,v){h[0]=Math.min(h[0],v[0]),h[1]=Math.min(h[1],v[1]),h[2]=Math.max(h[2],v[0]),h[3]=Math.max(h[3],v[1])}function Dt(h,v){return!(h[0]<=v[0]||h[2]>=v[2]||h[1]<=v[1]||h[3]>=v[3])}function Kt(h,v){var _=(180+h[0])/360,R=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,L=Math.pow(2,v.z);return[Math.round(_*L*8192),Math.round(R*L*8192)]}function Or(h,v,_){return v[1]>h[1]!=_[1]>h[1]&&h[0]<(_[0]-v[0])*(h[1]-v[1])/(_[1]-v[1])+v[0]}function xn(h,v){for(var _,R,L,z,j,ae,Se,He=!1,rt=0,ht=v.length;rt<ht;rt++)for(var Mt=v[rt],Nt=0,er=Mt.length;Nt<er-1;Nt++){if((z=(_=h)[0]-(R=Mt[Nt])[0])*(Se=_[1]-(L=Mt[Nt+1])[1])-(ae=_[0]-L[0])*(j=_[1]-R[1])==0&&z*ae<=0&&j*Se<=0)return!1;Or(h,Mt[Nt],Mt[Nt+1])&&(He=!He)}return He}function ii(h,v){for(var _=0;_<v.length;_++)if(xn(h,v[_]))return!0;return!1}function Zi(h,v,_,R){var L=R[0]-_[0],z=R[1]-_[1],j=(h[0]-_[0])*z-L*(h[1]-_[1]),ae=(v[0]-_[0])*z-L*(v[1]-_[1]);return j>0&&ae<0||j<0&&ae>0}function lo(h,v,_){for(var R=0,L=_;R<L.length;R+=1)for(var z=L[R],j=0;j<z.length-1;++j)if((ht=[(rt=z[j+1])[0]-(He=z[j])[0],rt[1]-He[1]])[0]*(Mt=[(Se=v)[0]-(ae=h)[0],Se[1]-ae[1]])[1]-ht[1]*Mt[0]!=0&&Zi(ae,Se,He,rt)&&Zi(He,rt,ae,Se))return!0;var ae,Se,He,rt,ht,Mt;return!1}function Bs(h,v){for(var _=0;_<h.length;++_)if(!xn(h[_],v))return!1;for(var R=0;R<h.length-1;++R)if(lo(h[R],h[R+1],v))return!1;return!0}function Eo(h,v){for(var _=0;_<v.length;_++)if(Bs(h,v[_]))return!0;return!1}function Po(h,v,_){for(var R=[],L=0;L<h.length;L++){for(var z=[],j=0;j<h[L].length;j++){var ae=Kt(h[L][j],_);qo(v,ae),z.push(ae)}R.push(z)}return R}function Hu(h,v,_){for(var R=[],L=0;L<h.length;L++){var z=Po(h[L],v,_);R.push(z)}return R}function uf(h,v,_,R){if(h[0]<_[0]||h[0]>_[2]){var L=.5*R,z=h[0]-_[0]>L?-R:_[0]-h[0]>L?R:0;z===0&&(z=h[0]-_[2]>L?-R:_[2]-h[0]>L?R:0),h[0]+=z}qo(v,h)}function th(h,v,_,R){for(var L=8192*Math.pow(2,R.z),z=[8192*R.x,8192*R.y],j=[],ae=0,Se=h;ae<Se.length;ae+=1)for(var He=0,rt=Se[ae];He<rt.length;He+=1){var ht=rt[He],Mt=[ht.x+z[0],ht.y+z[1]];uf(Mt,v,_,L),j.push(Mt)}return j}function rh(h,v,_,R){for(var L,z=8192*Math.pow(2,R.z),j=[8192*R.x,8192*R.y],ae=[],Se=0,He=h;Se<He.length;Se+=1){for(var rt=[],ht=0,Mt=He[Se];ht<Mt.length;ht+=1){var Nt=Mt[ht],er=[Nt.x+j[0],Nt.y+j[1]];qo(v,er),rt.push(er)}ae.push(rt)}if(v[2]-v[0]<=z/2){(L=v)[0]=L[1]=1/0,L[2]=L[3]=-1/0;for(var ar=0,Mr=ae;ar<Mr.length;ar+=1)for(var _r=0,Ur=Mr[ar];_r<Ur.length;_r+=1)uf(Ur[_r],v,_,z)}return ae}uu.parse=function(h,v){if(h.length!==2)return v.error("Expected one argument.");var _=h[1];if(typeof _!="object"||Array.isArray(_))return v.error("Collator options argument must be an object.");var R=v.parse(_["case-sensitive"]!==void 0&&_["case-sensitive"],1,ri);if(!R)return null;var L=v.parse(_["diacritic-sensitive"]!==void 0&&_["diacritic-sensitive"],1,ri);if(!L)return null;var z=null;return _.locale&&!(z=v.parse(_.locale,1,hi))?null:new uu(R,L,z)},uu.prototype.evaluate=function(h){return new Xa(this.caseSensitive.evaluate(h),this.diacriticSensitive.evaluate(h),this.locale?this.locale.evaluate(h):null)},uu.prototype.eachChild=function(h){h(this.caseSensitive),h(this.diacriticSensitive),this.locale&&h(this.locale)},uu.prototype.outputDefined=function(){return!1},uu.prototype.serialize=function(){var h={};return h["case-sensitive"]=this.caseSensitive.serialize(),h["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(h.locale=this.locale.serialize()),["collator",h]};var lu=function(h,v){this.type=ri,this.geojson=h,this.geometries=v};function nc(h){if(h instanceof ro&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof lu)return!1;var v=!0;return h.eachChild(function(_){v&&!nc(_)&&(v=!1)}),v}function Qs(h){if(h instanceof ro&&h.name==="feature-state")return!1;var v=!0;return h.eachChild(function(_){v&&!Qs(_)&&(v=!1)}),v}function Sl(h,v){if(h instanceof ro&&v.indexOf(h.name)>=0)return!1;var _=!0;return h.eachChild(function(R){_&&!Sl(R,v)&&(_=!1)}),_}lu.parse=function(h,v){if(h.length!==2)return v.error("'within' expression requires exactly one argument, but found "+(h.length-1)+" instead.");if(At(h[1])){var _=h[1];if(_.type==="FeatureCollection")for(var R=0;R<_.features.length;++R){var L=_.features[R].geometry.type;if(L==="Polygon"||L==="MultiPolygon")return new lu(_,_.features[R].geometry)}else if(_.type==="Feature"){var z=_.geometry.type;if(z==="Polygon"||z==="MultiPolygon")return new lu(_,_.geometry)}else if(_.type==="Polygon"||_.type==="MultiPolygon")return new lu(_,_)}return v.error("'within' expression requires valid geojson object that contains polygon geometry type.")},lu.prototype.evaluate=function(h){if(h.geometry()!=null&&h.canonicalID()!=null){if(h.geometryType()==="Point")return function(v,_){var R=[1/0,1/0,-1/0,-1/0],L=[1/0,1/0,-1/0,-1/0],z=v.canonicalID();if(_.type==="Polygon"){var j=Po(_.coordinates,L,z),ae=th(v.geometry(),R,L,z);if(!Dt(R,L))return!1;for(var Se=0,He=ae;Se<He.length;Se+=1)if(!xn(He[Se],j))return!1}if(_.type==="MultiPolygon"){var rt=Hu(_.coordinates,L,z),ht=th(v.geometry(),R,L,z);if(!Dt(R,L))return!1;for(var Mt=0,Nt=ht;Mt<Nt.length;Mt+=1)if(!ii(Nt[Mt],rt))return!1}return!0}(h,this.geometries);if(h.geometryType()==="LineString")return function(v,_){var R=[1/0,1/0,-1/0,-1/0],L=[1/0,1/0,-1/0,-1/0],z=v.canonicalID();if(_.type==="Polygon"){var j=Po(_.coordinates,L,z),ae=rh(v.geometry(),R,L,z);if(!Dt(R,L))return!1;for(var Se=0,He=ae;Se<He.length;Se+=1)if(!Bs(He[Se],j))return!1}if(_.type==="MultiPolygon"){var rt=Hu(_.coordinates,L,z),ht=rh(v.geometry(),R,L,z);if(!Dt(R,L))return!1;for(var Mt=0,Nt=ht;Mt<Nt.length;Mt+=1)if(!Eo(Nt[Mt],rt))return!1}return!0}(h,this.geometries)}return!1},lu.prototype.eachChild=function(){},lu.prototype.outputDefined=function(){return!0},lu.prototype.serialize=function(){return["within",this.geojson]};var ic=function(h,v){this.type=v.type,this.name=h,this.boundExpression=v};ic.parse=function(h,v){if(h.length!==2||typeof h[1]!="string")return v.error("'var' expression requires exactly one string literal argument.");var _=h[1];return v.scope.has(_)?new ic(_,v.scope.get(_)):v.error('Unknown variable "'+_+'". Make sure "'+_+'" has been bound in an enclosing "let" expression before using it.',1)},ic.prototype.evaluate=function(h){return this.boundExpression.evaluate(h)},ic.prototype.eachChild=function(){},ic.prototype.outputDefined=function(){return!1},ic.prototype.serialize=function(){return["var",this.name]};var no=function(h,v,_,R,L){v===void 0&&(v=[]),R===void 0&&(R=new yi),L===void 0&&(L=[]),this.registry=h,this.path=v,this.key=v.map(function(z){return"["+z+"]"}).join(""),this.scope=R,this.errors=L,this.expectedType=_};function Kl(h,v){for(var _,R=h.length-1,L=0,z=R,j=0;L<=z;)if((_=h[j=Math.floor((L+z)/2)])<=v){if(j===R||v<h[j+1])return j;L=j+1}else{if(!(_>v))throw new Cn("Input is not a number.");z=j-1}return 0}no.prototype.parse=function(h,v,_,R,L){return L===void 0&&(L={}),v?this.concat(v,_,R)._parse(h,L):this._parse(h,L)},no.prototype._parse=function(h,v){function _(He,rt,ht){return ht==="assert"?new _n(rt,[He]):ht==="coerce"?new Ko(rt,[He]):He}if(h!==null&&typeof h!="string"&&typeof h!="boolean"&&typeof h!="number"||(h=["literal",h]),Array.isArray(h)){if(h.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var R=h[0];if(typeof R!="string")return this.error("Expression name must be a string, but found "+typeof R+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var L=this.registry[R];if(L){var z=L.parse(h,this);if(!z)return null;if(this.expectedType){var j=this.expectedType,ae=z.type;if(j.kind!=="string"&&j.kind!=="number"&&j.kind!=="boolean"&&j.kind!=="object"&&j.kind!=="array"||ae.kind!=="value")if(j.kind!=="color"&&j.kind!=="formatted"&&j.kind!=="resolvedImage"||ae.kind!=="value"&&ae.kind!=="string"){if(this.checkSubtype(j,ae))return null}else z=_(z,j,v.typeAnnotation||"coerce");else z=_(z,j,v.typeAnnotation||"assert")}if(!(z instanceof Gr)&&z.type.kind!=="resolvedImage"&&function He(rt){if(rt instanceof ic)return He(rt.boundExpression);if(rt instanceof ro&&rt.name==="error"||rt instanceof uu||rt instanceof lu)return!1;var ht=rt instanceof Ko||rt instanceof _n,Mt=!0;return rt.eachChild(function(Nt){Mt=ht?Mt&&He(Nt):Mt&&Nt instanceof Gr}),!!Mt&&nc(rt)&&Sl(rt,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(z)){var Se=new No;try{z=new Gr(z.type,z.evaluate(Se))}catch(He){return this.error(He.message),null}}return z}return this.error('Unknown expression "'+R+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(h===void 0?"'undefined' value invalid. Use null instead.":typeof h=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof h+" instead.")},no.prototype.concat=function(h,v,_){var R=typeof h=="number"?this.path.concat(h):this.path,L=_?this.scope.concat(_):this.scope;return new no(this.registry,R,v||null,L,this.errors)},no.prototype.error=function(h){for(var v=[],_=arguments.length-1;_-- >0;)v[_]=arguments[_+1];var R=""+this.key+v.map(function(L){return"["+L+"]"}).join("");this.errors.push(new Mn(R,h))},no.prototype.checkSubtype=function(h,v){var _=uo(h,v);return _&&this.error(_),_};var Es=function(h,v,_){this.type=h,this.input=v,this.labels=[],this.outputs=[];for(var R=0,L=_;R<L.length;R+=1){var z=L[R],j=z[1];this.labels.push(z[0]),this.outputs.push(j)}};function ds(h,v,_){return h*(1-_)+v*_}Es.parse=function(h,v){if(h.length-1<4)return v.error("Expected at least 4 arguments, but found only "+(h.length-1)+".");if((h.length-1)%2!=0)return v.error("Expected an even number of arguments.");var _=v.parse(h[1],1,sn);if(!_)return null;var R=[],L=null;v.expectedType&&v.expectedType.kind!=="value"&&(L=v.expectedType);for(var z=1;z<h.length;z+=2){var j=z===1?-1/0:h[z],ae=h[z+1],Se=z,He=z+1;if(typeof j!="number")return v.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Se);if(R.length&&R[R.length-1][0]>=j)return v.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Se);var rt=v.parse(ae,He,L);if(!rt)return null;L=L||rt.type,R.push([j,rt])}return new Es(L,_,R)},Es.prototype.evaluate=function(h){var v=this.labels,_=this.outputs;if(v.length===1)return _[0].evaluate(h);var R=this.input.evaluate(h);if(R<=v[0])return _[0].evaluate(h);var L=v.length;return R>=v[L-1]?_[L-1].evaluate(h):_[Kl(v,R)].evaluate(h)},Es.prototype.eachChild=function(h){h(this.input);for(var v=0,_=this.outputs;v<_.length;v+=1)h(_[v])},Es.prototype.outputDefined=function(){return this.outputs.every(function(h){return h.outputDefined()})},Es.prototype.serialize=function(){for(var h=["step",this.input.serialize()],v=0;v<this.labels.length;v++)v>0&&h.push(this.labels[v]),h.push(this.outputs[v].serialize());return h};var bc=Object.freeze({__proto__:null,number:ds,color:function(h,v,_){return new na(ds(h.r,v.r,_),ds(h.g,v.g,_),ds(h.b,v.b,_),ds(h.a,v.a,_))},array:function(h,v,_){return h.map(function(R,L){return ds(R,v[L],_)})}}),Sc=6/29*3*(6/29),Rf=Math.PI/180,Bl=180/Math.PI;function Nl(h){return h>.008856451679035631?Math.pow(h,1/3):h/Sc+4/29}function ql(h){return h>6/29?h*h*h:Sc*(h-4/29)}function Pu(h){return 255*(h<=.0031308?12.92*h:1.055*Math.pow(h,1/2.4)-.055)}function Ec(h){return(h/=255)<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function Sn(h){var v=Ec(h.r),_=Ec(h.g),R=Ec(h.b),L=Nl((.4124564*v+.3575761*_+.1804375*R)/.95047),z=Nl((.2126729*v+.7151522*_+.072175*R)/1);return{l:116*z-16,a:500*(L-z),b:200*(z-Nl((.0193339*v+.119192*_+.9503041*R)/1.08883)),alpha:h.a}}function Vi(h){var v=(h.l+16)/116,_=isNaN(h.a)?v:v+h.a/500,R=isNaN(h.b)?v:v-h.b/200;return v=1*ql(v),_=.95047*ql(_),R=1.08883*ql(R),new na(Pu(3.2404542*_-1.5371385*v-.4985314*R),Pu(-.969266*_+1.8760108*v+.041556*R),Pu(.0556434*_-.2040259*v+1.0572252*R),h.alpha)}function mv(h,v,_){var R=v-h;return h+_*(R>180||R<-180?R-360*Math.round(R/360):R)}var nh={forward:Sn,reverse:Vi,interpolate:function(h,v,_){return{l:ds(h.l,v.l,_),a:ds(h.a,v.a,_),b:ds(h.b,v.b,_),alpha:ds(h.alpha,v.alpha,_)}}},ac={forward:function(h){var v=Sn(h),_=v.l,R=v.a,L=v.b,z=Math.atan2(L,R)*Bl;return{h:z<0?z+360:z,c:Math.sqrt(R*R+L*L),l:_,alpha:h.a}},reverse:function(h){var v=h.h*Rf,_=h.c;return Vi({l:h.l,a:Math.cos(v)*_,b:Math.sin(v)*_,alpha:h.alpha})},interpolate:function(h,v,_){return{h:mv(h.h,v.h,_),c:ds(h.c,v.c,_),l:ds(h.l,v.l,_),alpha:ds(h.alpha,v.alpha,_)}}},ed=Object.freeze({__proto__:null,lab:nh,hcl:ac}),Vs=function(h,v,_,R,L){this.type=h,this.operator=v,this.interpolation=_,this.input=R,this.labels=[],this.outputs=[];for(var z=0,j=L;z<j.length;z+=1){var ae=j[z],Se=ae[1];this.labels.push(ae[0]),this.outputs.push(Se)}};function wc(h,v,_,R){var L=R-_,z=h-_;return L===0?0:v===1?z/L:(Math.pow(v,z)-1)/(Math.pow(v,L)-1)}Vs.interpolationFactor=function(h,v,_,R){var L=0;if(h.name==="exponential")L=wc(v,h.base,_,R);else if(h.name==="linear")L=wc(v,1,_,R);else if(h.name==="cubic-bezier"){var z=h.controlPoints;L=new G(z[0],z[1],z[2],z[3]).solve(wc(v,1,_,R))}return L},Vs.parse=function(h,v){var _=h[0],R=h[1],L=h[2],z=h.slice(3);if(!Array.isArray(R)||R.length===0)return v.error("Expected an interpolation type expression.",1);if(R[0]==="linear")R={name:"linear"};else if(R[0]==="exponential"){var j=R[1];if(typeof j!="number")return v.error("Exponential interpolation requires a numeric base.",1,1);R={name:"exponential",base:j}}else{if(R[0]!=="cubic-bezier")return v.error("Unknown interpolation type "+String(R[0]),1,0);var ae=R.slice(1);if(ae.length!==4||ae.some(function(Mr){return typeof Mr!="number"||Mr<0||Mr>1}))return v.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);R={name:"cubic-bezier",controlPoints:ae}}if(h.length-1<4)return v.error("Expected at least 4 arguments, but found only "+(h.length-1)+".");if((h.length-1)%2!=0)return v.error("Expected an even number of arguments.");if(!(L=v.parse(L,2,sn)))return null;var Se=[],He=null;_==="interpolate-hcl"||_==="interpolate-lab"?He=ui:v.expectedType&&v.expectedType.kind!=="value"&&(He=v.expectedType);for(var rt=0;rt<z.length;rt+=2){var ht=z[rt],Mt=z[rt+1],Nt=rt+3,er=rt+4;if(typeof ht!="number")return v.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Nt);if(Se.length&&Se[Se.length-1][0]>=ht)return v.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Nt);var ar=v.parse(Mt,er,He);if(!ar)return null;He=He||ar.type,Se.push([ht,ar])}return He.kind==="number"||He.kind==="color"||He.kind==="array"&&He.itemType.kind==="number"&&typeof He.N=="number"?new Vs(He,_,R,L,Se):v.error("Type "+Ea(He)+" is not interpolatable.")},Vs.prototype.evaluate=function(h){var v=this.labels,_=this.outputs;if(v.length===1)return _[0].evaluate(h);var R=this.input.evaluate(h);if(R<=v[0])return _[0].evaluate(h);var L=v.length;if(R>=v[L-1])return _[L-1].evaluate(h);var z=Kl(v,R),j=Vs.interpolationFactor(this.interpolation,R,v[z],v[z+1]),ae=_[z].evaluate(h),Se=_[z+1].evaluate(h);return this.operator==="interpolate"?bc[this.type.kind.toLowerCase()](ae,Se,j):this.operator==="interpolate-hcl"?ac.reverse(ac.interpolate(ac.forward(ae),ac.forward(Se),j)):nh.reverse(nh.interpolate(nh.forward(ae),nh.forward(Se),j))},Vs.prototype.eachChild=function(h){h(this.input);for(var v=0,_=this.outputs;v<_.length;v+=1)h(_[v])},Vs.prototype.outputDefined=function(){return this.outputs.every(function(h){return h.outputDefined()})},Vs.prototype.serialize=function(){var h;h=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var v=[this.operator,h,this.input.serialize()],_=0;_<this.labels.length;_++)v.push(this.labels[_],this.outputs[_].serialize());return v};var zl=function(h,v){this.type=h,this.args=v};zl.parse=function(h,v){if(h.length<2)return v.error("Expectected at least one argument.");var _=null,R=v.expectedType;R&&R.kind!=="value"&&(_=R);for(var L=[],z=0,j=h.slice(1);z<j.length;z+=1){var ae=v.parse(j[z],1+L.length,_,void 0,{typeAnnotation:"omit"});if(!ae)return null;_=_||ae.type,L.push(ae)}var Se=R&&L.some(function(He){return uo(R,He.type)});return new zl(Se?vi:_,L)},zl.prototype.evaluate=function(h){for(var v,_=null,R=0,L=0,z=this.args;L<z.length&&(R++,(_=z[L].evaluate(h))&&_ instanceof Io&&!_.available&&(v||(v=_.name),_=null,R===this.args.length&&(_=v)),_===null);L+=1);return _},zl.prototype.eachChild=function(h){this.args.forEach(h)},zl.prototype.outputDefined=function(){return this.args.every(function(h){return h.outputDefined()})},zl.prototype.serialize=function(){var h=["coalesce"];return this.eachChild(function(v){h.push(v.serialize())}),h};var Js=function(h,v){this.type=v.type,this.bindings=[].concat(h),this.result=v};Js.prototype.evaluate=function(h){return this.result.evaluate(h)},Js.prototype.eachChild=function(h){for(var v=0,_=this.bindings;v<_.length;v+=1)h(_[v][1]);h(this.result)},Js.parse=function(h,v){if(h.length<4)return v.error("Expected at least 3 arguments, but found "+(h.length-1)+" instead.");for(var _=[],R=1;R<h.length-1;R+=2){var L=h[R];if(typeof L!="string")return v.error("Expected string, but found "+typeof L+" instead.",R);if(/[^a-zA-Z0-9_]/.test(L))return v.error("Variable names must contain only alphanumeric characters or '_'.",R);var z=v.parse(h[R+1],R+1);if(!z)return null;_.push([L,z])}var j=v.parse(h[h.length-1],h.length-1,v.expectedType,_);return j?new Js(_,j):null},Js.prototype.outputDefined=function(){return this.result.outputDefined()},Js.prototype.serialize=function(){for(var h=["let"],v=0,_=this.bindings;v<_.length;v+=1){var R=_[v];h.push(R[0],R[1].serialize())}return h.push(this.result.serialize()),h};var cu=function(h,v,_){this.type=h,this.index=v,this.input=_};cu.parse=function(h,v){if(h.length!==3)return v.error("Expected 2 arguments, but found "+(h.length-1)+" instead.");var _=v.parse(h[1],1,sn),R=v.parse(h[2],2,Ga(v.expectedType||vi));return _&&R?new cu(R.type.itemType,_,R):null},cu.prototype.evaluate=function(h){var v=this.index.evaluate(h),_=this.input.evaluate(h);if(v<0)throw new Cn("Array index out of bounds: "+v+" < 0.");if(v>=_.length)throw new Cn("Array index out of bounds: "+v+" > "+(_.length-1)+".");if(v!==Math.floor(v))throw new Cn("Array index must be an integer, but found "+v+" instead.");return _[v]},cu.prototype.eachChild=function(h){h(this.index),h(this.input)},cu.prototype.outputDefined=function(){return!1},cu.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var El=function(h,v){this.type=ri,this.needle=h,this.haystack=v};El.parse=function(h,v){if(h.length!==3)return v.error("Expected 2 arguments, but found "+(h.length-1)+" instead.");var _=v.parse(h[1],1,vi),R=v.parse(h[2],2,vi);return _&&R?Ro(_.type,[ri,hi,sn,gi,vi])?new El(_,R):v.error("Expected first argument to be of type boolean, string, number or null, but found "+Ea(_.type)+" instead"):null},El.prototype.evaluate=function(h){var v=this.needle.evaluate(h),_=this.haystack.evaluate(h);if(!_)return!1;if(!Jn(v,["boolean","string","number","null"]))throw new Cn("Expected first argument to be of type boolean, string, number or null, but found "+Ea(Xt(v))+" instead.");if(!Jn(_,["string","array"]))throw new Cn("Expected second argument to be of type array or string, but found "+Ea(Xt(_))+" instead.");return _.indexOf(v)>=0},El.prototype.eachChild=function(h){h(this.needle),h(this.haystack)},El.prototype.outputDefined=function(){return!0},El.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var oc=function(h,v,_){this.type=sn,this.needle=h,this.haystack=v,this.fromIndex=_};oc.parse=function(h,v){if(h.length<=2||h.length>=5)return v.error("Expected 3 or 4 arguments, but found "+(h.length-1)+" instead.");var _=v.parse(h[1],1,vi),R=v.parse(h[2],2,vi);if(!_||!R)return null;if(!Ro(_.type,[ri,hi,sn,gi,vi]))return v.error("Expected first argument to be of type boolean, string, number or null, but found "+Ea(_.type)+" instead");if(h.length===4){var L=v.parse(h[3],3,sn);return L?new oc(_,R,L):null}return new oc(_,R)},oc.prototype.evaluate=function(h){var v=this.needle.evaluate(h),_=this.haystack.evaluate(h);if(!Jn(v,["boolean","string","number","null"]))throw new Cn("Expected first argument to be of type boolean, string, number or null, but found "+Ea(Xt(v))+" instead.");if(!Jn(_,["string","array"]))throw new Cn("Expected second argument to be of type array or string, but found "+Ea(Xt(_))+" instead.");if(this.fromIndex){var R=this.fromIndex.evaluate(h);return _.indexOf(v,R)}return _.indexOf(v)},oc.prototype.eachChild=function(h){h(this.needle),h(this.haystack),this.fromIndex&&h(this.fromIndex)},oc.prototype.outputDefined=function(){return!1},oc.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var h=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),h]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ul=function(h,v,_,R,L,z){this.inputType=h,this.type=v,this.input=_,this.cases=R,this.outputs=L,this.otherwise=z};Ul.parse=function(h,v){if(h.length<5)return v.error("Expected at least 4 arguments, but found only "+(h.length-1)+".");if(h.length%2!=1)return v.error("Expected an even number of arguments.");var _,R;v.expectedType&&v.expectedType.kind!=="value"&&(R=v.expectedType);for(var L={},z=[],j=2;j<h.length-1;j+=2){var ae=h[j],Se=h[j+1];Array.isArray(ae)||(ae=[ae]);var He=v.concat(j);if(ae.length===0)return He.error("Expected at least one branch label.");for(var rt=0,ht=ae;rt<ht.length;rt+=1){var Mt=ht[rt];if(typeof Mt!="number"&&typeof Mt!="string")return He.error("Branch labels must be numbers or strings.");if(typeof Mt=="number"&&Math.abs(Mt)>Number.MAX_SAFE_INTEGER)return He.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Mt=="number"&&Math.floor(Mt)!==Mt)return He.error("Numeric branch labels must be integer values.");if(_){if(He.checkSubtype(_,Xt(Mt)))return null}else _=Xt(Mt);if(L[String(Mt)]!==void 0)return He.error("Branch labels must be unique.");L[String(Mt)]=z.length}var Nt=v.parse(Se,j,R);if(!Nt)return null;R=R||Nt.type,z.push(Nt)}var er=v.parse(h[1],1,vi);if(!er)return null;var ar=v.parse(h[h.length-1],h.length-1,R);return ar?er.type.kind!=="value"&&v.concat(1).checkSubtype(_,er.type)?null:new Ul(_,R,er,L,z,ar):null},Ul.prototype.evaluate=function(h){var v=this.input.evaluate(h);return(Xt(v)===this.inputType&&this.outputs[this.cases[v]]||this.otherwise).evaluate(h)},Ul.prototype.eachChild=function(h){h(this.input),this.outputs.forEach(h),h(this.otherwise)},Ul.prototype.outputDefined=function(){return this.outputs.every(function(h){return h.outputDefined()})&&this.otherwise.outputDefined()},Ul.prototype.serialize=function(){for(var h=this,v=["match",this.input.serialize()],_=[],R={},L=0,z=Object.keys(this.cases).sort();L<z.length;L+=1){var j=z[L];(ht=R[this.cases[j]])===void 0?(R[this.cases[j]]=_.length,_.push([this.cases[j],[j]])):_[ht][1].push(j)}for(var ae=function(Nt){return h.inputType.kind==="number"?Number(Nt):Nt},Se=0,He=_;Se<He.length;Se+=1){var rt=He[Se],ht=rt[0],Mt=rt[1];v.push(Mt.length===1?ae(Mt[0]):Mt.map(ae)),v.push(this.outputs[outputIndex$1].serialize())}return v.push(this.otherwise.serialize()),v};var Cc=function(h,v,_){this.type=h,this.branches=v,this.otherwise=_};Cc.parse=function(h,v){if(h.length<4)return v.error("Expected at least 3 arguments, but found only "+(h.length-1)+".");if(h.length%2!=0)return v.error("Expected an odd number of arguments.");var _;v.expectedType&&v.expectedType.kind!=="value"&&(_=v.expectedType);for(var R=[],L=1;L<h.length-1;L+=2){var z=v.parse(h[L],L,ri);if(!z)return null;var j=v.parse(h[L+1],L+1,_);if(!j)return null;R.push([z,j]),_=_||j.type}var ae=v.parse(h[h.length-1],h.length-1,_);return ae?new Cc(_,R,ae):null},Cc.prototype.evaluate=function(h){for(var v=0,_=this.branches;v<_.length;v+=1){var R=_[v],L=R[1];if(R[0].evaluate(h))return L.evaluate(h)}return this.otherwise.evaluate(h)},Cc.prototype.eachChild=function(h){for(var v=0,_=this.branches;v<_.length;v+=1){var R=_[v],L=R[1];h(R[0]),h(L)}h(this.otherwise)},Cc.prototype.outputDefined=function(){return this.branches.every(function(h){return h[1].outputDefined()})&&this.otherwise.outputDefined()},Cc.prototype.serialize=function(){var h=["case"];return this.eachChild(function(v){h.push(v.serialize())}),h};var Vc=function(h,v,_,R){this.type=h,this.input=v,this.beginIndex=_,this.endIndex=R};function ih(h,v){return h==="=="||h==="!="?v.kind==="boolean"||v.kind==="string"||v.kind==="number"||v.kind==="null"||v.kind==="value":v.kind==="string"||v.kind==="number"||v.kind==="value"}function td(h,v,_,R){return R.compare(v,_)===0}function Zo(h,v,_){var R=h!=="=="&&h!=="!=";return function(){function L(z,j,ae){this.type=ri,this.lhs=z,this.rhs=j,this.collator=ae,this.hasUntypedArgument=z.type.kind==="value"||j.type.kind==="value"}return L.parse=function(z,j){if(z.length!==3&&z.length!==4)return j.error("Expected two or three arguments.");var ae=z[0],Se=j.parse(z[1],1,vi);if(!Se)return null;if(!ih(ae,Se.type))return j.concat(1).error('"'+ae+`" comparisons are not supported for type '`+Ea(Se.type)+"'.");var He=j.parse(z[2],2,vi);if(!He)return null;if(!ih(ae,He.type))return j.concat(2).error('"'+ae+`" comparisons are not supported for type '`+Ea(He.type)+"'.");if(Se.type.kind!==He.type.kind&&Se.type.kind!=="value"&&He.type.kind!=="value")return j.error("Cannot compare types '"+Ea(Se.type)+"' and '"+Ea(He.type)+"'.");R&&(Se.type.kind==="value"&&He.type.kind!=="value"?Se=new _n(He.type,[Se]):Se.type.kind!=="value"&&He.type.kind==="value"&&(He=new _n(Se.type,[He])));var rt=null;if(z.length===4){if(Se.type.kind!=="string"&&He.type.kind!=="string"&&Se.type.kind!=="value"&&He.type.kind!=="value")return j.error("Cannot use collator to compare non-string types.");if(!(rt=j.parse(z[3],3,Sa)))return null}return new L(Se,He,rt)},L.prototype.evaluate=function(z){var j=this.lhs.evaluate(z),ae=this.rhs.evaluate(z);if(R&&this.hasUntypedArgument){var Se=Xt(j),He=Xt(ae);if(Se.kind!==He.kind||Se.kind!=="string"&&Se.kind!=="number")throw new Cn('Expected arguments for "'+h+'" to be (string, string) or (number, number), but found ('+Se.kind+", "+He.kind+") instead.")}if(this.collator&&!R&&this.hasUntypedArgument){var rt=Xt(j),ht=Xt(ae);if(rt.kind!=="string"||ht.kind!=="string")return v(z,j,ae)}return this.collator?_(z,j,ae,this.collator.evaluate(z)):v(z,j,ae)},L.prototype.eachChild=function(z){z(this.lhs),z(this.rhs),this.collator&&z(this.collator)},L.prototype.outputDefined=function(){return!0},L.prototype.serialize=function(){var z=[h];return this.eachChild(function(j){z.push(j.serialize())}),z},L}()}Vc.parse=function(h,v){if(h.length<=2||h.length>=5)return v.error("Expected 3 or 4 arguments, but found "+(h.length-1)+" instead.");var _=v.parse(h[1],1,vi),R=v.parse(h[2],2,sn);if(!_||!R)return null;if(!Ro(_.type,[Ga(vi),hi,vi]))return v.error("Expected first argument to be of type array or string, but found "+Ea(_.type)+" instead");if(h.length===4){var L=v.parse(h[3],3,sn);return L?new Vc(_.type,_,R,L):null}return new Vc(_.type,_,R)},Vc.prototype.evaluate=function(h){var v=this.input.evaluate(h),_=this.beginIndex.evaluate(h);if(!Jn(v,["string","array"]))throw new Cn("Expected first argument to be of type array or string, but found "+Ea(Xt(v))+" instead.");if(this.endIndex){var R=this.endIndex.evaluate(h);return v.slice(_,R)}return v.slice(_)},Vc.prototype.eachChild=function(h){h(this.input),h(this.beginIndex),this.endIndex&&h(this.endIndex)},Vc.prototype.outputDefined=function(){return!1},Vc.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var h=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),h]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Fd=Zo("==",function(h,v,_){return v===_},td),Ih=Zo("!=",function(h,v,_){return v!==_},function(h,v,_,R){return!td(0,v,_,R)}),lf=Zo("<",function(h,v,_){return v<_},function(h,v,_,R){return R.compare(v,_)<0}),ts=Zo(">",function(h,v,_){return v>_},function(h,v,_,R){return R.compare(v,_)>0}),hp=Zo("<=",function(h,v,_){return v<=_},function(h,v,_,R){return R.compare(v,_)<=0}),pp=Zo(">=",function(h,v,_){return v>=_},function(h,v,_,R){return R.compare(v,_)>=0}),Ou=function(h,v,_,R,L){this.type=hi,this.number=h,this.locale=v,this.currency=_,this.minFractionDigits=R,this.maxFractionDigits=L};Ou.parse=function(h,v){if(h.length!==3)return v.error("Expected two arguments.");var _=v.parse(h[1],1,sn);if(!_)return null;var R=h[2];if(typeof R!="object"||Array.isArray(R))return v.error("NumberFormat options argument must be an object.");var L=null;if(R.locale&&!(L=v.parse(R.locale,1,hi)))return null;var z=null;if(R.currency&&!(z=v.parse(R.currency,1,hi)))return null;var j=null;if(R["min-fraction-digits"]&&!(j=v.parse(R["min-fraction-digits"],1,sn)))return null;var ae=null;return R["max-fraction-digits"]&&!(ae=v.parse(R["max-fraction-digits"],1,sn))?null:new Ou(_,L,z,j,ae)},Ou.prototype.evaluate=function(h){return new Intl.NumberFormat(this.locale?this.locale.evaluate(h):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(h):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(h):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(h):void 0}).format(this.number.evaluate(h))},Ou.prototype.eachChild=function(h){h(this.number),this.locale&&h(this.locale),this.currency&&h(this.currency),this.minFractionDigits&&h(this.minFractionDigits),this.maxFractionDigits&&h(this.maxFractionDigits)},Ou.prototype.outputDefined=function(){return!1},Ou.prototype.serialize=function(){var h={};return this.locale&&(h.locale=this.locale.serialize()),this.currency&&(h.currency=this.currency.serialize()),this.minFractionDigits&&(h["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(h["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),h]};var St=function(h){this.type=sn,this.input=h};St.parse=function(h,v){if(h.length!==2)return v.error("Expected 1 argument, but found "+(h.length-1)+" instead.");var _=v.parse(h[1],1);return _?_.type.kind!=="array"&&_.type.kind!=="string"&&_.type.kind!=="value"?v.error("Expected argument of type string or array, but found "+Ea(_.type)+" instead."):new St(_):null},St.prototype.evaluate=function(h){var v=this.input.evaluate(h);if(typeof v=="string"||Array.isArray(v))return v.length;throw new Cn("Expected value to be of type string or array, but found "+Ea(Xt(v))+" instead.")},St.prototype.eachChild=function(h){h(this.input)},St.prototype.outputDefined=function(){return!1},St.prototype.serialize=function(){var h=["length"];return this.eachChild(function(v){h.push(v.serialize())}),h};var cr={"==":Fd,"!=":Ih,">":ts,"<":lf,">=":pp,"<=":hp,array:_n,at:cu,boolean:_n,case:Cc,coalesce:zl,collator:uu,format:Mi,image:Yi,in:El,"index-of":oc,interpolate:Vs,"interpolate-hcl":Vs,"interpolate-lab":Vs,length:St,let:Js,literal:Gr,match:Ul,number:_n,"number-format":Ou,object:_n,slice:Vc,step:Es,string:_n,"to-boolean":Ko,"to-color":Ko,"to-number":Ko,"to-string":Ko,var:ic,within:lu};function kr(h,v){var _=v[0],R=v[1],L=v[2],z=v[3];_=_.evaluate(h),R=R.evaluate(h),L=L.evaluate(h);var j=z?z.evaluate(h):1,ae=nr(_,R,L,j);if(ae)throw new Cn(ae);return new na(_/255*j,R/255*j,L/255*j,j)}function Hr(h,v){return h in v}function An(h,v){var _=v[h];return _===void 0?null:_}function di(h){return{type:h}}function ua(h){return{result:"success",value:h}}function go(h){return{result:"error",value:h}}function Is(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function ll(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}function Ku(h){return!!h.expression&&h.expression.interpolated}function Oo(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function dp(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)}function Dd(h){return h}function Hc(h,v,_){return h!==void 0?h:v!==void 0?v:_!==void 0?_:void 0}function vp(h,v,_,R,L){return Hc(typeof _===L?R[_]:void 0,h.default,v.default)}function cf(h,v,_){if(Oo(_)!=="number")return Hc(h.default,v.default);var R=h.stops.length;if(R===1||_<=h.stops[0][0])return h.stops[0][1];if(_>=h.stops[R-1][0])return h.stops[R-1][1];var L=Kl(h.stops.map(function(z){return z[0]}),_);return h.stops[L][1]}function rd(h,v,_){var R=h.base!==void 0?h.base:1;if(Oo(_)!=="number")return Hc(h.default,v.default);var L=h.stops.length;if(L===1||_<=h.stops[0][0])return h.stops[0][1];if(_>=h.stops[L-1][0])return h.stops[L-1][1];var z=Kl(h.stops.map(function(ht){return ht[0]}),_),j=function(ht,Mt,Nt,er){var ar=er-Nt,Mr=ht-Nt;return ar===0?0:Mt===1?Mr/ar:(Math.pow(Mt,Mr)-1)/(Math.pow(Mt,ar)-1)}(_,R,h.stops[z][0],h.stops[z+1][0]),ae=h.stops[z][1],Se=h.stops[z+1][1],He=bc[v.type]||Dd;if(h.colorSpace&&h.colorSpace!=="rgb"){var rt=ed[h.colorSpace];He=function(ht,Mt){return rt.reverse(rt.interpolate(rt.forward(ht),rt.forward(Mt),j))}}return typeof ae.evaluate=="function"?{evaluate:function(){for(var ht=[],Mt=arguments.length;Mt--;)ht[Mt]=arguments[Mt];var Nt=ae.evaluate.apply(void 0,ht),er=Se.evaluate.apply(void 0,ht);if(Nt!==void 0&&er!==void 0)return He(Nt,er,j)}}:He(ae,Se,j)}function wa(h,v,_){return v.type==="color"?_=na.parse(_):v.type==="formatted"?_=po.fromString(_.toString()):v.type==="resolvedImage"?_=Io.fromString(_.toString()):Oo(_)===v.type||v.type==="enum"&&v.values[_]||(_=void 0),Hc(_,h.default,v.default)}ro.register(cr,{error:[{kind:"error"},[hi],function(h,v){throw new Cn(v[0].evaluate(h))}],typeof:[hi,[vi],function(h,v){return Ea(Xt(v[0].evaluate(h)))}],"to-rgba":[Ga(sn,4),[ui],function(h,v){return v[0].evaluate(h).toArray()}],rgb:[ui,[sn,sn,sn],kr],rgba:[ui,[sn,sn,sn,sn],kr],has:{type:ri,overloads:[[[hi],function(h,v){return Hr(v[0].evaluate(h),h.properties())}],[[hi,ba],function(h,v){var _=v[1];return Hr(v[0].evaluate(h),_.evaluate(h))}]]},get:{type:vi,overloads:[[[hi],function(h,v){return An(v[0].evaluate(h),h.properties())}],[[hi,ba],function(h,v){var _=v[1];return An(v[0].evaluate(h),_.evaluate(h))}]]},"feature-state":[vi,[hi],function(h,v){return An(v[0].evaluate(h),h.featureState||{})}],properties:[ba,[],function(h){return h.properties()}],"geometry-type":[hi,[],function(h){return h.geometryType()}],id:[vi,[],function(h){return h.id()}],zoom:[sn,[],function(h){return h.globals.zoom}],"heatmap-density":[sn,[],function(h){return h.globals.heatmapDensity||0}],"line-progress":[sn,[],function(h){return h.globals.lineProgress||0}],accumulated:[vi,[],function(h){return h.globals.accumulated===void 0?null:h.globals.accumulated}],"+":[sn,di(sn),function(h,v){for(var _=0,R=0,L=v;R<L.length;R+=1)_+=L[R].evaluate(h);return _}],"*":[sn,di(sn),function(h,v){for(var _=1,R=0,L=v;R<L.length;R+=1)_*=L[R].evaluate(h);return _}],"-":{type:sn,overloads:[[[sn,sn],function(h,v){var _=v[1];return v[0].evaluate(h)-_.evaluate(h)}],[[sn],function(h,v){return-v[0].evaluate(h)}]]},"/":[sn,[sn,sn],function(h,v){var _=v[1];return v[0].evaluate(h)/_.evaluate(h)}],"%":[sn,[sn,sn],function(h,v){var _=v[1];return v[0].evaluate(h)%_.evaluate(h)}],ln2:[sn,[],function(){return Math.LN2}],pi:[sn,[],function(){return Math.PI}],e:[sn,[],function(){return Math.E}],"^":[sn,[sn,sn],function(h,v){var _=v[1];return Math.pow(v[0].evaluate(h),_.evaluate(h))}],sqrt:[sn,[sn],function(h,v){return Math.sqrt(v[0].evaluate(h))}],log10:[sn,[sn],function(h,v){return Math.log(v[0].evaluate(h))/Math.LN10}],ln:[sn,[sn],function(h,v){return Math.log(v[0].evaluate(h))}],log2:[sn,[sn],function(h,v){return Math.log(v[0].evaluate(h))/Math.LN2}],sin:[sn,[sn],function(h,v){return Math.sin(v[0].evaluate(h))}],cos:[sn,[sn],function(h,v){return Math.cos(v[0].evaluate(h))}],tan:[sn,[sn],function(h,v){return Math.tan(v[0].evaluate(h))}],asin:[sn,[sn],function(h,v){return Math.asin(v[0].evaluate(h))}],acos:[sn,[sn],function(h,v){return Math.acos(v[0].evaluate(h))}],atan:[sn,[sn],function(h,v){return Math.atan(v[0].evaluate(h))}],min:[sn,di(sn),function(h,v){return Math.min.apply(Math,v.map(function(_){return _.evaluate(h)}))}],max:[sn,di(sn),function(h,v){return Math.max.apply(Math,v.map(function(_){return _.evaluate(h)}))}],abs:[sn,[sn],function(h,v){return Math.abs(v[0].evaluate(h))}],round:[sn,[sn],function(h,v){var _=v[0].evaluate(h);return _<0?-Math.round(-_):Math.round(_)}],floor:[sn,[sn],function(h,v){return Math.floor(v[0].evaluate(h))}],ceil:[sn,[sn],function(h,v){return Math.ceil(v[0].evaluate(h))}],"filter-==":[ri,[hi,vi],function(h,v){var _=v[0],R=v[1];return h.properties()[_.value]===R.value}],"filter-id-==":[ri,[vi],function(h,v){var _=v[0];return h.id()===_.value}],"filter-type-==":[ri,[hi],function(h,v){var _=v[0];return h.geometryType()===_.value}],"filter-<":[ri,[hi,vi],function(h,v){var _=v[0],R=v[1],L=h.properties()[_.value],z=R.value;return typeof L==typeof z&&L<z}],"filter-id-<":[ri,[vi],function(h,v){var _=v[0],R=h.id(),L=_.value;return typeof R==typeof L&&R<L}],"filter->":[ri,[hi,vi],function(h,v){var _=v[0],R=v[1],L=h.properties()[_.value],z=R.value;return typeof L==typeof z&&L>z}],"filter-id->":[ri,[vi],function(h,v){var _=v[0],R=h.id(),L=_.value;return typeof R==typeof L&&R>L}],"filter-<=":[ri,[hi,vi],function(h,v){var _=v[0],R=v[1],L=h.properties()[_.value],z=R.value;return typeof L==typeof z&&L<=z}],"filter-id-<=":[ri,[vi],function(h,v){var _=v[0],R=h.id(),L=_.value;return typeof R==typeof L&&R<=L}],"filter->=":[ri,[hi,vi],function(h,v){var _=v[0],R=v[1],L=h.properties()[_.value],z=R.value;return typeof L==typeof z&&L>=z}],"filter-id->=":[ri,[vi],function(h,v){var _=v[0],R=h.id(),L=_.value;return typeof R==typeof L&&R>=L}],"filter-has":[ri,[vi],function(h,v){return v[0].value in h.properties()}],"filter-has-id":[ri,[],function(h){return h.id()!==null&&h.id()!==void 0}],"filter-type-in":[ri,[Ga(hi)],function(h,v){return v[0].value.indexOf(h.geometryType())>=0}],"filter-id-in":[ri,[Ga(vi)],function(h,v){return v[0].value.indexOf(h.id())>=0}],"filter-in-small":[ri,[hi,Ga(vi)],function(h,v){var _=v[0];return v[1].value.indexOf(h.properties()[_.value])>=0}],"filter-in-large":[ri,[hi,Ga(vi)],function(h,v){var _=v[0],R=v[1];return function(L,z,j,ae){for(;j<=ae;){var Se=j+ae>>1;if(z[Se]===L)return!0;z[Se]>L?ae=Se-1:j=Se+1}return!1}(h.properties()[_.value],R.value,0,R.value.length-1)}],all:{type:ri,overloads:[[[ri,ri],function(h,v){var _=v[1];return v[0].evaluate(h)&&_.evaluate(h)}],[di(ri),function(h,v){for(var _=0,R=v;_<R.length;_+=1)if(!R[_].evaluate(h))return!1;return!0}]]},any:{type:ri,overloads:[[[ri,ri],function(h,v){var _=v[1];return v[0].evaluate(h)||_.evaluate(h)}],[di(ri),function(h,v){for(var _=0,R=v;_<R.length;_+=1)if(R[_].evaluate(h))return!0;return!1}]]},"!":[ri,[ri],function(h,v){return!v[0].evaluate(h)}],"is-supported-script":[ri,[hi],function(h,v){var _=h.globals&&h.globals.isSupportedScript;return!_||_(v[0].evaluate(h))}],upcase:[hi,[hi],function(h,v){return v[0].evaluate(h).toUpperCase()}],downcase:[hi,[hi],function(h,v){return v[0].evaluate(h).toLowerCase()}],concat:[hi,di(vi),function(h,v){return v.map(function(_){return yr(_.evaluate(h))}).join("")}],"resolved-locale":[hi,[Sa],function(h,v){return v[0].evaluate(h).resolvedLocale()}]});var ff=function(h,v){this.expression=h,this._warningHistory={},this._evaluator=new No,this._defaultValue=v?function(_){return _.type==="color"&&dp(_.default)?new na(0,0,0,0):_.type==="color"?na.parse(_.default)||null:_.default===void 0?null:_.default}(v):null,this._enumValues=v&&v.type==="enum"?v.values:null};function ah(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in cr}function oh(h,v){var _=new no(cr,[],v?function(L){var z={color:ui,string:hi,number:sn,enum:hi,boolean:ri,formatted:za,resolvedImage:_a};return L.type==="array"?Ga(z[L.value]||vi,L.length):z[L.type]}(v):void 0),R=_.parse(h,void 0,void 0,void 0,v&&v.type==="string"?{typeAnnotation:"coerce"}:void 0);return R?ua(new ff(R,v)):go(_.errors)}ff.prototype.evaluateWithoutErrorHandling=function(h,v,_,R,L,z){return this._evaluator.globals=h,this._evaluator.feature=v,this._evaluator.featureState=_,this._evaluator.canonical=R,this._evaluator.availableImages=L||null,this._evaluator.formattedSection=z,this.expression.evaluate(this._evaluator)},ff.prototype.evaluate=function(h,v,_,R,L,z){this._evaluator.globals=h,this._evaluator.feature=v||null,this._evaluator.featureState=_||null,this._evaluator.canonical=R,this._evaluator.availableImages=L||null,this._evaluator.formattedSection=z||null;try{var j=this.expression.evaluate(this._evaluator);if(j==null||typeof j=="number"&&j!=j)return this._defaultValue;if(this._enumValues&&!(j in this._enumValues))throw new Cn("Expected value to be one of "+Object.keys(this._enumValues).map(function(ae){return JSON.stringify(ae)}).join(", ")+", but found "+JSON.stringify(j)+" instead.");return j}catch(ae){return this._warningHistory[ae.message]||(this._warningHistory[ae.message]=!0,typeof console!="undefined"&&console.warn(ae.message)),this._defaultValue}};var If=function(h,v){this.kind=h,this._styleExpression=v,this.isStateDependent=h!=="constant"&&!Qs(v.expression)};If.prototype.evaluateWithoutErrorHandling=function(h,v,_,R,L,z){return this._styleExpression.evaluateWithoutErrorHandling(h,v,_,R,L,z)},If.prototype.evaluate=function(h,v,_,R,L,z){return this._styleExpression.evaluate(h,v,_,R,L,z)};var sh=function(h,v,_,R){this.kind=h,this.zoomStops=_,this._styleExpression=v,this.isStateDependent=h!=="camera"&&!Qs(v.expression),this.interpolationType=R};function Ns(h,v){if((h=oh(h,v)).result==="error")return h;var _=h.value.expression,R=nc(_);if(!R&&!Is(v))return go([new Mn("","data expressions not supported")]);var L=Sl(_,["zoom"]);if(!L&&!ll(v))return go([new Mn("","zoom expressions not supported")]);var z=function j(ae){var Se=null;if(ae instanceof Js)Se=j(ae.result);else if(ae instanceof zl)for(var He=0,rt=ae.args;He<rt.length&&!(Se=j(rt[He]));He+=1);else(ae instanceof Es||ae instanceof Vs)&&ae.input instanceof ro&&ae.input.name==="zoom"&&(Se=ae);return Se instanceof Mn||ae.eachChild(function(ht){var Mt=j(ht);Mt instanceof Mn?Se=Mt:!Se&&Mt?Se=new Mn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):Se&&Mt&&Se!==Mt&&(Se=new Mn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),Se}(_);return z||L?z instanceof Mn?go([z]):z instanceof Vs&&!Ku(v)?go([new Mn("",'"interpolate" expressions cannot be used with this property')]):ua(z?new sh(R?"camera":"composite",h.value,z.labels,z instanceof Vs?z.interpolation:void 0):new If(R?"constant":"source",h.value)):go([new Mn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}sh.prototype.evaluateWithoutErrorHandling=function(h,v,_,R,L,z){return this._styleExpression.evaluateWithoutErrorHandling(h,v,_,R,L,z)},sh.prototype.evaluate=function(h,v,_,R,L,z){return this._styleExpression.evaluate(h,v,_,R,L,z)},sh.prototype.interpolationFactor=function(h,v,_){return this.interpolationType?Vs.interpolationFactor(this.interpolationType,h,v,_):0};var sc=function(h,v){this._parameters=h,this._specification=v,mr(this,function _(R,L){var z,j,ae,Se=L.type==="color",He=R.stops&&typeof R.stops[0][0]=="object",rt=He||!(He||R.property!==void 0),ht=R.type||(Ku(L)?"exponential":"interval");if(Se&&((R=mr({},R)).stops&&(R.stops=R.stops.map(function(Fi){return[Fi[0],na.parse(Fi[1])]})),R.default=na.parse(R.default?R.default:L.default)),R.colorSpace&&R.colorSpace!=="rgb"&&!ed[R.colorSpace])throw new Error("Unknown color space: "+R.colorSpace);if(ht==="exponential")z=rd;else if(ht==="interval")z=cf;else if(ht==="categorical"){z=vp,j=Object.create(null);for(var Mt=0,Nt=R.stops;Mt<Nt.length;Mt+=1){var er=Nt[Mt];j[er[0]]=er[1]}ae=typeof R.stops[0][0]}else{if(ht!=="identity")throw new Error('Unknown function type "'+ht+'"');z=wa}if(He){for(var ar={},Mr=[],_r=0;_r<R.stops.length;_r++){var Ur=R.stops[_r],Kr=Ur[0].zoom;ar[Kr]===void 0&&(ar[Kr]={zoom:Kr,type:R.type,property:R.property,default:R.default,stops:[]},Mr.push(Kr)),ar[Kr].stops.push([Ur[0].value,Ur[1]])}for(var nn=[],yn=0,Pn=Mr;yn<Pn.length;yn+=1){var oi=Pn[yn];nn.push([ar[oi].zoom,_(ar[oi],L)])}var bi={name:"linear"};return{kind:"composite",interpolationType:bi,interpolationFactor:Vs.interpolationFactor.bind(void 0,bi),zoomStops:nn.map(function(Fi){return Fi[0]}),evaluate:function(Fi,ca){var Ri=Fi.zoom;return rd({stops:nn,base:R.base},L,Ri).evaluate(Ri,ca)}}}if(rt){var Qi=ht==="exponential"?{name:"exponential",base:R.base!==void 0?R.base:1}:null;return{kind:"camera",interpolationType:Qi,interpolationFactor:Vs.interpolationFactor.bind(void 0,Qi),zoomStops:R.stops.map(function(Fi){return Fi[0]}),evaluate:function(Fi){return z(R,L,Fi.zoom,j,ae)}}}return{kind:"source",evaluate:function(Fi,ca){var Ri=ca&&ca.properties?ca.properties[R.property]:void 0;return Ri===void 0?Hc(R.default,L.default):z(R,L,Ri,j,ae)}}}(this._parameters,this._specification))};function qu(h){var v=h.key,_=h.value,R=h.valueSpec||{},L=h.objectElementValidators||{},z=h.style,j=h.styleSpec,ae=[],Se=Oo(_);if(Se!=="object")return[new at(v,_,"object expected, "+Se+" found")];for(var He in _){var rt=He.split(".")[0],ht=R[rt]||R["*"],Mt=void 0;if(L[rt])Mt=L[rt];else if(R[rt])Mt=co;else if(L["*"])Mt=L["*"];else{if(!R["*"]){ae.push(new at(v,_[He],'unknown property "'+He+'"'));continue}Mt=co}ae=ae.concat(Mt({key:(v&&v+".")+He,value:_[He],valueSpec:ht,style:z,styleSpec:j,object:_,objectKey:He},_))}for(var Nt in R)L[Nt]||R[Nt].required&&R[Nt].default===void 0&&_[Nt]===void 0&&ae.push(new at(v,_,'missing required property "'+Nt+'"'));return ae}function gp(h){var v=h.value,_=h.valueSpec,R=h.style,L=h.styleSpec,z=h.key,j=h.arrayElementValidator||co;if(Oo(v)!=="array")return[new at(z,v,"array expected, "+Oo(v)+" found")];if(_.length&&v.length!==_.length)return[new at(z,v,"array length "+_.length+" expected, length "+v.length+" found")];if(_["min-length"]&&v.length<_["min-length"])return[new at(z,v,"array length at least "+_["min-length"]+" expected, length "+v.length+" found")];var ae={type:_.value,values:_.values};L.$version<7&&(ae.function=_.function),Oo(_.value)==="object"&&(ae=_.value);for(var Se=[],He=0;He<v.length;He++)Se=Se.concat(j({array:v,arrayIndex:He,value:v[He],valueSpec:ae,style:R,styleSpec:L,key:z+"["+He+"]"}));return Se}function Ld(h){var v=h.key,_=h.value,R=h.valueSpec,L=Oo(_);return L==="number"&&_!=_&&(L="NaN"),L!=="number"?[new at(v,_,"number expected, "+L+" found")]:"minimum"in R&&_<R.minimum?[new at(v,_,_+" is less than the minimum value "+R.minimum)]:"maximum"in R&&_>R.maximum?[new at(v,_,_+" is greater than the maximum value "+R.maximum)]:[]}function nd(h){var v,_,R,L=h.valueSpec,z=Dr(h.value.type),j={},ae=z!=="categorical"&&h.value.property===void 0,Se=!ae,He=Oo(h.value.stops)==="array"&&Oo(h.value.stops[0])==="array"&&Oo(h.value.stops[0][0])==="object",rt=qu({key:h.key,value:h.value,valueSpec:h.styleSpec.function,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(Nt){if(z==="identity")return[new at(Nt.key,Nt.value,'identity function may not have a "stops" property')];var er=[],ar=Nt.value;return er=er.concat(gp({key:Nt.key,value:ar,valueSpec:Nt.valueSpec,style:Nt.style,styleSpec:Nt.styleSpec,arrayElementValidator:ht})),Oo(ar)==="array"&&ar.length===0&&er.push(new at(Nt.key,ar,"array must have at least one stop")),er},default:function(Nt){return co({key:Nt.key,value:Nt.value,valueSpec:L,style:Nt.style,styleSpec:Nt.styleSpec})}}});return z==="identity"&&ae&&rt.push(new at(h.key,h.value,'missing required property "property"')),z==="identity"||h.value.stops||rt.push(new at(h.key,h.value,'missing required property "stops"')),z==="exponential"&&h.valueSpec.expression&&!Ku(h.valueSpec)&&rt.push(new at(h.key,h.value,"exponential functions not supported")),h.styleSpec.$version>=8&&(Se&&!Is(h.valueSpec)?rt.push(new at(h.key,h.value,"property functions not supported")):ae&&!ll(h.valueSpec)&&rt.push(new at(h.key,h.value,"zoom functions not supported"))),z!=="categorical"&&!He||h.value.property!==void 0||rt.push(new at(h.key,h.value,'"property" property is required')),rt;function ht(Nt){var er=[],ar=Nt.value,Mr=Nt.key;if(Oo(ar)!=="array")return[new at(Mr,ar,"array expected, "+Oo(ar)+" found")];if(ar.length!==2)return[new at(Mr,ar,"array length 2 expected, length "+ar.length+" found")];if(He){if(Oo(ar[0])!=="object")return[new at(Mr,ar,"object expected, "+Oo(ar[0])+" found")];if(ar[0].zoom===void 0)return[new at(Mr,ar,"object stop key must have zoom")];if(ar[0].value===void 0)return[new at(Mr,ar,"object stop key must have value")];if(R&&R>Dr(ar[0].zoom))return[new at(Mr,ar[0].zoom,"stop zoom values must appear in ascending order")];Dr(ar[0].zoom)!==R&&(R=Dr(ar[0].zoom),_=void 0,j={}),er=er.concat(qu({key:Mr+"[0]",value:ar[0],valueSpec:{zoom:{}},style:Nt.style,styleSpec:Nt.styleSpec,objectElementValidators:{zoom:Ld,value:Mt}}))}else er=er.concat(Mt({key:Mr+"[0]",value:ar[0],valueSpec:{},style:Nt.style,styleSpec:Nt.styleSpec},ar));return ah(Ft(ar[1]))?er.concat([new at(Mr+"[1]",ar[1],"expressions are not allowed in function stops.")]):er.concat(co({key:Mr+"[1]",value:ar[1],valueSpec:L,style:Nt.style,styleSpec:Nt.styleSpec}))}function Mt(Nt,er){var ar=Oo(Nt.value),Mr=Dr(Nt.value),_r=Nt.value!==null?Nt.value:er;if(v){if(ar!==v)return[new at(Nt.key,_r,ar+" stop domain type must match previous stop domain type "+v)]}else v=ar;if(ar!=="number"&&ar!=="string"&&ar!=="boolean")return[new at(Nt.key,_r,"stop domain value must be a number, string, or boolean")];if(ar!=="number"&&z!=="categorical"){var Ur="number expected, "+ar+" found";return Is(L)&&z===void 0&&(Ur+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new at(Nt.key,_r,Ur)]}return z!=="categorical"||ar!=="number"||isFinite(Mr)&&Math.floor(Mr)===Mr?z!=="categorical"&&ar==="number"&&_!==void 0&&Mr<_?[new at(Nt.key,_r,"stop domain values must appear in ascending order")]:(_=Mr,z==="categorical"&&Mr in j?[new at(Nt.key,_r,"stop domain values must be unique")]:(j[Mr]=!0,[])):[new at(Nt.key,_r,"integer expected, found "+Mr)]}}function jc(h){var v=(h.expressionContext==="property"?Ns:oh)(Ft(h.value),h.valueSpec);if(v.result==="error")return v.value.map(function(R){return new at(""+h.key+R.key,h.value,R.message)});var _=v.value.expression||v.value._styleExpression.expression;if(h.expressionContext==="property"&&h.propertyKey==="text-font"&&!_.outputDefined())return[new at(h.key,h.value,'Invalid data expression for "'+h.propertyKey+'". Output values must be contained as literals within the expression.')];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!Qs(_))return[new at(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!Qs(_))return[new at(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!Sl(_,["zoom","feature-state"]))return[new at(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!nc(_))return[new at(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function hf(h){var v=h.key,_=h.value,R=h.valueSpec,L=[];return Array.isArray(R.values)?R.values.indexOf(Dr(_))===-1&&L.push(new at(v,_,"expected one of ["+R.values.join(", ")+"], "+JSON.stringify(_)+" found")):Object.keys(R.values).indexOf(Dr(_))===-1&&L.push(new at(v,_,"expected one of ["+Object.keys(R.values).join(", ")+"], "+JSON.stringify(_)+" found")),L}function uh(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(var v=0,_=h.slice(1);v<_.length;v+=1){var R=_[v];if(!uh(R)&&typeof R!="boolean")return!1}return!0;default:return!0}}sc.deserialize=function(h){return new sc(h._parameters,h._specification)},sc.serialize=function(h){return{_parameters:h._parameters,_specification:h._specification}};var mp={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Pf(h){if(h==null)return{filter:function(){return!0},needGeometry:!1};uh(h)||(h=id(h));var v=oh(h,mp);if(v.result==="error")throw new Error(v.value.map(function(_){return _.key+": "+_.message}).join(", "));return{filter:function(_,R,L){return v.value.evaluate(_,R,{},L)},needGeometry:function _(R){if(!Array.isArray(R))return!1;if(R[0]==="within")return!0;for(var L=1;L<R.length;L++)if(_(R[L]))return!0;return!1}(h)}}function fm(h,v){return h<v?-1:h>v?1:0}function id(h){if(!h)return!0;var v,_=h[0];return h.length<=1?_!=="any":_==="=="?Ps(h[1],h[2],"=="):_==="!="?Bd(Ps(h[1],h[2],"==")):_==="<"||_===">"||_==="<="||_===">="?Ps(h[1],h[2],_):_==="any"?(v=h.slice(1),["any"].concat(v.map(id))):_==="all"?["all"].concat(h.slice(1).map(id)):_==="none"?["all"].concat(h.slice(1).map(id).map(Bd)):_==="in"?yp(h[1],h.slice(2)):_==="!in"?Bd(yp(h[1],h.slice(2))):_==="has"?Ph(h[1]):_==="!has"?Bd(Ph(h[1])):_!=="within"||h}function Ps(h,v,_){switch(h){case"$type":return["filter-type-"+_,v];case"$id":return["filter-id-"+_,v];default:return["filter-"+_,h,v]}}function yp(h,v){if(v.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",v]];case"$id":return["filter-id-in",["literal",v]];default:return v.length>200&&!v.some(function(_){return typeof _!=typeof v[0]})?["filter-in-large",h,["literal",v.sort(fm)]]:["filter-in-small",h,["literal",v]]}}function Ph(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function Bd(h){return["!",h]}function _p(h){return uh(Ft(h.value))?jc(mr({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function v(_){var R=_.value,L=_.key;if(Oo(R)!=="array")return[new at(L,R,"array expected, "+Oo(R)+" found")];var z,j=_.styleSpec,ae=[];if(R.length<1)return[new at(L,R,"filter array must have at least 1 element")];switch(ae=ae.concat(hf({key:L+"[0]",value:R[0],valueSpec:j.filter_operator,style:_.style,styleSpec:_.styleSpec})),Dr(R[0])){case"<":case"<=":case">":case">=":R.length>=2&&Dr(R[1])==="$type"&&ae.push(new at(L,R,'"$type" cannot be use with operator "'+R[0]+'"'));case"==":case"!=":R.length!==3&&ae.push(new at(L,R,'filter array for operator "'+R[0]+'" must have 3 elements'));case"in":case"!in":R.length>=2&&(z=Oo(R[1]))!=="string"&&ae.push(new at(L+"[1]",R[1],"string expected, "+z+" found"));for(var Se=2;Se<R.length;Se++)z=Oo(R[Se]),Dr(R[1])==="$type"?ae=ae.concat(hf({key:L+"["+Se+"]",value:R[Se],valueSpec:j.geometry_type,style:_.style,styleSpec:_.styleSpec})):z!=="string"&&z!=="number"&&z!=="boolean"&&ae.push(new at(L+"["+Se+"]",R[Se],"string, number, or boolean expected, "+z+" found"));break;case"any":case"all":case"none":for(var He=1;He<R.length;He++)ae=ae.concat(v({key:L+"["+He+"]",value:R[He],style:_.style,styleSpec:_.styleSpec}));break;case"has":case"!has":z=Oo(R[1]),R.length!==2?ae.push(new at(L,R,'filter array for "'+R[0]+'" operator must have 2 elements')):z!=="string"&&ae.push(new at(L+"[1]",R[1],"string expected, "+z+" found"));break;case"within":z=Oo(R[1]),R.length!==2?ae.push(new at(L,R,'filter array for "'+R[0]+'" operator must have 2 elements')):z!=="object"&&ae.push(new at(L+"[1]",R[1],"object expected, "+z+" found"))}return ae}(h)}function xp(h,v){var _=h.key,R=h.style,L=h.styleSpec,z=h.value,j=h.objectKey,ae=L[v+"_"+h.layerType];if(!ae)return[];var Se=j.match(/^(.*)-transition$/);if(v==="paint"&&Se&&ae[Se[1]]&&ae[Se[1]].transition)return co({key:_,value:z,valueSpec:L.transition,style:R,styleSpec:L});var He,rt=h.valueSpec||ae[j];if(!rt)return[new at(_,z,'unknown property "'+j+'"')];if(Oo(z)==="string"&&Is(rt)&&!rt.tokens&&(He=/^{([^}]+)}$/.exec(z)))return[new at(_,z,'"'+j+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(He[1])+" }`.")];var ht=[];return h.layerType==="symbol"&&(j==="text-field"&&R&&!R.glyphs&&ht.push(new at(_,z,'use of "text-field" requires a style "glyphs" property')),j==="text-font"&&dp(Ft(z))&&Dr(z.type)==="identity"&&ht.push(new at(_,z,'"text-font" does not support identity functions'))),ht.concat(co({key:h.key,value:z,valueSpec:rt,style:R,styleSpec:L,expressionContext:"property",propertyType:v,propertyKey:j}))}function yv(h){return xp(h,"paint")}function Wc(h){return xp(h,"layout")}function Nd(h){var v=[],_=h.value,R=h.key,L=h.style,z=h.styleSpec;_.type||_.ref||v.push(new at(R,_,'either "type" or "ref" is required'));var j,ae=Dr(_.type),Se=Dr(_.ref);if(_.id)for(var He=Dr(_.id),rt=0;rt<h.arrayIndex;rt++){var ht=L.layers[rt];Dr(ht.id)===He&&v.push(new at(R,_.id,'duplicate layer id "'+_.id+'", previously used at line '+ht.id.__line__))}if("ref"in _)["type","source","source-layer","filter","layout"].forEach(function(er){er in _&&v.push(new at(R,_[er],'"'+er+'" is prohibited for ref layers'))}),L.layers.forEach(function(er){Dr(er.id)===Se&&(j=er)}),j?j.ref?v.push(new at(R,_.ref,"ref cannot reference another ref layer")):ae=Dr(j.type):v.push(new at(R,_.ref,'ref layer "'+Se+'" not found'));else if(ae!=="background")if(_.source){var Mt=L.sources&&L.sources[_.source],Nt=Mt&&Dr(Mt.type);Mt?Nt==="vector"&&ae==="raster"?v.push(new at(R,_.source,'layer "'+_.id+'" requires a raster source')):Nt==="raster"&&ae!=="raster"?v.push(new at(R,_.source,'layer "'+_.id+'" requires a vector source')):Nt!=="vector"||_["source-layer"]?Nt==="raster-dem"&&ae!=="hillshade"?v.push(new at(R,_.source,"raster-dem source can only be used with layer type 'hillshade'.")):ae!=="line"||!_.paint||!_.paint["line-gradient"]||Nt==="geojson"&&Mt.lineMetrics||v.push(new at(R,_,'layer "'+_.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):v.push(new at(R,_,'layer "'+_.id+'" must specify a "source-layer"')):v.push(new at(R,_.source,'source "'+_.source+'" not found'))}else v.push(new at(R,_,'missing required property "source"'));return v=v.concat(qu({key:R,value:_,valueSpec:z.layer,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return co({key:R+".type",value:_.type,valueSpec:z.layer.type,style:h.style,styleSpec:h.styleSpec,object:_,objectKey:"type"})},filter:_p,layout:function(er){return qu({layer:_,key:er.key,value:er.value,style:er.style,styleSpec:er.styleSpec,objectElementValidators:{"*":function(ar){return Wc(mr({layerType:ae},ar))}}})},paint:function(er){return qu({layer:_,key:er.key,value:er.value,style:er.style,styleSpec:er.styleSpec,objectElementValidators:{"*":function(ar){return yv(mr({layerType:ae},ar))}}})}}}))}function lh(h){var v=h.value,_=h.key,R=Oo(v);return R!=="string"?[new at(_,v,"string expected, "+R+" found")]:[]}var rs={promoteId:function(h){var v=h.key,_=h.value;if(Oo(_)==="string")return lh({key:v,value:_});var R=[];for(var L in _)R.push.apply(R,lh({key:v+"."+L,value:_[L]}));return R}};function ch(h){var v=h.value,_=h.key,R=h.styleSpec,L=h.style;if(!v.type)return[new at(_,v,'"type" is required')];var z,j=Dr(v.type);switch(j){case"vector":case"raster":case"raster-dem":return qu({key:_,value:v,valueSpec:R["source_"+j.replace("-","_")],style:h.style,styleSpec:R,objectElementValidators:rs});case"geojson":if(z=qu({key:_,value:v,valueSpec:R.source_geojson,style:L,styleSpec:R,objectElementValidators:rs}),v.cluster)for(var ae in v.clusterProperties){var Se=v.clusterProperties[ae],He=Se[0],rt=typeof He=="string"?[He,["accumulated"],["get",ae]]:He;z.push.apply(z,jc({key:_+"."+ae+".map",value:Se[1],expressionContext:"cluster-map"})),z.push.apply(z,jc({key:_+"."+ae+".reduce",value:rt,expressionContext:"cluster-reduce"}))}return z;case"video":return qu({key:_,value:v,valueSpec:R.source_video,style:L,styleSpec:R});case"image":return qu({key:_,value:v,valueSpec:R.source_image,style:L,styleSpec:R});case"canvas":return[new at(_,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return hf({key:_+".type",value:v.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:L,styleSpec:R})}}function Ac(h){var v=h.value,_=h.styleSpec,R=_.light,L=h.style,z=[],j=Oo(v);if(v===void 0)return z;if(j!=="object")return z.concat([new at("light",v,"object expected, "+j+" found")]);for(var ae in v){var Se=ae.match(/^(.*)-transition$/);z=z.concat(Se&&R[Se[1]]&&R[Se[1]].transition?co({key:ae,value:v[ae],valueSpec:_.transition,style:L,styleSpec:_}):R[ae]?co({key:ae,value:v[ae],valueSpec:R[ae],style:L,styleSpec:_}):[new at(ae,v[ae],'unknown property "'+ae+'"')])}return z}var uc={"*":function(){return[]},array:gp,boolean:function(h){var v=h.value,_=h.key,R=Oo(v);return R!=="boolean"?[new at(_,v,"boolean expected, "+R+" found")]:[]},number:Ld,color:function(h){var v=h.key,_=h.value,R=Oo(_);return R!=="string"?[new at(v,_,"color expected, "+R+" found")]:_i(_)===null?[new at(v,_,'color expected, "'+_+'" found')]:[]},constants:Rt,enum:hf,filter:_p,function:nd,layer:Nd,object:qu,source:ch,light:Ac,string:lh,formatted:function(h){return lh(h).length===0?[]:jc(h)},resolvedImage:function(h){return lh(h).length===0?[]:jc(h)}};function co(h){var v=h.value,_=h.valueSpec,R=h.styleSpec;return _.expression&&dp(Dr(v))?nd(h):_.expression&&ah(Ft(v))?jc(h):_.type&&uc[_.type]?uc[_.type](h):qu(mr({},h,{valueSpec:_.type?R[_.type]:_}))}function Xo(h){var v=h.value,_=h.key,R=lh(h);return R.length||(v.indexOf("{fontstack}")===-1&&R.push(new at(_,v,'"glyphs" url must include a "{fontstack}" token')),v.indexOf("{range}")===-1&&R.push(new at(_,v,'"glyphs" url must include a "{range}" token'))),R}function mo(h,v){v===void 0&&(v=kt);var _=[];return _=_.concat(co({key:"",value:h,valueSpec:v.$root,styleSpec:v,style:h,objectElementValidators:{glyphs:Xo,"*":function(){return[]}}})),h.constants&&(_=_.concat(Rt({key:"constants",value:h.constants,style:h,styleSpec:v}))),ad(_)}function ad(h){return[].concat(h).sort(function(v,_){return v.line-_.line})}function Of(h){return function(){for(var v=[],_=arguments.length;_--;)v[_]=arguments[_];return ad(h.apply(this,v))}}mo.source=Of(ch),mo.light=Of(Ac),mo.layer=Of(Nd),mo.filter=Of(_p),mo.paintProperty=Of(yv),mo.layoutProperty=Of(Wc);var bp=mo,_v=bp.light,ga=bp.paintProperty,Sp=bp.layoutProperty;function Gc(h,v){var _=!1;if(v&&v.length)for(var R=0,L=v;R<L.length;R+=1)h.fire(new gr(new Error(L[R].message))),_=!0;return _}var Hs=ws;function ws(h,v,_){var R=this.cells=[];if(h instanceof ArrayBuffer){this.arrayBuffer=h;var L=new Int32Array(this.arrayBuffer);h=L[0],this.d=(v=L[1])+2*(_=L[2]);for(var z=0;z<this.d*this.d;z++){var j=L[3+z],ae=L[3+z+1];R.push(j===ae?null:L.subarray(j,ae))}var Se=L[3+R.length+1];this.keys=L.subarray(L[3+R.length],Se),this.bboxes=L.subarray(Se),this.insert=this._insertReadonly}else{this.d=v+2*_;for(var He=0;He<this.d*this.d;He++)R.push([]);this.keys=[],this.bboxes=[]}this.n=v,this.extent=h,this.padding=_,this.scale=v/h,this.uid=0;var rt=_/v*h;this.min=-rt,this.max=h+rt}ws.prototype.insert=function(h,v,_,R,L){this._forEachCell(v,_,R,L,this._insertCell,this.uid++),this.keys.push(h),this.bboxes.push(v),this.bboxes.push(_),this.bboxes.push(R),this.bboxes.push(L)},ws.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ws.prototype._insertCell=function(h,v,_,R,L,z){this.cells[L].push(z)},ws.prototype.query=function(h,v,_,R,L){var z=this.min,j=this.max;if(h<=z&&v<=z&&j<=_&&j<=R&&!L)return Array.prototype.slice.call(this.keys);var ae=[];return this._forEachCell(h,v,_,R,this._queryCell,ae,{},L),ae},ws.prototype._queryCell=function(h,v,_,R,L,z,j,ae){var Se=this.cells[L];if(Se!==null)for(var He=this.keys,rt=this.bboxes,ht=0;ht<Se.length;ht++){var Mt=Se[ht];if(j[Mt]===void 0){var Nt=4*Mt;(ae?ae(rt[Nt+0],rt[Nt+1],rt[Nt+2],rt[Nt+3]):h<=rt[Nt+2]&&v<=rt[Nt+3]&&_>=rt[Nt+0]&&R>=rt[Nt+1])?(j[Mt]=!0,z.push(He[Mt])):j[Mt]=!1}}},ws.prototype._forEachCell=function(h,v,_,R,L,z,j,ae){for(var Se=this._convertToCellCoord(h),He=this._convertToCellCoord(v),rt=this._convertToCellCoord(_),ht=this._convertToCellCoord(R),Mt=Se;Mt<=rt;Mt++)for(var Nt=He;Nt<=ht;Nt++){var er=this.d*Nt+Mt;if((!ae||ae(this._convertFromCellCoord(Mt),this._convertFromCellCoord(Nt),this._convertFromCellCoord(Mt+1),this._convertFromCellCoord(Nt+1)))&&L.call(this,h,v,_,R,er,z,j,ae))return}},ws.prototype._convertFromCellCoord=function(h){return(h-this.padding)/this.scale},ws.prototype._convertToCellCoord=function(h){return Math.max(0,Math.min(this.d-1,Math.floor(h*this.scale)+this.padding))},ws.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var h=this.cells,v=3+this.cells.length+1+1,_=0,R=0;R<this.cells.length;R++)_+=this.cells[R].length;var L=new Int32Array(v+_+this.keys.length+this.bboxes.length);L[0]=this.extent,L[1]=this.n,L[2]=this.padding;for(var z=v,j=0;j<h.length;j++){var ae=h[j];L[3+j]=z,L.set(ae,z),z+=ae.length}return L[3+h.length]=z,L.set(this.keys,z),L[3+h.length+1]=z+=this.keys.length,L.set(this.bboxes,z),z+=this.bboxes.length,L.buffer};var fh=ee.ImageData,od=ee.ImageBitmap,Os={};function zi(h,v,_){_===void 0&&(_={}),Object.defineProperty(v,"_classRegistryKey",{value:h,writeable:!1}),Os[h]={klass:v,omit:_.omit||[],shallow:_.shallow||[]}}for(var ju in zi("Object",Object),Hs.serialize=function(h,v){var _=h.toArrayBuffer();return v&&v.push(_),{buffer:_}},Hs.deserialize=function(h){return new Hs(h.buffer)},zi("Grid",Hs),zi("Color",na),zi("Error",Error),zi("ResolvedImage",Io),zi("StylePropertyFunction",sc),zi("StyleExpression",ff,{omit:["_evaluator"]}),zi("ZoomDependentExpression",sh),zi("ZoomConstantExpression",If),zi("CompoundExpression",ro,{omit:["_evaluate"]}),cr)cr[ju]._classRegistryKey||zi("Expression_"+ju,cr[ju]);function Xc(h){return h&&typeof ArrayBuffer!="undefined"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function kf(h){return od&&h instanceof od}function cl(h,v){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp)return h;if(Xc(h)||kf(h))return v&&v.push(h),h;if(ArrayBuffer.isView(h)){var _=h;return v&&v.push(_.buffer),_}if(h instanceof fh)return v&&v.push(h.data.buffer),h;if(Array.isArray(h)){for(var R=[],L=0,z=h;L<z.length;L+=1)R.push(cl(z[L],v));return R}if(typeof h=="object"){var j=h.constructor,ae=j._classRegistryKey;if(!ae)throw new Error("can't serialize object of unregistered class");var Se=j.serialize?j.serialize(h,v):{};if(!j.serialize){for(var He in h)if(h.hasOwnProperty(He)&&!(Os[ae].omit.indexOf(He)>=0)){var rt=h[He];Se[He]=Os[ae].shallow.indexOf(He)>=0?rt:cl(rt,v)}h instanceof Error&&(Se.message=h.message)}if(Se.$name)throw new Error("$name property is reserved for worker serialization logic.");return ae!=="Object"&&(Se.$name=ae),Se}throw new Error("can't serialize object of type "+typeof h)}function Vo(h){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||Xc(h)||kf(h)||ArrayBuffer.isView(h)||h instanceof fh)return h;if(Array.isArray(h))return h.map(Vo);if(typeof h=="object"){var v=h.$name||"Object",_=Os[v].klass;if(!_)throw new Error("can't deserialize unregistered class "+v);if(_.deserialize)return _.deserialize(h);for(var R=Object.create(_.prototype),L=0,z=Object.keys(h);L<z.length;L+=1){var j=z[L];if(j!=="$name"){var ae=h[j];R[j]=Os[v].shallow.indexOf(j)>=0?ae:Vo(ae)}}return R}throw new Error("can't deserialize object of type "+typeof h)}var fu=function(){this.first=!0};fu.prototype.update=function(h,v){var _=Math.floor(h);return this.first?(this.first=!1,this.lastIntegerZoom=_,this.lastIntegerZoomTime=0,this.lastZoom=h,this.lastFloorZoom=_,!0):(this.lastFloorZoom>_?(this.lastIntegerZoom=_+1,this.lastIntegerZoomTime=v):this.lastFloorZoom<_&&(this.lastIntegerZoom=_,this.lastIntegerZoomTime=v),h!==this.lastZoom&&(this.lastZoom=h,this.lastFloorZoom=_,!0))};var Si={"Latin-1 Supplement":function(h){return h>=128&&h<=255},Arabic:function(h){return h>=1536&&h<=1791},"Arabic Supplement":function(h){return h>=1872&&h<=1919},"Arabic Extended-A":function(h){return h>=2208&&h<=2303},"Hangul Jamo":function(h){return h>=4352&&h<=4607},"Unified Canadian Aboriginal Syllabics":function(h){return h>=5120&&h<=5759},Khmer:function(h){return h>=6016&&h<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(h){return h>=6320&&h<=6399},"General Punctuation":function(h){return h>=8192&&h<=8303},"Letterlike Symbols":function(h){return h>=8448&&h<=8527},"Number Forms":function(h){return h>=8528&&h<=8591},"Miscellaneous Technical":function(h){return h>=8960&&h<=9215},"Control Pictures":function(h){return h>=9216&&h<=9279},"Optical Character Recognition":function(h){return h>=9280&&h<=9311},"Enclosed Alphanumerics":function(h){return h>=9312&&h<=9471},"Geometric Shapes":function(h){return h>=9632&&h<=9727},"Miscellaneous Symbols":function(h){return h>=9728&&h<=9983},"Miscellaneous Symbols and Arrows":function(h){return h>=11008&&h<=11263},"CJK Radicals Supplement":function(h){return h>=11904&&h<=12031},"Kangxi Radicals":function(h){return h>=12032&&h<=12255},"Ideographic Description Characters":function(h){return h>=12272&&h<=12287},"CJK Symbols and Punctuation":function(h){return h>=12288&&h<=12351},Hiragana:function(h){return h>=12352&&h<=12447},Katakana:function(h){return h>=12448&&h<=12543},Bopomofo:function(h){return h>=12544&&h<=12591},"Hangul Compatibility Jamo":function(h){return h>=12592&&h<=12687},Kanbun:function(h){return h>=12688&&h<=12703},"Bopomofo Extended":function(h){return h>=12704&&h<=12735},"CJK Strokes":function(h){return h>=12736&&h<=12783},"Katakana Phonetic Extensions":function(h){return h>=12784&&h<=12799},"Enclosed CJK Letters and Months":function(h){return h>=12800&&h<=13055},"CJK Compatibility":function(h){return h>=13056&&h<=13311},"CJK Unified Ideographs Extension A":function(h){return h>=13312&&h<=19903},"Yijing Hexagram Symbols":function(h){return h>=19904&&h<=19967},"CJK Unified Ideographs":function(h){return h>=19968&&h<=40959},"Yi Syllables":function(h){return h>=40960&&h<=42127},"Yi Radicals":function(h){return h>=42128&&h<=42191},"Hangul Jamo Extended-A":function(h){return h>=43360&&h<=43391},"Hangul Syllables":function(h){return h>=44032&&h<=55215},"Hangul Jamo Extended-B":function(h){return h>=55216&&h<=55295},"Private Use Area":function(h){return h>=57344&&h<=63743},"CJK Compatibility Ideographs":function(h){return h>=63744&&h<=64255},"Arabic Presentation Forms-A":function(h){return h>=64336&&h<=65023},"Vertical Forms":function(h){return h>=65040&&h<=65055},"CJK Compatibility Forms":function(h){return h>=65072&&h<=65103},"Small Form Variants":function(h){return h>=65104&&h<=65135},"Arabic Presentation Forms-B":function(h){return h>=65136&&h<=65279},"Halfwidth and Fullwidth Forms":function(h){return h>=65280&&h<=65519}};function Zl(h){for(var v=0,_=h;v<_.length;v+=1)if(hh(_[v].charCodeAt(0)))return!0;return!1}function hh(h){return!(h!==746&&h!==747&&(h<4352||!(Si["Bopomofo Extended"](h)||Si.Bopomofo(h)||Si["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||Si["CJK Compatibility Ideographs"](h)||Si["CJK Compatibility"](h)||Si["CJK Radicals Supplement"](h)||Si["CJK Strokes"](h)||!(!Si["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||Si["CJK Unified Ideographs Extension A"](h)||Si["CJK Unified Ideographs"](h)||Si["Enclosed CJK Letters and Months"](h)||Si["Hangul Compatibility Jamo"](h)||Si["Hangul Jamo Extended-A"](h)||Si["Hangul Jamo Extended-B"](h)||Si["Hangul Jamo"](h)||Si["Hangul Syllables"](h)||Si.Hiragana(h)||Si["Ideographic Description Characters"](h)||Si.Kanbun(h)||Si["Kangxi Radicals"](h)||Si["Katakana Phonetic Extensions"](h)||Si.Katakana(h)&&h!==12540||!(!Si["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!Si["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||Si["Unified Canadian Aboriginal Syllabics"](h)||Si["Unified Canadian Aboriginal Syllabics Extended"](h)||Si["Vertical Forms"](h)||Si["Yijing Hexagram Symbols"](h)||Si["Yi Syllables"](h)||Si["Yi Radicals"](h))))}function Oh(h){return!(hh(h)||function(v){return!!(Si["Latin-1 Supplement"](v)&&(v===167||v===169||v===174||v===177||v===188||v===189||v===190||v===215||v===247)||Si["General Punctuation"](v)&&(v===8214||v===8224||v===8225||v===8240||v===8241||v===8251||v===8252||v===8258||v===8263||v===8264||v===8265||v===8273)||Si["Letterlike Symbols"](v)||Si["Number Forms"](v)||Si["Miscellaneous Technical"](v)&&(v>=8960&&v<=8967||v>=8972&&v<=8991||v>=8996&&v<=9e3||v===9003||v>=9085&&v<=9114||v>=9150&&v<=9165||v===9167||v>=9169&&v<=9179||v>=9186&&v<=9215)||Si["Control Pictures"](v)&&v!==9251||Si["Optical Character Recognition"](v)||Si["Enclosed Alphanumerics"](v)||Si["Geometric Shapes"](v)||Si["Miscellaneous Symbols"](v)&&!(v>=9754&&v<=9759)||Si["Miscellaneous Symbols and Arrows"](v)&&(v>=11026&&v<=11055||v>=11088&&v<=11097||v>=11192&&v<=11243)||Si["CJK Symbols and Punctuation"](v)||Si.Katakana(v)||Si["Private Use Area"](v)||Si["CJK Compatibility Forms"](v)||Si["Small Form Variants"](v)||Si["Halfwidth and Fullwidth Forms"](v)||v===8734||v===8756||v===8757||v>=9984&&v<=10087||v>=10102&&v<=10131||v===65532||v===65533)}(h))}function Tc(h){return h>=1424&&h<=2303||Si["Arabic Presentation Forms-A"](h)||Si["Arabic Presentation Forms-B"](h)}function bu(h,v){return!(!v&&Tc(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||Si.Khmer(h))}function Ep(h){for(var v=0,_=h;v<_.length;v+=1)if(Tc(_[v].charCodeAt(0)))return!0;return!1}var Mc=null,eu="unavailable",fl=null,xv=function(h){h&&typeof h=="string"&&h.indexOf("NetworkError")>-1&&(eu="error"),Mc&&Mc(h)};function kh(){Fh.fire(new jt("pluginStateChange",{pluginStatus:eu,pluginURL:fl}))}var Fh=new Cr,zd=function(){return eu},lc=function(){if(eu!=="deferred"||!fl)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");eu="loading",kh(),fl&&qn({url:fl},function(h){h?xv(h):(eu="loaded",kh())})},tu={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return eu==="loaded"||tu.applyArabicShaping!=null},isLoading:function(){return eu==="loading"},setState:function(h){eu=h.pluginStatus,fl=h.pluginURL},isParsed:function(){return tu.applyArabicShaping!=null&&tu.processBidirectionalText!=null&&tu.processStyledBidirectionalText!=null},getPluginURL:function(){return fl}},$a=function(h,v){this.zoom=h,v?(this.now=v.now,this.fadeDuration=v.fadeDuration,this.zoomHistory=v.zoomHistory,this.transition=v.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new fu,this.transition={})};$a.prototype.isSupportedScript=function(h){return function(v,_){for(var R=0,L=v;R<L.length;R+=1)if(!bu(L[R].charCodeAt(0),_))return!1;return!0}(h,tu.isLoaded())},$a.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},$a.prototype.getCrossfadeParameters=function(){var h=this.zoom,v=h-Math.floor(h),_=this.crossFadingFactor();return h>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:v+(1-v)*_}:{fromScale:.5,toScale:1,t:1-(1-_)*v}};var Cs=function(h,v){this.property=h,this.value=v,this.expression=function(_,R){if(dp(_))return new sc(_,R);if(ah(_)){var L=Ns(_,R);if(L.result==="error")throw new Error(L.value.map(function(j){return j.key+": "+j.message}).join(", "));return L.value}var z=_;return typeof _=="string"&&R.type==="color"&&(z=na.parse(_)),{kind:"constant",evaluate:function(){return z}}}(v===void 0?h.specification.default:v,h.specification)};Cs.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Cs.prototype.possiblyEvaluate=function(h,v,_){return this.property.possiblyEvaluate(this,h,v,_)};var Ql=function(h){this.property=h,this.value=new Cs(h,void 0)};Ql.prototype.transitioned=function(h,v){return new Ff(this.property,this.value,v,E({},h.transition,this.transition),h.now)},Ql.prototype.untransitioned=function(){return new Ff(this.property,this.value,null,{},0)};var Wu=function(h){this._properties=h,this._values=Object.create(h.defaultTransitionablePropertyValues)};Wu.prototype.getValue=function(h){return be(this._values[h].value.value)},Wu.prototype.setValue=function(h,v){this._values.hasOwnProperty(h)||(this._values[h]=new Ql(this._values[h].property)),this._values[h].value=new Cs(this._values[h].property,v===null?void 0:be(v))},Wu.prototype.getTransition=function(h){return be(this._values[h].transition)},Wu.prototype.setTransition=function(h,v){this._values.hasOwnProperty(h)||(this._values[h]=new Ql(this._values[h].property)),this._values[h].transition=be(v)||void 0},Wu.prototype.serialize=function(){for(var h={},v=0,_=Object.keys(this._values);v<_.length;v+=1){var R=_[v],L=this.getValue(R);L!==void 0&&(h[R]=L);var z=this.getTransition(R);z!==void 0&&(h[R+"-transition"]=z)}return h},Wu.prototype.transitioned=function(h,v){for(var _=new Rc(this._properties),R=0,L=Object.keys(this._values);R<L.length;R+=1){var z=L[R];_._values[z]=this._values[z].transitioned(h,v._values[z])}return _},Wu.prototype.untransitioned=function(){for(var h=new Rc(this._properties),v=0,_=Object.keys(this._values);v<_.length;v+=1){var R=_[v];h._values[R]=this._values[R].untransitioned()}return h};var Ff=function(h,v,_,R,L){this.property=h,this.value=v,this.begin=L+R.delay||0,this.end=this.begin+R.duration||0,h.specification.transition&&(R.delay||R.duration)&&(this.prior=_)};Ff.prototype.possiblyEvaluate=function(h,v,_){var R=h.now||0,L=this.value.possiblyEvaluate(h,v,_),z=this.prior;if(z){if(R>this.end)return this.prior=null,L;if(this.value.isDataDriven())return this.prior=null,L;if(R<this.begin)return z.possiblyEvaluate(h,v,_);var j=(R-this.begin)/(this.end-this.begin);return this.property.interpolate(z.possiblyEvaluate(h,v,_),L,function(ae){if(ae<=0)return 0;if(ae>=1)return 1;var Se=ae*ae,He=Se*ae;return 4*(ae<.5?He:3*(ae-Se)+He-.75)}(j))}return L};var Rc=function(h){this._properties=h,this._values=Object.create(h.defaultTransitioningPropertyValues)};Rc.prototype.possiblyEvaluate=function(h,v,_){for(var R=new Dh(this._properties),L=0,z=Object.keys(this._values);L<z.length;L+=1){var j=z[L];R._values[j]=this._values[j].possiblyEvaluate(h,v,_)}return R},Rc.prototype.hasTransition=function(){for(var h=0,v=Object.keys(this._values);h<v.length;h+=1)if(this._values[v[h]].prior)return!0;return!1};var Qu=function(h){this._properties=h,this._values=Object.create(h.defaultPropertyValues)};Qu.prototype.getValue=function(h){return be(this._values[h].value)},Qu.prototype.setValue=function(h,v){this._values[h]=new Cs(this._values[h].property,v===null?void 0:be(v))},Qu.prototype.serialize=function(){for(var h={},v=0,_=Object.keys(this._values);v<_.length;v+=1){var R=_[v],L=this.getValue(R);L!==void 0&&(h[R]=L)}return h},Qu.prototype.possiblyEvaluate=function(h,v,_){for(var R=new Dh(this._properties),L=0,z=Object.keys(this._values);L<z.length;L+=1){var j=z[L];R._values[j]=this._values[j].possiblyEvaluate(h,v,_)}return R};var Su=function(h,v,_){this.property=h,this.value=v,this.parameters=_};Su.prototype.isConstant=function(){return this.value.kind==="constant"},Su.prototype.constantOr=function(h){return this.value.kind==="constant"?this.value.value:h},Su.prototype.evaluate=function(h,v,_,R){return this.property.evaluate(this.value,this.parameters,h,v,_,R)};var Dh=function(h){this._properties=h,this._values=Object.create(h.defaultPossiblyEvaluatedValues)};Dh.prototype.get=function(h){return this._values[h]};var ea=function(h){this.specification=h};ea.prototype.possiblyEvaluate=function(h,v){return h.expression.evaluate(v)},ea.prototype.interpolate=function(h,v,_){var R=bc[this.specification.type];return R?R(h,v,_):h};var Ei=function(h,v){this.specification=h,this.overrides=v};Ei.prototype.possiblyEvaluate=function(h,v,_,R){return new Su(this,h.expression.kind==="constant"||h.expression.kind==="camera"?{kind:"constant",value:h.expression.evaluate(v,null,{},_,R)}:h.expression,v)},Ei.prototype.interpolate=function(h,v,_){if(h.value.kind!=="constant"||v.value.kind!=="constant")return h;if(h.value.value===void 0||v.value.value===void 0)return new Su(this,{kind:"constant",value:void 0},h.parameters);var R=bc[this.specification.type];return R?new Su(this,{kind:"constant",value:R(h.value.value,v.value.value,_)},h.parameters):h},Ei.prototype.evaluate=function(h,v,_,R,L,z){return h.kind==="constant"?h.value:h.evaluate(v,_,R,L,z)};var wl=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.possiblyEvaluate=function(_,R,L,z){if(_.value===void 0)return new Su(this,{kind:"constant",value:void 0},R);if(_.expression.kind==="constant"){var j=_.expression.evaluate(R,null,{},L,z),ae=_.property.specification.type==="resolvedImage"&&typeof j!="string"?j.name:j,Se=this._calculate(ae,ae,ae,R);return new Su(this,{kind:"constant",value:Se},R)}if(_.expression.kind==="camera"){var He=this._calculate(_.expression.evaluate({zoom:R.zoom-1}),_.expression.evaluate({zoom:R.zoom}),_.expression.evaluate({zoom:R.zoom+1}),R);return new Su(this,{kind:"constant",value:He},R)}return new Su(this,_.expression,R)},v.prototype.evaluate=function(_,R,L,z,j,ae){if(_.kind==="source"){var Se=_.evaluate(R,L,z,j,ae);return this._calculate(Se,Se,Se,R)}return _.kind==="composite"?this._calculate(_.evaluate({zoom:Math.floor(R.zoom)-1},L,z),_.evaluate({zoom:Math.floor(R.zoom)},L,z),_.evaluate({zoom:Math.floor(R.zoom)+1},L,z),R):_.value},v.prototype._calculate=function(_,R,L,z){return z.zoom>z.zoomHistory.lastIntegerZoom?{from:_,to:R}:{from:L,to:R}},v.prototype.interpolate=function(_){return _},v}(Ei),Ju=function(h){this.specification=h};Ju.prototype.possiblyEvaluate=function(h,v,_,R){if(h.value!==void 0){if(h.expression.kind==="constant"){var L=h.expression.evaluate(v,null,{},_,R);return this._calculate(L,L,L,v)}return this._calculate(h.expression.evaluate(new $a(Math.floor(v.zoom-1),v)),h.expression.evaluate(new $a(Math.floor(v.zoom),v)),h.expression.evaluate(new $a(Math.floor(v.zoom+1),v)),v)}},Ju.prototype._calculate=function(h,v,_,R){return R.zoom>R.zoomHistory.lastIntegerZoom?{from:h,to:v}:{from:_,to:v}},Ju.prototype.interpolate=function(h){return h};var Gu=function(h){this.specification=h};Gu.prototype.possiblyEvaluate=function(h,v,_,R){return!!h.expression.evaluate(v,null,{},_,R)},Gu.prototype.interpolate=function(){return!1};var As=function(h){for(var v in this.properties=h,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],h){var _=h[v];_.specification.overridable&&this.overridableProperties.push(v);var R=this.defaultPropertyValues[v]=new Cs(_,void 0),L=this.defaultTransitionablePropertyValues[v]=new Ql(_);this.defaultTransitioningPropertyValues[v]=L.untransitioned(),this.defaultPossiblyEvaluatedValues[v]=R.possiblyEvaluate({})}};zi("DataDrivenProperty",Ei),zi("DataConstantProperty",ea),zi("CrossFadedDataDrivenProperty",wl),zi("CrossFadedProperty",Ju),zi("ColorRampProperty",Gu);var cc=function(h){function v(_,R){if(h.call(this),this.id=_.id,this.type=_.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},_.type!=="custom"&&(this.metadata=(_=_).metadata,this.minzoom=_.minzoom,this.maxzoom=_.maxzoom,_.type!=="background"&&(this.source=_.source,this.sourceLayer=_["source-layer"],this.filter=_.filter),R.layout&&(this._unevaluatedLayout=new Qu(R.layout)),R.paint)){for(var L in this._transitionablePaint=new Wu(R.paint),_.paint)this.setPaintProperty(L,_.paint[L],{validate:!1});for(var z in _.layout)this.setLayoutProperty(z,_.layout[z],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Dh(R.paint)}}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},v.prototype.getLayoutProperty=function(_){return _==="visibility"?this.visibility:this._unevaluatedLayout.getValue(_)},v.prototype.setLayoutProperty=function(_,R,L){L===void 0&&(L={}),R!=null&&this._validate(Sp,"layers."+this.id+".layout."+_,_,R,L)||(_!=="visibility"?this._unevaluatedLayout.setValue(_,R):this.visibility=R)},v.prototype.getPaintProperty=function(_){return tt(_,"-transition")?this._transitionablePaint.getTransition(_.slice(0,-11)):this._transitionablePaint.getValue(_)},v.prototype.setPaintProperty=function(_,R,L){if(L===void 0&&(L={}),R!=null&&this._validate(ga,"layers."+this.id+".paint."+_,_,R,L))return!1;if(tt(_,"-transition"))return this._transitionablePaint.setTransition(_.slice(0,-11),R||void 0),!1;var z=this._transitionablePaint._values[_],j=z.property.specification["property-type"]==="cross-faded-data-driven",ae=z.value.isDataDriven(),Se=z.value;this._transitionablePaint.setValue(_,R),this._handleSpecialPaintPropertyUpdate(_);var He=this._transitionablePaint._values[_].value;return He.isDataDriven()||ae||j||this._handleOverridablePaintPropertyUpdate(_,Se,He)},v.prototype._handleSpecialPaintPropertyUpdate=function(_){},v.prototype._handleOverridablePaintPropertyUpdate=function(_,R,L){return!1},v.prototype.isHidden=function(_){return!!(this.minzoom&&_<this.minzoom)||!!(this.maxzoom&&_>=this.maxzoom)||this.visibility==="none"},v.prototype.updateTransitions=function(_){this._transitioningPaint=this._transitionablePaint.transitioned(_,this._transitioningPaint)},v.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},v.prototype.recalculate=function(_,R){_.getCrossfadeParameters&&(this._crossfadeParameters=_.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(_,void 0,R)),this.paint=this._transitioningPaint.possiblyEvaluate(_,void 0,R)},v.prototype.serialize=function(){var _={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(_.layout=_.layout||{},_.layout.visibility=this.visibility),ge(_,function(R,L){return!(R===void 0||L==="layout"&&!Object.keys(R).length||L==="paint"&&!Object.keys(R).length)})},v.prototype._validate=function(_,R,L,z,j){return j===void 0&&(j={}),(!j||j.validate!==!1)&&Gc(this,_.call(bp,{key:R,layerType:this.type,objectKey:L,value:z,styleSpec:kt,style:{glyphs:!0,sprite:!0}}))},v.prototype.is3D=function(){return!1},v.prototype.isTileClipped=function(){return!1},v.prototype.hasOffscreenPass=function(){return!1},v.prototype.resize=function(){},v.prototype.isStateDependent=function(){for(var _ in this.paint._values){var R=this.paint.get(_);if(R instanceof Su&&Is(R.property.specification)&&(R.value.kind==="source"||R.value.kind==="composite")&&R.value.isStateDependent)return!0}return!1},v}(Cr),Df={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ph=function(h,v){this._structArray=h,this._pos1=v*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},zo=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function js(h,v){v===void 0&&(v=1);var _=0,R=0;return{members:h.map(function(L){var z=Df[L.type].BYTES_PER_ELEMENT,j=_=bv(_,Math.max(v,z)),ae=L.components||1;return R=Math.max(R,z),_+=z*ae,{name:L.name,type:L.type,components:ae,offset:j}}),size:bv(_,Math.max(R,v)),alignment:v}}function bv(h,v){return Math.ceil(h/v)*v}zo.serialize=function(h,v){return h._trim(),v&&(h.isTransferred=!0,v.push(h.arrayBuffer)),{length:h.length,arrayBuffer:h.arrayBuffer}},zo.deserialize=function(h){var v=Object.create(this.prototype);return v.arrayBuffer=h.arrayBuffer,v.length=h.length,v.capacity=h.arrayBuffer.byteLength/v.bytesPerElement,v._refreshViews(),v},zo.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},zo.prototype.clear=function(){this.length=0},zo.prototype.resize=function(h){this.reserve(h),this.length=h},zo.prototype.reserve=function(h){if(h>this.capacity){this.capacity=Math.max(h,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var v=this.uint8;this._refreshViews(),v&&this.uint8.set(v)}},zo.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var dh=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R){var L=this.length;return this.resize(L+1),this.emplace(L,_,R)},v.prototype.emplace=function(_,R,L){var z=2*_;return this.int16[z+0]=R,this.int16[z+1]=L,_},v}(zo);dh.prototype.bytesPerElement=4,zi("StructArrayLayout2i4",dh);var Lf=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,L,z){var j=this.length;return this.resize(j+1),this.emplace(j,_,R,L,z)},v.prototype.emplace=function(_,R,L,z,j){var ae=4*_;return this.int16[ae+0]=R,this.int16[ae+1]=L,this.int16[ae+2]=z,this.int16[ae+3]=j,_},v}(zo);Lf.prototype.bytesPerElement=8,zi("StructArrayLayout4i8",Lf);var fc=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,L,z,j,ae){var Se=this.length;return this.resize(Se+1),this.emplace(Se,_,R,L,z,j,ae)},v.prototype.emplace=function(_,R,L,z,j,ae,Se){var He=6*_;return this.int16[He+0]=R,this.int16[He+1]=L,this.int16[He+2]=z,this.int16[He+3]=j,this.int16[He+4]=ae,this.int16[He+5]=Se,_},v}(zo);fc.prototype.bytesPerElement=12,zi("StructArrayLayout2i4i12",fc);var Ra=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,L,z,j,ae){var Se=this.length;return this.resize(Se+1),this.emplace(Se,_,R,L,z,j,ae)},v.prototype.emplace=function(_,R,L,z,j,ae,Se){var He=4*_,rt=8*_;return this.int16[He+0]=R,this.int16[He+1]=L,this.uint8[rt+4]=z,this.uint8[rt+5]=j,this.uint8[rt+6]=ae,this.uint8[rt+7]=Se,_},v}(zo);Ra.prototype.bytesPerElement=8,zi("StructArrayLayout2i4ub8",Ra);var vh=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R){var L=this.length;return this.resize(L+1),this.emplace(L,_,R)},v.prototype.emplace=function(_,R,L){var z=2*_;return this.float32[z+0]=R,this.float32[z+1]=L,_},v}(zo);vh.prototype.bytesPerElement=8,zi("StructArrayLayout2f8",vh);var $c=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,L,z,j,ae,Se,He,rt,ht){var Mt=this.length;return this.resize(Mt+1),this.emplace(Mt,_,R,L,z,j,ae,Se,He,rt,ht)},v.prototype.emplace=function(_,R,L,z,j,ae,Se,He,rt,ht,Mt){var Nt=10*_;return this.uint16[Nt+0]=R,this.uint16[Nt+1]=L,this.uint16[Nt+2]=z,this.uint16[Nt+3]=j,this.uint16[Nt+4]=ae,this.uint16[Nt+5]=Se,this.uint16[Nt+6]=He,this.uint16[Nt+7]=rt,this.uint16[Nt+8]=ht,this.uint16[Nt+9]=Mt,_},v}(zo);$c.prototype.bytesPerElement=20,zi("StructArrayLayout10ui20",$c);var sd=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,L,z,j,ae,Se,He,rt,ht,Mt,Nt){var er=this.length;return this.resize(er+1),this.emplace(er,_,R,L,z,j,ae,Se,He,rt,ht,Mt,Nt)},v.prototype.emplace=function(_,R,L,z,j,ae,Se,He,rt,ht,Mt,Nt,er){var ar=12*_;return this.int16[ar+0]=R,this.int16[ar+1]=L,this.int16[ar+2]=z,this.int16[ar+3]=j,this.uint16[ar+4]=ae,this.uint16[ar+5]=Se,this.uint16[ar+6]=He,this.uint16[ar+7]=rt,this.int16[ar+8]=ht,this.int16[ar+9]=Mt,this.int16[ar+10]=Nt,this.int16[ar+11]=er,_},v}(zo);sd.prototype.bytesPerElement=24,zi("StructArrayLayout4i4ui4i24",sd);var Bf=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,L){var z=this.length;return this.resize(z+1),this.emplace(z,_,R,L)},v.prototype.emplace=function(_,R,L,z){var j=3*_;return this.float32[j+0]=R,this.float32[j+1]=L,this.float32[j+2]=z,_},v}(zo);Bf.prototype.bytesPerElement=12,zi("StructArrayLayout3f12",Bf);var Lh=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_){var R=this.length;return this.resize(R+1),this.emplace(R,_)},v.prototype.emplace=function(_,R){return this.uint32[1*_+0]=R,_},v}(zo);Lh.prototype.bytesPerElement=4,zi("StructArrayLayout1ul4",Lh);var Ud=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,L,z,j,ae,Se,He,rt){var ht=this.length;return this.resize(ht+1),this.emplace(ht,_,R,L,z,j,ae,Se,He,rt)},v.prototype.emplace=function(_,R,L,z,j,ae,Se,He,rt,ht){var Mt=10*_,Nt=5*_;return this.int16[Mt+0]=R,this.int16[Mt+1]=L,this.int16[Mt+2]=z,this.int16[Mt+3]=j,this.int16[Mt+4]=ae,this.int16[Mt+5]=Se,this.uint32[Nt+3]=He,this.uint16[Mt+8]=rt,this.uint16[Mt+9]=ht,_},v}(zo);Ud.prototype.bytesPerElement=20,zi("StructArrayLayout6i1ul2ui20",Ud);var fn=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,L,z,j,ae){var Se=this.length;return this.resize(Se+1),this.emplace(Se,_,R,L,z,j,ae)},v.prototype.emplace=function(_,R,L,z,j,ae,Se){var He=6*_;return this.int16[He+0]=R,this.int16[He+1]=L,this.int16[He+2]=z,this.int16[He+3]=j,this.int16[He+4]=ae,this.int16[He+5]=Se,_},v}(zo);fn.prototype.bytesPerElement=12,zi("StructArrayLayout2i2i2i12",fn);var vr=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,L,z,j){var ae=this.length;return this.resize(ae+1),this.emplace(ae,_,R,L,z,j)},v.prototype.emplace=function(_,R,L,z,j,ae){var Se=4*_,He=8*_;return this.float32[Se+0]=R,this.float32[Se+1]=L,this.float32[Se+2]=z,this.int16[He+6]=j,this.int16[He+7]=ae,_},v}(zo);vr.prototype.bytesPerElement=16,zi("StructArrayLayout2f1f2i16",vr);var Fe=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,L,z){var j=this.length;return this.resize(j+1),this.emplace(j,_,R,L,z)},v.prototype.emplace=function(_,R,L,z,j){var ae=12*_,Se=3*_;return this.uint8[ae+0]=R,this.uint8[ae+1]=L,this.float32[Se+1]=z,this.float32[Se+2]=j,_},v}(zo);Fe.prototype.bytesPerElement=12,zi("StructArrayLayout2ub2f12",Fe);var Yc=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,L){var z=this.length;return this.resize(z+1),this.emplace(z,_,R,L)},v.prototype.emplace=function(_,R,L,z){var j=3*_;return this.uint16[j+0]=R,this.uint16[j+1]=L,this.uint16[j+2]=z,_},v}(zo);Yc.prototype.bytesPerElement=6,zi("StructArrayLayout3ui6",Yc);var $t=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,L,z,j,ae,Se,He,rt,ht,Mt,Nt,er,ar,Mr,_r,Ur){var Kr=this.length;return this.resize(Kr+1),this.emplace(Kr,_,R,L,z,j,ae,Se,He,rt,ht,Mt,Nt,er,ar,Mr,_r,Ur)},v.prototype.emplace=function(_,R,L,z,j,ae,Se,He,rt,ht,Mt,Nt,er,ar,Mr,_r,Ur,Kr){var nn=24*_,yn=12*_,Pn=48*_;return this.int16[nn+0]=R,this.int16[nn+1]=L,this.uint16[nn+2]=z,this.uint16[nn+3]=j,this.uint32[yn+2]=ae,this.uint32[yn+3]=Se,this.uint32[yn+4]=He,this.uint16[nn+10]=rt,this.uint16[nn+11]=ht,this.uint16[nn+12]=Mt,this.float32[yn+7]=Nt,this.float32[yn+8]=er,this.uint8[Pn+36]=ar,this.uint8[Pn+37]=Mr,this.uint8[Pn+38]=_r,this.uint32[yn+10]=Ur,this.int16[nn+22]=Kr,_},v}(zo);$t.prototype.bytesPerElement=48,zi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",$t);var ud=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,L,z,j,ae,Se,He,rt,ht,Mt,Nt,er,ar,Mr,_r,Ur,Kr,nn,yn,Pn,oi,bi,Qi,Fi,ca,Ri,Qa){var Ji=this.length;return this.resize(Ji+1),this.emplace(Ji,_,R,L,z,j,ae,Se,He,rt,ht,Mt,Nt,er,ar,Mr,_r,Ur,Kr,nn,yn,Pn,oi,bi,Qi,Fi,ca,Ri,Qa)},v.prototype.emplace=function(_,R,L,z,j,ae,Se,He,rt,ht,Mt,Nt,er,ar,Mr,_r,Ur,Kr,nn,yn,Pn,oi,bi,Qi,Fi,ca,Ri,Qa,Ji){var Wi=34*_,fo=17*_;return this.int16[Wi+0]=R,this.int16[Wi+1]=L,this.int16[Wi+2]=z,this.int16[Wi+3]=j,this.int16[Wi+4]=ae,this.int16[Wi+5]=Se,this.int16[Wi+6]=He,this.int16[Wi+7]=rt,this.uint16[Wi+8]=ht,this.uint16[Wi+9]=Mt,this.uint16[Wi+10]=Nt,this.uint16[Wi+11]=er,this.uint16[Wi+12]=ar,this.uint16[Wi+13]=Mr,this.uint16[Wi+14]=_r,this.uint16[Wi+15]=Ur,this.uint16[Wi+16]=Kr,this.uint16[Wi+17]=nn,this.uint16[Wi+18]=yn,this.uint16[Wi+19]=Pn,this.uint16[Wi+20]=oi,this.uint16[Wi+21]=bi,this.uint16[Wi+22]=Qi,this.uint32[fo+12]=Fi,this.float32[fo+13]=ca,this.float32[fo+14]=Ri,this.float32[fo+15]=Qa,this.float32[fo+16]=Ji,_},v}(zo);ud.prototype.bytesPerElement=68,zi("StructArrayLayout8i15ui1ul4f68",ud);var Ws=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_){var R=this.length;return this.resize(R+1),this.emplace(R,_)},v.prototype.emplace=function(_,R){return this.float32[1*_+0]=R,_},v}(zo);Ws.prototype.bytesPerElement=4,zi("StructArrayLayout1f4",Ws);var Vl=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,L){var z=this.length;return this.resize(z+1),this.emplace(z,_,R,L)},v.prototype.emplace=function(_,R,L,z){var j=3*_;return this.int16[j+0]=R,this.int16[j+1]=L,this.int16[j+2]=z,_},v}(zo);Vl.prototype.bytesPerElement=6,zi("StructArrayLayout3i6",Vl);var Bh=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,L){var z=this.length;return this.resize(z+1),this.emplace(z,_,R,L)},v.prototype.emplace=function(_,R,L,z){var j=4*_;return this.uint32[2*_+0]=R,this.uint16[j+2]=L,this.uint16[j+3]=z,_},v}(zo);Bh.prototype.bytesPerElement=8,zi("StructArrayLayout1ul2ui8",Bh);var Cl=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R){var L=this.length;return this.resize(L+1),this.emplace(L,_,R)},v.prototype.emplace=function(_,R,L){var z=2*_;return this.uint16[z+0]=R,this.uint16[z+1]=L,_},v}(zo);Cl.prototype.bytesPerElement=4,zi("StructArrayLayout2ui4",Cl);var wp=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_){var R=this.length;return this.resize(R+1),this.emplace(R,_)},v.prototype.emplace=function(_,R){return this.uint16[1*_+0]=R,_},v}(zo);wp.prototype.bytesPerElement=2,zi("StructArrayLayout1ui2",wp);var Cp=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,L,z){var j=this.length;return this.resize(j+1),this.emplace(j,_,R,L,z)},v.prototype.emplace=function(_,R,L,z,j){var ae=4*_;return this.float32[ae+0]=R,this.float32[ae+1]=L,this.float32[ae+2]=z,this.float32[ae+3]=j,_},v}(zo);Cp.prototype.bytesPerElement=16,zi("StructArrayLayout4f16",Cp);var b=function(h){function v(){h.apply(this,arguments)}h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v;var _={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return _.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},_.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},_.x1.get=function(){return this._structArray.int16[this._pos2+2]},_.y1.get=function(){return this._structArray.int16[this._pos2+3]},_.x2.get=function(){return this._structArray.int16[this._pos2+4]},_.y2.get=function(){return this._structArray.int16[this._pos2+5]},_.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},_.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},_.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},_.anchorPoint.get=function(){return new Q(this.anchorPointX,this.anchorPointY)},Object.defineProperties(v.prototype,_),v}(ph);b.prototype.size=20;var T=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.get=function(_){return new b(this,_)},v}(Ud);zi("CollisionBoxArray",T);var C=function(h){function v(){h.apply(this,arguments)}h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v;var _={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return _.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},_.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},_.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},_.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},_.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},_.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},_.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},_.segment.get=function(){return this._structArray.uint16[this._pos2+10]},_.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},_.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},_.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},_.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},_.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},_.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},_.placedOrientation.set=function(R){this._structArray.uint8[this._pos1+37]=R},_.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},_.hidden.set=function(R){this._structArray.uint8[this._pos1+38]=R},_.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},_.crossTileID.set=function(R){this._structArray.uint32[this._pos4+10]=R},_.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(v.prototype,_),v}(ph);C.prototype.size=48;var I=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.get=function(_){return new C(this,_)},v}($t);zi("PlacedSymbolArray",I);var Z=function(h){function v(){h.apply(this,arguments)}h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v;var _={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return _.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},_.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},_.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},_.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},_.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},_.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},_.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},_.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},_.key.get=function(){return this._structArray.uint16[this._pos2+8]},_.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},_.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},_.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},_.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},_.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},_.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},_.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},_.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},_.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},_.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},_.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},_.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},_.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},_.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},_.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},_.crossTileID.set=function(R){this._structArray.uint32[this._pos4+12]=R},_.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},_.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},_.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},_.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(v.prototype,_),v}(ph);Z.prototype.size=68;var q=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.get=function(_){return new Z(this,_)},v}(ud);zi("SymbolInstanceArray",q);var re=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.getoffsetX=function(_){return this.float32[1*_+0]},v}(Ws);zi("GlyphOffsetArray",re);var _e=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.getx=function(_){return this.int16[3*_+0]},v.prototype.gety=function(_){return this.int16[3*_+1]},v.prototype.gettileUnitDistanceFromAnchor=function(_){return this.int16[3*_+2]},v}(Vl);zi("SymbolLineVertexArray",_e);var qe=function(h){function v(){h.apply(this,arguments)}h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v;var _={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return _.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},_.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},_.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(v.prototype,_),v}(ph);qe.prototype.size=8;var yt=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.get=function(_){return new qe(this,_)},v}(Bh);zi("FeatureIndexArray",yt);var Ut=js([{name:"a_pos",components:2,type:"Int16"}],4).members,Zt=function(h){h===void 0&&(h=[]),this.segments=h};function Ht(h,v){return 256*(h=J(Math.floor(h),0,255))+J(Math.floor(v),0,255)}Zt.prototype.prepareSegment=function(h,v,_,R){var L=this.segments[this.segments.length-1];return h>Zt.MAX_VERTEX_ARRAY_LENGTH&&Ye("Max vertices per segment is "+Zt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+h),(!L||L.vertexLength+h>Zt.MAX_VERTEX_ARRAY_LENGTH||L.sortKey!==R)&&(L={vertexOffset:v.length,primitiveOffset:_.length,vertexLength:0,primitiveLength:0},R!==void 0&&(L.sortKey=R),this.segments.push(L)),L},Zt.prototype.get=function(){return this.segments},Zt.prototype.destroy=function(){for(var h=0,v=this.segments;h<v.length;h+=1){var _=v[h];for(var R in _.vaos)_.vaos[R].destroy()}},Zt.simpleSegment=function(h,v,_,R){return new Zt([{vertexOffset:h,primitiveOffset:v,vertexLength:_,primitiveLength:R,vaos:{},sortKey:0}])},Zt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,zi("SegmentVector",Zt);var sr=js([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),or=Y(function(h){h.exports=function(v,_){var R,L,z,j,ae,Se,He,rt;for(L=v.length-(R=3&v.length),z=_,ae=3432918353,Se=461845907,rt=0;rt<L;)He=255&v.charCodeAt(rt)|(255&v.charCodeAt(++rt))<<8|(255&v.charCodeAt(++rt))<<16|(255&v.charCodeAt(++rt))<<24,++rt,z=27492+(65535&(j=5*(65535&(z=(z^=He=(65535&(He=(He=(65535&He)*ae+(((He>>>16)*ae&65535)<<16)&4294967295)<<15|He>>>17))*Se+(((He>>>16)*Se&65535)<<16)&4294967295)<<13|z>>>19))+((5*(z>>>16)&65535)<<16)&4294967295))+((58964+(j>>>16)&65535)<<16);switch(He=0,R){case 3:He^=(255&v.charCodeAt(rt+2))<<16;case 2:He^=(255&v.charCodeAt(rt+1))<<8;case 1:z^=He=(65535&(He=(He=(65535&(He^=255&v.charCodeAt(rt)))*ae+(((He>>>16)*ae&65535)<<16)&4294967295)<<15|He>>>17))*Se+(((He>>>16)*Se&65535)<<16)&4294967295}return z^=v.length,z=2246822507*(65535&(z^=z>>>16))+((2246822507*(z>>>16)&65535)<<16)&4294967295,z=3266489909*(65535&(z^=z>>>13))+((3266489909*(z>>>16)&65535)<<16)&4294967295,(z^=z>>>16)>>>0}}),Er=Y(function(h){h.exports=function(v,_){for(var R,L=v.length,z=_^L,j=0;L>=4;)R=1540483477*(65535&(R=255&v.charCodeAt(j)|(255&v.charCodeAt(++j))<<8|(255&v.charCodeAt(++j))<<16|(255&v.charCodeAt(++j))<<24))+((1540483477*(R>>>16)&65535)<<16),z=1540483477*(65535&z)+((1540483477*(z>>>16)&65535)<<16)^(R=1540483477*(65535&(R^=R>>>24))+((1540483477*(R>>>16)&65535)<<16)),L-=4,++j;switch(L){case 3:z^=(255&v.charCodeAt(j+2))<<16;case 2:z^=(255&v.charCodeAt(j+1))<<8;case 1:z=1540483477*(65535&(z^=255&v.charCodeAt(j)))+((1540483477*(z>>>16)&65535)<<16)}return z=1540483477*(65535&(z^=z>>>13))+((1540483477*(z>>>16)&65535)<<16),(z^=z>>>15)>>>0}}),rr=or,wr=Er;rr.murmur3=or,rr.murmur2=wr;var Fr=function(){this.ids=[],this.positions=[],this.indexed=!1};Fr.prototype.add=function(h,v,_,R){this.ids.push(hn(h)),this.positions.push(v,_,R)},Fr.prototype.getPositions=function(h){for(var v=hn(h),_=0,R=this.ids.length-1;_<R;){var L=_+R>>1;this.ids[L]>=v?R=L:_=L+1}for(var z=[];this.ids[_]===v;)z.push({index:this.positions[3*_],start:this.positions[3*_+1],end:this.positions[3*_+2]}),_++;return z},Fr.serialize=function(h,v){var _=new Float64Array(h.ids),R=new Uint32Array(h.positions);return function L(z,j,ae,Se){for(;ae<Se;){for(var He=z[ae+Se>>1],rt=ae-1,ht=Se+1;;){do rt++;while(z[rt]<He);do ht--;while(z[ht]>He);if(rt>=ht)break;an(z,rt,ht),an(j,3*rt,3*ht),an(j,3*rt+1,3*ht+1),an(j,3*rt+2,3*ht+2)}ht-ae<Se-ht?(L(z,j,ae,ht),ae=ht+1):(L(z,j,ht+1,Se),Se=ht)}}(_,R,0,_.length-1),v&&v.push(_.buffer,R.buffer),{ids:_,positions:R}},Fr.deserialize=function(h){var v=new Fr;return v.ids=h.ids,v.positions=h.positions,v.indexed=!0,v};var Wr=Math.pow(2,53)-1;function hn(h){var v=+h;return!isNaN(v)&&v<=Wr?v:rr(String(h))}function an(h,v,_){var R=h[v];h[v]=h[_],h[_]=R}zi("FeaturePositionMap",Fr);var bn=function(h,v){this.gl=h.gl,this.location=v},In=function(h){function v(_,R){h.call(this,_,R),this.current=0}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){this.current!==_&&(this.current=_,this.gl.uniform1i(this.location,_))},v}(bn),pi=function(h){function v(_,R){h.call(this,_,R),this.current=0}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){this.current!==_&&(this.current=_,this.gl.uniform1f(this.location,_))},v}(bn),ei=function(h){function v(_,R){h.call(this,_,R),this.current=[0,0]}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){_[0]===this.current[0]&&_[1]===this.current[1]||(this.current=_,this.gl.uniform2f(this.location,_[0],_[1]))},v}(bn),Ii=function(h){function v(_,R){h.call(this,_,R),this.current=[0,0,0]}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){_[0]===this.current[0]&&_[1]===this.current[1]&&_[2]===this.current[2]||(this.current=_,this.gl.uniform3f(this.location,_[0],_[1],_[2]))},v}(bn),ia=function(h){function v(_,R){h.call(this,_,R),this.current=[0,0,0,0]}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){_[0]===this.current[0]&&_[1]===this.current[1]&&_[2]===this.current[2]&&_[3]===this.current[3]||(this.current=_,this.gl.uniform4f(this.location,_[0],_[1],_[2],_[3]))},v}(bn),la=function(h){function v(_,R){h.call(this,_,R),this.current=na.transparent}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){_.r===this.current.r&&_.g===this.current.g&&_.b===this.current.b&&_.a===this.current.a||(this.current=_,this.gl.uniform4f(this.location,_.r,_.g,_.b,_.a))},v}(bn),Ki=new Float32Array(16),bo=function(h){function v(_,R){h.call(this,_,R),this.current=Ki}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){if(_[12]!==this.current[12]||_[0]!==this.current[0])return this.current=_,void this.gl.uniformMatrix4fv(this.location,!1,_);for(var R=1;R<16;R++)if(_[R]!==this.current[R]){this.current=_,this.gl.uniformMatrix4fv(this.location,!1,_);break}},v}(bn);function Ni(h){return[Ht(255*h.r,255*h.g),Ht(255*h.b,255*h.a)]}var Oa=function(h,v,_){this.value=h,this.uniformNames=v.map(function(R){return"u_"+R}),this.type=_};Oa.prototype.setUniform=function(h,v,_){h.set(_.constantOr(this.value))},Oa.prototype.getBinding=function(h,v,_){return this.type==="color"?new la(h,v):new pi(h,v)};var La=function(h,v){this.uniformNames=v.map(function(_){return"u_"+_}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};La.prototype.setConstantPatternPositions=function(h,v){this.pixelRatioFrom=v.pixelRatio,this.pixelRatioTo=h.pixelRatio,this.patternFrom=v.tlbr,this.patternTo=h.tlbr},La.prototype.setUniform=function(h,v,_,R){var L=R==="u_pattern_to"?this.patternTo:R==="u_pattern_from"?this.patternFrom:R==="u_pixel_ratio_to"?this.pixelRatioTo:R==="u_pixel_ratio_from"?this.pixelRatioFrom:null;L&&h.set(L)},La.prototype.getBinding=function(h,v,_){return _.substr(0,9)==="u_pattern"?new ia(h,v):new pi(h,v)};var Ia=function(h,v,_,R){this.expression=h,this.type=_,this.maxValue=0,this.paintVertexAttributes=v.map(function(L){return{name:"a_"+L,type:"Float32",components:_==="color"?2:1,offset:0}}),this.paintVertexArray=new R};Ia.prototype.populatePaintArray=function(h,v,_,R,L){var z=this.paintVertexArray.length,j=this.expression.evaluate(new $a(0),v,{},R,[],L);this.paintVertexArray.resize(h),this._setPaintValue(z,h,j)},Ia.prototype.updatePaintArray=function(h,v,_,R){var L=this.expression.evaluate({zoom:0},_,R);this._setPaintValue(h,v,L)},Ia.prototype._setPaintValue=function(h,v,_){if(this.type==="color")for(var R=Ni(_),L=h;L<v;L++)this.paintVertexArray.emplace(L,R[0],R[1]);else{for(var z=h;z<v;z++)this.paintVertexArray.emplace(z,_);this.maxValue=Math.max(this.maxValue,Math.abs(_))}},Ia.prototype.upload=function(h){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=h.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ia.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var fa=function(h,v,_,R,L,z){this.expression=h,this.uniformNames=v.map(function(j){return"u_"+j+"_t"}),this.type=_,this.useIntegerZoom=R,this.zoom=L,this.maxValue=0,this.paintVertexAttributes=v.map(function(j){return{name:"a_"+j,type:"Float32",components:_==="color"?4:2,offset:0}}),this.paintVertexArray=new z};fa.prototype.populatePaintArray=function(h,v,_,R,L){var z=this.expression.evaluate(new $a(this.zoom),v,{},R,[],L),j=this.expression.evaluate(new $a(this.zoom+1),v,{},R,[],L),ae=this.paintVertexArray.length;this.paintVertexArray.resize(h),this._setPaintValue(ae,h,z,j)},fa.prototype.updatePaintArray=function(h,v,_,R){var L=this.expression.evaluate({zoom:this.zoom},_,R),z=this.expression.evaluate({zoom:this.zoom+1},_,R);this._setPaintValue(h,v,L,z)},fa.prototype._setPaintValue=function(h,v,_,R){if(this.type==="color")for(var L=Ni(_),z=Ni(R),j=h;j<v;j++)this.paintVertexArray.emplace(j,L[0],L[1],z[0],z[1]);else{for(var ae=h;ae<v;ae++)this.paintVertexArray.emplace(ae,_,R);this.maxValue=Math.max(this.maxValue,Math.abs(_),Math.abs(R))}},fa.prototype.upload=function(h){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=h.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},fa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},fa.prototype.setUniform=function(h,v){var _=this.useIntegerZoom?Math.floor(v.zoom):v.zoom,R=J(this.expression.interpolationFactor(_,this.zoom,this.zoom+1),0,1);h.set(R)},fa.prototype.getBinding=function(h,v,_){return new pi(h,v)};var Pa=function(h,v,_,R,L,z){this.expression=h,this.type=v,this.useIntegerZoom=_,this.zoom=R,this.layerId=z,this.zoomInPaintVertexArray=new L,this.zoomOutPaintVertexArray=new L};Pa.prototype.populatePaintArray=function(h,v,_){var R=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(h),this.zoomOutPaintVertexArray.resize(h),this._setPaintValues(R,h,v.patterns&&v.patterns[this.layerId],_)},Pa.prototype.updatePaintArray=function(h,v,_,R,L){this._setPaintValues(h,v,_.patterns&&_.patterns[this.layerId],L)},Pa.prototype._setPaintValues=function(h,v,_,R){if(R&&_){var L=R[_.min],z=R[_.mid],j=R[_.max];if(L&&z&&j)for(var ae=h;ae<v;ae++)this.zoomInPaintVertexArray.emplace(ae,z.tl[0],z.tl[1],z.br[0],z.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],z.pixelRatio,L.pixelRatio),this.zoomOutPaintVertexArray.emplace(ae,z.tl[0],z.tl[1],z.br[0],z.br[1],j.tl[0],j.tl[1],j.br[0],j.br[1],z.pixelRatio,j.pixelRatio)}},Pa.prototype.upload=function(h){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=h.createVertexBuffer(this.zoomInPaintVertexArray,sr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=h.createVertexBuffer(this.zoomOutPaintVertexArray,sr.members,this.expression.isStateDependent))},Pa.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ca=function(h,v,_){this.binders={},this._buffers=[];var R=[];for(var L in h.paint._values)if(_(L)){var z=h.paint.get(L);if(z instanceof Su&&Is(z.property.specification)){var j=Eu(L,h.type),ae=z.value,Se=z.property.specification.type,He=z.property.useIntegerZoom,rt=z.property.specification["property-type"],ht=rt==="cross-faded"||rt==="cross-faded-data-driven";if(ae.kind==="constant")this.binders[L]=ht?new La(ae.value,j):new Oa(ae.value,j,Se),R.push("/u_"+L);else if(ae.kind==="source"||ht){var Mt=ks(L,Se,"source");this.binders[L]=ht?new Pa(ae,Se,He,v,Mt,h.id):new Ia(ae,j,Se,Mt),R.push("/a_"+L)}else{var Nt=ks(L,Se,"composite");this.binders[L]=new fa(ae,j,Se,He,v,Nt),R.push("/z_"+L)}}}this.cacheKey=R.sort().join("")};Ca.prototype.getMaxValue=function(h){var v=this.binders[h];return v instanceof Ia||v instanceof fa?v.maxValue:0},Ca.prototype.populatePaintArrays=function(h,v,_,R,L){for(var z in this.binders){var j=this.binders[z];(j instanceof Ia||j instanceof fa||j instanceof Pa)&&j.populatePaintArray(h,v,_,R,L)}},Ca.prototype.setConstantPatternPositions=function(h,v){for(var _ in this.binders){var R=this.binders[_];R instanceof La&&R.setConstantPatternPositions(h,v)}},Ca.prototype.updatePaintArrays=function(h,v,_,R,L){var z=!1;for(var j in h)for(var ae=0,Se=v.getPositions(j);ae<Se.length;ae+=1){var He=Se[ae],rt=_.feature(He.index);for(var ht in this.binders){var Mt=this.binders[ht];if((Mt instanceof Ia||Mt instanceof fa||Mt instanceof Pa)&&Mt.expression.isStateDependent===!0){var Nt=R.paint.get(ht);Mt.expression=Nt.value,Mt.updatePaintArray(He.start,He.end,rt,h[j],L),z=!0}}}return z},Ca.prototype.defines=function(){var h=[];for(var v in this.binders){var _=this.binders[v];(_ instanceof Oa||_ instanceof La)&&h.push.apply(h,_.uniformNames.map(function(R){return"#define HAS_UNIFORM_"+R}))}return h},Ca.prototype.getBinderAttributes=function(){var h=[];for(var v in this.binders){var _=this.binders[v];if(_ instanceof Ia||_ instanceof fa)for(var R=0;R<_.paintVertexAttributes.length;R++)h.push(_.paintVertexAttributes[R].name);else if(_ instanceof Pa)for(var L=0;L<sr.members.length;L++)h.push(sr.members[L].name)}return h},Ca.prototype.getBinderUniforms=function(){var h=[];for(var v in this.binders){var _=this.binders[v];if(_ instanceof Oa||_ instanceof La||_ instanceof fa)for(var R=0,L=_.uniformNames;R<L.length;R+=1)h.push(L[R])}return h},Ca.prototype.getPaintVertexBuffers=function(){return this._buffers},Ca.prototype.getUniforms=function(h,v){var _=[];for(var R in this.binders){var L=this.binders[R];if(L instanceof Oa||L instanceof La||L instanceof fa)for(var z=0,j=L.uniformNames;z<j.length;z+=1){var ae=j[z];if(v[ae]){var Se=L.getBinding(h,v[ae],ae);_.push({name:ae,property:R,binding:Se})}}}return _},Ca.prototype.setUniforms=function(h,v,_,R){for(var L=0,z=v;L<z.length;L+=1){var j=z[L],ae=j.name,Se=j.property;this.binders[Se].setUniform(j.binding,R,_.get(Se),ae)}},Ca.prototype.updatePaintBuffers=function(h){for(var v in this._buffers=[],this.binders){var _=this.binders[v];if(h&&_ instanceof Pa){var R=h.fromScale===2?_.zoomInPaintVertexBuffer:_.zoomOutPaintVertexBuffer;R&&this._buffers.push(R)}else(_ instanceof Ia||_ instanceof fa)&&_.paintVertexBuffer&&this._buffers.push(_.paintVertexBuffer)}},Ca.prototype.upload=function(h){for(var v in this.binders){var _=this.binders[v];(_ instanceof Ia||_ instanceof fa||_ instanceof Pa)&&_.upload(h)}this.updatePaintBuffers()},Ca.prototype.destroy=function(){for(var h in this.binders){var v=this.binders[h];(v instanceof Ia||v instanceof fa||v instanceof Pa)&&v.destroy()}};var pa=function(h,v,_){_===void 0&&(_=function(){return!0}),this.programConfigurations={};for(var R=0,L=h;R<L.length;R+=1){var z=L[R];this.programConfigurations[z.id]=new Ca(z,v,_)}this.needsUpload=!1,this._featureMap=new Fr,this._bufferOffset=0};function Eu(h,v){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(v+"-","").replace(/-/g,"_")]}function ks(h,v,_){var R={color:{source:vh,composite:Cp},number:{source:Ws,composite:vh}},L=function(z){return{"line-pattern":{source:$c,composite:$c},"fill-pattern":{source:$c,composite:$c},"fill-extrusion-pattern":{source:$c,composite:$c}}[z]}(h);return L&&L[_]||R[v][_]}pa.prototype.populatePaintArrays=function(h,v,_,R,L,z){for(var j in this.programConfigurations)this.programConfigurations[j].populatePaintArrays(h,v,R,L,z);v.id!==void 0&&this._featureMap.add(v.id,_,this._bufferOffset,h),this._bufferOffset=h,this.needsUpload=!0},pa.prototype.updatePaintArrays=function(h,v,_,R){for(var L=0,z=_;L<z.length;L+=1){var j=z[L];this.needsUpload=this.programConfigurations[j.id].updatePaintArrays(h,this._featureMap,v,j,R)||this.needsUpload}},pa.prototype.get=function(h){return this.programConfigurations[h]},pa.prototype.upload=function(h){if(this.needsUpload){for(var v in this.programConfigurations)this.programConfigurations[v].upload(h);this.needsUpload=!1}},pa.prototype.destroy=function(){for(var h in this.programConfigurations)this.programConfigurations[h].destroy()},zi("ConstantBinder",Oa),zi("CrossFadedConstantBinder",La),zi("SourceExpressionBinder",Ia),zi("CrossFadedCompositeBinder",Pa),zi("CompositeExpressionBinder",fa),zi("ProgramConfiguration",Ca,{omit:["_buffers"]}),zi("ProgramConfigurationSet",pa);var Xu=Math.pow(2,14)-1,wu=-Xu-1;function Qo(h){for(var v=8192/h.extent,_=h.loadGeometry(),R=0;R<_.length;R++)for(var L=_[R],z=0;z<L.length;z++){var j=L[z],ae=Math.round(j.x*v),Se=Math.round(j.y*v);j.x=J(ae,wu,Xu),j.y=J(Se,wu,Xu),(ae<j.x||ae>j.x+1||Se<j.y||Se>j.y+1)&&Ye("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return _}function vs(h,v){return{type:h.type,id:h.id,properties:h.properties,geometry:v?Qo(h):[]}}function Cu(h,v,_,R,L){h.emplaceBack(2*v+(R+1)/2,2*_+(L+1)/2)}var hu=function(h){this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(function(v){return v.id}),this.index=h.index,this.hasPattern=!1,this.layoutVertexArray=new dh,this.indexArray=new Yc,this.segments=new Zt,this.programConfigurations=new pa(h.layers,h.zoom),this.stateDependentLayerIds=this.layers.filter(function(v){return v.isStateDependent()}).map(function(v){return v.id})};function Kc(h,v){for(var _=0;_<h.length;_++)if(dc(v,h[_]))return!0;for(var R=0;R<v.length;R++)if(dc(h,v[R]))return!0;return!!Nf(h,v)}function el(h,v,_){return!!dc(h,v)||!!qc(v,h,_)}function hc(h,v){if(h.length===1)return pc(v,h[0]);for(var _=0;_<v.length;_++)for(var R=v[_],L=0;L<R.length;L++)if(dc(h,R[L]))return!0;for(var z=0;z<h.length;z++)if(pc(v,h[z]))return!0;for(var j=0;j<v.length;j++)if(Nf(h,v[j]))return!0;return!1}function hl(h,v,_){if(h.length>1){if(Nf(h,v))return!0;for(var R=0;R<v.length;R++)if(qc(v[R],h,_))return!0}for(var L=0;L<h.length;L++)if(qc(h[L],v,_))return!0;return!1}function Nf(h,v){if(h.length===0||v.length===0)return!1;for(var _=0;_<h.length-1;_++)for(var R=h[_],L=h[_+1],z=0;z<v.length-1;z++)if(pf(R,L,v[z],v[z+1]))return!0;return!1}function pf(h,v,_,R){return je(h,_,R)!==je(v,_,R)&&je(h,v,_)!==je(h,v,R)}function qc(h,v,_){var R=_*_;if(v.length===1)return h.distSqr(v[0])<R;for(var L=1;L<v.length;L++)if(df(h,v[L-1],v[L])<R)return!0;return!1}function df(h,v,_){var R=v.distSqr(_);if(R===0)return h.distSqr(v);var L=((h.x-v.x)*(_.x-v.x)+(h.y-v.y)*(_.y-v.y))/R;return h.distSqr(L<0?v:L>1?_:_.sub(v)._mult(L)._add(v))}function pc(h,v){for(var _,R,L,z=!1,j=0;j<h.length;j++)for(var ae=0,Se=(_=h[j]).length-1;ae<_.length;Se=ae++)(R=_[ae]).y>v.y!=(L=_[Se]).y>v.y&&v.x<(L.x-R.x)*(v.y-R.y)/(L.y-R.y)+R.x&&(z=!z);return z}function dc(h,v){for(var _=!1,R=0,L=h.length-1;R<h.length;L=R++){var z=h[R],j=h[L];z.y>v.y!=j.y>v.y&&v.x<(j.x-z.x)*(v.y-z.y)/(j.y-z.y)+z.x&&(_=!_)}return _}function vf(h,v,_){var R=_[0],L=_[2];if(h.x<R.x&&v.x<R.x||h.x>L.x&&v.x>L.x||h.y<R.y&&v.y<R.y||h.y>L.y&&v.y>L.y)return!1;var z=je(h,v,_[0]);return z!==je(h,v,_[1])||z!==je(h,v,_[2])||z!==je(h,v,_[3])}function ku(h,v,_){var R=v.paint.get(h).value;return R.kind==="constant"?R.value:_.programConfigurations.get(v.id).getMaxValue(h)}function Ts(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function ru(h,v,_,R,L){if(!v[0]&&!v[1])return h;var z=Q.convert(v)._mult(L);_==="viewport"&&z._rotate(-R);for(var j=[],ae=0;ae<h.length;ae++)j.push(h[ae].sub(z));return j}hu.prototype.populate=function(h,v,_){var R=this.layers[0],L=[],z=null;R.type==="circle"&&(z=R.layout.get("circle-sort-key"));for(var j=0,ae=h;j<ae.length;j+=1){var Se=ae[j],He=Se.feature,rt=Se.id,ht=Se.index,Mt=Se.sourceLayerIndex,Nt=this.layers[0]._featureFilter.needGeometry,er=vs(He,Nt);if(this.layers[0]._featureFilter.filter(new $a(this.zoom),er,_)){var ar=z?z.evaluate(er,{},_):void 0,Mr={id:rt,properties:He.properties,type:He.type,sourceLayerIndex:Mt,index:ht,geometry:Nt?er.geometry:Qo(He),patterns:{},sortKey:ar};L.push(Mr)}}z&&L.sort(function(bi,Qi){return bi.sortKey-Qi.sortKey});for(var _r=0,Ur=L;_r<Ur.length;_r+=1){var Kr=Ur[_r],nn=Kr.geometry,yn=Kr.index,Pn=Kr.sourceLayerIndex,oi=h[yn].feature;this.addFeature(Kr,nn,yn,_),v.featureIndex.insert(oi,nn,yn,Pn,this.index)}},hu.prototype.update=function(h,v,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,v,this.stateDependentLayers,_)},hu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},hu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},hu.prototype.upload=function(h){this.uploaded||(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,Ut),this.indexBuffer=h.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(h),this.uploaded=!0},hu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},hu.prototype.addFeature=function(h,v,_,R){for(var L=0,z=v;L<z.length;L+=1)for(var j=0,ae=z[L];j<ae.length;j+=1){var Se=ae[j],He=Se.x,rt=Se.y;if(!(He<0||He>=8192||rt<0||rt>=8192)){var ht=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,h.sortKey),Mt=ht.vertexLength;Cu(this.layoutVertexArray,He,rt,-1,-1),Cu(this.layoutVertexArray,He,rt,1,-1),Cu(this.layoutVertexArray,He,rt,1,1),Cu(this.layoutVertexArray,He,rt,-1,1),this.indexArray.emplaceBack(Mt,Mt+1,Mt+2),this.indexArray.emplaceBack(Mt,Mt+3,Mt+2),ht.vertexLength+=4,ht.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,_,{},R)},zi("CircleBucket",hu,{omit:["layers"]});var Al=new As({"circle-sort-key":new Ei(kt.layout_circle["circle-sort-key"])}),Jl={paint:new As({"circle-radius":new Ei(kt.paint_circle["circle-radius"]),"circle-color":new Ei(kt.paint_circle["circle-color"]),"circle-blur":new Ei(kt.paint_circle["circle-blur"]),"circle-opacity":new Ei(kt.paint_circle["circle-opacity"]),"circle-translate":new ea(kt.paint_circle["circle-translate"]),"circle-translate-anchor":new ea(kt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ea(kt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ea(kt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ei(kt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ei(kt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ei(kt.paint_circle["circle-stroke-opacity"])}),layout:Al},yo=typeof Float32Array!="undefined"?Float32Array:Array;function $u(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Gs(h,v,_){var R=v[0],L=v[1],z=v[2],j=v[3],ae=v[4],Se=v[5],He=v[6],rt=v[7],ht=v[8],Mt=v[9],Nt=v[10],er=v[11],ar=v[12],Mr=v[13],_r=v[14],Ur=v[15],Kr=_[0],nn=_[1],yn=_[2],Pn=_[3];return h[0]=Kr*R+nn*ae+yn*ht+Pn*ar,h[1]=Kr*L+nn*Se+yn*Mt+Pn*Mr,h[2]=Kr*z+nn*He+yn*Nt+Pn*_r,h[3]=Kr*j+nn*rt+yn*er+Pn*Ur,h[4]=(Kr=_[4])*R+(nn=_[5])*ae+(yn=_[6])*ht+(Pn=_[7])*ar,h[5]=Kr*L+nn*Se+yn*Mt+Pn*Mr,h[6]=Kr*z+nn*He+yn*Nt+Pn*_r,h[7]=Kr*j+nn*rt+yn*er+Pn*Ur,h[8]=(Kr=_[8])*R+(nn=_[9])*ae+(yn=_[10])*ht+(Pn=_[11])*ar,h[9]=Kr*L+nn*Se+yn*Mt+Pn*Mr,h[10]=Kr*z+nn*He+yn*Nt+Pn*_r,h[11]=Kr*j+nn*rt+yn*er+Pn*Ur,h[12]=(Kr=_[12])*R+(nn=_[13])*ae+(yn=_[14])*ht+(Pn=_[15])*ar,h[13]=Kr*L+nn*Se+yn*Mt+Pn*Mr,h[14]=Kr*z+nn*He+yn*Nt+Pn*_r,h[15]=Kr*j+nn*rt+yn*er+Pn*Ur,h}Math.hypot||(Math.hypot=function(){for(var h=arguments,v=0,_=arguments.length;_--;)v+=h[_]*h[_];return Math.sqrt(v)});var gf,ld=Gs;function mf(h,v,_){var R=v[0],L=v[1],z=v[2],j=v[3];return h[0]=_[0]*R+_[4]*L+_[8]*z+_[12]*j,h[1]=_[1]*R+_[5]*L+_[9]*z+_[13]*j,h[2]=_[2]*R+_[6]*L+_[10]*z+_[14]*j,h[3]=_[3]*R+_[7]*L+_[11]*z+_[15]*j,h}gf=new yo(3),yo!=Float32Array&&(gf[0]=0,gf[1]=0,gf[2]=0),function(){var h=new yo(4);yo!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[3]=0)}();var Sv=(function(){var h=new yo(2);yo!=Float32Array&&(h[0]=0,h[1]=0)}(),function(h){function v(_){h.call(this,_,Jl)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.createBucket=function(_){return new hu(_)},v.prototype.queryRadius=function(_){var R=_;return ku("circle-radius",this,R)+ku("circle-stroke-width",this,R)+Ts(this.paint.get("circle-translate"))},v.prototype.queryIntersectsFeature=function(_,R,L,z,j,ae,Se,He){for(var rt=ru(_,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),ae.angle,Se),ht=this.paint.get("circle-radius").evaluate(R,L)+this.paint.get("circle-stroke-width").evaluate(R,L),Mt=this.paint.get("circle-pitch-alignment")==="map",Nt=Mt?rt:function(oi,bi){return oi.map(function(Qi){return Tl(Qi,bi)})}(rt,He),er=Mt?ht*Se:ht,ar=0,Mr=z;ar<Mr.length;ar+=1)for(var _r=0,Ur=Mr[ar];_r<Ur.length;_r+=1){var Kr=Ur[_r],nn=Mt?Kr:Tl(Kr,He),yn=er,Pn=mf([],[Kr.x,Kr.y,0,1],He);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?yn*=Pn[3]/ae.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(yn*=ae.cameraToCenterDistance/Pn[3]),el(Nt,nn,yn))return!0}return!1},v}(cc));function Tl(h,v){var _=mf([],[h.x,h.y,0,1],v);return new Q(_[0]/_[3],_[1]/_[3])}var Hl=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v}(hu);function jl(h,v,_,R){var L=v.width,z=v.height;if(R){if(R instanceof Uint8ClampedArray)R=new Uint8Array(R.buffer);else if(R.length!==L*z*_)throw new RangeError("mismatched image size")}else R=new Uint8Array(L*z*_);return h.width=L,h.height=z,h.data=R,h}function zf(h,v,_){var R=v.width,L=v.height;if(R!==h.width||L!==h.height){var z=jl({},{width:R,height:L},_);Ap(h,z,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,R),height:Math.min(h.height,L)},_),h.width=R,h.height=L,h.data=z.data}}function Ap(h,v,_,R,L,z){if(L.width===0||L.height===0)return v;if(L.width>h.width||L.height>h.height||_.x>h.width-L.width||_.y>h.height-L.height)throw new RangeError("out of range source coordinates for image copy");if(L.width>v.width||L.height>v.height||R.x>v.width-L.width||R.y>v.height-L.height)throw new RangeError("out of range destination coordinates for image copy");for(var j=h.data,ae=v.data,Se=0;Se<L.height;Se++)for(var He=((_.y+Se)*h.width+_.x)*z,rt=((R.y+Se)*v.width+R.x)*z,ht=0;ht<L.width*z;ht++)ae[rt+ht]=j[He+ht];return v}zi("HeatmapBucket",Hl,{omit:["layers"]});var Uf=function(h,v){jl(this,h,1,v)};Uf.prototype.resize=function(h){zf(this,h,1)},Uf.prototype.clone=function(){return new Uf({width:this.width,height:this.height},new Uint8Array(this.data))},Uf.copy=function(h,v,_,R,L){Ap(h,v,_,R,L,1)};var Ml=function(h,v){jl(this,h,4,v)};Ml.prototype.resize=function(h){zf(this,h,4)},Ml.prototype.replace=function(h,v){v?this.data.set(h):this.data=h instanceof Uint8ClampedArray?new Uint8Array(h.buffer):h},Ml.prototype.clone=function(){return new Ml({width:this.width,height:this.height},new Uint8Array(this.data))},Ml.copy=function(h,v,_,R,L){Ap(h,v,_,R,L,4)},zi("AlphaImage",Uf),zi("RGBAImage",Ml);var Ev={paint:new As({"heatmap-radius":new Ei(kt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ei(kt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ea(kt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Gu(kt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ea(kt.paint_heatmap["heatmap-opacity"])})};function cg(h){var v={},_=h.resolution||256,R=h.clips?h.clips.length:1,L=h.image||new Ml({width:_,height:R}),z=function(er,ar,Mr){v[h.evaluationKey]=Mr;var _r=h.expression.evaluate(v);L.data[er+ar+0]=Math.floor(255*_r.r/_r.a),L.data[er+ar+1]=Math.floor(255*_r.g/_r.a),L.data[er+ar+2]=Math.floor(255*_r.b/_r.a),L.data[er+ar+3]=Math.floor(255*_r.a)};if(h.clips)for(var j=0,ae=0;j<R;++j,ae+=4*_)for(var Se=0,He=0;Se<_;Se++,He+=4){var rt=Se/(_-1),ht=h.clips[j];z(ae,He,ht.start*(1-rt)+ht.end*rt)}else for(var Mt=0,Nt=0;Mt<_;Mt++,Nt+=4)z(0,Nt,Mt/(_-1));return L}var vc=function(h){function v(_){h.call(this,_,Ev),this._updateColorRamp()}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.createBucket=function(_){return new Hl(_)},v.prototype._handleSpecialPaintPropertyUpdate=function(_){_==="heatmap-color"&&this._updateColorRamp()},v.prototype._updateColorRamp=function(){this.colorRamp=cg({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},v.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},v.prototype.queryRadius=function(){return 0},v.prototype.queryIntersectsFeature=function(){return!1},v.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},v}(cc),P0={paint:new As({"hillshade-illumination-direction":new ea(kt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ea(kt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ea(kt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ea(kt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ea(kt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ea(kt.paint_hillshade["hillshade-accent-color"])})},O0=function(h){function v(_){h.call(this,_,P0)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},v}(cc),k0=js([{name:"a_pos",components:2,type:"Int16"}],4).members,wv=Zd,Cv=Zd;function Zd(h,v,_){_=_||2;var R,L,z,j,ae,Se,He,rt=v&&v.length,ht=rt?v[0]*_:h.length,Mt=F0(h,0,ht,_,!0),Nt=[];if(!Mt||Mt.next===Mt.prev)return Nt;if(rt&&(Mt=function(ar,Mr,_r,Ur){var Kr,nn,yn,Pn=[];for(Kr=0,nn=Mr.length;Kr<nn;Kr++)(yn=F0(ar,Mr[Kr]*Ur,Kr<nn-1?Mr[Kr+1]*Ur:ar.length,Ur,!1))===yn.next&&(yn.steiner=!0),Pn.push(fd(yn));for(Pn.sort(D0),Kr=0;Kr<Pn.length;Kr++)fg(Pn[Kr],_r),_r=Nh(_r,_r.next);return _r}(h,v,Mt,_)),h.length>80*_){R=z=h[0],L=j=h[1];for(var er=_;er<ht;er+=_)(ae=h[er])<R&&(R=ae),(Se=h[er+1])<L&&(L=Se),ae>z&&(z=ae),Se>j&&(j=Se);He=(He=Math.max(z-R,j-L))!==0?1/He:0}return cd(Mt,Nt,_,R,L,He),Nt}function F0(h,v,_,R,L){var z,j;if(L===tl(h,v,_,R)>0)for(z=v;z<_;z+=R)j=Oc(z,h[z],h[z+1],j);else for(z=_-R;z>=v;z-=R)j=Oc(z,h[z],h[z+1],j);return j&&hd(j,j.next)&&(gc(j),j=j.next),j}function Nh(h,v){if(!h)return h;v||(v=h);var _,R=h;do if(_=!1,R.steiner||!hd(R,R.next)&&gs(R.prev,R,R.next)!==0)R=R.next;else{if(gc(R),(R=v=R.prev)===R.next)break;_=!0}while(_||R!==v);return v}function cd(h,v,_,R,L,z,j){if(h){!j&&z&&function(rt,ht,Mt,Nt){var er=rt;do er.z===null&&(er.z=Vd(er.x,er.y,ht,Mt,Nt)),er.prevZ=er.prev,er.nextZ=er.next,er=er.next;while(er!==rt);er.prevZ.nextZ=null,er.prevZ=null,function(ar){var Mr,_r,Ur,Kr,nn,yn,Pn,oi,bi=1;do{for(_r=ar,ar=null,nn=null,yn=0;_r;){for(yn++,Ur=_r,Pn=0,Mr=0;Mr<bi&&(Pn++,Ur=Ur.nextZ);Mr++);for(oi=bi;Pn>0||oi>0&&Ur;)Pn!==0&&(oi===0||!Ur||_r.z<=Ur.z)?(Kr=_r,_r=_r.nextZ,Pn--):(Kr=Ur,Ur=Ur.nextZ,oi--),nn?nn.nextZ=Kr:ar=Kr,Kr.prevZ=nn,nn=Kr;_r=Ur}nn.nextZ=null,bi*=2}while(yn>1)}(er)}(h,R,L,z);for(var ae,Se,He=h;h.prev!==h.next;)if(ae=h.prev,Se=h.next,z?zh(h,R,L,z):hm(h))v.push(ae.i/_),v.push(h.i/_),v.push(Se.i/_),gc(h),h=Se.next,He=Se.next;else if((h=Se)===He){j?j===1?cd(h=p_(Nh(h),v,_),v,_,R,L,z,2):j===2&&pm(h,v,_,R,L,z):cd(Nh(h),v,_,R,L,z,1);break}}}function hm(h){var v=h.prev,_=h,R=h.next;if(gs(v,_,R)>=0)return!1;for(var L=h.next.next;L!==h.prev;){if(gh(v.x,v.y,_.x,_.y,R.x,R.y,L.x,L.y)&&gs(L.prev,L,L.next)>=0)return!1;L=L.next}return!0}function zh(h,v,_,R){var L=h.prev,z=h,j=h.next;if(gs(L,z,j)>=0)return!1;for(var ae=L.x>z.x?L.x>j.x?L.x:j.x:z.x>j.x?z.x:j.x,Se=L.y>z.y?L.y>j.y?L.y:j.y:z.y>j.y?z.y:j.y,He=Vd(L.x<z.x?L.x<j.x?L.x:j.x:z.x<j.x?z.x:j.x,L.y<z.y?L.y<j.y?L.y:j.y:z.y<j.y?z.y:j.y,v,_,R),rt=Vd(ae,Se,v,_,R),ht=h.prevZ,Mt=h.nextZ;ht&&ht.z>=He&&Mt&&Mt.z<=rt;){if(ht!==h.prev&&ht!==h.next&&gh(L.x,L.y,z.x,z.y,j.x,j.y,ht.x,ht.y)&&gs(ht.prev,ht,ht.next)>=0||(ht=ht.prevZ,Mt!==h.prev&&Mt!==h.next&&gh(L.x,L.y,z.x,z.y,j.x,j.y,Mt.x,Mt.y)&&gs(Mt.prev,Mt,Mt.next)>=0))return!1;Mt=Mt.nextZ}for(;ht&&ht.z>=He;){if(ht!==h.prev&&ht!==h.next&&gh(L.x,L.y,z.x,z.y,j.x,j.y,ht.x,ht.y)&&gs(ht.prev,ht,ht.next)>=0)return!1;ht=ht.prevZ}for(;Mt&&Mt.z<=rt;){if(Mt!==h.prev&&Mt!==h.next&&gh(L.x,L.y,z.x,z.y,j.x,j.y,Mt.x,Mt.y)&&gs(Mt.prev,Mt,Mt.next)>=0)return!1;Mt=Mt.nextZ}return!0}function p_(h,v,_){var R=h;do{var L=R.prev,z=R.next.next;!hd(L,z)&&Ic(L,R,R.next,z)&&Mp(L,z)&&Mp(z,L)&&(v.push(L.i/_),v.push(R.i/_),v.push(z.i/_),gc(R),gc(R.next),R=h=z),R=R.next}while(R!==h);return Nh(R)}function pm(h,v,_,R,L,z){var j=h;do{for(var ae=j.next.next;ae!==j.prev;){if(j.i!==ae.i&&Tp(j,ae)){var Se=Xs(j,ae);return j=Nh(j,j.next),Se=Nh(Se,Se.next),cd(j,v,_,R,L,z),void cd(Se,v,_,R,L,z)}ae=ae.next}j=j.next}while(j!==h)}function D0(h,v){return h.x-v.x}function fg(h,v){if(v=function(R,L){var z,j=L,ae=R.x,Se=R.y,He=-1/0;do{if(Se<=j.y&&Se>=j.next.y&&j.next.y!==j.y){var rt=j.x+(Se-j.y)*(j.next.x-j.x)/(j.next.y-j.y);if(rt<=ae&&rt>He){if(He=rt,rt===ae){if(Se===j.y)return j;if(Se===j.next.y)return j.next}z=j.x<j.next.x?j:j.next}}j=j.next}while(j!==L);if(!z)return null;if(ae===He)return z;var ht,Mt=z,Nt=z.x,er=z.y,ar=1/0;j=z;do ae>=j.x&&j.x>=Nt&&ae!==j.x&&gh(Se<er?ae:He,Se,Nt,er,Se<er?He:ae,Se,j.x,j.y)&&(ht=Math.abs(Se-j.y)/(ae-j.x),Mp(j,R)&&(ht<ar||ht===ar&&(j.x>z.x||j.x===z.x&&hg(z,j)))&&(z=j,ar=ht)),j=j.next;while(j!==Mt);return z}(h,v)){var _=Xs(v,h);Nh(v,v.next),Nh(_,_.next)}}function hg(h,v){return gs(h.prev,h,v.prev)<0&&gs(v.next,h,h.next)<0}function Vd(h,v,_,R,L){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=32767*(h-_)*L)|h<<8))|h<<4))|h<<2))|h<<1))|(v=1431655765&((v=858993459&((v=252645135&((v=16711935&((v=32767*(v-R)*L)|v<<8))|v<<4))|v<<2))|v<<1))<<1}function fd(h){var v=h,_=h;do(v.x<_.x||v.x===_.x&&v.y<_.y)&&(_=v),v=v.next;while(v!==h);return _}function gh(h,v,_,R,L,z,j,ae){return(L-j)*(v-ae)-(h-j)*(z-ae)>=0&&(h-j)*(R-ae)-(_-j)*(v-ae)>=0&&(_-j)*(z-ae)-(L-j)*(R-ae)>=0}function Tp(h,v){return h.next.i!==v.i&&h.prev.i!==v.i&&!function(_,R){var L=_;do{if(L.i!==_.i&&L.next.i!==_.i&&L.i!==R.i&&L.next.i!==R.i&&Ic(L,L.next,_,R))return!0;L=L.next}while(L!==_);return!1}(h,v)&&(Mp(h,v)&&Mp(v,h)&&function(_,R){var L=_,z=!1,j=(_.x+R.x)/2,ae=(_.y+R.y)/2;do L.y>ae!=L.next.y>ae&&L.next.y!==L.y&&j<(L.next.x-L.x)*(ae-L.y)/(L.next.y-L.y)+L.x&&(z=!z),L=L.next;while(L!==_);return z}(h,v)&&(gs(h.prev,h,v.prev)||gs(h,v.prev,v))||hd(h,v)&&gs(h.prev,h,h.next)>0&&gs(v.prev,v,v.next)>0)}function gs(h,v,_){return(v.y-h.y)*(_.x-v.x)-(v.x-h.x)*(_.y-v.y)}function hd(h,v){return h.x===v.x&&h.y===v.y}function Ic(h,v,_,R){var L=Pc(gs(h,v,_)),z=Pc(gs(h,v,R)),j=Pc(gs(_,R,h)),ae=Pc(gs(_,R,v));return L!==z&&j!==ae||!(L!==0||!$n(h,_,v))||!(z!==0||!$n(h,R,v))||!(j!==0||!$n(_,h,R))||!(ae!==0||!$n(_,v,R))}function $n(h,v,_){return v.x<=Math.max(h.x,_.x)&&v.x>=Math.min(h.x,_.x)&&v.y<=Math.max(h.y,_.y)&&v.y>=Math.min(h.y,_.y)}function Pc(h){return h>0?1:h<0?-1:0}function Mp(h,v){return gs(h.prev,h,h.next)<0?gs(h,v,h.next)>=0&&gs(h,h.prev,v)>=0:gs(h,v,h.prev)<0||gs(h,h.next,v)<0}function Xs(h,v){var _=new Uh(h.i,h.x,h.y),R=new Uh(v.i,v.x,v.y),L=h.next,z=v.prev;return h.next=v,v.prev=h,_.next=L,L.prev=_,R.next=_,_.prev=R,z.next=R,R.prev=z,R}function Oc(h,v,_,R){var L=new Uh(h,v,_);return R?(L.next=R.next,L.prev=R,R.next.prev=L,R.next=L):(L.prev=L,L.next=L),L}function gc(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function Uh(h,v,_){this.i=h,this.x=v,this.y=_,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function tl(h,v,_,R){for(var L=0,z=v,j=_-R;z<_;z+=R)L+=(h[j]-h[z])*(h[z+1]+h[j+1]),j=z;return L}function Rp(h,v,_,R,L){(function z(j,ae,Se,He,rt){for(;He>Se;){if(He-Se>600){var ht=He-Se+1,Mt=ae-Se+1,Nt=Math.log(ht),er=.5*Math.exp(2*Nt/3),ar=.5*Math.sqrt(Nt*er*(ht-er)/ht)*(Mt-ht/2<0?-1:1);z(j,ae,Math.max(Se,Math.floor(ae-Mt*er/ht+ar)),Math.min(He,Math.floor(ae+(ht-Mt)*er/ht+ar)),rt)}var Mr=j[ae],_r=Se,Ur=He;for(kc(j,Se,ae),rt(j[He],Mr)>0&&kc(j,Se,He);_r<Ur;){for(kc(j,_r,Ur),_r++,Ur--;rt(j[_r],Mr)<0;)_r++;for(;rt(j[Ur],Mr)>0;)Ur--}rt(j[Se],Mr)===0?kc(j,Se,Ur):kc(j,++Ur,He),Ur<=ae&&(Se=Ur+1),ae<=Ur&&(He=Ur-1)}})(h,v,_||0,R||h.length-1,L||pd)}function kc(h,v,_){var R=h[v];h[v]=h[_],h[_]=R}function pd(h,v){return h<v?-1:h>v?1:0}function Av(h,v){var _=h.length;if(_<=1)return[h];for(var R,L,z=[],j=0;j<_;j++){var ae=Et(h[j]);ae!==0&&(h[j].area=Math.abs(ae),L===void 0&&(L=ae<0),L===ae<0?(R&&z.push(R),R=[h[j]]):R.push(h[j]))}if(R&&z.push(R),v>1)for(var Se=0;Se<z.length;Se++)z[Se].length<=v||(Rp(z[Se],v,1,z[Se].length-1,Hd),z[Se]=z[Se].slice(0,v));return z}function Hd(h,v){return v.area-h.area}function dd(h,v,_){for(var R=_.patternDependencies,L=!1,z=0,j=v;z<j.length;z+=1){var ae=j[z].paint.get(h+"-pattern");ae.isConstant()||(L=!0);var Se=ae.constantOr(null);Se&&(L=!0,R[Se.to]=!0,R[Se.from]=!0)}return L}function Tv(h,v,_,R,L){for(var z=L.patternDependencies,j=0,ae=v;j<ae.length;j+=1){var Se=ae[j],He=Se.paint.get(h+"-pattern").value;if(He.kind!=="constant"){var rt=He.evaluate({zoom:R-1},_,{},L.availableImages),ht=He.evaluate({zoom:R},_,{},L.availableImages),Mt=He.evaluate({zoom:R+1},_,{},L.availableImages);ht=ht&&ht.name?ht.name:ht,Mt=Mt&&Mt.name?Mt.name:Mt,z[rt=rt&&rt.name?rt.name:rt]=!0,z[ht]=!0,z[Mt]=!0,_.patterns[Se.id]={min:rt,mid:ht,max:Mt}}}return _}Zd.deviation=function(h,v,_,R){var L=v&&v.length,z=Math.abs(tl(h,0,L?v[0]*_:h.length,_));if(L)for(var j=0,ae=v.length;j<ae;j++)z-=Math.abs(tl(h,v[j]*_,j<ae-1?v[j+1]*_:h.length,_));var Se=0;for(j=0;j<R.length;j+=3){var He=R[j]*_,rt=R[j+1]*_,ht=R[j+2]*_;Se+=Math.abs((h[He]-h[ht])*(h[rt+1]-h[He+1])-(h[He]-h[rt])*(h[ht+1]-h[He+1]))}return z===0&&Se===0?0:Math.abs((Se-z)/z)},Zd.flatten=function(h){for(var v=h[0][0].length,_={vertices:[],holes:[],dimensions:v},R=0,L=0;L<h.length;L++){for(var z=0;z<h[L].length;z++)for(var j=0;j<v;j++)_.vertices.push(h[L][z][j]);L>0&&_.holes.push(R+=h[L-1].length)}return _},wv.default=Cv;var Qc=function(h){this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(function(v){return v.id}),this.index=h.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new dh,this.indexArray=new Yc,this.indexArray2=new Cl,this.programConfigurations=new pa(h.layers,h.zoom),this.segments=new Zt,this.segments2=new Zt,this.stateDependentLayerIds=this.layers.filter(function(v){return v.isStateDependent()}).map(function(v){return v.id})};Qc.prototype.populate=function(h,v,_){this.hasPattern=dd("fill",this.layers,v);for(var R=this.layers[0].layout.get("fill-sort-key"),L=[],z=0,j=h;z<j.length;z+=1){var ae=j[z],Se=ae.feature,He=ae.id,rt=ae.index,ht=ae.sourceLayerIndex,Mt=this.layers[0]._featureFilter.needGeometry,Nt=vs(Se,Mt);if(this.layers[0]._featureFilter.filter(new $a(this.zoom),Nt,_)){var er=R?R.evaluate(Nt,{},_,v.availableImages):void 0,ar={id:He,properties:Se.properties,type:Se.type,sourceLayerIndex:ht,index:rt,geometry:Mt?Nt.geometry:Qo(Se),patterns:{},sortKey:er};L.push(ar)}}R&&L.sort(function(oi,bi){return oi.sortKey-bi.sortKey});for(var Mr=0,_r=L;Mr<_r.length;Mr+=1){var Ur=_r[Mr],Kr=Ur.geometry,nn=Ur.index,yn=Ur.sourceLayerIndex;if(this.hasPattern){var Pn=Tv("fill",this.layers,Ur,this.zoom,v);this.patternFeatures.push(Pn)}else this.addFeature(Ur,Kr,nn,_,{});v.featureIndex.insert(h[nn].feature,Kr,nn,yn,this.index)}},Qc.prototype.update=function(h,v,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,v,this.stateDependentLayers,_)},Qc.prototype.addFeatures=function(h,v,_){for(var R=0,L=this.patternFeatures;R<L.length;R+=1){var z=L[R];this.addFeature(z,z.geometry,z.index,v,_)}},Qc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Qc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Qc.prototype.upload=function(h){this.uploaded||(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,k0),this.indexBuffer=h.createIndexBuffer(this.indexArray),this.indexBuffer2=h.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(h),this.uploaded=!0},Qc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Qc.prototype.addFeature=function(h,v,_,R,L){for(var z=0,j=Av(v,500);z<j.length;z+=1){for(var ae=j[z],Se=0,He=0,rt=ae;He<rt.length;He+=1)Se+=rt[He].length;for(var ht=this.segments.prepareSegment(Se,this.layoutVertexArray,this.indexArray),Mt=ht.vertexLength,Nt=[],er=[],ar=0,Mr=ae;ar<Mr.length;ar+=1){var _r=Mr[ar];if(_r.length!==0){_r!==ae[0]&&er.push(Nt.length/2);var Ur=this.segments2.prepareSegment(_r.length,this.layoutVertexArray,this.indexArray2),Kr=Ur.vertexLength;this.layoutVertexArray.emplaceBack(_r[0].x,_r[0].y),this.indexArray2.emplaceBack(Kr+_r.length-1,Kr),Nt.push(_r[0].x),Nt.push(_r[0].y);for(var nn=1;nn<_r.length;nn++)this.layoutVertexArray.emplaceBack(_r[nn].x,_r[nn].y),this.indexArray2.emplaceBack(Kr+nn-1,Kr+nn),Nt.push(_r[nn].x),Nt.push(_r[nn].y);Ur.vertexLength+=_r.length,Ur.primitiveLength+=_r.length}}for(var yn=wv(Nt,er),Pn=0;Pn<yn.length;Pn+=3)this.indexArray.emplaceBack(Mt+yn[Pn],Mt+yn[Pn+1],Mt+yn[Pn+2]);ht.vertexLength+=Se,ht.primitiveLength+=yn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,_,L,R)},zi("FillBucket",Qc,{omit:["layers","patternFeatures"]});var Zh=new As({"fill-sort-key":new Ei(kt.layout_fill["fill-sort-key"])}),jd={paint:new As({"fill-antialias":new ea(kt.paint_fill["fill-antialias"]),"fill-opacity":new Ei(kt.paint_fill["fill-opacity"]),"fill-color":new Ei(kt.paint_fill["fill-color"]),"fill-outline-color":new Ei(kt.paint_fill["fill-outline-color"]),"fill-translate":new ea(kt.paint_fill["fill-translate"]),"fill-translate-anchor":new ea(kt.paint_fill["fill-translate-anchor"]),"fill-pattern":new wl(kt.paint_fill["fill-pattern"])}),layout:Zh},dm=function(h){function v(_){h.call(this,_,jd)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.recalculate=function(_,R){h.prototype.recalculate.call(this,_,R);var L=this.paint._values["fill-outline-color"];L.value.kind==="constant"&&L.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},v.prototype.createBucket=function(_){return new Qc(_)},v.prototype.queryRadius=function(){return Ts(this.paint.get("fill-translate"))},v.prototype.queryIntersectsFeature=function(_,R,L,z,j,ae,Se){return hc(ru(_,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),ae.angle,Se),z)},v.prototype.isTileClipped=function(){return!0},v}(cc),Mv=js([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,vm=os;function os(h,v,_,R,L){this.properties={},this.extent=_,this.type=0,this._pbf=h,this._geometry=-1,this._keys=R,this._values=L,h.readFields(mh,this,v)}function mh(h,v,_){h==1?v.id=_.readVarint():h==2?function(R,L){for(var z=R.readVarint()+R.pos;R.pos<z;){var j=L._keys[R.readVarint()],ae=L._values[R.readVarint()];L.properties[j]=ae}}(_,v):h==3?v.type=_.readVarint():h==4&&(v._geometry=_.pos)}function Zf(h){for(var v,_,R=0,L=0,z=h.length,j=z-1;L<z;j=L++)R+=((_=h[j]).x-(v=h[L]).x)*(v.y+_.y);return R}os.types=["Unknown","Point","LineString","Polygon"],os.prototype.loadGeometry=function(){var h=this._pbf;h.pos=this._geometry;for(var v,_=h.readVarint()+h.pos,R=1,L=0,z=0,j=0,ae=[];h.pos<_;){if(L<=0){var Se=h.readVarint();R=7&Se,L=Se>>3}if(L--,R===1||R===2)z+=h.readSVarint(),j+=h.readSVarint(),R===1&&(v&&ae.push(v),v=[]),v.push(new Q(z,j));else{if(R!==7)throw new Error("unknown command "+R);v&&v.push(v[0].clone())}}return v&&ae.push(v),ae},os.prototype.bbox=function(){var h=this._pbf;h.pos=this._geometry;for(var v=h.readVarint()+h.pos,_=1,R=0,L=0,z=0,j=1/0,ae=-1/0,Se=1/0,He=-1/0;h.pos<v;){if(R<=0){var rt=h.readVarint();_=7&rt,R=rt>>3}if(R--,_===1||_===2)(L+=h.readSVarint())<j&&(j=L),L>ae&&(ae=L),(z+=h.readSVarint())<Se&&(Se=z),z>He&&(He=z);else if(_!==7)throw new Error("unknown command "+_)}return[j,Se,ae,He]},os.prototype.toGeoJSON=function(h,v,_){var R,L,z=this.extent*Math.pow(2,_),j=this.extent*h,ae=this.extent*v,Se=this.loadGeometry(),He=os.types[this.type];function rt(Nt){for(var er=0;er<Nt.length;er++){var ar=Nt[er];Nt[er]=[360*(ar.x+j)/z-180,360/Math.PI*Math.atan(Math.exp((180-360*(ar.y+ae)/z)*Math.PI/180))-90]}}switch(this.type){case 1:var ht=[];for(R=0;R<Se.length;R++)ht[R]=Se[R][0];rt(Se=ht);break;case 2:for(R=0;R<Se.length;R++)rt(Se[R]);break;case 3:for(Se=function(Nt){var er=Nt.length;if(er<=1)return[Nt];for(var ar,Mr,_r=[],Ur=0;Ur<er;Ur++){var Kr=Zf(Nt[Ur]);Kr!==0&&(Mr===void 0&&(Mr=Kr<0),Mr===Kr<0?(ar&&_r.push(ar),ar=[Nt[Ur]]):ar.push(Nt[Ur]))}return ar&&_r.push(ar),_r}(Se),R=0;R<Se.length;R++)for(L=0;L<Se[R].length;L++)rt(Se[R][L])}Se.length===1?Se=Se[0]:He="Multi"+He;var Mt={type:"Feature",geometry:{type:He,coordinates:Se},properties:this.properties};return"id"in this&&(Mt.id=this.id),Mt};var vd=yf;function yf(h,v){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=h,this._keys=[],this._values=[],this._features=[],h.readFields(yh,this,v),this.length=this._features.length}function yh(h,v,_){h===15?v.version=_.readVarint():h===1?v.name=_.readString():h===5?v.extent=_.readVarint():h===2?v._features.push(_.pos):h===3?v._keys.push(_.readString()):h===4&&v._values.push(function(R){for(var L=null,z=R.readVarint()+R.pos;R.pos<z;){var j=R.readVarint()>>3;L=j===1?R.readString():j===2?R.readFloat():j===3?R.readDouble():j===4?R.readVarint64():j===5?R.readVarint():j===6?R.readSVarint():j===7?R.readBoolean():null}return L}(_))}function Ip(h,v,_){if(h===3){var R=new vd(_,_.readVarint()+_.pos);R.length&&(v[R.name]=R)}}yf.prototype.feature=function(h){if(h<0||h>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[h];var v=this._pbf.readVarint()+this._pbf.pos;return new vm(this._pbf,v,this.extent,this._keys,this._values)};var Pp={VectorTile:function(h,v){this.layers=h.readFields(Ip,{},v)},VectorTileFeature:vm,VectorTileLayer:vd},Rl=Pp.VectorTileFeature.types,Vf=Math.pow(2,13);function $o(h,v,_,R,L,z,j,ae){h.emplaceBack(v,_,2*Math.floor(R*Vf)+j,L*Vf*2,z*Vf*2,Math.round(ae))}var Il=function(h){this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(function(v){return v.id}),this.index=h.index,this.hasPattern=!1,this.layoutVertexArray=new fc,this.indexArray=new Yc,this.programConfigurations=new pa(h.layers,h.zoom),this.segments=new Zt,this.stateDependentLayerIds=this.layers.filter(function(v){return v.isStateDependent()}).map(function(v){return v.id})};function Au(h,v){return h.x===v.x&&(h.x<0||h.x>8192)||h.y===v.y&&(h.y<0||h.y>8192)}Il.prototype.populate=function(h,v,_){this.features=[],this.hasPattern=dd("fill-extrusion",this.layers,v);for(var R=0,L=h;R<L.length;R+=1){var z=L[R],j=z.feature,ae=z.id,Se=z.index,He=z.sourceLayerIndex,rt=this.layers[0]._featureFilter.needGeometry,ht=vs(j,rt);if(this.layers[0]._featureFilter.filter(new $a(this.zoom),ht,_)){var Mt={id:ae,sourceLayerIndex:He,index:Se,geometry:rt?ht.geometry:Qo(j),properties:j.properties,type:j.type,patterns:{}};this.hasPattern?this.features.push(Tv("fill-extrusion",this.layers,Mt,this.zoom,v)):this.addFeature(Mt,Mt.geometry,Se,_,{}),v.featureIndex.insert(j,Mt.geometry,Se,He,this.index,!0)}}},Il.prototype.addFeatures=function(h,v,_){for(var R=0,L=this.features;R<L.length;R+=1){var z=L[R];this.addFeature(z,z.geometry,z.index,v,_)}},Il.prototype.update=function(h,v,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,v,this.stateDependentLayers,_)},Il.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Il.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Il.prototype.upload=function(h){this.uploaded||(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,Mv),this.indexBuffer=h.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(h),this.uploaded=!0},Il.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Il.prototype.addFeature=function(h,v,_,R,L){for(var z=0,j=Av(v,500);z<j.length;z+=1){for(var ae=j[z],Se=0,He=0,rt=ae;He<rt.length;He+=1)Se+=rt[He].length;for(var ht=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Mt=0,Nt=ae;Mt<Nt.length;Mt+=1){var er=Nt[Mt];if(er.length!==0&&!((fo=er).every(function(ja){return ja.x<0})||fo.every(function(ja){return ja.x>8192})||fo.every(function(ja){return ja.y<0})||fo.every(function(ja){return ja.y>8192})))for(var ar=0,Mr=0;Mr<er.length;Mr++){var _r=er[Mr];if(Mr>=1){var Ur=er[Mr-1];if(!Au(_r,Ur)){ht.vertexLength+4>Zt.MAX_VERTEX_ARRAY_LENGTH&&(ht=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Kr=_r.sub(Ur)._perp()._unit(),nn=Ur.dist(_r);ar+nn>32768&&(ar=0),$o(this.layoutVertexArray,_r.x,_r.y,Kr.x,Kr.y,0,0,ar),$o(this.layoutVertexArray,_r.x,_r.y,Kr.x,Kr.y,0,1,ar),$o(this.layoutVertexArray,Ur.x,Ur.y,Kr.x,Kr.y,0,0,ar+=nn),$o(this.layoutVertexArray,Ur.x,Ur.y,Kr.x,Kr.y,0,1,ar);var yn=ht.vertexLength;this.indexArray.emplaceBack(yn,yn+2,yn+1),this.indexArray.emplaceBack(yn+1,yn+2,yn+3),ht.vertexLength+=4,ht.primitiveLength+=2}}}}if(ht.vertexLength+Se>Zt.MAX_VERTEX_ARRAY_LENGTH&&(ht=this.segments.prepareSegment(Se,this.layoutVertexArray,this.indexArray)),Rl[h.type]==="Polygon"){for(var Pn=[],oi=[],bi=ht.vertexLength,Qi=0,Fi=ae;Qi<Fi.length;Qi+=1){var ca=Fi[Qi];if(ca.length!==0){ca!==ae[0]&&oi.push(Pn.length/2);for(var Ri=0;Ri<ca.length;Ri++){var Qa=ca[Ri];$o(this.layoutVertexArray,Qa.x,Qa.y,0,0,1,1,0),Pn.push(Qa.x),Pn.push(Qa.y)}}}for(var Ji=wv(Pn,oi),Wi=0;Wi<Ji.length;Wi+=3)this.indexArray.emplaceBack(bi+Ji[Wi],bi+Ji[Wi+2],bi+Ji[Wi+1]);ht.primitiveLength+=Ji.length/3,ht.vertexLength+=Se}}var fo;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,_,L,R)},zi("FillExtrusionBucket",Il,{omit:["layers","features"]});var pl={paint:new As({"fill-extrusion-opacity":new ea(kt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ei(kt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ea(kt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ea(kt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new wl(kt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ei(kt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ei(kt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ea(kt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},gm=function(h){function v(_){h.call(this,_,pl)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.createBucket=function(_){return new Il(_)},v.prototype.queryRadius=function(){return Ts(this.paint.get("fill-extrusion-translate"))},v.prototype.is3D=function(){return!0},v.prototype.queryIntersectsFeature=function(_,R,L,z,j,ae,Se,He){var rt=ru(_,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),ae.angle,Se),ht=this.paint.get("fill-extrusion-height").evaluate(R,L),Mt=this.paint.get("fill-extrusion-base").evaluate(R,L),Nt=function(ar,Mr,_r,Ur){for(var Kr=[],nn=0,yn=ar;nn<yn.length;nn+=1){var Pn=yn[nn],oi=[Pn.x,Pn.y,0,1];mf(oi,oi,Mr),Kr.push(new Q(oi[0]/oi[3],oi[1]/oi[3]))}return Kr}(rt,He),er=function(ar,Mr,_r,Ur){for(var Kr=[],nn=[],yn=Ur[8]*Mr,Pn=Ur[9]*Mr,oi=Ur[10]*Mr,bi=Ur[11]*Mr,Qi=Ur[8]*_r,Fi=Ur[9]*_r,ca=Ur[10]*_r,Ri=Ur[11]*_r,Qa=0,Ji=ar;Qa<Ji.length;Qa+=1){for(var Wi=[],fo=[],ja=0,io=Ji[Qa];ja<io.length;ja+=1){var fi=io[ja],Ao=fi.x,Ms=fi.y,qs=Ur[0]*Ao+Ur[4]*Ms+Ur[12],ms=Ur[1]*Ao+Ur[5]*Ms+Ur[13],ys=Ur[2]*Ao+Ur[6]*Ms+Ur[14],nu=Ur[3]*Ao+Ur[7]*Ms+Ur[15],Ls=ys+oi,iu=nu+bi,Nu=qs+Qi,nl=ms+Fi,il=ys+ca,gu=nu+Ri,al=new Q((qs+yn)/iu,(ms+Pn)/iu);al.z=Ls/iu,Wi.push(al);var Ba=new Q(Nu/gu,nl/gu);Ba.z=il/gu,fo.push(Ba)}Kr.push(Wi),nn.push(fo)}return[Kr,nn]}(z,Mt,ht,He);return function(ar,Mr,_r){var Ur=1/0;hc(_r,Mr)&&(Ur=pg(_r,Mr[0]));for(var Kr=0;Kr<Mr.length;Kr++)for(var nn=Mr[Kr],yn=ar[Kr],Pn=0;Pn<nn.length-1;Pn++){var oi=nn[Pn],bi=[oi,nn[Pn+1],yn[Pn+1],yn[Pn],oi];Kc(_r,bi)&&(Ur=Math.min(Ur,pg(_r,bi)))}return Ur!==1/0&&Ur}(er[0],er[1],Nt)},v}(cc);function Op(h,v){return h.x*v.x+h.y*v.y}function pg(h,v){if(h.length===1){for(var _,R=0,L=v[R++];!_||L.equals(_);)if(!(_=v[R++]))return 1/0;for(;R<v.length;R++){var z=v[R],j=h[0],ae=_.sub(L),Se=z.sub(L),He=j.sub(L),rt=Op(ae,ae),ht=Op(ae,Se),Mt=Op(Se,Se),Nt=Op(He,ae),er=Op(He,Se),ar=rt*Mt-ht*ht,Mr=(Mt*Nt-ht*er)/ar,_r=(rt*er-ht*Nt)/ar,Ur=L.z*(1-Mr-_r)+_.z*Mr+z.z*_r;if(isFinite(Ur))return Ur}return 1/0}for(var Kr=1/0,nn=0,yn=v;nn<yn.length;nn+=1)Kr=Math.min(Kr,yn[nn].z);return Kr}var Vh=js([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Rv=js([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,mm=Pp.VectorTileFeature.types,_f=Math.cos(Math.PI/180*37.5),ym=Math.pow(2,14)/.5,dl=function(h){var v=this;this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(function(_){return _.id}),this.index=h.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(_){v.gradients[_.id]={}}),this.layoutVertexArray=new Ra,this.layoutVertexArray2=new vh,this.indexArray=new Yc,this.programConfigurations=new pa(h.layers,h.zoom),this.segments=new Zt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(_){return _.isStateDependent()}).map(function(_){return _.id})};dl.prototype.populate=function(h,v,_){this.hasPattern=dd("line",this.layers,v);for(var R=this.layers[0].layout.get("line-sort-key"),L=[],z=0,j=h;z<j.length;z+=1){var ae=j[z],Se=ae.feature,He=ae.id,rt=ae.index,ht=ae.sourceLayerIndex,Mt=this.layers[0]._featureFilter.needGeometry,Nt=vs(Se,Mt);if(this.layers[0]._featureFilter.filter(new $a(this.zoom),Nt,_)){var er=R?R.evaluate(Nt,{},_):void 0,ar={id:He,properties:Se.properties,type:Se.type,sourceLayerIndex:ht,index:rt,geometry:Mt?Nt.geometry:Qo(Se),patterns:{},sortKey:er};L.push(ar)}}R&&L.sort(function(oi,bi){return oi.sortKey-bi.sortKey});for(var Mr=0,_r=L;Mr<_r.length;Mr+=1){var Ur=_r[Mr],Kr=Ur.geometry,nn=Ur.index,yn=Ur.sourceLayerIndex;if(this.hasPattern){var Pn=Tv("line",this.layers,Ur,this.zoom,v);this.patternFeatures.push(Pn)}else this.addFeature(Ur,Kr,nn,_,{});v.featureIndex.insert(h[nn].feature,Kr,nn,yn,this.index)}},dl.prototype.update=function(h,v,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,v,this.stateDependentLayers,_)},dl.prototype.addFeatures=function(h,v,_){for(var R=0,L=this.patternFeatures;R<L.length;R+=1){var z=L[R];this.addFeature(z,z.geometry,z.index,v,_)}},dl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},dl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},dl.prototype.upload=function(h){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=h.createVertexBuffer(this.layoutVertexArray2,Rv)),this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,Vh),this.indexBuffer=h.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(h),this.uploaded=!0},dl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},dl.prototype.lineFeatureClips=function(h){if(h.properties&&h.properties.hasOwnProperty("mapbox_clip_start")&&h.properties.hasOwnProperty("mapbox_clip_end"))return{start:+h.properties.mapbox_clip_start,end:+h.properties.mapbox_clip_end}},dl.prototype.addFeature=function(h,v,_,R,L){var z=this.layers[0].layout,j=z.get("line-join").evaluate(h,{}),ae=z.get("line-cap"),Se=z.get("line-miter-limit"),He=z.get("line-round-limit");this.lineClips=this.lineFeatureClips(h);for(var rt=0,ht=v;rt<ht.length;rt+=1)this.addLine(ht[rt],h,j,ae,Se,He);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,_,L,R)},dl.prototype.addLine=function(h,v,_,R,L,z){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var j=0;j<h.length-1;j++)this.totalDistance+=h[j].dist(h[j+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var ae=mm[v.type]==="Polygon",Se=h.length;Se>=2&&h[Se-1].equals(h[Se-2]);)Se--;for(var He=0;He<Se-1&&h[He].equals(h[He+1]);)He++;if(!(Se<(ae?3:2))){_==="bevel"&&(L=1.05);var rt,ht=this.overscaling<=16?122880/(512*this.overscaling):0,Mt=this.segments.prepareSegment(10*Se,this.layoutVertexArray,this.indexArray),Nt=void 0,er=void 0,ar=void 0,Mr=void 0;this.e1=this.e2=-1,ae&&(Mr=h[He].sub(rt=h[Se-2])._unit()._perp());for(var _r=He;_r<Se;_r++)if(!(er=_r===Se-1?ae?h[He+1]:void 0:h[_r+1])||!h[_r].equals(er)){Mr&&(ar=Mr),rt&&(Nt=rt),rt=h[_r],Mr=er?er.sub(rt)._unit()._perp():ar;var Ur=(ar=ar||Mr).add(Mr);Ur.x===0&&Ur.y===0||Ur._unit();var Kr=ar.x*Mr.x+ar.y*Mr.y,nn=Ur.x*Mr.x+Ur.y*Mr.y,yn=nn!==0?1/nn:1/0,Pn=2*Math.sqrt(2-2*nn),oi=nn<_f&&Nt&&er,bi=ar.x*Mr.y-ar.y*Mr.x>0;if(oi&&_r>He){var Qi=rt.dist(Nt);if(Qi>2*ht){var Fi=rt.sub(rt.sub(Nt)._mult(ht/Qi)._round());this.updateDistance(Nt,Fi),this.addCurrentVertex(Fi,ar,0,0,Mt),Nt=Fi}}var ca=Nt&&er,Ri=ca?_:ae?"butt":R;if(ca&&Ri==="round"&&(yn<z?Ri="miter":yn<=2&&(Ri="fakeround")),Ri==="miter"&&yn>L&&(Ri="bevel"),Ri==="bevel"&&(yn>2&&(Ri="flipbevel"),yn<L&&(Ri="miter")),Nt&&this.updateDistance(Nt,rt),Ri==="miter")Ur._mult(yn),this.addCurrentVertex(rt,Ur,0,0,Mt);else if(Ri==="flipbevel"){if(yn>100)Ur=Mr.mult(-1);else{var Qa=yn*ar.add(Mr).mag()/ar.sub(Mr).mag();Ur._perp()._mult(Qa*(bi?-1:1))}this.addCurrentVertex(rt,Ur,0,0,Mt),this.addCurrentVertex(rt,Ur.mult(-1),0,0,Mt)}else if(Ri==="bevel"||Ri==="fakeround"){var Ji=-Math.sqrt(yn*yn-1),Wi=bi?Ji:0,fo=bi?0:Ji;if(Nt&&this.addCurrentVertex(rt,ar,Wi,fo,Mt),Ri==="fakeround")for(var ja=Math.round(180*Pn/Math.PI/20),io=1;io<ja;io++){var fi=io/ja;if(fi!==.5){var Ao=fi-.5;fi+=fi*Ao*(fi-1)*((1.0904+Kr*(Kr*(3.55645-1.43519*Kr)-3.2452))*Ao*Ao+(.848013+Kr*(.215638*Kr-1.06021)))}var Ms=Mr.sub(ar)._mult(fi)._add(ar)._unit()._mult(bi?-1:1);this.addHalfVertex(rt,Ms.x,Ms.y,!1,bi,0,Mt)}er&&this.addCurrentVertex(rt,Mr,-Wi,-fo,Mt)}else if(Ri==="butt")this.addCurrentVertex(rt,Ur,0,0,Mt);else if(Ri==="square"){var qs=Nt?1:-1;this.addCurrentVertex(rt,Ur,qs,qs,Mt)}else Ri==="round"&&(Nt&&(this.addCurrentVertex(rt,ar,0,0,Mt),this.addCurrentVertex(rt,ar,1,1,Mt,!0)),er&&(this.addCurrentVertex(rt,Mr,-1,-1,Mt,!0),this.addCurrentVertex(rt,Mr,0,0,Mt)));if(oi&&_r<Se-1){var ms=rt.dist(er);if(ms>2*ht){var ys=rt.add(er.sub(rt)._mult(ht/ms)._round());this.updateDistance(rt,ys),this.addCurrentVertex(ys,Mr,0,0,Mt),rt=ys}}}}},dl.prototype.addCurrentVertex=function(h,v,_,R,L,z){z===void 0&&(z=!1);var j=v.y*R-v.x,ae=-v.y-v.x*R;this.addHalfVertex(h,v.x+v.y*_,v.y-v.x*_,z,!1,_,L),this.addHalfVertex(h,j,ae,z,!0,-R,L),this.distance>ym/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(h,v,_,R,L,z))},dl.prototype.addHalfVertex=function(h,v,_,R,L,z,j){var ae=.5*(this.lineClips?this.scaledDistance*(ym-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((h.x<<1)+(R?1:0),(h.y<<1)+(L?1:0),Math.round(63*v)+128,Math.round(63*_)+128,1+(z===0?0:z<0?-1:1)|(63&ae)<<2,ae>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var Se=j.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Se),j.primitiveLength++),L?this.e2=Se:this.e1=Se},dl.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},dl.prototype.updateDistance=function(h,v){this.distance+=h.dist(v),this.updateScaledDistance()},zi("LineBucket",dl,{omit:["layers","patternFeatures"]});var L0=new As({"line-cap":new ea(kt.layout_line["line-cap"]),"line-join":new Ei(kt.layout_line["line-join"]),"line-miter-limit":new ea(kt.layout_line["line-miter-limit"]),"line-round-limit":new ea(kt.layout_line["line-round-limit"]),"line-sort-key":new Ei(kt.layout_line["line-sort-key"])}),Iv={paint:new As({"line-opacity":new Ei(kt.paint_line["line-opacity"]),"line-color":new Ei(kt.paint_line["line-color"]),"line-translate":new ea(kt.paint_line["line-translate"]),"line-translate-anchor":new ea(kt.paint_line["line-translate-anchor"]),"line-width":new Ei(kt.paint_line["line-width"]),"line-gap-width":new Ei(kt.paint_line["line-gap-width"]),"line-offset":new Ei(kt.paint_line["line-offset"]),"line-blur":new Ei(kt.paint_line["line-blur"]),"line-dasharray":new Ju(kt.paint_line["line-dasharray"]),"line-pattern":new wl(kt.paint_line["line-pattern"]),"line-gradient":new Gu(kt.paint_line["line-gradient"])}),layout:L0},kp=new(function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.possiblyEvaluate=function(_,R){return R=new $a(Math.floor(R.zoom),{now:R.now,fadeDuration:R.fadeDuration,zoomHistory:R.zoomHistory,transition:R.transition}),h.prototype.possiblyEvaluate.call(this,_,R)},v.prototype.evaluate=function(_,R,L,z){return R=E({},R,{zoom:Math.floor(R.zoom)}),h.prototype.evaluate.call(this,_,R,L,z)},v}(Ei))(Iv.paint.properties["line-width"].specification);kp.useIntegerZoom=!0;var Fp=function(h){function v(_){h.call(this,_,Iv),this.gradientVersion=0}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._handleSpecialPaintPropertyUpdate=function(_){_==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Es,this.gradientVersion=(this.gradientVersion+1)%xe)},v.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},v.prototype.recalculate=function(_,R){h.prototype.recalculate.call(this,_,R),this.paint._values["line-floorwidth"]=kp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,_)},v.prototype.createBucket=function(_){return new dl(_)},v.prototype.queryRadius=function(_){var R=_,L=dg(ku("line-width",this,R),ku("line-gap-width",this,R)),z=ku("line-offset",this,R);return L/2+Math.abs(z)+Ts(this.paint.get("line-translate"))},v.prototype.queryIntersectsFeature=function(_,R,L,z,j,ae,Se){var He=ru(_,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),ae.angle,Se),rt=Se/2*dg(this.paint.get("line-width").evaluate(R,L),this.paint.get("line-gap-width").evaluate(R,L)),ht=this.paint.get("line-offset").evaluate(R,L);return ht&&(z=function(Mt,Nt){for(var er=[],ar=new Q(0,0),Mr=0;Mr<Mt.length;Mr++){for(var _r=Mt[Mr],Ur=[],Kr=0;Kr<_r.length;Kr++){var nn=_r[Kr],yn=_r[Kr+1],Pn=Kr===0?ar:nn.sub(_r[Kr-1])._unit()._perp(),oi=Kr===_r.length-1?ar:yn.sub(nn)._unit()._perp(),bi=Pn._add(oi)._unit();bi._mult(1/(bi.x*oi.x+bi.y*oi.y)),Ur.push(bi._mult(Nt)._add(nn))}er.push(Ur)}return er}(z,ht*Se)),function(Mt,Nt,er){for(var ar=0;ar<Nt.length;ar++){var Mr=Nt[ar];if(Mt.length>=3){for(var _r=0;_r<Mr.length;_r++)if(dc(Mt,Mr[_r]))return!0}if(hl(Mt,Mr,er))return!0}return!1}(He,z,rt)},v.prototype.isTileClipped=function(){return!0},v}(cc);function dg(h,v){return v>0?v+2*h:h}var vg=js([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),B0=js([{name:"a_projected_pos",components:3,type:"Float32"}],4),Hh=(js([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),js([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),_m=(js([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),js([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Xe=js([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Gt(h,v,_){return h.sections.forEach(function(R){R.text=function(L,z,j){var ae=z.layout.get("text-transform").evaluate(j,{});return ae==="uppercase"?L=L.toLocaleUpperCase():ae==="lowercase"&&(L=L.toLocaleLowerCase()),tu.applyArabicShaping&&(L=tu.applyArabicShaping(L)),L}(R.text,v,_)}),h}js([{name:"triangle",components:3,type:"Uint16"}]),js([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),js([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),js([{type:"Float32",name:"offsetX"}]),js([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var dr={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},on=function(h,v,_,R,L){var z,j,ae=8*L-R-1,Se=(1<<ae)-1,He=Se>>1,rt=-7,ht=_?L-1:0,Mt=_?-1:1,Nt=h[v+ht];for(ht+=Mt,z=Nt&(1<<-rt)-1,Nt>>=-rt,rt+=ae;rt>0;z=256*z+h[v+ht],ht+=Mt,rt-=8);for(j=z&(1<<-rt)-1,z>>=-rt,rt+=R;rt>0;j=256*j+h[v+ht],ht+=Mt,rt-=8);if(z===0)z=1-He;else{if(z===Se)return j?NaN:1/0*(Nt?-1:1);j+=Math.pow(2,R),z-=He}return(Nt?-1:1)*j*Math.pow(2,z-R)},wn=function(h,v,_,R,L,z){var j,ae,Se,He=8*z-L-1,rt=(1<<He)-1,ht=rt>>1,Mt=L===23?Math.pow(2,-24)-Math.pow(2,-77):0,Nt=R?0:z-1,er=R?1:-1,ar=v<0||v===0&&1/v<0?1:0;for(v=Math.abs(v),isNaN(v)||v===1/0?(ae=isNaN(v)?1:0,j=rt):(j=Math.floor(Math.log(v)/Math.LN2),v*(Se=Math.pow(2,-j))<1&&(j--,Se*=2),(v+=j+ht>=1?Mt/Se:Mt*Math.pow(2,1-ht))*Se>=2&&(j++,Se/=2),j+ht>=rt?(ae=0,j=rt):j+ht>=1?(ae=(v*Se-1)*Math.pow(2,L),j+=ht):(ae=v*Math.pow(2,ht-1)*Math.pow(2,L),j=0));L>=8;h[_+Nt]=255&ae,Nt+=er,ae/=256,L-=8);for(j=j<<L|ae,He+=L;He>0;h[_+Nt]=255&j,Nt+=er,j/=256,He-=8);h[_+Nt-er]|=128*ar},un=Yr;function Yr(h){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(h)?h:new Uint8Array(h||0),this.pos=0,this.type=0,this.length=this.buf.length}Yr.Varint=0,Yr.Fixed64=1,Yr.Bytes=2,Yr.Fixed32=5;var Yn=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function zn(h){return h.type===Yr.Bytes?h.readVarint()+h.pos:h.pos+1}function li(h,v,_){return _?4294967296*v+(h>>>0):4294967296*(v>>>0)+(h>>>0)}function ni(h,v,_){var R=v<=16383?1:v<=2097151?2:v<=268435455?3:Math.floor(Math.log(v)/(7*Math.LN2));_.realloc(R);for(var L=_.pos-1;L>=h;L--)_.buf[L+R]=_.buf[L]}function ai(h,v){for(var _=0;_<h.length;_++)v.writeVarint(h[_])}function xi(h,v){for(var _=0;_<h.length;_++)v.writeSVarint(h[_])}function En(h,v){for(var _=0;_<h.length;_++)v.writeFloat(h[_])}function ci(h,v){for(var _=0;_<h.length;_++)v.writeDouble(h[_])}function jr(h,v){for(var _=0;_<h.length;_++)v.writeBoolean(h[_])}function mn(h,v){for(var _=0;_<h.length;_++)v.writeFixed32(h[_])}function ti(h,v){for(var _=0;_<h.length;_++)v.writeSFixed32(h[_])}function Ci(h,v){for(var _=0;_<h.length;_++)v.writeFixed64(h[_])}function Vr(h,v){for(var _=0;_<h.length;_++)v.writeSFixed64(h[_])}function Bi(h,v){return(h[v]|h[v+1]<<8|h[v+2]<<16)+16777216*h[v+3]}function Wn(h,v,_){h[_]=v,h[_+1]=v>>>8,h[_+2]=v>>>16,h[_+3]=v>>>24}function Ti(h,v){return(h[v]|h[v+1]<<8|h[v+2]<<16)+(h[v+3]<<24)}function Ln(h,v,_){h===1&&_.readMessage(wi,v)}function wi(h,v,_){if(h===3){var R=_.readMessage(ta,{}),L=R.width,z=R.height,j=R.left,ae=R.top,Se=R.advance;v.push({id:R.id,bitmap:new Uf({width:L+6,height:z+6},R.bitmap),metrics:{width:L,height:z,left:j,top:ae,advance:Se}})}}function ta(h,v,_){h===1?v.id=_.readVarint():h===2?v.bitmap=_.readBytes():h===3?v.width=_.readVarint():h===4?v.height=_.readVarint():h===5?v.left=_.readSVarint():h===6?v.top=_.readSVarint():h===7&&(v.advance=_.readVarint())}function Ua(h){for(var v=0,_=0,R=0,L=h;R<L.length;R+=1){var z=L[R];v+=z.w*z.h,_=Math.max(_,z.w)}h.sort(function(ar,Mr){return Mr.h-ar.h});for(var j=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(v/.95)),_),h:1/0}],ae=0,Se=0,He=0,rt=h;He<rt.length;He+=1)for(var ht=rt[He],Mt=j.length-1;Mt>=0;Mt--){var Nt=j[Mt];if(!(ht.w>Nt.w||ht.h>Nt.h)){if(ht.x=Nt.x,ht.y=Nt.y,Se=Math.max(Se,ht.y+ht.h),ae=Math.max(ae,ht.x+ht.w),ht.w===Nt.w&&ht.h===Nt.h){var er=j.pop();Mt<j.length&&(j[Mt]=er)}else ht.h===Nt.h?(Nt.x+=ht.w,Nt.w-=ht.w):ht.w===Nt.w?(Nt.y+=ht.h,Nt.h-=ht.h):(j.push({x:Nt.x+ht.w,y:Nt.y,w:Nt.w-ht.w,h:ht.h}),Nt.y+=ht.h,Nt.h-=ht.h);break}}return{w:ae,h:Se,fill:v/(ae*Se)||0}}Yr.prototype={destroy:function(){this.buf=null},readFields:function(h,v,_){for(_=_||this.length;this.pos<_;){var R=this.readVarint(),L=R>>3,z=this.pos;this.type=7&R,h(L,v,this),this.pos===z&&this.skip(R)}return v},readMessage:function(h,v){return this.readFields(h,v,this.readVarint()+this.pos)},readFixed32:function(){var h=Bi(this.buf,this.pos);return this.pos+=4,h},readSFixed32:function(){var h=Ti(this.buf,this.pos);return this.pos+=4,h},readFixed64:function(){var h=Bi(this.buf,this.pos)+4294967296*Bi(this.buf,this.pos+4);return this.pos+=8,h},readSFixed64:function(){var h=Bi(this.buf,this.pos)+4294967296*Ti(this.buf,this.pos+4);return this.pos+=8,h},readFloat:function(){var h=on(this.buf,this.pos,!0,23,4);return this.pos+=4,h},readDouble:function(){var h=on(this.buf,this.pos,!0,52,8);return this.pos+=8,h},readVarint:function(h){var v,_,R=this.buf;return v=127&(_=R[this.pos++]),_<128?v:(v|=(127&(_=R[this.pos++]))<<7,_<128?v:(v|=(127&(_=R[this.pos++]))<<14,_<128?v:(v|=(127&(_=R[this.pos++]))<<21,_<128?v:function(L,z,j){var ae,Se,He=j.buf;if(ae=(112&(Se=He[j.pos++]))>>4,Se<128||(ae|=(127&(Se=He[j.pos++]))<<3,Se<128)||(ae|=(127&(Se=He[j.pos++]))<<10,Se<128)||(ae|=(127&(Se=He[j.pos++]))<<17,Se<128)||(ae|=(127&(Se=He[j.pos++]))<<24,Se<128)||(ae|=(1&(Se=He[j.pos++]))<<31,Se<128))return li(L,ae,z);throw new Error("Expected varint not more than 10 bytes")}(v|=(15&(_=R[this.pos]))<<28,h,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var h=this.readVarint();return h%2==1?(h+1)/-2:h/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var h=this.readVarint()+this.pos,v=this.pos;return this.pos=h,h-v>=12&&Yn?function(_,R,L){return Yn.decode(_.subarray(R,L))}(this.buf,v,h):function(_,R,L){for(var z="",j=R;j<L;){var ae,Se,He,rt=_[j],ht=null,Mt=rt>239?4:rt>223?3:rt>191?2:1;if(j+Mt>L)break;Mt===1?rt<128&&(ht=rt):Mt===2?(192&(ae=_[j+1]))==128&&(ht=(31&rt)<<6|63&ae)<=127&&(ht=null):Mt===3?(Se=_[j+2],(192&(ae=_[j+1]))==128&&(192&Se)==128&&((ht=(15&rt)<<12|(63&ae)<<6|63&Se)<=2047||ht>=55296&&ht<=57343)&&(ht=null)):Mt===4&&(Se=_[j+2],He=_[j+3],(192&(ae=_[j+1]))==128&&(192&Se)==128&&(192&He)==128&&((ht=(15&rt)<<18|(63&ae)<<12|(63&Se)<<6|63&He)<=65535||ht>=1114112)&&(ht=null)),ht===null?(ht=65533,Mt=1):ht>65535&&(ht-=65536,z+=String.fromCharCode(ht>>>10&1023|55296),ht=56320|1023&ht),z+=String.fromCharCode(ht),j+=Mt}return z}(this.buf,v,h)},readBytes:function(){var h=this.readVarint()+this.pos,v=this.buf.subarray(this.pos,h);return this.pos=h,v},readPackedVarint:function(h,v){if(this.type!==Yr.Bytes)return h.push(this.readVarint(v));var _=zn(this);for(h=h||[];this.pos<_;)h.push(this.readVarint(v));return h},readPackedSVarint:function(h){if(this.type!==Yr.Bytes)return h.push(this.readSVarint());var v=zn(this);for(h=h||[];this.pos<v;)h.push(this.readSVarint());return h},readPackedBoolean:function(h){if(this.type!==Yr.Bytes)return h.push(this.readBoolean());var v=zn(this);for(h=h||[];this.pos<v;)h.push(this.readBoolean());return h},readPackedFloat:function(h){if(this.type!==Yr.Bytes)return h.push(this.readFloat());var v=zn(this);for(h=h||[];this.pos<v;)h.push(this.readFloat());return h},readPackedDouble:function(h){if(this.type!==Yr.Bytes)return h.push(this.readDouble());var v=zn(this);for(h=h||[];this.pos<v;)h.push(this.readDouble());return h},readPackedFixed32:function(h){if(this.type!==Yr.Bytes)return h.push(this.readFixed32());var v=zn(this);for(h=h||[];this.pos<v;)h.push(this.readFixed32());return h},readPackedSFixed32:function(h){if(this.type!==Yr.Bytes)return h.push(this.readSFixed32());var v=zn(this);for(h=h||[];this.pos<v;)h.push(this.readSFixed32());return h},readPackedFixed64:function(h){if(this.type!==Yr.Bytes)return h.push(this.readFixed64());var v=zn(this);for(h=h||[];this.pos<v;)h.push(this.readFixed64());return h},readPackedSFixed64:function(h){if(this.type!==Yr.Bytes)return h.push(this.readSFixed64());var v=zn(this);for(h=h||[];this.pos<v;)h.push(this.readSFixed64());return h},skip:function(h){var v=7&h;if(v===Yr.Varint)for(;this.buf[this.pos++]>127;);else if(v===Yr.Bytes)this.pos=this.readVarint()+this.pos;else if(v===Yr.Fixed32)this.pos+=4;else{if(v!==Yr.Fixed64)throw new Error("Unimplemented type: "+v);this.pos+=8}},writeTag:function(h,v){this.writeVarint(h<<3|v)},realloc:function(h){for(var v=this.length||16;v<this.pos+h;)v*=2;if(v!==this.length){var _=new Uint8Array(v);_.set(this.buf),this.buf=_,this.length=v}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(h){this.realloc(4),Wn(this.buf,h,this.pos),this.pos+=4},writeSFixed32:function(h){this.realloc(4),Wn(this.buf,h,this.pos),this.pos+=4},writeFixed64:function(h){this.realloc(8),Wn(this.buf,-1&h,this.pos),Wn(this.buf,Math.floor(h*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(h){this.realloc(8),Wn(this.buf,-1&h,this.pos),Wn(this.buf,Math.floor(h*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(h){(h=+h||0)>268435455||h<0?function(v,_){var R,L;if(v>=0?(R=v%4294967296|0,L=v/4294967296|0):(L=~(-v/4294967296),4294967295^(R=~(-v%4294967296))?R=R+1|0:(R=0,L=L+1|0)),v>=18446744073709552e3||v<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");_.realloc(10),function(z,j,ae){ae.buf[ae.pos++]=127&z|128,z>>>=7,ae.buf[ae.pos++]=127&z|128,z>>>=7,ae.buf[ae.pos++]=127&z|128,z>>>=7,ae.buf[ae.pos++]=127&z|128,ae.buf[ae.pos]=127&(z>>>=7)}(R,0,_),function(z,j){var ae=(7&z)<<4;j.buf[j.pos++]|=ae|((z>>>=3)?128:0),z&&(j.buf[j.pos++]=127&z|((z>>>=7)?128:0),z&&(j.buf[j.pos++]=127&z|((z>>>=7)?128:0),z&&(j.buf[j.pos++]=127&z|((z>>>=7)?128:0),z&&(j.buf[j.pos++]=127&z|((z>>>=7)?128:0),z&&(j.buf[j.pos++]=127&z)))))}(L,_)}(h,this):(this.realloc(4),this.buf[this.pos++]=127&h|(h>127?128:0),h<=127||(this.buf[this.pos++]=127&(h>>>=7)|(h>127?128:0),h<=127||(this.buf[this.pos++]=127&(h>>>=7)|(h>127?128:0),h<=127||(this.buf[this.pos++]=h>>>7&127))))},writeSVarint:function(h){this.writeVarint(h<0?2*-h-1:2*h)},writeBoolean:function(h){this.writeVarint(!!h)},writeString:function(h){h=String(h),this.realloc(4*h.length),this.pos++;var v=this.pos;this.pos=function(R,L,z){for(var j,ae,Se=0;Se<L.length;Se++){if((j=L.charCodeAt(Se))>55295&&j<57344){if(!ae){j>56319||Se+1===L.length?(R[z++]=239,R[z++]=191,R[z++]=189):ae=j;continue}if(j<56320){R[z++]=239,R[z++]=191,R[z++]=189,ae=j;continue}j=ae-55296<<10|j-56320|65536,ae=null}else ae&&(R[z++]=239,R[z++]=191,R[z++]=189,ae=null);j<128?R[z++]=j:(j<2048?R[z++]=j>>6|192:(j<65536?R[z++]=j>>12|224:(R[z++]=j>>18|240,R[z++]=j>>12&63|128),R[z++]=j>>6&63|128),R[z++]=63&j|128)}return z}(this.buf,h,this.pos);var _=this.pos-v;_>=128&&ni(v,_,this),this.pos=v-1,this.writeVarint(_),this.pos+=_},writeFloat:function(h){this.realloc(4),wn(this.buf,h,this.pos,!0,23,4),this.pos+=4},writeDouble:function(h){this.realloc(8),wn(this.buf,h,this.pos,!0,52,8),this.pos+=8},writeBytes:function(h){var v=h.length;this.writeVarint(v),this.realloc(v);for(var _=0;_<v;_++)this.buf[this.pos++]=h[_]},writeRawMessage:function(h,v){this.pos++;var _=this.pos;h(v,this);var R=this.pos-_;R>=128&&ni(_,R,this),this.pos=_-1,this.writeVarint(R),this.pos+=R},writeMessage:function(h,v,_){this.writeTag(h,Yr.Bytes),this.writeRawMessage(v,_)},writePackedVarint:function(h,v){v.length&&this.writeMessage(h,ai,v)},writePackedSVarint:function(h,v){v.length&&this.writeMessage(h,xi,v)},writePackedBoolean:function(h,v){v.length&&this.writeMessage(h,jr,v)},writePackedFloat:function(h,v){v.length&&this.writeMessage(h,En,v)},writePackedDouble:function(h,v){v.length&&this.writeMessage(h,ci,v)},writePackedFixed32:function(h,v){v.length&&this.writeMessage(h,mn,v)},writePackedSFixed32:function(h,v){v.length&&this.writeMessage(h,ti,v)},writePackedFixed64:function(h,v){v.length&&this.writeMessage(h,Ci,v)},writePackedSFixed64:function(h,v){v.length&&this.writeMessage(h,Vr,v)},writeBytesField:function(h,v){this.writeTag(h,Yr.Bytes),this.writeBytes(v)},writeFixed32Field:function(h,v){this.writeTag(h,Yr.Fixed32),this.writeFixed32(v)},writeSFixed32Field:function(h,v){this.writeTag(h,Yr.Fixed32),this.writeSFixed32(v)},writeFixed64Field:function(h,v){this.writeTag(h,Yr.Fixed64),this.writeFixed64(v)},writeSFixed64Field:function(h,v){this.writeTag(h,Yr.Fixed64),this.writeSFixed64(v)},writeVarintField:function(h,v){this.writeTag(h,Yr.Varint),this.writeVarint(v)},writeSVarintField:function(h,v){this.writeTag(h,Yr.Varint),this.writeSVarint(v)},writeStringField:function(h,v){this.writeTag(h,Yr.Bytes),this.writeString(v)},writeFloatField:function(h,v){this.writeTag(h,Yr.Fixed32),this.writeFloat(v)},writeDoubleField:function(h,v){this.writeTag(h,Yr.Fixed64),this.writeDouble(v)},writeBooleanField:function(h,v){this.writeVarintField(h,!!v)}};var Ai=function(h,v){var _=v.pixelRatio,R=v.version,L=v.stretchX,z=v.stretchY,j=v.content;this.paddedRect=h,this.pixelRatio=_,this.stretchX=L,this.stretchY=z,this.content=j,this.version=R},Gn={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Gn.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Gn.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Gn.tlbr.get=function(){return this.tl.concat(this.br)},Gn.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Ai.prototype,Gn);var Rn=function(h,v){var _={},R={};this.haveRenderCallbacks=[];var L=[];this.addImages(h,_,L),this.addImages(v,R,L);var z=Ua(L),j=new Ml({width:z.w||1,height:z.h||1});for(var ae in h){var Se=h[ae],He=_[ae].paddedRect;Ml.copy(Se.data,j,{x:0,y:0},{x:He.x+1,y:He.y+1},Se.data)}for(var rt in v){var ht=v[rt],Mt=R[rt].paddedRect,Nt=Mt.x+1,er=Mt.y+1,ar=ht.data.width,Mr=ht.data.height;Ml.copy(ht.data,j,{x:0,y:0},{x:Nt,y:er},ht.data),Ml.copy(ht.data,j,{x:0,y:Mr-1},{x:Nt,y:er-1},{width:ar,height:1}),Ml.copy(ht.data,j,{x:0,y:0},{x:Nt,y:er+Mr},{width:ar,height:1}),Ml.copy(ht.data,j,{x:ar-1,y:0},{x:Nt-1,y:er},{width:1,height:Mr}),Ml.copy(ht.data,j,{x:0,y:0},{x:Nt+ar,y:er},{width:1,height:Mr})}this.image=j,this.iconPositions=_,this.patternPositions=R};Rn.prototype.addImages=function(h,v,_){for(var R in h){var L=h[R],z={x:0,y:0,w:L.data.width+2,h:L.data.height+2};_.push(z),v[R]=new Ai(z,L),L.hasRenderCallback&&this.haveRenderCallbacks.push(R)}},Rn.prototype.patchUpdatedImages=function(h,v){for(var _ in h.dispatchRenderCallbacks(this.haveRenderCallbacks),h.updatedImages)this.patchUpdatedImage(this.iconPositions[_],h.getImage(_),v),this.patchUpdatedImage(this.patternPositions[_],h.getImage(_),v)},Rn.prototype.patchUpdatedImage=function(h,v,_){if(h&&v&&h.version!==v.version){h.version=v.version;var R=h.tl;_.update(v.data,void 0,{x:R[0],y:R[1]})}},zi("ImagePosition",Ai),zi("ImageAtlas",Rn);var aa={horizontal:1,vertical:2,horizontalOnly:3},to=function(){this.scale=1,this.fontStack="",this.imageName=null};to.forText=function(h,v){var _=new to;return _.scale=h||1,_.fontStack=v,_},to.forImage=function(h){var v=new to;return v.imageName=h,v};var Oi=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Ka(h,v,_,R,L,z,j,ae,Se,He,rt,ht,Mt,Nt,er,ar){var Mr,_r=Oi.fromFeature(h,L);ht===aa.vertical&&_r.verticalizePunctuation();var Ur=tu.processBidirectionalText,Kr=tu.processStyledBidirectionalText;if(Ur&&_r.sections.length===1){Mr=[];for(var nn=0,yn=Ur(_r.toString(),ss(_r,He,z,v,R,Nt,er));nn<yn.length;nn+=1){var Pn=yn[nn],oi=new Oi;oi.text=Pn,oi.sections=_r.sections;for(var bi=0;bi<Pn.length;bi++)oi.sectionIndex.push(0);Mr.push(oi)}}else if(Kr){Mr=[];for(var Qi=0,Fi=Kr(_r.text,_r.sectionIndex,ss(_r,He,z,v,R,Nt,er));Qi<Fi.length;Qi+=1){var ca=Fi[Qi],Ri=new Oi;Ri.text=ca[0],Ri.sectionIndex=ca[1],Ri.sections=_r.sections,Mr.push(Ri)}}else Mr=function(Wi,fo){for(var ja=[],io=Wi.text,fi=0,Ao=0,Ms=fo;Ao<Ms.length;Ao+=1){var qs=Ms[Ao];ja.push(Wi.substring(fi,qs)),fi=qs}return fi<io.length&&ja.push(Wi.substring(fi,io.length)),ja}(_r,ss(_r,He,z,v,R,Nt,er));var Qa=[],Ji={positionedLines:Qa,text:_r.toString(),top:rt[1],bottom:rt[1],left:rt[0],right:rt[0],writingMode:ht,iconsInText:!1,verticalizable:!1};return function(Wi,fo,ja,io,fi,Ao,Ms,qs,ms,ys,nu,Ls){for(var iu=0,Nu=-17,nl=0,il=0,gu=qs==="right"?1:qs==="left"?0:.5,al=0,Ba=0,Do=fi;Ba<Do.length;Ba+=1){var Ho=Do[Ba];Ho.trim();var Na=Ho.getMaxScale(),Gl=24*(Na-1),Pl={positionedGlyphs:[],lineOffset:0};Wi.positionedLines[al]=Pl;var _s=Pl.positionedGlyphs,au=0;if(Ho.length()){for(var Ol=0;Ol<Ho.length();Ol++){var Co=Ho.getSection(Ol),Hf=Ho.getSectionIndex(Ol),vl=Ho.getCharCode(Ol),Za=0,ra=null,_h=null,jf=null,Np=24,qd=!(ms===aa.horizontal||!nu&&!hh(vl)||nu&&(ka[vl]||(Up=vl,Si.Arabic(Up)||Si["Arabic Supplement"](Up)||Si["Arabic Extended-A"](Up)||Si["Arabic Presentation Forms-A"](Up)||Si["Arabic Presentation Forms-B"](Up))));if(Co.imageName){var xg=io[Co.imageName];if(!xg)continue;jf=Co.imageName,Wi.iconsInText=Wi.iconsInText||!0,_h=xg.paddedRect;var zp=xg.displaySize;Co.scale=24*Co.scale/Ls,Za=Gl+(24-zp[1]*Co.scale),Np=(ra={width:zp[0],height:zp[1],left:1,top:-3,advance:qd?zp[1]:zp[0]}).advance;var Qd=qd?zp[0]*Co.scale-24*Na:zp[1]*Co.scale-24*Na;Qd>0&&Qd>au&&(au=Qd)}else{var wm=ja[Co.fontStack],md=wm&&wm[vl];if(md&&md.rect)_h=md.rect,ra=md.metrics;else{var bg=fo[Co.fontStack],Cm=bg&&bg[vl];if(!Cm)continue;ra=Cm.metrics}Za=24*(Na-Co.scale)}qd?(Wi.verticalizable=!0,_s.push({glyph:vl,imageName:jf,x:iu,y:Nu+Za,vertical:qd,scale:Co.scale,fontStack:Co.fontStack,sectionIndex:Hf,metrics:ra,rect:_h}),iu+=Np*Co.scale+ys):(_s.push({glyph:vl,imageName:jf,x:iu,y:Nu+Za,vertical:qd,scale:Co.scale,fontStack:Co.fontStack,sectionIndex:Hf,metrics:ra,rect:_h}),iu+=ra.advance*Co.scale+ys)}_s.length!==0&&(nl=Math.max(iu-ys,nl),du(_s,0,_s.length-1,gu,au)),iu=0;var mu=Ao*Na+au;Pl.lineOffset=Math.max(au,Gl),Nu+=mu,il=Math.max(mu,il),++al}else Nu+=Ao,++al}var Up,Pv=Nu- -17,Ov=Uo(Ms),yd=Ov.horizontalAlign,Sg=Ov.verticalAlign;(function(Eg,U0,wg,Z0,y_,V0,ec,xh,Jo){var Lc,Gh=(U0-wg)*y_;Lc=V0!==ec?-xh*Z0- -17:(-Z0*Jo+.5)*ec;for(var Cg=0,Am=Eg;Cg<Am.length;Cg+=1)for(var kv=0,Tm=Am[Cg].positionedGlyphs;kv<Tm.length;kv+=1){var Fv=Tm[kv];Fv.x+=Gh,Fv.y+=Lc}})(Wi.positionedLines,gu,yd,Sg,nl,il,Ao,Pv,fi.length),Wi.top+=-Sg*Pv,Wi.bottom=Wi.top+Pv,Wi.left+=-yd*nl,Wi.right=Wi.left+nl}(Ji,v,_,R,Mr,j,ae,Se,ht,He,Mt,ar),!function(Wi){for(var fo=0,ja=Wi;fo<ja.length;fo+=1)if(ja[fo].positionedGlyphs.length!==0)return!1;return!0}(Qa)&&Ji}Oi.fromFeature=function(h,v){for(var _=new Oi,R=0;R<h.sections.length;R++){var L=h.sections[R];L.image?_.addImageSection(L):_.addTextSection(L,v)}return _},Oi.prototype.length=function(){return this.text.length},Oi.prototype.getSection=function(h){return this.sections[this.sectionIndex[h]]},Oi.prototype.getSectionIndex=function(h){return this.sectionIndex[h]},Oi.prototype.getCharCode=function(h){return this.text.charCodeAt(h)},Oi.prototype.verticalizePunctuation=function(){this.text=function(h){for(var v="",_=0;_<h.length;_++){var R=h.charCodeAt(_+1)||null,L=h.charCodeAt(_-1)||null;v+=R&&Oh(R)&&!dr[h[_+1]]||L&&Oh(L)&&!dr[h[_-1]]||!dr[h[_]]?h[_]:dr[h[_]]}return v}(this.text)},Oi.prototype.trim=function(){for(var h=0,v=0;v<this.text.length&&ka[this.text.charCodeAt(v)];v++)h++;for(var _=this.text.length,R=this.text.length-1;R>=0&&R>=h&&ka[this.text.charCodeAt(R)];R--)_--;this.text=this.text.substring(h,_),this.sectionIndex=this.sectionIndex.slice(h,_)},Oi.prototype.substring=function(h,v){var _=new Oi;return _.text=this.text.substring(h,v),_.sectionIndex=this.sectionIndex.slice(h,v),_.sections=this.sections,_},Oi.prototype.toString=function(){return this.text},Oi.prototype.getMaxScale=function(){var h=this;return this.sectionIndex.reduce(function(v,_){return Math.max(v,h.sections[_].scale)},0)},Oi.prototype.addTextSection=function(h,v){this.text+=h.text,this.sections.push(to.forText(h.scale,h.fontStack||v));for(var _=this.sections.length-1,R=0;R<h.text.length;++R)this.sectionIndex.push(_)},Oi.prototype.addImageSection=function(h){var v=h.image?h.image.name:"";if(v.length!==0){var _=this.getNextImageSectionCharCode();_?(this.text+=String.fromCharCode(_),this.sections.push(to.forImage(v)),this.sectionIndex.push(this.sections.length-1)):Ye("Reached maximum number of images 6401")}else Ye("Can't add FormattedSection with an empty image.")},Oi.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var ka={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},xa={};function wo(h,v,_,R,L,z){if(v.imageName){var j=R[v.imageName];return j?j.displaySize[0]*v.scale*24/z+L:0}var ae=_[v.fontStack],Se=ae&&ae[h];return Se?Se.metrics.advance*v.scale+L:0}function pu(h,v,_,R){var L=Math.pow(h-v,2);return R?h<v?L/2:2*L:L+Math.abs(_)*_}function Fu(h,v,_){var R=0;return h===10&&(R-=1e4),_&&(R+=150),h!==40&&h!==65288||(R+=50),v!==41&&v!==65289||(R+=50),R}function vo(h,v,_,R,L,z){for(var j=null,ae=pu(v,_,L,z),Se=0,He=R;Se<He.length;Se+=1){var rt=He[Se],ht=pu(v-rt.x,_,L,z)+rt.badness;ht<=ae&&(j=rt,ae=ht)}return{index:h,x:v,priorBreak:j,badness:ae}}function ss(h,v,_,R,L,z,j){if(z!=="point")return[];if(!h)return[];for(var ae,Se=[],He=function(Mr,_r,Ur,Kr,nn,yn){for(var Pn=0,oi=0;oi<Mr.length();oi++){var bi=Mr.getSection(oi);Pn+=wo(Mr.getCharCode(oi),bi,Kr,nn,_r,yn)}return Pn/Math.max(1,Math.ceil(Pn/Ur))}(h,v,_,R,L,j),rt=h.text.indexOf("\u200B")>=0,ht=0,Mt=0;Mt<h.length();Mt++){var Nt=h.getSection(Mt),er=h.getCharCode(Mt);if(ka[er]||(ht+=wo(er,Nt,R,L,v,j)),Mt<h.length()-1){var ar=!((ae=er)<11904||!(Si["Bopomofo Extended"](ae)||Si.Bopomofo(ae)||Si["CJK Compatibility Forms"](ae)||Si["CJK Compatibility Ideographs"](ae)||Si["CJK Compatibility"](ae)||Si["CJK Radicals Supplement"](ae)||Si["CJK Strokes"](ae)||Si["CJK Symbols and Punctuation"](ae)||Si["CJK Unified Ideographs Extension A"](ae)||Si["CJK Unified Ideographs"](ae)||Si["Enclosed CJK Letters and Months"](ae)||Si["Halfwidth and Fullwidth Forms"](ae)||Si.Hiragana(ae)||Si["Ideographic Description Characters"](ae)||Si["Kangxi Radicals"](ae)||Si["Katakana Phonetic Extensions"](ae)||Si.Katakana(ae)||Si["Vertical Forms"](ae)||Si["Yi Radicals"](ae)||Si["Yi Syllables"](ae)));(xa[er]||ar||Nt.imageName)&&Se.push(vo(Mt+1,ht,He,Se,Fu(er,h.getCharCode(Mt+1),ar&&rt),!1))}}return function Mr(_r){return _r?Mr(_r.priorBreak).concat(_r.index):[]}(vo(h.length(),ht,He,Se,0,!0))}function Uo(h){var v=.5,_=.5;switch(h){case"right":case"top-right":case"bottom-right":v=1;break;case"left":case"top-left":case"bottom-left":v=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":_=1;break;case"top":case"top-right":case"top-left":_=0}return{horizontalAlign:v,verticalAlign:_}}function du(h,v,_,R,L){if(R||L)for(var z=h[_],j=(h[_].x+z.metrics.advance*z.scale)*R,ae=v;ae<=_;ae++)h[ae].x-=j,h[ae].y+=L}function zs(h,v,_,R,L,z){var j,ae=h.image;if(ae.content){var Se=ae.content,He=ae.pixelRatio||1;j=[Se[0]/He,Se[1]/He,ae.displaySize[0]-Se[2]/He,ae.displaySize[1]-Se[3]/He]}var rt,ht,Mt,Nt,er=v.left*z,ar=v.right*z;_==="width"||_==="both"?(Nt=L[0]+er-R[3],ht=L[0]+ar+R[1]):ht=(Nt=L[0]+(er+ar-ae.displaySize[0])/2)+ae.displaySize[0];var Mr=v.top*z,_r=v.bottom*z;return _==="height"||_==="both"?(rt=L[1]+Mr-R[0],Mt=L[1]+_r+R[2]):Mt=(rt=L[1]+(Mr+_r-ae.displaySize[1])/2)+ae.displaySize[1],{image:ae,top:rt,right:ht,bottom:Mt,left:Nt,collisionPadding:j}}xa[10]=!0,xa[32]=!0,xa[38]=!0,xa[40]=!0,xa[41]=!0,xa[43]=!0,xa[45]=!0,xa[47]=!0,xa[173]=!0,xa[183]=!0,xa[8203]=!0,xa[8208]=!0,xa[8211]=!0,xa[8231]=!0;var Fs=function(h){function v(_,R,L,z){h.call(this,_,R),this.angle=L,z!==void 0&&(this.segment=z)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.clone=function(){return new v(this.x,this.y,this.angle,this.segment)},v}(Q);function $s(h,v){var _=v.expression;if(_.kind==="constant")return{kind:"constant",layoutSize:_.evaluate(new $a(h+1))};if(_.kind==="source")return{kind:"source"};for(var R=_.zoomStops,L=_.interpolationType,z=0;z<R.length&&R[z]<=h;)z++;for(var j=z=Math.max(0,z-1);j<R.length&&R[j]<h+1;)j++;j=Math.min(R.length-1,j);var ae=R[z],Se=R[j];return _.kind==="composite"?{kind:"composite",minZoom:ae,maxZoom:Se,interpolationType:L}:{kind:"camera",minZoom:ae,maxZoom:Se,minSize:_.evaluate(new $a(ae)),maxSize:_.evaluate(new $a(Se)),interpolationType:L}}function Ys(h,v,_){var R=v.uSize,L=_.lowerSize;return h.kind==="source"?L/128:h.kind==="composite"?ds(L/128,_.upperSize/128,v.uSizeT):R}function Ks(h,v){var _=0,R=0;if(h.kind==="constant")R=h.layoutSize;else if(h.kind!=="source"){var L=h.interpolationType,z=L?J(Vs.interpolationFactor(L,v,h.minZoom,h.maxZoom),0,1):0;h.kind==="camera"?R=ds(h.minSize,h.maxSize,z):_=z}return{uSizeT:_,uSize:R}}zi("Anchor",Fs);var qa=Object.freeze({__proto__:null,getSizeData:$s,evaluateSizeForFeature:Ys,evaluateSizeForZoom:Ks,SIZE_PACK_FACTOR:128});function Tu(h,v,_,R,L){if(v.segment===void 0)return!0;for(var z=v,j=v.segment+1,ae=0;ae>-_/2;){if(--j<0)return!1;ae-=h[j].dist(z),z=h[j]}ae+=h[j].dist(h[j+1]),j++;for(var Se=[],He=0;ae<_/2;){var rt=h[j],ht=h[j+1];if(!ht)return!1;var Mt=h[j-1].angleTo(rt)-rt.angleTo(ht);for(Mt=Math.abs((Mt+3*Math.PI)%(2*Math.PI)-Math.PI),Se.push({distance:ae,angleDelta:Mt}),He+=Mt;ae-Se[0].distance>R;)He-=Se.shift().angleDelta;if(He>L)return!1;j++,ae+=rt.dist(ht)}return!0}function ko(h){for(var v=0,_=0;_<h.length-1;_++)v+=h[_].dist(h[_+1]);return v}function ma(h,v,_){return h?.6*v*_:0}function da(h,v){return Math.max(h?h.right-h.left:0,v?v.right-v.left:0)}function So(h,v,_,R,L,z){for(var j=ma(_,L,z),ae=da(_,R)*z,Se=0,He=ko(h)/2,rt=0;rt<h.length-1;rt++){var ht=h[rt],Mt=h[rt+1],Nt=ht.dist(Mt);if(Se+Nt>He){var er=(He-Se)/Nt,ar=ds(ht.x,Mt.x,er),Mr=ds(ht.y,Mt.y,er),_r=new Fs(ar,Mr,Mt.angleTo(ht),rt);return _r._round(),!j||Tu(h,_r,ae,j,v)?_r:void 0}Se+=Nt}}function Us(h,v,_,R,L,z,j,ae,Se){var He=ma(R,z,j),rt=da(R,L),ht=rt*j,Mt=h[0].x===0||h[0].x===Se||h[0].y===0||h[0].y===Se;return v-ht<v/4&&(v=ht+v/4),function Nt(er,ar,Mr,_r,Ur,Kr,nn,yn,Pn){for(var oi=Kr/2,bi=ko(er),Qi=0,Fi=ar-Mr,ca=[],Ri=0;Ri<er.length-1;Ri++){for(var Qa=er[Ri],Ji=er[Ri+1],Wi=Qa.dist(Ji),fo=Ji.angleTo(Qa);Fi+Mr<Qi+Wi;){var ja=((Fi+=Mr)-Qi)/Wi,io=ds(Qa.x,Ji.x,ja),fi=ds(Qa.y,Ji.y,ja);if(io>=0&&io<Pn&&fi>=0&&fi<Pn&&Fi-oi>=0&&Fi+oi<=bi){var Ao=new Fs(io,fi,fo,Ri);Ao._round(),_r&&!Tu(er,Ao,Kr,_r,Ur)||ca.push(Ao)}}Qi+=Wi}return yn||ca.length||nn||(ca=Nt(er,Qi/2,Mr,_r,Ur,Kr,nn,!0,Pn)),ca}(h,Mt?v/2*ae%v:(rt/2+2*z)*j*ae%v,v,He,_,ht,Mt,!1,Se)}function Du(h,v,_,R,L){for(var z=[],j=0;j<h.length;j++)for(var ae=h[j],Se=void 0,He=0;He<ae.length-1;He++){var rt=ae[He],ht=ae[He+1];rt.x<v&&ht.x<v||(rt.x<v?rt=new Q(v,rt.y+(v-rt.x)/(ht.x-rt.x)*(ht.y-rt.y))._round():ht.x<v&&(ht=new Q(v,rt.y+(v-rt.x)/(ht.x-rt.x)*(ht.y-rt.y))._round()),rt.y<_&&ht.y<_||(rt.y<_?rt=new Q(rt.x+(_-rt.y)/(ht.y-rt.y)*(ht.x-rt.x),_)._round():ht.y<_&&(ht=new Q(rt.x+(_-rt.y)/(ht.y-rt.y)*(ht.x-rt.x),_)._round()),rt.x>=R&&ht.x>=R||(rt.x>=R?rt=new Q(R,rt.y+(R-rt.x)/(ht.x-rt.x)*(ht.y-rt.y))._round():ht.x>=R&&(ht=new Q(R,rt.y+(R-rt.x)/(ht.x-rt.x)*(ht.y-rt.y))._round()),rt.y>=L&&ht.y>=L||(rt.y>=L?rt=new Q(rt.x+(L-rt.y)/(ht.y-rt.y)*(ht.x-rt.x),L)._round():ht.y>=L&&(ht=new Q(rt.x+(L-rt.y)/(ht.y-rt.y)*(ht.x-rt.x),L)._round()),Se&&rt.equals(Se[Se.length-1])||z.push(Se=[rt]),Se.push(ht)))))}return z}function ur(h,v,_,R){var L=[],z=h.image,j=z.pixelRatio,ae=z.paddedRect.w-2,Se=z.paddedRect.h-2,He=h.right-h.left,rt=h.bottom-h.top,ht=z.stretchX||[[0,ae]],Mt=z.stretchY||[[0,Se]],Nt=function(io,fi){return io+fi[1]-fi[0]},er=ht.reduce(Nt,0),ar=Mt.reduce(Nt,0),Mr=ae-er,_r=Se-ar,Ur=0,Kr=er,nn=0,yn=ar,Pn=0,oi=Mr,bi=0,Qi=_r;if(z.content&&R){var Fi=z.content;Ur=ln(ht,0,Fi[0]),nn=ln(Mt,0,Fi[1]),Kr=ln(ht,Fi[0],Fi[2]),yn=ln(Mt,Fi[1],Fi[3]),Pn=Fi[0]-Ur,bi=Fi[1]-nn,oi=Fi[2]-Fi[0]-Kr,Qi=Fi[3]-Fi[1]-yn}var ca=function(io,fi,Ao,Ms){var qs=ki(io.stretch-Ur,Kr,He,h.left),ms=Ja(io.fixed-Pn,oi,io.stretch,er),ys=ki(fi.stretch-nn,yn,rt,h.top),nu=Ja(fi.fixed-bi,Qi,fi.stretch,ar),Ls=ki(Ao.stretch-Ur,Kr,He,h.left),iu=Ja(Ao.fixed-Pn,oi,Ao.stretch,er),Nu=ki(Ms.stretch-nn,yn,rt,h.top),nl=Ja(Ms.fixed-bi,Qi,Ms.stretch,ar),il=new Q(qs,ys),gu=new Q(Ls,ys),al=new Q(Ls,Nu),Ba=new Q(qs,Nu),Do=new Q(ms/j,nu/j),Ho=new Q(iu/j,nl/j),Na=v*Math.PI/180;if(Na){var Gl=Math.sin(Na),Pl=Math.cos(Na),_s=[Pl,-Gl,Gl,Pl];il._matMult(_s),gu._matMult(_s),Ba._matMult(_s),al._matMult(_s)}var au=io.stretch+io.fixed,Ol=fi.stretch+fi.fixed;return{tl:il,tr:gu,bl:Ba,br:al,tex:{x:z.paddedRect.x+1+au,y:z.paddedRect.y+1+Ol,w:Ao.stretch+Ao.fixed-au,h:Ms.stretch+Ms.fixed-Ol},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Do,pixelOffsetBR:Ho,minFontScaleX:oi/j/He,minFontScaleY:Qi/j/rt,isSDF:_}};if(R&&(z.stretchX||z.stretchY))for(var Ri=qr(ht,Mr,er),Qa=qr(Mt,_r,ar),Ji=0;Ji<Ri.length-1;Ji++)for(var Wi=Ri[Ji],fo=Ri[Ji+1],ja=0;ja<Qa.length-1;ja++)L.push(ca(Wi,Qa[ja],fo,Qa[ja+1]));else L.push(ca({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:ae+1},{fixed:0,stretch:Se+1}));return L}function ln(h,v,_){for(var R=0,L=0,z=h;L<z.length;L+=1){var j=z[L];R+=Math.max(v,Math.min(_,j[1]))-Math.max(v,Math.min(_,j[0]))}return R}function qr(h,v,_){for(var R=[{fixed:-1,stretch:0}],L=0,z=h;L<z.length;L+=1){var j=z[L],ae=j[0],Se=j[1],He=R[R.length-1];R.push({fixed:ae-He.stretch,stretch:He.stretch}),R.push({fixed:ae-He.stretch,stretch:He.stretch+(Se-ae)})}return R.push({fixed:v+1,stretch:_}),R}function ki(h,v,_,R){return h/v*_+R}function Ja(h,v,_,R){return h-v*_/R}var Tn=function(h,v,_,R,L,z,j,ae,Se,He){if(this.boxStartIndex=h.length,Se){var rt=z.top,ht=z.bottom,Mt=z.collisionPadding;Mt&&(rt-=Mt[1],ht+=Mt[3]);var Nt=ht-rt;Nt>0&&(Nt=Math.max(10,Nt),this.circleDiameter=Nt)}else{var er=z.top*j-ae,ar=z.bottom*j+ae,Mr=z.left*j-ae,_r=z.right*j+ae,Ur=z.collisionPadding;if(Ur&&(Mr-=Ur[0]*j,er-=Ur[1]*j,_r+=Ur[2]*j,ar+=Ur[3]*j),He){var Kr=new Q(Mr,er),nn=new Q(_r,er),yn=new Q(Mr,ar),Pn=new Q(_r,ar),oi=He*Math.PI/180;Kr._rotate(oi),nn._rotate(oi),yn._rotate(oi),Pn._rotate(oi),Mr=Math.min(Kr.x,nn.x,yn.x,Pn.x),_r=Math.max(Kr.x,nn.x,yn.x,Pn.x),er=Math.min(Kr.y,nn.y,yn.y,Pn.y),ar=Math.max(Kr.y,nn.y,yn.y,Pn.y)}h.emplaceBack(v.x,v.y,Mr,er,_r,ar,_,R,L)}this.boxEndIndex=h.length},Bt=function(h,v){if(h===void 0&&(h=[]),v===void 0&&(v=ut),this.data=h,this.length=this.data.length,this.compare=v,this.length>0)for(var _=(this.length>>1)-1;_>=0;_--)this._down(_)};function ut(h,v){return h<v?-1:h>v?1:0}function hr(h,v,_){v===void 0&&(v=1),_===void 0&&(_=!1);for(var R=1/0,L=1/0,z=-1/0,j=-1/0,ae=h[0],Se=0;Se<ae.length;Se++){var He=ae[Se];(!Se||He.x<R)&&(R=He.x),(!Se||He.y<L)&&(L=He.y),(!Se||He.x>z)&&(z=He.x),(!Se||He.y>j)&&(j=He.y)}var rt=Math.min(z-R,j-L),ht=rt/2,Mt=new Bt([],rn);if(rt===0)return new Q(R,L);for(var Nt=R;Nt<z;Nt+=rt)for(var er=L;er<j;er+=rt)Mt.push(new $r(Nt+ht,er+ht,ht,h));for(var ar=function(Ur){for(var Kr=0,nn=0,yn=0,Pn=Ur[0],oi=0,bi=Pn.length,Qi=bi-1;oi<bi;Qi=oi++){var Fi=Pn[oi],ca=Pn[Qi],Ri=Fi.x*ca.y-ca.x*Fi.y;nn+=(Fi.x+ca.x)*Ri,yn+=(Fi.y+ca.y)*Ri,Kr+=3*Ri}return new $r(nn/Kr,yn/Kr,0,Ur)}(h),Mr=Mt.length;Mt.length;){var _r=Mt.pop();(_r.d>ar.d||!ar.d)&&(ar=_r,_&&console.log("found best %d after %d probes",Math.round(1e4*_r.d)/1e4,Mr)),_r.max-ar.d<=v||(Mt.push(new $r(_r.p.x-(ht=_r.h/2),_r.p.y-ht,ht,h)),Mt.push(new $r(_r.p.x+ht,_r.p.y-ht,ht,h)),Mt.push(new $r(_r.p.x-ht,_r.p.y+ht,ht,h)),Mt.push(new $r(_r.p.x+ht,_r.p.y+ht,ht,h)),Mr+=4)}return _&&(console.log("num probes: "+Mr),console.log("best distance: "+ar.d)),ar.p}function rn(h,v){return v.max-h.max}function $r(h,v,_,R){this.p=new Q(h,v),this.h=_,this.d=function(L,z){for(var j=!1,ae=1/0,Se=0;Se<z.length;Se++)for(var He=z[Se],rt=0,ht=He.length,Mt=ht-1;rt<ht;Mt=rt++){var Nt=He[rt],er=He[Mt];Nt.y>L.y!=er.y>L.y&&L.x<(er.x-Nt.x)*(L.y-Nt.y)/(er.y-Nt.y)+Nt.x&&(j=!j),ae=Math.min(ae,df(L,Nt,er))}return(j?1:-1)*Math.sqrt(ae)}(this.p,R),this.max=this.d+this.h*Math.SQRT2}Bt.prototype.push=function(h){this.data.push(h),this.length++,this._up(this.length-1)},Bt.prototype.pop=function(){if(this.length!==0){var h=this.data[0],v=this.data.pop();return this.length--,this.length>0&&(this.data[0]=v,this._down(0)),h}},Bt.prototype.peek=function(){return this.data[0]},Bt.prototype._up=function(h){for(var v=this.data,_=this.compare,R=v[h];h>0;){var L=h-1>>1,z=v[L];if(_(R,z)>=0)break;v[h]=z,h=L}v[h]=R},Bt.prototype._down=function(h){for(var v=this.data,_=this.compare,R=this.length>>1,L=v[h];h<R;){var z=1+(h<<1),j=v[z],ae=z+1;if(ae<this.length&&_(v[ae],j)<0&&(z=ae,j=v[ae]),_(j,L)>=0)break;v[h]=j,h=z}v[h]=L};var Ar=Number.POSITIVE_INFINITY;function Ir(h,v){return v[1]!==Ar?function(_,R,L){var z=0,j=0;switch(R=Math.abs(R),L=Math.abs(L),_){case"top-right":case"top-left":case"top":j=L-7;break;case"bottom-right":case"bottom-left":case"bottom":j=7-L}switch(_){case"top-right":case"bottom-right":case"right":z=-R;break;case"top-left":case"bottom-left":case"left":z=R}return[z,j]}(h,v[0],v[1]):function(_,R){var L=0,z=0;R<0&&(R=0);var j=R/Math.sqrt(2);switch(_){case"top-right":case"top-left":z=j-7;break;case"bottom-right":case"bottom-left":z=7-j;break;case"bottom":z=7-R;break;case"top":z=R-7}switch(_){case"top-right":case"bottom-right":L=-j;break;case"top-left":case"bottom-left":L=j;break;case"left":L=R;break;case"right":L=-R}return[L,z]}(h,v[0])}function Lr(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function lr(h,v,_,R,L,z,j,ae,Se,He,rt,ht,Mt,Nt,er){var ar=function(nn,yn,Pn,oi,bi,Qi,Fi,ca){for(var Ri=oi.layout.get("text-rotate").evaluate(Qi,{})*Math.PI/180,Qa=[],Ji=0,Wi=yn.positionedLines;Ji<Wi.length;Ji+=1)for(var fo=Wi[Ji],ja=0,io=fo.positionedGlyphs;ja<io.length;ja+=1){var fi=io[ja];if(fi.rect){var Ao=fi.rect||{},Ms=4,qs=!0,ms=1,ys=0,nu=(bi||ca)&&fi.vertical,Ls=fi.metrics.advance*fi.scale/2;if(ca&&yn.verticalizable&&(ys=fo.lineOffset/2-(fi.imageName?-(24-fi.metrics.width*fi.scale)/2:24*(fi.scale-1))),fi.imageName){var iu=Fi[fi.imageName];qs=iu.sdf,Ms=1/(ms=iu.pixelRatio)}var Nu=bi?[fi.x+Ls,fi.y]:[0,0],nl=bi?[0,0]:[fi.x+Ls+Pn[0],fi.y+Pn[1]-ys],il=[0,0];nu&&(il=nl,nl=[0,0]);var gu=(fi.metrics.left-Ms)*fi.scale-Ls+nl[0],al=(-fi.metrics.top-Ms)*fi.scale+nl[1],Ba=gu+Ao.w*fi.scale/ms,Do=al+Ao.h*fi.scale/ms,Ho=new Q(gu,al),Na=new Q(Ba,al),Gl=new Q(gu,Do),Pl=new Q(Ba,Do);if(nu){var _s=new Q(-Ls,Ls- -17),au=-Math.PI/2,Ol=12-Ls,Co=new Q(22-Ol,-(fi.imageName?Ol:0)),Hf=new(Function.prototype.bind.apply(Q,[null].concat(il)));Ho._rotateAround(au,_s)._add(Co)._add(Hf),Na._rotateAround(au,_s)._add(Co)._add(Hf),Gl._rotateAround(au,_s)._add(Co)._add(Hf),Pl._rotateAround(au,_s)._add(Co)._add(Hf)}if(Ri){var vl=Math.sin(Ri),Za=Math.cos(Ri),ra=[Za,-vl,vl,Za];Ho._matMult(ra),Na._matMult(ra),Gl._matMult(ra),Pl._matMult(ra)}var _h=new Q(0,0),jf=new Q(0,0);Qa.push({tl:Ho,tr:Na,bl:Gl,br:Pl,tex:Ao,writingMode:yn.writingMode,glyphOffset:Nu,sectionIndex:fi.sectionIndex,isSDF:qs,pixelOffsetTL:_h,pixelOffsetBR:jf,minFontScaleX:0,minFontScaleY:0})}}return Qa}(0,_,ae,L,z,j,R,h.allowVerticalPlacement),Mr=h.textSizeData,_r=null;Mr.kind==="source"?(_r=[128*L.layout.get("text-size").evaluate(j,{})])[0]>32640&&Ye(h.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Mr.kind==="composite"&&((_r=[128*Nt.compositeTextSizes[0].evaluate(j,{},er),128*Nt.compositeTextSizes[1].evaluate(j,{},er)])[0]>32640||_r[1]>32640)&&Ye(h.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),h.addSymbols(h.text,ar,_r,ae,z,j,He,v,Se.lineStartIndex,Se.lineLength,Mt,er);for(var Ur=0,Kr=rt;Ur<Kr.length;Ur+=1)ht[Kr[Ur]]=h.text.placedSymbolArray.length-1;return 4*ar.length}function Rr(h){for(var v in h)return h[v];return null}function Yt(h,v,_,R){var L=h.compareText;if(v in L){for(var z=L[v],j=z.length-1;j>=0;j--)if(R.dist(z[j])<_)return!0}else L[v]=[];return L[v].push(R),!1}var Pr=Pp.VectorTileFeature.types,pn=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function dn(h,v,_,R,L,z,j,ae,Se,He,rt,ht,Mt){var Nt=ae?Math.min(32640,Math.round(ae[0])):0,er=ae?Math.min(32640,Math.round(ae[1])):0;h.emplaceBack(v,_,Math.round(32*R),Math.round(32*L),z,j,(Nt<<1)+(Se?1:0),er,16*He,16*rt,256*ht,256*Mt)}function Zn(h,v,_){h.emplaceBack(v.x,v.y,_),h.emplaceBack(v.x,v.y,_),h.emplaceBack(v.x,v.y,_),h.emplaceBack(v.x,v.y,_)}function Bn(h){for(var v=0,_=h.sections;v<_.length;v+=1)if(Ep(_[v].text))return!0;return!1}var Hn=function(h){this.layoutVertexArray=new sd,this.indexArray=new Yc,this.programConfigurations=h,this.segments=new Zt,this.dynamicLayoutVertexArray=new Bf,this.opacityVertexArray=new Lh,this.placedSymbolArray=new I};Hn.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Hn.prototype.upload=function(h,v,_,R){this.isEmpty()||(_&&(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,vg.members),this.indexBuffer=h.createIndexBuffer(this.indexArray,v),this.dynamicLayoutVertexBuffer=h.createVertexBuffer(this.dynamicLayoutVertexArray,B0.members,!0),this.opacityVertexBuffer=h.createVertexBuffer(this.opacityVertexArray,pn,!0),this.opacityVertexBuffer.itemSize=1),(_||R)&&this.programConfigurations.upload(h))},Hn.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},zi("SymbolBuffers",Hn);var qi=function(h,v,_){this.layoutVertexArray=new h,this.layoutAttributes=v,this.indexArray=new _,this.segments=new Zt,this.collisionVertexArray=new Fe};qi.prototype.upload=function(h){this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=h.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=h.createVertexBuffer(this.collisionVertexArray,Hh.members,!0)},qi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},zi("CollisionBuffers",qi);var Fn=function(h){this.collisionBoxArray=h.collisionBoxArray,this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=h.index,this.pixelRatio=h.pixelRatio,this.sourceLayerIndex=h.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=$u([]),this.placementViewportMatrix=$u([]);var v=this.layers[0]._unevaluatedLayout._values;this.textSizeData=$s(this.zoom,v["text-size"]),this.iconSizeData=$s(this.zoom,v["icon-size"]);var _=this.layers[0].layout,R=_.get("symbol-sort-key"),L=_.get("symbol-z-order");this.canOverlap=_.get("text-allow-overlap")||_.get("icon-allow-overlap")||_.get("text-ignore-placement")||_.get("icon-ignore-placement"),this.sortFeaturesByKey=L!=="viewport-y"&&R.constantOr(1)!==void 0,this.sortFeaturesByY=(L==="viewport-y"||L==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,_.get("symbol-placement")==="point"&&(this.writingModes=_.get("text-writing-mode").map(function(z){return aa[z]})),this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id}),this.sourceID=h.sourceID};Fn.prototype.createArrays=function(){this.text=new Hn(new pa(this.layers,this.zoom,function(h){return/^text/.test(h)})),this.icon=new Hn(new pa(this.layers,this.zoom,function(h){return/^icon/.test(h)})),this.glyphOffsetArray=new re,this.lineVertexArray=new _e,this.symbolInstances=new q},Fn.prototype.calculateGlyphDependencies=function(h,v,_,R,L){for(var z=0;z<h.length;z++)if(v[h.charCodeAt(z)]=!0,(_||R)&&L){var j=dr[h.charAt(z)];j&&(v[j.charCodeAt(0)]=!0)}},Fn.prototype.populate=function(h,v,_){var R=this.layers[0],L=R.layout,z=L.get("text-font"),j=L.get("text-field"),ae=L.get("icon-image"),Se=(j.value.kind!=="constant"||j.value.value instanceof po&&!j.value.value.isEmpty()||j.value.value.toString().length>0)&&(z.value.kind!=="constant"||z.value.value.length>0),He=ae.value.kind!=="constant"||!!ae.value.value||Object.keys(ae.parameters).length>0,rt=L.get("symbol-sort-key");if(this.features=[],Se||He){for(var ht=v.iconDependencies,Mt=v.glyphDependencies,Nt=v.availableImages,er=new $a(this.zoom),ar=0,Mr=h;ar<Mr.length;ar+=1){var _r=Mr[ar],Ur=_r.feature,Kr=_r.id,nn=_r.index,yn=_r.sourceLayerIndex,Pn=R._featureFilter.needGeometry,oi=vs(Ur,Pn);if(R._featureFilter.filter(er,oi,_)){Pn||(oi.geometry=Qo(Ur));var bi=void 0;if(Se){var Qi=R.getValueAndResolveTokens("text-field",oi,_,Nt),Fi=po.factory(Qi);Bn(Fi)&&(this.hasRTLText=!0),(!this.hasRTLText||zd()==="unavailable"||this.hasRTLText&&tu.isParsed())&&(bi=Gt(Fi,R,oi))}var ca=void 0;if(He){var Ri=R.getValueAndResolveTokens("icon-image",oi,_,Nt);ca=Ri instanceof Io?Ri:Io.fromString(Ri)}if(bi||ca){var Qa=this.sortFeaturesByKey?rt.evaluate(oi,{},_):void 0;if(this.features.push({id:Kr,text:bi,icon:ca,index:nn,sourceLayerIndex:yn,geometry:oi.geometry,properties:Ur.properties,type:Pr[Ur.type],sortKey:Qa}),ca&&(ht[ca.name]=!0),bi){var Ji=z.evaluate(oi,{},_).join(","),Wi=L.get("text-rotation-alignment")==="map"&&L.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(aa.vertical)>=0;for(var fo=0,ja=bi.sections;fo<ja.length;fo+=1){var io=ja[fo];if(io.image)ht[io.image.name]=!0;else{var fi=Zl(bi.toString()),Ao=io.fontStack||Ji,Ms=Mt[Ao]=Mt[Ao]||{};this.calculateGlyphDependencies(io.text,Ms,Wi,this.allowVerticalPlacement,fi)}}}}}}L.get("symbol-placement")==="line"&&(this.features=function(qs){var ms={},ys={},nu=[],Ls=0;function iu(_s){nu.push(qs[_s]),Ls++}function Nu(_s,au,Ol){var Co=ys[_s];return delete ys[_s],ys[au]=Co,nu[Co].geometry[0].pop(),nu[Co].geometry[0]=nu[Co].geometry[0].concat(Ol[0]),Co}function nl(_s,au,Ol){var Co=ms[au];return delete ms[au],ms[_s]=Co,nu[Co].geometry[0].shift(),nu[Co].geometry[0]=Ol[0].concat(nu[Co].geometry[0]),Co}function il(_s,au,Ol){var Co=Ol?au[0][au[0].length-1]:au[0][0];return _s+":"+Co.x+":"+Co.y}for(var gu=0;gu<qs.length;gu++){var al=qs[gu],Ba=al.geometry,Do=al.text?al.text.toString():null;if(Do){var Ho=il(Do,Ba),Na=il(Do,Ba,!0);if(Ho in ys&&Na in ms&&ys[Ho]!==ms[Na]){var Gl=nl(Ho,Na,Ba),Pl=Nu(Ho,Na,nu[Gl].geometry);delete ms[Ho],delete ys[Na],ys[il(Do,nu[Pl].geometry,!0)]=Pl,nu[Gl].geometry=null}else Ho in ys?Nu(Ho,Na,Ba):Na in ms?nl(Ho,Na,Ba):(iu(gu),ms[Ho]=Ls-1,ys[Na]=Ls-1)}else iu(gu)}return nu.filter(function(_s){return _s.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(qs,ms){return qs.sortKey-ms.sortKey})}},Fn.prototype.update=function(h,v,_){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(h,v,this.layers,_),this.icon.programConfigurations.updatePaintArrays(h,v,this.layers,_))},Fn.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Fn.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Fn.prototype.upload=function(h){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(h),this.iconCollisionBox.upload(h)),this.text.upload(h,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(h,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Fn.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Fn.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Fn.prototype.addToLineVertexArray=function(h,v){var _=this.lineVertexArray.length;if(h.segment!==void 0){for(var R=h.dist(v[h.segment+1]),L=h.dist(v[h.segment]),z={},j=h.segment+1;j<v.length;j++)z[j]={x:v[j].x,y:v[j].y,tileUnitDistanceFromAnchor:R},j<v.length-1&&(R+=v[j+1].dist(v[j]));for(var ae=h.segment||0;ae>=0;ae--)z[ae]={x:v[ae].x,y:v[ae].y,tileUnitDistanceFromAnchor:L},ae>0&&(L+=v[ae-1].dist(v[ae]));for(var Se=0;Se<v.length;Se++){var He=z[Se];this.lineVertexArray.emplaceBack(He.x,He.y,He.tileUnitDistanceFromAnchor)}}return{lineStartIndex:_,lineLength:this.lineVertexArray.length-_}},Fn.prototype.addSymbols=function(h,v,_,R,L,z,j,ae,Se,He,rt,ht){for(var Mt=h.indexArray,Nt=h.layoutVertexArray,er=h.segments.prepareSegment(4*v.length,Nt,Mt,this.canOverlap?z.sortKey:void 0),ar=this.glyphOffsetArray.length,Mr=er.vertexLength,_r=this.allowVerticalPlacement&&j===aa.vertical?Math.PI/2:0,Ur=z.text&&z.text.sections,Kr=0;Kr<v.length;Kr++){var nn=v[Kr],yn=nn.tl,Pn=nn.tr,oi=nn.bl,bi=nn.br,Qi=nn.tex,Fi=nn.pixelOffsetTL,ca=nn.pixelOffsetBR,Ri=nn.minFontScaleX,Qa=nn.minFontScaleY,Ji=nn.glyphOffset,Wi=nn.isSDF,fo=nn.sectionIndex,ja=er.vertexLength,io=Ji[1];dn(Nt,ae.x,ae.y,yn.x,io+yn.y,Qi.x,Qi.y,_,Wi,Fi.x,Fi.y,Ri,Qa),dn(Nt,ae.x,ae.y,Pn.x,io+Pn.y,Qi.x+Qi.w,Qi.y,_,Wi,ca.x,Fi.y,Ri,Qa),dn(Nt,ae.x,ae.y,oi.x,io+oi.y,Qi.x,Qi.y+Qi.h,_,Wi,Fi.x,ca.y,Ri,Qa),dn(Nt,ae.x,ae.y,bi.x,io+bi.y,Qi.x+Qi.w,Qi.y+Qi.h,_,Wi,ca.x,ca.y,Ri,Qa),Zn(h.dynamicLayoutVertexArray,ae,_r),Mt.emplaceBack(ja,ja+1,ja+2),Mt.emplaceBack(ja+1,ja+2,ja+3),er.vertexLength+=4,er.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ji[0]),Kr!==v.length-1&&fo===v[Kr+1].sectionIndex||h.programConfigurations.populatePaintArrays(Nt.length,z,z.index,{},ht,Ur&&Ur[fo])}h.placedSymbolArray.emplaceBack(ae.x,ae.y,ar,this.glyphOffsetArray.length-ar,Mr,Se,He,ae.segment,_?_[0]:0,_?_[1]:0,R[0],R[1],j,0,!1,0,rt)},Fn.prototype._addCollisionDebugVertex=function(h,v,_,R,L,z){return v.emplaceBack(0,0),h.emplaceBack(_.x,_.y,R,L,Math.round(z.x),Math.round(z.y))},Fn.prototype.addCollisionDebugVertices=function(h,v,_,R,L,z,j){var ae=L.segments.prepareSegment(4,L.layoutVertexArray,L.indexArray),Se=ae.vertexLength,He=L.layoutVertexArray,rt=L.collisionVertexArray,ht=j.anchorX,Mt=j.anchorY;this._addCollisionDebugVertex(He,rt,z,ht,Mt,new Q(h,v)),this._addCollisionDebugVertex(He,rt,z,ht,Mt,new Q(_,v)),this._addCollisionDebugVertex(He,rt,z,ht,Mt,new Q(_,R)),this._addCollisionDebugVertex(He,rt,z,ht,Mt,new Q(h,R)),ae.vertexLength+=4;var Nt=L.indexArray;Nt.emplaceBack(Se,Se+1),Nt.emplaceBack(Se+1,Se+2),Nt.emplaceBack(Se+2,Se+3),Nt.emplaceBack(Se+3,Se),ae.primitiveLength+=4},Fn.prototype.addDebugCollisionBoxes=function(h,v,_,R){for(var L=h;L<v;L++){var z=this.collisionBoxArray.get(L);this.addCollisionDebugVertices(z.x1,z.y1,z.x2,z.y2,R?this.textCollisionBox:this.iconCollisionBox,z.anchorPoint,_)}},Fn.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new qi(fn,_m.members,Cl),this.iconCollisionBox=new qi(fn,_m.members,Cl);for(var h=0;h<this.symbolInstances.length;h++){var v=this.symbolInstances.get(h);this.addDebugCollisionBoxes(v.textBoxStartIndex,v.textBoxEndIndex,v,!0),this.addDebugCollisionBoxes(v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v,!0),this.addDebugCollisionBoxes(v.iconBoxStartIndex,v.iconBoxEndIndex,v,!1),this.addDebugCollisionBoxes(v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v,!1)}},Fn.prototype._deserializeCollisionBoxesForSymbol=function(h,v,_,R,L,z,j,ae,Se){for(var He={},rt=v;rt<_;rt++){var ht=h.get(rt);He.textBox={x1:ht.x1,y1:ht.y1,x2:ht.x2,y2:ht.y2,anchorPointX:ht.anchorPointX,anchorPointY:ht.anchorPointY},He.textFeatureIndex=ht.featureIndex;break}for(var Mt=R;Mt<L;Mt++){var Nt=h.get(Mt);He.verticalTextBox={x1:Nt.x1,y1:Nt.y1,x2:Nt.x2,y2:Nt.y2,anchorPointX:Nt.anchorPointX,anchorPointY:Nt.anchorPointY},He.verticalTextFeatureIndex=Nt.featureIndex;break}for(var er=z;er<j;er++){var ar=h.get(er);He.iconBox={x1:ar.x1,y1:ar.y1,x2:ar.x2,y2:ar.y2,anchorPointX:ar.anchorPointX,anchorPointY:ar.anchorPointY},He.iconFeatureIndex=ar.featureIndex;break}for(var Mr=ae;Mr<Se;Mr++){var _r=h.get(Mr);He.verticalIconBox={x1:_r.x1,y1:_r.y1,x2:_r.x2,y2:_r.y2,anchorPointX:_r.anchorPointX,anchorPointY:_r.anchorPointY},He.verticalIconFeatureIndex=_r.featureIndex;break}return He},Fn.prototype.deserializeCollisionBoxes=function(h){this.collisionArrays=[];for(var v=0;v<this.symbolInstances.length;v++){var _=this.symbolInstances.get(v);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(h,_.textBoxStartIndex,_.textBoxEndIndex,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_.iconBoxStartIndex,_.iconBoxEndIndex,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex))}},Fn.prototype.hasTextData=function(){return this.text.segments.get().length>0},Fn.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Fn.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Fn.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Fn.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Fn.prototype.addIndicesForPlacedSymbol=function(h,v){for(var _=h.placedSymbolArray.get(v),R=_.vertexStartIndex+4*_.numGlyphs,L=_.vertexStartIndex;L<R;L+=4)h.indexArray.emplaceBack(L,L+1,L+2),h.indexArray.emplaceBack(L+1,L+2,L+3)},Fn.prototype.getSortedSymbolIndexes=function(h){if(this.sortedAngle===h&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var v=Math.sin(h),_=Math.cos(h),R=[],L=[],z=[],j=0;j<this.symbolInstances.length;++j){z.push(j);var ae=this.symbolInstances.get(j);R.push(0|Math.round(v*ae.anchorX+_*ae.anchorY)),L.push(ae.featureIndex)}return z.sort(function(Se,He){return R[Se]-R[He]||L[He]-L[Se]}),z},Fn.prototype.addToSortKeyRanges=function(h,v){var _=this.sortKeyRanges[this.sortKeyRanges.length-1];_&&_.sortKey===v?_.symbolInstanceEnd=h+1:this.sortKeyRanges.push({sortKey:v,symbolInstanceStart:h,symbolInstanceEnd:h+1})},Fn.prototype.sortFeatures=function(h){var v=this;if(this.sortFeaturesByY&&this.sortedAngle!==h&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(h),this.sortedAngle=h,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var _=0,R=this.symbolInstanceIndexes;_<R.length;_+=1){var L=this.symbolInstances.get(R[_]);this.featureSortOrder.push(L.featureIndex),[L.rightJustifiedTextSymbolIndex,L.centerJustifiedTextSymbolIndex,L.leftJustifiedTextSymbolIndex].forEach(function(z,j,ae){z>=0&&ae.indexOf(z)===j&&v.addIndicesForPlacedSymbol(v.text,z)}),L.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,L.verticalPlacedTextSymbolIndex),L.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,L.placedIconSymbolIndex),L.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,L.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},zi("SymbolBucket",Fn,{omit:["layers","collisionBoxArray","features","compareText"]}),Fn.MAX_GLYPHS=65535,Fn.addDynamicAttributes=Zn;var ji=new As({"symbol-placement":new ea(kt.layout_symbol["symbol-placement"]),"symbol-spacing":new ea(kt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ea(kt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ei(kt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ea(kt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ea(kt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ea(kt.layout_symbol["icon-ignore-placement"]),"icon-optional":new ea(kt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ea(kt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ei(kt.layout_symbol["icon-size"]),"icon-text-fit":new ea(kt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ea(kt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ei(kt.layout_symbol["icon-image"]),"icon-rotate":new Ei(kt.layout_symbol["icon-rotate"]),"icon-padding":new ea(kt.layout_symbol["icon-padding"]),"icon-keep-upright":new ea(kt.layout_symbol["icon-keep-upright"]),"icon-offset":new Ei(kt.layout_symbol["icon-offset"]),"icon-anchor":new Ei(kt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ea(kt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ea(kt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ea(kt.layout_symbol["text-rotation-alignment"]),"text-field":new Ei(kt.layout_symbol["text-field"]),"text-font":new Ei(kt.layout_symbol["text-font"]),"text-size":new Ei(kt.layout_symbol["text-size"]),"text-max-width":new Ei(kt.layout_symbol["text-max-width"]),"text-line-height":new ea(kt.layout_symbol["text-line-height"]),"text-letter-spacing":new Ei(kt.layout_symbol["text-letter-spacing"]),"text-justify":new Ei(kt.layout_symbol["text-justify"]),"text-radial-offset":new Ei(kt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ea(kt.layout_symbol["text-variable-anchor"]),"text-anchor":new Ei(kt.layout_symbol["text-anchor"]),"text-max-angle":new ea(kt.layout_symbol["text-max-angle"]),"text-writing-mode":new ea(kt.layout_symbol["text-writing-mode"]),"text-rotate":new Ei(kt.layout_symbol["text-rotate"]),"text-padding":new ea(kt.layout_symbol["text-padding"]),"text-keep-upright":new ea(kt.layout_symbol["text-keep-upright"]),"text-transform":new Ei(kt.layout_symbol["text-transform"]),"text-offset":new Ei(kt.layout_symbol["text-offset"]),"text-allow-overlap":new ea(kt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ea(kt.layout_symbol["text-ignore-placement"]),"text-optional":new ea(kt.layout_symbol["text-optional"])}),ya={paint:new As({"icon-opacity":new Ei(kt.paint_symbol["icon-opacity"]),"icon-color":new Ei(kt.paint_symbol["icon-color"]),"icon-halo-color":new Ei(kt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ei(kt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ei(kt.paint_symbol["icon-halo-blur"]),"icon-translate":new ea(kt.paint_symbol["icon-translate"]),"icon-translate-anchor":new ea(kt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ei(kt.paint_symbol["text-opacity"]),"text-color":new Ei(kt.paint_symbol["text-color"],{runtimeType:ui,getOverride:function(h){return h.textColor},hasOverride:function(h){return!!h.textColor}}),"text-halo-color":new Ei(kt.paint_symbol["text-halo-color"]),"text-halo-width":new Ei(kt.paint_symbol["text-halo-width"]),"text-halo-blur":new Ei(kt.paint_symbol["text-halo-blur"]),"text-translate":new ea(kt.paint_symbol["text-translate"]),"text-translate-anchor":new ea(kt.paint_symbol["text-translate-anchor"])}),layout:ji},Fa=function(h){this.type=h.property.overrides?h.property.overrides.runtimeType:gi,this.defaultValue=h};Fa.prototype.evaluate=function(h){if(h.formattedSection){var v=this.defaultValue.property.overrides;if(v&&v.hasOverride(h.formattedSection))return v.getOverride(h.formattedSection)}return h.feature&&h.featureState?this.defaultValue.evaluate(h.feature,h.featureState):this.defaultValue.property.specification.default},Fa.prototype.eachChild=function(h){this.defaultValue.isConstant()||h(this.defaultValue.value._styleExpression.expression)},Fa.prototype.outputDefined=function(){return!1},Fa.prototype.serialize=function(){return null},zi("FormatSectionOverride",Fa,{omit:["defaultValue"]});var Fo=function(h){function v(_){h.call(this,_,ya)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.recalculate=function(_,R){if(h.prototype.recalculate.call(this,_,R),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var L=this.layout.get("text-writing-mode");if(L){for(var z=[],j=0,ae=L;j<ae.length;j+=1){var Se=ae[j];z.indexOf(Se)<0&&z.push(Se)}this.layout._values["text-writing-mode"]=z}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},v.prototype.getValueAndResolveTokens=function(_,R,L,z){var j=this.layout.get(_).evaluate(R,{},L,z),ae=this._unevaluatedLayout._values[_];return ae.isDataDriven()||ah(ae.value)||!j?j:function(Se,He){return He.replace(/{([^{}]+)}/g,function(rt,ht){return ht in Se?String(Se[ht]):""})}(R.properties,j)},v.prototype.createBucket=function(_){return new Fn(_)},v.prototype.queryRadius=function(){return 0},v.prototype.queryIntersectsFeature=function(){return!1},v.prototype._setPaintOverrides=function(){for(var _=0,R=ya.paint.overridableProperties;_<R.length;_+=1){var L=R[_];if(v.hasPaintOverride(this.layout,L)){var z,j=this.paint.get(L),ae=new Fa(j),Se=new ff(ae,j.property.specification);z=j.value.kind==="constant"||j.value.kind==="source"?new If("source",Se):new sh("composite",Se,j.value.zoomStops,j.value._interpolationType),this.paint._values[L]=new Su(j.property,z,j.parameters)}}},v.prototype._handleOverridablePaintPropertyUpdate=function(_,R,L){return!(!this.layout||R.isDataDriven()||L.isDataDriven())&&v.hasPaintOverride(this.layout,_)},v.hasPaintOverride=function(_,R){var L=_.get("text-field"),z=ya.paint.properties[R],j=!1,ae=function(rt){for(var ht=0,Mt=rt;ht<Mt.length;ht+=1)if(z.overrides&&z.overrides.hasOverride(Mt[ht]))return void(j=!0)};if(L.value.kind==="constant"&&L.value.value instanceof po)ae(L.value.value.sections);else if(L.value.kind==="source"){var Se=function(rt){j||(rt instanceof Gr&&Xt(rt.value)===za?ae(rt.value.sections):rt instanceof Mi?ae(rt.sections):rt.eachChild(Se))},He=L.value;He._styleExpression&&Se(He._styleExpression.expression)}return j},v}(cc),Ha={paint:new As({"background-color":new ea(kt.paint_background["background-color"]),"background-pattern":new Ju(kt.paint_background["background-pattern"]),"background-opacity":new ea(kt.paint_background["background-opacity"])})},Wl=function(h){function v(_){h.call(this,_,Ha)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v}(cc),gg={paint:new As({"raster-opacity":new ea(kt.paint_raster["raster-opacity"]),"raster-hue-rotate":new ea(kt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ea(kt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ea(kt.paint_raster["raster-brightness-max"]),"raster-saturation":new ea(kt.paint_raster["raster-saturation"]),"raster-contrast":new ea(kt.paint_raster["raster-contrast"]),"raster-resampling":new ea(kt.paint_raster["raster-resampling"]),"raster-fade-duration":new ea(kt.paint_raster["raster-fade-duration"])})},Fc=function(h){function v(_){h.call(this,_,gg)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v}(cc),xm=function(h){function v(_){h.call(this,_,{}),this.implementation=_}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},v.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},v.prototype.recalculate=function(){},v.prototype.updateTransitions=function(){},v.prototype.hasTransition=function(){},v.prototype.serialize=function(){},v.prototype.onAdd=function(_){this.implementation.onAdd&&this.implementation.onAdd(_,_.painter.context.gl)},v.prototype.onRemove=function(_){this.implementation.onRemove&&this.implementation.onRemove(_,_.painter.context.gl)},v}(cc),xf={circle:Sv,heatmap:vc,hillshade:O0,fill:dm,"fill-extrusion":gm,line:Fp,symbol:Fo,background:Wl,raster:Fc},bm=ee.HTMLImageElement,Sm=ee.HTMLCanvasElement,d_=ee.HTMLVideoElement,mg=ee.ImageData,Dp=ee.ImageBitmap,Wd=function(h,v,_,R){this.context=h,this.format=_,this.texture=h.gl.createTexture(),this.update(v,R)};Wd.prototype.update=function(h,v,_){var R=h.width,L=h.height,z=!(this.size&&this.size[0]===R&&this.size[1]===L||_),j=this.context,ae=j.gl;if(this.useMipmap=!!(v&&v.useMipmap),ae.bindTexture(ae.TEXTURE_2D,this.texture),j.pixelStoreUnpackFlipY.set(!1),j.pixelStoreUnpack.set(1),j.pixelStoreUnpackPremultiplyAlpha.set(this.format===ae.RGBA&&(!v||v.premultiply!==!1)),z)this.size=[R,L],h instanceof bm||h instanceof Sm||h instanceof d_||h instanceof mg||Dp&&h instanceof Dp?ae.texImage2D(ae.TEXTURE_2D,0,this.format,this.format,ae.UNSIGNED_BYTE,h):ae.texImage2D(ae.TEXTURE_2D,0,this.format,R,L,0,this.format,ae.UNSIGNED_BYTE,h.data);else{var Se=_||{x:0,y:0},He=Se.x,rt=Se.y;h instanceof bm||h instanceof Sm||h instanceof d_||h instanceof mg||Dp&&h instanceof Dp?ae.texSubImage2D(ae.TEXTURE_2D,0,He,rt,ae.RGBA,ae.UNSIGNED_BYTE,h):ae.texSubImage2D(ae.TEXTURE_2D,0,He,rt,R,L,ae.RGBA,ae.UNSIGNED_BYTE,h.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ae.generateMipmap(ae.TEXTURE_2D)},Wd.prototype.bind=function(h,v,_){var R=this.context.gl;R.bindTexture(R.TEXTURE_2D,this.texture),_!==R.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(_=R.LINEAR),h!==this.filter&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,h),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,_||h),this.filter=h),v!==this.wrap&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,v),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,v),this.wrap=v)},Wd.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Wd.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var yg=function(h){var v=this;this._callback=h,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){v._triggered=!1,v._callback()})};yg.prototype.trigger=function(){var h=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){h._triggered=!1,h._callback()},0))},yg.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Gd=function(h,v,_){this.target=h,this.parent=v,this.mapId=_,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Le(["receive","process"],this),this.invoker=new yg(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ae()?h:ee};function N0(h,v,_){var R=2*Math.PI*6378137/256/Math.pow(2,_);return[h*R-2*Math.PI*6378137/2,v*R-2*Math.PI*6378137/2]}Gd.prototype.send=function(h,v,_,R,L){var z=this;L===void 0&&(L=!1);var j=Math.round(1e18*Math.random()).toString(36).substring(0,10);_&&(this.callbacks[j]=_);var ae=Ze(this.globalScope)?void 0:[];return this.target.postMessage({id:j,type:h,hasCallback:!!_,targetMapId:R,mustQueue:L,sourceMapId:this.mapId,data:cl(v,ae)},ae),{cancel:function(){_&&delete z.callbacks[j],z.target.postMessage({id:j,type:"<cancel>",targetMapId:R,sourceMapId:z.mapId})}}},Gd.prototype.receive=function(h){var v=h.data,_=v.id;if(_&&(!v.targetMapId||this.mapId===v.targetMapId))if(v.type==="<cancel>"){delete this.tasks[_];var R=this.cancelCallbacks[_];delete this.cancelCallbacks[_],R&&R()}else Ae()||v.mustQueue?(this.tasks[_]=v,this.taskQueue.push(_),this.invoker.trigger()):this.processTask(_,v)},Gd.prototype.process=function(){if(this.taskQueue.length){var h=this.taskQueue.shift(),v=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),v&&this.processTask(h,v)}},Gd.prototype.processTask=function(h,v){var _=this;if(v.type==="<response>"){var R=this.callbacks[h];delete this.callbacks[h],R&&(v.error?R(Vo(v.error)):R(null,Vo(v.data)))}else{var L=!1,z=Ze(this.globalScope)?void 0:[],j=v.hasCallback?function(rt,ht){L=!0,delete _.cancelCallbacks[h],_.target.postMessage({id:h,type:"<response>",sourceMapId:_.mapId,error:rt?cl(rt):null,data:cl(ht,z)},z)}:function(rt){L=!0},ae=null,Se=Vo(v.data);if(this.parent[v.type])ae=this.parent[v.type](v.sourceMapId,Se,j);else if(this.parent.getWorkerSource){var He=v.type.split(".");ae=this.parent.getWorkerSource(v.sourceMapId,He[0],Se.source)[He[1]](Se,j)}else j(new Error("Could not find function "+v.type));!L&&ae&&ae.cancel&&(this.cancelCallbacks[h]=ae.cancel)}},Gd.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Lu=function(h,v){h&&(v?this.setSouthWest(h).setNorthEast(v):h.length===4?this.setSouthWest([h[0],h[1]]).setNorthEast([h[2],h[3]]):this.setSouthWest(h[0]).setNorthEast(h[1]))};Lu.prototype.setNorthEast=function(h){return this._ne=h instanceof Ds?new Ds(h.lng,h.lat):Ds.convert(h),this},Lu.prototype.setSouthWest=function(h){return this._sw=h instanceof Ds?new Ds(h.lng,h.lat):Ds.convert(h),this},Lu.prototype.extend=function(h){var v,_,R=this._sw,L=this._ne;if(h instanceof Ds)v=h,_=h;else{if(!(h instanceof Lu))return Array.isArray(h)?h.length===4||h.every(Array.isArray)?this.extend(Lu.convert(h)):this.extend(Ds.convert(h)):this;if(_=h._ne,!(v=h._sw)||!_)return this}return R||L?(R.lng=Math.min(v.lng,R.lng),R.lat=Math.min(v.lat,R.lat),L.lng=Math.max(_.lng,L.lng),L.lat=Math.max(_.lat,L.lat)):(this._sw=new Ds(v.lng,v.lat),this._ne=new Ds(_.lng,_.lat)),this},Lu.prototype.getCenter=function(){return new Ds((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Lu.prototype.getSouthWest=function(){return this._sw},Lu.prototype.getNorthEast=function(){return this._ne},Lu.prototype.getNorthWest=function(){return new Ds(this.getWest(),this.getNorth())},Lu.prototype.getSouthEast=function(){return new Ds(this.getEast(),this.getSouth())},Lu.prototype.getWest=function(){return this._sw.lng},Lu.prototype.getSouth=function(){return this._sw.lat},Lu.prototype.getEast=function(){return this._ne.lng},Lu.prototype.getNorth=function(){return this._ne.lat},Lu.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Lu.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Lu.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Lu.prototype.contains=function(h){var v=Ds.convert(h),_=v.lng,R=v.lat,L=this._sw.lng<=_&&_<=this._ne.lng;return this._sw.lng>this._ne.lng&&(L=this._sw.lng>=_&&_>=this._ne.lng),this._sw.lat<=R&&R<=this._ne.lat&&L},Lu.convert=function(h){return!h||h instanceof Lu?h:new Lu(h)};var Ds=function(h,v){if(isNaN(h)||isNaN(v))throw new Error("Invalid LngLat object: ("+h+", "+v+")");if(this.lng=+h,this.lat=+v,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ds.prototype.wrap=function(){return new Ds(M(this.lng,-180,180),this.lat)},Ds.prototype.toArray=function(){return[this.lng,this.lat]},Ds.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ds.prototype.distanceTo=function(h){var v=Math.PI/180,_=this.lat*v,R=h.lat*v,L=Math.sin(_)*Math.sin(R)+Math.cos(_)*Math.cos(R)*Math.cos((h.lng-this.lng)*v);return 63710088e-1*Math.acos(Math.min(L,1))},Ds.prototype.toBounds=function(h){h===void 0&&(h=0);var v=360*h/40075017,_=v/Math.cos(Math.PI/180*this.lat);return new Lu(new Ds(this.lng-_,this.lat-v),new Ds(this.lng+_,this.lat+v))},Ds.convert=function(h){if(h instanceof Ds)return h;if(Array.isArray(h)&&(h.length===2||h.length===3))return new Ds(Number(h[0]),Number(h[1]));if(!Array.isArray(h)&&typeof h=="object"&&h!==null)return new Ds(Number("lng"in h?h.lng:h.lon),Number(h.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var z0=2*Math.PI*63710088e-1;function Xd(h){return z0*Math.cos(h*Math.PI/180)}function v_(h){return(180+h)/360}function ns(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function vu(h,v){return h/Xd(v)}function $d(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}var gd=function(h,v,_){_===void 0&&(_=0),this.x=+h,this.y=+v,this.z=+_};gd.fromLngLat=function(h,v){v===void 0&&(v=0);var _=Ds.convert(h);return new gd(v_(_.lng),ns(_.lat),vu(v,_.lat))},gd.prototype.toLngLat=function(){return new Ds(360*this.x-180,$d(this.y))},gd.prototype.toAltitude=function(){return this.z*Xd($d(this.y))},gd.prototype.meterInMercatorCoordinateUnits=function(){return 1/z0*(h=$d(this.y),1/Math.cos(h*Math.PI/180));var h};var Lp=function(h,v,_){this.z=h,this.x=v,this.y=_,this.key=_g(0,h,h,v,_)};Lp.prototype.equals=function(h){return this.z===h.z&&this.x===h.x&&this.y===h.y},Lp.prototype.url=function(h,v){var _,R,L,z,j,ae=(R=this.y,L=this.z,z=N0(256*(_=this.x),256*(R=Math.pow(2,L)-R-1),L),j=N0(256*(_+1),256*(R+1),L),z[0]+","+z[1]+","+j[0]+","+j[1]),Se=function(He,rt,ht){for(var Mt,Nt="",er=He;er>0;er--)Nt+=(rt&(Mt=1<<er-1)?1:0)+(ht&Mt?2:0);return Nt}(this.z,this.x,this.y);return h[(this.x+this.y)%h.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(v==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",Se).replace("{bbox-epsg-3857}",ae)},Lp.prototype.getTilePoint=function(h){var v=Math.pow(2,this.z);return new Q(8192*(h.x*v-this.x),8192*(h.y*v-this.y))},Lp.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Em=function(h,v){this.wrap=h,this.canonical=v,this.key=_g(h,v.z,v.z,v.x,v.y)},Mu=function(h,v,_,R,L){this.overscaledZ=h,this.wrap=v,this.canonical=new Lp(_,+R,+L),this.key=_g(v,h,_,R,L)};function _g(h,v,_,R,L){(h*=2)<0&&(h=-1*h-1);var z=1<<_;return(z*z*h+z*L+R).toString(36)+_.toString(36)+v.toString(36)}Mu.prototype.equals=function(h){return this.overscaledZ===h.overscaledZ&&this.wrap===h.wrap&&this.canonical.equals(h.canonical)},Mu.prototype.scaledTo=function(h){var v=this.canonical.z-h;return h>this.canonical.z?new Mu(h,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Mu(h,this.wrap,h,this.canonical.x>>v,this.canonical.y>>v)},Mu.prototype.calculateScaledKey=function(h,v){var _=this.canonical.z-h;return h>this.canonical.z?_g(this.wrap*+v,h,this.canonical.z,this.canonical.x,this.canonical.y):_g(this.wrap*+v,h,h,this.canonical.x>>_,this.canonical.y>>_)},Mu.prototype.isChildOf=function(h){if(h.wrap!==this.wrap)return!1;var v=this.canonical.z-h.canonical.z;return h.overscaledZ===0||h.overscaledZ<this.overscaledZ&&h.canonical.x===this.canonical.x>>v&&h.canonical.y===this.canonical.y>>v},Mu.prototype.children=function(h){if(this.overscaledZ>=h)return[new Mu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var v=this.canonical.z+1,_=2*this.canonical.x,R=2*this.canonical.y;return[new Mu(v,this.wrap,v,_,R),new Mu(v,this.wrap,v,_+1,R),new Mu(v,this.wrap,v,_,R+1),new Mu(v,this.wrap,v,_+1,R+1)]},Mu.prototype.isLessThan=function(h){return this.wrap<h.wrap||!(this.wrap>h.wrap)&&(this.overscaledZ<h.overscaledZ||!(this.overscaledZ>h.overscaledZ)&&(this.canonical.x<h.canonical.x||!(this.canonical.x>h.canonical.x)&&this.canonical.y<h.canonical.y))},Mu.prototype.wrapped=function(){return new Mu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Mu.prototype.unwrapTo=function(h){return new Mu(this.overscaledZ,h,this.canonical.z,this.canonical.x,this.canonical.y)},Mu.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Mu.prototype.toUnwrapped=function(){return new Em(this.wrap,this.canonical)},Mu.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Mu.prototype.getTilePoint=function(h){return this.canonical.getTilePoint(new gd(h.x-this.wrap,h.y))},zi("CanonicalTileID",Lp),zi("OverscaledTileID",Mu,{omit:["posMatrix"]});var Dc=function(h,v,_){if(this.uid=h,v.height!==v.width)throw new RangeError("DEM tiles must be square");if(_&&_!=="mapbox"&&_!=="terrarium")return Ye('"'+_+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=v.height;var R=this.dim=v.height-2;this.data=new Uint32Array(v.data.buffer),this.encoding=_||"mapbox";for(var L=0;L<R;L++)this.data[this._idx(-1,L)]=this.data[this._idx(0,L)],this.data[this._idx(R,L)]=this.data[this._idx(R-1,L)],this.data[this._idx(L,-1)]=this.data[this._idx(L,0)],this.data[this._idx(L,R)]=this.data[this._idx(L,R-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(R,-1)]=this.data[this._idx(R-1,0)],this.data[this._idx(-1,R)]=this.data[this._idx(0,R-1)],this.data[this._idx(R,R)]=this.data[this._idx(R-1,R-1)]};Dc.prototype.get=function(h,v){var _=new Uint8Array(this.data.buffer),R=4*this._idx(h,v);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(_[R],_[R+1],_[R+2])},Dc.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Dc.prototype._idx=function(h,v){if(h<-1||h>=this.dim+1||v<-1||v>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(v+1)*this.stride+(h+1)},Dc.prototype._unpackMapbox=function(h,v,_){return(256*h*256+256*v+_)/10-1e4},Dc.prototype._unpackTerrarium=function(h,v,_){return 256*h+v+_/256-32768},Dc.prototype.getPixels=function(){return new Ml({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Dc.prototype.backfillBorder=function(h,v,_){if(this.dim!==h.dim)throw new Error("dem dimension mismatch");var R=v*this.dim,L=v*this.dim+this.dim,z=_*this.dim,j=_*this.dim+this.dim;switch(v){case-1:R=L-1;break;case 1:L=R+1}switch(_){case-1:z=j-1;break;case 1:j=z+1}for(var ae=-v*this.dim,Se=-_*this.dim,He=z;He<j;He++)for(var rt=R;rt<L;rt++)this.data[this._idx(rt,He)]=h.data[this._idx(rt+ae,He+Se)]},zi("DEMData",Dc);var Yd=function(h){this._stringToNumber={},this._numberToString=[];for(var v=0;v<h.length;v++){var _=h[v];this._stringToNumber[_]=v,this._numberToString[v]=_}};Yd.prototype.encode=function(h){return this._stringToNumber[h]},Yd.prototype.decode=function(h){return this._numberToString[h]};var jh=function(h,v,_,R,L){this.type="Feature",this._vectorTileFeature=h,h._z=v,h._x=_,h._y=R,this.properties=h.properties,this.id=L},mc={geometry:{configurable:!0}};mc.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},mc.geometry.set=function(h){this._geometry=h},jh.prototype.toJSON=function(){var h={geometry:this.geometry};for(var v in this)v!=="_geometry"&&v!=="_vectorTileFeature"&&(h[v]=this[v]);return h},Object.defineProperties(jh.prototype,mc);var rl=function(){this.state={},this.stateChanges={},this.deletedStates={}};rl.prototype.updateState=function(h,v,_){var R=String(v);if(this.stateChanges[h]=this.stateChanges[h]||{},this.stateChanges[h][R]=this.stateChanges[h][R]||{},E(this.stateChanges[h][R],_),this.deletedStates[h]===null)for(var L in this.deletedStates[h]={},this.state[h])L!==R&&(this.deletedStates[h][L]=null);else if(this.deletedStates[h]&&this.deletedStates[h][R]===null)for(var z in this.deletedStates[h][R]={},this.state[h][R])_[z]||(this.deletedStates[h][R][z]=null);else for(var j in _)this.deletedStates[h]&&this.deletedStates[h][R]&&this.deletedStates[h][R][j]===null&&delete this.deletedStates[h][R][j]},rl.prototype.removeFeatureState=function(h,v,_){if(this.deletedStates[h]!==null){var R=String(v);if(this.deletedStates[h]=this.deletedStates[h]||{},_&&v!==void 0)this.deletedStates[h][R]!==null&&(this.deletedStates[h][R]=this.deletedStates[h][R]||{},this.deletedStates[h][R][_]=null);else if(v!==void 0)if(this.stateChanges[h]&&this.stateChanges[h][R])for(_ in this.deletedStates[h][R]={},this.stateChanges[h][R])this.deletedStates[h][R][_]=null;else this.deletedStates[h][R]=null;else this.deletedStates[h]=null}},rl.prototype.getState=function(h,v){var _=String(v),R=E({},(this.state[h]||{})[_],(this.stateChanges[h]||{})[_]);if(this.deletedStates[h]===null)return{};if(this.deletedStates[h]){var L=this.deletedStates[h][v];if(L===null)return{};for(var z in L)delete R[z]}return R},rl.prototype.initializeTileState=function(h,v){h.setFeatureState(this.state,v)},rl.prototype.coalesceChanges=function(h,v){var _={};for(var R in this.stateChanges){this.state[R]=this.state[R]||{};var L={};for(var z in this.stateChanges[R])this.state[R][z]||(this.state[R][z]={}),E(this.state[R][z],this.stateChanges[R][z]),L[z]=this.state[R][z];_[R]=L}for(var j in this.deletedStates){this.state[j]=this.state[j]||{};var ae={};if(this.deletedStates[j]===null)for(var Se in this.state[j])ae[Se]={},this.state[j][Se]={};else for(var He in this.deletedStates[j]){if(this.deletedStates[j][He]===null)this.state[j][He]={};else for(var rt=0,ht=Object.keys(this.deletedStates[j][He]);rt<ht.length;rt+=1)delete this.state[j][He][ht[rt]];ae[He]=this.state[j][He]}_[j]=_[j]||{},E(_[j],ae)}if(this.stateChanges={},this.deletedStates={},Object.keys(_).length!==0)for(var Mt in h)h[Mt].setFeatureState(_,v)};var Bu=function(h,v){this.tileID=h,this.x=h.canonical.x,this.y=h.canonical.y,this.z=h.canonical.z,this.grid=new Hs(8192,16,0),this.grid3D=new Hs(8192,16,0),this.featureIndexArray=new yt,this.promoteId=v};function g_(h,v,_,R,L){return ft(h,function(z,j){var ae=v instanceof Dh?v.get(j):null;return ae&&ae.evaluate?ae.evaluate(_,R,L):ae})}function Wh(h){for(var v=1/0,_=1/0,R=-1/0,L=-1/0,z=0,j=h;z<j.length;z+=1){var ae=j[z];v=Math.min(v,ae.x),_=Math.min(_,ae.y),R=Math.max(R,ae.x),L=Math.max(L,ae.y)}return{minX:v,minY:_,maxX:R,maxY:L}}function Kd(h,v){return v-h}Bu.prototype.insert=function(h,v,_,R,L,z){var j=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(_,R,L);for(var ae=z?this.grid3D:this.grid,Se=0;Se<v.length;Se++){for(var He=v[Se],rt=[1/0,1/0,-1/0,-1/0],ht=0;ht<He.length;ht++){var Mt=He[ht];rt[0]=Math.min(rt[0],Mt.x),rt[1]=Math.min(rt[1],Mt.y),rt[2]=Math.max(rt[2],Mt.x),rt[3]=Math.max(rt[3],Mt.y)}rt[0]<8192&&rt[1]<8192&&rt[2]>=0&&rt[3]>=0&&ae.insert(j,rt[0],rt[1],rt[2],rt[3])}},Bu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Pp.VectorTile(new un(this.rawTileData)).layers,this.sourceLayerCoder=new Yd(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Bu.prototype.query=function(h,v,_,R){var L=this;this.loadVTLayers();for(var z=h.params||{},j=8192/h.tileSize/h.scale,ae=Pf(z.filter),Se=h.queryGeometry,He=h.queryPadding*j,rt=Wh(Se),ht=this.grid.query(rt.minX-He,rt.minY-He,rt.maxX+He,rt.maxY+He),Mt=Wh(h.cameraQueryGeometry),Nt=this.grid3D.query(Mt.minX-He,Mt.minY-He,Mt.maxX+He,Mt.maxY+He,function(nn,yn,Pn,oi){return function(bi,Qi,Fi,ca,Ri){for(var Qa=0,Ji=bi;Qa<Ji.length;Qa+=1){var Wi=Ji[Qa];if(Qi<=Wi.x&&Fi<=Wi.y&&ca>=Wi.x&&Ri>=Wi.y)return!0}var fo=[new Q(Qi,Fi),new Q(Qi,Ri),new Q(ca,Ri),new Q(ca,Fi)];if(bi.length>2){for(var ja=0,io=fo;ja<io.length;ja+=1)if(dc(bi,io[ja]))return!0}for(var fi=0;fi<bi.length-1;fi++)if(vf(bi[fi],bi[fi+1],fo))return!0;return!1}(h.cameraQueryGeometry,nn-He,yn-He,Pn+He,oi+He)}),er=0,ar=Nt;er<ar.length;er+=1)ht.push(ar[er]);ht.sort(Kd);for(var Mr,_r={},Ur=function(nn){var yn=ht[nn];if(yn!==Mr){Mr=yn;var Pn=L.featureIndexArray.get(yn),oi=null;L.loadMatchingFeature(_r,Pn.bucketIndex,Pn.sourceLayerIndex,Pn.featureIndex,ae,z.layers,z.availableImages,v,_,R,function(bi,Qi,Fi){return oi||(oi=Qo(bi)),Qi.queryIntersectsFeature(Se,bi,Fi,oi,L.z,h.transform,j,h.pixelPosMatrix)})}},Kr=0;Kr<ht.length;Kr++)Ur(Kr);return _r},Bu.prototype.loadMatchingFeature=function(h,v,_,R,L,z,j,ae,Se,He,rt){var ht=this.bucketLayerIDs[v];if(!z||function(bi,Qi){for(var Fi=0;Fi<bi.length;Fi++)if(Qi.indexOf(bi[Fi])>=0)return!0;return!1}(z,ht)){var Mt=this.sourceLayerCoder.decode(_),Nt=this.vtLayers[Mt].feature(R);if(L.needGeometry){var er=vs(Nt,!0);if(!L.filter(new $a(this.tileID.overscaledZ),er,this.tileID.canonical))return}else if(!L.filter(new $a(this.tileID.overscaledZ),Nt))return;for(var ar=this.getId(Nt,Mt),Mr=0;Mr<ht.length;Mr++){var _r=ht[Mr];if(!(z&&z.indexOf(_r)<0)){var Ur=ae[_r];if(Ur){var Kr={};ar!==void 0&&He&&(Kr=He.getState(Ur.sourceLayer||"_geojsonTileLayer",ar));var nn=E({},Se[_r]);nn.paint=g_(nn.paint,Ur.paint,Nt,Kr,j),nn.layout=g_(nn.layout,Ur.layout,Nt,Kr,j);var yn=!rt||rt(Nt,Ur,Kr);if(yn){var Pn=new jh(Nt,this.z,this.x,this.y,ar);Pn.layer=nn;var oi=h[_r];oi===void 0&&(oi=h[_r]=[]),oi.push({featureIndex:R,feature:Pn,intersectionZ:yn})}}}}}},Bu.prototype.lookupSymbolFeatures=function(h,v,_,R,L,z,j,ae){var Se={};this.loadVTLayers();for(var He=Pf(L),rt=0,ht=h;rt<ht.length;rt+=1)this.loadMatchingFeature(Se,_,R,ht[rt],He,z,j,ae,v);return Se},Bu.prototype.hasLayer=function(h){for(var v=0,_=this.bucketLayerIDs;v<_.length;v+=1)for(var R=0,L=_[v];R<L.length;R+=1)if(h===L[R])return!0;return!1},Bu.prototype.getId=function(h,v){var _=h.id;return this.promoteId&&typeof(_=h.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[v]])=="boolean"&&(_=Number(_)),_},zi("FeatureIndex",Bu,{omit:["rawTileData","sourceLayerCoder"]});var Ya=function(h,v){this.tileID=h,this.uid=me(),this.uses=0,this.tileSize=v,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Ya.prototype.registerFadeDuration=function(h){var v=h+this.timeAdded;v<ze.now()||this.fadeEndTime&&v<this.fadeEndTime||(this.fadeEndTime=v)},Ya.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Ya.prototype.loadVectorData=function(h,v,_){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",h){for(var R in h.featureIndex&&(this.latestFeatureIndex=h.featureIndex,h.rawTileData?(this.latestRawTileData=h.rawTileData,this.latestFeatureIndex.rawTileData=h.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=h.collisionBoxArray,this.buckets=function(He,rt){var ht={};if(!rt)return ht;for(var Mt=function(){var ar=er[Nt],Mr=ar.layerIds.map(function(Kr){return rt.getLayer(Kr)}).filter(Boolean);if(Mr.length!==0){ar.layers=Mr,ar.stateDependentLayerIds&&(ar.stateDependentLayers=ar.stateDependentLayerIds.map(function(Kr){return Mr.filter(function(nn){return nn.id===Kr})[0]}));for(var _r=0,Ur=Mr;_r<Ur.length;_r+=1)ht[Ur[_r].id]=ar}},Nt=0,er=He;Nt<er.length;Nt+=1)Mt();return ht}(h.buckets,v.style),this.hasSymbolBuckets=!1,this.buckets){var L=this.buckets[R];if(L instanceof Fn){if(this.hasSymbolBuckets=!0,!_)break;L.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var z in this.buckets){var j=this.buckets[z];if(j instanceof Fn&&j.hasRTLText){this.hasRTLText=!0,tu.isLoading()||tu.isLoaded()||zd()!=="deferred"||lc();break}}for(var ae in this.queryPadding=0,this.buckets){var Se=this.buckets[ae];this.queryPadding=Math.max(this.queryPadding,v.style.getLayer(ae).queryRadius(Se))}h.imageAtlas&&(this.imageAtlas=h.imageAtlas),h.glyphAtlasImage&&(this.glyphAtlasImage=h.glyphAtlasImage)}else this.collisionBoxArray=new T},Ya.prototype.unloadVectorData=function(){for(var h in this.buckets)this.buckets[h].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ya.prototype.getBucket=function(h){return this.buckets[h.id]},Ya.prototype.upload=function(h){for(var v in this.buckets){var _=this.buckets[v];_.uploadPending()&&_.upload(h)}var R=h.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Wd(h,this.imageAtlas.image,R.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Wd(h,this.glyphAtlasImage,R.ALPHA),this.glyphAtlasImage=null)},Ya.prototype.prepare=function(h){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(h,this.imageAtlasTexture)},Ya.prototype.queryRenderedFeatures=function(h,v,_,R,L,z,j,ae,Se,He){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:R,cameraQueryGeometry:L,scale:z,tileSize:this.tileSize,pixelPosMatrix:He,transform:ae,params:j,queryPadding:this.queryPadding*Se},h,v,_):{}},Ya.prototype.querySourceFeatures=function(h,v){var _=this.latestFeatureIndex;if(_&&_.rawTileData){var R=_.loadVTLayers(),L=v?v.sourceLayer:"",z=R._geojsonTileLayer||R[L];if(z)for(var j=Pf(v&&v.filter),ae=this.tileID.canonical,Se=ae.z,He=ae.x,rt=ae.y,ht={z:Se,x:He,y:rt},Mt=0;Mt<z.length;Mt++){var Nt=z.feature(Mt);if(j.needGeometry){var er=vs(Nt,!0);if(!j.filter(new $a(this.tileID.overscaledZ),er,this.tileID.canonical))continue}else if(!j.filter(new $a(this.tileID.overscaledZ),Nt))continue;var ar=_.getId(Nt,L),Mr=new jh(Nt,Se,He,rt,ar);Mr.tile=ht,h.push(Mr)}}},Ya.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Ya.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ya.prototype.setExpiryData=function(h){var v=this.expirationTime;if(h.cacheControl){var _=Qe(h.cacheControl);_["max-age"]&&(this.expirationTime=Date.now()+1e3*_["max-age"])}else h.expires&&(this.expirationTime=new Date(h.expires).getTime());if(this.expirationTime){var R=Date.now(),L=!1;if(this.expirationTime>R)L=!1;else if(v)if(this.expirationTime<v)L=!0;else{var z=this.expirationTime-v;z?this.expirationTime=R+Math.max(z,3e4):L=!0}else L=!0;L?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ya.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Ya.prototype.setFeatureState=function(h,v){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(h).length!==0){var _=this.latestFeatureIndex.loadVTLayers();for(var R in this.buckets)if(v.style.hasLayer(R)){var L=this.buckets[R],z=L.layers[0].sourceLayer||"_geojsonTileLayer",j=_[z],ae=h[z];if(j&&ae&&Object.keys(ae).length!==0){L.update(ae,j,this.imageAtlas&&this.imageAtlas.patternPositions||{});var Se=v&&v.style&&v.style.getLayer(R);Se&&(this.queryPadding=Math.max(this.queryPadding,Se.queryRadius(L)))}}}},Ya.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Ya.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ze.now()},Ya.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ya.prototype.setHoldDuration=function(h){this.symbolFadeHoldUntil=ze.now()+h},Ya.prototype.setDependencies=function(h,v){for(var _={},R=0,L=v;R<L.length;R+=1)_[L[R]]=!0;this.dependencies[h]=_},Ya.prototype.hasDependency=function(h,v){for(var _=0,R=h;_<R.length;_+=1){var L=this.dependencies[R[_]];if(L){for(var z=0,j=v;z<j.length;z+=1)if(L[j[z]])return!0}}return!1};var Bp=ee.performance,m_=function(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},Bp.mark(this._marks.start)};m_.prototype.finish=function(){Bp.mark(this._marks.end);var h=Bp.getEntriesByName(this._marks.measure);return h.length===0&&(Bp.measure(this._marks.measure,this._marks.start,this._marks.end),h=Bp.getEntriesByName(this._marks.measure),Bp.clearMarks(this._marks.start),Bp.clearMarks(this._marks.end),Bp.clearMeasures(this._marks.measure)),h},w.Actor=Gd,w.AlphaImage=Uf,w.CanonicalTileID=Lp,w.CollisionBoxArray=T,w.Color=na,w.DEMData=Dc,w.DataConstantProperty=ea,w.DictionaryCoder=Yd,w.EXTENT=8192,w.ErrorEvent=gr,w.EvaluationParameters=$a,w.Event=jt,w.Evented=Cr,w.FeatureIndex=Bu,w.FillBucket=Qc,w.FillExtrusionBucket=Il,w.ImageAtlas=Rn,w.ImagePosition=Ai,w.LineBucket=dl,w.LngLat=Ds,w.LngLatBounds=Lu,w.MercatorCoordinate=gd,w.ONE_EM=24,w.OverscaledTileID=Mu,w.Point=Q,w.Point$1=Q,w.Properties=As,w.Protobuf=un,w.RGBAImage=Ml,w.RequestManager=et,w.RequestPerformance=m_,w.ResourceType=tn,w.SegmentVector=Zt,w.SourceFeatureState=rl,w.StructArrayLayout1ui2=wp,w.StructArrayLayout2f1f2i16=vr,w.StructArrayLayout2i4=dh,w.StructArrayLayout3ui6=Yc,w.StructArrayLayout4i8=Lf,w.SymbolBucket=Fn,w.Texture=Wd,w.Tile=Ya,w.Transitionable=Wu,w.Uniform1f=pi,w.Uniform1i=In,w.Uniform2f=ei,w.Uniform3f=Ii,w.Uniform4f=ia,w.UniformColor=la,w.UniformMatrix4f=bo,w.UnwrappedTileID=Em,w.ValidationError=at,w.WritingMode=aa,w.ZoomHistory=fu,w.add=function(h,v,_){return h[0]=v[0]+_[0],h[1]=v[1]+_[1],h[2]=v[2]+_[2],h},w.addDynamicAttributes=Zn,w.asyncAll=function(h,v,_){if(!h.length)return _(null,[]);var R=h.length,L=new Array(h.length),z=null;h.forEach(function(j,ae){v(j,function(Se,He){Se&&(z=Se),L[ae]=He,--R==0&&_(z,L)})})},w.bezier=ce,w.bindAll=Le,w.browser=ze,w.cacheEntryPossiblyAdded=function(h){++Zr>Jt&&(h.getActor().send("enforceCacheSizeLimit",zt),Zr=0)},w.clamp=J,w.clearTileCache=function(h){var v=ee.caches.delete("mapbox-tiles");h&&v.catch(h).then(function(){return h()})},w.clipLine=Du,w.clone=function(h){var v=new yo(16);return v[0]=h[0],v[1]=h[1],v[2]=h[2],v[3]=h[3],v[4]=h[4],v[5]=h[5],v[6]=h[6],v[7]=h[7],v[8]=h[8],v[9]=h[9],v[10]=h[10],v[11]=h[11],v[12]=h[12],v[13]=h[13],v[14]=h[14],v[15]=h[15],v},w.clone$1=be,w.clone$2=function(h){var v=new yo(3);return v[0]=h[0],v[1]=h[1],v[2]=h[2],v},w.collisionCircleLayout=Xe,w.config=De,w.create=function(){var h=new yo(16);return yo!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},w.create$1=function(){var h=new yo(9);return yo!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h},w.create$2=function(){var h=new yo(4);return yo!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h},w.createCommonjsModule=Y,w.createExpression=oh,w.createLayout=js,w.createStyleLayer=function(h){return h.type==="custom"?new xm(h):new xf[h.type](h)},w.cross=function(h,v,_){var R=v[0],L=v[1],z=v[2],j=_[0],ae=_[1],Se=_[2];return h[0]=L*Se-z*ae,h[1]=z*j-R*Se,h[2]=R*ae-L*j,h},w.deepEqual=function h(v,_){if(Array.isArray(v)){if(!Array.isArray(_)||v.length!==_.length)return!1;for(var R=0;R<v.length;R++)if(!h(v[R],_[R]))return!1;return!0}if(typeof v=="object"&&v!==null&&_!==null){if(typeof _!="object"||Object.keys(v).length!==Object.keys(_).length)return!1;for(var L in v)if(!h(v[L],_[L]))return!1;return!0}return v===_},w.dot=function(h,v){return h[0]*v[0]+h[1]*v[1]+h[2]*v[2]},w.dot$1=function(h,v){return h[0]*v[0]+h[1]*v[1]+h[2]*v[2]+h[3]*v[3]},w.ease=he,w.emitValidationErrors=Gc,w.endsWith=tt,w.enforceCacheSizeLimit=function(h){tr(),Ge&&Ge.then(function(v){v.keys().then(function(_){for(var R=0;R<_.length-h;R++)v.delete(_[R])})})},w.evaluateSizeForFeature=Ys,w.evaluateSizeForZoom=Ks,w.evaluateVariableOffset=Ir,w.evented=Fh,w.extend=E,w.featureFilter=Pf,w.filterObject=ge,w.fromRotation=function(h,v){var _=Math.sin(v),R=Math.cos(v);return h[0]=R,h[1]=_,h[2]=0,h[3]=-_,h[4]=R,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h},w.getAnchorAlignment=Uo,w.getAnchorJustification=Lr,w.getArrayBuffer=qn,w.getImage=it,w.getJSON=function(h,v){return mi(E(h,{type:"json"}),v)},w.getRTLTextPluginStatus=zd,w.getReferrer=gn,w.getVideo=function(h,v){var _,R,L=ee.document.createElement("video");L.muted=!0,L.onloadstart=function(){v(null,L)};for(var z=0;z<h.length;z++){var j=ee.document.createElement("source");_=h[z],R=void 0,(R=ee.document.createElement("a")).href=_,(R.protocol!==ee.document.location.protocol||R.host!==ee.document.location.host)&&(L.crossOrigin="Anonymous"),j.src=h[z],L.appendChild(j)}return{cancel:function(){}}},w.identity=$u,w.invert=function(h,v){var _=v[0],R=v[1],L=v[2],z=v[3],j=v[4],ae=v[5],Se=v[6],He=v[7],rt=v[8],ht=v[9],Mt=v[10],Nt=v[11],er=v[12],ar=v[13],Mr=v[14],_r=v[15],Ur=_*ae-R*j,Kr=_*Se-L*j,nn=_*He-z*j,yn=R*Se-L*ae,Pn=R*He-z*ae,oi=L*He-z*Se,bi=rt*ar-ht*er,Qi=rt*Mr-Mt*er,Fi=rt*_r-Nt*er,ca=ht*Mr-Mt*ar,Ri=ht*_r-Nt*ar,Qa=Mt*_r-Nt*Mr,Ji=Ur*Qa-Kr*Ri+nn*ca+yn*Fi-Pn*Qi+oi*bi;return Ji?(h[0]=(ae*Qa-Se*Ri+He*ca)*(Ji=1/Ji),h[1]=(L*Ri-R*Qa-z*ca)*Ji,h[2]=(ar*oi-Mr*Pn+_r*yn)*Ji,h[3]=(Mt*Pn-ht*oi-Nt*yn)*Ji,h[4]=(Se*Fi-j*Qa-He*Qi)*Ji,h[5]=(_*Qa-L*Fi+z*Qi)*Ji,h[6]=(Mr*nn-er*oi-_r*Kr)*Ji,h[7]=(rt*oi-Mt*nn+Nt*Kr)*Ji,h[8]=(j*Ri-ae*Fi+He*bi)*Ji,h[9]=(R*Fi-_*Ri-z*bi)*Ji,h[10]=(er*Pn-ar*nn+_r*Ur)*Ji,h[11]=(ht*nn-rt*Pn-Nt*Ur)*Ji,h[12]=(ae*Qi-j*ca-Se*bi)*Ji,h[13]=(_*ca-R*Qi+L*bi)*Ji,h[14]=(ar*Kr-er*yn-Mr*Ur)*Ji,h[15]=(rt*yn-ht*Kr+Mt*Ur)*Ji,h):null},w.isChar=Si,w.isMapboxURL=st,w.keysDifference=function(h,v){var _=[];for(var R in h)R in v||_.push(R);return _},w.makeRequest=mi,w.mapObject=ft,w.mercatorXfromLng=v_,w.mercatorYfromLat=ns,w.mercatorZfromAltitude=vu,w.mul=ld,w.multiply=Gs,w.mvt=Pp,w.nextPowerOfTwo=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},w.normalize=function(h,v){var _=v[0],R=v[1],L=v[2],z=_*_+R*R+L*L;return z>0&&(z=1/Math.sqrt(z)),h[0]=v[0]*z,h[1]=v[1]*z,h[2]=v[2]*z,h},w.number=ds,w.offscreenCanvasSupported=Nr,w.ortho=function(h,v,_,R,L,z,j){var ae=1/(v-_),Se=1/(R-L),He=1/(z-j);return h[0]=-2*ae,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*Se,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*He,h[11]=0,h[12]=(v+_)*ae,h[13]=(L+R)*Se,h[14]=(j+z)*He,h[15]=1,h},w.parseGlyphPBF=function(h){return new un(h).readFields(Ln,[])},w.pbf=un,w.performSymbolLayout=function(h,v,_,R,L,z,j){h.createArrays(),h.tilePixelRatio=8192/(512*h.overscaling),h.compareText={},h.iconsNeedLinear=!1;var ae=h.layers[0].layout,Se=h.layers[0]._unevaluatedLayout._values,He={};if(h.textSizeData.kind==="composite"){var rt=h.textSizeData,ht=rt.maxZoom;He.compositeTextSizes=[Se["text-size"].possiblyEvaluate(new $a(rt.minZoom),j),Se["text-size"].possiblyEvaluate(new $a(ht),j)]}if(h.iconSizeData.kind==="composite"){var Mt=h.iconSizeData,Nt=Mt.maxZoom;He.compositeIconSizes=[Se["icon-size"].possiblyEvaluate(new $a(Mt.minZoom),j),Se["icon-size"].possiblyEvaluate(new $a(Nt),j)]}He.layoutTextSize=Se["text-size"].possiblyEvaluate(new $a(h.zoom+1),j),He.layoutIconSize=Se["icon-size"].possiblyEvaluate(new $a(h.zoom+1),j),He.textMaxSize=Se["text-size"].possiblyEvaluate(new $a(18));for(var er=24*ae.get("text-line-height"),ar=ae.get("text-rotation-alignment")==="map"&&ae.get("symbol-placement")!=="point",Mr=ae.get("text-keep-upright"),_r=ae.get("text-size"),Ur=function(){var yn=nn[Kr],Pn=ae.get("text-font").evaluate(yn,{},j).join(","),oi=_r.evaluate(yn,{},j),bi=He.layoutTextSize.evaluate(yn,{},j),Qi=He.layoutIconSize.evaluate(yn,{},j),Fi={horizontal:{},vertical:void 0},ca=yn.text,Ri=[0,0];if(ca){var Qa=ca.toString(),Ji=24*ae.get("text-letter-spacing").evaluate(yn,{},j),Wi=function(Ba){for(var Do=0,Ho=Ba;Do<Ho.length;Do+=1)if(Na=Ho[Do].charCodeAt(0),Si.Arabic(Na)||Si["Arabic Supplement"](Na)||Si["Arabic Extended-A"](Na)||Si["Arabic Presentation Forms-A"](Na)||Si["Arabic Presentation Forms-B"](Na))return!1;var Na;return!0}(Qa)?Ji:0,fo=ae.get("text-anchor").evaluate(yn,{},j),ja=ae.get("text-variable-anchor");if(!ja){var io=ae.get("text-radial-offset").evaluate(yn,{},j);Ri=io?Ir(fo,[24*io,Ar]):ae.get("text-offset").evaluate(yn,{},j).map(function(Ba){return 24*Ba})}var fi=ar?"center":ae.get("text-justify").evaluate(yn,{},j),Ao=ae.get("symbol-placement"),Ms=Ao==="point"?24*ae.get("text-max-width").evaluate(yn,{},j):0,qs=function(){h.allowVerticalPlacement&&Zl(Qa)&&(Fi.vertical=Ka(ca,v,_,L,Pn,Ms,er,fo,"left",Wi,Ri,aa.vertical,!0,Ao,bi,oi))};if(!ar&&ja){for(var ms=fi==="auto"?ja.map(function(Ba){return Lr(Ba)}):[fi],ys=!1,nu=0;nu<ms.length;nu++){var Ls=ms[nu];if(!Fi.horizontal[Ls])if(ys)Fi.horizontal[Ls]=Fi.horizontal[0];else{var iu=Ka(ca,v,_,L,Pn,Ms,er,"center",Ls,Wi,Ri,aa.horizontal,!1,Ao,bi,oi);iu&&(Fi.horizontal[Ls]=iu,ys=iu.positionedLines.length===1)}}qs()}else{fi==="auto"&&(fi=Lr(fo));var Nu=Ka(ca,v,_,L,Pn,Ms,er,fo,fi,Wi,Ri,aa.horizontal,!1,Ao,bi,oi);Nu&&(Fi.horizontal[fi]=Nu),qs(),Zl(Qa)&&ar&&Mr&&(Fi.vertical=Ka(ca,v,_,L,Pn,Ms,er,fo,fi,Wi,Ri,aa.vertical,!1,Ao,bi,oi))}}var nl=void 0,il=!1;if(yn.icon&&yn.icon.name){var gu=R[yn.icon.name];gu&&(nl=function(Ba,Do,Ho){var Na=Uo(Ho),Gl=Do[0]-Ba.displaySize[0]*Na.horizontalAlign,Pl=Do[1]-Ba.displaySize[1]*Na.verticalAlign;return{image:Ba,top:Pl,bottom:Pl+Ba.displaySize[1],left:Gl,right:Gl+Ba.displaySize[0]}}(L[yn.icon.name],ae.get("icon-offset").evaluate(yn,{},j),ae.get("icon-anchor").evaluate(yn,{},j)),il=gu.sdf,h.sdfIcons===void 0?h.sdfIcons=gu.sdf:h.sdfIcons!==gu.sdf&&Ye("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(gu.pixelRatio!==h.pixelRatio||ae.get("icon-rotate").constantOr(1)!==0)&&(h.iconsNeedLinear=!0))}var al=Rr(Fi.horizontal)||Fi.vertical;h.iconsInText=!!al&&al.iconsInText,(al||nl)&&function(Ba,Do,Ho,Na,Gl,Pl,_s,au,Ol,Co,Hf){var vl=Pl.textMaxSize.evaluate(Do,{});vl===void 0&&(vl=_s);var Za,ra=Ba.layers[0].layout,_h=ra.get("icon-offset").evaluate(Do,{},Hf),jf=Rr(Ho.horizontal),Np=_s/24,qd=Ba.tilePixelRatio*Np,xg=Ba.tilePixelRatio*vl/24,zp=Ba.tilePixelRatio*au,Qd=Ba.tilePixelRatio*ra.get("symbol-spacing"),wm=ra.get("text-padding")*Ba.tilePixelRatio,md=ra.get("icon-padding")*Ba.tilePixelRatio,bg=ra.get("text-max-angle")/180*Math.PI,Cm=ra.get("text-rotation-alignment")==="map"&&ra.get("symbol-placement")!=="point",mu=ra.get("icon-rotation-alignment")==="map"&&ra.get("symbol-placement")!=="point",Up=ra.get("symbol-placement"),Pv=Qd/2,Ov=ra.get("icon-text-fit");Na&&Ov!=="none"&&(Ba.allowVerticalPlacement&&Ho.vertical&&(Za=zs(Na,Ho.vertical,Ov,ra.get("icon-text-fit-padding"),_h,Np)),jf&&(Na=zs(Na,jf,Ov,ra.get("icon-text-fit-padding"),_h,Np)));var yd=function(tE,Mm){Mm.x<0||Mm.x>=8192||Mm.y<0||Mm.y>=8192||function(yu,Jc,kx,Zp,Rm,Bc,Xh,ef,Jd,ev,Vp,xd,Dv,Im,Hp,Pm,H0,bd,Om,km,kl,zu,Tg,bh,Fm){var Mg,$h,Lv,tv,rv,Bv=yu.addToLineVertexArray(Jc,kx),S_=0,E_=0,w_=0,gt=0,Dm=-1,tf=-1,Yh={},j0=rr(""),nv=0,Lm=0;if(ef._unevaluatedLayout.getValue("text-radial-offset")===void 0?(nv=(Mg=ef.layout.get("text-offset").evaluate(kl,{},bh).map(function(Uv){return 24*Uv}))[0],Lm=Mg[1]):(nv=24*ef.layout.get("text-radial-offset").evaluate(kl,{},bh),Lm=Ar),yu.allowVerticalPlacement&&Zp.vertical){var W0=ef.layout.get("text-rotate").evaluate(kl,{},bh)+90;tv=new Tn(Jd,Jc,ev,Vp,xd,Zp.vertical,Dv,Im,Hp,W0),Xh&&(rv=new Tn(Jd,Jc,ev,Vp,xd,Xh,H0,bd,Hp,W0))}if(Rm){var Kh=ef.layout.get("icon-rotate").evaluate(kl,{}),G0=ef.layout.get("icon-text-fit")!=="none",X0=ur(Rm,Kh,Tg,G0),Fl=Xh?ur(Xh,Kh,Tg,G0):void 0;Lv=new Tn(Jd,Jc,ev,Vp,xd,Rm,H0,bd,!1,Kh),S_=4*X0.length;var qh=yu.iconSizeData,Nv=null;qh.kind==="source"?(Nv=[128*ef.layout.get("icon-size").evaluate(kl,{})])[0]>32640&&Ye(yu.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):qh.kind==="composite"&&((Nv=[128*zu.compositeIconSizes[0].evaluate(kl,{},bh),128*zu.compositeIconSizes[1].evaluate(kl,{},bh)])[0]>32640||Nv[1]>32640)&&Ye(yu.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),yu.addSymbols(yu.icon,X0,Nv,km,Om,kl,!1,Jc,Bv.lineStartIndex,Bv.lineLength,-1,bh),Dm=yu.icon.placedSymbolArray.length-1,Fl&&(E_=4*Fl.length,yu.addSymbols(yu.icon,Fl,Nv,km,Om,kl,aa.vertical,Jc,Bv.lineStartIndex,Bv.lineLength,-1,bh),tf=yu.icon.placedSymbolArray.length-1)}for(var C_ in Zp.horizontal){var Bm=Zp.horizontal[C_];if(!$h){j0=rr(Bm.text);var A_=ef.layout.get("text-rotate").evaluate(kl,{},bh);$h=new Tn(Jd,Jc,ev,Vp,xd,Bm,Dv,Im,Hp,A_)}var $0=Bm.positionedLines.length===1;if(w_+=lr(yu,Jc,Bm,Bc,ef,Hp,kl,Pm,Bv,Zp.vertical?aa.horizontal:aa.horizontalOnly,$0?Object.keys(Zp.horizontal):[C_],Yh,Dm,zu,bh),$0)break}Zp.vertical&&(gt+=lr(yu,Jc,Zp.vertical,Bc,ef,Hp,kl,Pm,Bv,aa.vertical,["vertical"],Yh,tf,zu,bh));var Y0=$h?$h.boxStartIndex:yu.collisionBoxArray.length,T_=$h?$h.boxEndIndex:yu.collisionBoxArray.length,Nm=tv?tv.boxStartIndex:yu.collisionBoxArray.length,Rg=tv?tv.boxEndIndex:yu.collisionBoxArray.length,K0=Lv?Lv.boxStartIndex:yu.collisionBoxArray.length,zv=Lv?Lv.boxEndIndex:yu.collisionBoxArray.length,M_=rv?rv.boxStartIndex:yu.collisionBoxArray.length,q0=rv?rv.boxEndIndex:yu.collisionBoxArray.length,Qh=-1,Ig=function(Uv,Q0){return Uv&&Uv.circleDiameter?Math.max(Uv.circleDiameter,Q0):Q0};Qh=Ig($h,Qh),Qh=Ig(tv,Qh),Qh=Ig(Lv,Qh);var Pg=(Qh=Ig(rv,Qh))>-1?1:0;Pg&&(Qh*=Fm/24),yu.glyphOffsetArray.length>=Fn.MAX_GLYPHS&&Ye("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),kl.sortKey!==void 0&&yu.addToSortKeyRanges(yu.symbolInstances.length,kl.sortKey),yu.symbolInstances.emplaceBack(Jc.x,Jc.y,Yh.right>=0?Yh.right:-1,Yh.center>=0?Yh.center:-1,Yh.left>=0?Yh.left:-1,Yh.vertical||-1,Dm,tf,j0,Y0,T_,Nm,Rg,K0,zv,M_,q0,ev,w_,gt,S_,E_,Pg,0,Dv,nv,Lm,Qh)}(Ba,Mm,tE,Ho,Na,Gl,Za,Ba.layers[0],Ba.collisionBoxArray,Do.index,Do.sourceLayerIndex,Ba.index,qd,wm,Cm,Ol,zp,md,mu,_h,Do,Pl,Co,Hf,_s)};if(Up==="line")for(var Sg=0,Eg=Du(Do.geometry,0,0,8192,8192);Sg<Eg.length;Sg+=1)for(var U0=Eg[Sg],wg=0,Z0=Us(U0,Qd,bg,Ho.vertical||jf,Na,24,xg,Ba.overscaling,8192);wg<Z0.length;wg+=1){var y_=Z0[wg];jf&&Yt(Ba,jf.text,Pv,y_)||yd(U0,y_)}else if(Up==="line-center")for(var V0=0,ec=Do.geometry;V0<ec.length;V0+=1){var xh=ec[V0];if(xh.length>1){var Jo=So(xh,bg,Ho.vertical||jf,Na,24,xg);Jo&&yd(xh,Jo)}}else if(Do.type==="Polygon")for(var Lc=0,Gh=Av(Do.geometry,0);Lc<Gh.length;Lc+=1){var Cg=Gh[Lc],Am=hr(Cg,16);yd(Cg[0],new Fs(Am.x,Am.y,0))}else if(Do.type==="LineString")for(var kv=0,Tm=Do.geometry;kv<Tm.length;kv+=1){var Fv=Tm[kv];yd(Fv,new Fs(Fv[0].x,Fv[0].y,0))}else if(Do.type==="Point")for(var _d=0,Ag=Do.geometry;_d<Ag.length;_d+=1)for(var __=0,x_=Ag[_d];__<x_.length;__+=1){var b_=x_[__];yd([b_],new Fs(b_.x,b_.y,0))}}(h,yn,Fi,nl,R,He,bi,Qi,Ri,il,j)},Kr=0,nn=h.features;Kr<nn.length;Kr+=1)Ur();z&&h.generateCollisionDebugBuffers()},w.perspective=function(h,v,_,R,L){var z,j=1/Math.tan(v/2);return h[0]=j/_,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=j,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,L!=null&&L!==1/0?(h[10]=(L+R)*(z=1/(R-L)),h[14]=2*L*R*z):(h[10]=-1,h[14]=-2*R),h},w.pick=function(h,v){for(var _={},R=0;R<v.length;R++){var L=v[R];L in h&&(_[L]=h[L])}return _},w.plugin=tu,w.polygonIntersectsPolygon=Kc,w.postMapLoadEvent=ot,w.postTurnstileEvent=pt,w.potpack=Ua,w.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],w.register=zi,w.registerForPluginStateChange=function(h){return h({pluginStatus:eu,pluginURL:fl}),Fh.on("pluginStateChange",h),h},w.renderColorRamp=cg,w.rotate=function(h,v,_){var R=v[0],L=v[1],z=v[2],j=v[3],ae=Math.sin(_),Se=Math.cos(_);return h[0]=R*Se+z*ae,h[1]=L*Se+j*ae,h[2]=R*-ae+z*Se,h[3]=L*-ae+j*Se,h},w.rotateX=function(h,v,_){var R=Math.sin(_),L=Math.cos(_),z=v[4],j=v[5],ae=v[6],Se=v[7],He=v[8],rt=v[9],ht=v[10],Mt=v[11];return v!==h&&(h[0]=v[0],h[1]=v[1],h[2]=v[2],h[3]=v[3],h[12]=v[12],h[13]=v[13],h[14]=v[14],h[15]=v[15]),h[4]=z*L+He*R,h[5]=j*L+rt*R,h[6]=ae*L+ht*R,h[7]=Se*L+Mt*R,h[8]=He*L-z*R,h[9]=rt*L-j*R,h[10]=ht*L-ae*R,h[11]=Mt*L-Se*R,h},w.rotateZ=function(h,v,_){var R=Math.sin(_),L=Math.cos(_),z=v[0],j=v[1],ae=v[2],Se=v[3],He=v[4],rt=v[5],ht=v[6],Mt=v[7];return v!==h&&(h[8]=v[8],h[9]=v[9],h[10]=v[10],h[11]=v[11],h[12]=v[12],h[13]=v[13],h[14]=v[14],h[15]=v[15]),h[0]=z*L+He*R,h[1]=j*L+rt*R,h[2]=ae*L+ht*R,h[3]=Se*L+Mt*R,h[4]=He*L-z*R,h[5]=rt*L-j*R,h[6]=ht*L-ae*R,h[7]=Mt*L-Se*R,h},w.scale=function(h,v,_){var R=_[0],L=_[1],z=_[2];return h[0]=v[0]*R,h[1]=v[1]*R,h[2]=v[2]*R,h[3]=v[3]*R,h[4]=v[4]*L,h[5]=v[5]*L,h[6]=v[6]*L,h[7]=v[7]*L,h[8]=v[8]*z,h[9]=v[9]*z,h[10]=v[10]*z,h[11]=v[11]*z,h[12]=v[12],h[13]=v[13],h[14]=v[14],h[15]=v[15],h},w.scale$1=function(h,v,_){return h[0]=v[0]*_,h[1]=v[1]*_,h[2]=v[2]*_,h[3]=v[3]*_,h},w.scale$2=function(h,v,_){return h[0]=v[0]*_,h[1]=v[1]*_,h[2]=v[2]*_,h},w.setCacheLimits=function(h,v){zt=h,Jt=v},w.setRTLTextPlugin=function(h,v,_){if(_===void 0&&(_=!1),eu==="deferred"||eu==="loading"||eu==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");fl=ze.resolveURL(h),eu="deferred",Mc=v,kh(),_||lc()},w.sphericalToCartesian=function(h){var v=h[0],_=h[1],R=h[2];return _+=90,_*=Math.PI/180,R*=Math.PI/180,{x:v*Math.cos(_)*Math.sin(R),y:v*Math.sin(_)*Math.sin(R),z:v*Math.cos(R)}},w.sqrLen=function(h){var v=h[0],_=h[1];return v*v+_*_},w.styleSpec=kt,w.sub=function(h,v,_){return h[0]=v[0]-_[0],h[1]=v[1]-_[1],h[2]=v[2]-_[2],h},w.symbolSize=qa,w.transformMat3=function(h,v,_){var R=v[0],L=v[1],z=v[2];return h[0]=R*_[0]+L*_[3]+z*_[6],h[1]=R*_[1]+L*_[4]+z*_[7],h[2]=R*_[2]+L*_[5]+z*_[8],h},w.transformMat4=mf,w.translate=function(h,v,_){var R,L,z,j,ae,Se,He,rt,ht,Mt,Nt,er,ar=_[0],Mr=_[1],_r=_[2];return v===h?(h[12]=v[0]*ar+v[4]*Mr+v[8]*_r+v[12],h[13]=v[1]*ar+v[5]*Mr+v[9]*_r+v[13],h[14]=v[2]*ar+v[6]*Mr+v[10]*_r+v[14],h[15]=v[3]*ar+v[7]*Mr+v[11]*_r+v[15]):(L=v[1],z=v[2],j=v[3],ae=v[4],Se=v[5],He=v[6],rt=v[7],ht=v[8],Mt=v[9],Nt=v[10],er=v[11],h[0]=R=v[0],h[1]=L,h[2]=z,h[3]=j,h[4]=ae,h[5]=Se,h[6]=He,h[7]=rt,h[8]=ht,h[9]=Mt,h[10]=Nt,h[11]=er,h[12]=R*ar+ae*Mr+ht*_r+v[12],h[13]=L*ar+Se*Mr+Mt*_r+v[13],h[14]=z*ar+He*Mr+Nt*_r+v[14],h[15]=j*ar+rt*Mr+er*_r+v[15]),h},w.triggerPluginCompletionEvent=xv,w.uniqueId=me,w.validateCustomStyleLayer=function(h){var v=[],_=h.id;return _===void 0&&v.push({message:"layers."+_+': missing required property "id"'}),h.render===void 0&&v.push({message:"layers."+_+': missing required method "render"'}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&v.push({message:"layers."+_+': property "renderingMode" must be either "2d" or "3d"'}),v},w.validateLight=_v,w.validateStyle=bp,w.values=function(h){var v=[];for(var _ in h)v.push(h[_]);return v},w.vectorTile=Pp,w.version="1.13.3",w.warnOnce=Ye,w.webpSupported=Ct,w.window=ee,w.wrap=M}),X(["./shared"],function(w){"use strict";function Y(We){var it=typeof We;if(it==="number"||it==="boolean"||it==="string"||We==null)return JSON.stringify(We);if(Array.isArray(We)){for(var _t="[",Pt=0,jt=We;Pt<jt.length;Pt+=1)_t+=Y(jt[Pt])+",";return _t+"]"}for(var gr=Object.keys(We).sort(),Cr="{",kt=0;kt<gr.length;kt++)Cr+=JSON.stringify(gr[kt])+":"+Y(We[gr[kt]])+",";return Cr+"}"}function G(We){for(var it="",_t=0,Pt=w.refProperties;_t<Pt.length;_t+=1)it+="/"+Y(We[Pt[_t]]);return it}var K=function(We){this.keyCache={},We&&this.replace(We)};K.prototype.replace=function(We){this._layerConfigs={},this._layers={},this.update(We,[])},K.prototype.update=function(We,it){for(var _t=this,Pt=0,jt=We;Pt<jt.length;Pt+=1){var gr=jt[Pt];this._layerConfigs[gr.id]=gr;var Cr=this._layers[gr.id]=w.createStyleLayer(gr);Cr._featureFilter=w.featureFilter(Cr.filter),this.keyCache[gr.id]&&delete this.keyCache[gr.id]}for(var kt=0,at=it;kt<at.length;kt+=1){var Rt=at[kt];delete this.keyCache[Rt],delete this._layerConfigs[Rt],delete this._layers[Rt]}this.familiesBySource={};for(var mr=0,Dr=function(ri,ui){for(var ba={},vi=0;vi<ri.length;vi++){var Sa=ui&&ui[ri[vi].id]||G(ri[vi]);ui&&(ui[ri[vi].id]=Sa);var za=ba[Sa];za||(za=ba[Sa]=[]),za.push(ri[vi])}var _a=[];for(var Ga in ba)_a.push(ba[Ga]);return _a}(w.values(this._layerConfigs),this.keyCache);mr<Dr.length;mr+=1){var Ft=Dr[mr].map(function(ri){return _t._layers[ri.id]}),Mn=Ft[0];if(Mn.visibility!=="none"){var yi=Mn.source||"",gi=this.familiesBySource[yi];gi||(gi=this.familiesBySource[yi]={});var sn=Mn.sourceLayer||"_geojsonTileLayer",hi=gi[sn];hi||(hi=gi[sn]=[]),hi.push(Ft)}}};var Q=function(We){var it={},_t=[];for(var Pt in We){var jt=We[Pt],gr=it[Pt]={};for(var Cr in jt){var kt=jt[+Cr];if(kt&&kt.bitmap.width!==0&&kt.bitmap.height!==0){var at={x:0,y:0,w:kt.bitmap.width+2,h:kt.bitmap.height+2};_t.push(at),gr[Cr]={rect:at,metrics:kt.metrics}}}}var Rt=w.potpack(_t),mr=new w.AlphaImage({width:Rt.w||1,height:Rt.h||1});for(var Dr in We){var Ft=We[Dr];for(var Mn in Ft){var yi=Ft[+Mn];if(yi&&yi.bitmap.width!==0&&yi.bitmap.height!==0){var gi=it[Dr][Mn].rect;w.AlphaImage.copy(yi.bitmap,mr,{x:0,y:0},{x:gi.x+1,y:gi.y+1},yi.bitmap)}}}this.image=mr,this.positions=it};w.register("GlyphAtlas",Q);var oe=function(We){this.tileID=new w.OverscaledTileID(We.tileID.overscaledZ,We.tileID.wrap,We.tileID.canonical.z,We.tileID.canonical.x,We.tileID.canonical.y),this.uid=We.uid,this.zoom=We.zoom,this.pixelRatio=We.pixelRatio,this.tileSize=We.tileSize,this.source=We.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=We.showCollisionBoxes,this.collectResourceTiming=!!We.collectResourceTiming,this.returnDependencies=!!We.returnDependencies,this.promoteId=We.promoteId};function ee(We,it,_t){for(var Pt=new w.EvaluationParameters(it),jt=0,gr=We;jt<gr.length;jt+=1)gr[jt].recalculate(Pt,_t)}function xe(We,it){var _t=w.getArrayBuffer(We.request,function(Pt,jt,gr,Cr){Pt?it(Pt):jt&&it(null,{vectorTile:new w.vectorTile.VectorTile(new w.pbf(jt)),rawData:jt,cacheControl:gr,expires:Cr})});return function(){_t.cancel(),it()}}oe.prototype.parse=function(We,it,_t,Pt,jt){var gr=this;this.status="parsing",this.data=We,this.collisionBoxArray=new w.CollisionBoxArray;var Cr=new w.DictionaryCoder(Object.keys(We.layers).sort()),kt=new w.FeatureIndex(this.tileID,this.promoteId);kt.bucketLayerIDs=[];var at,Rt,mr,Dr,Ft={},Mn={featureIndex:kt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:_t},yi=it.familiesBySource[this.source];for(var gi in yi){var sn=We.layers[gi];if(sn){sn.version===1&&w.warnOnce('Vector tile source "'+this.source+'" layer "'+gi+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var hi=Cr.encode(gi),ri=[],ui=0;ui<sn.length;ui++){var ba=sn.feature(ui),vi=kt.getId(ba,gi);ri.push({feature:ba,id:vi,index:ui,sourceLayerIndex:hi})}for(var Sa=0,za=yi[gi];Sa<za.length;Sa+=1){var _a=za[Sa],Ga=_a[0];Ga.minzoom&&this.zoom<Math.floor(Ga.minzoom)||Ga.maxzoom&&this.zoom>=Ga.maxzoom||Ga.visibility!=="none"&&(ee(_a,this.zoom,_t),(Ft[Ga.id]=Ga.createBucket({index:kt.bucketLayerIDs.length,layers:_a,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:hi,sourceID:this.source})).populate(ri,Mn,this.tileID.canonical),kt.bucketLayerIDs.push(_a.map(function(Jn){return Jn.id})))}}}var Ea=w.mapObject(Mn.glyphDependencies,function(Jn){return Object.keys(Jn).map(Number)});Object.keys(Ea).length?Pt.send("getGlyphs",{uid:this.uid,stacks:Ea},function(Jn,_i){at||(at=Jn,Rt=_i,Ro.call(gr))}):Rt={};var hs=Object.keys(Mn.iconDependencies);hs.length?Pt.send("getImages",{icons:hs,source:this.source,tileID:this.tileID,type:"icons"},function(Jn,_i){at||(at=Jn,mr=_i,Ro.call(gr))}):mr={};var uo=Object.keys(Mn.patternDependencies);function Ro(){if(at)return jt(at);if(Rt&&mr&&Dr){var Jn=new Q(Rt),_i=new w.ImageAtlas(mr,Dr);for(var na in Ft){var Xa=Ft[na];Xa instanceof w.SymbolBucket?(ee(Xa.layers,this.zoom,_t),w.performSymbolLayout(Xa,Rt,Jn.positions,mr,_i.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Xa.hasPattern&&(Xa instanceof w.LineBucket||Xa instanceof w.FillBucket||Xa instanceof w.FillExtrusionBucket)&&(ee(Xa.layers,this.zoom,_t),Xa.addFeatures(Mn,this.tileID.canonical,_i.patternPositions))}this.status="done",jt(null,{buckets:w.values(Ft).filter(function(ps){return!ps.isEmpty()}),featureIndex:kt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Jn.image,imageAtlas:_i,glyphMap:this.returnDependencies?Rt:null,iconMap:this.returnDependencies?mr:null,glyphPositions:this.returnDependencies?Jn.positions:null})}}uo.length?Pt.send("getImages",{icons:uo,source:this.source,tileID:this.tileID,type:"patterns"},function(Jn,_i){at||(at=Jn,Dr=_i,Ro.call(gr))}):Dr={},Ro.call(this)};var ce=function(We,it,_t,Pt){this.actor=We,this.layerIndex=it,this.availableImages=_t,this.loadVectorData=Pt||xe,this.loading={},this.loaded={}};ce.prototype.loadTile=function(We,it){var _t=this,Pt=We.uid;this.loading||(this.loading={});var jt=!!(We&&We.request&&We.request.collectResourceTiming)&&new w.RequestPerformance(We.request),gr=this.loading[Pt]=new oe(We);gr.abort=this.loadVectorData(We,function(Cr,kt){if(delete _t.loading[Pt],Cr||!kt)return gr.status="done",_t.loaded[Pt]=gr,it(Cr);var at=kt.rawData,Rt={};kt.expires&&(Rt.expires=kt.expires),kt.cacheControl&&(Rt.cacheControl=kt.cacheControl);var mr={};if(jt){var Dr=jt.finish();Dr&&(mr.resourceTiming=JSON.parse(JSON.stringify(Dr)))}gr.vectorTile=kt.vectorTile,gr.parse(kt.vectorTile,_t.layerIndex,_t.availableImages,_t.actor,function(Ft,Mn){if(Ft||!Mn)return it(Ft);it(null,w.extend({rawTileData:at.slice(0)},Mn,Rt,mr))}),_t.loaded=_t.loaded||{},_t.loaded[Pt]=gr})},ce.prototype.reloadTile=function(We,it){var _t=this,Pt=this.loaded,jt=We.uid,gr=this;if(Pt&&Pt[jt]){var Cr=Pt[jt];Cr.showCollisionBoxes=We.showCollisionBoxes;var kt=function(at,Rt){var mr=Cr.reloadCallback;mr&&(delete Cr.reloadCallback,Cr.parse(Cr.vectorTile,gr.layerIndex,_t.availableImages,gr.actor,mr)),it(at,Rt)};Cr.status==="parsing"?Cr.reloadCallback=kt:Cr.status==="done"&&(Cr.vectorTile?Cr.parse(Cr.vectorTile,this.layerIndex,this.availableImages,this.actor,kt):kt())}},ce.prototype.abortTile=function(We,it){var _t=this.loading,Pt=We.uid;_t&&_t[Pt]&&_t[Pt].abort&&(_t[Pt].abort(),delete _t[Pt]),it()},ce.prototype.removeTile=function(We,it){var _t=this.loaded,Pt=We.uid;_t&&_t[Pt]&&delete _t[Pt],it()};var he=w.window.ImageBitmap,J=function(){this.loaded={}};function M(We,it){if(We.length!==0){E(We[0],it);for(var _t=1;_t<We.length;_t++)E(We[_t],!it)}}function E(We,it){for(var _t=0,Pt=0,jt=0,gr=We.length,Cr=gr-1;jt<gr;Cr=jt++){var kt=(We[jt][0]-We[Cr][0])*(We[Cr][1]+We[jt][1]),at=_t+kt;Pt+=Math.abs(_t)>=Math.abs(kt)?_t-at+kt:kt-at+_t,_t=at}_t+Pt>=0!=!!it&&We.reverse()}J.prototype.loadTile=function(We,it){var _t=We.uid,Pt=We.encoding,jt=We.rawImageData,gr=he&&jt instanceof he?this.getImageData(jt):jt,Cr=new w.DEMData(_t,gr,Pt);this.loaded=this.loaded||{},this.loaded[_t]=Cr,it(null,Cr)},J.prototype.getImageData=function(We){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(We.width,We.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=We.width,this.offscreenCanvas.height=We.height,this.offscreenCanvasContext.drawImage(We,0,0,We.width,We.height);var it=this.offscreenCanvasContext.getImageData(-1,-1,We.width+2,We.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new w.RGBAImage({width:it.width,height:it.height},it.data)},J.prototype.removeTile=function(We){var it=this.loaded,_t=We.uid;it&&it[_t]&&delete it[_t]};var fe=w.vectorTile.VectorTileFeature.prototype.toGeoJSON,me=function(We){this._feature=We,this.extent=w.EXTENT,this.type=We.type,this.properties=We.tags,"id"in We&&!isNaN(We.id)&&(this.id=parseInt(We.id,10))};me.prototype.loadGeometry=function(){if(this._feature.type===1){for(var We=[],it=0,_t=this._feature.geometry;it<_t.length;it+=1){var Pt=_t[it];We.push([new w.Point$1(Pt[0],Pt[1])])}return We}for(var jt=[],gr=0,Cr=this._feature.geometry;gr<Cr.length;gr+=1){for(var kt=[],at=0,Rt=Cr[gr];at<Rt.length;at+=1){var mr=Rt[at];kt.push(new w.Point$1(mr[0],mr[1]))}jt.push(kt)}return jt},me.prototype.toGeoJSON=function(We,it,_t){return fe.call(this,We,it,_t)};var ke=function(We){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=w.EXTENT,this.length=We.length,this._features=We};ke.prototype.feature=function(We){return new me(this._features[We])};var Pe=w.vectorTile.VectorTileFeature,Le=tt;function tt(We,it){this.options=it||{},this.features=We,this.length=We.length}function ft(We,it){this.id=typeof We.id=="number"?We.id:void 0,this.type=We.type,this.rawGeometry=We.type===1?[We.geometry]:We.geometry,this.properties=We.tags,this.extent=it||4096}tt.prototype.feature=function(We){return new ft(this.features[We],this.options.extent)},ft.prototype.loadGeometry=function(){var We=this.rawGeometry;this.geometry=[];for(var it=0;it<We.length;it++){for(var _t=We[it],Pt=[],jt=0;jt<_t.length;jt++)Pt.push(new w.Point$1(_t[jt][0],_t[jt][1]));this.geometry.push(Pt)}return this.geometry},ft.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var We=this.geometry,it=1/0,_t=-1/0,Pt=1/0,jt=-1/0,gr=0;gr<We.length;gr++)for(var Cr=We[gr],kt=0;kt<Cr.length;kt++){var at=Cr[kt];it=Math.min(it,at.x),_t=Math.max(_t,at.x),Pt=Math.min(Pt,at.y),jt=Math.max(jt,at.y)}return[it,Pt,_t,jt]},ft.prototype.toGeoJSON=Pe.prototype.toGeoJSON;var ge=Ce,be=Le;function Ce(We){var it=new w.pbf;return function(_t,Pt){for(var jt in _t.layers)Pt.writeMessage(3,Ye,_t.layers[jt])}(We,it),it.finish()}function Ye(We,it){var _t;it.writeVarintField(15,We.version||1),it.writeStringField(1,We.name||""),it.writeVarintField(5,We.extent||4096);var Pt={keys:[],values:[],keycache:{},valuecache:{}};for(_t=0;_t<We.length;_t++)Pt.feature=We.feature(_t),it.writeMessage(2,je,Pt);var jt=Pt.keys;for(_t=0;_t<jt.length;_t++)it.writeStringField(3,jt[_t]);var gr=Pt.values;for(_t=0;_t<gr.length;_t++)it.writeMessage(4,Ze,gr[_t])}function je(We,it){var _t=We.feature;_t.id!==void 0&&it.writeVarintField(1,_t.id),it.writeMessage(2,Et,We),it.writeVarintField(3,_t.type),it.writeMessage(4,te,_t)}function Et(We,it){var _t=We.feature,Pt=We.keys,jt=We.values,gr=We.keycache,Cr=We.valuecache;for(var kt in _t.properties){var at=gr[kt];at===void 0&&(Pt.push(kt),gr[kt]=at=Pt.length-1),it.writeVarint(at);var Rt=_t.properties[kt],mr=typeof Rt;mr!=="string"&&mr!=="boolean"&&mr!=="number"&&(Rt=JSON.stringify(Rt));var Dr=mr+":"+Rt,Ft=Cr[Dr];Ft===void 0&&(jt.push(Rt),Cr[Dr]=Ft=jt.length-1),it.writeVarint(Ft)}}function Ae(We,it){return(it<<3)+(7&We)}function Qe(We){return We<<1^We>>31}function te(We,it){for(var _t=We.loadGeometry(),Pt=We.type,jt=0,gr=0,Cr=_t.length,kt=0;kt<Cr;kt++){var at=_t[kt],Rt=1;Pt===1&&(Rt=at.length),it.writeVarint(Ae(1,Rt));for(var mr=Pt===3?at.length-1:at.length,Dr=0;Dr<mr;Dr++){Dr===1&&Pt!==1&&it.writeVarint(Ae(2,mr-1));var Ft=at[Dr].x-jt,Mn=at[Dr].y-gr;it.writeVarint(Qe(Ft)),it.writeVarint(Qe(Mn)),jt+=Ft,gr+=Mn}Pt===3&&it.writeVarint(Ae(7,1))}}function Ze(We,it){var _t=typeof We;_t==="string"?it.writeStringField(1,We):_t==="boolean"?it.writeBooleanField(7,We):_t==="number"&&(We%1!=0?it.writeDoubleField(3,We):We<0?it.writeSVarintField(6,We):it.writeVarintField(5,We))}function ie(We,it,_t,Pt){Oe(We,_t,Pt),Oe(it,2*_t,2*Pt),Oe(it,2*_t+1,2*Pt+1)}function Oe(We,it,_t){var Pt=We[it];We[it]=We[_t],We[_t]=Pt}function nt(We,it,_t,Pt){var jt=We-_t,gr=it-Pt;return jt*jt+gr*gr}ge.fromVectorTileJs=Ce,ge.fromGeojsonVt=function(We,it){it=it||{};var _t={};for(var Pt in We)_t[Pt]=new Le(We[Pt].features,it),_t[Pt].name=Pt,_t[Pt].version=it.version,_t[Pt].extent=it.extent;return Ce({layers:_t})},ge.GeoJSONWrapper=be;var ye=function(We){return We[0]},Te=function(We){return We[1]},Je=function(We,it,_t,Pt,jt){it===void 0&&(it=ye),_t===void 0&&(_t=Te),Pt===void 0&&(Pt=64),jt===void 0&&(jt=Float64Array),this.nodeSize=Pt,this.points=We;for(var gr=We.length<65536?Uint16Array:Uint32Array,Cr=this.ids=new gr(We.length),kt=this.coords=new jt(2*We.length),at=0;at<We.length;at++)Cr[at]=at,kt[2*at]=it(We[at]),kt[2*at+1]=_t(We[at]);(function Rt(mr,Dr,Ft,Mn,yi,gi){if(!(yi-Mn<=Ft)){var sn=Mn+yi>>1;(function hi(ri,ui,ba,vi,Sa,za){for(;Sa>vi;){if(Sa-vi>600){var _a=Sa-vi+1,Ga=ba-vi+1,Ea=Math.log(_a),hs=.5*Math.exp(2*Ea/3),uo=.5*Math.sqrt(Ea*hs*(_a-hs)/_a)*(Ga-_a/2<0?-1:1);hi(ri,ui,ba,Math.max(vi,Math.floor(ba-Ga*hs/_a+uo)),Math.min(Sa,Math.floor(ba+(_a-Ga)*hs/_a+uo)),za)}var Ro=ui[2*ba+za],Jn=vi,_i=Sa;for(ie(ri,ui,vi,ba),ui[2*Sa+za]>Ro&&ie(ri,ui,vi,Sa);Jn<_i;){for(ie(ri,ui,Jn,_i),Jn++,_i--;ui[2*Jn+za]<Ro;)Jn++;for(;ui[2*_i+za]>Ro;)_i--}ui[2*vi+za]===Ro?ie(ri,ui,vi,_i):ie(ri,ui,++_i,Sa),_i<=ba&&(vi=_i+1),ba<=_i&&(Sa=_i-1)}})(mr,Dr,sn,Mn,yi,gi%2),Rt(mr,Dr,Ft,Mn,sn-1,gi+1),Rt(mr,Dr,Ft,sn+1,yi,gi+1)}})(Cr,kt,Pt,0,Cr.length-1,0)};Je.prototype.range=function(We,it,_t,Pt){return function(jt,gr,Cr,kt,at,Rt,mr){for(var Dr,Ft,Mn=[0,jt.length-1,0],yi=[];Mn.length;){var gi=Mn.pop(),sn=Mn.pop(),hi=Mn.pop();if(sn-hi<=mr)for(var ri=hi;ri<=sn;ri++)Ft=gr[2*ri+1],(Dr=gr[2*ri])>=Cr&&Dr<=at&&Ft>=kt&&Ft<=Rt&&yi.push(jt[ri]);else{var ui=Math.floor((hi+sn)/2);Ft=gr[2*ui+1],(Dr=gr[2*ui])>=Cr&&Dr<=at&&Ft>=kt&&Ft<=Rt&&yi.push(jt[ui]);var ba=(gi+1)%2;(gi===0?Cr<=Dr:kt<=Ft)&&(Mn.push(hi),Mn.push(ui-1),Mn.push(ba)),(gi===0?at>=Dr:Rt>=Ft)&&(Mn.push(ui+1),Mn.push(sn),Mn.push(ba))}}return yi}(this.ids,this.coords,We,it,_t,Pt,this.nodeSize)},Je.prototype.within=function(We,it,_t){return function(Pt,jt,gr,Cr,kt,at){for(var Rt=[0,Pt.length-1,0],mr=[],Dr=kt*kt;Rt.length;){var Ft=Rt.pop(),Mn=Rt.pop(),yi=Rt.pop();if(Mn-yi<=at)for(var gi=yi;gi<=Mn;gi++)nt(jt[2*gi],jt[2*gi+1],gr,Cr)<=Dr&&mr.push(Pt[gi]);else{var sn=Math.floor((yi+Mn)/2),hi=jt[2*sn],ri=jt[2*sn+1];nt(hi,ri,gr,Cr)<=Dr&&mr.push(Pt[sn]);var ui=(Ft+1)%2;(Ft===0?gr-kt<=hi:Cr-kt<=ri)&&(Rt.push(yi),Rt.push(sn-1),Rt.push(ui)),(Ft===0?gr+kt>=hi:Cr+kt>=ri)&&(Rt.push(sn+1),Rt.push(Mn),Rt.push(ui))}}return mr}(this.ids,this.coords,We,it,_t,this.nodeSize)};var pe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(We){return We}},Me=function(We){this.options=Ee(Object.create(pe),We),this.trees=new Array(this.options.maxZoom+1)};function ze(We,it,_t,Pt,jt){return{x:We,y:it,zoom:1/0,id:_t,parentId:-1,numPoints:Pt,properties:jt}}function De(We,it){var _t=We.geometry.coordinates,Pt=_t[1];return{x:Ve(_t[0]),y:Ue(Pt),zoom:1/0,index:it,parentId:-1}}function Ct(We){return{type:"Feature",id:We.id,properties:Vt(We),geometry:{type:"Point",coordinates:[(Pt=We.x,360*(Pt-.5)),(it=We.y,_t=(180-360*it)*Math.PI/180,360*Math.atan(Math.exp(_t))/Math.PI-90)]}};var it,_t,Pt}function Vt(We){var it=We.numPoints,_t=it>=1e4?Math.round(it/1e3)+"k":it>=1e3?Math.round(it/100)/10+"k":it;return Ee(Ee({},We.properties),{cluster:!0,cluster_id:We.id,point_count:it,point_count_abbreviated:_t})}function Ve(We){return We/360+.5}function Ue(We){var it=Math.sin(We*Math.PI/180),_t=.5-.25*Math.log((1+it)/(1-it))/Math.PI;return _t<0?0:_t>1?1:_t}function Ee(We,it){for(var _t in it)We[_t]=it[_t];return We}function et(We){return We.x}function st(We){return We.y}function Re(We,it,_t,Pt,jt,gr){var Cr=jt-_t,kt=gr-Pt;if(Cr!==0||kt!==0){var at=((We-_t)*Cr+(it-Pt)*kt)/(Cr*Cr+kt*kt);at>1?(_t=jt,Pt=gr):at>0&&(_t+=Cr*at,Pt+=kt*at)}return(Cr=We-_t)*Cr+(kt=it-Pt)*kt}function Ie(We,it,_t,Pt){var jt={id:We===void 0?null:We,type:it,geometry:_t,tags:Pt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(gr){var Cr=gr.geometry,kt=gr.type;if(kt==="Point"||kt==="MultiPoint"||kt==="LineString")ct(gr,Cr);else if(kt==="Polygon"||kt==="MultiLineString")for(var at=0;at<Cr.length;at++)ct(gr,Cr[at]);else if(kt==="MultiPolygon")for(at=0;at<Cr.length;at++)for(var Rt=0;Rt<Cr[at].length;Rt++)ct(gr,Cr[at][Rt])}(jt),jt}function ct(We,it){for(var _t=0;_t<it.length;_t+=3)We.minX=Math.min(We.minX,it[_t]),We.minY=Math.min(We.minY,it[_t+1]),We.maxX=Math.max(We.maxX,it[_t]),We.maxY=Math.max(We.maxY,it[_t+1])}function Tt(We,it,_t,Pt){if(it.geometry){var jt=it.geometry.coordinates,gr=it.geometry.type,Cr=Math.pow(_t.tolerance/((1<<_t.maxZoom)*_t.extent),2),kt=[],at=it.id;if(_t.promoteId?at=it.properties[_t.promoteId]:_t.generateId&&(at=Pt||0),gr==="Point")Qt(jt,kt);else if(gr==="MultiPoint")for(var Rt=0;Rt<jt.length;Rt++)Qt(jt[Rt],kt);else if(gr==="LineString")wt(jt,kt,Cr,!1);else if(gr==="MultiLineString"){if(_t.lineMetrics){for(Rt=0;Rt<jt.length;Rt++)wt(jt[Rt],kt=[],Cr,!1),We.push(Ie(at,"LineString",kt,it.properties));return}se(jt,kt,Cr,!1)}else if(gr==="Polygon")se(jt,kt,Cr,!0);else{if(gr!=="MultiPolygon"){if(gr==="GeometryCollection"){for(Rt=0;Rt<it.geometry.geometries.length;Rt++)Tt(We,{id:at,geometry:it.geometry.geometries[Rt],properties:it.properties},_t,Pt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Rt=0;Rt<jt.length;Rt++){var mr=[];se(jt[Rt],mr,Cr,!0),kt.push(mr)}}We.push(Ie(at,gr,kt,it.properties))}}function Qt(We,it){it.push(Ge(We[0])),it.push(Ke(We[1])),it.push(0)}function wt(We,it,_t,Pt){for(var jt,gr,Cr=0,kt=0;kt<We.length;kt++){var at=Ge(We[kt][0]),Rt=Ke(We[kt][1]);it.push(at),it.push(Rt),it.push(0),kt>0&&(Cr+=Pt?(jt*Rt-at*gr)/2:Math.sqrt(Math.pow(at-jt,2)+Math.pow(Rt-gr,2))),jt=at,gr=Rt}var mr=it.length-3;it[2]=1,function Dr(Ft,Mn,yi,gi){for(var sn,hi=gi,ri=yi-Mn>>1,ui=yi-Mn,ba=Ft[Mn],vi=Ft[Mn+1],Sa=Ft[yi],za=Ft[yi+1],_a=Mn+3;_a<yi;_a+=3){var Ga=Re(Ft[_a],Ft[_a+1],ba,vi,Sa,za);if(Ga>hi)sn=_a,hi=Ga;else if(Ga===hi){var Ea=Math.abs(_a-ri);Ea<ui&&(sn=_a,ui=Ea)}}hi>gi&&(sn-Mn>3&&Dr(Ft,Mn,sn,gi),Ft[sn+2]=hi,yi-sn>3&&Dr(Ft,sn,yi,gi))}(it,0,mr,_t),it[mr+2]=1,it.size=Math.abs(Cr),it.start=0,it.end=it.size}function se(We,it,_t,Pt){for(var jt=0;jt<We.length;jt++){var gr=[];wt(We[jt],gr,_t,Pt),it.push(gr)}}function Ge(We){return We/360+.5}function Ke(We){var it=Math.sin(We*Math.PI/180),_t=.5-.25*Math.log((1+it)/(1-it))/Math.PI;return _t<0?0:_t>1?1:_t}function bt(We,it,_t,Pt,jt,gr,Cr,kt){if(Pt/=it,gr>=(_t/=it)&&Cr<Pt)return We;if(Cr<_t||gr>=Pt)return null;for(var at=[],Rt=0;Rt<We.length;Rt++){var mr=We[Rt],Dr=mr.geometry,Ft=mr.type,Mn=jt===0?mr.minX:mr.minY,yi=jt===0?mr.maxX:mr.maxY;if(Mn>=_t&&yi<Pt)at.push(mr);else if(!(yi<_t||Mn>=Pt)){var gi=[];if(Ft==="Point"||Ft==="MultiPoint")Be(Dr,gi,_t,Pt,jt);else if(Ft==="LineString")pt(Dr,gi,_t,Pt,jt,!1,kt.lineMetrics);else if(Ft==="MultiLineString")ot(Dr,gi,_t,Pt,jt,!1);else if(Ft==="Polygon")ot(Dr,gi,_t,Pt,jt,!0);else if(Ft==="MultiPolygon")for(var sn=0;sn<Dr.length;sn++){var hi=[];ot(Dr[sn],hi,_t,Pt,jt,!0),hi.length&&gi.push(hi)}if(gi.length){if(kt.lineMetrics&&Ft==="LineString"){for(sn=0;sn<gi.length;sn++)at.push(Ie(mr.id,Ft,gi[sn],mr.tags));continue}Ft!=="LineString"&&Ft!=="MultiLineString"||(gi.length===1?(Ft="LineString",gi=gi[0]):Ft="MultiLineString"),Ft!=="Point"&&Ft!=="MultiPoint"||(Ft=gi.length===3?"Point":"MultiPoint"),at.push(Ie(mr.id,Ft,gi,mr.tags))}}}return at.length?at:null}function Be(We,it,_t,Pt,jt){for(var gr=0;gr<We.length;gr+=3){var Cr=We[gr+jt];Cr>=_t&&Cr<=Pt&&(it.push(We[gr]),it.push(We[gr+1]),it.push(We[gr+2]))}}function pt(We,it,_t,Pt,jt,gr,Cr){for(var kt,at,Rt=It(We),mr=jt===0?Jt:tr,Dr=We.start,Ft=0;Ft<We.length-3;Ft+=3){var Mn=We[Ft],yi=We[Ft+1],gi=We[Ft+2],sn=We[Ft+3],hi=We[Ft+4],ri=jt===0?Mn:yi,ui=jt===0?sn:hi,ba=!1;Cr&&(kt=Math.sqrt(Math.pow(Mn-sn,2)+Math.pow(yi-hi,2))),ri<_t?ui>_t&&(at=mr(Rt,Mn,yi,sn,hi,_t),Cr&&(Rt.start=Dr+kt*at)):ri>Pt?ui<Pt&&(at=mr(Rt,Mn,yi,sn,hi,Pt),Cr&&(Rt.start=Dr+kt*at)):zt(Rt,Mn,yi,gi),ui<_t&&ri>=_t&&(at=mr(Rt,Mn,yi,sn,hi,_t),ba=!0),ui>Pt&&ri<=Pt&&(at=mr(Rt,Mn,yi,sn,hi,Pt),ba=!0),!gr&&ba&&(Cr&&(Rt.end=Dr+kt*at),it.push(Rt),Rt=It(We)),Cr&&(Dr+=kt)}var vi=We.length-3;Mn=We[vi],yi=We[vi+1],gi=We[vi+2],(ri=jt===0?Mn:yi)>=_t&&ri<=Pt&&zt(Rt,Mn,yi,gi),vi=Rt.length-3,gr&&vi>=3&&(Rt[vi]!==Rt[0]||Rt[vi+1]!==Rt[1])&&zt(Rt,Rt[0],Rt[1],Rt[2]),Rt.length&&it.push(Rt)}function It(We){var it=[];return it.size=We.size,it.start=We.start,it.end=We.end,it}function ot(We,it,_t,Pt,jt,gr){for(var Cr=0;Cr<We.length;Cr++)pt(We[Cr],it,_t,Pt,jt,gr,!1)}function zt(We,it,_t,Pt){We.push(it),We.push(_t),We.push(Pt)}function Jt(We,it,_t,Pt,jt,gr){var Cr=(gr-it)/(Pt-it);return We.push(gr),We.push(_t+(jt-_t)*Cr),We.push(1),Cr}function tr(We,it,_t,Pt,jt,gr){var Cr=(gr-_t)/(jt-_t);return We.push(it+(Pt-it)*Cr),We.push(gr),We.push(1),Cr}function pr(We,it){for(var _t=[],Pt=0;Pt<We.length;Pt++){var jt,gr=We[Pt],Cr=gr.type;if(Cr==="Point"||Cr==="MultiPoint"||Cr==="LineString")jt=br(gr.geometry,it);else if(Cr==="MultiLineString"||Cr==="Polygon"){jt=[];for(var kt=0;kt<gr.geometry.length;kt++)jt.push(br(gr.geometry[kt],it))}else if(Cr==="MultiPolygon")for(jt=[],kt=0;kt<gr.geometry.length;kt++){for(var at=[],Rt=0;Rt<gr.geometry[kt].length;Rt++)at.push(br(gr.geometry[kt][Rt],it));jt.push(at)}_t.push(Ie(gr.id,Cr,jt,gr.tags))}return _t}function br(We,it){var _t=[];_t.size=We.size,We.start!==void 0&&(_t.start=We.start,_t.end=We.end);for(var Pt=0;Pt<We.length;Pt+=3)_t.push(We[Pt]+it,We[Pt+1],We[Pt+2]);return _t}function Zr(We,it){if(We.transformed)return We;var _t,Pt,jt,gr=1<<We.z,Cr=We.x,kt=We.y;for(_t=0;_t<We.features.length;_t++){var at=We.features[_t],Rt=at.geometry,mr=at.type;if(at.geometry=[],mr===1)for(Pt=0;Pt<Rt.length;Pt+=2)at.geometry.push(Nr(Rt[Pt],Rt[Pt+1],it,gr,Cr,kt));else for(Pt=0;Pt<Rt.length;Pt++){var Dr=[];for(jt=0;jt<Rt[Pt].length;jt+=2)Dr.push(Nr(Rt[Pt][jt],Rt[Pt][jt+1],it,gr,Cr,kt));at.geometry.push(Dr)}}return We.transformed=!0,We}function Nr(We,it,_t,Pt,jt,gr){return[Math.round(_t*(We*Pt-jt)),Math.round(_t*(it*Pt-gr))]}function tn(We,it,_t,Pt,jt){for(var gr=it===jt.maxZoom?0:jt.tolerance/((1<<it)*jt.extent),Cr={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:_t,y:Pt,z:it,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},kt=0;kt<We.length;kt++){Cr.numFeatures++,Dn(Cr,We[kt],gr,jt);var at=We[kt].minX,Rt=We[kt].minY,mr=We[kt].maxX,Dr=We[kt].maxY;at<Cr.minX&&(Cr.minX=at),Rt<Cr.minY&&(Cr.minY=Rt),mr>Cr.maxX&&(Cr.maxX=mr),Dr>Cr.maxY&&(Cr.maxY=Dr)}return Cr}function Dn(We,it,_t,Pt){var jt=it.geometry,gr=it.type,Cr=[];if(gr==="Point"||gr==="MultiPoint")for(var kt=0;kt<jt.length;kt+=3)Cr.push(jt[kt]),Cr.push(jt[kt+1]),We.numPoints++,We.numSimplified++;else if(gr==="LineString")gn(Cr,jt,We,_t,!1,!1);else if(gr==="MultiLineString"||gr==="Polygon")for(kt=0;kt<jt.length;kt++)gn(Cr,jt[kt],We,_t,gr==="Polygon",kt===0);else if(gr==="MultiPolygon")for(var at=0;at<jt.length;at++){var Rt=jt[at];for(kt=0;kt<Rt.length;kt++)gn(Cr,Rt[kt],We,_t,!0,kt===0)}if(Cr.length){var mr=it.tags||null;if(gr==="LineString"&&Pt.lineMetrics){for(var Dr in mr={},it.tags)mr[Dr]=it.tags[Dr];mr.mapbox_clip_start=jt.start/jt.size,mr.mapbox_clip_end=jt.end/jt.size}var Ft={geometry:Cr,type:gr==="Polygon"||gr==="MultiPolygon"?3:gr==="LineString"||gr==="MultiLineString"?2:1,tags:mr};it.id!==null&&(Ft.id=it.id),We.features.push(Ft)}}function gn(We,it,_t,Pt,jt,gr){var Cr=Pt*Pt;if(Pt>0&&it.size<(jt?Cr:Pt))_t.numPoints+=it.length/3;else{for(var kt=[],at=0;at<it.length;at+=3)(Pt===0||it[at+2]>Cr)&&(_t.numSimplified++,kt.push(it[at]),kt.push(it[at+1])),_t.numPoints++;jt&&function(Rt,mr){for(var Dr=0,Ft=0,Mn=Rt.length,yi=Mn-2;Ft<Mn;yi=Ft,Ft+=2)Dr+=(Rt[Ft]-Rt[yi])*(Rt[Ft+1]+Rt[yi+1]);if(Dr>0===mr)for(Ft=0,Mn=Rt.length;Ft<Mn/2;Ft+=2){var gi=Rt[Ft],sn=Rt[Ft+1];Rt[Ft]=Rt[Mn-2-Ft],Rt[Ft+1]=Rt[Mn-1-Ft],Rt[Mn-2-Ft]=gi,Rt[Mn-1-Ft]=sn}}(kt,gr),We.push(kt)}}function Vn(We,it){var _t=(it=this.options=function(jt,gr){for(var Cr in gr)jt[Cr]=gr[Cr];return jt}(Object.create(this.options),it)).debug;if(_t&&console.time("preprocess data"),it.maxZoom<0||it.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(it.promoteId&&it.generateId)throw new Error("promoteId and generateId cannot be used together.");var Pt=function(jt,gr){var Cr=[];if(jt.type==="FeatureCollection")for(var kt=0;kt<jt.features.length;kt++)Tt(Cr,jt.features[kt],gr,kt);else Tt(Cr,jt.type==="Feature"?jt:{geometry:jt},gr);return Cr}(We,it);this.tiles={},this.tileCoords=[],_t&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",it.indexMaxZoom,it.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Pt=function(jt,gr){var Cr=gr.buffer/gr.extent,kt=jt,at=bt(jt,1,-1-Cr,Cr,0,-1,2,gr),Rt=bt(jt,1,1-Cr,2+Cr,0,-1,2,gr);return(at||Rt)&&(kt=bt(jt,1,-Cr,1+Cr,0,-1,2,gr)||[],at&&(kt=pr(at,1).concat(kt)),Rt&&(kt=kt.concat(pr(Rt,-1)))),kt}(Pt,it)).length&&this.splitTile(Pt,0,0,0),_t&&(Pt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Un(We,it,_t){return 32*((1<<We)*_t+it)+We}function mi(We,it){var _t=We.tileID.canonical;if(!this._geoJSONIndex)return it(null,null);var Pt=this._geoJSONIndex.getTile(_t.z,_t.x,_t.y);if(!Pt)return it(null,null);var jt=new ke(Pt.features),gr=ge(jt);gr.byteOffset===0&&gr.byteLength===gr.buffer.byteLength||(gr=new Uint8Array(gr)),it(null,{vectorTile:jt,rawData:gr.buffer})}Me.prototype.load=function(We){var it=this.options,_t=it.log,Pt=it.minZoom,jt=it.maxZoom,gr=it.nodeSize;_t&&console.time("total time");var Cr="prepare "+We.length+" points";_t&&console.time(Cr),this.points=We;for(var kt=[],at=0;at<We.length;at++)We[at].geometry&&kt.push(De(We[at],at));this.trees[jt+1]=new Je(kt,et,st,gr,Float32Array),_t&&console.timeEnd(Cr);for(var Rt=jt;Rt>=Pt;Rt--){var mr=+Date.now();kt=this._cluster(kt,Rt),this.trees[Rt]=new Je(kt,et,st,gr,Float32Array),_t&&console.log("z%d: %d clusters in %dms",Rt,kt.length,+Date.now()-mr)}return _t&&console.timeEnd("total time"),this},Me.prototype.getClusters=function(We,it){var _t=((We[0]+180)%360+360)%360-180,Pt=Math.max(-90,Math.min(90,We[1])),jt=We[2]===180?180:((We[2]+180)%360+360)%360-180,gr=Math.max(-90,Math.min(90,We[3]));if(We[2]-We[0]>=360)_t=-180,jt=180;else if(_t>jt){var Cr=this.getClusters([_t,Pt,180,gr],it),kt=this.getClusters([-180,Pt,jt,gr],it);return Cr.concat(kt)}for(var at=this.trees[this._limitZoom(it)],Rt=[],mr=0,Dr=at.range(Ve(_t),Ue(gr),Ve(jt),Ue(Pt));mr<Dr.length;mr+=1){var Ft=at.points[Dr[mr]];Rt.push(Ft.numPoints?Ct(Ft):this.points[Ft.index])}return Rt},Me.prototype.getChildren=function(We){var it=this._getOriginId(We),_t=this._getOriginZoom(We),Pt="No cluster with the specified id.",jt=this.trees[_t];if(!jt)throw new Error(Pt);var gr=jt.points[it];if(!gr)throw new Error(Pt);for(var Cr=this.options.radius/(this.options.extent*Math.pow(2,_t-1)),kt=[],at=0,Rt=jt.within(gr.x,gr.y,Cr);at<Rt.length;at+=1){var mr=jt.points[Rt[at]];mr.parentId===We&&kt.push(mr.numPoints?Ct(mr):this.points[mr.index])}if(kt.length===0)throw new Error(Pt);return kt},Me.prototype.getLeaves=function(We,it,_t){var Pt=[];return this._appendLeaves(Pt,We,it=it||10,_t=_t||0,0),Pt},Me.prototype.getTile=function(We,it,_t){var Pt=this.trees[this._limitZoom(We)],jt=Math.pow(2,We),gr=this.options,Cr=gr.radius/gr.extent,kt=(_t-Cr)/jt,at=(_t+1+Cr)/jt,Rt={features:[]};return this._addTileFeatures(Pt.range((it-Cr)/jt,kt,(it+1+Cr)/jt,at),Pt.points,it,_t,jt,Rt),it===0&&this._addTileFeatures(Pt.range(1-Cr/jt,kt,1,at),Pt.points,jt,_t,jt,Rt),it===jt-1&&this._addTileFeatures(Pt.range(0,kt,Cr/jt,at),Pt.points,-1,_t,jt,Rt),Rt.features.length?Rt:null},Me.prototype.getClusterExpansionZoom=function(We){for(var it=this._getOriginZoom(We)-1;it<=this.options.maxZoom;){var _t=this.getChildren(We);if(it++,_t.length!==1)break;We=_t[0].properties.cluster_id}return it},Me.prototype._appendLeaves=function(We,it,_t,Pt,jt){for(var gr=0,Cr=this.getChildren(it);gr<Cr.length;gr+=1){var kt=Cr[gr],at=kt.properties;if(at&&at.cluster?jt+at.point_count<=Pt?jt+=at.point_count:jt=this._appendLeaves(We,at.cluster_id,_t,Pt,jt):jt<Pt?jt++:We.push(kt),We.length===_t)break}return jt},Me.prototype._addTileFeatures=function(We,it,_t,Pt,jt,gr){for(var Cr=0,kt=We;Cr<kt.length;Cr+=1){var at=it[kt[Cr]],Rt=at.numPoints,mr={type:1,geometry:[[Math.round(this.options.extent*(at.x*jt-_t)),Math.round(this.options.extent*(at.y*jt-Pt))]],tags:Rt?Vt(at):this.points[at.index].properties},Dr=void 0;Rt?Dr=at.id:this.options.generateId?Dr=at.index:this.points[at.index].id&&(Dr=this.points[at.index].id),Dr!==void 0&&(mr.id=Dr),gr.features.push(mr)}},Me.prototype._limitZoom=function(We){return Math.max(this.options.minZoom,Math.min(+We,this.options.maxZoom+1))},Me.prototype._cluster=function(We,it){for(var _t=[],Pt=this.options,jt=Pt.reduce,gr=Pt.minPoints,Cr=Pt.radius/(Pt.extent*Math.pow(2,it)),kt=0;kt<We.length;kt++){var at=We[kt];if(!(at.zoom<=it)){at.zoom=it;for(var Rt=this.trees[it+1],mr=Rt.within(at.x,at.y,Cr),Dr=at.numPoints||1,Ft=Dr,Mn=0,yi=mr;Mn<yi.length;Mn+=1){var gi=Rt.points[yi[Mn]];gi.zoom>it&&(Ft+=gi.numPoints||1)}if(Ft>=gr){for(var sn=at.x*Dr,hi=at.y*Dr,ri=jt&&Dr>1?this._map(at,!0):null,ui=(kt<<5)+(it+1)+this.points.length,ba=0,vi=mr;ba<vi.length;ba+=1){var Sa=Rt.points[vi[ba]];if(!(Sa.zoom<=it)){Sa.zoom=it;var za=Sa.numPoints||1;sn+=Sa.x*za,hi+=Sa.y*za,Sa.parentId=ui,jt&&(ri||(ri=this._map(at,!0)),jt(ri,this._map(Sa)))}}at.parentId=ui,_t.push(ze(sn/Ft,hi/Ft,ui,Ft,ri))}else if(_t.push(at),Ft>1)for(var _a=0,Ga=mr;_a<Ga.length;_a+=1){var Ea=Rt.points[Ga[_a]];Ea.zoom<=it||(Ea.zoom=it,_t.push(Ea))}}}return _t},Me.prototype._getOriginId=function(We){return We-this.points.length>>5},Me.prototype._getOriginZoom=function(We){return(We-this.points.length)%32},Me.prototype._map=function(We,it){if(We.numPoints)return it?Ee({},We.properties):We.properties;var _t=this.points[We.index].properties,Pt=this.options.map(_t);return it&&Pt===_t?Ee({},Pt):Pt},Vn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Vn.prototype.splitTile=function(We,it,_t,Pt,jt,gr,Cr){for(var kt=[We,it,_t,Pt],at=this.options,Rt=at.debug;kt.length;){Pt=kt.pop(),_t=kt.pop(),it=kt.pop(),We=kt.pop();var mr=1<<it,Dr=Un(it,_t,Pt),Ft=this.tiles[Dr];if(!Ft&&(Rt>1&&console.time("creation"),Ft=this.tiles[Dr]=tn(We,it,_t,Pt,at),this.tileCoords.push({z:it,x:_t,y:Pt}),Rt)){Rt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",it,_t,Pt,Ft.numFeatures,Ft.numPoints,Ft.numSimplified),console.timeEnd("creation"));var Mn="z"+it;this.stats[Mn]=(this.stats[Mn]||0)+1,this.total++}if(Ft.source=We,jt){if(it===at.maxZoom||it===jt)continue;var yi=1<<jt-it;if(_t!==Math.floor(gr/yi)||Pt!==Math.floor(Cr/yi))continue}else if(it===at.indexMaxZoom||Ft.numPoints<=at.indexMaxPoints)continue;if(Ft.source=null,We.length!==0){Rt>1&&console.time("clipping");var gi,sn,hi,ri,ui,ba,vi=.5*at.buffer/at.extent,Sa=.5-vi,za=.5+vi,_a=1+vi;gi=sn=hi=ri=null,ui=bt(We,mr,_t-vi,_t+za,0,Ft.minX,Ft.maxX,at),ba=bt(We,mr,_t+Sa,_t+_a,0,Ft.minX,Ft.maxX,at),We=null,ui&&(gi=bt(ui,mr,Pt-vi,Pt+za,1,Ft.minY,Ft.maxY,at),sn=bt(ui,mr,Pt+Sa,Pt+_a,1,Ft.minY,Ft.maxY,at),ui=null),ba&&(hi=bt(ba,mr,Pt-vi,Pt+za,1,Ft.minY,Ft.maxY,at),ri=bt(ba,mr,Pt+Sa,Pt+_a,1,Ft.minY,Ft.maxY,at),ba=null),Rt>1&&console.timeEnd("clipping"),kt.push(gi||[],it+1,2*_t,2*Pt),kt.push(sn||[],it+1,2*_t,2*Pt+1),kt.push(hi||[],it+1,2*_t+1,2*Pt),kt.push(ri||[],it+1,2*_t+1,2*Pt+1)}}},Vn.prototype.getTile=function(We,it,_t){var Pt=this.options,jt=Pt.extent,gr=Pt.debug;if(We<0||We>24)return null;var Cr=1<<We,kt=Un(We,it=(it%Cr+Cr)%Cr,_t);if(this.tiles[kt])return Zr(this.tiles[kt],jt);gr>1&&console.log("drilling down to z%d-%d-%d",We,it,_t);for(var at,Rt=We,mr=it,Dr=_t;!at&&Rt>0;)Rt--,mr=Math.floor(mr/2),Dr=Math.floor(Dr/2),at=this.tiles[Un(Rt,mr,Dr)];return at&&at.source?(gr>1&&console.log("found parent tile z%d-%d-%d",Rt,mr,Dr),gr>1&&console.time("drilling down"),this.splitTile(at.source,Rt,mr,Dr,We,it,_t),gr>1&&console.timeEnd("drilling down"),this.tiles[kt]?Zr(this.tiles[kt],jt):null):null};var qn=function(We){function it(_t,Pt,jt,gr){We.call(this,_t,Pt,jt,mi),gr&&(this.loadGeoJSON=gr)}return We&&(it.__proto__=We),(it.prototype=Object.create(We&&We.prototype)).constructor=it,it.prototype.loadData=function(_t,Pt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Pt,this._pendingLoadDataParams=_t,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},it.prototype._loadData=function(){var _t=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Pt=this._pendingCallback,jt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var gr=!!(jt&&jt.request&&jt.request.collectResourceTiming)&&new w.RequestPerformance(jt.request);this.loadGeoJSON(jt,function(Cr,kt){if(Cr||!kt)return Pt(Cr);if(typeof kt!="object")return Pt(new Error("Input data given to '"+jt.source+"' is not a valid GeoJSON object."));(function Ft(Mn,yi){var gi,sn=Mn&&Mn.type;if(sn==="FeatureCollection")for(gi=0;gi<Mn.features.length;gi++)Ft(Mn.features[gi],yi);else if(sn==="GeometryCollection")for(gi=0;gi<Mn.geometries.length;gi++)Ft(Mn.geometries[gi],yi);else if(sn==="Feature")Ft(Mn.geometry,yi);else if(sn==="Polygon")M(Mn.coordinates,yi);else if(sn==="MultiPolygon")for(gi=0;gi<Mn.coordinates.length;gi++)M(Mn.coordinates[gi],yi);return Mn})(kt,!0);try{if(jt.filter){var at=w.createExpression(jt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(at.result==="error")throw new Error(at.value.map(function(Ft){return Ft.key+": "+Ft.message}).join(", "));var Rt=kt.features.filter(function(Ft){return at.value.evaluate({zoom:0},Ft)});kt={type:"FeatureCollection",features:Rt}}_t._geoJSONIndex=jt.cluster?new Me(function(Ft){var Mn=Ft.superclusterOptions,yi=Ft.clusterProperties;if(!yi||!Mn)return Mn;for(var gi={},sn={},hi={accumulated:null,zoom:0},ri={properties:null},ui=Object.keys(yi),ba=0,vi=ui;ba<vi.length;ba+=1){var Sa=vi[ba],za=yi[Sa],_a=za[0],Ga=w.createExpression(za[1]),Ea=w.createExpression(typeof _a=="string"?[_a,["accumulated"],["get",Sa]]:_a);gi[Sa]=Ga.value,sn[Sa]=Ea.value}return Mn.map=function(hs){ri.properties=hs;for(var uo={},Ro=0,Jn=ui;Ro<Jn.length;Ro+=1){var _i=Jn[Ro];uo[_i]=gi[_i].evaluate(hi,ri)}return uo},Mn.reduce=function(hs,uo){ri.properties=uo;for(var Ro=0,Jn=ui;Ro<Jn.length;Ro+=1){var _i=Jn[Ro];hi.accumulated=hs[_i],hs[_i]=sn[_i].evaluate(hi,ri)}},Mn}(jt)).load(kt.features):function(Ft,Mn){return new Vn(Ft,Mn)}(kt,jt.geojsonVtOptions)}catch(Ft){return Pt(Ft)}_t.loaded={};var mr={};if(gr){var Dr=gr.finish();Dr&&(mr.resourceTiming={},mr.resourceTiming[jt.source]=JSON.parse(JSON.stringify(Dr)))}Pt(null,mr)})}},it.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},it.prototype.reloadTile=function(_t,Pt){var jt=this.loaded;return jt&&jt[_t.uid]?We.prototype.reloadTile.call(this,_t,Pt):this.loadTile(_t,Pt)},it.prototype.loadGeoJSON=function(_t,Pt){if(_t.request)w.getJSON(_t.request,Pt);else{if(typeof _t.data!="string")return Pt(new Error("Input data given to '"+_t.source+"' is not a valid GeoJSON object."));try{return Pt(null,JSON.parse(_t.data))}catch(jt){return Pt(new Error("Input data given to '"+_t.source+"' is not a valid GeoJSON object."))}}},it.prototype.removeSource=function(_t,Pt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Pt()},it.prototype.getClusterExpansionZoom=function(_t,Pt){try{Pt(null,this._geoJSONIndex.getClusterExpansionZoom(_t.clusterId))}catch(jt){Pt(jt)}},it.prototype.getClusterChildren=function(_t,Pt){try{Pt(null,this._geoJSONIndex.getChildren(_t.clusterId))}catch(jt){Pt(jt)}},it.prototype.getClusterLeaves=function(_t,Pt){try{Pt(null,this._geoJSONIndex.getLeaves(_t.clusterId,_t.limit,_t.offset))}catch(jt){Pt(jt)}},it}(ce),Xn=function(We){var it=this;this.self=We,this.actor=new w.Actor(We,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ce,geojson:qn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(_t,Pt){if(it.workerSourceTypes[_t])throw new Error('Worker source with name "'+_t+'" already registered.');it.workerSourceTypes[_t]=Pt},this.self.registerRTLTextPlugin=function(_t){if(w.plugin.isParsed())throw new Error("RTL text plugin already registered.");w.plugin.applyArabicShaping=_t.applyArabicShaping,w.plugin.processBidirectionalText=_t.processBidirectionalText,w.plugin.processStyledBidirectionalText=_t.processStyledBidirectionalText}};return Xn.prototype.setReferrer=function(We,it){this.referrer=it},Xn.prototype.setImages=function(We,it,_t){for(var Pt in this.availableImages[We]=it,this.workerSources[We]){var jt=this.workerSources[We][Pt];for(var gr in jt)jt[gr].availableImages=it}_t()},Xn.prototype.setLayers=function(We,it,_t){this.getLayerIndex(We).replace(it),_t()},Xn.prototype.updateLayers=function(We,it,_t){this.getLayerIndex(We).update(it.layers,it.removedIds),_t()},Xn.prototype.loadTile=function(We,it,_t){this.getWorkerSource(We,it.type,it.source).loadTile(it,_t)},Xn.prototype.loadDEMTile=function(We,it,_t){this.getDEMWorkerSource(We,it.source).loadTile(it,_t)},Xn.prototype.reloadTile=function(We,it,_t){this.getWorkerSource(We,it.type,it.source).reloadTile(it,_t)},Xn.prototype.abortTile=function(We,it,_t){this.getWorkerSource(We,it.type,it.source).abortTile(it,_t)},Xn.prototype.removeTile=function(We,it,_t){this.getWorkerSource(We,it.type,it.source).removeTile(it,_t)},Xn.prototype.removeDEMTile=function(We,it){this.getDEMWorkerSource(We,it.source).removeTile(it)},Xn.prototype.removeSource=function(We,it,_t){if(this.workerSources[We]&&this.workerSources[We][it.type]&&this.workerSources[We][it.type][it.source]){var Pt=this.workerSources[We][it.type][it.source];delete this.workerSources[We][it.type][it.source],Pt.removeSource!==void 0?Pt.removeSource(it,_t):_t()}},Xn.prototype.loadWorkerSource=function(We,it,_t){try{this.self.importScripts(it.url),_t()}catch(Pt){_t(Pt.toString())}},Xn.prototype.syncRTLPluginState=function(We,it,_t){try{w.plugin.setState(it);var Pt=w.plugin.getPluginURL();if(w.plugin.isLoaded()&&!w.plugin.isParsed()&&Pt!=null){this.self.importScripts(Pt);var jt=w.plugin.isParsed();_t(jt?void 0:new Error("RTL Text Plugin failed to import scripts from "+Pt),jt)}}catch(gr){_t(gr.toString())}},Xn.prototype.getAvailableImages=function(We){var it=this.availableImages[We];return it||(it=[]),it},Xn.prototype.getLayerIndex=function(We){var it=this.layerIndexes[We];return it||(it=this.layerIndexes[We]=new K),it},Xn.prototype.getWorkerSource=function(We,it,_t){var Pt=this;return this.workerSources[We]||(this.workerSources[We]={}),this.workerSources[We][it]||(this.workerSources[We][it]={}),this.workerSources[We][it][_t]||(this.workerSources[We][it][_t]=new this.workerSourceTypes[it]({send:function(jt,gr,Cr){Pt.actor.send(jt,gr,Cr,We)}},this.getLayerIndex(We),this.getAvailableImages(We))),this.workerSources[We][it][_t]},Xn.prototype.getDEMWorkerSource=function(We,it){return this.demWorkerSources[We]||(this.demWorkerSources[We]={}),this.demWorkerSources[We][it]||(this.demWorkerSources[We][it]=new J),this.demWorkerSources[We][it]},Xn.prototype.enforceCacheSizeLimit=function(We,it){w.enforceCacheSizeLimit(it)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Xn(self)),Xn}),X(["./shared"],function(w){"use strict";var Y=w.createCommonjsModule(function(b){function T(Z){return!C(Z)}function C(Z){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var re,_e,qe=new Blob([""],{type:"text/javascript"}),yt=URL.createObjectURL(qe);try{_e=new Worker(yt),re=!0}catch(Ut){re=!1}return _e&&_e.terminate(),URL.revokeObjectURL(yt),re}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var re=document.createElement("canvas");re.width=re.height=1;var _e=re.getContext("2d");if(!_e)return!1;var qe=_e.getImageData(0,0,1,1);return qe&&qe.width===re.width}()?(I[q=Z&&Z.failIfMajorPerformanceCaveat]===void 0&&(I[q]=function(re){var _e=function(yt){var Ut=document.createElement("canvas"),Zt=Object.create(T.webGLContextAttributes);return Zt.failIfMajorPerformanceCaveat=yt,Ut.probablySupportsContext?Ut.probablySupportsContext("webgl",Zt)||Ut.probablySupportsContext("experimental-webgl",Zt):Ut.supportsContext?Ut.supportsContext("webgl",Zt)||Ut.supportsContext("experimental-webgl",Zt):Ut.getContext("webgl",Zt)||Ut.getContext("experimental-webgl",Zt)}(re);if(!_e)return!1;var qe=_e.createShader(_e.VERTEX_SHADER);return!(!qe||_e.isContextLost())&&(_e.shaderSource(qe,"void main() {}"),_e.compileShader(qe),_e.getShaderParameter(qe,_e.COMPILE_STATUS)===!0)}(q)),I[q]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var q}b.exports?b.exports=T:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=T,window.mapboxgl.notSupportedReason=C);var I={};T.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),G={create:function(b,T,C){var I=w.window.document.createElement(b);return T!==void 0&&(I.className=T),C&&C.appendChild(I),I},createNS:function(b,T){return w.window.document.createElementNS(b,T)}},K=w.window.document&&w.window.document.documentElement.style;function Q(b){if(!K)return b[0];for(var T=0;T<b.length;T++)if(b[T]in K)return b[T];return b[0]}var oe,ee=Q(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);G.disableDrag=function(){K&&ee&&(oe=K[ee],K[ee]="none")},G.enableDrag=function(){K&&ee&&(K[ee]=oe)};var xe=Q(["transform","WebkitTransform"]);G.setTransform=function(b,T){b.style[xe]=T};var ce=!1;try{var he=Object.defineProperty({},"passive",{get:function(){ce=!0}});w.window.addEventListener("test",he,he),w.window.removeEventListener("test",he,he)}catch(b){ce=!1}G.addEventListener=function(b,T,C,I){I===void 0&&(I={}),b.addEventListener(T,C,"passive"in I&&ce?I:I.capture)},G.removeEventListener=function(b,T,C,I){I===void 0&&(I={}),b.removeEventListener(T,C,"passive"in I&&ce?I:I.capture)};var J=function(b){b.preventDefault(),b.stopPropagation(),w.window.removeEventListener("click",J,!0)};function M(b){var T=b.userImage;return!!(T&&T.render&&T.render())&&(b.data.replace(new Uint8Array(T.data.buffer)),!0)}G.suppressClick=function(){w.window.addEventListener("click",J,!0),w.window.setTimeout(function(){w.window.removeEventListener("click",J,!0)},0)},G.mousePos=function(b,T){var C=b.getBoundingClientRect();return new w.Point(T.clientX-C.left-b.clientLeft,T.clientY-C.top-b.clientTop)},G.touchPos=function(b,T){for(var C=b.getBoundingClientRect(),I=[],Z=0;Z<T.length;Z++)I.push(new w.Point(T[Z].clientX-C.left-b.clientLeft,T[Z].clientY-C.top-b.clientTop));return I},G.mouseButton=function(b){return w.window.InstallTrigger!==void 0&&b.button===2&&b.ctrlKey&&w.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:b.button},G.remove=function(b){b.parentNode&&b.parentNode.removeChild(b)};var E=function(b){function T(){b.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new w.RGBAImage({width:1,height:1}),this.dirty=!0}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.isLoaded=function(){return this.loaded},T.prototype.setLoaded=function(C){if(this.loaded!==C&&(this.loaded=C,C)){for(var I=0,Z=this.requestors;I<Z.length;I+=1){var q=Z[I];this._notify(q.ids,q.callback)}this.requestors=[]}},T.prototype.getImage=function(C){return this.images[C]},T.prototype.addImage=function(C,I){this._validate(C,I)&&(this.images[C]=I)},T.prototype._validate=function(C,I){var Z=!0;return this._validateStretch(I.stretchX,I.data&&I.data.width)||(this.fire(new w.ErrorEvent(new Error('Image "'+C+'" has invalid "stretchX" value'))),Z=!1),this._validateStretch(I.stretchY,I.data&&I.data.height)||(this.fire(new w.ErrorEvent(new Error('Image "'+C+'" has invalid "stretchY" value'))),Z=!1),this._validateContent(I.content,I)||(this.fire(new w.ErrorEvent(new Error('Image "'+C+'" has invalid "content" value'))),Z=!1),Z},T.prototype._validateStretch=function(C,I){if(!C)return!0;for(var Z=0,q=0,re=C;q<re.length;q+=1){var _e=re[q];if(_e[0]<Z||_e[1]<_e[0]||I<_e[1])return!1;Z=_e[1]}return!0},T.prototype._validateContent=function(C,I){return!(C&&(C.length!==4||C[0]<0||I.data.width<C[0]||C[1]<0||I.data.height<C[1]||C[2]<0||I.data.width<C[2]||C[3]<0||I.data.height<C[3]||C[2]<C[0]||C[3]<C[1]))},T.prototype.updateImage=function(C,I){I.version=this.images[C].version+1,this.images[C]=I,this.updatedImages[C]=!0},T.prototype.removeImage=function(C){var I=this.images[C];delete this.images[C],delete this.patterns[C],I.userImage&&I.userImage.onRemove&&I.userImage.onRemove()},T.prototype.listImages=function(){return Object.keys(this.images)},T.prototype.getImages=function(C,I){var Z=!0;if(!this.isLoaded())for(var q=0,re=C;q<re.length;q+=1)this.images[re[q]]||(Z=!1);this.isLoaded()||Z?this._notify(C,I):this.requestors.push({ids:C,callback:I})},T.prototype._notify=function(C,I){for(var Z={},q=0,re=C;q<re.length;q+=1){var _e=re[q];this.images[_e]||this.fire(new w.Event("styleimagemissing",{id:_e}));var qe=this.images[_e];qe?Z[_e]={data:qe.data.clone(),pixelRatio:qe.pixelRatio,sdf:qe.sdf,version:qe.version,stretchX:qe.stretchX,stretchY:qe.stretchY,content:qe.content,hasRenderCallback:!!(qe.userImage&&qe.userImage.render)}:w.warnOnce('Image "'+_e+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}I(null,Z)},T.prototype.getPixelSize=function(){var C=this.atlasImage;return{width:C.width,height:C.height}},T.prototype.getPattern=function(C){var I=this.patterns[C],Z=this.getImage(C);if(!Z)return null;if(I&&I.position.version===Z.version)return I.position;if(I)I.position.version=Z.version;else{var q={w:Z.data.width+2,h:Z.data.height+2,x:0,y:0},re=new w.ImagePosition(q,Z);this.patterns[C]={bin:q,position:re}}return this._updatePatternAtlas(),this.patterns[C].position},T.prototype.bind=function(C){var I=C.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new w.Texture(C,this.atlasImage,I.RGBA),this.atlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE)},T.prototype._updatePatternAtlas=function(){var C=[];for(var I in this.patterns)C.push(this.patterns[I].bin);var Z=w.potpack(C),q=Z.w,re=Z.h,_e=this.atlasImage;for(var qe in _e.resize({width:q||1,height:re||1}),this.patterns){var yt=this.patterns[qe].bin,Ut=yt.x+1,Zt=yt.y+1,Ht=this.images[qe].data,sr=Ht.width,or=Ht.height;w.RGBAImage.copy(Ht,_e,{x:0,y:0},{x:Ut,y:Zt},{width:sr,height:or}),w.RGBAImage.copy(Ht,_e,{x:0,y:or-1},{x:Ut,y:Zt-1},{width:sr,height:1}),w.RGBAImage.copy(Ht,_e,{x:0,y:0},{x:Ut,y:Zt+or},{width:sr,height:1}),w.RGBAImage.copy(Ht,_e,{x:sr-1,y:0},{x:Ut-1,y:Zt},{width:1,height:or}),w.RGBAImage.copy(Ht,_e,{x:0,y:0},{x:Ut+sr,y:Zt},{width:1,height:or})}this.dirty=!0},T.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},T.prototype.dispatchRenderCallbacks=function(C){for(var I=0,Z=C;I<Z.length;I+=1){var q=Z[I];if(!this.callbackDispatchedThisFrame[q]){this.callbackDispatchedThisFrame[q]=!0;var re=this.images[q];M(re)&&this.updateImage(q,re)}}},T}(w.Evented),fe=Pe,me=Pe,ke=1e20;function Pe(b,T,C,I,Z,q){this.fontSize=b||24,this.buffer=T===void 0?3:T,this.cutoff=I||.25,this.fontFamily=Z||"sans-serif",this.fontWeight=q||"normal",this.radius=C||8;var re=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=re,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(re*re),this.gridInner=new Float64Array(re*re),this.f=new Float64Array(re),this.d=new Float64Array(re),this.z=new Float64Array(re+1),this.v=new Int16Array(re),this.middle=Math.round(re/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Le(b,T,C,I,Z,q,re){for(var _e=0;_e<T;_e++){for(var qe=0;qe<C;qe++)I[qe]=b[qe*T+_e];for(tt(I,Z,q,re,C),qe=0;qe<C;qe++)b[qe*T+_e]=Z[qe]}for(qe=0;qe<C;qe++){for(_e=0;_e<T;_e++)I[_e]=b[qe*T+_e];for(tt(I,Z,q,re,T),_e=0;_e<T;_e++)b[qe*T+_e]=Math.sqrt(Z[_e])}}function tt(b,T,C,I,Z){C[0]=0,I[0]=-ke,I[1]=+ke;for(var q=1,re=0;q<Z;q++){for(var _e=(b[q]+q*q-(b[C[re]]+C[re]*C[re]))/(2*q-2*C[re]);_e<=I[re];)re--,_e=(b[q]+q*q-(b[C[re]]+C[re]*C[re]))/(2*q-2*C[re]);C[++re]=q,I[re]=_e,I[re+1]=+ke}for(q=0,re=0;q<Z;q++){for(;I[re+1]<q;)re++;T[q]=(q-C[re])*(q-C[re])+b[C[re]]}}Pe.prototype.draw=function(b){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(b,this.buffer,this.middle);for(var T=this.ctx.getImageData(0,0,this.size,this.size),C=new Uint8ClampedArray(this.size*this.size),I=0;I<this.size*this.size;I++){var Z=T.data[4*I+3]/255;this.gridOuter[I]=Z===1?0:Z===0?ke:Math.pow(Math.max(0,.5-Z),2),this.gridInner[I]=Z===1?ke:Z===0?0:Math.pow(Math.max(0,Z-.5),2)}for(Le(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Le(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),I=0;I<this.size*this.size;I++)C[I]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[I]-this.gridInner[I])/this.radius+this.cutoff))));return C},fe.default=me;var ft=function(b,T){this.requestManager=b,this.localIdeographFontFamily=T,this.entries={}};ft.prototype.setURL=function(b){this.url=b},ft.prototype.getGlyphs=function(b,T){var C=this,I=[];for(var Z in b)for(var q=0,re=b[Z];q<re.length;q+=1)I.push({stack:Z,id:re[q]});w.asyncAll(I,function(_e,qe){var yt=_e.stack,Ut=_e.id,Zt=C.entries[yt];Zt||(Zt=C.entries[yt]={glyphs:{},requests:{},ranges:{}});var Ht=Zt.glyphs[Ut];if(Ht===void 0){if(Ht=C._tinySDF(Zt,yt,Ut))return Zt.glyphs[Ut]=Ht,void qe(null,{stack:yt,id:Ut,glyph:Ht});var sr=Math.floor(Ut/256);if(256*sr>65535)qe(new Error("glyphs > 65535 not supported"));else if(Zt.ranges[sr])qe(null,{stack:yt,id:Ut,glyph:Ht});else{var or=Zt.requests[sr];or||(or=Zt.requests[sr]=[],ft.loadGlyphRange(yt,sr,C.url,C.requestManager,function(Er,rr){if(rr){for(var wr in rr)C._doesCharSupportLocalGlyph(+wr)||(Zt.glyphs[+wr]=rr[+wr]);Zt.ranges[sr]=!0}for(var Fr=0,Wr=or;Fr<Wr.length;Fr+=1)(0,Wr[Fr])(Er,rr);delete Zt.requests[sr]})),or.push(function(Er,rr){Er?qe(Er):rr&&qe(null,{stack:yt,id:Ut,glyph:rr[Ut]||null})})}}else qe(null,{stack:yt,id:Ut,glyph:Ht})},function(_e,qe){if(_e)T(_e);else if(qe){for(var yt={},Ut=0,Zt=qe;Ut<Zt.length;Ut+=1){var Ht=Zt[Ut],sr=Ht.stack,or=Ht.id,Er=Ht.glyph;(yt[sr]||(yt[sr]={}))[or]=Er&&{id:Er.id,bitmap:Er.bitmap.clone(),metrics:Er.metrics}}T(null,yt)}})},ft.prototype._doesCharSupportLocalGlyph=function(b){return!!this.localIdeographFontFamily&&(w.isChar["CJK Unified Ideographs"](b)||w.isChar["Hangul Syllables"](b)||w.isChar.Hiragana(b)||w.isChar.Katakana(b))},ft.prototype._tinySDF=function(b,T,C){var I=this.localIdeographFontFamily;if(I&&this._doesCharSupportLocalGlyph(C)){var Z=b.tinySDF;if(!Z){var q="400";/bold/i.test(T)?q="900":/medium/i.test(T)?q="500":/light/i.test(T)&&(q="200"),Z=b.tinySDF=new ft.TinySDF(24,3,8,.25,I,q)}return{id:C,bitmap:new w.AlphaImage({width:30,height:30},Z.draw(String.fromCharCode(C))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},ft.loadGlyphRange=function(b,T,C,I,Z){var q=256*T,re=q+255,_e=I.transformRequest(I.normalizeGlyphsURL(C).replace("{fontstack}",b).replace("{range}",q+"-"+re),w.ResourceType.Glyphs);w.getArrayBuffer(_e,function(qe,yt){if(qe)Z(qe);else if(yt){for(var Ut={},Zt=0,Ht=w.parseGlyphPBF(yt);Zt<Ht.length;Zt+=1){var sr=Ht[Zt];Ut[sr.id]=sr}Z(null,Ut)}})},ft.TinySDF=fe;var ge=function(){this.specification=w.styleSpec.light.position};ge.prototype.possiblyEvaluate=function(b,T){return w.sphericalToCartesian(b.expression.evaluate(T))},ge.prototype.interpolate=function(b,T,C){return{x:w.number(b.x,T.x,C),y:w.number(b.y,T.y,C),z:w.number(b.z,T.z,C)}};var be=new w.Properties({anchor:new w.DataConstantProperty(w.styleSpec.light.anchor),position:new ge,color:new w.DataConstantProperty(w.styleSpec.light.color),intensity:new w.DataConstantProperty(w.styleSpec.light.intensity)}),Ce=function(b){function T(C){b.call(this),this._transitionable=new w.Transitionable(be),this.setLight(C),this._transitioning=this._transitionable.untransitioned()}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getLight=function(){return this._transitionable.serialize()},T.prototype.setLight=function(C,I){if(I===void 0&&(I={}),!this._validate(w.validateLight,C,I))for(var Z in C){var q=C[Z];w.endsWith(Z,"-transition")?this._transitionable.setTransition(Z.slice(0,-11),q):this._transitionable.setValue(Z,q)}},T.prototype.updateTransitions=function(C){this._transitioning=this._transitionable.transitioned(C,this._transitioning)},T.prototype.hasTransition=function(){return this._transitioning.hasTransition()},T.prototype.recalculate=function(C){this.properties=this._transitioning.possiblyEvaluate(C)},T.prototype._validate=function(C,I,Z){return(!Z||Z.validate!==!1)&&w.emitValidationErrors(this,C.call(w.validateStyle,w.extend({value:I,style:{glyphs:!0,sprite:!0},styleSpec:w.styleSpec})))},T}(w.Evented),Ye=function(b,T){this.width=b,this.height=T,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Ye.prototype.getDash=function(b,T){var C=b.join(",")+String(T);return this.dashEntry[C]||(this.dashEntry[C]=this.addDash(b,T)),this.dashEntry[C]},Ye.prototype.getDashRanges=function(b,T,C){var I=[],Z=b.length%2==1?-b[b.length-1]*C:0,q=b[0]*C,re=!0;I.push({left:Z,right:q,isDash:re,zeroLength:b[0]===0});for(var _e=b[0],qe=1;qe<b.length;qe++){var yt=b[qe];I.push({left:Z=_e*C,right:q=(_e+=yt)*C,isDash:re=!re,zeroLength:yt===0})}return I},Ye.prototype.addRoundDash=function(b,T,C){for(var I=T/2,Z=-C;Z<=C;Z++)for(var q=this.width*(this.nextRow+C+Z),re=0,_e=b[re],qe=0;qe<this.width;qe++){qe/_e.right>1&&(_e=b[++re]);var yt=Math.abs(qe-_e.left),Ut=Math.abs(qe-_e.right),Zt=Math.min(yt,Ut),Ht=void 0,sr=Z/C*(I+1);if(_e.isDash){var or=I-Math.abs(sr);Ht=Math.sqrt(Zt*Zt+or*or)}else Ht=I-Math.sqrt(Zt*Zt+sr*sr);this.data[q+qe]=Math.max(0,Math.min(255,Ht+128))}},Ye.prototype.addRegularDash=function(b){for(var T=b.length-1;T>=0;--T){var C=b[T],I=b[T+1];C.zeroLength?b.splice(T,1):I&&I.isDash===C.isDash&&(I.left=C.left,b.splice(T,1))}var Z=b[0],q=b[b.length-1];Z.isDash===q.isDash&&(Z.left=q.left-this.width,q.right=Z.right+this.width);for(var re=this.width*this.nextRow,_e=0,qe=b[_e],yt=0;yt<this.width;yt++){yt/qe.right>1&&(qe=b[++_e]);var Ut=Math.abs(yt-qe.left),Zt=Math.abs(yt-qe.right),Ht=Math.min(Ut,Zt);this.data[re+yt]=Math.max(0,Math.min(255,(qe.isDash?Ht:-Ht)+128))}},Ye.prototype.addDash=function(b,T){var C=T?7:0,I=2*C+1;if(this.nextRow+I>this.height)return w.warnOnce("LineAtlas out of space"),null;for(var Z=0,q=0;q<b.length;q++)Z+=b[q];if(Z!==0){var re=this.width/Z,_e=this.getDashRanges(b,this.width,re);T?this.addRoundDash(_e,re,C):this.addRegularDash(_e)}var qe={y:(this.nextRow+C+.5)/this.height,height:2*C/this.height,width:Z};return this.nextRow+=I,this.dirty=!0,qe},Ye.prototype.bind=function(b){var T=b.gl;this.texture?(T.bindTexture(T.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,T.texSubImage2D(T.TEXTURE_2D,0,0,0,this.width,this.height,T.ALPHA,T.UNSIGNED_BYTE,this.data))):(this.texture=T.createTexture(),T.bindTexture(T.TEXTURE_2D,this.texture),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.REPEAT),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.REPEAT),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.LINEAR),T.texImage2D(T.TEXTURE_2D,0,T.ALPHA,this.width,this.height,0,T.ALPHA,T.UNSIGNED_BYTE,this.data))};var je=function b(T,C){this.workerPool=T,this.actors=[],this.currentActor=0,this.id=w.uniqueId();for(var I=this.workerPool.acquire(this.id),Z=0;Z<I.length;Z++){var q=new b.Actor(I[Z],C,this.id);q.name="Worker "+Z,this.actors.push(q)}};function Et(b,T,C){var I=function(Z,q){if(Z)return C(Z);if(q){var re=w.pick(w.extend(q,b),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);q.vector_layers&&(re.vectorLayers=q.vector_layers,re.vectorLayerIds=re.vectorLayers.map(function(_e){return _e.id})),re.tiles=T.canonicalizeTileset(re,b.url),C(null,re)}};return b.url?w.getJSON(T.transformRequest(T.normalizeSourceURL(b.url),w.ResourceType.Source),I):w.browser.frame(function(){return I(null,b)})}je.prototype.broadcast=function(b,T,C){w.asyncAll(this.actors,function(I,Z){I.send(b,T,Z)},C=C||function(){})},je.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},je.prototype.remove=function(){this.actors.forEach(function(b){b.remove()}),this.actors=[],this.workerPool.release(this.id)},je.Actor=w.Actor;var Ae=function(b,T,C){this.bounds=w.LngLatBounds.convert(this.validateBounds(b)),this.minzoom=T||0,this.maxzoom=C||24};Ae.prototype.validateBounds=function(b){return Array.isArray(b)&&b.length===4?[Math.max(-180,b[0]),Math.max(-90,b[1]),Math.min(180,b[2]),Math.min(90,b[3])]:[-180,-90,180,90]},Ae.prototype.contains=function(b){var T=Math.pow(2,b.z),C=Math.floor(w.mercatorXfromLng(this.bounds.getWest())*T),I=Math.floor(w.mercatorYfromLat(this.bounds.getNorth())*T),Z=Math.ceil(w.mercatorXfromLng(this.bounds.getEast())*T),q=Math.ceil(w.mercatorYfromLat(this.bounds.getSouth())*T);return b.x>=C&&b.x<Z&&b.y>=I&&b.y<q};var Qe=function(b){function T(C,I,Z,q){if(b.call(this),this.id=C,this.dispatcher=Z,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,w.extend(this,w.pick(I,["url","scheme","tileSize","promoteId"])),this._options=w.extend({type:"vector"},I),this._collectResourceTiming=I.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(q)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.load=function(){var C=this;this._loaded=!1,this.fire(new w.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Et(this._options,this.map._requestManager,function(I,Z){C._tileJSONRequest=null,C._loaded=!0,I?C.fire(new w.ErrorEvent(I)):Z&&(w.extend(C,Z),Z.bounds&&(C.tileBounds=new Ae(Z.bounds,C.minzoom,C.maxzoom)),w.postTurnstileEvent(Z.tiles,C.map._requestManager._customAccessToken),w.postMapLoadEvent(Z.tiles,C.map._getMapId(),C.map._requestManager._skuToken,C.map._requestManager._customAccessToken),C.fire(new w.Event("data",{dataType:"source",sourceDataType:"metadata"})),C.fire(new w.Event("data",{dataType:"source",sourceDataType:"content"})))})},T.prototype.loaded=function(){return this._loaded},T.prototype.hasTile=function(C){return!this.tileBounds||this.tileBounds.contains(C.canonical)},T.prototype.onAdd=function(C){this.map=C,this.load()},T.prototype.setSourceProperty=function(C){this._tileJSONRequest&&this._tileJSONRequest.cancel(),C(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},T.prototype.setTiles=function(C){var I=this;return this.setSourceProperty(function(){I._options.tiles=C}),this},T.prototype.setUrl=function(C){var I=this;return this.setSourceProperty(function(){I.url=C,I._options.url=C}),this},T.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},T.prototype.serialize=function(){return w.extend({},this._options)},T.prototype.loadTile=function(C,I){var Z=this.map._requestManager.normalizeTileURL(C.tileID.canonical.url(this.tiles,this.scheme)),q={request:this.map._requestManager.transformRequest(Z,w.ResourceType.Tile),uid:C.uid,tileID:C.tileID,zoom:C.tileID.overscaledZ,tileSize:this.tileSize*C.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:w.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function re(_e,qe){return delete C.request,C.aborted?I(null):_e&&_e.status!==404?I(_e):(qe&&qe.resourceTiming&&(C.resourceTiming=qe.resourceTiming),this.map._refreshExpiredTiles&&qe&&C.setExpiryData(qe),C.loadVectorData(qe,this.map.painter),w.cacheEntryPossiblyAdded(this.dispatcher),I(null),void(C.reloadCallback&&(this.loadTile(C,C.reloadCallback),C.reloadCallback=null)))}q.request.collectResourceTiming=this._collectResourceTiming,C.actor&&C.state!=="expired"?C.state==="loading"?C.reloadCallback=I:C.request=C.actor.send("reloadTile",q,re.bind(this)):(C.actor=this.dispatcher.getActor(),C.request=C.actor.send("loadTile",q,re.bind(this)))},T.prototype.abortTile=function(C){C.request&&(C.request.cancel(),delete C.request),C.actor&&C.actor.send("abortTile",{uid:C.uid,type:this.type,source:this.id},void 0)},T.prototype.unloadTile=function(C){C.unloadVectorData(),C.actor&&C.actor.send("removeTile",{uid:C.uid,type:this.type,source:this.id},void 0)},T.prototype.hasTransition=function(){return!1},T}(w.Evented),te=function(b){function T(C,I,Z,q){b.call(this),this.id=C,this.dispatcher=Z,this.setEventedParent(q),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=w.extend({type:"raster"},I),w.extend(this,w.pick(I,["url","scheme","tileSize"]))}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.load=function(){var C=this;this._loaded=!1,this.fire(new w.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Et(this._options,this.map._requestManager,function(I,Z){C._tileJSONRequest=null,C._loaded=!0,I?C.fire(new w.ErrorEvent(I)):Z&&(w.extend(C,Z),Z.bounds&&(C.tileBounds=new Ae(Z.bounds,C.minzoom,C.maxzoom)),w.postTurnstileEvent(Z.tiles),w.postMapLoadEvent(Z.tiles,C.map._getMapId(),C.map._requestManager._skuToken),C.fire(new w.Event("data",{dataType:"source",sourceDataType:"metadata"})),C.fire(new w.Event("data",{dataType:"source",sourceDataType:"content"})))})},T.prototype.loaded=function(){return this._loaded},T.prototype.onAdd=function(C){this.map=C,this.load()},T.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},T.prototype.serialize=function(){return w.extend({},this._options)},T.prototype.hasTile=function(C){return!this.tileBounds||this.tileBounds.contains(C.canonical)},T.prototype.loadTile=function(C,I){var Z=this,q=this.map._requestManager.normalizeTileURL(C.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);C.request=w.getImage(this.map._requestManager.transformRequest(q,w.ResourceType.Tile),function(re,_e){if(delete C.request,C.aborted)C.state="unloaded",I(null);else if(re)C.state="errored",I(re);else if(_e){Z.map._refreshExpiredTiles&&C.setExpiryData(_e),delete _e.cacheControl,delete _e.expires;var qe=Z.map.painter.context,yt=qe.gl;C.texture=Z.map.painter.getTileTexture(_e.width),C.texture?C.texture.update(_e,{useMipmap:!0}):(C.texture=new w.Texture(qe,_e,yt.RGBA,{useMipmap:!0}),C.texture.bind(yt.LINEAR,yt.CLAMP_TO_EDGE,yt.LINEAR_MIPMAP_NEAREST),qe.extTextureFilterAnisotropic&&yt.texParameterf(yt.TEXTURE_2D,qe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,qe.extTextureFilterAnisotropicMax)),C.state="loaded",w.cacheEntryPossiblyAdded(Z.dispatcher),I(null)}})},T.prototype.abortTile=function(C,I){C.request&&(C.request.cancel(),delete C.request),I()},T.prototype.unloadTile=function(C,I){C.texture&&this.map.painter.saveTileTexture(C.texture),I()},T.prototype.hasTransition=function(){return!1},T}(w.Evented),Ze=function(b){function T(C,I,Z,q){b.call(this,C,I,Z,q),this.type="raster-dem",this.maxzoom=22,this._options=w.extend({type:"raster-dem"},I),this.encoding=I.encoding||"mapbox"}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},T.prototype.loadTile=function(C,I){var Z=this.map._requestManager.normalizeTileURL(C.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function q(re,_e){re&&(C.state="errored",I(re)),_e&&(C.dem=_e,C.needsHillshadePrepare=!0,C.state="loaded",I(null))}C.request=w.getImage(this.map._requestManager.transformRequest(Z,w.ResourceType.Tile),function(re,_e){if(delete C.request,C.aborted)C.state="unloaded",I(null);else if(re)C.state="errored",I(re);else if(_e){this.map._refreshExpiredTiles&&C.setExpiryData(_e),delete _e.cacheControl,delete _e.expires;var qe=w.window.ImageBitmap&&_e instanceof w.window.ImageBitmap&&w.offscreenCanvasSupported()?_e:w.browser.getImageData(_e,1),yt={uid:C.uid,coord:C.tileID,source:this.id,rawImageData:qe,encoding:this.encoding};C.actor&&C.state!=="expired"||(C.actor=this.dispatcher.getActor(),C.actor.send("loadDEMTile",yt,q.bind(this)))}}.bind(this)),C.neighboringTiles=this._getNeighboringTiles(C.tileID)},T.prototype._getNeighboringTiles=function(C){var I=C.canonical,Z=Math.pow(2,I.z),q=(I.x-1+Z)%Z,re=I.x===0?C.wrap-1:C.wrap,_e=(I.x+1+Z)%Z,qe=I.x+1===Z?C.wrap+1:C.wrap,yt={};return yt[new w.OverscaledTileID(C.overscaledZ,re,I.z,q,I.y).key]={backfilled:!1},yt[new w.OverscaledTileID(C.overscaledZ,qe,I.z,_e,I.y).key]={backfilled:!1},I.y>0&&(yt[new w.OverscaledTileID(C.overscaledZ,re,I.z,q,I.y-1).key]={backfilled:!1},yt[new w.OverscaledTileID(C.overscaledZ,C.wrap,I.z,I.x,I.y-1).key]={backfilled:!1},yt[new w.OverscaledTileID(C.overscaledZ,qe,I.z,_e,I.y-1).key]={backfilled:!1}),I.y+1<Z&&(yt[new w.OverscaledTileID(C.overscaledZ,re,I.z,q,I.y+1).key]={backfilled:!1},yt[new w.OverscaledTileID(C.overscaledZ,C.wrap,I.z,I.x,I.y+1).key]={backfilled:!1},yt[new w.OverscaledTileID(C.overscaledZ,qe,I.z,_e,I.y+1).key]={backfilled:!1}),yt},T.prototype.unloadTile=function(C){C.demTexture&&this.map.painter.saveTileTexture(C.demTexture),C.fbo&&(C.fbo.destroy(),delete C.fbo),C.dem&&delete C.dem,delete C.neighboringTiles,C.state="unloaded",C.actor&&C.actor.send("removeDEMTile",{uid:C.uid,source:this.id})},T}(te),ie=function(b){function T(C,I,Z,q){b.call(this),this.id=C,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=Z.getActor(),this.setEventedParent(q),this._data=I.data,this._options=w.extend({},I),this._collectResourceTiming=I.collectResourceTiming,this._resourceTiming=[],I.maxzoom!==void 0&&(this.maxzoom=I.maxzoom),I.type&&(this.type=I.type),I.attribution&&(this.attribution=I.attribution),this.promoteId=I.promoteId;var re=w.EXTENT/this.tileSize;this.workerOptions=w.extend({source:this.id,cluster:I.cluster||!1,geojsonVtOptions:{buffer:(I.buffer!==void 0?I.buffer:128)*re,tolerance:(I.tolerance!==void 0?I.tolerance:.375)*re,extent:w.EXTENT,maxZoom:this.maxzoom,lineMetrics:I.lineMetrics||!1,generateId:I.generateId||!1},superclusterOptions:{maxZoom:I.clusterMaxZoom!==void 0?Math.min(I.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,I.clusterMinPoints||2),extent:w.EXTENT,radius:(I.clusterRadius||50)*re,log:!1,generateId:I.generateId||!1},clusterProperties:I.clusterProperties,filter:I.filter},I.workerOptions)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.load=function(){var C=this;this.fire(new w.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(I){if(I)C.fire(new w.ErrorEvent(I));else{var Z={dataType:"source",sourceDataType:"metadata"};C._collectResourceTiming&&C._resourceTiming&&C._resourceTiming.length>0&&(Z.resourceTiming=C._resourceTiming,C._resourceTiming=[]),C.fire(new w.Event("data",Z))}})},T.prototype.onAdd=function(C){this.map=C,this.load()},T.prototype.setData=function(C){var I=this;return this._data=C,this.fire(new w.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Z){if(Z)I.fire(new w.ErrorEvent(Z));else{var q={dataType:"source",sourceDataType:"content"};I._collectResourceTiming&&I._resourceTiming&&I._resourceTiming.length>0&&(q.resourceTiming=I._resourceTiming,I._resourceTiming=[]),I.fire(new w.Event("data",q))}}),this},T.prototype.getClusterExpansionZoom=function(C,I){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:C,source:this.id},I),this},T.prototype.getClusterChildren=function(C,I){return this.actor.send("geojson.getClusterChildren",{clusterId:C,source:this.id},I),this},T.prototype.getClusterLeaves=function(C,I,Z,q){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:C,limit:I,offset:Z},q),this},T.prototype._updateWorkerData=function(C){var I=this;this._loaded=!1;var Z=w.extend({},this.workerOptions),q=this._data;typeof q=="string"?(Z.request=this.map._requestManager.transformRequest(w.browser.resolveURL(q),w.ResourceType.Source),Z.request.collectResourceTiming=this._collectResourceTiming):Z.data=JSON.stringify(q),this.actor.send(this.type+".loadData",Z,function(re,_e){I._removed||_e&&_e.abandoned||(I._loaded=!0,_e&&_e.resourceTiming&&_e.resourceTiming[I.id]&&(I._resourceTiming=_e.resourceTiming[I.id].slice(0)),I.actor.send(I.type+".coalesce",{source:Z.source},null),C(re))})},T.prototype.loaded=function(){return this._loaded},T.prototype.loadTile=function(C,I){var Z=this,q=C.actor?"reloadTile":"loadTile";C.actor=this.actor,C.request=this.actor.send(q,{type:this.type,uid:C.uid,tileID:C.tileID,zoom:C.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:w.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(re,_e){return delete C.request,C.unloadVectorData(),C.aborted?I(null):re?I(re):(C.loadVectorData(_e,Z.map.painter,q==="reloadTile"),I(null))})},T.prototype.abortTile=function(C){C.request&&(C.request.cancel(),delete C.request),C.aborted=!0},T.prototype.unloadTile=function(C){C.unloadVectorData(),this.actor.send("removeTile",{uid:C.uid,type:this.type,source:this.id})},T.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},T.prototype.serialize=function(){return w.extend({},this._options,{type:this.type,data:this._data})},T.prototype.hasTransition=function(){return!1},T}(w.Evented),Oe=w.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),nt=function(b){function T(C,I,Z,q){b.call(this),this.id=C,this.dispatcher=Z,this.coordinates=I.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(q),this.options=I}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.load=function(C,I){var Z=this;this._loaded=!1,this.fire(new w.Event("dataloading",{dataType:"source"})),this.url=this.options.url,w.getImage(this.map._requestManager.transformRequest(this.url,w.ResourceType.Image),function(q,re){Z._loaded=!0,q?Z.fire(new w.ErrorEvent(q)):re&&(Z.image=re,C&&(Z.coordinates=C),I&&I(),Z._finishLoading())})},T.prototype.loaded=function(){return this._loaded},T.prototype.updateImage=function(C){var I=this;return this.image&&C.url?(this.options.url=C.url,this.load(C.coordinates,function(){I.texture=null}),this):this},T.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new w.Event("data",{dataType:"source",sourceDataType:"metadata"})))},T.prototype.onAdd=function(C){this.map=C,this.load()},T.prototype.setCoordinates=function(C){var I=this;this.coordinates=C;var Z=C.map(w.MercatorCoordinate.fromLngLat);this.tileID=function(re){for(var _e=1/0,qe=1/0,yt=-1/0,Ut=-1/0,Zt=0,Ht=re;Zt<Ht.length;Zt+=1){var sr=Ht[Zt];_e=Math.min(_e,sr.x),qe=Math.min(qe,sr.y),yt=Math.max(yt,sr.x),Ut=Math.max(Ut,sr.y)}var or=Math.max(yt-_e,Ut-qe),Er=Math.max(0,Math.floor(-Math.log(or)/Math.LN2)),rr=Math.pow(2,Er);return new w.CanonicalTileID(Er,Math.floor((_e+yt)/2*rr),Math.floor((qe+Ut)/2*rr))}(Z),this.minzoom=this.maxzoom=this.tileID.z;var q=Z.map(function(re){return I.tileID.getTilePoint(re)._round()});return this._boundsArray=new w.StructArrayLayout4i8,this._boundsArray.emplaceBack(q[0].x,q[0].y,0,0),this._boundsArray.emplaceBack(q[1].x,q[1].y,w.EXTENT,0),this._boundsArray.emplaceBack(q[3].x,q[3].y,0,w.EXTENT),this._boundsArray.emplaceBack(q[2].x,q[2].y,w.EXTENT,w.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new w.Event("data",{dataType:"source",sourceDataType:"content"})),this},T.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var C=this.map.painter.context,I=C.gl;for(var Z in this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,Oe.members)),this.boundsSegments||(this.boundsSegments=w.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new w.Texture(C,this.image,I.RGBA),this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE)),this.tiles){var q=this.tiles[Z];q.state!=="loaded"&&(q.state="loaded",q.texture=this.texture)}}},T.prototype.loadTile=function(C,I){this.tileID&&this.tileID.equals(C.tileID.canonical)?(this.tiles[String(C.tileID.wrap)]=C,C.buckets={},I(null)):(C.state="errored",I(null))},T.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},T.prototype.hasTransition=function(){return!1},T}(w.Evented),ye=function(b){function T(C,I,Z,q){b.call(this,C,I,Z,q),this.roundZoom=!0,this.type="video",this.options=I}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.load=function(){var C=this;this._loaded=!1;var I=this.options;this.urls=[];for(var Z=0,q=I.urls;Z<q.length;Z+=1)this.urls.push(this.map._requestManager.transformRequest(q[Z],w.ResourceType.Source).url);w.getVideo(this.urls,function(re,_e){C._loaded=!0,re?C.fire(new w.ErrorEvent(re)):_e&&(C.video=_e,C.video.loop=!0,C.video.setAttribute("playsinline",""),C.video.addEventListener("playing",function(){C.map.triggerRepaint()}),C.map&&C.video.play(),C._finishLoading())})},T.prototype.pause=function(){this.video&&this.video.pause()},T.prototype.play=function(){this.video&&this.video.play()},T.prototype.seek=function(C){if(this.video){var I=this.video.seekable;C<I.start(0)||C>I.end(0)?this.fire(new w.ErrorEvent(new w.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+I.start(0)+" and "+I.end(0)+"-second mark."))):this.video.currentTime=C}},T.prototype.getVideo=function(){return this.video},T.prototype.onAdd=function(C){this.map||(this.map=C,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},T.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var C=this.map.painter.context,I=C.gl;for(var Z in this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,Oe.members)),this.boundsSegments||(this.boundsSegments=w.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE),I.texSubImage2D(I.TEXTURE_2D,0,0,0,I.RGBA,I.UNSIGNED_BYTE,this.video)):(this.texture=new w.Texture(C,this.video,I.RGBA),this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE)),this.tiles){var q=this.tiles[Z];q.state!=="loaded"&&(q.state="loaded",q.texture=this.texture)}}},T.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},T.prototype.hasTransition=function(){return this.video&&!this.video.paused},T}(nt),Te=function(b){function T(C,I,Z,q){b.call(this,C,I,Z,q),I.coordinates?Array.isArray(I.coordinates)&&I.coordinates.length===4&&!I.coordinates.some(function(re){return!Array.isArray(re)||re.length!==2||re.some(function(_e){return typeof _e!="number"})})||this.fire(new w.ErrorEvent(new w.ValidationError("sources."+C,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new w.ErrorEvent(new w.ValidationError("sources."+C,null,'missing required property "coordinates"'))),I.animate&&typeof I.animate!="boolean"&&this.fire(new w.ErrorEvent(new w.ValidationError("sources."+C,null,'optional "animate" property must be a boolean value'))),I.canvas?typeof I.canvas=="string"||I.canvas instanceof w.window.HTMLCanvasElement||this.fire(new w.ErrorEvent(new w.ValidationError("sources."+C,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new w.ErrorEvent(new w.ValidationError("sources."+C,null,'missing required property "canvas"'))),this.options=I,this.animate=I.animate===void 0||I.animate}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof w.window.HTMLCanvasElement?this.options.canvas:w.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new w.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},T.prototype.getCanvas=function(){return this.canvas},T.prototype.onAdd=function(C){this.map=C,this.load(),this.canvas&&this.animate&&this.play()},T.prototype.onRemove=function(){this.pause()},T.prototype.prepare=function(){var C=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,C=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,C=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var I=this.map.painter.context,Z=I.gl;for(var q in this.boundsBuffer||(this.boundsBuffer=I.createVertexBuffer(this._boundsArray,Oe.members)),this.boundsSegments||(this.boundsSegments=w.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(C||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new w.Texture(I,this.canvas,Z.RGBA,{premultiply:!0}),this.tiles){var re=this.tiles[q];re.state!=="loaded"&&(re.state="loaded",re.texture=this.texture)}}},T.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},T.prototype.hasTransition=function(){return this._playing},T.prototype._hasInvalidDimensions=function(){for(var C=0,I=[this.canvas.width,this.canvas.height];C<I.length;C+=1){var Z=I[C];if(isNaN(Z)||Z<=0)return!0}return!1},T}(nt),Je={vector:Qe,raster:te,"raster-dem":Ze,geojson:ie,video:ye,image:nt,canvas:Te};function pe(b,T){var C=w.identity([]);return w.translate(C,C,[1,1,0]),w.scale(C,C,[.5*b.width,.5*b.height,1]),w.multiply(C,C,b.calculatePosMatrix(T.toUnwrapped()))}function Me(b,T,C,I,Z,q){var re=function(Er,rr,wr){if(Er)for(var Fr=0,Wr=Er;Fr<Wr.length;Fr+=1){var hn=rr[Wr[Fr]];if(hn&&hn.source===wr&&hn.type==="fill-extrusion")return!0}else for(var an in rr){var bn=rr[an];if(bn.source===wr&&bn.type==="fill-extrusion")return!0}return!1}(Z&&Z.layers,T,b.id),_e=q.maxPitchScaleFactor(),qe=b.tilesIn(I,_e,re);qe.sort(ze);for(var yt=[],Ut=0,Zt=qe;Ut<Zt.length;Ut+=1){var Ht=Zt[Ut];yt.push({wrappedTileID:Ht.tileID.wrapped().key,queryResults:Ht.tile.queryRenderedFeatures(T,C,b._state,Ht.queryGeometry,Ht.cameraQueryGeometry,Ht.scale,Z,q,_e,pe(b.transform,Ht.tileID))})}var sr=function(Er){for(var rr={},wr={},Fr=0,Wr=Er;Fr<Wr.length;Fr+=1){var hn=Wr[Fr],an=hn.queryResults,bn=hn.wrappedTileID,In=wr[bn]=wr[bn]||{};for(var pi in an)for(var ei=an[pi],Ii=In[pi]=In[pi]||{},ia=rr[pi]=rr[pi]||[],la=0,Ki=ei;la<Ki.length;la+=1){var bo=Ki[la];Ii[bo.featureIndex]||(Ii[bo.featureIndex]=!0,ia.push(bo))}}return rr}(yt);for(var or in sr)sr[or].forEach(function(Er){var rr=Er.feature,wr=b.getFeatureState(rr.layer["source-layer"],rr.id);rr.source=rr.layer.source,rr.layer["source-layer"]&&(rr.sourceLayer=rr.layer["source-layer"]),rr.state=wr});return sr}function ze(b,T){var C=b.tileID,I=T.tileID;return C.overscaledZ-I.overscaledZ||C.canonical.y-I.canonical.y||C.wrap-I.wrap||C.canonical.x-I.canonical.x}var De=function(b,T){this.max=b,this.onRemove=T,this.reset()};De.prototype.reset=function(){for(var b in this.data)for(var T=0,C=this.data[b];T<C.length;T+=1){var I=C[T];I.timeout&&clearTimeout(I.timeout),this.onRemove(I.value)}return this.data={},this.order=[],this},De.prototype.add=function(b,T,C){var I=this,Z=b.wrapped().key;this.data[Z]===void 0&&(this.data[Z]=[]);var q={value:T,timeout:void 0};if(C!==void 0&&(q.timeout=setTimeout(function(){I.remove(b,q)},C)),this.data[Z].push(q),this.order.push(Z),this.order.length>this.max){var re=this._getAndRemoveByKey(this.order[0]);re&&this.onRemove(re)}return this},De.prototype.has=function(b){return b.wrapped().key in this.data},De.prototype.getAndRemove=function(b){return this.has(b)?this._getAndRemoveByKey(b.wrapped().key):null},De.prototype._getAndRemoveByKey=function(b){var T=this.data[b].shift();return T.timeout&&clearTimeout(T.timeout),this.data[b].length===0&&delete this.data[b],this.order.splice(this.order.indexOf(b),1),T.value},De.prototype.getByKey=function(b){var T=this.data[b];return T?T[0].value:null},De.prototype.get=function(b){return this.has(b)?this.data[b.wrapped().key][0].value:null},De.prototype.remove=function(b,T){if(!this.has(b))return this;var C=b.wrapped().key,I=T===void 0?0:this.data[C].indexOf(T),Z=this.data[C][I];return this.data[C].splice(I,1),Z.timeout&&clearTimeout(Z.timeout),this.data[C].length===0&&delete this.data[C],this.onRemove(Z.value),this.order.splice(this.order.indexOf(C),1),this},De.prototype.setMaxSize=function(b){for(this.max=b;this.order.length>this.max;){var T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this},De.prototype.filter=function(b){var T=[];for(var C in this.data)for(var I=0,Z=this.data[C];I<Z.length;I+=1){var q=Z[I];b(q.value)||T.push(q)}for(var re=0,_e=T;re<_e.length;re+=1){var qe=_e[re];this.remove(qe.value.tileID,qe)}};var Ct=function(b,T,C){this.context=b;var I=b.gl;this.buffer=I.createBuffer(),this.dynamicDraw=!!C,this.context.unbindVAO(),b.bindElementBuffer.set(this.buffer),I.bufferData(I.ELEMENT_ARRAY_BUFFER,T.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||delete T.arrayBuffer};Ct.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Ct.prototype.updateData=function(b){var T=this.context.gl;this.context.unbindVAO(),this.bind(),T.bufferSubData(T.ELEMENT_ARRAY_BUFFER,0,b.arrayBuffer)},Ct.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Vt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Ve=function(b,T,C,I){this.length=T.length,this.attributes=C,this.itemSize=T.bytesPerElement,this.dynamicDraw=I,this.context=b;var Z=b.gl;this.buffer=Z.createBuffer(),b.bindVertexBuffer.set(this.buffer),Z.bufferData(Z.ARRAY_BUFFER,T.arrayBuffer,this.dynamicDraw?Z.DYNAMIC_DRAW:Z.STATIC_DRAW),this.dynamicDraw||delete T.arrayBuffer};Ve.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Ve.prototype.updateData=function(b){var T=this.context.gl;this.bind(),T.bufferSubData(T.ARRAY_BUFFER,0,b.arrayBuffer)},Ve.prototype.enableAttributes=function(b,T){for(var C=0;C<this.attributes.length;C++){var I=T.attributes[this.attributes[C].name];I!==void 0&&b.enableVertexAttribArray(I)}},Ve.prototype.setVertexAttribPointers=function(b,T,C){for(var I=0;I<this.attributes.length;I++){var Z=this.attributes[I],q=T.attributes[Z.name];q!==void 0&&b.vertexAttribPointer(q,Z.components,b[Vt[Z.type]],!1,this.itemSize,Z.offset+this.itemSize*(C||0))}},Ve.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ue=function(b){this.gl=b.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Ue.prototype.get=function(){return this.current},Ue.prototype.set=function(b){},Ue.prototype.getDefault=function(){return this.default},Ue.prototype.setDefault=function(){this.set(this.default)};var Ee=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return w.Color.transparent},T.prototype.set=function(C){var I=this.current;(C.r!==I.r||C.g!==I.g||C.b!==I.b||C.a!==I.a||this.dirty)&&(this.gl.clearColor(C.r,C.g,C.b,C.a),this.current=C,this.dirty=!1)},T}(Ue),et=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return 1},T.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.clearDepth(C),this.current=C,this.dirty=!1)},T}(Ue),st=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return 0},T.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.clearStencil(C),this.current=C,this.dirty=!1)},T}(Ue),Re=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return[!0,!0,!0,!0]},T.prototype.set=function(C){var I=this.current;(C[0]!==I[0]||C[1]!==I[1]||C[2]!==I[2]||C[3]!==I[3]||this.dirty)&&(this.gl.colorMask(C[0],C[1],C[2],C[3]),this.current=C,this.dirty=!1)},T}(Ue),Ie=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return!0},T.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.depthMask(C),this.current=C,this.dirty=!1)},T}(Ue),ct=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return 255},T.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.stencilMask(C),this.current=C,this.dirty=!1)},T}(Ue),Tt=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},T.prototype.set=function(C){var I=this.current;(C.func!==I.func||C.ref!==I.ref||C.mask!==I.mask||this.dirty)&&(this.gl.stencilFunc(C.func,C.ref,C.mask),this.current=C,this.dirty=!1)},T}(Ue),Qt=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){var C=this.gl;return[C.KEEP,C.KEEP,C.KEEP]},T.prototype.set=function(C){var I=this.current;(C[0]!==I[0]||C[1]!==I[1]||C[2]!==I[2]||this.dirty)&&(this.gl.stencilOp(C[0],C[1],C[2]),this.current=C,this.dirty=!1)},T}(Ue),wt=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return!1},T.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;C?I.enable(I.STENCIL_TEST):I.disable(I.STENCIL_TEST),this.current=C,this.dirty=!1}},T}(Ue),se=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return[0,1]},T.prototype.set=function(C){var I=this.current;(C[0]!==I[0]||C[1]!==I[1]||this.dirty)&&(this.gl.depthRange(C[0],C[1]),this.current=C,this.dirty=!1)},T}(Ue),Ge=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return!1},T.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;C?I.enable(I.DEPTH_TEST):I.disable(I.DEPTH_TEST),this.current=C,this.dirty=!1}},T}(Ue),Ke=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return this.gl.LESS},T.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.depthFunc(C),this.current=C,this.dirty=!1)},T}(Ue),bt=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return!1},T.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;C?I.enable(I.BLEND):I.disable(I.BLEND),this.current=C,this.dirty=!1}},T}(Ue),Be=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){var C=this.gl;return[C.ONE,C.ZERO]},T.prototype.set=function(C){var I=this.current;(C[0]!==I[0]||C[1]!==I[1]||this.dirty)&&(this.gl.blendFunc(C[0],C[1]),this.current=C,this.dirty=!1)},T}(Ue),pt=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return w.Color.transparent},T.prototype.set=function(C){var I=this.current;(C.r!==I.r||C.g!==I.g||C.b!==I.b||C.a!==I.a||this.dirty)&&(this.gl.blendColor(C.r,C.g,C.b,C.a),this.current=C,this.dirty=!1)},T}(Ue),It=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return this.gl.FUNC_ADD},T.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.blendEquation(C),this.current=C,this.dirty=!1)},T}(Ue),ot=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return!1},T.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;C?I.enable(I.CULL_FACE):I.disable(I.CULL_FACE),this.current=C,this.dirty=!1}},T}(Ue),zt=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return this.gl.BACK},T.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.cullFace(C),this.current=C,this.dirty=!1)},T}(Ue),Jt=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return this.gl.CCW},T.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.frontFace(C),this.current=C,this.dirty=!1)},T}(Ue),tr=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return null},T.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.useProgram(C),this.current=C,this.dirty=!1)},T}(Ue),pr=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return this.gl.TEXTURE0},T.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.activeTexture(C),this.current=C,this.dirty=!1)},T}(Ue),br=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){var C=this.gl;return[0,0,C.drawingBufferWidth,C.drawingBufferHeight]},T.prototype.set=function(C){var I=this.current;(C[0]!==I[0]||C[1]!==I[1]||C[2]!==I[2]||C[3]!==I[3]||this.dirty)&&(this.gl.viewport(C[0],C[1],C[2],C[3]),this.current=C,this.dirty=!1)},T}(Ue),Zr=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return null},T.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.bindFramebuffer(I.FRAMEBUFFER,C),this.current=C,this.dirty=!1}},T}(Ue),Nr=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return null},T.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.bindRenderbuffer(I.RENDERBUFFER,C),this.current=C,this.dirty=!1}},T}(Ue),tn=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return null},T.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.bindTexture(I.TEXTURE_2D,C),this.current=C,this.dirty=!1}},T}(Ue),Dn=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return null},T.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.bindBuffer(I.ARRAY_BUFFER,C),this.current=C,this.dirty=!1}},T}(Ue),gn=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return null},T.prototype.set=function(C){var I=this.gl;I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,C),this.current=C,this.dirty=!1},T}(Ue),Vn=function(b){function T(C){b.call(this,C),this.vao=C.extVertexArrayObject}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return null},T.prototype.set=function(C){this.vao&&(C!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(C),this.current=C,this.dirty=!1)},T}(Ue),Un=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return 4},T.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.pixelStorei(I.UNPACK_ALIGNMENT,C),this.current=C,this.dirty=!1}},T}(Ue),mi=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return!1},T.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C),this.current=C,this.dirty=!1}},T}(Ue),qn=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return!1},T.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,C),this.current=C,this.dirty=!1}},T}(Ue),Xn=function(b){function T(C,I){b.call(this,C),this.context=C,this.parent=I}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getDefault=function(){return null},T}(Ue),We=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.setDirty=function(){this.dirty=!0},T.prototype.set=function(C){if(C!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var I=this.gl;I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,C,0),this.current=C,this.dirty=!1}},T}(Xn),it=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.set=function(C){if(C!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var I=this.gl;I.framebufferRenderbuffer(I.FRAMEBUFFER,I.DEPTH_ATTACHMENT,I.RENDERBUFFER,C),this.current=C,this.dirty=!1}},T}(Xn),_t=function(b,T,C,I){this.context=b,this.width=T,this.height=C;var Z=this.framebuffer=b.gl.createFramebuffer();this.colorAttachment=new We(b,Z),I&&(this.depthAttachment=new it(b,Z))};_t.prototype.destroy=function(){var b=this.context.gl,T=this.colorAttachment.get();if(T&&b.deleteTexture(T),this.depthAttachment){var C=this.depthAttachment.get();C&&b.deleteRenderbuffer(C)}b.deleteFramebuffer(this.framebuffer)};var Pt=function(b,T,C){this.func=b,this.mask=T,this.range=C};Pt.ReadOnly=!1,Pt.ReadWrite=!0,Pt.disabled=new Pt(519,Pt.ReadOnly,[0,1]);var jt=function(b,T,C,I,Z,q){this.test=b,this.ref=T,this.mask=C,this.fail=I,this.depthFail=Z,this.pass=q};jt.disabled=new jt({func:519,mask:0},0,0,7680,7680,7680);var gr=function(b,T,C){this.blendFunction=b,this.blendColor=T,this.mask=C};gr.disabled=new gr(gr.Replace=[1,0],w.Color.transparent,[!1,!1,!1,!1]),gr.unblended=new gr(gr.Replace,w.Color.transparent,[!0,!0,!0,!0]),gr.alphaBlended=new gr([1,771],w.Color.transparent,[!0,!0,!0,!0]);var Cr=function(b,T,C){this.enable=b,this.mode=T,this.frontFace=C};Cr.disabled=new Cr(!1,1029,2305),Cr.backCCW=new Cr(!0,1029,2305);var kt=function(b){this.gl=b,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ee(this),this.clearDepth=new et(this),this.clearStencil=new st(this),this.colorMask=new Re(this),this.depthMask=new Ie(this),this.stencilMask=new ct(this),this.stencilFunc=new Tt(this),this.stencilOp=new Qt(this),this.stencilTest=new wt(this),this.depthRange=new se(this),this.depthTest=new Ge(this),this.depthFunc=new Ke(this),this.blend=new bt(this),this.blendFunc=new Be(this),this.blendColor=new pt(this),this.blendEquation=new It(this),this.cullFace=new ot(this),this.cullFaceSide=new zt(this),this.frontFace=new Jt(this),this.program=new tr(this),this.activeTexture=new pr(this),this.viewport=new br(this),this.bindFramebuffer=new Zr(this),this.bindRenderbuffer=new Nr(this),this.bindTexture=new tn(this),this.bindVertexBuffer=new Dn(this),this.bindElementBuffer=new gn(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Vn(this),this.pixelStoreUnpack=new Un(this),this.pixelStoreUnpackPremultiplyAlpha=new mi(this),this.pixelStoreUnpackFlipY=new qn(this),this.extTextureFilterAnisotropic=b.getExtension("EXT_texture_filter_anisotropic")||b.getExtension("MOZ_EXT_texture_filter_anisotropic")||b.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=b.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=b.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(b.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=b.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=b.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=b.getParameter(b.MAX_TEXTURE_SIZE)};kt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},kt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},kt.prototype.createIndexBuffer=function(b,T){return new Ct(this,b,T)},kt.prototype.createVertexBuffer=function(b,T,C){return new Ve(this,b,T,C)},kt.prototype.createRenderbuffer=function(b,T,C){var I=this.gl,Z=I.createRenderbuffer();return this.bindRenderbuffer.set(Z),I.renderbufferStorage(I.RENDERBUFFER,b,T,C),this.bindRenderbuffer.set(null),Z},kt.prototype.createFramebuffer=function(b,T,C){return new _t(this,b,T,C)},kt.prototype.clear=function(b){var T=b.color,C=b.depth,I=this.gl,Z=0;T&&(Z|=I.COLOR_BUFFER_BIT,this.clearColor.set(T),this.colorMask.set([!0,!0,!0,!0])),C!==void 0&&(Z|=I.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(C),this.depthMask.set(!0)),I.clear(Z)},kt.prototype.setCullFace=function(b){b.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(b.mode),this.frontFace.set(b.frontFace))},kt.prototype.setDepthMode=function(b){b.func!==this.gl.ALWAYS||b.mask?(this.depthTest.set(!0),this.depthFunc.set(b.func),this.depthMask.set(b.mask),this.depthRange.set(b.range)):this.depthTest.set(!1)},kt.prototype.setStencilMode=function(b){b.test.func!==this.gl.ALWAYS||b.mask?(this.stencilTest.set(!0),this.stencilMask.set(b.mask),this.stencilOp.set([b.fail,b.depthFail,b.pass]),this.stencilFunc.set({func:b.test.func,ref:b.ref,mask:b.test.mask})):this.stencilTest.set(!1)},kt.prototype.setColorMode=function(b){w.deepEqual(b.blendFunction,gr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(b.blendFunction),this.blendColor.set(b.blendColor)),this.colorMask.set(b.mask)},kt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var at=function(b){function T(C,I,Z){var q=this;b.call(this),this.id=C,this.dispatcher=Z,this.on("data",function(re){re.dataType==="source"&&re.sourceDataType==="metadata"&&(q._sourceLoaded=!0),q._sourceLoaded&&!q._paused&&re.dataType==="source"&&re.sourceDataType==="content"&&(q.reload(),q.transform&&q.update(q.transform))}),this.on("error",function(){q._sourceErrored=!0}),this._source=function(re,_e,qe,yt){var Ut=new Je[_e.type](re,_e,qe,yt);if(Ut.id!==re)throw new Error("Expected Source id to be "+re+" instead of "+Ut.id);return w.bindAll(["load","abort","unload","serialize","prepare"],Ut),Ut}(C,I,Z,this),this._tiles={},this._cache=new De(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new w.SourceFeatureState}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.onAdd=function(C){this.map=C,this._maxTileCacheSize=C?C._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(C)},T.prototype.onRemove=function(C){this._source&&this._source.onRemove&&this._source.onRemove(C)},T.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var C in this._tiles){var I=this._tiles[C];if(I.state!=="loaded"&&I.state!=="errored")return!1}return!0},T.prototype.getSource=function(){return this._source},T.prototype.pause=function(){this._paused=!0},T.prototype.resume=function(){if(this._paused){var C=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,C&&this.reload(),this.transform&&this.update(this.transform)}},T.prototype._loadTile=function(C,I){return this._source.loadTile(C,I)},T.prototype._unloadTile=function(C){if(this._source.unloadTile)return this._source.unloadTile(C,function(){})},T.prototype._abortTile=function(C){if(this._source.abortTile)return this._source.abortTile(C,function(){})},T.prototype.serialize=function(){return this._source.serialize()},T.prototype.prepare=function(C){for(var I in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var Z=this._tiles[I];Z.upload(C),Z.prepare(this.map.style.imageManager)}},T.prototype.getIds=function(){return w.values(this._tiles).map(function(C){return C.tileID}).sort(Rt).map(function(C){return C.key})},T.prototype.getRenderableIds=function(C){var I=this,Z=[];for(var q in this._tiles)this._isIdRenderable(q,C)&&Z.push(this._tiles[q]);return C?Z.sort(function(re,_e){var qe=re.tileID,yt=_e.tileID,Ut=new w.Point(qe.canonical.x,qe.canonical.y)._rotate(I.transform.angle),Zt=new w.Point(yt.canonical.x,yt.canonical.y)._rotate(I.transform.angle);return qe.overscaledZ-yt.overscaledZ||Zt.y-Ut.y||Zt.x-Ut.x}).map(function(re){return re.tileID.key}):Z.map(function(re){return re.tileID}).sort(Rt).map(function(re){return re.key})},T.prototype.hasRenderableParent=function(C){var I=this.findLoadedParent(C,0);return!!I&&this._isIdRenderable(I.tileID.key)},T.prototype._isIdRenderable=function(C,I){return this._tiles[C]&&this._tiles[C].hasData()&&!this._coveredTiles[C]&&(I||!this._tiles[C].holdingForFade())},T.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var C in this._cache.reset(),this._tiles)this._tiles[C].state!=="errored"&&this._reloadTile(C,"reloading")},T.prototype._reloadTile=function(C,I){var Z=this._tiles[C];Z&&(Z.state!=="loading"&&(Z.state=I),this._loadTile(Z,this._tileLoaded.bind(this,Z,C,I)))},T.prototype._tileLoaded=function(C,I,Z,q){if(q)return C.state="errored",void(q.status!==404?this._source.fire(new w.ErrorEvent(q,{tile:C})):this.update(this.transform));C.timeAdded=w.browser.now(),Z==="expired"&&(C.refreshedUponExpiration=!0),this._setTileReloadTimer(I,C),this.getSource().type==="raster-dem"&&C.dem&&this._backfillDEM(C),this._state.initializeTileState(C,this.map?this.map.painter:null),this._source.fire(new w.Event("data",{dataType:"source",tile:C,coord:C.tileID}))},T.prototype._backfillDEM=function(C){for(var I=this.getRenderableIds(),Z=0;Z<I.length;Z++){var q=I[Z];if(C.neighboringTiles&&C.neighboringTiles[q]){var re=this.getTileByID(q);_e(C,re),_e(re,C)}}function _e(qe,yt){qe.needsHillshadePrepare=!0;var Ut=yt.tileID.canonical.x-qe.tileID.canonical.x,Zt=yt.tileID.canonical.y-qe.tileID.canonical.y,Ht=Math.pow(2,qe.tileID.canonical.z),sr=yt.tileID.key;Ut===0&&Zt===0||Math.abs(Zt)>1||(Math.abs(Ut)>1&&(Math.abs(Ut+Ht)===1?Ut+=Ht:Math.abs(Ut-Ht)===1&&(Ut-=Ht)),yt.dem&&qe.dem&&(qe.dem.backfillBorder(yt.dem,Ut,Zt),qe.neighboringTiles&&qe.neighboringTiles[sr]&&(qe.neighboringTiles[sr].backfilled=!0)))}},T.prototype.getTile=function(C){return this.getTileByID(C.key)},T.prototype.getTileByID=function(C){return this._tiles[C]},T.prototype._retainLoadedChildren=function(C,I,Z,q){for(var re in this._tiles){var _e=this._tiles[re];if(!(q[re]||!_e.hasData()||_e.tileID.overscaledZ<=I||_e.tileID.overscaledZ>Z)){for(var qe=_e.tileID;_e&&_e.tileID.overscaledZ>I+1;){var yt=_e.tileID.scaledTo(_e.tileID.overscaledZ-1);(_e=this._tiles[yt.key])&&_e.hasData()&&(qe=yt)}for(var Ut=qe;Ut.overscaledZ>I;)if(C[(Ut=Ut.scaledTo(Ut.overscaledZ-1)).key]){q[qe.key]=qe;break}}}},T.prototype.findLoadedParent=function(C,I){if(C.key in this._loadedParentTiles){var Z=this._loadedParentTiles[C.key];return Z&&Z.tileID.overscaledZ>=I?Z:null}for(var q=C.overscaledZ-1;q>=I;q--){var re=C.scaledTo(q),_e=this._getLoadedTile(re);if(_e)return _e}},T.prototype._getLoadedTile=function(C){var I=this._tiles[C.key];return I&&I.hasData()?I:this._cache.getByKey(C.wrapped().key)},T.prototype.updateCacheSize=function(C){var I=Math.ceil(C.width/this._source.tileSize)+1,Z=Math.ceil(C.height/this._source.tileSize)+1,q=Math.floor(I*Z*5),re=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,q):q;this._cache.setMaxSize(re)},T.prototype.handleWrapJump=function(C){var I=Math.round((C-(this._prevLng===void 0?C:this._prevLng))/360);if(this._prevLng=C,I){var Z={};for(var q in this._tiles){var re=this._tiles[q];re.tileID=re.tileID.unwrapTo(re.tileID.wrap+I),Z[re.tileID.key]=re}for(var _e in this._tiles=Z,this._timers)clearTimeout(this._timers[_e]),delete this._timers[_e];for(var qe in this._tiles)this._setTileReloadTimer(qe,this._tiles[qe])}},T.prototype.update=function(C){var I=this;if(this.transform=C,this._sourceLoaded&&!this._paused){var Z;this.updateCacheSize(C),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?Z=C.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(In){return new w.OverscaledTileID(In.canonical.z,In.wrap,In.canonical.z,In.canonical.x,In.canonical.y)}):(Z=C.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Z=Z.filter(function(In){return I._source.hasTile(In)}))):Z=[];var q=C.coveringZoomLevel(this._source),re=Math.max(q-T.maxOverzooming,this._source.minzoom),_e=Math.max(q+T.maxUnderzooming,this._source.minzoom),qe=this._updateRetainedTiles(Z,q);if(mr(this._source.type)){for(var yt={},Ut={},Zt=0,Ht=Object.keys(qe);Zt<Ht.length;Zt+=1){var sr=Ht[Zt],or=qe[sr],Er=this._tiles[sr];if(Er&&!(Er.fadeEndTime&&Er.fadeEndTime<=w.browser.now())){var rr=this.findLoadedParent(or,re);rr&&(this._addTile(rr.tileID),yt[rr.tileID.key]=rr.tileID),Ut[sr]=or}}for(var wr in this._retainLoadedChildren(Ut,q,_e,qe),yt)qe[wr]||(this._coveredTiles[wr]=!0,qe[wr]=yt[wr])}for(var Fr in qe)this._tiles[Fr].clearFadeHold();for(var Wr=0,hn=w.keysDifference(this._tiles,qe);Wr<hn.length;Wr+=1){var an=hn[Wr],bn=this._tiles[an];bn.hasSymbolBuckets&&!bn.holdingForFade()?bn.setHoldDuration(this.map._fadeDuration):bn.hasSymbolBuckets&&!bn.symbolFadeFinished()||this._removeTile(an)}this._updateLoadedParentTileCache()}},T.prototype.releaseSymbolFadeTiles=function(){for(var C in this._tiles)this._tiles[C].holdingForFade()&&this._removeTile(C)},T.prototype._updateRetainedTiles=function(C,I){for(var Z={},q={},re=Math.max(I-T.maxOverzooming,this._source.minzoom),_e=Math.max(I+T.maxUnderzooming,this._source.minzoom),qe={},yt=0,Ut=C;yt<Ut.length;yt+=1){var Zt=Ut[yt],Ht=this._addTile(Zt);Z[Zt.key]=Zt,Ht.hasData()||I<this._source.maxzoom&&(qe[Zt.key]=Zt)}this._retainLoadedChildren(qe,I,_e,Z);for(var sr=0,or=C;sr<or.length;sr+=1){var Er=or[sr],rr=this._tiles[Er.key];if(!rr.hasData()){if(I+1>this._source.maxzoom){var wr=Er.children(this._source.maxzoom)[0],Fr=this.getTile(wr);if(Fr&&Fr.hasData()){Z[wr.key]=wr;continue}}else{var Wr=Er.children(this._source.maxzoom);if(Z[Wr[0].key]&&Z[Wr[1].key]&&Z[Wr[2].key]&&Z[Wr[3].key])continue}for(var hn=rr.wasRequested(),an=Er.overscaledZ-1;an>=re;--an){var bn=Er.scaledTo(an);if(q[bn.key]||(q[bn.key]=!0,!(rr=this.getTile(bn))&&hn&&(rr=this._addTile(bn)),rr&&(Z[bn.key]=bn,hn=rr.wasRequested(),rr.hasData())))break}}}return Z},T.prototype._updateLoadedParentTileCache=function(){for(var C in this._loadedParentTiles={},this._tiles){for(var I=[],Z=void 0,q=this._tiles[C].tileID;q.overscaledZ>0;){if(q.key in this._loadedParentTiles){Z=this._loadedParentTiles[q.key];break}I.push(q.key);var re=q.scaledTo(q.overscaledZ-1);if(Z=this._getLoadedTile(re))break;q=re}for(var _e=0,qe=I;_e<qe.length;_e+=1)this._loadedParentTiles[qe[_e]]=Z}},T.prototype._addTile=function(C){var I=this._tiles[C.key];if(I)return I;(I=this._cache.getAndRemove(C))&&(this._setTileReloadTimer(C.key,I),I.tileID=C,this._state.initializeTileState(I,this.map?this.map.painter:null),this._cacheTimers[C.key]&&(clearTimeout(this._cacheTimers[C.key]),delete this._cacheTimers[C.key],this._setTileReloadTimer(C.key,I)));var Z=!!I;return Z||(I=new w.Tile(C,this._source.tileSize*C.overscaleFactor()),this._loadTile(I,this._tileLoaded.bind(this,I,C.key,I.state))),I?(I.uses++,this._tiles[C.key]=I,Z||this._source.fire(new w.Event("dataloading",{tile:I,coord:I.tileID,dataType:"source"})),I):null},T.prototype._setTileReloadTimer=function(C,I){var Z=this;C in this._timers&&(clearTimeout(this._timers[C]),delete this._timers[C]);var q=I.getExpiryTimeout();q&&(this._timers[C]=setTimeout(function(){Z._reloadTile(C,"expired"),delete Z._timers[C]},q))},T.prototype._removeTile=function(C){var I=this._tiles[C];I&&(I.uses--,delete this._tiles[C],this._timers[C]&&(clearTimeout(this._timers[C]),delete this._timers[C]),I.uses>0||(I.hasData()&&I.state!=="reloading"?this._cache.add(I.tileID,I,I.getExpiryTimeout()):(I.aborted=!0,this._abortTile(I),this._unloadTile(I))))},T.prototype.clearTiles=function(){for(var C in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(C);this._cache.reset()},T.prototype.tilesIn=function(C,I,Z){var q=this,re=[],_e=this.transform;if(!_e)return re;for(var qe=Z?_e.getCameraQueryGeometry(C):C,yt=C.map(function(an){return _e.pointCoordinate(an)}),Ut=qe.map(function(an){return _e.pointCoordinate(an)}),Zt=this.getIds(),Ht=1/0,sr=1/0,or=-1/0,Er=-1/0,rr=0,wr=Ut;rr<wr.length;rr+=1){var Fr=wr[rr];Ht=Math.min(Ht,Fr.x),sr=Math.min(sr,Fr.y),or=Math.max(or,Fr.x),Er=Math.max(Er,Fr.y)}for(var Wr=function(an){var bn=q._tiles[Zt[an]];if(!bn.holdingForFade()){var In=bn.tileID,pi=Math.pow(2,_e.zoom-bn.tileID.overscaledZ),ei=I*bn.queryPadding*w.EXTENT/bn.tileSize/pi,Ii=[In.getTilePoint(new w.MercatorCoordinate(Ht,sr)),In.getTilePoint(new w.MercatorCoordinate(or,Er))];if(Ii[0].x-ei<w.EXTENT&&Ii[0].y-ei<w.EXTENT&&Ii[1].x+ei>=0&&Ii[1].y+ei>=0){var ia=yt.map(function(Ki){return In.getTilePoint(Ki)}),la=Ut.map(function(Ki){return In.getTilePoint(Ki)});re.push({tile:bn,tileID:In,queryGeometry:ia,cameraQueryGeometry:la,scale:pi})}}},hn=0;hn<Zt.length;hn++)Wr(hn);return re},T.prototype.getVisibleCoordinates=function(C){for(var I=this,Z=this.getRenderableIds(C).map(function(qe){return I._tiles[qe].tileID}),q=0,re=Z;q<re.length;q+=1){var _e=re[q];_e.posMatrix=this.transform.calculatePosMatrix(_e.toUnwrapped())}return Z},T.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(mr(this._source.type))for(var C in this._tiles){var I=this._tiles[C];if(I.fadeEndTime!==void 0&&I.fadeEndTime>=w.browser.now())return!0}return!1},T.prototype.setFeatureState=function(C,I,Z){this._state.updateState(C=C||"_geojsonTileLayer",I,Z)},T.prototype.removeFeatureState=function(C,I,Z){this._state.removeFeatureState(C=C||"_geojsonTileLayer",I,Z)},T.prototype.getFeatureState=function(C,I){return this._state.getState(C=C||"_geojsonTileLayer",I)},T.prototype.setDependencies=function(C,I,Z){var q=this._tiles[C];q&&q.setDependencies(I,Z)},T.prototype.reloadTilesForDependencies=function(C,I){for(var Z in this._tiles)this._tiles[Z].hasDependency(C,I)&&this._reloadTile(Z,"reloading");this._cache.filter(function(q){return!q.hasDependency(C,I)})},T}(w.Evented);function Rt(b,T){var C=Math.abs(2*b.wrap)-+(b.wrap<0),I=Math.abs(2*T.wrap)-+(T.wrap<0);return b.overscaledZ-T.overscaledZ||I-C||T.canonical.y-b.canonical.y||T.canonical.x-b.canonical.x}function mr(b){return b==="raster"||b==="image"||b==="video"}function Dr(){return new w.window.Worker(Cp.workerUrl)}at.maxOverzooming=10,at.maxUnderzooming=3;var Ft="mapboxgl_preloaded_worker_pool",Mn=function(){this.active={}};Mn.prototype.acquire=function(b){if(!this.workers)for(this.workers=[];this.workers.length<Mn.workerCount;)this.workers.push(new Dr);return this.active[b]=!0,this.workers.slice()},Mn.prototype.release=function(b){delete this.active[b],this.numActive()===0&&(this.workers.forEach(function(T){T.terminate()}),this.workers=null)},Mn.prototype.isPreloaded=function(){return!!this.active[Ft]},Mn.prototype.numActive=function(){return Object.keys(this.active).length};var yi,gi=Math.floor(w.browser.hardwareConcurrency/2);function sn(){return yi||(yi=new Mn),yi}function hi(b,T){var C={};for(var I in b)I!=="ref"&&(C[I]=b[I]);return w.refProperties.forEach(function(Z){Z in T&&(C[Z]=T[Z])}),C}function ri(b){b=b.slice();for(var T=Object.create(null),C=0;C<b.length;C++)T[b[C].id]=b[C];for(var I=0;I<b.length;I++)"ref"in b[I]&&(b[I]=hi(b[I],T[b[I].ref]));return b}Mn.workerCount=Math.max(Math.min(gi,6),1);var ui={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ba(b,T,C){C.push({command:ui.addSource,args:[b,T[b]]})}function vi(b,T,C){T.push({command:ui.removeSource,args:[b]}),C[b]=!0}function Sa(b,T,C,I){vi(b,C,I),ba(b,T,C)}function za(b,T,C){var I;for(I in b[C])if(b[C].hasOwnProperty(I)&&I!=="data"&&!w.deepEqual(b[C][I],T[C][I]))return!1;for(I in T[C])if(T[C].hasOwnProperty(I)&&I!=="data"&&!w.deepEqual(b[C][I],T[C][I]))return!1;return!0}function _a(b,T,C,I,Z,q){var re;for(re in T=T||{},b=b||{})b.hasOwnProperty(re)&&(w.deepEqual(b[re],T[re])||C.push({command:q,args:[I,re,T[re],Z]}));for(re in T)T.hasOwnProperty(re)&&!b.hasOwnProperty(re)&&(w.deepEqual(b[re],T[re])||C.push({command:q,args:[I,re,T[re],Z]}))}function Ga(b){return b.id}function Ea(b,T){return b[T.id]=T,b}var hs=function(b,T){this.reset(b,T)};hs.prototype.reset=function(b,T){this.points=b||[],this._distances=[0];for(var C=1;C<this.points.length;C++)this._distances[C]=this._distances[C-1]+this.points[C].dist(this.points[C-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(T||0,.5*this.length),this.paddedLength=this.length-2*this.padding},hs.prototype.lerp=function(b){if(this.points.length===1)return this.points[0];b=w.clamp(b,0,1);for(var T=1,C=this._distances[T],I=b*this.paddedLength+this.padding;C<I&&T<this._distances.length;)C=this._distances[++T];var Z=T-1,q=this._distances[Z],re=C-q,_e=re>0?(I-q)/re:0;return this.points[Z].mult(1-_e).add(this.points[T].mult(_e))};var uo=function(b,T,C){var I=this.boxCells=[],Z=this.circleCells=[];this.xCellCount=Math.ceil(b/C),this.yCellCount=Math.ceil(T/C);for(var q=0;q<this.xCellCount*this.yCellCount;q++)I.push([]),Z.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=b,this.height=T,this.xScale=this.xCellCount/b,this.yScale=this.yCellCount/T,this.boxUid=0,this.circleUid=0};function Ro(b,T,C,I,Z){var q=w.create();return T?(w.scale(q,q,[1/Z,1/Z,1]),C||w.rotateZ(q,q,I.angle)):w.multiply(q,I.labelPlaneMatrix,b),q}function Jn(b,T,C,I,Z){if(T){var q=w.clone(b);return w.scale(q,q,[Z,Z,1]),C||w.rotateZ(q,q,-I.angle),q}return I.glCoordMatrix}function _i(b,T){var C=[b.x,b.y,0,1];Cn(C,C,T);var I=C[3];return{point:new w.Point(C[0]/I,C[1]/I),signedDistanceFromCamera:I}}function na(b,T){return .5+b/T*.5}function Xa(b,T){var C=b[0]/b[3],I=b[1]/b[3];return C>=-T[0]&&C<=T[0]&&I>=-T[1]&&I<=T[1]}function ps(b,T,C,I,Z,q,re,_e){var qe=I?b.textSizeData:b.iconSizeData,yt=w.evaluateSizeForZoom(qe,C.transform.zoom),Ut=[256/C.width*2+1,256/C.height*2+1],Zt=I?b.text.dynamicLayoutVertexArray:b.icon.dynamicLayoutVertexArray;Zt.clear();for(var Ht=b.lineVertexArray,sr=I?b.text.placedSymbolArray:b.icon.placedSymbolArray,or=C.transform.width/C.transform.height,Er=!1,rr=0;rr<sr.length;rr++){var wr=sr.get(rr);if(wr.hidden||wr.writingMode===w.WritingMode.vertical&&!Er)Gr(wr.numGlyphs,Zt);else{Er=!1;var Fr=[wr.anchorX,wr.anchorY,0,1];if(w.transformMat4(Fr,Fr,T),Xa(Fr,Ut)){var Wr=na(C.transform.cameraToCenterDistance,Fr[3]),hn=w.evaluateSizeForFeature(qe,yt,wr),an=re?hn/Wr:hn*Wr,bn=new w.Point(wr.anchorX,wr.anchorY),In=_i(bn,Z).point,pi={},ei=nr(wr,an,!1,_e,T,Z,q,b.glyphOffsetArray,Ht,Zt,In,bn,pi,or);Er=ei.useVertical,(ei.notEnoughRoom||Er||ei.needsFlipping&&nr(wr,an,!0,_e,T,Z,q,b.glyphOffsetArray,Ht,Zt,In,bn,pi,or).notEnoughRoom)&&Gr(wr.numGlyphs,Zt)}else Gr(wr.numGlyphs,Zt)}}I?b.text.dynamicLayoutVertexBuffer.updateData(Zt):b.icon.dynamicLayoutVertexBuffer.updateData(Zt)}function po(b,T,C,I,Z,q,re,_e,qe,yt,Ut){var Zt=_e.glyphStartIndex+_e.numGlyphs,Ht=_e.lineStartIndex,sr=_e.lineStartIndex+_e.lineLength,or=T.getoffsetX(_e.glyphStartIndex),Er=T.getoffsetX(Zt-1),rr=Xt(b*or,C,I,Z,q,re,_e.segment,Ht,sr,qe,yt,Ut);if(!rr)return null;var wr=Xt(b*Er,C,I,Z,q,re,_e.segment,Ht,sr,qe,yt,Ut);return wr?{first:rr,last:wr}:null}function Io(b,T,C,I){return b===w.WritingMode.horizontal&&Math.abs(C.y-T.y)>Math.abs(C.x-T.x)*I?{useVertical:!0}:(b===w.WritingMode.vertical?T.y<C.y:T.x>C.x)?{needsFlipping:!0}:null}function nr(b,T,C,I,Z,q,re,_e,qe,yt,Ut,Zt,Ht,sr){var or,Er=T/24,rr=b.lineOffsetX*Er,wr=b.lineOffsetY*Er;if(b.numGlyphs>1){var Fr=b.glyphStartIndex+b.numGlyphs,Wr=b.lineStartIndex,hn=b.lineStartIndex+b.lineLength,an=po(Er,_e,rr,wr,C,Ut,Zt,b,qe,q,Ht);if(!an)return{notEnoughRoom:!0};var bn=_i(an.first.point,re).point,In=_i(an.last.point,re).point;if(I&&!C){var pi=Io(b.writingMode,bn,In,sr);if(pi)return pi}or=[an.first];for(var ei=b.glyphStartIndex+1;ei<Fr-1;ei++)or.push(Xt(Er*_e.getoffsetX(ei),rr,wr,C,Ut,Zt,b.segment,Wr,hn,qe,q,Ht));or.push(an.last)}else{if(I&&!C){var Ii=_i(Zt,Z).point,ia=b.lineStartIndex+b.segment+1,la=new w.Point(qe.getx(ia),qe.gety(ia)),Ki=_i(la,Z),bo=Ki.signedDistanceFromCamera>0?Ki.point:At(Zt,la,Ii,1,Z),Ni=Io(b.writingMode,Ii,bo,sr);if(Ni)return Ni}var Oa=Xt(Er*_e.getoffsetX(b.glyphStartIndex),rr,wr,C,Ut,Zt,b.segment,b.lineStartIndex,b.lineStartIndex+b.lineLength,qe,q,Ht);if(!Oa)return{notEnoughRoom:!0};or=[Oa]}for(var La=0,Ia=or;La<Ia.length;La+=1){var fa=Ia[La];w.addDynamicAttributes(yt,fa.point,fa.angle)}return{}}function At(b,T,C,I,Z){var q=_i(b.add(b.sub(T)._unit()),Z).point,re=C.sub(q);return C.add(re._mult(I/re.mag()))}function Xt(b,T,C,I,Z,q,re,_e,qe,yt,Ut,Zt){var Ht=I?b-T:b+T,sr=Ht>0?1:-1,or=0;I&&(sr*=-1,or=Math.PI),sr<0&&(or+=Math.PI);for(var Er=sr>0?_e+re:_e+re+1,rr=Z,wr=Z,Fr=0,Wr=0,hn=Math.abs(Ht),an=[];Fr+Wr<=hn;){if((Er+=sr)<_e||Er>=qe)return null;if(wr=rr,an.push(rr),(rr=Zt[Er])===void 0){var bn=new w.Point(yt.getx(Er),yt.gety(Er)),In=_i(bn,Ut);if(In.signedDistanceFromCamera>0)rr=Zt[Er]=In.point;else{var pi=Er-sr;rr=At(Fr===0?q:new w.Point(yt.getx(pi),yt.gety(pi)),bn,wr,hn-Fr+1,Ut)}}Fr+=Wr,Wr=wr.dist(rr)}var ei=(hn-Fr)/Wr,Ii=rr.sub(wr),ia=Ii.mult(ei)._add(wr);ia._add(Ii._unit()._perp()._mult(C*sr));var la=or+Math.atan2(rr.y-wr.y,rr.x-wr.x);return an.push(ia),{point:ia,angle:la,path:an}}uo.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},uo.prototype.insert=function(b,T,C,I,Z){this._forEachCell(T,C,I,Z,this._insertBoxCell,this.boxUid++),this.boxKeys.push(b),this.bboxes.push(T),this.bboxes.push(C),this.bboxes.push(I),this.bboxes.push(Z)},uo.prototype.insertCircle=function(b,T,C,I){this._forEachCell(T-I,C-I,T+I,C+I,this._insertCircleCell,this.circleUid++),this.circleKeys.push(b),this.circles.push(T),this.circles.push(C),this.circles.push(I)},uo.prototype._insertBoxCell=function(b,T,C,I,Z,q){this.boxCells[Z].push(q)},uo.prototype._insertCircleCell=function(b,T,C,I,Z,q){this.circleCells[Z].push(q)},uo.prototype._query=function(b,T,C,I,Z,q){if(C<0||b>this.width||I<0||T>this.height)return!Z&&[];var re=[];if(b<=0&&T<=0&&this.width<=C&&this.height<=I){if(Z)return!0;for(var _e=0;_e<this.boxKeys.length;_e++)re.push({key:this.boxKeys[_e],x1:this.bboxes[4*_e],y1:this.bboxes[4*_e+1],x2:this.bboxes[4*_e+2],y2:this.bboxes[4*_e+3]});for(var qe=0;qe<this.circleKeys.length;qe++){var yt=this.circles[3*qe],Ut=this.circles[3*qe+1],Zt=this.circles[3*qe+2];re.push({key:this.circleKeys[qe],x1:yt-Zt,y1:Ut-Zt,x2:yt+Zt,y2:Ut+Zt})}return q?re.filter(q):re}return this._forEachCell(b,T,C,I,this._queryCell,re,{hitTest:Z,seenUids:{box:{},circle:{}}},q),Z?re.length>0:re},uo.prototype._queryCircle=function(b,T,C,I,Z){var q=b-C,re=b+C,_e=T-C,qe=T+C;if(re<0||q>this.width||qe<0||_e>this.height)return!I&&[];var yt=[];return this._forEachCell(q,_e,re,qe,this._queryCellCircle,yt,{hitTest:I,circle:{x:b,y:T,radius:C},seenUids:{box:{},circle:{}}},Z),I?yt.length>0:yt},uo.prototype.query=function(b,T,C,I,Z){return this._query(b,T,C,I,!1,Z)},uo.prototype.hitTest=function(b,T,C,I,Z){return this._query(b,T,C,I,!0,Z)},uo.prototype.hitTestCircle=function(b,T,C,I){return this._queryCircle(b,T,C,!0,I)},uo.prototype._queryCell=function(b,T,C,I,Z,q,re,_e){var qe=re.seenUids,yt=this.boxCells[Z];if(yt!==null)for(var Ut=this.bboxes,Zt=0,Ht=yt;Zt<Ht.length;Zt+=1){var sr=Ht[Zt];if(!qe.box[sr]){qe.box[sr]=!0;var or=4*sr;if(b<=Ut[or+2]&&T<=Ut[or+3]&&C>=Ut[or+0]&&I>=Ut[or+1]&&(!_e||_e(this.boxKeys[sr]))){if(re.hitTest)return q.push(!0),!0;q.push({key:this.boxKeys[sr],x1:Ut[or],y1:Ut[or+1],x2:Ut[or+2],y2:Ut[or+3]})}}}var Er=this.circleCells[Z];if(Er!==null)for(var rr=this.circles,wr=0,Fr=Er;wr<Fr.length;wr+=1){var Wr=Fr[wr];if(!qe.circle[Wr]){qe.circle[Wr]=!0;var hn=3*Wr;if(this._circleAndRectCollide(rr[hn],rr[hn+1],rr[hn+2],b,T,C,I)&&(!_e||_e(this.circleKeys[Wr]))){if(re.hitTest)return q.push(!0),!0;var an=rr[hn],bn=rr[hn+1],In=rr[hn+2];q.push({key:this.circleKeys[Wr],x1:an-In,y1:bn-In,x2:an+In,y2:bn+In})}}}},uo.prototype._queryCellCircle=function(b,T,C,I,Z,q,re,_e){var qe=re.circle,yt=re.seenUids,Ut=this.boxCells[Z];if(Ut!==null)for(var Zt=this.bboxes,Ht=0,sr=Ut;Ht<sr.length;Ht+=1){var or=sr[Ht];if(!yt.box[or]){yt.box[or]=!0;var Er=4*or;if(this._circleAndRectCollide(qe.x,qe.y,qe.radius,Zt[Er+0],Zt[Er+1],Zt[Er+2],Zt[Er+3])&&(!_e||_e(this.boxKeys[or])))return q.push(!0),!0}}var rr=this.circleCells[Z];if(rr!==null)for(var wr=this.circles,Fr=0,Wr=rr;Fr<Wr.length;Fr+=1){var hn=Wr[Fr];if(!yt.circle[hn]){yt.circle[hn]=!0;var an=3*hn;if(this._circlesCollide(wr[an],wr[an+1],wr[an+2],qe.x,qe.y,qe.radius)&&(!_e||_e(this.circleKeys[hn])))return q.push(!0),!0}}},uo.prototype._forEachCell=function(b,T,C,I,Z,q,re,_e){for(var qe=this._convertToXCellCoord(b),yt=this._convertToYCellCoord(T),Ut=this._convertToXCellCoord(C),Zt=this._convertToYCellCoord(I),Ht=qe;Ht<=Ut;Ht++)for(var sr=yt;sr<=Zt;sr++)if(Z.call(this,b,T,C,I,this.xCellCount*sr+Ht,q,re,_e))return},uo.prototype._convertToXCellCoord=function(b){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(b*this.xScale)))},uo.prototype._convertToYCellCoord=function(b){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(b*this.yScale)))},uo.prototype._circlesCollide=function(b,T,C,I,Z,q){var re=I-b,_e=Z-T,qe=C+q;return qe*qe>re*re+_e*_e},uo.prototype._circleAndRectCollide=function(b,T,C,I,Z,q,re){var _e=(q-I)/2,qe=Math.abs(b-(I+_e));if(qe>_e+C)return!1;var yt=(re-Z)/2,Ut=Math.abs(T-(Z+yt));if(Ut>yt+C)return!1;if(qe<=_e||Ut<=yt)return!0;var Zt=qe-_e,Ht=Ut-yt;return Zt*Zt+Ht*Ht<=C*C};var yr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Gr(b,T){for(var C=0;C<b;C++){var I=T.length;T.resize(I+4),T.float32.set(yr,3*I)}}function Cn(b,T,C){var I=T[0],Z=T[1];return b[0]=C[0]*I+C[4]*Z+C[12],b[1]=C[1]*I+C[5]*Z+C[13],b[3]=C[3]*I+C[7]*Z+C[15],b}var kn=function(b,T,C){T===void 0&&(T=new uo(b.width+200,b.height+200,25)),C===void 0&&(C=new uo(b.width+200,b.height+200,25)),this.transform=b,this.grid=T,this.ignoredGrid=C,this.pitchfactor=Math.cos(b._pitch)*b.cameraToCenterDistance,this.screenRightBoundary=b.width+100,this.screenBottomBoundary=b.height+100,this.gridRightBoundary=b.width+200,this.gridBottomBoundary=b.height+200};function _n(b,T,C){return T*(w.EXTENT/(b.tileSize*Math.pow(2,C-b.tileID.overscaledZ)))}kn.prototype.placeCollisionBox=function(b,T,C,I,Z){var q=this.projectAndGetPerspectiveRatio(I,b.anchorPointX,b.anchorPointY),re=C*q.perspectiveRatio,_e=b.x1*re+q.point.x,qe=b.y1*re+q.point.y,yt=b.x2*re+q.point.x,Ut=b.y2*re+q.point.y;return!this.isInsideGrid(_e,qe,yt,Ut)||!T&&this.grid.hitTest(_e,qe,yt,Ut,Z)?{box:[],offscreen:!1}:{box:[_e,qe,yt,Ut],offscreen:this.isOffscreen(_e,qe,yt,Ut)}},kn.prototype.placeCollisionCircles=function(b,T,C,I,Z,q,re,_e,qe,yt,Ut,Zt,Ht){var sr=[],or=new w.Point(T.anchorX,T.anchorY),Er=_i(or,q),rr=na(this.transform.cameraToCenterDistance,Er.signedDistanceFromCamera),wr=(yt?Z/rr:Z*rr)/w.ONE_EM,Fr=_i(or,re).point,Wr=po(wr,I,T.lineOffsetX*wr,T.lineOffsetY*wr,!1,Fr,or,T,C,re,{}),hn=!1,an=!1,bn=!0;if(Wr){for(var In=.5*Zt*rr+Ht,pi=new w.Point(-100,-100),ei=new w.Point(this.screenRightBoundary,this.screenBottomBoundary),Ii=new hs,ia=Wr.first,la=Wr.last,Ki=[],bo=ia.path.length-1;bo>=1;bo--)Ki.push(ia.path[bo]);for(var Ni=1;Ni<la.path.length;Ni++)Ki.push(la.path[Ni]);var Oa=2.5*In;if(_e){var La=Ki.map(function(hl){return _i(hl,_e)});Ki=La.some(function(hl){return hl.signedDistanceFromCamera<=0})?[]:La.map(function(hl){return hl.point})}var Ia=[];if(Ki.length>0){for(var fa=Ki[0].clone(),Pa=Ki[0].clone(),Ca=1;Ca<Ki.length;Ca++)fa.x=Math.min(fa.x,Ki[Ca].x),fa.y=Math.min(fa.y,Ki[Ca].y),Pa.x=Math.max(Pa.x,Ki[Ca].x),Pa.y=Math.max(Pa.y,Ki[Ca].y);Ia=fa.x>=pi.x&&Pa.x<=ei.x&&fa.y>=pi.y&&Pa.y<=ei.y?[Ki]:Pa.x<pi.x||fa.x>ei.x||Pa.y<pi.y||fa.y>ei.y?[]:w.clipLine([Ki],pi.x,pi.y,ei.x,ei.y)}for(var pa=0,Eu=Ia;pa<Eu.length;pa+=1){var ks;Ii.reset(Eu[pa],.25*In),ks=Ii.length<=.5*In?1:Math.ceil(Ii.paddedLength/Oa)+1;for(var Xu=0;Xu<ks;Xu++){var wu=Xu/Math.max(ks-1,1),Qo=Ii.lerp(wu),vs=Qo.x+100,Cu=Qo.y+100;sr.push(vs,Cu,In,0);var hu=vs-In,Kc=Cu-In,el=vs+In,hc=Cu+In;if(bn=bn&&this.isOffscreen(hu,Kc,el,hc),an=an||this.isInsideGrid(hu,Kc,el,hc),!b&&this.grid.hitTestCircle(vs,Cu,In,Ut)&&(hn=!0,!qe))return{circles:[],offscreen:!1,collisionDetected:hn}}}}return{circles:!qe&&hn||!an?[]:sr,offscreen:bn,collisionDetected:hn}},kn.prototype.queryRenderedSymbols=function(b){if(b.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var T=[],C=1/0,I=1/0,Z=-1/0,q=-1/0,re=0,_e=b;re<_e.length;re+=1){var qe=_e[re],yt=new w.Point(qe.x+100,qe.y+100);C=Math.min(C,yt.x),I=Math.min(I,yt.y),Z=Math.max(Z,yt.x),q=Math.max(q,yt.y),T.push(yt)}for(var Ut={},Zt={},Ht=0,sr=this.grid.query(C,I,Z,q).concat(this.ignoredGrid.query(C,I,Z,q));Ht<sr.length;Ht+=1){var or=sr[Ht],Er=or.key;if(Ut[Er.bucketInstanceId]===void 0&&(Ut[Er.bucketInstanceId]={}),!Ut[Er.bucketInstanceId][Er.featureIndex]){var rr=[new w.Point(or.x1,or.y1),new w.Point(or.x2,or.y1),new w.Point(or.x2,or.y2),new w.Point(or.x1,or.y2)];w.polygonIntersectsPolygon(T,rr)&&(Ut[Er.bucketInstanceId][Er.featureIndex]=!0,Zt[Er.bucketInstanceId]===void 0&&(Zt[Er.bucketInstanceId]=[]),Zt[Er.bucketInstanceId].push(Er.featureIndex))}}return Zt},kn.prototype.insertCollisionBox=function(b,T,C,I,Z){(T?this.ignoredGrid:this.grid).insert({bucketInstanceId:C,featureIndex:I,collisionGroupID:Z},b[0],b[1],b[2],b[3])},kn.prototype.insertCollisionCircles=function(b,T,C,I,Z){for(var q=T?this.ignoredGrid:this.grid,re={bucketInstanceId:C,featureIndex:I,collisionGroupID:Z},_e=0;_e<b.length;_e+=4)q.insertCircle(re,b[_e],b[_e+1],b[_e+2])},kn.prototype.projectAndGetPerspectiveRatio=function(b,T,C){var I=[T,C,0,1];return Cn(I,I,b),{point:new w.Point((I[0]/I[3]+1)/2*this.transform.width+100,(-I[1]/I[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/I[3]*.5}},kn.prototype.isOffscreen=function(b,T,C,I){return C<100||b>=this.screenRightBoundary||I<100||T>this.screenBottomBoundary},kn.prototype.isInsideGrid=function(b,T,C,I){return C>=0&&b<this.gridRightBoundary&&I>=0&&T<this.gridBottomBoundary},kn.prototype.getViewportMatrix=function(){var b=w.identity([]);return w.translate(b,b,[-100,-100,0]),b};var Mi=function(b,T,C,I){this.opacity=b?Math.max(0,Math.min(1,b.opacity+(b.placed?T:-T))):I&&C?1:0,this.placed=C};Mi.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Yi=function(b,T,C,I,Z){this.text=new Mi(b?b.text:null,T,C,Z),this.icon=new Mi(b?b.icon:null,T,I,Z)};Yi.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Wo=function(b,T,C){this.text=b,this.icon=T,this.skipFade=C},Ko=function(){this.invProjMatrix=w.create(),this.viewportMatrix=w.create(),this.circles=[]},su=function(b,T,C,I,Z){this.bucketInstanceId=b,this.featureIndex=T,this.sourceLayerIndex=C,this.bucketIndex=I,this.tileID=Z},No=function(b){this.crossSourceCollisions=b,this.maxGroupID=0,this.collisionGroups={}};function ro(b,T,C,I,Z){var q=w.getAnchorAlignment(b),re=-(q.horizontalAlign-.5)*T,_e=-(q.verticalAlign-.5)*C,qe=w.evaluateVariableOffset(b,I);return new w.Point(re+qe[0]*Z,_e+qe[1]*Z)}function uu(b,T,C,I,Z,q){var re=b.x1,_e=b.x2,qe=b.y1,yt=b.y2,Ut=b.anchorPointX,Zt=b.anchorPointY,Ht=new w.Point(T,C);return I&&Ht._rotate(Z?q:-q),{x1:re+Ht.x,y1:qe+Ht.y,x2:_e+Ht.x,y2:yt+Ht.y,anchorPointX:Ut,anchorPointY:Zt}}No.prototype.get=function(b){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[b]){var T=++this.maxGroupID;this.collisionGroups[b]={ID:T,predicate:function(C){return C.collisionGroupID===T}}}return this.collisionGroups[b]};var qo=function(b,T,C,I){this.transform=b.clone(),this.collisionIndex=new kn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=T,this.retainedQueryData={},this.collisionGroups=new No(C),this.collisionCircleArrays={},this.prevPlacement=I,I&&(I.prevPlacement=void 0),this.placedOrientations={}};function Dt(b,T,C,I,Z){b.emplaceBack(T?1:0,C?1:0,I||0,Z||0),b.emplaceBack(T?1:0,C?1:0,I||0,Z||0),b.emplaceBack(T?1:0,C?1:0,I||0,Z||0),b.emplaceBack(T?1:0,C?1:0,I||0,Z||0)}qo.prototype.getBucketParts=function(b,T,C,I){var Z=C.getBucket(T),q=C.latestFeatureIndex;if(Z&&q&&T.id===Z.layerIds[0]){var re=C.collisionBoxArray,_e=Z.layers[0].layout,qe=Math.pow(2,this.transform.zoom-C.tileID.overscaledZ),yt=C.tileSize/w.EXTENT,Ut=this.transform.calculatePosMatrix(C.tileID.toUnwrapped()),Zt=_e.get("text-pitch-alignment")==="map",Ht=_e.get("text-rotation-alignment")==="map",sr=_n(C,1,this.transform.zoom),or=Ro(Ut,Zt,Ht,this.transform,sr),Er=null;if(Zt){var rr=Jn(Ut,Zt,Ht,this.transform,sr);Er=w.multiply([],this.transform.labelPlaneMatrix,rr)}this.retainedQueryData[Z.bucketInstanceId]=new su(Z.bucketInstanceId,q,Z.sourceLayerIndex,Z.index,C.tileID);var wr={bucket:Z,layout:_e,posMatrix:Ut,textLabelPlaneMatrix:or,labelToScreenMatrix:Er,scale:qe,textPixelRatio:yt,holdingForFade:C.holdingForFade(),collisionBoxArray:re,partiallyEvaluatedTextSize:w.evaluateSizeForZoom(Z.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Z.sourceID)};if(I)for(var Fr=0,Wr=Z.sortKeyRanges;Fr<Wr.length;Fr+=1){var hn=Wr[Fr];b.push({sortKey:hn.sortKey,symbolInstanceStart:hn.symbolInstanceStart,symbolInstanceEnd:hn.symbolInstanceEnd,parameters:wr})}else b.push({symbolInstanceStart:0,symbolInstanceEnd:Z.symbolInstances.length,parameters:wr})}},qo.prototype.attemptAnchorPlacement=function(b,T,C,I,Z,q,re,_e,qe,yt,Ut,Zt,Ht,sr,or){var Er,rr=[Zt.textOffset0,Zt.textOffset1],wr=ro(b,C,I,rr,Z),Fr=this.collisionIndex.placeCollisionBox(uu(T,wr.x,wr.y,q,re,this.transform.angle),Ut,_e,qe,yt.predicate);if(!or||this.collisionIndex.placeCollisionBox(uu(or,wr.x,wr.y,q,re,this.transform.angle),Ut,_e,qe,yt.predicate).box.length!==0)return Fr.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Zt.crossTileID]&&this.prevPlacement.placements[Zt.crossTileID]&&this.prevPlacement.placements[Zt.crossTileID].text&&(Er=this.prevPlacement.variableOffsets[Zt.crossTileID].anchor),this.variableOffsets[Zt.crossTileID]={textOffset:rr,width:C,height:I,anchor:b,textBoxScale:Z,prevAnchor:Er},this.markUsedJustification(Ht,b,Zt,sr),Ht.allowVerticalPlacement&&(this.markUsedOrientation(Ht,sr,Zt),this.placedOrientations[Zt.crossTileID]=sr),{shift:wr,placedGlyphBoxes:Fr}):void 0},qo.prototype.placeLayerBucketPart=function(b,T,C){var I=this,Z=b.parameters,q=Z.bucket,re=Z.layout,_e=Z.posMatrix,qe=Z.textLabelPlaneMatrix,yt=Z.labelToScreenMatrix,Ut=Z.textPixelRatio,Zt=Z.holdingForFade,Ht=Z.collisionBoxArray,sr=Z.partiallyEvaluatedTextSize,or=Z.collisionGroup,Er=re.get("text-optional"),rr=re.get("icon-optional"),wr=re.get("text-allow-overlap"),Fr=re.get("icon-allow-overlap"),Wr=re.get("text-rotation-alignment")==="map",hn=re.get("text-pitch-alignment")==="map",an=re.get("icon-text-fit")!=="none",bn=re.get("symbol-z-order")==="viewport-y",In=wr&&(Fr||!q.hasIconData()||rr),pi=Fr&&(wr||!q.hasTextData()||Er);!q.collisionArrays&&Ht&&q.deserializeCollisionBoxes(Ht);var ei=function(Ni,Oa){if(!T[Ni.crossTileID])if(Zt)I.placements[Ni.crossTileID]=new Wo(!1,!1,!1);else{var La,Ia=!1,fa=!1,Pa=!0,Ca=null,pa={box:null,offscreen:null},Eu={box:null,offscreen:null},ks=null,Xu=null,wu=0,Qo=0,vs=0;Oa.textFeatureIndex?wu=Oa.textFeatureIndex:Ni.useRuntimeCollisionCircles&&(wu=Ni.featureIndex),Oa.verticalTextFeatureIndex&&(Qo=Oa.verticalTextFeatureIndex);var Cu=Oa.textBox;if(Cu){var hu=function(yo){var $u=w.WritingMode.horizontal;if(q.allowVerticalPlacement&&!yo&&I.prevPlacement){var Gs=I.prevPlacement.placedOrientations[Ni.crossTileID];Gs&&(I.placedOrientations[Ni.crossTileID]=Gs,I.markUsedOrientation(q,$u=Gs,Ni))}return $u},Kc=function(yo,$u){if(q.allowVerticalPlacement&&Ni.numVerticalGlyphVertices>0&&Oa.verticalTextBox)for(var Gs=0,gf=q.writingModes;Gs<gf.length&&(gf[Gs]===w.WritingMode.vertical?(pa=$u(),Eu=pa):pa=yo(),!(pa&&pa.box&&pa.box.length));Gs+=1);else pa=yo()};if(re.get("text-variable-anchor")){var el=re.get("text-variable-anchor");if(I.prevPlacement&&I.prevPlacement.variableOffsets[Ni.crossTileID]){var hc=I.prevPlacement.variableOffsets[Ni.crossTileID];el.indexOf(hc.anchor)>0&&(el=el.filter(function(yo){return yo!==hc.anchor})).unshift(hc.anchor)}var hl=function(yo,$u,Gs){for(var gf=yo.x2-yo.x1,ld=yo.y2-yo.y1,mf=Ni.textBoxScale,Sv=an&&!Fr?$u:null,Tl={box:[],offscreen:!1},Hl=wr?2*el.length:el.length,jl=0;jl<Hl;++jl){var zf=I.attemptAnchorPlacement(el[jl%el.length],yo,gf,ld,mf,Wr,hn,Ut,_e,or,jl>=el.length,Ni,q,Gs,Sv);if(zf&&(Tl=zf.placedGlyphBoxes)&&Tl.box&&Tl.box.length){Ia=!0,Ca=zf.shift;break}}return Tl};Kc(function(){return hl(Cu,Oa.iconBox,w.WritingMode.horizontal)},function(){var yo=Oa.verticalTextBox;return q.allowVerticalPlacement&&!(pa&&pa.box&&pa.box.length)&&Ni.numVerticalGlyphVertices>0&&yo?hl(yo,Oa.verticalIconBox,w.WritingMode.vertical):{box:null,offscreen:null}}),pa&&(Ia=pa.box,Pa=pa.offscreen);var Nf=hu(pa&&pa.box);if(!Ia&&I.prevPlacement){var pf=I.prevPlacement.variableOffsets[Ni.crossTileID];pf&&(I.variableOffsets[Ni.crossTileID]=pf,I.markUsedJustification(q,pf.anchor,Ni,Nf))}}else{var qc=function(yo,$u){var Gs=I.collisionIndex.placeCollisionBox(yo,wr,Ut,_e,or.predicate);return Gs&&Gs.box&&Gs.box.length&&(I.markUsedOrientation(q,$u,Ni),I.placedOrientations[Ni.crossTileID]=$u),Gs};Kc(function(){return qc(Cu,w.WritingMode.horizontal)},function(){var yo=Oa.verticalTextBox;return q.allowVerticalPlacement&&Ni.numVerticalGlyphVertices>0&&yo?qc(yo,w.WritingMode.vertical):{box:null,offscreen:null}}),hu(pa&&pa.box&&pa.box.length)}}if(Ia=(La=pa)&&La.box&&La.box.length>0,Pa=La&&La.offscreen,Ni.useRuntimeCollisionCircles){var df=q.text.placedSymbolArray.get(Ni.centerJustifiedTextSymbolIndex),pc=w.evaluateSizeForFeature(q.textSizeData,sr,df),dc=re.get("text-padding");ks=I.collisionIndex.placeCollisionCircles(wr,df,q.lineVertexArray,q.glyphOffsetArray,pc,_e,qe,yt,C,hn,or.predicate,Ni.collisionCircleDiameter,dc),Ia=wr||ks.circles.length>0&&!ks.collisionDetected,Pa=Pa&&ks.offscreen}if(Oa.iconFeatureIndex&&(vs=Oa.iconFeatureIndex),Oa.iconBox){var vf=function(yo){var $u=an&&Ca?uu(yo,Ca.x,Ca.y,Wr,hn,I.transform.angle):yo;return I.collisionIndex.placeCollisionBox($u,Fr,Ut,_e,or.predicate)};fa=Eu&&Eu.box&&Eu.box.length&&Oa.verticalIconBox?(Xu=vf(Oa.verticalIconBox)).box.length>0:(Xu=vf(Oa.iconBox)).box.length>0,Pa=Pa&&Xu.offscreen}var ku=Er||Ni.numHorizontalGlyphVertices===0&&Ni.numVerticalGlyphVertices===0,Ts=rr||Ni.numIconVertices===0;if(ku||Ts?Ts?ku||(fa=fa&&Ia):Ia=fa&&Ia:fa=Ia=fa&&Ia,Ia&&La&&La.box&&I.collisionIndex.insertCollisionBox(La.box,re.get("text-ignore-placement"),q.bucketInstanceId,Eu&&Eu.box&&Qo?Qo:wu,or.ID),fa&&Xu&&I.collisionIndex.insertCollisionBox(Xu.box,re.get("icon-ignore-placement"),q.bucketInstanceId,vs,or.ID),ks&&(Ia&&I.collisionIndex.insertCollisionCircles(ks.circles,re.get("text-ignore-placement"),q.bucketInstanceId,wu,or.ID),C)){var ru=q.bucketInstanceId,Al=I.collisionCircleArrays[ru];Al===void 0&&(Al=I.collisionCircleArrays[ru]=new Ko);for(var Jl=0;Jl<ks.circles.length;Jl+=4)Al.circles.push(ks.circles[Jl+0]),Al.circles.push(ks.circles[Jl+1]),Al.circles.push(ks.circles[Jl+2]),Al.circles.push(ks.collisionDetected?1:0)}I.placements[Ni.crossTileID]=new Wo(Ia||In,fa||pi,Pa||q.justReloaded),T[Ni.crossTileID]=!0}};if(bn)for(var Ii=q.getSortedSymbolIndexes(this.transform.angle),ia=Ii.length-1;ia>=0;--ia){var la=Ii[ia];ei(q.symbolInstances.get(la),q.collisionArrays[la])}else for(var Ki=b.symbolInstanceStart;Ki<b.symbolInstanceEnd;Ki++)ei(q.symbolInstances.get(Ki),q.collisionArrays[Ki]);if(C&&q.bucketInstanceId in this.collisionCircleArrays){var bo=this.collisionCircleArrays[q.bucketInstanceId];w.invert(bo.invProjMatrix,_e),bo.viewportMatrix=this.collisionIndex.getViewportMatrix()}q.justReloaded=!1},qo.prototype.markUsedJustification=function(b,T,C,I){var Z;Z=I===w.WritingMode.vertical?C.verticalPlacedTextSymbolIndex:{left:C.leftJustifiedTextSymbolIndex,center:C.centerJustifiedTextSymbolIndex,right:C.rightJustifiedTextSymbolIndex}[w.getAnchorJustification(T)];for(var q=0,re=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex,C.verticalPlacedTextSymbolIndex];q<re.length;q+=1){var _e=re[q];_e>=0&&(b.text.placedSymbolArray.get(_e).crossTileID=Z>=0&&_e!==Z?0:C.crossTileID)}},qo.prototype.markUsedOrientation=function(b,T,C){for(var I=T===w.WritingMode.horizontal||T===w.WritingMode.horizontalOnly?T:0,Z=T===w.WritingMode.vertical?T:0,q=0,re=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex];q<re.length;q+=1)b.text.placedSymbolArray.get(re[q]).placedOrientation=I;C.verticalPlacedTextSymbolIndex&&(b.text.placedSymbolArray.get(C.verticalPlacedTextSymbolIndex).placedOrientation=Z)},qo.prototype.commit=function(b){this.commitTime=b,this.zoomAtLastRecencyCheck=this.transform.zoom;var T=this.prevPlacement,C=!1;this.prevZoomAdjustment=T?T.zoomAdjustment(this.transform.zoom):0;var I=T?T.symbolFadeChange(b):1,Z=T?T.opacities:{},q=T?T.variableOffsets:{},re=T?T.placedOrientations:{};for(var _e in this.placements){var qe=this.placements[_e],yt=Z[_e];yt?(this.opacities[_e]=new Yi(yt,I,qe.text,qe.icon),C=C||qe.text!==yt.text.placed||qe.icon!==yt.icon.placed):(this.opacities[_e]=new Yi(null,I,qe.text,qe.icon,qe.skipFade),C=C||qe.text||qe.icon)}for(var Ut in Z){var Zt=Z[Ut];if(!this.opacities[Ut]){var Ht=new Yi(Zt,I,!1,!1);Ht.isHidden()||(this.opacities[Ut]=Ht,C=C||Zt.text.placed||Zt.icon.placed)}}for(var sr in q)this.variableOffsets[sr]||!this.opacities[sr]||this.opacities[sr].isHidden()||(this.variableOffsets[sr]=q[sr]);for(var or in re)this.placedOrientations[or]||!this.opacities[or]||this.opacities[or].isHidden()||(this.placedOrientations[or]=re[or]);C?this.lastPlacementChangeTime=b:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=T?T.lastPlacementChangeTime:b)},qo.prototype.updateLayerOpacities=function(b,T){for(var C={},I=0,Z=T;I<Z.length;I+=1){var q=Z[I],re=q.getBucket(b);re&&q.latestFeatureIndex&&b.id===re.layerIds[0]&&this.updateBucketOpacities(re,C,q.collisionBoxArray)}},qo.prototype.updateBucketOpacities=function(b,T,C){var I=this;b.hasTextData()&&b.text.opacityVertexArray.clear(),b.hasIconData()&&b.icon.opacityVertexArray.clear(),b.hasIconCollisionBoxData()&&b.iconCollisionBox.collisionVertexArray.clear(),b.hasTextCollisionBoxData()&&b.textCollisionBox.collisionVertexArray.clear();var Z=b.layers[0].layout,q=new Yi(null,0,!1,!1,!0),re=Z.get("text-allow-overlap"),_e=Z.get("icon-allow-overlap"),qe=Z.get("text-variable-anchor"),yt=Z.get("text-rotation-alignment")==="map",Ut=Z.get("text-pitch-alignment")==="map",Zt=Z.get("icon-text-fit")!=="none",Ht=new Yi(null,0,re&&(_e||!b.hasIconData()||Z.get("icon-optional")),_e&&(re||!b.hasTextData()||Z.get("text-optional")),!0);!b.collisionArrays&&C&&(b.hasIconCollisionBoxData()||b.hasTextCollisionBoxData())&&b.deserializeCollisionBoxes(C);for(var sr=function(wr,Fr,Wr){for(var hn=0;hn<Fr/4;hn++)wr.opacityVertexArray.emplaceBack(Wr)},or=function(wr){var Fr=b.symbolInstances.get(wr),Wr=Fr.numHorizontalGlyphVertices,hn=Fr.numVerticalGlyphVertices,an=Fr.crossTileID,bn=I.opacities[an];T[an]?bn=q:bn||(I.opacities[an]=bn=Ht),T[an]=!0;var In=Fr.numIconVertices>0,pi=I.placedOrientations[Fr.crossTileID],ei=pi===w.WritingMode.vertical,Ii=pi===w.WritingMode.horizontal||pi===w.WritingMode.horizontalOnly;if(Wr>0||hn>0){var ia=Eo(bn.text);sr(b.text,Wr,ei?Po:ia),sr(b.text,hn,Ii?Po:ia);var la=bn.text.isHidden();[Fr.rightJustifiedTextSymbolIndex,Fr.centerJustifiedTextSymbolIndex,Fr.leftJustifiedTextSymbolIndex].forEach(function(pa){pa>=0&&(b.text.placedSymbolArray.get(pa).hidden=la||ei?1:0)}),Fr.verticalPlacedTextSymbolIndex>=0&&(b.text.placedSymbolArray.get(Fr.verticalPlacedTextSymbolIndex).hidden=la||Ii?1:0);var Ki=I.variableOffsets[Fr.crossTileID];Ki&&I.markUsedJustification(b,Ki.anchor,Fr,pi);var bo=I.placedOrientations[Fr.crossTileID];bo&&(I.markUsedJustification(b,"left",Fr,bo),I.markUsedOrientation(b,bo,Fr))}if(In){var Ni=Eo(bn.icon),Oa=!(Zt&&Fr.verticalPlacedIconSymbolIndex&&ei);Fr.placedIconSymbolIndex>=0&&(sr(b.icon,Fr.numIconVertices,Oa?Ni:Po),b.icon.placedSymbolArray.get(Fr.placedIconSymbolIndex).hidden=bn.icon.isHidden()),Fr.verticalPlacedIconSymbolIndex>=0&&(sr(b.icon,Fr.numVerticalIconVertices,Oa?Po:Ni),b.icon.placedSymbolArray.get(Fr.verticalPlacedIconSymbolIndex).hidden=bn.icon.isHidden())}if(b.hasIconCollisionBoxData()||b.hasTextCollisionBoxData()){var La=b.collisionArrays[wr];if(La){var Ia=new w.Point(0,0);if(La.textBox||La.verticalTextBox){var fa=!0;if(qe){var Pa=I.variableOffsets[an];Pa?(Ia=ro(Pa.anchor,Pa.width,Pa.height,Pa.textOffset,Pa.textBoxScale),yt&&Ia._rotate(Ut?I.transform.angle:-I.transform.angle)):fa=!1}La.textBox&&Dt(b.textCollisionBox.collisionVertexArray,bn.text.placed,!fa||ei,Ia.x,Ia.y),La.verticalTextBox&&Dt(b.textCollisionBox.collisionVertexArray,bn.text.placed,!fa||Ii,Ia.x,Ia.y)}var Ca=!!(!Ii&&La.verticalIconBox);La.iconBox&&Dt(b.iconCollisionBox.collisionVertexArray,bn.icon.placed,Ca,Zt?Ia.x:0,Zt?Ia.y:0),La.verticalIconBox&&Dt(b.iconCollisionBox.collisionVertexArray,bn.icon.placed,!Ca,Zt?Ia.x:0,Zt?Ia.y:0)}}},Er=0;Er<b.symbolInstances.length;Er++)or(Er);if(b.sortFeatures(this.transform.angle),this.retainedQueryData[b.bucketInstanceId]&&(this.retainedQueryData[b.bucketInstanceId].featureSortOrder=b.featureSortOrder),b.hasTextData()&&b.text.opacityVertexBuffer&&b.text.opacityVertexBuffer.updateData(b.text.opacityVertexArray),b.hasIconData()&&b.icon.opacityVertexBuffer&&b.icon.opacityVertexBuffer.updateData(b.icon.opacityVertexArray),b.hasIconCollisionBoxData()&&b.iconCollisionBox.collisionVertexBuffer&&b.iconCollisionBox.collisionVertexBuffer.updateData(b.iconCollisionBox.collisionVertexArray),b.hasTextCollisionBoxData()&&b.textCollisionBox.collisionVertexBuffer&&b.textCollisionBox.collisionVertexBuffer.updateData(b.textCollisionBox.collisionVertexArray),b.bucketInstanceId in this.collisionCircleArrays){var rr=this.collisionCircleArrays[b.bucketInstanceId];b.placementInvProjMatrix=rr.invProjMatrix,b.placementViewportMatrix=rr.viewportMatrix,b.collisionCircleArray=rr.circles,delete this.collisionCircleArrays[b.bucketInstanceId]}},qo.prototype.symbolFadeChange=function(b){return this.fadeDuration===0?1:(b-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},qo.prototype.zoomAdjustment=function(b){return Math.max(0,(this.transform.zoom-b)/1.5)},qo.prototype.hasTransitions=function(b){return this.stale||b-this.lastPlacementChangeTime<this.fadeDuration},qo.prototype.stillRecent=function(b,T){var C=this.zoomAtLastRecencyCheck===T?1-this.zoomAdjustment(T):1;return this.zoomAtLastRecencyCheck=T,this.commitTime+this.fadeDuration*C>b},qo.prototype.setStale=function(){this.stale=!0};var Kt=Math.pow(2,25),Or=Math.pow(2,24),xn=Math.pow(2,17),ii=Math.pow(2,16),Zi=Math.pow(2,9),lo=Math.pow(2,8),Bs=Math.pow(2,1);function Eo(b){if(b.opacity===0&&!b.placed)return 0;if(b.opacity===1&&b.placed)return 4294967295;var T=b.placed?1:0,C=Math.floor(127*b.opacity);return C*Kt+T*Or+C*xn+T*ii+C*Zi+T*lo+C*Bs+T}var Po=0,Hu=function(b){this._sortAcrossTiles=b.layout.get("symbol-z-order")!=="viewport-y"&&b.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Hu.prototype.continuePlacement=function(b,T,C,I,Z){for(var q=this._bucketParts;this._currentTileIndex<b.length;)if(T.getBucketParts(q,I,b[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,Z())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,q.sort(function(re,_e){return re.sortKey-_e.sortKey}));this._currentPartIndex<q.length;)if(T.placeLayerBucketPart(q[this._currentPartIndex],this._seenCrossTileIDs,C),this._currentPartIndex++,Z())return!0;return!1};var uf=function(b,T,C,I,Z,q,re){this.placement=new qo(b,Z,q,re),this._currentPlacementIndex=T.length-1,this._forceFullPlacement=C,this._showCollisionBoxes=I,this._done=!1};uf.prototype.isDone=function(){return this._done},uf.prototype.continuePlacement=function(b,T,C){for(var I=this,Z=w.browser.now(),q=function(){var qe=w.browser.now()-Z;return!I._forceFullPlacement&&qe>2};this._currentPlacementIndex>=0;){var re=T[b[this._currentPlacementIndex]],_e=this.placement.collisionIndex.transform.zoom;if(re.type==="symbol"&&(!re.minzoom||re.minzoom<=_e)&&(!re.maxzoom||re.maxzoom>_e)){if(this._inProgressLayer||(this._inProgressLayer=new Hu(re)),this._inProgressLayer.continuePlacement(C[re.source],this.placement,this._showCollisionBoxes,re,q))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},uf.prototype.commit=function(b){return this.placement.commit(b),this.placement};var th=512/w.EXTENT/2,rh=function(b,T,C){this.tileID=b,this.indexedSymbolInstances={},this.bucketInstanceId=C;for(var I=0;I<T.length;I++){var Z=T.get(I),q=Z.key;this.indexedSymbolInstances[q]||(this.indexedSymbolInstances[q]=[]),this.indexedSymbolInstances[q].push({crossTileID:Z.crossTileID,coord:this.getScaledCoordinates(Z,b)})}};rh.prototype.getScaledCoordinates=function(b,T){var C=th/Math.pow(2,T.canonical.z-this.tileID.canonical.z);return{x:Math.floor((T.canonical.x*w.EXTENT+b.anchorX)*C),y:Math.floor((T.canonical.y*w.EXTENT+b.anchorY)*C)}},rh.prototype.findMatches=function(b,T,C){for(var I=this.tileID.canonical.z<T.canonical.z?1:Math.pow(2,this.tileID.canonical.z-T.canonical.z),Z=0;Z<b.length;Z++){var q=b.get(Z);if(!q.crossTileID){var re=this.indexedSymbolInstances[q.key];if(re)for(var _e=this.getScaledCoordinates(q,T),qe=0,yt=re;qe<yt.length;qe+=1){var Ut=yt[qe];if(Math.abs(Ut.coord.x-_e.x)<=I&&Math.abs(Ut.coord.y-_e.y)<=I&&!C[Ut.crossTileID]){C[Ut.crossTileID]=!0,q.crossTileID=Ut.crossTileID;break}}}}};var lu=function(){this.maxCrossTileID=0};lu.prototype.generate=function(){return++this.maxCrossTileID};var nc=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};nc.prototype.handleWrapJump=function(b){var T=Math.round((b-this.lng)/360);if(T!==0)for(var C in this.indexes){var I=this.indexes[C],Z={};for(var q in I){var re=I[q];re.tileID=re.tileID.unwrapTo(re.tileID.wrap+T),Z[re.tileID.key]=re}this.indexes[C]=Z}this.lng=b},nc.prototype.addBucket=function(b,T,C){if(this.indexes[b.overscaledZ]&&this.indexes[b.overscaledZ][b.key]){if(this.indexes[b.overscaledZ][b.key].bucketInstanceId===T.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(b.overscaledZ,this.indexes[b.overscaledZ][b.key])}for(var I=0;I<T.symbolInstances.length;I++)T.symbolInstances.get(I).crossTileID=0;this.usedCrossTileIDs[b.overscaledZ]||(this.usedCrossTileIDs[b.overscaledZ]={});var Z=this.usedCrossTileIDs[b.overscaledZ];for(var q in this.indexes){var re=this.indexes[q];if(Number(q)>b.overscaledZ)for(var _e in re){var qe=re[_e];qe.tileID.isChildOf(b)&&qe.findMatches(T.symbolInstances,b,Z)}else{var yt=re[b.scaledTo(Number(q)).key];yt&&yt.findMatches(T.symbolInstances,b,Z)}}for(var Ut=0;Ut<T.symbolInstances.length;Ut++){var Zt=T.symbolInstances.get(Ut);Zt.crossTileID||(Zt.crossTileID=C.generate(),Z[Zt.crossTileID]=!0)}return this.indexes[b.overscaledZ]===void 0&&(this.indexes[b.overscaledZ]={}),this.indexes[b.overscaledZ][b.key]=new rh(b,T.symbolInstances,T.bucketInstanceId),!0},nc.prototype.removeBucketCrossTileIDs=function(b,T){for(var C in T.indexedSymbolInstances)for(var I=0,Z=T.indexedSymbolInstances[C];I<Z.length;I+=1)delete this.usedCrossTileIDs[b][Z[I].crossTileID]},nc.prototype.removeStaleBuckets=function(b){var T=!1;for(var C in this.indexes){var I=this.indexes[C];for(var Z in I)b[I[Z].bucketInstanceId]||(this.removeBucketCrossTileIDs(C,I[Z]),delete I[Z],T=!0)}return T};var Qs=function(){this.layerIndexes={},this.crossTileIDs=new lu,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Qs.prototype.addLayer=function(b,T,C){var I=this.layerIndexes[b.id];I===void 0&&(I=this.layerIndexes[b.id]=new nc);var Z=!1,q={};I.handleWrapJump(C);for(var re=0,_e=T;re<_e.length;re+=1){var qe=_e[re],yt=qe.getBucket(b);yt&&b.id===yt.layerIds[0]&&(yt.bucketInstanceId||(yt.bucketInstanceId=++this.maxBucketInstanceId),I.addBucket(qe.tileID,yt,this.crossTileIDs)&&(Z=!0),q[yt.bucketInstanceId]=!0)}return I.removeStaleBuckets(q)&&(Z=!0),Z},Qs.prototype.pruneUnusedLayers=function(b){var T={};for(var C in b.forEach(function(I){T[I]=!0}),this.layerIndexes)T[C]||delete this.layerIndexes[C]};var Sl=function(b,T){return w.emitValidationErrors(b,T&&T.filter(function(C){return C.identifier!=="source.canvas"}))},ic=w.pick(ui,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),no=w.pick(ui,["setCenter","setZoom","setBearing","setPitch"]),Kl=function(){var b={},T=w.styleSpec.$version;for(var C in w.styleSpec.$root){var I,Z=w.styleSpec.$root[C];Z.required&&(I=C==="version"?T:Z.type==="array"?[]:{})!=null&&(b[C]=I)}return b}(),Es=function(b){function T(C,I){var Z=this;I===void 0&&(I={}),b.call(this),this.map=C,this.dispatcher=new je(sn(),this),this.imageManager=new E,this.imageManager.setEventedParent(this),this.glyphManager=new ft(C._requestManager,I.localIdeographFontFamily),this.lineAtlas=new Ye(256,512),this.crossTileSymbolIndex=new Qs,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new w.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",w.getReferrer());var q=this;this._rtlTextPluginCallback=T.registerForPluginStateChange(function(re){q.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:re.pluginStatus,pluginURL:re.pluginURL},function(_e,qe){if(w.triggerPluginCompletionEvent(_e),qe&&qe.every(function(Ut){return Ut}))for(var yt in q.sourceCaches)q.sourceCaches[yt].reload()})}),this.on("data",function(re){if(re.dataType==="source"&&re.sourceDataType==="metadata"){var _e=Z.sourceCaches[re.sourceId];if(_e){var qe=_e.getSource();if(qe&&qe.vectorLayerIds)for(var yt in Z._layers){var Ut=Z._layers[yt];Ut.source===qe.id&&Z._validateLayer(Ut)}}}})}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.loadURL=function(C,I){var Z=this;I===void 0&&(I={}),this.fire(new w.Event("dataloading",{dataType:"style"}));var q=typeof I.validate=="boolean"?I.validate:!w.isMapboxURL(C);C=this.map._requestManager.normalizeStyleURL(C,I.accessToken);var re=this.map._requestManager.transformRequest(C,w.ResourceType.Style);this._request=w.getJSON(re,function(_e,qe){Z._request=null,_e?Z.fire(new w.ErrorEvent(_e)):qe&&Z._load(qe,q)})},T.prototype.loadJSON=function(C,I){var Z=this;I===void 0&&(I={}),this.fire(new w.Event("dataloading",{dataType:"style"})),this._request=w.browser.frame(function(){Z._request=null,Z._load(C,I.validate!==!1)})},T.prototype.loadEmpty=function(){this.fire(new w.Event("dataloading",{dataType:"style"})),this._load(Kl,!1)},T.prototype._load=function(C,I){if(!I||!Sl(this,w.validateStyle(C))){for(var Z in this._loaded=!0,this.stylesheet=C,C.sources)this.addSource(Z,C.sources[Z],{validate:!1});C.sprite?this._loadSprite(C.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(C.glyphs);var q=ri(this.stylesheet.layers);this._order=q.map(function(yt){return yt.id}),this._layers={},this._serializedLayers={};for(var re=0,_e=q;re<_e.length;re+=1){var qe=_e[re];(qe=w.createStyleLayer(qe)).setEventedParent(this,{layer:{id:qe.id}}),this._layers[qe.id]=qe,this._serializedLayers[qe.id]=qe.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Ce(this.stylesheet.light),this.fire(new w.Event("data",{dataType:"style"})),this.fire(new w.Event("style.load"))}},T.prototype._loadSprite=function(C){var I=this;this._spriteRequest=function(Z,q,re){var _e,qe,yt,Ut=w.browser.devicePixelRatio>1?"@2x":"",Zt=w.getJSON(q.transformRequest(q.normalizeSpriteURL(Z,Ut,".json"),w.ResourceType.SpriteJSON),function(or,Er){Zt=null,yt||(yt=or,_e=Er,sr())}),Ht=w.getImage(q.transformRequest(q.normalizeSpriteURL(Z,Ut,".png"),w.ResourceType.SpriteImage),function(or,Er){Ht=null,yt||(yt=or,qe=Er,sr())});function sr(){if(yt)re(yt);else if(_e&&qe){var or=w.browser.getImageData(qe),Er={};for(var rr in _e){var wr=_e[rr],Fr=wr.width,Wr=wr.height,hn=wr.x,an=wr.y,bn=wr.sdf,In=wr.pixelRatio,pi=wr.stretchX,ei=wr.stretchY,Ii=wr.content,ia=new w.RGBAImage({width:Fr,height:Wr});w.RGBAImage.copy(or,ia,{x:hn,y:an},{x:0,y:0},{width:Fr,height:Wr}),Er[rr]={data:ia,pixelRatio:In,sdf:bn,stretchX:pi,stretchY:ei,content:Ii}}re(null,Er)}}return{cancel:function(){Zt&&(Zt.cancel(),Zt=null),Ht&&(Ht.cancel(),Ht=null)}}}(C,this.map._requestManager,function(Z,q){if(I._spriteRequest=null,Z)I.fire(new w.ErrorEvent(Z));else if(q)for(var re in q)I.imageManager.addImage(re,q[re]);I.imageManager.setLoaded(!0),I._availableImages=I.imageManager.listImages(),I.dispatcher.broadcast("setImages",I._availableImages),I.fire(new w.Event("data",{dataType:"style"}))})},T.prototype._validateLayer=function(C){var I=this.sourceCaches[C.source];if(I){var Z=C.sourceLayer;if(Z){var q=I.getSource();(q.type==="geojson"||q.vectorLayerIds&&q.vectorLayerIds.indexOf(Z)===-1)&&this.fire(new w.ErrorEvent(new Error('Source layer "'+Z+'" does not exist on source "'+q.id+'" as specified by style layer "'+C.id+'"')))}}},T.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var C in this.sourceCaches)if(!this.sourceCaches[C].loaded())return!1;return!!this.imageManager.isLoaded()},T.prototype._serializeLayers=function(C){for(var I=[],Z=0,q=C;Z<q.length;Z+=1){var re=this._layers[q[Z]];re.type!=="custom"&&I.push(re.serialize())}return I},T.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var C in this.sourceCaches)if(this.sourceCaches[C].hasTransition())return!0;for(var I in this._layers)if(this._layers[I].hasTransition())return!0;return!1},T.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},T.prototype.update=function(C){if(this._loaded){var I=this._changed;if(this._changed){var Z=Object.keys(this._updatedLayers),q=Object.keys(this._removedLayers);for(var re in(Z.length||q.length)&&this._updateWorkerLayers(Z,q),this._updatedSources){var _e=this._updatedSources[re];_e==="reload"?this._reloadSource(re):_e==="clear"&&this._clearSource(re)}for(var qe in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[qe].updateTransitions(C);this.light.updateTransitions(C),this._resetUpdates()}var yt={};for(var Ut in this.sourceCaches){var Zt=this.sourceCaches[Ut];yt[Ut]=Zt.used,Zt.used=!1}for(var Ht=0,sr=this._order;Ht<sr.length;Ht+=1){var or=this._layers[sr[Ht]];or.recalculate(C,this._availableImages),!or.isHidden(C.zoom)&&or.source&&(this.sourceCaches[or.source].used=!0)}for(var Er in yt){var rr=this.sourceCaches[Er];yt[Er]!==rr.used&&rr.fire(new w.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Er}))}this.light.recalculate(C),this.z=C.zoom,I&&this.fire(new w.Event("data",{dataType:"style"}))}},T.prototype._updateTilesForChangedImages=function(){var C=Object.keys(this._changedImages);if(C.length){for(var I in this.sourceCaches)this.sourceCaches[I].reloadTilesForDependencies(["icons","patterns"],C);this._changedImages={}}},T.prototype._updateWorkerLayers=function(C,I){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(C),removedIds:I})},T.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},T.prototype.setState=function(C){var I=this;if(this._checkLoaded(),Sl(this,w.validateStyle(C)))return!1;(C=w.clone$1(C)).layers=ri(C.layers);var Z=function(re,_e){if(!re)return[{command:ui.setStyle,args:[_e]}];var qe=[];try{if(!w.deepEqual(re.version,_e.version))return[{command:ui.setStyle,args:[_e]}];w.deepEqual(re.center,_e.center)||qe.push({command:ui.setCenter,args:[_e.center]}),w.deepEqual(re.zoom,_e.zoom)||qe.push({command:ui.setZoom,args:[_e.zoom]}),w.deepEqual(re.bearing,_e.bearing)||qe.push({command:ui.setBearing,args:[_e.bearing]}),w.deepEqual(re.pitch,_e.pitch)||qe.push({command:ui.setPitch,args:[_e.pitch]}),w.deepEqual(re.sprite,_e.sprite)||qe.push({command:ui.setSprite,args:[_e.sprite]}),w.deepEqual(re.glyphs,_e.glyphs)||qe.push({command:ui.setGlyphs,args:[_e.glyphs]}),w.deepEqual(re.transition,_e.transition)||qe.push({command:ui.setTransition,args:[_e.transition]}),w.deepEqual(re.light,_e.light)||qe.push({command:ui.setLight,args:[_e.light]});var yt={},Ut=[];(function(Ht,sr,or,Er){var rr;for(rr in sr=sr||{},Ht=Ht||{})Ht.hasOwnProperty(rr)&&(sr.hasOwnProperty(rr)||vi(rr,or,Er));for(rr in sr)sr.hasOwnProperty(rr)&&(Ht.hasOwnProperty(rr)?w.deepEqual(Ht[rr],sr[rr])||(Ht[rr].type==="geojson"&&sr[rr].type==="geojson"&&za(Ht,sr,rr)?or.push({command:ui.setGeoJSONSourceData,args:[rr,sr[rr].data]}):Sa(rr,sr,or,Er)):ba(rr,sr,or))})(re.sources,_e.sources,Ut,yt);var Zt=[];re.layers&&re.layers.forEach(function(Ht){yt[Ht.source]?qe.push({command:ui.removeLayer,args:[Ht.id]}):Zt.push(Ht)}),qe=qe.concat(Ut),function(Ht,sr,or){sr=sr||[];var Er,rr,wr,Fr,Wr,hn,an,bn=(Ht=Ht||[]).map(Ga),In=sr.map(Ga),pi=Ht.reduce(Ea,{}),ei=sr.reduce(Ea,{}),Ii=bn.slice(),ia=Object.create(null);for(Er=0,rr=0;Er<bn.length;Er++)ei.hasOwnProperty(wr=bn[Er])?rr++:(or.push({command:ui.removeLayer,args:[wr]}),Ii.splice(Ii.indexOf(wr,rr),1));for(Er=0,rr=0;Er<In.length;Er++)Ii[Ii.length-1-Er]!==(wr=In[In.length-1-Er])&&(pi.hasOwnProperty(wr)?(or.push({command:ui.removeLayer,args:[wr]}),Ii.splice(Ii.lastIndexOf(wr,Ii.length-rr),1)):rr++,or.push({command:ui.addLayer,args:[ei[wr],hn=Ii[Ii.length-Er]]}),Ii.splice(Ii.length-Er,0,wr),ia[wr]=!0);for(Er=0;Er<In.length;Er++)if(Fr=pi[wr=In[Er]],Wr=ei[wr],!ia[wr]&&!w.deepEqual(Fr,Wr))if(w.deepEqual(Fr.source,Wr.source)&&w.deepEqual(Fr["source-layer"],Wr["source-layer"])&&w.deepEqual(Fr.type,Wr.type)){for(an in _a(Fr.layout,Wr.layout,or,wr,null,ui.setLayoutProperty),_a(Fr.paint,Wr.paint,or,wr,null,ui.setPaintProperty),w.deepEqual(Fr.filter,Wr.filter)||or.push({command:ui.setFilter,args:[wr,Wr.filter]}),w.deepEqual(Fr.minzoom,Wr.minzoom)&&w.deepEqual(Fr.maxzoom,Wr.maxzoom)||or.push({command:ui.setLayerZoomRange,args:[wr,Wr.minzoom,Wr.maxzoom]}),Fr)Fr.hasOwnProperty(an)&&an!=="layout"&&an!=="paint"&&an!=="filter"&&an!=="metadata"&&an!=="minzoom"&&an!=="maxzoom"&&(an.indexOf("paint.")===0?_a(Fr[an],Wr[an],or,wr,an.slice(6),ui.setPaintProperty):w.deepEqual(Fr[an],Wr[an])||or.push({command:ui.setLayerProperty,args:[wr,an,Wr[an]]}));for(an in Wr)Wr.hasOwnProperty(an)&&!Fr.hasOwnProperty(an)&&an!=="layout"&&an!=="paint"&&an!=="filter"&&an!=="metadata"&&an!=="minzoom"&&an!=="maxzoom"&&(an.indexOf("paint.")===0?_a(Fr[an],Wr[an],or,wr,an.slice(6),ui.setPaintProperty):w.deepEqual(Fr[an],Wr[an])||or.push({command:ui.setLayerProperty,args:[wr,an,Wr[an]]}))}else or.push({command:ui.removeLayer,args:[wr]}),hn=Ii[Ii.lastIndexOf(wr)+1],or.push({command:ui.addLayer,args:[Wr,hn]})}(Zt,_e.layers,qe)}catch(Ht){console.warn("Unable to compute style diff:",Ht),qe=[{command:ui.setStyle,args:[_e]}]}return qe}(this.serialize(),C).filter(function(re){return!(re.command in no)});if(Z.length===0)return!1;var q=Z.filter(function(re){return!(re.command in ic)});if(q.length>0)throw new Error("Unimplemented: "+q.map(function(re){return re.command}).join(", ")+".");return Z.forEach(function(re){re.command!=="setTransition"&&I[re.command].apply(I,re.args)}),this.stylesheet=C,!0},T.prototype.addImage=function(C,I){if(this.getImage(C))return this.fire(new w.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(C,I),this._afterImageUpdated(C)},T.prototype.updateImage=function(C,I){this.imageManager.updateImage(C,I)},T.prototype.getImage=function(C){return this.imageManager.getImage(C)},T.prototype.removeImage=function(C){if(!this.getImage(C))return this.fire(new w.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(C),this._afterImageUpdated(C)},T.prototype._afterImageUpdated=function(C){this._availableImages=this.imageManager.listImages(),this._changedImages[C]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new w.Event("data",{dataType:"style"}))},T.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},T.prototype.addSource=function(C,I,Z){var q=this;if(Z===void 0&&(Z={}),this._checkLoaded(),this.sourceCaches[C]!==void 0)throw new Error("There is already a source with this ID");if(!I.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(I).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(I.type)>=0&&this._validate(w.validateStyle.source,"sources."+C,I,null,Z))){this.map&&this.map._collectResourceTiming&&(I.collectResourceTiming=!0);var re=this.sourceCaches[C]=new at(C,I,this.dispatcher);re.style=this,re.setEventedParent(this,function(){return{isSourceLoaded:q.loaded(),source:re.serialize(),sourceId:C}}),re.onAdd(this.map),this._changed=!0}},T.prototype.removeSource=function(C){if(this._checkLoaded(),this.sourceCaches[C]===void 0)throw new Error("There is no source with this ID");for(var I in this._layers)if(this._layers[I].source===C)return this.fire(new w.ErrorEvent(new Error('Source "'+C+'" cannot be removed while layer "'+I+'" is using it.')));var Z=this.sourceCaches[C];delete this.sourceCaches[C],delete this._updatedSources[C],Z.fire(new w.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:C})),Z.setEventedParent(null),Z.clearTiles(),Z.onRemove&&Z.onRemove(this.map),this._changed=!0},T.prototype.setGeoJSONSourceData=function(C,I){this._checkLoaded(),this.sourceCaches[C].getSource().setData(I),this._changed=!0},T.prototype.getSource=function(C){return this.sourceCaches[C]&&this.sourceCaches[C].getSource()},T.prototype.addLayer=function(C,I,Z){Z===void 0&&(Z={}),this._checkLoaded();var q=C.id;if(this.getLayer(q))this.fire(new w.ErrorEvent(new Error('Layer with id "'+q+'" already exists on this map')));else{var re;if(C.type==="custom"){if(Sl(this,w.validateCustomStyleLayer(C)))return;re=w.createStyleLayer(C)}else{if(typeof C.source=="object"&&(this.addSource(q,C.source),C=w.clone$1(C),C=w.extend(C,{source:q})),this._validate(w.validateStyle.layer,"layers."+q,C,{arrayIndex:-1},Z))return;re=w.createStyleLayer(C),this._validateLayer(re),re.setEventedParent(this,{layer:{id:q}}),this._serializedLayers[re.id]=re.serialize()}var _e=I?this._order.indexOf(I):this._order.length;if(I&&_e===-1)this.fire(new w.ErrorEvent(new Error('Layer with id "'+I+'" does not exist on this map.')));else{if(this._order.splice(_e,0,q),this._layerOrderChanged=!0,this._layers[q]=re,this._removedLayers[q]&&re.source&&re.type!=="custom"){var qe=this._removedLayers[q];delete this._removedLayers[q],qe.type!==re.type?this._updatedSources[re.source]="clear":(this._updatedSources[re.source]="reload",this.sourceCaches[re.source].pause())}this._updateLayer(re),re.onAdd&&re.onAdd(this.map)}}},T.prototype.moveLayer=function(C,I){if(this._checkLoaded(),this._changed=!0,this._layers[C]){if(C!==I){var Z=this._order.indexOf(C);this._order.splice(Z,1);var q=I?this._order.indexOf(I):this._order.length;I&&q===-1?this.fire(new w.ErrorEvent(new Error('Layer with id "'+I+'" does not exist on this map.'))):(this._order.splice(q,0,C),this._layerOrderChanged=!0)}}else this.fire(new w.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be moved.")))},T.prototype.removeLayer=function(C){this._checkLoaded();var I=this._layers[C];if(I){I.setEventedParent(null);var Z=this._order.indexOf(C);this._order.splice(Z,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[C]=I,delete this._layers[C],delete this._serializedLayers[C],delete this._updatedLayers[C],delete this._updatedPaintProps[C],I.onRemove&&I.onRemove(this.map)}else this.fire(new w.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be removed.")))},T.prototype.getLayer=function(C){return this._layers[C]},T.prototype.hasLayer=function(C){return C in this._layers},T.prototype.setLayerZoomRange=function(C,I,Z){this._checkLoaded();var q=this.getLayer(C);q?q.minzoom===I&&q.maxzoom===Z||(I!=null&&(q.minzoom=I),Z!=null&&(q.maxzoom=Z),this._updateLayer(q)):this.fire(new w.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot have zoom extent.")))},T.prototype.setFilter=function(C,I,Z){Z===void 0&&(Z={}),this._checkLoaded();var q=this.getLayer(C);if(q){if(!w.deepEqual(q.filter,I))return I==null?(q.filter=void 0,void this._updateLayer(q)):void(this._validate(w.validateStyle.filter,"layers."+q.id+".filter",I,null,Z)||(q.filter=w.clone$1(I),this._updateLayer(q)))}else this.fire(new w.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be filtered.")))},T.prototype.getFilter=function(C){return w.clone$1(this.getLayer(C).filter)},T.prototype.setLayoutProperty=function(C,I,Z,q){q===void 0&&(q={}),this._checkLoaded();var re=this.getLayer(C);re?w.deepEqual(re.getLayoutProperty(I),Z)||(re.setLayoutProperty(I,Z,q),this._updateLayer(re)):this.fire(new w.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be styled.")))},T.prototype.getLayoutProperty=function(C,I){var Z=this.getLayer(C);if(Z)return Z.getLayoutProperty(I);this.fire(new w.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style.")))},T.prototype.setPaintProperty=function(C,I,Z,q){q===void 0&&(q={}),this._checkLoaded();var re=this.getLayer(C);re?w.deepEqual(re.getPaintProperty(I),Z)||(re.setPaintProperty(I,Z,q)&&this._updateLayer(re),this._changed=!0,this._updatedPaintProps[C]=!0):this.fire(new w.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be styled.")))},T.prototype.getPaintProperty=function(C,I){return this.getLayer(C).getPaintProperty(I)},T.prototype.setFeatureState=function(C,I){this._checkLoaded();var Z=C.source,q=C.sourceLayer,re=this.sourceCaches[Z];if(re!==void 0){var _e=re.getSource().type;_e==="geojson"&&q?this.fire(new w.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):_e!=="vector"||q?(C.id===void 0&&this.fire(new w.ErrorEvent(new Error("The feature id parameter must be provided."))),re.setFeatureState(q,C.id,I)):this.fire(new w.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new w.ErrorEvent(new Error("The source '"+Z+"' does not exist in the map's style.")))},T.prototype.removeFeatureState=function(C,I){this._checkLoaded();var Z=C.source,q=this.sourceCaches[Z];if(q!==void 0){var re=q.getSource().type,_e=re==="vector"?C.sourceLayer:void 0;re!=="vector"||_e?I&&typeof C.id!="string"&&typeof C.id!="number"?this.fire(new w.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):q.removeFeatureState(_e,C.id,I):this.fire(new w.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new w.ErrorEvent(new Error("The source '"+Z+"' does not exist in the map's style.")))},T.prototype.getFeatureState=function(C){this._checkLoaded();var I=C.source,Z=C.sourceLayer,q=this.sourceCaches[I];if(q!==void 0){if(q.getSource().type!=="vector"||Z)return C.id===void 0&&this.fire(new w.ErrorEvent(new Error("The feature id parameter must be provided."))),q.getFeatureState(Z,C.id);this.fire(new w.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new w.ErrorEvent(new Error("The source '"+I+"' does not exist in the map's style.")))},T.prototype.getTransition=function(){return w.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},T.prototype.serialize=function(){return w.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:w.mapObject(this.sourceCaches,function(C){return C.serialize()}),layers:this._serializeLayers(this._order)},function(C){return C!==void 0})},T.prototype._updateLayer=function(C){this._updatedLayers[C.id]=!0,C.source&&!this._updatedSources[C.source]&&this.sourceCaches[C.source].getSource().type!=="raster"&&(this._updatedSources[C.source]="reload",this.sourceCaches[C.source].pause()),this._changed=!0},T.prototype._flattenAndSortRenderedFeatures=function(C){for(var I=this,Z=function(pi){return I._layers[pi].type==="fill-extrusion"},q={},re=[],_e=this._order.length-1;_e>=0;_e--){var qe=this._order[_e];if(Z(qe)){q[qe]=_e;for(var yt=0,Ut=C;yt<Ut.length;yt+=1){var Zt=Ut[yt][qe];if(Zt)for(var Ht=0,sr=Zt;Ht<sr.length;Ht+=1)re.push(sr[Ht])}}}re.sort(function(pi,ei){return ei.intersectionZ-pi.intersectionZ});for(var or=[],Er=this._order.length-1;Er>=0;Er--){var rr=this._order[Er];if(Z(rr))for(var wr=re.length-1;wr>=0;wr--){var Fr=re[wr].feature;if(q[Fr.layer.id]<Er)break;or.push(Fr),re.pop()}else for(var Wr=0,hn=C;Wr<hn.length;Wr+=1){var an=hn[Wr][rr];if(an)for(var bn=0,In=an;bn<In.length;bn+=1)or.push(In[bn].feature)}}return or},T.prototype.queryRenderedFeatures=function(C,I,Z){I&&I.filter&&this._validate(w.validateStyle.filter,"queryRenderedFeatures.filter",I.filter,null,I);var q={};if(I&&I.layers){if(!Array.isArray(I.layers))return this.fire(new w.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var re=0,_e=I.layers;re<_e.length;re+=1){var qe=_e[re],yt=this._layers[qe];if(!yt)return this.fire(new w.ErrorEvent(new Error("The layer '"+qe+"' does not exist in the map's style and cannot be queried for features."))),[];q[yt.source]=!0}}var Ut=[];for(var Zt in I.availableImages=this._availableImages,this.sourceCaches)I.layers&&!q[Zt]||Ut.push(Me(this.sourceCaches[Zt],this._layers,this._serializedLayers,C,I,Z));return this.placement&&Ut.push(function(Ht,sr,or,Er,rr,wr,Fr){for(var Wr={},hn=wr.queryRenderedSymbols(Er),an=[],bn=0,In=Object.keys(hn).map(Number);bn<In.length;bn+=1)an.push(Fr[In[bn]]);an.sort(ze);for(var pi=function(){var Ki=Ii[ei],bo=Ki.featureIndex.lookupSymbolFeatures(hn[Ki.bucketInstanceId],sr,Ki.bucketIndex,Ki.sourceLayerIndex,rr.filter,rr.layers,rr.availableImages,Ht);for(var Ni in bo){var Oa=Wr[Ni]=Wr[Ni]||[],La=bo[Ni];La.sort(function(Pa,Ca){var pa=Ki.featureSortOrder;if(pa){var Eu=pa.indexOf(Pa.featureIndex);return pa.indexOf(Ca.featureIndex)-Eu}return Ca.featureIndex-Pa.featureIndex});for(var Ia=0,fa=La;Ia<fa.length;Ia+=1)Oa.push(fa[Ia])}},ei=0,Ii=an;ei<Ii.length;ei+=1)pi();var ia=function(Ki){Wr[Ki].forEach(function(bo){var Ni=bo.feature,Oa=or[Ht[Ki].source].getFeatureState(Ni.layer["source-layer"],Ni.id);Ni.source=Ni.layer.source,Ni.layer["source-layer"]&&(Ni.sourceLayer=Ni.layer["source-layer"]),Ni.state=Oa})};for(var la in Wr)ia(la);return Wr}(this._layers,this._serializedLayers,this.sourceCaches,C,I,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Ut)},T.prototype.querySourceFeatures=function(C,I){I&&I.filter&&this._validate(w.validateStyle.filter,"querySourceFeatures.filter",I.filter,null,I);var Z=this.sourceCaches[C];return Z?function(q,re){for(var _e=q.getRenderableIds().map(function(sr){return q.getTileByID(sr)}),qe=[],yt={},Ut=0;Ut<_e.length;Ut++){var Zt=_e[Ut],Ht=Zt.tileID.canonical.key;yt[Ht]||(yt[Ht]=!0,Zt.querySourceFeatures(qe,re))}return qe}(Z,I):[]},T.prototype.addSourceType=function(C,I,Z){return T.getSourceType(C)?Z(new Error('A source type called "'+C+'" already exists.')):(T.setSourceType(C,I),I.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:C,url:I.workerSourceURL},Z):Z(null,null))},T.prototype.getLight=function(){return this.light.getLight()},T.prototype.setLight=function(C,I){I===void 0&&(I={}),this._checkLoaded();var Z=this.light.getLight(),q=!1;for(var re in C)if(!w.deepEqual(C[re],Z[re])){q=!0;break}if(q){var _e={now:w.browser.now(),transition:w.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(C,I),this.light.updateTransitions(_e)}},T.prototype._validate=function(C,I,Z,q,re){return re===void 0&&(re={}),(!re||re.validate!==!1)&&Sl(this,C.call(w.validateStyle,w.extend({key:I,style:this.serialize(),value:Z,styleSpec:w.styleSpec},q)))},T.prototype._remove=function(){for(var C in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),w.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[C].setEventedParent(null);for(var I in this.sourceCaches)this.sourceCaches[I].clearTiles(),this.sourceCaches[I].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},T.prototype._clearSource=function(C){this.sourceCaches[C].clearTiles()},T.prototype._reloadSource=function(C){this.sourceCaches[C].resume(),this.sourceCaches[C].reload()},T.prototype._updateSources=function(C){for(var I in this.sourceCaches)this.sourceCaches[I].update(C)},T.prototype._generateCollisionBoxes=function(){for(var C in this.sourceCaches)this._reloadSource(C)},T.prototype._updatePlacement=function(C,I,Z,q,re){re===void 0&&(re=!1);for(var _e=!1,qe=!1,yt={},Ut=0,Zt=this._order;Ut<Zt.length;Ut+=1){var Ht=this._layers[Zt[Ut]];if(Ht.type==="symbol"){if(!yt[Ht.source]){var sr=this.sourceCaches[Ht.source];yt[Ht.source]=sr.getRenderableIds(!0).map(function(Fr){return sr.getTileByID(Fr)}).sort(function(Fr,Wr){return Wr.tileID.overscaledZ-Fr.tileID.overscaledZ||(Fr.tileID.isLessThan(Wr.tileID)?-1:1)})}var or=this.crossTileSymbolIndex.addLayer(Ht,yt[Ht.source],C.center.lng);_e=_e||or}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((re=re||this._layerOrderChanged||Z===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(w.browser.now(),C.zoom))&&(this.pauseablePlacement=new uf(C,this._order,re,I,Z,q,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,yt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(w.browser.now()),qe=!0),_e&&this.pauseablePlacement.placement.setStale()),qe||_e)for(var Er=0,rr=this._order;Er<rr.length;Er+=1){var wr=this._layers[rr[Er]];wr.type==="symbol"&&this.placement.updateLayerOpacities(wr,yt[wr.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(w.browser.now())},T.prototype._releaseSymbolFadeTiles=function(){for(var C in this.sourceCaches)this.sourceCaches[C].releaseSymbolFadeTiles()},T.prototype.getImages=function(C,I,Z){this.imageManager.getImages(I.icons,Z),this._updateTilesForChangedImages();var q=this.sourceCaches[I.source];q&&q.setDependencies(I.tileID.key,I.type,I.icons)},T.prototype.getGlyphs=function(C,I,Z){this.glyphManager.getGlyphs(I.stacks,Z)},T.prototype.getResource=function(C,I,Z){return w.makeRequest(I,Z)},T}(w.Evented);Es.getSourceType=function(b){return Je[b]},Es.setSourceType=function(b,T){Je[b]=T},Es.registerForPluginStateChange=w.registerForPluginStateChange;var ds=w.createLayout([{name:"a_pos",type:"Int16",components:2}]),bc=Zo(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Sc=Zo(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Rf=Zo(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Bl=Zo(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Nl=Zo("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ql=Zo(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Pu=Zo(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ec=Zo("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Sn=Zo("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Vi=Zo("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),mv=Zo(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),nh=Zo(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ac=Zo(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ed=Zo(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Vs=Zo(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),wc=Zo(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),zl=Zo(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Js=Zo(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),cu=Zo(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),El=Zo(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),oc=Zo(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Ul=Zo(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Cc=Zo(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Vc=Zo(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),ih=Zo(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),td=Zo(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Zo(b,T){var C=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,I=T.match(/attribute ([\w]+) ([\w]+)/g),Z=b.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),q=T.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),re=q?q.concat(Z):Z,_e={};return{fragmentSource:b=b.replace(C,function(qe,yt,Ut,Zt,Ht){return _e[Ht]=!0,yt==="define"?`
#ifndef HAS_UNIFORM_u_`+Ht+`
varying `+Ut+" "+Zt+" "+Ht+`;
#else
uniform `+Ut+" "+Zt+" u_"+Ht+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Ht+`
    `+Ut+" "+Zt+" "+Ht+" = u_"+Ht+`;
#endif
`}),vertexSource:T=T.replace(C,function(qe,yt,Ut,Zt,Ht){var sr=Zt==="float"?"vec2":"vec4",or=Ht.match(/color/)?"color":sr;return _e[Ht]?yt==="define"?`
#ifndef HAS_UNIFORM_u_`+Ht+`
uniform lowp float u_`+Ht+`_t;
attribute `+Ut+" "+sr+" a_"+Ht+`;
varying `+Ut+" "+Zt+" "+Ht+`;
#else
uniform `+Ut+" "+Zt+" u_"+Ht+`;
#endif
`:or==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Ht+`
    `+Ht+" = a_"+Ht+`;
#else
    `+Ut+" "+Zt+" "+Ht+" = u_"+Ht+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Ht+`
    `+Ht+" = unpack_mix_"+or+"(a_"+Ht+", u_"+Ht+`_t);
#else
    `+Ut+" "+Zt+" "+Ht+" = u_"+Ht+`;
#endif
`:yt==="define"?`
#ifndef HAS_UNIFORM_u_`+Ht+`
uniform lowp float u_`+Ht+`_t;
attribute `+Ut+" "+sr+" a_"+Ht+`;
#else
uniform `+Ut+" "+Zt+" u_"+Ht+`;
#endif
`:or==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Ht+`
    `+Ut+" "+Zt+" "+Ht+" = a_"+Ht+`;
#else
    `+Ut+" "+Zt+" "+Ht+" = u_"+Ht+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Ht+`
    `+Ut+" "+Zt+" "+Ht+" = unpack_mix_"+or+"(a_"+Ht+", u_"+Ht+`_t);
#else
    `+Ut+" "+Zt+" "+Ht+" = u_"+Ht+`;
#endif
`}),staticAttributes:I,staticUniforms:re}}var Fd=Object.freeze({__proto__:null,prelude:bc,background:Sc,backgroundPattern:Rf,circle:Bl,clippingMask:Nl,heatmap:ql,heatmapTexture:Pu,collisionBox:Ec,collisionCircle:Sn,debug:Vi,fill:mv,fillOutline:nh,fillOutlinePattern:ac,fillPattern:ed,fillExtrusion:Vs,fillExtrusionPattern:wc,hillshadePrepare:zl,hillshade:Js,line:cu,lineGradient:El,linePattern:oc,lineSDF:Ul,raster:Cc,symbolIcon:Vc,symbolSDF:ih,symbolTextAndIcon:td}),Ih=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function lf(b){for(var T=[],C=0;C<b.length;C++)if(b[C]!==null){var I=b[C].split(" ");T.push(I.pop())}return T}Ih.prototype.bind=function(b,T,C,I,Z,q,re,_e){this.context=b;for(var qe=this.boundPaintVertexBuffers.length!==I.length,yt=0;!qe&&yt<I.length;yt++)this.boundPaintVertexBuffers[yt]!==I[yt]&&(qe=!0);b.extVertexArrayObject&&this.vao&&this.boundProgram===T&&this.boundLayoutVertexBuffer===C&&!qe&&this.boundIndexBuffer===Z&&this.boundVertexOffset===q&&this.boundDynamicVertexBuffer===re&&this.boundDynamicVertexBuffer2===_e?(b.bindVertexArrayOES.set(this.vao),re&&re.bind(),Z&&Z.dynamicDraw&&Z.bind(),_e&&_e.bind()):this.freshBind(T,C,I,Z,q,re,_e)},Ih.prototype.freshBind=function(b,T,C,I,Z,q,re){var _e,qe=b.numAttributes,yt=this.context,Ut=yt.gl;if(yt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=yt.extVertexArrayObject.createVertexArrayOES(),yt.bindVertexArrayOES.set(this.vao),_e=0,this.boundProgram=b,this.boundLayoutVertexBuffer=T,this.boundPaintVertexBuffers=C,this.boundIndexBuffer=I,this.boundVertexOffset=Z,this.boundDynamicVertexBuffer=q,this.boundDynamicVertexBuffer2=re;else{_e=yt.currentNumAttributes||0;for(var Zt=qe;Zt<_e;Zt++)Ut.disableVertexAttribArray(Zt)}T.enableAttributes(Ut,b);for(var Ht=0,sr=C;Ht<sr.length;Ht+=1)sr[Ht].enableAttributes(Ut,b);q&&q.enableAttributes(Ut,b),re&&re.enableAttributes(Ut,b),T.bind(),T.setVertexAttribPointers(Ut,b,Z);for(var or=0,Er=C;or<Er.length;or+=1){var rr=Er[or];rr.bind(),rr.setVertexAttribPointers(Ut,b,Z)}q&&(q.bind(),q.setVertexAttribPointers(Ut,b,Z)),I&&I.bind(),re&&(re.bind(),re.setVertexAttribPointers(Ut,b,Z)),yt.currentNumAttributes=qe},Ih.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ts=function(b,T,C,I,Z,q){var re=b.gl;this.program=re.createProgram();for(var _e=lf(C.staticAttributes),qe=I?I.getBinderAttributes():[],yt=_e.concat(qe),Ut=C.staticUniforms?lf(C.staticUniforms):[],Zt=I?I.getBinderUniforms():[],Ht=[],sr=0,or=Ut.concat(Zt);sr<or.length;sr+=1){var Er=or[sr];Ht.indexOf(Er)<0&&Ht.push(Er)}var rr=I?I.defines():[];q&&rr.push("#define OVERDRAW_INSPECTOR;");var wr=rr.concat(bc.fragmentSource,C.fragmentSource).join(`
`),Fr=rr.concat(bc.vertexSource,C.vertexSource).join(`
`),Wr=re.createShader(re.FRAGMENT_SHADER);if(re.isContextLost())this.failedToCreate=!0;else{re.shaderSource(Wr,wr),re.compileShader(Wr),re.attachShader(this.program,Wr);var hn=re.createShader(re.VERTEX_SHADER);if(re.isContextLost())this.failedToCreate=!0;else{re.shaderSource(hn,Fr),re.compileShader(hn),re.attachShader(this.program,hn),this.attributes={};var an={};this.numAttributes=yt.length;for(var bn=0;bn<this.numAttributes;bn++)yt[bn]&&(re.bindAttribLocation(this.program,bn,yt[bn]),this.attributes[yt[bn]]=bn);re.linkProgram(this.program),re.deleteShader(hn),re.deleteShader(Wr);for(var In=0;In<Ht.length;In++){var pi=Ht[In];if(pi&&!an[pi]){var ei=re.getUniformLocation(this.program,pi);ei&&(an[pi]=ei)}}this.fixedUniforms=Z(b,an),this.binderUniforms=I?I.getUniforms(b,an):[]}}};function hp(b,T,C){var I=1/_n(C,1,T.transform.tileZoom),Z=Math.pow(2,C.tileID.overscaledZ),q=C.tileSize*Math.pow(2,T.transform.tileZoom)/Z,re=q*(C.tileID.canonical.x+C.tileID.wrap*Z),_e=q*C.tileID.canonical.y;return{u_image:0,u_texsize:C.imageAtlasTexture.size,u_scale:[I,b.fromScale,b.toScale],u_fade:b.t,u_pixel_coord_upper:[re>>16,_e>>16],u_pixel_coord_lower:[65535&re,65535&_e]}}ts.prototype.draw=function(b,T,C,I,Z,q,re,_e,qe,yt,Ut,Zt,Ht,sr,or,Er){var rr,wr=b.gl;if(!this.failedToCreate){for(var Fr in b.program.set(this.program),b.setDepthMode(C),b.setStencilMode(I),b.setColorMode(Z),b.setCullFace(q),this.fixedUniforms)this.fixedUniforms[Fr].set(re[Fr]);sr&&sr.setUniforms(b,this.binderUniforms,Zt,{zoom:Ht});for(var Wr=(rr={},rr[wr.LINES]=2,rr[wr.TRIANGLES]=3,rr[wr.LINE_STRIP]=1,rr)[T],hn=0,an=Ut.get();hn<an.length;hn+=1){var bn=an[hn],In=bn.vaos||(bn.vaos={});(In[_e]||(In[_e]=new Ih)).bind(b,this,qe,sr?sr.getPaintVertexBuffers():[],yt,bn.vertexOffset,or,Er),wr.drawElements(T,bn.primitiveLength*Wr,wr.UNSIGNED_SHORT,bn.primitiveOffset*Wr*2)}}};var pp=function(b,T,C,I){var Z=T.style.light,q=Z.properties.get("position"),re=[q.x,q.y,q.z],_e=w.create$1();Z.properties.get("anchor")==="viewport"&&w.fromRotation(_e,-T.transform.angle),w.transformMat3(re,re,_e);var qe=Z.properties.get("color");return{u_matrix:b,u_lightpos:re,u_lightintensity:Z.properties.get("intensity"),u_lightcolor:[qe.r,qe.g,qe.b],u_vertical_gradient:+C,u_opacity:I}},Ou=function(b,T,C,I,Z,q,re){return w.extend(pp(b,T,C,I),hp(q,T,re),{u_height_factor:-Math.pow(2,Z.overscaledZ)/re.tileSize/8})},St=function(b){return{u_matrix:b}},cr=function(b,T,C,I){return w.extend(St(b),hp(C,T,I))},kr=function(b,T){return{u_matrix:b,u_world:T}},Hr=function(b,T,C,I,Z){return w.extend(cr(b,T,C,I),{u_world:Z})},An=function(b,T,C,I){var Z,q,re=b.transform;if(I.paint.get("circle-pitch-alignment")==="map"){var _e=_n(C,1,re.zoom);Z=!0,q=[_e,_e]}else Z=!1,q=re.pixelsToGLUnits;return{u_camera_to_center_distance:re.cameraToCenterDistance,u_scale_with_map:+(I.paint.get("circle-pitch-scale")==="map"),u_matrix:b.translatePosMatrix(T.posMatrix,C,I.paint.get("circle-translate"),I.paint.get("circle-translate-anchor")),u_pitch_with_map:+Z,u_device_pixel_ratio:w.browser.devicePixelRatio,u_extrude_scale:q}},di=function(b,T,C){var I=_n(C,1,T.zoom),Z=Math.pow(2,T.zoom-C.tileID.overscaledZ),q=C.tileID.overscaleFactor();return{u_matrix:b,u_camera_to_center_distance:T.cameraToCenterDistance,u_pixels_to_tile_units:I,u_extrude_scale:[T.pixelsToGLUnits[0]/(I*Z),T.pixelsToGLUnits[1]/(I*Z)],u_overscale_factor:q}},ua=function(b,T,C){return{u_matrix:b,u_inv_matrix:T,u_camera_to_center_distance:C.cameraToCenterDistance,u_viewport_size:[C.width,C.height]}},go=function(b,T,C){return C===void 0&&(C=1),{u_matrix:b,u_color:T,u_overlay:0,u_overlay_scale:C}},Is=function(b){return{u_matrix:b}},ll=function(b,T,C,I){return{u_matrix:b,u_extrude_scale:_n(T,1,C),u_intensity:I}},Ku=function(b,T,C){var I=b.transform;return{u_matrix:vp(b,T,C),u_ratio:1/_n(T,1,I.zoom),u_device_pixel_ratio:w.browser.devicePixelRatio,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]]}},Oo=function(b,T,C,I){return w.extend(Ku(b,T,C),{u_image:0,u_image_height:I})},dp=function(b,T,C,I){var Z=b.transform,q=Hc(T,Z);return{u_matrix:vp(b,T,C),u_texsize:T.imageAtlasTexture.size,u_ratio:1/_n(T,1,Z.zoom),u_device_pixel_ratio:w.browser.devicePixelRatio,u_image:0,u_scale:[q,I.fromScale,I.toScale],u_fade:I.t,u_units_to_pixels:[1/Z.pixelsToGLUnits[0],1/Z.pixelsToGLUnits[1]]}},Dd=function(b,T,C,I,Z){var q=b.lineAtlas,re=Hc(T,b.transform),_e=C.layout.get("line-cap")==="round",qe=q.getDash(I.from,_e),yt=q.getDash(I.to,_e),Ut=qe.width*Z.fromScale,Zt=yt.width*Z.toScale;return w.extend(Ku(b,T,C),{u_patternscale_a:[re/Ut,-qe.height/2],u_patternscale_b:[re/Zt,-yt.height/2],u_sdfgamma:q.width/(256*Math.min(Ut,Zt)*w.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:qe.y,u_tex_y_b:yt.y,u_mix:Z.t})};function Hc(b,T){return 1/_n(b,1,T.tileZoom)}function vp(b,T,C){return b.translatePosMatrix(T.tileID.posMatrix,T,C.paint.get("line-translate"),C.paint.get("line-translate-anchor"))}var cf=function(b,T,C,I,Z){return{u_matrix:b,u_tl_parent:T,u_scale_parent:C,u_buffer_scale:1,u_fade_t:I.mix,u_opacity:I.opacity*Z.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:Z.paint.get("raster-brightness-min"),u_brightness_high:Z.paint.get("raster-brightness-max"),u_saturation_factor:(re=Z.paint.get("raster-saturation"),re>0?1-1/(1.001-re):-re),u_contrast_factor:(q=Z.paint.get("raster-contrast"),q>0?1/(1-q):1+q),u_spin_weights:rd(Z.paint.get("raster-hue-rotate"))};var q,re};function rd(b){b*=Math.PI/180;var T=Math.sin(b),C=Math.cos(b);return[(2*C+1)/3,(-Math.sqrt(3)*T-C+1)/3,(Math.sqrt(3)*T-C+1)/3]}var wa,ff=function(b,T,C,I,Z,q,re,_e,qe,yt){var Ut=Z.transform;return{u_is_size_zoom_constant:+(b==="constant"||b==="source"),u_is_size_feature_constant:+(b==="constant"||b==="camera"),u_size_t:T?T.uSizeT:0,u_size:T?T.uSize:0,u_camera_to_center_distance:Ut.cameraToCenterDistance,u_pitch:Ut.pitch/360*2*Math.PI,u_rotate_symbol:+C,u_aspect_ratio:Ut.width/Ut.height,u_fade_change:Z.options.fadeDuration?Z.symbolFadeChange:1,u_matrix:q,u_label_plane_matrix:re,u_coord_matrix:_e,u_is_text:+qe,u_pitch_with_map:+I,u_texsize:yt,u_texture:0}},ah=function(b,T,C,I,Z,q,re,_e,qe,yt,Ut){var Zt=Z.transform;return w.extend(ff(b,T,C,I,Z,q,re,_e,qe,yt),{u_gamma_scale:I?Math.cos(Zt._pitch)*Zt.cameraToCenterDistance:1,u_device_pixel_ratio:w.browser.devicePixelRatio,u_is_halo:+Ut})},oh=function(b,T,C,I,Z,q,re,_e,qe,yt){return w.extend(ah(b,T,C,I,Z,q,re,_e,!0,qe,!0),{u_texsize_icon:yt,u_texture_icon:1})},If=function(b,T,C){return{u_matrix:b,u_opacity:T,u_color:C}},sh=function(b,T,C,I,Z,q){return w.extend(function(re,_e,qe,yt){var Ut=qe.imageManager.getPattern(re.from.toString()),Zt=qe.imageManager.getPattern(re.to.toString()),Ht=qe.imageManager.getPixelSize(),sr=Ht.width,or=Ht.height,Er=Math.pow(2,yt.tileID.overscaledZ),rr=yt.tileSize*Math.pow(2,qe.transform.tileZoom)/Er,wr=rr*(yt.tileID.canonical.x+yt.tileID.wrap*Er),Fr=rr*yt.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ut.tl,u_pattern_br_a:Ut.br,u_pattern_tl_b:Zt.tl,u_pattern_br_b:Zt.br,u_texsize:[sr,or],u_mix:_e.t,u_pattern_size_a:Ut.displaySize,u_pattern_size_b:Zt.displaySize,u_scale_a:_e.fromScale,u_scale_b:_e.toScale,u_tile_units_to_pixels:1/_n(yt,1,qe.transform.tileZoom),u_pixel_coord_upper:[wr>>16,Fr>>16],u_pixel_coord_lower:[65535&wr,65535&Fr]}}(I,q,C,Z),{u_matrix:b,u_opacity:T})},Ns={fillExtrusion:function(b,T){return{u_matrix:new w.UniformMatrix4f(b,T.u_matrix),u_lightpos:new w.Uniform3f(b,T.u_lightpos),u_lightintensity:new w.Uniform1f(b,T.u_lightintensity),u_lightcolor:new w.Uniform3f(b,T.u_lightcolor),u_vertical_gradient:new w.Uniform1f(b,T.u_vertical_gradient),u_opacity:new w.Uniform1f(b,T.u_opacity)}},fillExtrusionPattern:function(b,T){return{u_matrix:new w.UniformMatrix4f(b,T.u_matrix),u_lightpos:new w.Uniform3f(b,T.u_lightpos),u_lightintensity:new w.Uniform1f(b,T.u_lightintensity),u_lightcolor:new w.Uniform3f(b,T.u_lightcolor),u_vertical_gradient:new w.Uniform1f(b,T.u_vertical_gradient),u_height_factor:new w.Uniform1f(b,T.u_height_factor),u_image:new w.Uniform1i(b,T.u_image),u_texsize:new w.Uniform2f(b,T.u_texsize),u_pixel_coord_upper:new w.Uniform2f(b,T.u_pixel_coord_upper),u_pixel_coord_lower:new w.Uniform2f(b,T.u_pixel_coord_lower),u_scale:new w.Uniform3f(b,T.u_scale),u_fade:new w.Uniform1f(b,T.u_fade),u_opacity:new w.Uniform1f(b,T.u_opacity)}},fill:function(b,T){return{u_matrix:new w.UniformMatrix4f(b,T.u_matrix)}},fillPattern:function(b,T){return{u_matrix:new w.UniformMatrix4f(b,T.u_matrix),u_image:new w.Uniform1i(b,T.u_image),u_texsize:new w.Uniform2f(b,T.u_texsize),u_pixel_coord_upper:new w.Uniform2f(b,T.u_pixel_coord_upper),u_pixel_coord_lower:new w.Uniform2f(b,T.u_pixel_coord_lower),u_scale:new w.Uniform3f(b,T.u_scale),u_fade:new w.Uniform1f(b,T.u_fade)}},fillOutline:function(b,T){return{u_matrix:new w.UniformMatrix4f(b,T.u_matrix),u_world:new w.Uniform2f(b,T.u_world)}},fillOutlinePattern:function(b,T){return{u_matrix:new w.UniformMatrix4f(b,T.u_matrix),u_world:new w.Uniform2f(b,T.u_world),u_image:new w.Uniform1i(b,T.u_image),u_texsize:new w.Uniform2f(b,T.u_texsize),u_pixel_coord_upper:new w.Uniform2f(b,T.u_pixel_coord_upper),u_pixel_coord_lower:new w.Uniform2f(b,T.u_pixel_coord_lower),u_scale:new w.Uniform3f(b,T.u_scale),u_fade:new w.Uniform1f(b,T.u_fade)}},circle:function(b,T){return{u_camera_to_center_distance:new w.Uniform1f(b,T.u_camera_to_center_distance),u_scale_with_map:new w.Uniform1i(b,T.u_scale_with_map),u_pitch_with_map:new w.Uniform1i(b,T.u_pitch_with_map),u_extrude_scale:new w.Uniform2f(b,T.u_extrude_scale),u_device_pixel_ratio:new w.Uniform1f(b,T.u_device_pixel_ratio),u_matrix:new w.UniformMatrix4f(b,T.u_matrix)}},collisionBox:function(b,T){return{u_matrix:new w.UniformMatrix4f(b,T.u_matrix),u_camera_to_center_distance:new w.Uniform1f(b,T.u_camera_to_center_distance),u_pixels_to_tile_units:new w.Uniform1f(b,T.u_pixels_to_tile_units),u_extrude_scale:new w.Uniform2f(b,T.u_extrude_scale),u_overscale_factor:new w.Uniform1f(b,T.u_overscale_factor)}},collisionCircle:function(b,T){return{u_matrix:new w.UniformMatrix4f(b,T.u_matrix),u_inv_matrix:new w.UniformMatrix4f(b,T.u_inv_matrix),u_camera_to_center_distance:new w.Uniform1f(b,T.u_camera_to_center_distance),u_viewport_size:new w.Uniform2f(b,T.u_viewport_size)}},debug:function(b,T){return{u_color:new w.UniformColor(b,T.u_color),u_matrix:new w.UniformMatrix4f(b,T.u_matrix),u_overlay:new w.Uniform1i(b,T.u_overlay),u_overlay_scale:new w.Uniform1f(b,T.u_overlay_scale)}},clippingMask:function(b,T){return{u_matrix:new w.UniformMatrix4f(b,T.u_matrix)}},heatmap:function(b,T){return{u_extrude_scale:new w.Uniform1f(b,T.u_extrude_scale),u_intensity:new w.Uniform1f(b,T.u_intensity),u_matrix:new w.UniformMatrix4f(b,T.u_matrix)}},heatmapTexture:function(b,T){return{u_matrix:new w.UniformMatrix4f(b,T.u_matrix),u_world:new w.Uniform2f(b,T.u_world),u_image:new w.Uniform1i(b,T.u_image),u_color_ramp:new w.Uniform1i(b,T.u_color_ramp),u_opacity:new w.Uniform1f(b,T.u_opacity)}},hillshade:function(b,T){return{u_matrix:new w.UniformMatrix4f(b,T.u_matrix),u_image:new w.Uniform1i(b,T.u_image),u_latrange:new w.Uniform2f(b,T.u_latrange),u_light:new w.Uniform2f(b,T.u_light),u_shadow:new w.UniformColor(b,T.u_shadow),u_highlight:new w.UniformColor(b,T.u_highlight),u_accent:new w.UniformColor(b,T.u_accent)}},hillshadePrepare:function(b,T){return{u_matrix:new w.UniformMatrix4f(b,T.u_matrix),u_image:new w.Uniform1i(b,T.u_image),u_dimension:new w.Uniform2f(b,T.u_dimension),u_zoom:new w.Uniform1f(b,T.u_zoom),u_unpack:new w.Uniform4f(b,T.u_unpack)}},line:function(b,T){return{u_matrix:new w.UniformMatrix4f(b,T.u_matrix),u_ratio:new w.Uniform1f(b,T.u_ratio),u_device_pixel_ratio:new w.Uniform1f(b,T.u_device_pixel_ratio),u_units_to_pixels:new w.Uniform2f(b,T.u_units_to_pixels)}},lineGradient:function(b,T){return{u_matrix:new w.UniformMatrix4f(b,T.u_matrix),u_ratio:new w.Uniform1f(b,T.u_ratio),u_device_pixel_ratio:new w.Uniform1f(b,T.u_device_pixel_ratio),u_units_to_pixels:new w.Uniform2f(b,T.u_units_to_pixels),u_image:new w.Uniform1i(b,T.u_image),u_image_height:new w.Uniform1f(b,T.u_image_height)}},linePattern:function(b,T){return{u_matrix:new w.UniformMatrix4f(b,T.u_matrix),u_texsize:new w.Uniform2f(b,T.u_texsize),u_ratio:new w.Uniform1f(b,T.u_ratio),u_device_pixel_ratio:new w.Uniform1f(b,T.u_device_pixel_ratio),u_image:new w.Uniform1i(b,T.u_image),u_units_to_pixels:new w.Uniform2f(b,T.u_units_to_pixels),u_scale:new w.Uniform3f(b,T.u_scale),u_fade:new w.Uniform1f(b,T.u_fade)}},lineSDF:function(b,T){return{u_matrix:new w.UniformMatrix4f(b,T.u_matrix),u_ratio:new w.Uniform1f(b,T.u_ratio),u_device_pixel_ratio:new w.Uniform1f(b,T.u_device_pixel_ratio),u_units_to_pixels:new w.Uniform2f(b,T.u_units_to_pixels),u_patternscale_a:new w.Uniform2f(b,T.u_patternscale_a),u_patternscale_b:new w.Uniform2f(b,T.u_patternscale_b),u_sdfgamma:new w.Uniform1f(b,T.u_sdfgamma),u_image:new w.Uniform1i(b,T.u_image),u_tex_y_a:new w.Uniform1f(b,T.u_tex_y_a),u_tex_y_b:new w.Uniform1f(b,T.u_tex_y_b),u_mix:new w.Uniform1f(b,T.u_mix)}},raster:function(b,T){return{u_matrix:new w.UniformMatrix4f(b,T.u_matrix),u_tl_parent:new w.Uniform2f(b,T.u_tl_parent),u_scale_parent:new w.Uniform1f(b,T.u_scale_parent),u_buffer_scale:new w.Uniform1f(b,T.u_buffer_scale),u_fade_t:new w.Uniform1f(b,T.u_fade_t),u_opacity:new w.Uniform1f(b,T.u_opacity),u_image0:new w.Uniform1i(b,T.u_image0),u_image1:new w.Uniform1i(b,T.u_image1),u_brightness_low:new w.Uniform1f(b,T.u_brightness_low),u_brightness_high:new w.Uniform1f(b,T.u_brightness_high),u_saturation_factor:new w.Uniform1f(b,T.u_saturation_factor),u_contrast_factor:new w.Uniform1f(b,T.u_contrast_factor),u_spin_weights:new w.Uniform3f(b,T.u_spin_weights)}},symbolIcon:function(b,T){return{u_is_size_zoom_constant:new w.Uniform1i(b,T.u_is_size_zoom_constant),u_is_size_feature_constant:new w.Uniform1i(b,T.u_is_size_feature_constant),u_size_t:new w.Uniform1f(b,T.u_size_t),u_size:new w.Uniform1f(b,T.u_size),u_camera_to_center_distance:new w.Uniform1f(b,T.u_camera_to_center_distance),u_pitch:new w.Uniform1f(b,T.u_pitch),u_rotate_symbol:new w.Uniform1i(b,T.u_rotate_symbol),u_aspect_ratio:new w.Uniform1f(b,T.u_aspect_ratio),u_fade_change:new w.Uniform1f(b,T.u_fade_change),u_matrix:new w.UniformMatrix4f(b,T.u_matrix),u_label_plane_matrix:new w.UniformMatrix4f(b,T.u_label_plane_matrix),u_coord_matrix:new w.UniformMatrix4f(b,T.u_coord_matrix),u_is_text:new w.Uniform1i(b,T.u_is_text),u_pitch_with_map:new w.Uniform1i(b,T.u_pitch_with_map),u_texsize:new w.Uniform2f(b,T.u_texsize),u_texture:new w.Uniform1i(b,T.u_texture)}},symbolSDF:function(b,T){return{u_is_size_zoom_constant:new w.Uniform1i(b,T.u_is_size_zoom_constant),u_is_size_feature_constant:new w.Uniform1i(b,T.u_is_size_feature_constant),u_size_t:new w.Uniform1f(b,T.u_size_t),u_size:new w.Uniform1f(b,T.u_size),u_camera_to_center_distance:new w.Uniform1f(b,T.u_camera_to_center_distance),u_pitch:new w.Uniform1f(b,T.u_pitch),u_rotate_symbol:new w.Uniform1i(b,T.u_rotate_symbol),u_aspect_ratio:new w.Uniform1f(b,T.u_aspect_ratio),u_fade_change:new w.Uniform1f(b,T.u_fade_change),u_matrix:new w.UniformMatrix4f(b,T.u_matrix),u_label_plane_matrix:new w.UniformMatrix4f(b,T.u_label_plane_matrix),u_coord_matrix:new w.UniformMatrix4f(b,T.u_coord_matrix),u_is_text:new w.Uniform1i(b,T.u_is_text),u_pitch_with_map:new w.Uniform1i(b,T.u_pitch_with_map),u_texsize:new w.Uniform2f(b,T.u_texsize),u_texture:new w.Uniform1i(b,T.u_texture),u_gamma_scale:new w.Uniform1f(b,T.u_gamma_scale),u_device_pixel_ratio:new w.Uniform1f(b,T.u_device_pixel_ratio),u_is_halo:new w.Uniform1i(b,T.u_is_halo)}},symbolTextAndIcon:function(b,T){return{u_is_size_zoom_constant:new w.Uniform1i(b,T.u_is_size_zoom_constant),u_is_size_feature_constant:new w.Uniform1i(b,T.u_is_size_feature_constant),u_size_t:new w.Uniform1f(b,T.u_size_t),u_size:new w.Uniform1f(b,T.u_size),u_camera_to_center_distance:new w.Uniform1f(b,T.u_camera_to_center_distance),u_pitch:new w.Uniform1f(b,T.u_pitch),u_rotate_symbol:new w.Uniform1i(b,T.u_rotate_symbol),u_aspect_ratio:new w.Uniform1f(b,T.u_aspect_ratio),u_fade_change:new w.Uniform1f(b,T.u_fade_change),u_matrix:new w.UniformMatrix4f(b,T.u_matrix),u_label_plane_matrix:new w.UniformMatrix4f(b,T.u_label_plane_matrix),u_coord_matrix:new w.UniformMatrix4f(b,T.u_coord_matrix),u_is_text:new w.Uniform1i(b,T.u_is_text),u_pitch_with_map:new w.Uniform1i(b,T.u_pitch_with_map),u_texsize:new w.Uniform2f(b,T.u_texsize),u_texsize_icon:new w.Uniform2f(b,T.u_texsize_icon),u_texture:new w.Uniform1i(b,T.u_texture),u_texture_icon:new w.Uniform1i(b,T.u_texture_icon),u_gamma_scale:new w.Uniform1f(b,T.u_gamma_scale),u_device_pixel_ratio:new w.Uniform1f(b,T.u_device_pixel_ratio),u_is_halo:new w.Uniform1i(b,T.u_is_halo)}},background:function(b,T){return{u_matrix:new w.UniformMatrix4f(b,T.u_matrix),u_opacity:new w.Uniform1f(b,T.u_opacity),u_color:new w.UniformColor(b,T.u_color)}},backgroundPattern:function(b,T){return{u_matrix:new w.UniformMatrix4f(b,T.u_matrix),u_opacity:new w.Uniform1f(b,T.u_opacity),u_image:new w.Uniform1i(b,T.u_image),u_pattern_tl_a:new w.Uniform2f(b,T.u_pattern_tl_a),u_pattern_br_a:new w.Uniform2f(b,T.u_pattern_br_a),u_pattern_tl_b:new w.Uniform2f(b,T.u_pattern_tl_b),u_pattern_br_b:new w.Uniform2f(b,T.u_pattern_br_b),u_texsize:new w.Uniform2f(b,T.u_texsize),u_mix:new w.Uniform1f(b,T.u_mix),u_pattern_size_a:new w.Uniform2f(b,T.u_pattern_size_a),u_pattern_size_b:new w.Uniform2f(b,T.u_pattern_size_b),u_scale_a:new w.Uniform1f(b,T.u_scale_a),u_scale_b:new w.Uniform1f(b,T.u_scale_b),u_pixel_coord_upper:new w.Uniform2f(b,T.u_pixel_coord_upper),u_pixel_coord_lower:new w.Uniform2f(b,T.u_pixel_coord_lower),u_tile_units_to_pixels:new w.Uniform1f(b,T.u_tile_units_to_pixels)}}};function sc(b,T,C,I,Z,q,re){for(var _e=b.context,qe=_e.gl,yt=b.useProgram("collisionBox"),Ut=[],Zt=0,Ht=0,sr=0;sr<I.length;sr++){var or=I[sr],Er=T.getTile(or),rr=Er.getBucket(C);if(rr){var wr=or.posMatrix;Z[0]===0&&Z[1]===0||(wr=b.translatePosMatrix(or.posMatrix,Er,Z,q));var Fr=re?rr.textCollisionBox:rr.iconCollisionBox,Wr=rr.collisionCircleArray;if(Wr.length>0){var hn=w.create(),an=wr;w.mul(hn,rr.placementInvProjMatrix,b.transform.glCoordMatrix),w.mul(hn,hn,rr.placementViewportMatrix),Ut.push({circleArray:Wr,circleOffset:Ht,transform:an,invTransform:hn}),Ht=Zt+=Wr.length/4}Fr&&yt.draw(_e,qe.LINES,Pt.disabled,jt.disabled,b.colorModeForRenderPass(),Cr.disabled,di(wr,b.transform,Er),C.id,Fr.layoutVertexBuffer,Fr.indexBuffer,Fr.segments,null,b.transform.zoom,null,null,Fr.collisionVertexBuffer)}}if(re&&Ut.length){var bn=b.useProgram("collisionCircle"),In=new w.StructArrayLayout2f1f2i16;In.resize(4*Zt),In._trim();for(var pi=0,ei=0,Ii=Ut;ei<Ii.length;ei+=1)for(var ia=Ii[ei],la=0;la<ia.circleArray.length/4;la++){var Ki=4*la,bo=ia.circleArray[Ki+0],Ni=ia.circleArray[Ki+1],Oa=ia.circleArray[Ki+2],La=ia.circleArray[Ki+3];In.emplace(pi++,bo,Ni,Oa,La,0),In.emplace(pi++,bo,Ni,Oa,La,1),In.emplace(pi++,bo,Ni,Oa,La,2),In.emplace(pi++,bo,Ni,Oa,La,3)}(!wa||wa.length<2*Zt)&&(wa=function(ks){var Xu=2*ks,wu=new w.StructArrayLayout3ui6;wu.resize(Xu),wu._trim();for(var Qo=0;Qo<Xu;Qo++){var vs=6*Qo;wu.uint16[vs+0]=4*Qo+0,wu.uint16[vs+1]=4*Qo+1,wu.uint16[vs+2]=4*Qo+2,wu.uint16[vs+3]=4*Qo+2,wu.uint16[vs+4]=4*Qo+3,wu.uint16[vs+5]=4*Qo+0}return wu}(Zt));for(var Ia=_e.createIndexBuffer(wa,!0),fa=_e.createVertexBuffer(In,w.collisionCircleLayout.members,!0),Pa=0,Ca=Ut;Pa<Ca.length;Pa+=1){var pa=Ca[Pa],Eu=ua(pa.transform,pa.invTransform,b.transform);bn.draw(_e,qe.TRIANGLES,Pt.disabled,jt.disabled,b.colorModeForRenderPass(),Cr.disabled,Eu,C.id,fa,Ia,w.SegmentVector.simpleSegment(0,2*pa.circleOffset,pa.circleArray.length,pa.circleArray.length/2),null,b.transform.zoom,null,null,null)}fa.destroy(),Ia.destroy()}}var qu=w.identity(new Float32Array(16));function gp(b,T,C,I,Z,q){var re=w.getAnchorAlignment(b),_e=-(re.horizontalAlign-.5)*T,qe=-(re.verticalAlign-.5)*C,yt=w.evaluateVariableOffset(b,I);return new w.Point((_e/Z+yt[0])*q,(qe/Z+yt[1])*q)}function Ld(b,T,C,I,Z,q,re,_e,qe,yt,Ut){var Zt=b.text.placedSymbolArray,Ht=b.text.dynamicLayoutVertexArray,sr=b.icon.dynamicLayoutVertexArray,or={};Ht.clear();for(var Er=0;Er<Zt.length;Er++){var rr=Zt.get(Er),wr=rr.hidden||!rr.crossTileID||b.allowVerticalPlacement&&!rr.placedOrientation?null:I[rr.crossTileID];if(wr){var Fr=new w.Point(rr.anchorX,rr.anchorY),Wr=_i(Fr,C?_e:re),hn=na(q.cameraToCenterDistance,Wr.signedDistanceFromCamera),an=Z.evaluateSizeForFeature(b.textSizeData,yt,rr)*hn/w.ONE_EM;C&&(an*=b.tilePixelRatio/qe);for(var bn=gp(wr.anchor,wr.width,wr.height,wr.textOffset,wr.textBoxScale,an),In=C?_i(Fr.add(bn),re).point:Wr.point.add(T?bn.rotate(-q.angle):bn),pi=b.allowVerticalPlacement&&rr.placedOrientation===w.WritingMode.vertical?Math.PI/2:0,ei=0;ei<rr.numGlyphs;ei++)w.addDynamicAttributes(Ht,In,pi);Ut&&rr.associatedIconIndex>=0&&(or[rr.associatedIconIndex]={shiftedAnchor:In,angle:pi})}else Gr(rr.numGlyphs,Ht)}if(Ut){sr.clear();for(var Ii=b.icon.placedSymbolArray,ia=0;ia<Ii.length;ia++){var la=Ii.get(ia);if(la.hidden)Gr(la.numGlyphs,sr);else{var Ki=or[ia];if(Ki)for(var bo=0;bo<la.numGlyphs;bo++)w.addDynamicAttributes(sr,Ki.shiftedAnchor,Ki.angle);else Gr(la.numGlyphs,sr)}}b.icon.dynamicLayoutVertexBuffer.updateData(sr)}b.text.dynamicLayoutVertexBuffer.updateData(Ht)}function nd(b,T,C){return C.iconsInText&&T?"symbolTextAndIcon":b?"symbolSDF":"symbolIcon"}function jc(b,T,C,I,Z,q,re,_e,qe,yt,Ut,Zt){for(var Ht=b.context,sr=Ht.gl,or=b.transform,Er=_e==="map",rr=qe==="map",wr=Er&&C.layout.get("symbol-placement")!=="point",Fr=Er&&!rr&&!wr,Wr=C.layout.get("symbol-sort-key").constantOr(1)!==void 0,hn=!1,an=b.depthModeForSublayer(0,Pt.ReadOnly),bn=C.layout.get("text-variable-anchor"),In=[],pi=0,ei=I;pi<ei.length;pi+=1){var Ii=ei[pi],ia=T.getTile(Ii),la=ia.getBucket(C);if(la){var Ki=Z?la.text:la.icon;if(Ki&&Ki.segments.get().length){var bo=Ki.programConfigurations.get(C.id),Ni=Z||la.sdfIcons,Oa=Z?la.textSizeData:la.iconSizeData,La=rr||or.pitch!==0,Ia=b.useProgram(nd(Ni,Z,la),bo),fa=w.evaluateSizeForZoom(Oa,or.zoom),Pa=void 0,Ca=[0,0],pa=void 0,Eu=void 0,ks=null,Xu=void 0;if(Z)pa=ia.glyphAtlasTexture,Eu=sr.LINEAR,Pa=ia.glyphAtlasTexture.size,la.iconsInText&&(Ca=ia.imageAtlasTexture.size,ks=ia.imageAtlasTexture,Xu=La||b.options.rotating||b.options.zooming||Oa.kind==="composite"||Oa.kind==="camera"?sr.LINEAR:sr.NEAREST);else{var wu=C.layout.get("icon-size").constantOr(0)!==1||la.iconsNeedLinear;pa=ia.imageAtlasTexture,Eu=Ni||b.options.rotating||b.options.zooming||wu||La?sr.LINEAR:sr.NEAREST,Pa=ia.imageAtlasTexture.size}var Qo=_n(ia,1,b.transform.zoom),vs=Ro(Ii.posMatrix,rr,Er,b.transform,Qo),Cu=Jn(Ii.posMatrix,rr,Er,b.transform,Qo),hu=bn&&la.hasTextData(),Kc=C.layout.get("icon-text-fit")!=="none"&&hu&&la.hasIconData();wr&&ps(la,Ii.posMatrix,b,Z,vs,Cu,rr,yt);var el=b.translatePosMatrix(Ii.posMatrix,ia,q,re),hc=wr||Z&&bn||Kc?qu:vs,hl=b.translatePosMatrix(Cu,ia,q,re,!0),Nf=Ni&&C.paint.get(Z?"text-halo-width":"icon-halo-width").constantOr(1)!==0,pf={program:Ia,buffers:Ki,uniformValues:Ni?la.iconsInText?oh(Oa.kind,fa,Fr,rr,b,el,hc,hl,Pa,Ca):ah(Oa.kind,fa,Fr,rr,b,el,hc,hl,Z,Pa,!0):ff(Oa.kind,fa,Fr,rr,b,el,hc,hl,Z,Pa),atlasTexture:pa,atlasTextureIcon:ks,atlasInterpolation:Eu,atlasInterpolationIcon:Xu,isSDF:Ni,hasHalo:Nf};if(Wr&&la.canOverlap){hn=!0;for(var qc=0,df=Ki.segments.get();qc<df.length;qc+=1){var pc=df[qc];In.push({segments:new w.SegmentVector([pc]),sortKey:pc.sortKey,state:pf})}}else In.push({segments:Ki.segments,sortKey:0,state:pf})}}}hn&&In.sort(function(Al,Jl){return Al.sortKey-Jl.sortKey});for(var dc=0,vf=In;dc<vf.length;dc+=1){var ku=vf[dc],Ts=ku.state;if(Ht.activeTexture.set(sr.TEXTURE0),Ts.atlasTexture.bind(Ts.atlasInterpolation,sr.CLAMP_TO_EDGE),Ts.atlasTextureIcon&&(Ht.activeTexture.set(sr.TEXTURE1),Ts.atlasTextureIcon&&Ts.atlasTextureIcon.bind(Ts.atlasInterpolationIcon,sr.CLAMP_TO_EDGE)),Ts.isSDF){var ru=Ts.uniformValues;Ts.hasHalo&&(ru.u_is_halo=1,hf(Ts.buffers,ku.segments,C,b,Ts.program,an,Ut,Zt,ru)),ru.u_is_halo=0}hf(Ts.buffers,ku.segments,C,b,Ts.program,an,Ut,Zt,Ts.uniformValues)}}function hf(b,T,C,I,Z,q,re,_e,qe){var yt=I.context;Z.draw(yt,yt.gl.TRIANGLES,q,re,_e,Cr.disabled,qe,C.id,b.layoutVertexBuffer,b.indexBuffer,T,C.paint,I.transform.zoom,b.programConfigurations.get(C.id),b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer)}function uh(b,T,C,I,Z,q,re){var _e,qe,yt,Ut,Zt,Ht=b.context.gl,sr=C.paint.get("fill-pattern"),or=sr&&sr.constantOr(1),Er=C.getCrossfadeParameters();re?(qe=or&&!C.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",_e=Ht.LINES):(qe=or?"fillPattern":"fill",_e=Ht.TRIANGLES);for(var rr=0,wr=I;rr<wr.length;rr+=1){var Fr=wr[rr],Wr=T.getTile(Fr);if(!or||Wr.patternsLoaded()){var hn=Wr.getBucket(C);if(hn){var an=hn.programConfigurations.get(C.id),bn=b.useProgram(qe,an);or&&(b.context.activeTexture.set(Ht.TEXTURE0),Wr.imageAtlasTexture.bind(Ht.LINEAR,Ht.CLAMP_TO_EDGE),an.updatePaintBuffers(Er));var In=sr.constantOr(null);if(In&&Wr.imageAtlas){var pi=Wr.imageAtlas,ei=pi.patternPositions[In.to.toString()],Ii=pi.patternPositions[In.from.toString()];ei&&Ii&&an.setConstantPatternPositions(ei,Ii)}var ia=b.translatePosMatrix(Fr.posMatrix,Wr,C.paint.get("fill-translate"),C.paint.get("fill-translate-anchor"));if(re){Ut=hn.indexBuffer2,Zt=hn.segments2;var la=[Ht.drawingBufferWidth,Ht.drawingBufferHeight];yt=qe==="fillOutlinePattern"&&or?Hr(ia,b,Er,Wr,la):kr(ia,la)}else Ut=hn.indexBuffer,Zt=hn.segments,yt=or?cr(ia,b,Er,Wr):St(ia);bn.draw(b.context,_e,Z,b.stencilModeForClipping(Fr),q,Cr.disabled,yt,C.id,hn.layoutVertexBuffer,Ut,Zt,C.paint,b.transform.zoom,an)}}}}function mp(b,T,C,I,Z,q,re){for(var _e=b.context,qe=_e.gl,yt=C.paint.get("fill-extrusion-pattern"),Ut=yt.constantOr(1),Zt=C.getCrossfadeParameters(),Ht=C.paint.get("fill-extrusion-opacity"),sr=0,or=I;sr<or.length;sr+=1){var Er=or[sr],rr=T.getTile(Er),wr=rr.getBucket(C);if(wr){var Fr=wr.programConfigurations.get(C.id),Wr=b.useProgram(Ut?"fillExtrusionPattern":"fillExtrusion",Fr);Ut&&(b.context.activeTexture.set(qe.TEXTURE0),rr.imageAtlasTexture.bind(qe.LINEAR,qe.CLAMP_TO_EDGE),Fr.updatePaintBuffers(Zt));var hn=yt.constantOr(null);if(hn&&rr.imageAtlas){var an=rr.imageAtlas,bn=an.patternPositions[hn.to.toString()],In=an.patternPositions[hn.from.toString()];bn&&In&&Fr.setConstantPatternPositions(bn,In)}var pi=b.translatePosMatrix(Er.posMatrix,rr,C.paint.get("fill-extrusion-translate"),C.paint.get("fill-extrusion-translate-anchor")),ei=C.paint.get("fill-extrusion-vertical-gradient"),Ii=Ut?Ou(pi,b,ei,Ht,Er,Zt,rr):pp(pi,b,ei,Ht);Wr.draw(_e,_e.gl.TRIANGLES,Z,q,re,Cr.backCCW,Ii,C.id,wr.layoutVertexBuffer,wr.indexBuffer,wr.segments,C.paint,b.transform.zoom,Fr)}}}function Pf(b,T,C,I,Z,q){var re=b.context,_e=re.gl,qe=T.fbo;if(qe){var yt=b.useProgram("hillshade");re.activeTexture.set(_e.TEXTURE0),_e.bindTexture(_e.TEXTURE_2D,qe.colorAttachment.get());var Ut=function(Zt,Ht,sr){var or=sr.paint.get("hillshade-shadow-color"),Er=sr.paint.get("hillshade-highlight-color"),rr=sr.paint.get("hillshade-accent-color"),wr=sr.paint.get("hillshade-illumination-direction")*(Math.PI/180);sr.paint.get("hillshade-illumination-anchor")==="viewport"&&(wr-=Zt.transform.angle);var Fr,Wr,hn,an=!Zt.options.moving;return{u_matrix:Zt.transform.calculatePosMatrix(Ht.tileID.toUnwrapped(),an),u_image:0,u_latrange:(Fr=Ht.tileID,Wr=Math.pow(2,Fr.canonical.z),hn=Fr.canonical.y,[new w.MercatorCoordinate(0,hn/Wr).toLngLat().lat,new w.MercatorCoordinate(0,(hn+1)/Wr).toLngLat().lat]),u_light:[sr.paint.get("hillshade-exaggeration"),wr],u_shadow:or,u_highlight:Er,u_accent:rr}}(b,T,C);yt.draw(re,_e.TRIANGLES,I,Z,q,Cr.disabled,Ut,C.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}}function fm(b,T,C,I,Z,q){var re=b.context,_e=re.gl,qe=T.dem;if(qe&&qe.data){var yt=qe.dim,Ut=qe.stride,Zt=qe.getPixels();if(re.activeTexture.set(_e.TEXTURE1),re.pixelStoreUnpackPremultiplyAlpha.set(!1),T.demTexture=T.demTexture||b.getTileTexture(Ut),T.demTexture){var Ht=T.demTexture;Ht.update(Zt,{premultiply:!1}),Ht.bind(_e.NEAREST,_e.CLAMP_TO_EDGE)}else T.demTexture=new w.Texture(re,Zt,_e.RGBA,{premultiply:!1}),T.demTexture.bind(_e.NEAREST,_e.CLAMP_TO_EDGE);re.activeTexture.set(_e.TEXTURE0);var sr=T.fbo;if(!sr){var or=new w.Texture(re,{width:yt,height:yt,data:null},_e.RGBA);or.bind(_e.LINEAR,_e.CLAMP_TO_EDGE),(sr=T.fbo=re.createFramebuffer(yt,yt,!0)).colorAttachment.set(or.texture)}re.bindFramebuffer.set(sr.framebuffer),re.viewport.set([0,0,yt,yt]),b.useProgram("hillshadePrepare").draw(re,_e.TRIANGLES,I,Z,q,Cr.disabled,function(Er,rr){var wr=rr.stride,Fr=w.create();return w.ortho(Fr,0,w.EXTENT,-w.EXTENT,0,0,1),w.translate(Fr,Fr,[0,-w.EXTENT,0]),{u_matrix:Fr,u_image:1,u_dimension:[wr,wr],u_zoom:Er.overscaledZ,u_unpack:rr.getUnpackVector()}}(T.tileID,qe),C.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments),T.needsHillshadePrepare=!1}}function id(b,T,C,I,Z){var q=I.paint.get("raster-fade-duration");if(q>0){var re=w.browser.now(),_e=(re-b.timeAdded)/q,qe=T?(re-T.timeAdded)/q:-1,yt=C.getSource(),Ut=Z.coveringZoomLevel({tileSize:yt.tileSize,roundZoom:yt.roundZoom}),Zt=!T||Math.abs(T.tileID.overscaledZ-Ut)>Math.abs(b.tileID.overscaledZ-Ut),Ht=Zt&&b.refreshedUponExpiration?1:w.clamp(Zt?_e:1-qe,0,1);return b.refreshedUponExpiration&&_e>=1&&(b.refreshedUponExpiration=!1),T?{opacity:1,mix:1-Ht}:{opacity:Ht,mix:0}}return{opacity:1,mix:0}}var Ps=new w.Color(1,0,0,1),yp=new w.Color(0,1,0,1),Ph=new w.Color(0,0,1,1),Bd=new w.Color(1,0,1,1),_p=new w.Color(0,1,1,1);function xp(b,T,C,I){Wc(b,0,T+C/2,b.transform.width,C,I)}function yv(b,T,C,I){Wc(b,T-C/2,0,C,b.transform.height,I)}function Wc(b,T,C,I,Z,q){var re=b.context,_e=re.gl;_e.enable(_e.SCISSOR_TEST),_e.scissor(T*w.browser.devicePixelRatio,C*w.browser.devicePixelRatio,I*w.browser.devicePixelRatio,Z*w.browser.devicePixelRatio),re.clear({color:q}),_e.disable(_e.SCISSOR_TEST)}function Nd(b,T,C){var I=b.context,Z=I.gl,q=C.posMatrix,re=b.useProgram("debug"),_e=Pt.disabled,qe=jt.disabled,yt=b.colorModeForRenderPass();I.activeTexture.set(Z.TEXTURE0),b.emptyTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),re.draw(I,Z.LINE_STRIP,_e,qe,yt,Cr.disabled,go(q,w.Color.red),"$debug",b.debugBuffer,b.tileBorderIndexBuffer,b.debugSegments);var Ut=T.getTileByID(C.key).latestRawTileData,Zt=Math.floor((Ut&&Ut.byteLength||0)/1024),Ht=T.getTile(C).tileSize,sr=512/Math.min(Ht,512)*(C.overscaledZ/b.transform.zoom)*.5,or=C.canonical.toString();C.overscaledZ!==C.canonical.z&&(or+=" => "+C.overscaledZ),function(Er,rr){Er.initDebugOverlayCanvas();var wr=Er.debugOverlayCanvas,Fr=Er.context.gl,Wr=Er.debugOverlayCanvas.getContext("2d");Wr.clearRect(0,0,wr.width,wr.height),Wr.shadowColor="white",Wr.shadowBlur=2,Wr.lineWidth=1.5,Wr.strokeStyle="white",Wr.textBaseline="top",Wr.font="bold 36px Open Sans, sans-serif",Wr.fillText(rr,5,5),Wr.strokeText(rr,5,5),Er.debugOverlayTexture.update(wr),Er.debugOverlayTexture.bind(Fr.LINEAR,Fr.CLAMP_TO_EDGE)}(b,or+" "+Zt+"kb"),re.draw(I,Z.TRIANGLES,_e,qe,gr.alphaBlended,Cr.disabled,go(q,w.Color.transparent,sr),"$debug",b.debugBuffer,b.quadTriangleIndexBuffer,b.debugSegments)}var lh={symbol:function(b,T,C,I,Z){if(b.renderPass==="translucent"){var q=jt.disabled,re=b.colorModeForRenderPass();C.layout.get("text-variable-anchor")&&function(_e,qe,yt,Ut,Zt,Ht,sr){for(var or=qe.transform,Er=Zt==="map",rr=Ht==="map",wr=0,Fr=_e;wr<Fr.length;wr+=1){var Wr=Fr[wr],hn=Ut.getTile(Wr),an=hn.getBucket(yt);if(an&&an.text&&an.text.segments.get().length){var bn=w.evaluateSizeForZoom(an.textSizeData,or.zoom),In=_n(hn,1,qe.transform.zoom),pi=Ro(Wr.posMatrix,rr,Er,qe.transform,In),ei=yt.layout.get("icon-text-fit")!=="none"&&an.hasIconData();if(bn){var Ii=Math.pow(2,or.zoom-hn.tileID.overscaledZ);Ld(an,Er,rr,sr,w.symbolSize,or,pi,Wr.posMatrix,Ii,bn,ei)}}}}(I,b,C,T,C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),Z),C.paint.get("icon-opacity").constantOr(1)!==0&&jc(b,T,C,I,!1,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),C.layout.get("icon-rotation-alignment"),C.layout.get("icon-pitch-alignment"),C.layout.get("icon-keep-upright"),q,re),C.paint.get("text-opacity").constantOr(1)!==0&&jc(b,T,C,I,!0,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.layout.get("text-keep-upright"),q,re),T.map.showCollisionBoxes&&(sc(b,T,C,I,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),!0),sc(b,T,C,I,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),!1))}},circle:function(b,T,C,I){if(b.renderPass==="translucent"){var Z=C.paint.get("circle-opacity"),q=C.paint.get("circle-stroke-width"),re=C.paint.get("circle-stroke-opacity"),_e=C.layout.get("circle-sort-key").constantOr(1)!==void 0;if(Z.constantOr(1)!==0||q.constantOr(1)!==0&&re.constantOr(1)!==0){for(var qe=b.context,yt=qe.gl,Ut=b.depthModeForSublayer(0,Pt.ReadOnly),Zt=jt.disabled,Ht=b.colorModeForRenderPass(),sr=[],or=0;or<I.length;or++){var Er=I[or],rr=T.getTile(Er),wr=rr.getBucket(C);if(wr){var Fr=wr.programConfigurations.get(C.id),Wr={programConfiguration:Fr,program:b.useProgram("circle",Fr),layoutVertexBuffer:wr.layoutVertexBuffer,indexBuffer:wr.indexBuffer,uniformValues:An(b,Er,rr,C)};if(_e)for(var hn=0,an=wr.segments.get();hn<an.length;hn+=1){var bn=an[hn];sr.push({segments:new w.SegmentVector([bn]),sortKey:bn.sortKey,state:Wr})}else sr.push({segments:wr.segments,sortKey:0,state:Wr})}}_e&&sr.sort(function(ia,la){return ia.sortKey-la.sortKey});for(var In=0,pi=sr;In<pi.length;In+=1){var ei=pi[In],Ii=ei.state;Ii.program.draw(qe,yt.TRIANGLES,Ut,Zt,Ht,Cr.disabled,Ii.uniformValues,C.id,Ii.layoutVertexBuffer,Ii.indexBuffer,ei.segments,C.paint,b.transform.zoom,Ii.programConfiguration)}}}},heatmap:function(b,T,C,I){if(C.paint.get("heatmap-opacity")!==0)if(b.renderPass==="offscreen"){var Z=b.context,q=Z.gl,re=jt.disabled,_e=new gr([q.ONE,q.ONE],w.Color.transparent,[!0,!0,!0,!0]);(function(sr,or,Er){var rr=sr.gl;sr.activeTexture.set(rr.TEXTURE1),sr.viewport.set([0,0,or.width/4,or.height/4]);var wr=Er.heatmapFbo;if(wr)rr.bindTexture(rr.TEXTURE_2D,wr.colorAttachment.get()),sr.bindFramebuffer.set(wr.framebuffer);else{var Fr=rr.createTexture();rr.bindTexture(rr.TEXTURE_2D,Fr),rr.texParameteri(rr.TEXTURE_2D,rr.TEXTURE_WRAP_S,rr.CLAMP_TO_EDGE),rr.texParameteri(rr.TEXTURE_2D,rr.TEXTURE_WRAP_T,rr.CLAMP_TO_EDGE),rr.texParameteri(rr.TEXTURE_2D,rr.TEXTURE_MIN_FILTER,rr.LINEAR),rr.texParameteri(rr.TEXTURE_2D,rr.TEXTURE_MAG_FILTER,rr.LINEAR),wr=Er.heatmapFbo=sr.createFramebuffer(or.width/4,or.height/4,!1),function(Wr,hn,an,bn){var In=Wr.gl;In.texImage2D(In.TEXTURE_2D,0,In.RGBA,hn.width/4,hn.height/4,0,In.RGBA,Wr.extRenderToTextureHalfFloat?Wr.extTextureHalfFloat.HALF_FLOAT_OES:In.UNSIGNED_BYTE,null),bn.colorAttachment.set(an)}(sr,or,Fr,wr)}})(Z,b,C),Z.clear({color:w.Color.transparent});for(var qe=0;qe<I.length;qe++){var yt=I[qe];if(!T.hasRenderableParent(yt)){var Ut=T.getTile(yt),Zt=Ut.getBucket(C);if(Zt){var Ht=Zt.programConfigurations.get(C.id);b.useProgram("heatmap",Ht).draw(Z,q.TRIANGLES,Pt.disabled,re,_e,Cr.disabled,ll(yt.posMatrix,Ut,b.transform.zoom,C.paint.get("heatmap-intensity")),C.id,Zt.layoutVertexBuffer,Zt.indexBuffer,Zt.segments,C.paint,b.transform.zoom,Ht)}}}Z.viewport.set([0,0,b.width,b.height])}else b.renderPass==="translucent"&&(b.context.setColorMode(b.colorModeForRenderPass()),function(sr,or){var Er=sr.context,rr=Er.gl,wr=or.heatmapFbo;if(wr){Er.activeTexture.set(rr.TEXTURE0),rr.bindTexture(rr.TEXTURE_2D,wr.colorAttachment.get()),Er.activeTexture.set(rr.TEXTURE1);var Fr=or.colorRampTexture;Fr||(Fr=or.colorRampTexture=new w.Texture(Er,or.colorRamp,rr.RGBA)),Fr.bind(rr.LINEAR,rr.CLAMP_TO_EDGE),sr.useProgram("heatmapTexture").draw(Er,rr.TRIANGLES,Pt.disabled,jt.disabled,sr.colorModeForRenderPass(),Cr.disabled,function(Wr,hn,an,bn){var In=w.create();w.ortho(In,0,Wr.width,Wr.height,0,0,1);var pi=Wr.context.gl;return{u_matrix:In,u_world:[pi.drawingBufferWidth,pi.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:hn.paint.get("heatmap-opacity")}}(sr,or),or.id,sr.viewportBuffer,sr.quadTriangleIndexBuffer,sr.viewportSegments,or.paint,sr.transform.zoom)}}(b,C))},line:function(b,T,C,I){if(b.renderPass==="translucent"){var Z=C.paint.get("line-opacity"),q=C.paint.get("line-width");if(Z.constantOr(1)!==0&&q.constantOr(1)!==0)for(var re=b.depthModeForSublayer(0,Pt.ReadOnly),_e=b.colorModeForRenderPass(),qe=C.paint.get("line-dasharray"),yt=C.paint.get("line-pattern"),Ut=yt.constantOr(1),Zt=C.paint.get("line-gradient"),Ht=C.getCrossfadeParameters(),sr=Ut?"linePattern":qe?"lineSDF":Zt?"lineGradient":"line",or=b.context,Er=or.gl,rr=!0,wr=0,Fr=I;wr<Fr.length;wr+=1){var Wr=Fr[wr],hn=T.getTile(Wr);if(!Ut||hn.patternsLoaded()){var an=hn.getBucket(C);if(an){var bn=an.programConfigurations.get(C.id),In=b.context.program.get(),pi=b.useProgram(sr,bn),ei=rr||pi.program!==In,Ii=yt.constantOr(null);if(Ii&&hn.imageAtlas){var ia=hn.imageAtlas,la=ia.patternPositions[Ii.to.toString()],Ki=ia.patternPositions[Ii.from.toString()];la&&Ki&&bn.setConstantPatternPositions(la,Ki)}var bo=Ut?dp(b,hn,C,Ht):qe?Dd(b,hn,C,qe,Ht):Zt?Oo(b,hn,C,an.lineClipsArray.length):Ku(b,hn,C);if(Ut)or.activeTexture.set(Er.TEXTURE0),hn.imageAtlasTexture.bind(Er.LINEAR,Er.CLAMP_TO_EDGE),bn.updatePaintBuffers(Ht);else if(qe&&(ei||b.lineAtlas.dirty))or.activeTexture.set(Er.TEXTURE0),b.lineAtlas.bind(or);else if(Zt){var Ni=an.gradients[C.id],Oa=Ni.texture;if(C.gradientVersion!==Ni.version){var La=256;if(C.stepInterpolant){var Ia=T.getSource().maxzoom,fa=Wr.canonical.z===Ia?Math.ceil(1<<b.transform.maxZoom-Wr.canonical.z):1;La=w.clamp(w.nextPowerOfTwo(an.maxLineLength/w.EXTENT*1024*fa),256,or.maxTextureSize)}Ni.gradient=w.renderColorRamp({expression:C.gradientExpression(),evaluationKey:"lineProgress",resolution:La,image:Ni.gradient||void 0,clips:an.lineClipsArray}),Ni.texture?Ni.texture.update(Ni.gradient):Ni.texture=new w.Texture(or,Ni.gradient,Er.RGBA),Ni.version=C.gradientVersion,Oa=Ni.texture}or.activeTexture.set(Er.TEXTURE0),Oa.bind(C.stepInterpolant?Er.NEAREST:Er.LINEAR,Er.CLAMP_TO_EDGE)}pi.draw(or,Er.TRIANGLES,re,b.stencilModeForClipping(Wr),_e,Cr.disabled,bo,C.id,an.layoutVertexBuffer,an.indexBuffer,an.segments,C.paint,b.transform.zoom,bn,an.layoutVertexBuffer2),rr=!1}}}}},fill:function(b,T,C,I){var Z=C.paint.get("fill-color"),q=C.paint.get("fill-opacity");if(q.constantOr(1)!==0){var re=b.colorModeForRenderPass(),_e=C.paint.get("fill-pattern"),qe=b.opaquePassEnabledForLayer()&&!_e.constantOr(1)&&Z.constantOr(w.Color.transparent).a===1&&q.constantOr(0)===1?"opaque":"translucent";if(b.renderPass===qe){var yt=b.depthModeForSublayer(1,b.renderPass==="opaque"?Pt.ReadWrite:Pt.ReadOnly);uh(b,T,C,I,yt,re,!1)}if(b.renderPass==="translucent"&&C.paint.get("fill-antialias")){var Ut=b.depthModeForSublayer(C.getPaintProperty("fill-outline-color")?2:0,Pt.ReadOnly);uh(b,T,C,I,Ut,re,!0)}}},"fill-extrusion":function(b,T,C,I){var Z=C.paint.get("fill-extrusion-opacity");if(Z!==0&&b.renderPass==="translucent"){var q=new Pt(b.context.gl.LEQUAL,Pt.ReadWrite,b.depthRangeFor3D);if(Z!==1||C.paint.get("fill-extrusion-pattern").constantOr(1))mp(b,T,C,I,q,jt.disabled,gr.disabled),mp(b,T,C,I,q,b.stencilModeFor3D(),b.colorModeForRenderPass());else{var re=b.colorModeForRenderPass();mp(b,T,C,I,q,jt.disabled,re)}}},hillshade:function(b,T,C,I){if(b.renderPass==="offscreen"||b.renderPass==="translucent"){for(var Z=b.context,q=b.depthModeForSublayer(0,Pt.ReadOnly),re=b.colorModeForRenderPass(),_e=b.renderPass==="translucent"?b.stencilConfigForOverlap(I):[{},I],qe=_e[0],yt=0,Ut=_e[1];yt<Ut.length;yt+=1){var Zt=Ut[yt],Ht=T.getTile(Zt);Ht.needsHillshadePrepare&&b.renderPass==="offscreen"?fm(b,Ht,C,q,jt.disabled,re):b.renderPass==="translucent"&&Pf(b,Ht,C,q,qe[Zt.overscaledZ],re)}Z.viewport.set([0,0,b.width,b.height])}},raster:function(b,T,C,I){if(b.renderPass==="translucent"&&C.paint.get("raster-opacity")!==0&&I.length)for(var Z=b.context,q=Z.gl,re=T.getSource(),_e=b.useProgram("raster"),qe=b.colorModeForRenderPass(),yt=re instanceof nt?[{},I]:b.stencilConfigForOverlap(I),Ut=yt[0],Zt=yt[1],Ht=Zt[Zt.length-1].overscaledZ,sr=!b.options.moving,or=0,Er=Zt;or<Er.length;or+=1){var rr=Er[or],wr=b.depthModeForSublayer(rr.overscaledZ-Ht,C.paint.get("raster-opacity")===1?Pt.ReadWrite:Pt.ReadOnly,q.LESS),Fr=T.getTile(rr),Wr=b.transform.calculatePosMatrix(rr.toUnwrapped(),sr);Fr.registerFadeDuration(C.paint.get("raster-fade-duration"));var hn=T.findLoadedParent(rr,0),an=id(Fr,hn,T,C,b.transform),bn=void 0,In=void 0,pi=C.paint.get("raster-resampling")==="nearest"?q.NEAREST:q.LINEAR;Z.activeTexture.set(q.TEXTURE0),Fr.texture.bind(pi,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),Z.activeTexture.set(q.TEXTURE1),hn?(hn.texture.bind(pi,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),bn=Math.pow(2,hn.tileID.overscaledZ-Fr.tileID.overscaledZ),In=[Fr.tileID.canonical.x*bn%1,Fr.tileID.canonical.y*bn%1]):Fr.texture.bind(pi,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST);var ei=cf(Wr,In||[0,0],bn||1,an,C);re instanceof nt?_e.draw(Z,q.TRIANGLES,wr,jt.disabled,qe,Cr.disabled,ei,C.id,re.boundsBuffer,b.quadTriangleIndexBuffer,re.boundsSegments):_e.draw(Z,q.TRIANGLES,wr,Ut[rr.overscaledZ],qe,Cr.disabled,ei,C.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}},background:function(b,T,C){var I=C.paint.get("background-color"),Z=C.paint.get("background-opacity");if(Z!==0){var q=b.context,re=q.gl,_e=b.transform,qe=_e.tileSize,yt=C.paint.get("background-pattern");if(!b.isPatternMissing(yt)){var Ut=!yt&&I.a===1&&Z===1&&b.opaquePassEnabledForLayer()?"opaque":"translucent";if(b.renderPass===Ut){var Zt=jt.disabled,Ht=b.depthModeForSublayer(0,Ut==="opaque"?Pt.ReadWrite:Pt.ReadOnly),sr=b.colorModeForRenderPass(),or=b.useProgram(yt?"backgroundPattern":"background"),Er=_e.coveringTiles({tileSize:qe});yt&&(q.activeTexture.set(re.TEXTURE0),b.imageManager.bind(b.context));for(var rr=C.getCrossfadeParameters(),wr=0,Fr=Er;wr<Fr.length;wr+=1){var Wr=Fr[wr],hn=b.transform.calculatePosMatrix(Wr.toUnwrapped()),an=yt?sh(hn,Z,b,yt,{tileID:Wr,tileSize:qe},rr):If(hn,Z,I);or.draw(q,re.TRIANGLES,Ht,Zt,sr,Cr.disabled,an,C.id,b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}}}}},debug:function(b,T,C){for(var I=0;I<C.length;I++)Nd(b,T,C[I])},custom:function(b,T,C){var I=b.context,Z=C.implementation;if(b.renderPass==="offscreen"){var q=Z.prerender;q&&(b.setCustomLayerDefaults(),I.setColorMode(b.colorModeForRenderPass()),q.call(Z,I.gl,b.transform.customLayerMatrix()),I.setDirty(),b.setBaseState())}else if(b.renderPass==="translucent"){b.setCustomLayerDefaults(),I.setColorMode(b.colorModeForRenderPass()),I.setStencilMode(jt.disabled);var re=Z.renderingMode==="3d"?new Pt(b.context.gl.LEQUAL,Pt.ReadWrite,b.depthRangeFor3D):b.depthModeForSublayer(0,Pt.ReadOnly);I.setDepthMode(re),Z.render(I.gl,b.transform.customLayerMatrix()),I.setDirty(),b.setBaseState(),I.bindFramebuffer.set(null)}}},rs=function(b,T){this.context=new kt(b),this.transform=T,this._tileTextures={},this.setup(),this.numSublayers=at.maxUnderzooming+at.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Qs,this.gpuTimers={}};rs.prototype.resize=function(b,T){if(this.width=b*w.browser.devicePixelRatio,this.height=T*w.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var C=0,I=this.style._order;C<I.length;C+=1)this.style._layers[I[C]].resize()},rs.prototype.setup=function(){var b=this.context,T=new w.StructArrayLayout2i4;T.emplaceBack(0,0),T.emplaceBack(w.EXTENT,0),T.emplaceBack(0,w.EXTENT),T.emplaceBack(w.EXTENT,w.EXTENT),this.tileExtentBuffer=b.createVertexBuffer(T,ds.members),this.tileExtentSegments=w.SegmentVector.simpleSegment(0,0,4,2);var C=new w.StructArrayLayout2i4;C.emplaceBack(0,0),C.emplaceBack(w.EXTENT,0),C.emplaceBack(0,w.EXTENT),C.emplaceBack(w.EXTENT,w.EXTENT),this.debugBuffer=b.createVertexBuffer(C,ds.members),this.debugSegments=w.SegmentVector.simpleSegment(0,0,4,5);var I=new w.StructArrayLayout4i8;I.emplaceBack(0,0,0,0),I.emplaceBack(w.EXTENT,0,w.EXTENT,0),I.emplaceBack(0,w.EXTENT,0,w.EXTENT),I.emplaceBack(w.EXTENT,w.EXTENT,w.EXTENT,w.EXTENT),this.rasterBoundsBuffer=b.createVertexBuffer(I,Oe.members),this.rasterBoundsSegments=w.SegmentVector.simpleSegment(0,0,4,2);var Z=new w.StructArrayLayout2i4;Z.emplaceBack(0,0),Z.emplaceBack(1,0),Z.emplaceBack(0,1),Z.emplaceBack(1,1),this.viewportBuffer=b.createVertexBuffer(Z,ds.members),this.viewportSegments=w.SegmentVector.simpleSegment(0,0,4,2);var q=new w.StructArrayLayout1ui2;q.emplaceBack(0),q.emplaceBack(1),q.emplaceBack(3),q.emplaceBack(2),q.emplaceBack(0),this.tileBorderIndexBuffer=b.createIndexBuffer(q);var re=new w.StructArrayLayout3ui6;re.emplaceBack(0,1,2),re.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=b.createIndexBuffer(re),this.emptyTexture=new w.Texture(b,{width:1,height:1,data:new Uint8Array([0,0,0,0])},b.gl.RGBA);var _e=this.context.gl;this.stencilClearMode=new jt({func:_e.ALWAYS,mask:0},0,255,_e.ZERO,_e.ZERO,_e.ZERO)},rs.prototype.clearStencil=function(){var b=this.context,T=b.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var C=w.create();w.ortho(C,0,this.width,this.height,0,0,1),w.scale(C,C,[T.drawingBufferWidth,T.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(b,T.TRIANGLES,Pt.disabled,this.stencilClearMode,gr.disabled,Cr.disabled,Is(C),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},rs.prototype._renderTileClippingMasks=function(b,T){if(this.currentStencilSource!==b.source&&b.isTileClipped()&&T&&T.length){this.currentStencilSource=b.source;var C=this.context,I=C.gl;this.nextStencilID+T.length>256&&this.clearStencil(),C.setColorMode(gr.disabled),C.setDepthMode(Pt.disabled);var Z=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var q=0,re=T;q<re.length;q+=1){var _e=re[q],qe=this._tileClippingMaskIDs[_e.key]=this.nextStencilID++;Z.draw(C,I.TRIANGLES,Pt.disabled,new jt({func:I.ALWAYS,mask:0},qe,255,I.KEEP,I.KEEP,I.REPLACE),gr.disabled,Cr.disabled,Is(_e.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},rs.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var b=this.nextStencilID++,T=this.context.gl;return new jt({func:T.NOTEQUAL,mask:255},b,255,T.KEEP,T.KEEP,T.REPLACE)},rs.prototype.stencilModeForClipping=function(b){var T=this.context.gl;return new jt({func:T.EQUAL,mask:255},this._tileClippingMaskIDs[b.key],0,T.KEEP,T.KEEP,T.REPLACE)},rs.prototype.stencilConfigForOverlap=function(b){var T,C=this.context.gl,I=b.sort(function(qe,yt){return yt.overscaledZ-qe.overscaledZ}),Z=I[I.length-1].overscaledZ,q=I[0].overscaledZ-Z+1;if(q>1){this.currentStencilSource=void 0,this.nextStencilID+q>256&&this.clearStencil();for(var re={},_e=0;_e<q;_e++)re[_e+Z]=new jt({func:C.GEQUAL,mask:255},_e+this.nextStencilID,255,C.KEEP,C.KEEP,C.REPLACE);return this.nextStencilID+=q,[re,I]}return[(T={},T[Z]=jt.disabled,T),I]},rs.prototype.colorModeForRenderPass=function(){var b=this.context.gl;return this._showOverdrawInspector?new gr([b.CONSTANT_COLOR,b.ONE],new w.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?gr.unblended:gr.alphaBlended},rs.prototype.depthModeForSublayer=function(b,T,C){if(!this.opaquePassEnabledForLayer())return Pt.disabled;var I=1-((1+this.currentLayer)*this.numSublayers+b)*this.depthEpsilon;return new Pt(C||this.context.gl.LEQUAL,T,[I,I])},rs.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},rs.prototype.render=function(b,T){var C=this;this.style=b,this.options=T,this.lineAtlas=b.lineAtlas,this.imageManager=b.imageManager,this.glyphManager=b.glyphManager,this.symbolFadeChange=b.placement.symbolFadeChange(w.browser.now()),this.imageManager.beginFrame();var I=this.style._order,Z=this.style.sourceCaches;for(var q in Z){var re=Z[q];re.used&&re.prepare(this.context)}var _e,qe,yt={},Ut={},Zt={};for(var Ht in Z){var sr=Z[Ht];yt[Ht]=sr.getVisibleCoordinates(),Ut[Ht]=yt[Ht].slice().reverse(),Zt[Ht]=sr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var or=0;or<I.length;or++)if(this.style._layers[I[or]].is3D()){this.opaquePassCutoff=or;break}this.renderPass="offscreen";for(var Er=0,rr=I;Er<rr.length;Er+=1){var wr=this.style._layers[rr[Er]];if(wr.hasOffscreenPass()&&!wr.isHidden(this.transform.zoom)){var Fr=Ut[wr.source];(wr.type==="custom"||Fr.length)&&this.renderLayer(this,Z[wr.source],wr,Fr)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:T.showOverdrawInspector?w.Color.black:w.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=T.showOverdrawInspector,this.depthRangeFor3D=[0,1-(b._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=I.length-1;this.currentLayer>=0;this.currentLayer--){var Wr=this.style._layers[I[this.currentLayer]],hn=Z[Wr.source],an=yt[Wr.source];this._renderTileClippingMasks(Wr,an),this.renderLayer(this,hn,Wr,an)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<I.length;this.currentLayer++){var bn=this.style._layers[I[this.currentLayer]],In=Z[bn.source],pi=(bn.type==="symbol"?Zt:Ut)[bn.source];this._renderTileClippingMasks(bn,yt[bn.source]),this.renderLayer(this,In,bn,pi)}this.options.showTileBoundaries&&(w.values(this.style._layers).forEach(function(ei){ei.source&&!ei.isHidden(C.transform.zoom)&&(ei.source!==(qe&&qe.id)&&(qe=C.style.sourceCaches[ei.source]),(!_e||_e.getSource().maxzoom<qe.getSource().maxzoom)&&(_e=qe))}),_e&&lh.debug(this,_e,_e.getVisibleCoordinates())),this.options.showPadding&&function(ei){var Ii=ei.transform.padding;xp(ei,ei.transform.height-(Ii.top||0),3,Ps),xp(ei,Ii.bottom||0,3,yp),yv(ei,Ii.left||0,3,Ph),yv(ei,ei.transform.width-(Ii.right||0),3,Bd);var ia=ei.transform.centerPoint;(function(la,Ki,bo,Ni){Wc(la,Ki-1,bo-10,2,20,Ni),Wc(la,Ki-10,bo-1,20,2,Ni)})(ei,ia.x,ei.transform.height-ia.y,_p)}(this),this.context.setDefault()},rs.prototype.renderLayer=function(b,T,C,I){C.isHidden(this.transform.zoom)||(C.type==="background"||C.type==="custom"||I.length)&&(this.id=C.id,this.gpuTimingStart(C),lh[C.type](b,T,C,I,this.style.placement.variableOffsets),this.gpuTimingEnd())},rs.prototype.gpuTimingStart=function(b){if(this.options.gpuTiming){var T=this.context.extTimerQuery,C=this.gpuTimers[b.id];C||(C=this.gpuTimers[b.id]={calls:0,cpuTime:0,query:T.createQueryEXT()}),C.calls++,T.beginQueryEXT(T.TIME_ELAPSED_EXT,C.query)}},rs.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var b=this.context.extTimerQuery;b.endQueryEXT(b.TIME_ELAPSED_EXT)}},rs.prototype.collectGpuTimers=function(){var b=this.gpuTimers;return this.gpuTimers={},b},rs.prototype.queryGpuTimers=function(b){var T={};for(var C in b){var I=b[C],Z=this.context.extTimerQuery,q=Z.getQueryObjectEXT(I.query,Z.QUERY_RESULT_EXT)/1e6;Z.deleteQueryEXT(I.query),T[C]=q}return T},rs.prototype.translatePosMatrix=function(b,T,C,I,Z){if(!C[0]&&!C[1])return b;var q=Z?I==="map"?this.transform.angle:0:I==="viewport"?-this.transform.angle:0;if(q){var re=Math.sin(q),_e=Math.cos(q);C=[C[0]*_e-C[1]*re,C[0]*re+C[1]*_e]}var qe=[Z?C[0]:_n(T,C[0],this.transform.zoom),Z?C[1]:_n(T,C[1],this.transform.zoom),0],yt=new Float32Array(16);return w.translate(yt,b,qe),yt},rs.prototype.saveTileTexture=function(b){var T=this._tileTextures[b.size[0]];T?T.push(b):this._tileTextures[b.size[0]]=[b]},rs.prototype.getTileTexture=function(b){var T=this._tileTextures[b];return T&&T.length>0?T.pop():null},rs.prototype.isPatternMissing=function(b){if(!b)return!1;if(!b.from||!b.to)return!0;var T=this.imageManager.getPattern(b.from.toString()),C=this.imageManager.getPattern(b.to.toString());return!T||!C},rs.prototype.useProgram=function(b,T){this.cache=this.cache||{};var C=""+b+(T?T.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[C]||(this.cache[C]=new ts(this.context,b,Fd[b],T,Ns[b],this._showOverdrawInspector)),this.cache[C]},rs.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},rs.prototype.setBaseState=function(){var b=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(b.FUNC_ADD)},rs.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=w.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new w.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},rs.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var ch=function(b,T){this.points=b,this.planes=T};ch.fromInvProjectionMatrix=function(b,T,C){var I=Math.pow(2,C),Z=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(re){return w.transformMat4([],re,b)}).map(function(re){return w.scale$1([],re,1/re[3]/T*I)}),q=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(re){var _e=w.sub([],Z[re[0]],Z[re[1]]),qe=w.sub([],Z[re[2]],Z[re[1]]),yt=w.normalize([],w.cross([],_e,qe)),Ut=-w.dot(yt,Z[re[1]]);return yt.concat(Ut)});return new ch(Z,q)};var Ac=function(b,T){this.min=b,this.max=T,this.center=w.scale$2([],w.add([],this.min,this.max),.5)};Ac.prototype.quadrant=function(b){for(var T=[b%2==0,b<2],C=w.clone$2(this.min),I=w.clone$2(this.max),Z=0;Z<T.length;Z++)C[Z]=T[Z]?this.min[Z]:this.center[Z],I[Z]=T[Z]?this.center[Z]:this.max[Z];return I[2]=this.max[2],new Ac(C,I)},Ac.prototype.distanceX=function(b){return Math.max(Math.min(this.max[0],b[0]),this.min[0])-b[0]},Ac.prototype.distanceY=function(b){return Math.max(Math.min(this.max[1],b[1]),this.min[1])-b[1]},Ac.prototype.intersects=function(b){for(var T=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],C=!0,I=0;I<b.planes.length;I++){for(var Z=b.planes[I],q=0,re=0;re<T.length;re++)q+=w.dot$1(Z,T[re])>=0;if(q===0)return 0;q!==T.length&&(C=!1)}if(C)return 2;for(var _e=0;_e<3;_e++){for(var qe=Number.MAX_VALUE,yt=-Number.MAX_VALUE,Ut=0;Ut<b.points.length;Ut++){var Zt=b.points[Ut][_e]-this.min[_e];qe=Math.min(qe,Zt),yt=Math.max(yt,Zt)}if(yt<0||qe>this.max[_e]-this.min[_e])return 0}return 1};var uc=function(b,T,C,I){if(b===void 0&&(b=0),T===void 0&&(T=0),C===void 0&&(C=0),I===void 0&&(I=0),isNaN(b)||b<0||isNaN(T)||T<0||isNaN(C)||C<0||isNaN(I)||I<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=b,this.bottom=T,this.left=C,this.right=I};uc.prototype.interpolate=function(b,T,C){return T.top!=null&&b.top!=null&&(this.top=w.number(b.top,T.top,C)),T.bottom!=null&&b.bottom!=null&&(this.bottom=w.number(b.bottom,T.bottom,C)),T.left!=null&&b.left!=null&&(this.left=w.number(b.left,T.left,C)),T.right!=null&&b.right!=null&&(this.right=w.number(b.right,T.right,C)),this},uc.prototype.getCenter=function(b,T){var C=w.clamp((this.left+b-this.right)/2,0,b),I=w.clamp((this.top+T-this.bottom)/2,0,T);return new w.Point(C,I)},uc.prototype.equals=function(b){return this.top===b.top&&this.bottom===b.bottom&&this.left===b.left&&this.right===b.right},uc.prototype.clone=function(){return new uc(this.top,this.bottom,this.left,this.right)},uc.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var co=function(b,T,C,I,Z){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Z===void 0||Z,this._minZoom=b||0,this._maxZoom=T||22,this._minPitch=C==null?0:C,this._maxPitch=I==null?60:I,this.setMaxBounds(),this.width=0,this.height=0,this._center=new w.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new uc,this._posMatrixCache={},this._alignedPosMatrixCache={}},Xo={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};co.prototype.clone=function(){var b=new co(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return b.tileSize=this.tileSize,b.latRange=this.latRange,b.width=this.width,b.height=this.height,b._center=this._center,b.zoom=this.zoom,b.angle=this.angle,b._fov=this._fov,b._pitch=this._pitch,b._unmodified=this._unmodified,b._edgeInsets=this._edgeInsets.clone(),b._calcMatrices(),b},Xo.minZoom.get=function(){return this._minZoom},Xo.minZoom.set=function(b){this._minZoom!==b&&(this._minZoom=b,this.zoom=Math.max(this.zoom,b))},Xo.maxZoom.get=function(){return this._maxZoom},Xo.maxZoom.set=function(b){this._maxZoom!==b&&(this._maxZoom=b,this.zoom=Math.min(this.zoom,b))},Xo.minPitch.get=function(){return this._minPitch},Xo.minPitch.set=function(b){this._minPitch!==b&&(this._minPitch=b,this.pitch=Math.max(this.pitch,b))},Xo.maxPitch.get=function(){return this._maxPitch},Xo.maxPitch.set=function(b){this._maxPitch!==b&&(this._maxPitch=b,this.pitch=Math.min(this.pitch,b))},Xo.renderWorldCopies.get=function(){return this._renderWorldCopies},Xo.renderWorldCopies.set=function(b){b===void 0?b=!0:b===null&&(b=!1),this._renderWorldCopies=b},Xo.worldSize.get=function(){return this.tileSize*this.scale},Xo.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Xo.size.get=function(){return new w.Point(this.width,this.height)},Xo.bearing.get=function(){return-this.angle/Math.PI*180},Xo.bearing.set=function(b){var T=-w.wrap(b,-180,180)*Math.PI/180;this.angle!==T&&(this._unmodified=!1,this.angle=T,this._calcMatrices(),this.rotationMatrix=w.create$2(),w.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Xo.pitch.get=function(){return this._pitch/Math.PI*180},Xo.pitch.set=function(b){var T=w.clamp(b,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==T&&(this._unmodified=!1,this._pitch=T,this._calcMatrices())},Xo.fov.get=function(){return this._fov/Math.PI*180},Xo.fov.set=function(b){b=Math.max(.01,Math.min(60,b)),this._fov!==b&&(this._unmodified=!1,this._fov=b/180*Math.PI,this._calcMatrices())},Xo.zoom.get=function(){return this._zoom},Xo.zoom.set=function(b){var T=Math.min(Math.max(b,this.minZoom),this.maxZoom);this._zoom!==T&&(this._unmodified=!1,this._zoom=T,this.scale=this.zoomScale(T),this.tileZoom=Math.floor(T),this.zoomFraction=T-this.tileZoom,this._constrain(),this._calcMatrices())},Xo.center.get=function(){return this._center},Xo.center.set=function(b){b.lat===this._center.lat&&b.lng===this._center.lng||(this._unmodified=!1,this._center=b,this._constrain(),this._calcMatrices())},Xo.padding.get=function(){return this._edgeInsets.toJSON()},Xo.padding.set=function(b){this._edgeInsets.equals(b)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,b,1),this._calcMatrices())},Xo.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},co.prototype.isPaddingEqual=function(b){return this._edgeInsets.equals(b)},co.prototype.interpolatePadding=function(b,T,C){this._unmodified=!1,this._edgeInsets.interpolate(b,T,C),this._constrain(),this._calcMatrices()},co.prototype.coveringZoomLevel=function(b){var T=(b.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/b.tileSize));return Math.max(0,T)},co.prototype.getVisibleUnwrappedCoordinates=function(b){var T=[new w.UnwrappedTileID(0,b)];if(this._renderWorldCopies)for(var C=this.pointCoordinate(new w.Point(0,0)),I=this.pointCoordinate(new w.Point(this.width,0)),Z=this.pointCoordinate(new w.Point(this.width,this.height)),q=this.pointCoordinate(new w.Point(0,this.height)),re=Math.floor(Math.min(C.x,I.x,Z.x,q.x)),_e=Math.floor(Math.max(C.x,I.x,Z.x,q.x)),qe=re-1;qe<=_e+1;qe++)qe!==0&&T.push(new w.UnwrappedTileID(qe,b));return T},co.prototype.coveringTiles=function(b){var T=this.coveringZoomLevel(b),C=T;if(b.minzoom!==void 0&&T<b.minzoom)return[];b.maxzoom!==void 0&&T>b.maxzoom&&(T=b.maxzoom);var I=w.MercatorCoordinate.fromLngLat(this.center),Z=Math.pow(2,T),q=[Z*I.x,Z*I.y,0],re=ch.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,T),_e=b.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(_e=T);var qe=function(ei){return{aabb:new Ac([ei*Z,0,0],[(ei+1)*Z,Z,0]),zoom:0,x:0,y:0,wrap:ei,fullyVisible:!1}},yt=[],Ut=[],Zt=T,Ht=b.reparseOverscaled?C:T;if(this._renderWorldCopies)for(var sr=1;sr<=3;sr++)yt.push(qe(-sr)),yt.push(qe(sr));for(yt.push(qe(0));yt.length>0;){var or=yt.pop(),Er=or.x,rr=or.y,wr=or.fullyVisible;if(!wr){var Fr=or.aabb.intersects(re);if(Fr===0)continue;wr=Fr===2}var Wr=or.aabb.distanceX(q),hn=or.aabb.distanceY(q),an=Math.max(Math.abs(Wr),Math.abs(hn));if(or.zoom===Zt||an>3+(1<<Zt-or.zoom)-2&&or.zoom>=_e)Ut.push({tileID:new w.OverscaledTileID(or.zoom===Zt?Ht:or.zoom,or.wrap,or.zoom,Er,rr),distanceSq:w.sqrLen([q[0]-.5-Er,q[1]-.5-rr])});else for(var bn=0;bn<4;bn++){var In=(Er<<1)+bn%2,pi=(rr<<1)+(bn>>1);yt.push({aabb:or.aabb.quadrant(bn),zoom:or.zoom+1,x:In,y:pi,wrap:or.wrap,fullyVisible:wr})}}return Ut.sort(function(ei,Ii){return ei.distanceSq-Ii.distanceSq}).map(function(ei){return ei.tileID})},co.prototype.resize=function(b,T){this.width=b,this.height=T,this.pixelsToGLUnits=[2/b,-2/T],this._constrain(),this._calcMatrices()},Xo.unmodified.get=function(){return this._unmodified},co.prototype.zoomScale=function(b){return Math.pow(2,b)},co.prototype.scaleZoom=function(b){return Math.log(b)/Math.LN2},co.prototype.project=function(b){var T=w.clamp(b.lat,-this.maxValidLatitude,this.maxValidLatitude);return new w.Point(w.mercatorXfromLng(b.lng)*this.worldSize,w.mercatorYfromLat(T)*this.worldSize)},co.prototype.unproject=function(b){return new w.MercatorCoordinate(b.x/this.worldSize,b.y/this.worldSize).toLngLat()},Xo.point.get=function(){return this.project(this.center)},co.prototype.setLocationAtPoint=function(b,T){var C=this.pointCoordinate(T),I=this.pointCoordinate(this.centerPoint),Z=this.locationCoordinate(b),q=new w.MercatorCoordinate(Z.x-(C.x-I.x),Z.y-(C.y-I.y));this.center=this.coordinateLocation(q),this._renderWorldCopies&&(this.center=this.center.wrap())},co.prototype.locationPoint=function(b){return this.coordinatePoint(this.locationCoordinate(b))},co.prototype.pointLocation=function(b){return this.coordinateLocation(this.pointCoordinate(b))},co.prototype.locationCoordinate=function(b){return w.MercatorCoordinate.fromLngLat(b)},co.prototype.coordinateLocation=function(b){return b.toLngLat()},co.prototype.pointCoordinate=function(b){var T=[b.x,b.y,0,1],C=[b.x,b.y,1,1];w.transformMat4(T,T,this.pixelMatrixInverse),w.transformMat4(C,C,this.pixelMatrixInverse);var I=T[3],Z=C[3],q=T[1]/I,re=C[1]/Z,_e=T[2]/I,qe=C[2]/Z,yt=_e===qe?0:(0-_e)/(qe-_e);return new w.MercatorCoordinate(w.number(T[0]/I,C[0]/Z,yt)/this.worldSize,w.number(q,re,yt)/this.worldSize)},co.prototype.coordinatePoint=function(b){var T=[b.x*this.worldSize,b.y*this.worldSize,0,1];return w.transformMat4(T,T,this.pixelMatrix),new w.Point(T[0]/T[3],T[1]/T[3])},co.prototype.getBounds=function(){return new w.LngLatBounds().extend(this.pointLocation(new w.Point(0,0))).extend(this.pointLocation(new w.Point(this.width,0))).extend(this.pointLocation(new w.Point(this.width,this.height))).extend(this.pointLocation(new w.Point(0,this.height)))},co.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new w.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},co.prototype.setMaxBounds=function(b){b?(this.lngRange=[b.getWest(),b.getEast()],this.latRange=[b.getSouth(),b.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},co.prototype.calculatePosMatrix=function(b,T){T===void 0&&(T=!1);var C=b.key,I=T?this._alignedPosMatrixCache:this._posMatrixCache;if(I[C])return I[C];var Z=b.canonical,q=this.worldSize/this.zoomScale(Z.z),re=Z.x+Math.pow(2,Z.z)*b.wrap,_e=w.identity(new Float64Array(16));return w.translate(_e,_e,[re*q,Z.y*q,0]),w.scale(_e,_e,[q/w.EXTENT,q/w.EXTENT,1]),w.multiply(_e,T?this.alignedProjMatrix:this.projMatrix,_e),I[C]=new Float32Array(_e),I[C]},co.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},co.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var b,T,C,I,Z=-90,q=90,re=-180,_e=180,qe=this.size,yt=this._unmodified;if(this.latRange){var Ut=this.latRange;Z=w.mercatorYfromLat(Ut[1])*this.worldSize,b=(q=w.mercatorYfromLat(Ut[0])*this.worldSize)-Z<qe.y?qe.y/(q-Z):0}if(this.lngRange){var Zt=this.lngRange;re=w.mercatorXfromLng(Zt[0])*this.worldSize,T=(_e=w.mercatorXfromLng(Zt[1])*this.worldSize)-re<qe.x?qe.x/(_e-re):0}var Ht=this.point,sr=Math.max(T||0,b||0);if(sr)return this.center=this.unproject(new w.Point(T?(_e+re)/2:Ht.x,b?(q+Z)/2:Ht.y)),this.zoom+=this.scaleZoom(sr),this._unmodified=yt,void(this._constraining=!1);if(this.latRange){var or=Ht.y,Er=qe.y/2;or-Er<Z&&(I=Z+Er),or+Er>q&&(I=q-Er)}if(this.lngRange){var rr=Ht.x,wr=qe.x/2;rr-wr<re&&(C=re+wr),rr+wr>_e&&(C=_e-wr)}C===void 0&&I===void 0||(this.center=this.unproject(new w.Point(C!==void 0?C:Ht.x,I!==void 0?I:Ht.y))),this._unmodified=yt,this._constraining=!1}},co.prototype._calcMatrices=function(){if(this.height){var b=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var T=Math.PI/2+this._pitch,C=this._fov*(.5+b.y/this.height),I=Math.sin(C)*this.cameraToCenterDistance/Math.sin(w.clamp(Math.PI-T-C,.01,Math.PI-.01)),Z=this.point,q=Z.x,re=Z.y,_e=1.01*(Math.cos(Math.PI/2-this._pitch)*I+this.cameraToCenterDistance),qe=this.height/50,yt=new Float64Array(16);w.perspective(yt,this._fov,this.width/this.height,qe,_e),yt[8]=2*-b.x/this.width,yt[9]=2*b.y/this.height,w.scale(yt,yt,[1,-1,1]),w.translate(yt,yt,[0,0,-this.cameraToCenterDistance]),w.rotateX(yt,yt,this._pitch),w.rotateZ(yt,yt,this.angle),w.translate(yt,yt,[-q,-re,0]),this.mercatorMatrix=w.scale([],yt,[this.worldSize,this.worldSize,this.worldSize]),w.scale(yt,yt,[1,1,w.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=yt,this.invProjMatrix=w.invert([],this.projMatrix);var Ut=this.width%2/2,Zt=this.height%2/2,Ht=Math.cos(this.angle),sr=Math.sin(this.angle),or=q-Math.round(q)+Ht*Ut+sr*Zt,Er=re-Math.round(re)+Ht*Zt+sr*Ut,rr=new Float64Array(yt);if(w.translate(rr,rr,[or>.5?or-1:or,Er>.5?Er-1:Er,0]),this.alignedProjMatrix=rr,yt=w.create(),w.scale(yt,yt,[this.width/2,-this.height/2,1]),w.translate(yt,yt,[1,-1,0]),this.labelPlaneMatrix=yt,yt=w.create(),w.scale(yt,yt,[1,-1,1]),w.translate(yt,yt,[-1,-1,0]),w.scale(yt,yt,[2/this.width,2/this.height,1]),this.glCoordMatrix=yt,this.pixelMatrix=w.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(yt=w.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=yt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},co.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var b=this.pointCoordinate(new w.Point(0,0)),T=[b.x*this.worldSize,b.y*this.worldSize,0,1];return w.transformMat4(T,T,this.pixelMatrix)[3]/this.cameraToCenterDistance},co.prototype.getCameraPoint=function(){var b=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new w.Point(0,b))},co.prototype.getCameraQueryGeometry=function(b){var T=this.getCameraPoint();if(b.length===1)return[b[0],T];for(var C=T.x,I=T.y,Z=T.x,q=T.y,re=0,_e=b;re<_e.length;re+=1){var qe=_e[re];C=Math.min(C,qe.x),I=Math.min(I,qe.y),Z=Math.max(Z,qe.x),q=Math.max(q,qe.y)}return[new w.Point(C,I),new w.Point(Z,I),new w.Point(Z,q),new w.Point(C,q),new w.Point(C,I)]},Object.defineProperties(co.prototype,Xo);var mo=function(b){var T,C,I,Z;this._hashName=b&&encodeURIComponent(b),w.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(T=this._updateHashUnthrottled.bind(this),C=!1,I=null,Z=function(){I=null,C&&(T(),I=setTimeout(Z,300),C=!1)},function(){return C=!0,I||Z(),I})};mo.prototype.addTo=function(b){return this._map=b,w.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},mo.prototype.remove=function(){return w.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},mo.prototype.getHashString=function(b){var T=this._map.getCenter(),C=Math.round(100*this._map.getZoom())/100,I=Math.ceil((C*Math.LN2+Math.log(512/360/.5))/Math.LN10),Z=Math.pow(10,I),q=Math.round(T.lng*Z)/Z,re=Math.round(T.lat*Z)/Z,_e=this._map.getBearing(),qe=this._map.getPitch(),yt="";if(yt+=b?"/"+q+"/"+re+"/"+C:C+"/"+re+"/"+q,(_e||qe)&&(yt+="/"+Math.round(10*_e)/10),qe&&(yt+="/"+Math.round(qe)),this._hashName){var Ut=this._hashName,Zt=!1,Ht=w.window.location.hash.slice(1).split("&").map(function(sr){var or=sr.split("=")[0];return or===Ut?(Zt=!0,or+"="+yt):sr}).filter(function(sr){return sr});return Zt||Ht.push(Ut+"="+yt),"#"+Ht.join("&")}return"#"+yt},mo.prototype._getCurrentHash=function(){var b,T=this,C=w.window.location.hash.replace("#","");return this._hashName?(C.split("&").map(function(I){return I.split("=")}).forEach(function(I){I[0]===T._hashName&&(b=I)}),(b&&b[1]||"").split("/")):C.split("/")},mo.prototype._onHashChange=function(){var b=this._getCurrentHash();if(b.length>=3&&!b.some(function(C){return isNaN(C)})){var T=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(b[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+b[2],+b[1]],zoom:+b[0],bearing:T,pitch:+(b[4]||0)}),!0}return!1},mo.prototype._updateHashUnthrottled=function(){var b=w.window.location.href.replace(/(#.+)?$/,this.getHashString());try{w.window.history.replaceState(w.window.history.state,null,b)}catch(T){}};var ad={linearity:.3,easing:w.bezier(0,0,.3,1)},Of=w.extend({deceleration:2500,maxSpeed:1400},ad),bp=w.extend({deceleration:20,maxSpeed:1400},ad),_v=w.extend({deceleration:1e3,maxSpeed:360},ad),ga=w.extend({deceleration:1e3,maxSpeed:90},ad),Sp=function(b){this._map=b,this.clear()};function Gc(b,T){(!b.duration||b.duration<T.duration)&&(b.duration=T.duration,b.easing=T.easing)}function Hs(b,T,C){var I=C.maxSpeed,Z=C.linearity,q=C.deceleration,re=w.clamp(b*Z/(T/1e3),-I,I),_e=Math.abs(re)/(q*Z);return{easing:C.easing,duration:1e3*_e,amount:re*(_e/2)}}Sp.prototype.clear=function(){this._inertiaBuffer=[]},Sp.prototype.record=function(b){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:w.browser.now(),settings:b})},Sp.prototype._drainInertiaBuffer=function(){for(var b=this._inertiaBuffer,T=w.browser.now();b.length>0&&T-b[0].time>160;)b.shift()},Sp.prototype._onMoveEnd=function(b){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var T={zoom:0,bearing:0,pitch:0,pan:new w.Point(0,0),pinchAround:void 0,around:void 0},C=0,I=this._inertiaBuffer;C<I.length;C+=1){var Z=I[C].settings;T.zoom+=Z.zoomDelta||0,T.bearing+=Z.bearingDelta||0,T.pitch+=Z.pitchDelta||0,Z.panDelta&&T.pan._add(Z.panDelta),Z.around&&(T.around=Z.around),Z.pinchAround&&(T.pinchAround=Z.pinchAround)}var q=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,re={};if(T.pan.mag()){var _e=Hs(T.pan.mag(),q,w.extend({},Of,b||{}));re.offset=T.pan.mult(_e.amount/T.pan.mag()),re.center=this._map.transform.center,Gc(re,_e)}if(T.zoom){var qe=Hs(T.zoom,q,bp);re.zoom=this._map.transform.zoom+qe.amount,Gc(re,qe)}if(T.bearing){var yt=Hs(T.bearing,q,_v);re.bearing=this._map.transform.bearing+w.clamp(yt.amount,-179,179),Gc(re,yt)}if(T.pitch){var Ut=Hs(T.pitch,q,ga);re.pitch=this._map.transform.pitch+Ut.amount,Gc(re,Ut)}if(re.zoom||re.bearing){var Zt=T.pinchAround===void 0?T.around:T.pinchAround;re.around=Zt?this._map.unproject(Zt):this._map.getCenter()}return this.clear(),w.extend(re,{noMoveStart:!0})}};var ws=function(b){function T(I,Z,q,re){re===void 0&&(re={});var _e=G.mousePos(Z.getCanvasContainer(),q),qe=Z.unproject(_e);b.call(this,I,w.extend({point:_e,lngLat:qe,originalEvent:q},re)),this._defaultPrevented=!1,this.target=Z}b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T;var C={defaultPrevented:{configurable:!0}};return T.prototype.preventDefault=function(){this._defaultPrevented=!0},C.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(T.prototype,C),T}(w.Event),fh=function(b){function T(I,Z,q){var re=I==="touchend"?q.changedTouches:q.touches,_e=G.touchPos(Z.getCanvasContainer(),re),qe=_e.map(function(Zt){return Z.unproject(Zt)}),yt=_e.reduce(function(Zt,Ht,sr,or){return Zt.add(Ht.div(or.length))},new w.Point(0,0)),Ut=Z.unproject(yt);b.call(this,I,{points:_e,point:yt,lngLats:qe,lngLat:Ut,originalEvent:q}),this._defaultPrevented=!1}b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T;var C={defaultPrevented:{configurable:!0}};return T.prototype.preventDefault=function(){this._defaultPrevented=!0},C.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(T.prototype,C),T}(w.Event),od=function(b){function T(I,Z,q){b.call(this,I,{originalEvent:q}),this._defaultPrevented=!1}b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T;var C={defaultPrevented:{configurable:!0}};return T.prototype.preventDefault=function(){this._defaultPrevented=!0},C.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(T.prototype,C),T}(w.Event),Os=function(b,T){this._map=b,this._clickTolerance=T.clickTolerance};Os.prototype.reset=function(){delete this._mousedownPos},Os.prototype.wheel=function(b){return this._firePreventable(new od(b.type,this._map,b))},Os.prototype.mousedown=function(b,T){return this._mousedownPos=T,this._firePreventable(new ws(b.type,this._map,b))},Os.prototype.mouseup=function(b){this._map.fire(new ws(b.type,this._map,b))},Os.prototype.click=function(b,T){this._mousedownPos&&this._mousedownPos.dist(T)>=this._clickTolerance||this._map.fire(new ws(b.type,this._map,b))},Os.prototype.dblclick=function(b){return this._firePreventable(new ws(b.type,this._map,b))},Os.prototype.mouseover=function(b){this._map.fire(new ws(b.type,this._map,b))},Os.prototype.mouseout=function(b){this._map.fire(new ws(b.type,this._map,b))},Os.prototype.touchstart=function(b){return this._firePreventable(new fh(b.type,this._map,b))},Os.prototype.touchmove=function(b){this._map.fire(new fh(b.type,this._map,b))},Os.prototype.touchend=function(b){this._map.fire(new fh(b.type,this._map,b))},Os.prototype.touchcancel=function(b){this._map.fire(new fh(b.type,this._map,b))},Os.prototype._firePreventable=function(b){if(this._map.fire(b),b.defaultPrevented)return{}},Os.prototype.isEnabled=function(){return!0},Os.prototype.isActive=function(){return!1},Os.prototype.enable=function(){},Os.prototype.disable=function(){};var zi=function(b){this._map=b};zi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},zi.prototype.mousemove=function(b){this._map.fire(new ws(b.type,this._map,b))},zi.prototype.mousedown=function(){this._delayContextMenu=!0},zi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ws("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},zi.prototype.contextmenu=function(b){this._delayContextMenu?this._contextMenuEvent=b:this._map.fire(new ws(b.type,this._map,b)),this._map.listens("contextmenu")&&b.preventDefault()},zi.prototype.isEnabled=function(){return!0},zi.prototype.isActive=function(){return!1},zi.prototype.enable=function(){},zi.prototype.disable=function(){};var ju=function(b,T){this._map=b,this._el=b.getCanvasContainer(),this._container=b.getContainer(),this._clickTolerance=T.clickTolerance||1};function Xc(b,T){for(var C={},I=0;I<b.length;I++)C[b[I].identifier]=T[I];return C}ju.prototype.isEnabled=function(){return!!this._enabled},ju.prototype.isActive=function(){return!!this._active},ju.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ju.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ju.prototype.mousedown=function(b,T){this.isEnabled()&&b.shiftKey&&b.button===0&&(G.disableDrag(),this._startPos=this._lastPos=T,this._active=!0)},ju.prototype.mousemoveWindow=function(b,T){if(this._active){var C=T;if(!(this._lastPos.equals(C)||!this._box&&C.dist(this._startPos)<this._clickTolerance)){var I=this._startPos;this._lastPos=C,this._box||(this._box=G.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",b));var Z=Math.min(I.x,C.x),q=Math.max(I.x,C.x),re=Math.min(I.y,C.y),_e=Math.max(I.y,C.y);G.setTransform(this._box,"translate("+Z+"px,"+re+"px)"),this._box.style.width=q-Z+"px",this._box.style.height=_e-re+"px"}}},ju.prototype.mouseupWindow=function(b,T){var C=this;if(this._active&&b.button===0){var I=this._startPos,Z=T;if(this.reset(),G.suppressClick(),I.x!==Z.x||I.y!==Z.y)return this._map.fire(new w.Event("boxzoomend",{originalEvent:b})),{cameraAnimation:function(q){return q.fitScreenCoordinates(I,Z,C._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",b)}},ju.prototype.keydown=function(b){this._active&&b.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",b))},ju.prototype.blur=function(){this.reset()},ju.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(G.remove(this._box),this._box=null),G.enableDrag(),delete this._startPos,delete this._lastPos},ju.prototype._fireEvent=function(b,T){return this._map.fire(new w.Event(b,{originalEvent:T}))};var kf=function(b){this.reset(),this.numTouches=b.numTouches};kf.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},kf.prototype.touchstart=function(b,T,C){(this.centroid||C.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=b.timeStamp),C.length===this.numTouches&&(this.centroid=function(I){for(var Z=new w.Point(0,0),q=0,re=I;q<re.length;q+=1)Z._add(re[q]);return Z.div(I.length)}(T),this.touches=Xc(C,T)))},kf.prototype.touchmove=function(b,T,C){if(!this.aborted&&this.centroid){var I=Xc(C,T);for(var Z in this.touches){var q=I[Z];(!q||q.dist(this.touches[Z])>30)&&(this.aborted=!0)}}},kf.prototype.touchend=function(b,T,C){if((!this.centroid||b.timeStamp-this.startTime>500)&&(this.aborted=!0),C.length===0){var I=!this.aborted&&this.centroid;if(this.reset(),I)return I}};var cl=function(b){this.singleTap=new kf(b),this.numTaps=b.numTaps,this.reset()};cl.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},cl.prototype.touchstart=function(b,T,C){this.singleTap.touchstart(b,T,C)},cl.prototype.touchmove=function(b,T,C){this.singleTap.touchmove(b,T,C)},cl.prototype.touchend=function(b,T,C){var I=this.singleTap.touchend(b,T,C);if(I){var Z=b.timeStamp-this.lastTime<500,q=!this.lastTap||this.lastTap.dist(I)<30;if(Z&&q||this.reset(),this.count++,this.lastTime=b.timeStamp,this.lastTap=I,this.count===this.numTaps)return this.reset(),I}};var Vo=function(){this._zoomIn=new cl({numTouches:1,numTaps:2}),this._zoomOut=new cl({numTouches:2,numTaps:1}),this.reset()};Vo.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Vo.prototype.touchstart=function(b,T,C){this._zoomIn.touchstart(b,T,C),this._zoomOut.touchstart(b,T,C)},Vo.prototype.touchmove=function(b,T,C){this._zoomIn.touchmove(b,T,C),this._zoomOut.touchmove(b,T,C)},Vo.prototype.touchend=function(b,T,C){var I=this,Z=this._zoomIn.touchend(b,T,C),q=this._zoomOut.touchend(b,T,C);return Z?(this._active=!0,b.preventDefault(),setTimeout(function(){return I.reset()},0),{cameraAnimation:function(re){return re.easeTo({duration:300,zoom:re.getZoom()+1,around:re.unproject(Z)},{originalEvent:b})}}):q?(this._active=!0,b.preventDefault(),setTimeout(function(){return I.reset()},0),{cameraAnimation:function(re){return re.easeTo({duration:300,zoom:re.getZoom()-1,around:re.unproject(q)},{originalEvent:b})}}):void 0},Vo.prototype.touchcancel=function(){this.reset()},Vo.prototype.enable=function(){this._enabled=!0},Vo.prototype.disable=function(){this._enabled=!1,this.reset()},Vo.prototype.isEnabled=function(){return this._enabled},Vo.prototype.isActive=function(){return this._active};var fu={0:1,2:2},Si=function(b){this.reset(),this._clickTolerance=b.clickTolerance||1};Si.prototype.blur=function(){this.reset()},Si.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Si.prototype._correctButton=function(b,T){return!1},Si.prototype._move=function(b,T){return{}},Si.prototype.mousedown=function(b,T){if(!this._lastPoint){var C=G.mouseButton(b);this._correctButton(b,C)&&(this._lastPoint=T,this._eventButton=C)}},Si.prototype.mousemoveWindow=function(b,T){var C=this._lastPoint;if(C){if(b.preventDefault(),function(I,Z){var q=fu[Z];return I.buttons===void 0||(I.buttons&q)!==q}(b,this._eventButton))this.reset();else if(this._moved||!(T.dist(C)<this._clickTolerance))return this._moved=!0,this._lastPoint=T,this._move(C,T)}},Si.prototype.mouseupWindow=function(b){this._lastPoint&&G.mouseButton(b)===this._eventButton&&(this._moved&&G.suppressClick(),this.reset())},Si.prototype.enable=function(){this._enabled=!0},Si.prototype.disable=function(){this._enabled=!1,this.reset()},Si.prototype.isEnabled=function(){return this._enabled},Si.prototype.isActive=function(){return this._active};var Zl=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.mousedown=function(C,I){b.prototype.mousedown.call(this,C,I),this._lastPoint&&(this._active=!0)},T.prototype._correctButton=function(C,I){return I===0&&!C.ctrlKey},T.prototype._move=function(C,I){return{around:I,panDelta:I.sub(C)}},T}(Si),hh=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype._correctButton=function(C,I){return I===0&&C.ctrlKey||I===2},T.prototype._move=function(C,I){var Z=.8*(I.x-C.x);if(Z)return this._active=!0,{bearingDelta:Z}},T.prototype.contextmenu=function(C){C.preventDefault()},T}(Si),Oh=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype._correctButton=function(C,I){return I===0&&C.ctrlKey||I===2},T.prototype._move=function(C,I){var Z=-.5*(I.y-C.y);if(Z)return this._active=!0,{pitchDelta:Z}},T.prototype.contextmenu=function(C){C.preventDefault()},T}(Si),Tc=function(b){this._minTouches=1,this._clickTolerance=b.clickTolerance||1,this.reset()};Tc.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new w.Point(0,0)},Tc.prototype.touchstart=function(b,T,C){return this._calculateTransform(b,T,C)},Tc.prototype.touchmove=function(b,T,C){if(this._active&&!(C.length<this._minTouches))return b.preventDefault(),this._calculateTransform(b,T,C)},Tc.prototype.touchend=function(b,T,C){this._calculateTransform(b,T,C),this._active&&C.length<this._minTouches&&this.reset()},Tc.prototype.touchcancel=function(){this.reset()},Tc.prototype._calculateTransform=function(b,T,C){C.length>0&&(this._active=!0);var I=Xc(C,T),Z=new w.Point(0,0),q=new w.Point(0,0),re=0;for(var _e in I){var qe=I[_e],yt=this._touches[_e];yt&&(Z._add(qe),q._add(qe.sub(yt)),re++,I[_e]=qe)}if(this._touches=I,!(re<this._minTouches)&&q.mag()){var Ut=q.div(re);if(this._sum._add(Ut),!(this._sum.mag()<this._clickTolerance))return{around:Z.div(re),panDelta:Ut}}},Tc.prototype.enable=function(){this._enabled=!0},Tc.prototype.disable=function(){this._enabled=!1,this.reset()},Tc.prototype.isEnabled=function(){return this._enabled},Tc.prototype.isActive=function(){return this._active};var bu=function(){this.reset()};function Ep(b,T,C){for(var I=0;I<b.length;I++)if(b[I].identifier===C)return T[I]}function Mc(b,T){return Math.log(b/T)/Math.LN2}bu.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},bu.prototype._start=function(b){},bu.prototype._move=function(b,T,C){return{}},bu.prototype.touchstart=function(b,T,C){this._firstTwoTouches||C.length<2||(this._firstTwoTouches=[C[0].identifier,C[1].identifier],this._start([T[0],T[1]]))},bu.prototype.touchmove=function(b,T,C){if(this._firstTwoTouches){b.preventDefault();var I=this._firstTwoTouches,Z=I[1],q=Ep(C,T,I[0]),re=Ep(C,T,Z);if(q&&re){var _e=this._aroundCenter?null:q.add(re).div(2);return this._move([q,re],_e,b)}}},bu.prototype.touchend=function(b,T,C){if(this._firstTwoTouches){var I=this._firstTwoTouches,Z=I[1],q=Ep(C,T,I[0]),re=Ep(C,T,Z);q&&re||(this._active&&G.suppressClick(),this.reset())}},bu.prototype.touchcancel=function(){this.reset()},bu.prototype.enable=function(b){this._enabled=!0,this._aroundCenter=!!b&&b.around==="center"},bu.prototype.disable=function(){this._enabled=!1,this.reset()},bu.prototype.isEnabled=function(){return this._enabled},bu.prototype.isActive=function(){return this._active};var eu=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.reset=function(){b.prototype.reset.call(this),delete this._distance,delete this._startDistance},T.prototype._start=function(C){this._startDistance=this._distance=C[0].dist(C[1])},T.prototype._move=function(C,I){var Z=this._distance;if(this._distance=C[0].dist(C[1]),this._active||!(Math.abs(Mc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Mc(this._distance,Z),pinchAround:I}},T}(bu);function fl(b,T){return 180*b.angleWith(T)/Math.PI}var xv=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.reset=function(){b.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},T.prototype._start=function(C){this._startVector=this._vector=C[0].sub(C[1]),this._minDiameter=C[0].dist(C[1])},T.prototype._move=function(C,I){var Z=this._vector;if(this._vector=C[0].sub(C[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:fl(this._vector,Z),pinchAround:I}},T.prototype._isBelowThreshold=function(C){this._minDiameter=Math.min(this._minDiameter,C.mag());var I=25/(Math.PI*this._minDiameter)*360,Z=fl(C,this._startVector);return Math.abs(Z)<I},T}(bu);function kh(b){return Math.abs(b.y)>Math.abs(b.x)}var Fh=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.reset=function(){b.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},T.prototype._start=function(C){this._lastPoints=C,kh(C[0].sub(C[1]))&&(this._valid=!1)},T.prototype._move=function(C,I,Z){var q=C[0].sub(this._lastPoints[0]),re=C[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(q,re,Z.timeStamp),this._valid)return this._lastPoints=C,this._active=!0,{pitchDelta:(q.y+re.y)/2*-.5}},T.prototype.gestureBeginsVertically=function(C,I,Z){if(this._valid!==void 0)return this._valid;var q=C.mag()>=2,re=I.mag()>=2;if(q||re){if(!q||!re)return this._firstMove===void 0&&(this._firstMove=Z),Z-this._firstMove<100&&void 0;var _e=C.y>0==I.y>0;return kh(C)&&kh(I)&&_e}},T}(bu),zd={panStep:100,bearingStep:15,pitchStep:10},lc=function(){var b=zd;this._panStep=b.panStep,this._bearingStep=b.bearingStep,this._pitchStep=b.pitchStep,this._rotationDisabled=!1};function tu(b){return b*(2-b)}lc.prototype.blur=function(){this.reset()},lc.prototype.reset=function(){this._active=!1},lc.prototype.keydown=function(b){var T=this;if(!(b.altKey||b.ctrlKey||b.metaKey)){var C=0,I=0,Z=0,q=0,re=0;switch(b.keyCode){case 61:case 107:case 171:case 187:C=1;break;case 189:case 109:case 173:C=-1;break;case 37:b.shiftKey?I=-1:(b.preventDefault(),q=-1);break;case 39:b.shiftKey?I=1:(b.preventDefault(),q=1);break;case 38:b.shiftKey?Z=1:(b.preventDefault(),re=-1);break;case 40:b.shiftKey?Z=-1:(b.preventDefault(),re=1);break;default:return}return this._rotationDisabled&&(I=0,Z=0),{cameraAnimation:function(_e){var qe=_e.getZoom();_e.easeTo({duration:300,easeId:"keyboardHandler",easing:tu,zoom:C?Math.round(qe)+C*(b.shiftKey?2:1):qe,bearing:_e.getBearing()+I*T._bearingStep,pitch:_e.getPitch()+Z*T._pitchStep,offset:[-q*T._panStep,-re*T._panStep],center:_e.getCenter()},{originalEvent:b})}}}},lc.prototype.enable=function(){this._enabled=!0},lc.prototype.disable=function(){this._enabled=!1,this.reset()},lc.prototype.isEnabled=function(){return this._enabled},lc.prototype.isActive=function(){return this._active},lc.prototype.disableRotation=function(){this._rotationDisabled=!0},lc.prototype.enableRotation=function(){this._rotationDisabled=!1};var $a=function(b,T){this._map=b,this._el=b.getCanvasContainer(),this._handler=T,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,w.bindAll(["_onTimeout"],this)};$a.prototype.setZoomRate=function(b){this._defaultZoomRate=b},$a.prototype.setWheelZoomRate=function(b){this._wheelZoomRate=b},$a.prototype.isEnabled=function(){return!!this._enabled},$a.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},$a.prototype.isZooming=function(){return!!this._zooming},$a.prototype.enable=function(b){this.isEnabled()||(this._enabled=!0,this._aroundCenter=b&&b.around==="center")},$a.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},$a.prototype.wheel=function(b){if(this.isEnabled()){var T=b.deltaMode===w.window.WheelEvent.DOM_DELTA_LINE?40*b.deltaY:b.deltaY,C=w.browser.now(),I=C-(this._lastWheelEventTime||0);this._lastWheelEventTime=C,T!==0&&T%4.000244140625==0?this._type="wheel":T!==0&&Math.abs(T)<4?this._type="trackpad":I>400?(this._type=null,this._lastValue=T,this._timeout=setTimeout(this._onTimeout,40,b)):this._type||(this._type=Math.abs(I*T)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,T+=this._lastValue)),b.shiftKey&&T&&(T/=4),this._type&&(this._lastWheelEvent=b,this._delta-=T,this._active||this._start(b)),b.preventDefault()}},$a.prototype._onTimeout=function(b){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(b)},$a.prototype._start=function(b){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var T=G.mousePos(this._el,b);this._around=w.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(T)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},$a.prototype.renderFrame=function(){var b=this;if(this._frameId&&(this._frameId=null,this.isActive())){var T=this._map.transform;if(this._delta!==0){var C=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,I=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&I!==0&&(I=1/I);var Z=typeof this._targetZoom=="number"?T.zoomScale(this._targetZoom):T.scale;this._targetZoom=Math.min(T.maxZoom,Math.max(T.minZoom,T.scaleZoom(Z*I))),this._type==="wheel"&&(this._startZoom=T.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var q,re=typeof this._targetZoom=="number"?this._targetZoom:T.zoom,_e=this._startZoom,qe=this._easing,yt=!1;if(this._type==="wheel"&&_e&&qe){var Ut=Math.min((w.browser.now()-this._lastWheelEventTime)/200,1),Zt=qe(Ut);q=w.number(_e,re,Zt),Ut<1?this._frameId||(this._frameId=!0):yt=!0}else q=re,yt=!0;return this._active=!0,yt&&(this._active=!1,this._finishTimeout=setTimeout(function(){b._zooming=!1,b._handler._triggerRenderFrame(),delete b._targetZoom,delete b._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!yt,zoomDelta:q-T.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},$a.prototype._smoothOutEasing=function(b){var T=w.ease;if(this._prevEase){var C=this._prevEase,I=(w.browser.now()-C.start)/C.duration,Z=C.easing(I+.01)-C.easing(I),q=.27/Math.sqrt(Z*Z+1e-4)*.01,re=Math.sqrt(.0729-q*q);T=w.bezier(q,re,.25,1)}return this._prevEase={start:w.browser.now(),duration:b,easing:T},T},$a.prototype.blur=function(){this.reset()},$a.prototype.reset=function(){this._active=!1};var Cs=function(b,T){this._clickZoom=b,this._tapZoom=T};Cs.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Cs.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Cs.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Cs.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Ql=function(){this.reset()};Ql.prototype.reset=function(){this._active=!1},Ql.prototype.blur=function(){this.reset()},Ql.prototype.dblclick=function(b,T){return b.preventDefault(),{cameraAnimation:function(C){C.easeTo({duration:300,zoom:C.getZoom()+(b.shiftKey?-1:1),around:C.unproject(T)},{originalEvent:b})}}},Ql.prototype.enable=function(){this._enabled=!0},Ql.prototype.disable=function(){this._enabled=!1,this.reset()},Ql.prototype.isEnabled=function(){return this._enabled},Ql.prototype.isActive=function(){return this._active};var Wu=function(){this._tap=new cl({numTouches:1,numTaps:1}),this.reset()};Wu.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Wu.prototype.touchstart=function(b,T,C){this._swipePoint||(this._tapTime&&b.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?C.length>0&&(this._swipePoint=T[0],this._swipeTouch=C[0].identifier):this._tap.touchstart(b,T,C))},Wu.prototype.touchmove=function(b,T,C){if(this._tapTime){if(this._swipePoint){if(C[0].identifier!==this._swipeTouch)return;var I=T[0],Z=I.y-this._swipePoint.y;return this._swipePoint=I,b.preventDefault(),this._active=!0,{zoomDelta:Z/128}}}else this._tap.touchmove(b,T,C)},Wu.prototype.touchend=function(b,T,C){this._tapTime?this._swipePoint&&C.length===0&&this.reset():this._tap.touchend(b,T,C)&&(this._tapTime=b.timeStamp)},Wu.prototype.touchcancel=function(){this.reset()},Wu.prototype.enable=function(){this._enabled=!0},Wu.prototype.disable=function(){this._enabled=!1,this.reset()},Wu.prototype.isEnabled=function(){return this._enabled},Wu.prototype.isActive=function(){return this._active};var Ff=function(b,T,C){this._el=b,this._mousePan=T,this._touchPan=C};Ff.prototype.enable=function(b){this._inertiaOptions=b||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Ff.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Ff.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Ff.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Rc=function(b,T,C){this._pitchWithRotate=b.pitchWithRotate,this._mouseRotate=T,this._mousePitch=C};Rc.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Rc.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Rc.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Rc.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Qu=function(b,T,C,I){this._el=b,this._touchZoom=T,this._touchRotate=C,this._tapDragZoom=I,this._rotationDisabled=!1,this._enabled=!0};Qu.prototype.enable=function(b){this._touchZoom.enable(b),this._rotationDisabled||this._touchRotate.enable(b),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Qu.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Qu.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Qu.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Qu.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Qu.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Su=function(b){return b.zoom||b.drag||b.pitch||b.rotate},Dh=function(b){function T(){b.apply(this,arguments)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T}(w.Event);function ea(b){return b.panDelta&&b.panDelta.mag()||b.zoomDelta||b.bearingDelta||b.pitchDelta}var Ei=function(b,T){this._map=b,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Sp(b),this._bearingSnap=T.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(T),w.bindAll(["handleEvent","handleWindowEvent"],this);var C=this._el;this._listeners=[[C,"touchstart",{passive:!0}],[C,"touchmove",{passive:!1}],[C,"touchend",void 0],[C,"touchcancel",void 0],[C,"mousedown",void 0],[C,"mousemove",void 0],[C,"mouseup",void 0],[w.window.document,"mousemove",{capture:!0}],[w.window.document,"mouseup",void 0],[C,"mouseover",void 0],[C,"mouseout",void 0],[C,"dblclick",void 0],[C,"click",void 0],[C,"keydown",{capture:!1}],[C,"keyup",void 0],[C,"wheel",{passive:!1}],[C,"contextmenu",void 0],[w.window,"blur",void 0]];for(var I=0,Z=this._listeners;I<Z.length;I+=1){var q=Z[I],re=q[0];G.addEventListener(re,q[1],re===w.window.document?this.handleWindowEvent:this.handleEvent,q[2])}};Ei.prototype.destroy=function(){for(var b=0,T=this._listeners;b<T.length;b+=1){var C=T[b],I=C[0];G.removeEventListener(I,C[1],I===w.window.document?this.handleWindowEvent:this.handleEvent,C[2])}},Ei.prototype._addDefaultHandlers=function(b){var T=this._map,C=T.getCanvasContainer();this._add("mapEvent",new Os(T,b));var I=T.boxZoom=new ju(T,b);this._add("boxZoom",I);var Z=new Vo,q=new Ql;T.doubleClickZoom=new Cs(q,Z),this._add("tapZoom",Z),this._add("clickZoom",q);var re=new Wu;this._add("tapDragZoom",re);var _e=T.touchPitch=new Fh;this._add("touchPitch",_e);var qe=new hh(b),yt=new Oh(b);T.dragRotate=new Rc(b,qe,yt),this._add("mouseRotate",qe,["mousePitch"]),this._add("mousePitch",yt,["mouseRotate"]);var Ut=new Zl(b),Zt=new Tc(b);T.dragPan=new Ff(C,Ut,Zt),this._add("mousePan",Ut),this._add("touchPan",Zt,["touchZoom","touchRotate"]);var Ht=new xv,sr=new eu;T.touchZoomRotate=new Qu(C,sr,Ht,re),this._add("touchRotate",Ht,["touchPan","touchZoom"]),this._add("touchZoom",sr,["touchPan","touchRotate"]);var or=T.scrollZoom=new $a(T,this);this._add("scrollZoom",or,["mousePan"]);var Er=T.keyboard=new lc;this._add("keyboard",Er),this._add("blockableMapEvent",new zi(T));for(var rr=0,wr=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];rr<wr.length;rr+=1){var Fr=wr[rr];b.interactive&&b[Fr]&&T[Fr].enable(b[Fr])}},Ei.prototype._add=function(b,T,C){this._handlers.push({handlerName:b,handler:T,allowed:C}),this._handlersById[b]=T},Ei.prototype.stop=function(b){if(!this._updatingCamera){for(var T=0,C=this._handlers;T<C.length;T+=1)C[T].handler.reset();this._inertia.clear(),this._fireEvents({},{},b),this._changes=[]}},Ei.prototype.isActive=function(){for(var b=0,T=this._handlers;b<T.length;b+=1)if(T[b].handler.isActive())return!0;return!1},Ei.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Ei.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Ei.prototype.isMoving=function(){return!!Su(this._eventsInProgress)||this.isZooming()},Ei.prototype._blockedByActive=function(b,T,C){for(var I in b)if(I!==C&&(!T||T.indexOf(I)<0))return!0;return!1},Ei.prototype.handleWindowEvent=function(b){this.handleEvent(b,b.type+"Window")},Ei.prototype._getMapTouches=function(b){for(var T=[],C=0,I=b;C<I.length;C+=1){var Z=I[C];this._el.contains(Z.target)&&T.push(Z)}return T},Ei.prototype.handleEvent=function(b,T){this._updatingCamera=!0;for(var C=b.type==="renderFrame"?void 0:b,I={needsRenderFrame:!1},Z={},q={},re=b.touches?this._getMapTouches(b.touches):void 0,_e=re?G.touchPos(this._el,re):G.mousePos(this._el,b),qe=0,yt=this._handlers;qe<yt.length;qe+=1){var Ut=yt[qe],Zt=Ut.handlerName,Ht=Ut.handler,sr=Ut.allowed;if(Ht.isEnabled()){var or=void 0;this._blockedByActive(q,sr,Zt)?Ht.reset():Ht[T||b.type]&&(or=Ht[T||b.type](b,_e,re),this.mergeHandlerResult(I,Z,or,Zt,C),or&&or.needsRenderFrame&&this._triggerRenderFrame()),(or||Ht.isActive())&&(q[Zt]=Ht)}}var Er={};for(var rr in this._previousActiveHandlers)q[rr]||(Er[rr]=C);this._previousActiveHandlers=q,(Object.keys(Er).length||ea(I))&&(this._changes.push([I,Z,Er]),this._triggerRenderFrame()),(Object.keys(q).length||ea(I))&&this._map._stop(!0),this._updatingCamera=!1;var wr=I.cameraAnimation;wr&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],wr(this._map))},Ei.prototype.mergeHandlerResult=function(b,T,C,I,Z){if(C){w.extend(b,C);var q={handlerName:I,originalEvent:C.originalEvent||Z};C.zoomDelta!==void 0&&(T.zoom=q),C.panDelta!==void 0&&(T.drag=q),C.pitchDelta!==void 0&&(T.pitch=q),C.bearingDelta!==void 0&&(T.rotate=q)}},Ei.prototype._applyChanges=function(){for(var b={},T={},C={},I=0,Z=this._changes;I<Z.length;I+=1){var q=Z[I],re=q[0],_e=q[1],qe=q[2];re.panDelta&&(b.panDelta=(b.panDelta||new w.Point(0,0))._add(re.panDelta)),re.zoomDelta&&(b.zoomDelta=(b.zoomDelta||0)+re.zoomDelta),re.bearingDelta&&(b.bearingDelta=(b.bearingDelta||0)+re.bearingDelta),re.pitchDelta&&(b.pitchDelta=(b.pitchDelta||0)+re.pitchDelta),re.around!==void 0&&(b.around=re.around),re.pinchAround!==void 0&&(b.pinchAround=re.pinchAround),re.noInertia&&(b.noInertia=re.noInertia),w.extend(T,_e),w.extend(C,qe)}this._updateMapTransform(b,T,C),this._changes=[]},Ei.prototype._updateMapTransform=function(b,T,C){var I=this._map,Z=I.transform;if(!ea(b))return this._fireEvents(T,C,!0);var q=b.panDelta,re=b.zoomDelta,_e=b.bearingDelta,qe=b.pitchDelta,yt=b.around,Ut=b.pinchAround;Ut!==void 0&&(yt=Ut),I._stop(!0),yt=yt||I.transform.centerPoint;var Zt=Z.pointLocation(q?yt.sub(q):yt);_e&&(Z.bearing+=_e),qe&&(Z.pitch+=qe),re&&(Z.zoom+=re),Z.setLocationAtPoint(Zt,yt),this._map._update(),b.noInertia||this._inertia.record(b),this._fireEvents(T,C,!0)},Ei.prototype._fireEvents=function(b,T,C){var I=this,Z=Su(this._eventsInProgress),q=Su(b),re={};for(var _e in b)this._eventsInProgress[_e]||(re[_e+"start"]=b[_e].originalEvent),this._eventsInProgress[_e]=b[_e];for(var qe in!Z&&q&&this._fireEvent("movestart",q.originalEvent),re)this._fireEvent(qe,re[qe]);for(var yt in q&&this._fireEvent("move",q.originalEvent),b)this._fireEvent(yt,b[yt].originalEvent);var Ut,Zt={};for(var Ht in this._eventsInProgress){var sr=this._eventsInProgress[Ht],or=sr.handlerName,Er=sr.originalEvent;this._handlersById[or].isActive()||(delete this._eventsInProgress[Ht],Zt[Ht+"end"]=Ut=T[or]||Er)}for(var rr in Zt)this._fireEvent(rr,Zt[rr]);var wr=Su(this._eventsInProgress);if(C&&(Z||q)&&!wr){this._updatingCamera=!0;var Fr=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Wr=function(hn){return hn!==0&&-I._bearingSnap<hn&&hn<I._bearingSnap};Fr?(Wr(Fr.bearing||this._map.getBearing())&&(Fr.bearing=0),this._map.easeTo(Fr,{originalEvent:Ut})):(this._map.fire(new w.Event("moveend",{originalEvent:Ut})),Wr(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Ei.prototype._fireEvent=function(b,T){this._map.fire(new w.Event(b,T?{originalEvent:T}:{}))},Ei.prototype._requestFrame=function(){var b=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(T){delete b._frameId,b.handleEvent(new Dh("renderFrame",{timeStamp:T})),b._applyChanges()})},Ei.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var wl=function(b){function T(C,I){b.call(this),this._moving=!1,this._zooming=!1,this.transform=C,this._bearingSnap=I.bearingSnap,w.bindAll(["_renderFrameCallback"],this)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.getCenter=function(){return new w.LngLat(this.transform.center.lng,this.transform.center.lat)},T.prototype.setCenter=function(C,I){return this.jumpTo({center:C},I)},T.prototype.panBy=function(C,I,Z){return C=w.Point.convert(C).mult(-1),this.panTo(this.transform.center,w.extend({offset:C},I),Z)},T.prototype.panTo=function(C,I,Z){return this.easeTo(w.extend({center:C},I),Z)},T.prototype.getZoom=function(){return this.transform.zoom},T.prototype.setZoom=function(C,I){return this.jumpTo({zoom:C},I),this},T.prototype.zoomTo=function(C,I,Z){return this.easeTo(w.extend({zoom:C},I),Z)},T.prototype.zoomIn=function(C,I){return this.zoomTo(this.getZoom()+1,C,I),this},T.prototype.zoomOut=function(C,I){return this.zoomTo(this.getZoom()-1,C,I),this},T.prototype.getBearing=function(){return this.transform.bearing},T.prototype.setBearing=function(C,I){return this.jumpTo({bearing:C},I),this},T.prototype.getPadding=function(){return this.transform.padding},T.prototype.setPadding=function(C,I){return this.jumpTo({padding:C},I),this},T.prototype.rotateTo=function(C,I,Z){return this.easeTo(w.extend({bearing:C},I),Z)},T.prototype.resetNorth=function(C,I){return this.rotateTo(0,w.extend({duration:1e3},C),I),this},T.prototype.resetNorthPitch=function(C,I){return this.easeTo(w.extend({bearing:0,pitch:0,duration:1e3},C),I),this},T.prototype.snapToNorth=function(C,I){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(C,I):this},T.prototype.getPitch=function(){return this.transform.pitch},T.prototype.setPitch=function(C,I){return this.jumpTo({pitch:C},I),this},T.prototype.cameraForBounds=function(C,I){C=w.LngLatBounds.convert(C);var Z=I&&I.bearing||0;return this._cameraForBoxAndBearing(C.getNorthWest(),C.getSouthEast(),Z,I)},T.prototype._cameraForBoxAndBearing=function(C,I,Z,q){var re={top:0,bottom:0,right:0,left:0};if(typeof(q=w.extend({padding:re,offset:[0,0],maxZoom:this.transform.maxZoom},q)).padding=="number"){var _e=q.padding;q.padding={top:_e,bottom:_e,right:_e,left:_e}}q.padding=w.extend(re,q.padding);var qe=this.transform,yt=qe.padding,Ut=qe.project(w.LngLat.convert(C)),Zt=qe.project(w.LngLat.convert(I)),Ht=Ut.rotate(-Z*Math.PI/180),sr=Zt.rotate(-Z*Math.PI/180),or=new w.Point(Math.max(Ht.x,sr.x),Math.max(Ht.y,sr.y)),Er=new w.Point(Math.min(Ht.x,sr.x),Math.min(Ht.y,sr.y)),rr=or.sub(Er),wr=(qe.width-(yt.left+yt.right+q.padding.left+q.padding.right))/rr.x,Fr=(qe.height-(yt.top+yt.bottom+q.padding.top+q.padding.bottom))/rr.y;if(!(Fr<0||wr<0)){var Wr=Math.min(qe.scaleZoom(qe.scale*Math.min(wr,Fr)),q.maxZoom),hn=typeof q.offset.x=="number"?new w.Point(q.offset.x,q.offset.y):w.Point.convert(q.offset),an=new w.Point((q.padding.left-q.padding.right)/2,(q.padding.top-q.padding.bottom)/2).rotate(Z*Math.PI/180),bn=hn.add(an).mult(qe.scale/qe.zoomScale(Wr));return{center:qe.unproject(Ut.add(Zt).div(2).sub(bn)),zoom:Wr,bearing:Z}}w.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},T.prototype.fitBounds=function(C,I,Z){return this._fitInternal(this.cameraForBounds(C,I),I,Z)},T.prototype.fitScreenCoordinates=function(C,I,Z,q,re){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(w.Point.convert(C)),this.transform.pointLocation(w.Point.convert(I)),Z,q),q,re)},T.prototype._fitInternal=function(C,I,Z){return C?(delete(I=w.extend(C,I)).padding,I.linear?this.easeTo(I,Z):this.flyTo(I,Z)):this},T.prototype.jumpTo=function(C,I){this.stop();var Z=this.transform,q=!1,re=!1,_e=!1;return"zoom"in C&&Z.zoom!==+C.zoom&&(q=!0,Z.zoom=+C.zoom),C.center!==void 0&&(Z.center=w.LngLat.convert(C.center)),"bearing"in C&&Z.bearing!==+C.bearing&&(re=!0,Z.bearing=+C.bearing),"pitch"in C&&Z.pitch!==+C.pitch&&(_e=!0,Z.pitch=+C.pitch),C.padding==null||Z.isPaddingEqual(C.padding)||(Z.padding=C.padding),this.fire(new w.Event("movestart",I)).fire(new w.Event("move",I)),q&&this.fire(new w.Event("zoomstart",I)).fire(new w.Event("zoom",I)).fire(new w.Event("zoomend",I)),re&&this.fire(new w.Event("rotatestart",I)).fire(new w.Event("rotate",I)).fire(new w.Event("rotateend",I)),_e&&this.fire(new w.Event("pitchstart",I)).fire(new w.Event("pitch",I)).fire(new w.Event("pitchend",I)),this.fire(new w.Event("moveend",I))},T.prototype.easeTo=function(C,I){var Z=this;this._stop(!1,C.easeId),((C=w.extend({offset:[0,0],duration:500,easing:w.ease},C)).animate===!1||!C.essential&&w.browser.prefersReducedMotion)&&(C.duration=0);var q=this.transform,re=this.getZoom(),_e=this.getBearing(),qe=this.getPitch(),yt=this.getPadding(),Ut="zoom"in C?+C.zoom:re,Zt="bearing"in C?this._normalizeBearing(C.bearing,_e):_e,Ht="pitch"in C?+C.pitch:qe,sr="padding"in C?C.padding:q.padding,or=w.Point.convert(C.offset),Er=q.centerPoint.add(or),rr=q.pointLocation(Er),wr=w.LngLat.convert(C.center||rr);this._normalizeCenter(wr);var Fr,Wr,hn=q.project(rr),an=q.project(wr).sub(hn),bn=q.zoomScale(Ut-re);C.around&&(Fr=w.LngLat.convert(C.around),Wr=q.locationPoint(Fr));var In={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ut!==re,this._rotating=this._rotating||_e!==Zt,this._pitching=this._pitching||Ht!==qe,this._padding=!q.isPaddingEqual(sr),this._easeId=C.easeId,this._prepareEase(I,C.noMoveStart,In),this._ease(function(pi){if(Z._zooming&&(q.zoom=w.number(re,Ut,pi)),Z._rotating&&(q.bearing=w.number(_e,Zt,pi)),Z._pitching&&(q.pitch=w.number(qe,Ht,pi)),Z._padding&&(q.interpolatePadding(yt,sr,pi),Er=q.centerPoint.add(or)),Fr)q.setLocationAtPoint(Fr,Wr);else{var ei=q.zoomScale(q.zoom-re),Ii=Ut>re?Math.min(2,bn):Math.max(.5,bn),ia=Math.pow(Ii,1-pi),la=q.unproject(hn.add(an.mult(pi*ia)).mult(ei));q.setLocationAtPoint(q.renderWorldCopies?la.wrap():la,Er)}Z._fireMoveEvents(I)},function(pi){Z._afterEase(I,pi)},C),this},T.prototype._prepareEase=function(C,I,Z){Z===void 0&&(Z={}),this._moving=!0,I||Z.moving||this.fire(new w.Event("movestart",C)),this._zooming&&!Z.zooming&&this.fire(new w.Event("zoomstart",C)),this._rotating&&!Z.rotating&&this.fire(new w.Event("rotatestart",C)),this._pitching&&!Z.pitching&&this.fire(new w.Event("pitchstart",C))},T.prototype._fireMoveEvents=function(C){this.fire(new w.Event("move",C)),this._zooming&&this.fire(new w.Event("zoom",C)),this._rotating&&this.fire(new w.Event("rotate",C)),this._pitching&&this.fire(new w.Event("pitch",C))},T.prototype._afterEase=function(C,I){if(!this._easeId||!I||this._easeId!==I){delete this._easeId;var Z=this._zooming,q=this._rotating,re=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Z&&this.fire(new w.Event("zoomend",C)),q&&this.fire(new w.Event("rotateend",C)),re&&this.fire(new w.Event("pitchend",C)),this.fire(new w.Event("moveend",C))}},T.prototype.flyTo=function(C,I){var Z=this;if(!C.essential&&w.browser.prefersReducedMotion){var q=w.pick(C,["center","zoom","bearing","pitch","around"]);return this.jumpTo(q,I)}this.stop(),C=w.extend({offset:[0,0],speed:1.2,curve:1.42,easing:w.ease},C);var re=this.transform,_e=this.getZoom(),qe=this.getBearing(),yt=this.getPitch(),Ut=this.getPadding(),Zt="zoom"in C?w.clamp(+C.zoom,re.minZoom,re.maxZoom):_e,Ht="bearing"in C?this._normalizeBearing(C.bearing,qe):qe,sr="pitch"in C?+C.pitch:yt,or="padding"in C?C.padding:re.padding,Er=re.zoomScale(Zt-_e),rr=w.Point.convert(C.offset),wr=re.centerPoint.add(rr),Fr=re.pointLocation(wr),Wr=w.LngLat.convert(C.center||Fr);this._normalizeCenter(Wr);var hn=re.project(Fr),an=re.project(Wr).sub(hn),bn=C.curve,In=Math.max(re.width,re.height),pi=In/Er,ei=an.mag();if("minZoom"in C){var Ii=w.clamp(Math.min(C.minZoom,_e,Zt),re.minZoom,re.maxZoom),ia=In/re.zoomScale(Ii-_e);bn=Math.sqrt(ia/ei*2)}var la=bn*bn;function Ki(Ca){var pa=(pi*pi-In*In+(Ca?-1:1)*la*la*ei*ei)/(2*(Ca?pi:In)*la*ei);return Math.log(Math.sqrt(pa*pa+1)-pa)}function bo(Ca){return(Math.exp(Ca)-Math.exp(-Ca))/2}function Ni(Ca){return(Math.exp(Ca)+Math.exp(-Ca))/2}var Oa=Ki(0),La=function(Ca){return Ni(Oa)/Ni(Oa+bn*Ca)},Ia=function(Ca){return In*((Ni(Oa)*(bo(pa=Oa+bn*Ca)/Ni(pa))-bo(Oa))/la)/ei;var pa},fa=(Ki(1)-Oa)/bn;if(Math.abs(ei)<1e-6||!isFinite(fa)){if(Math.abs(In-pi)<1e-6)return this.easeTo(C,I);var Pa=pi<In?-1:1;fa=Math.abs(Math.log(pi/In))/bn,Ia=function(){return 0},La=function(Ca){return Math.exp(Pa*bn*Ca)}}return C.duration="duration"in C?+C.duration:1e3*fa/("screenSpeed"in C?+C.screenSpeed/bn:+C.speed),C.maxDuration&&C.duration>C.maxDuration&&(C.duration=0),this._zooming=!0,this._rotating=qe!==Ht,this._pitching=sr!==yt,this._padding=!re.isPaddingEqual(or),this._prepareEase(I,!1),this._ease(function(Ca){var pa=Ca*fa,Eu=1/La(pa);re.zoom=Ca===1?Zt:_e+re.scaleZoom(Eu),Z._rotating&&(re.bearing=w.number(qe,Ht,Ca)),Z._pitching&&(re.pitch=w.number(yt,sr,Ca)),Z._padding&&(re.interpolatePadding(Ut,or,Ca),wr=re.centerPoint.add(rr));var ks=Ca===1?Wr:re.unproject(hn.add(an.mult(Ia(pa))).mult(Eu));re.setLocationAtPoint(re.renderWorldCopies?ks.wrap():ks,wr),Z._fireMoveEvents(I)},function(){return Z._afterEase(I)},C),this},T.prototype.isEasing=function(){return!!this._easeFrameId},T.prototype.stop=function(){return this._stop()},T.prototype._stop=function(C,I){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Z=this._onEaseEnd;delete this._onEaseEnd,Z.call(this,I)}if(!C){var q=this.handlers;q&&q.stop(!1)}return this},T.prototype._ease=function(C,I,Z){Z.animate===!1||Z.duration===0?(C(1),I()):(this._easeStart=w.browser.now(),this._easeOptions=Z,this._onEaseFrame=C,this._onEaseEnd=I,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},T.prototype._renderFrameCallback=function(){var C=Math.min((w.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(C)),C<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},T.prototype._normalizeBearing=function(C,I){C=w.wrap(C,-180,180);var Z=Math.abs(C-I);return Math.abs(C-360-I)<Z&&(C-=360),Math.abs(C+360-I)<Z&&(C+=360),C},T.prototype._normalizeCenter=function(C){var I=this.transform;if(I.renderWorldCopies&&!I.lngRange){var Z=C.lng-I.center.lng;C.lng+=Z>180?-360:Z<-180?360:0}},T}(w.Evented),Ju=function(b){b===void 0&&(b={}),this.options=b,w.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Ju.prototype.getDefaultPosition=function(){return"bottom-right"},Ju.prototype.onAdd=function(b){var T=this.options&&this.options.compact;return this._map=b,this._container=G.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=G.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=G.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),T&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),T===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ju.prototype.onRemove=function(){G.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ju.prototype._setElementTitle=function(b,T){var C=this._map._getUIString("AttributionControl."+T);b.title=C,b.setAttribute("aria-label",C)},Ju.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Ju.prototype._updateEditLink=function(){var b=this._editLink;b||(b=this._editLink=this._container.querySelector(".mapbox-improve-map"));var T=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||w.config.ACCESS_TOKEN}];if(b){var C=T.reduce(function(I,Z,q){return Z.value&&(I+=Z.key+"="+Z.value+(q<T.length-1?"&":"")),I},"?");b.href=w.config.FEEDBACK_URL+"/"+C+(this._map._hash?this._map._hash.getHashString(!0):""),b.rel="noopener nofollow",this._setElementTitle(b,"MapFeedback")}},Ju.prototype._updateData=function(b){!b||b.sourceDataType!=="metadata"&&b.sourceDataType!=="visibility"&&b.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Ju.prototype._updateAttributions=function(){if(this._map.style){var b=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?b=b.concat(this.options.customAttribution.map(function(_e){return typeof _e!="string"?"":_e})):typeof this.options.customAttribution=="string"&&b.push(this.options.customAttribution)),this._map.style.stylesheet){var T=this._map.style.stylesheet;this.styleOwner=T.owner,this.styleId=T.id}var C=this._map.style.sourceCaches;for(var I in C){var Z=C[I];if(Z.used){var q=Z.getSource();q.attribution&&b.indexOf(q.attribution)<0&&b.push(q.attribution)}}b.sort(function(_e,qe){return _e.length-qe.length});var re=(b=b.filter(function(_e,qe){for(var yt=qe+1;yt<b.length;yt++)if(b[yt].indexOf(_e)>=0)return!1;return!0})).join(" | ");re!==this._attribHTML&&(this._attribHTML=re,b.length?(this._innerContainer.innerHTML=re,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ju.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Gu=function(){w.bindAll(["_updateLogo"],this),w.bindAll(["_updateCompact"],this)};Gu.prototype.onAdd=function(b){this._map=b,this._container=G.create("div","mapboxgl-ctrl");var T=G.create("a","mapboxgl-ctrl-logo");return T.target="_blank",T.rel="noopener nofollow",T.href="https://www.mapbox.com/",T.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),T.setAttribute("rel","noopener nofollow"),this._container.appendChild(T),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Gu.prototype.onRemove=function(){G.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Gu.prototype.getDefaultPosition=function(){return"bottom-left"},Gu.prototype._updateLogo=function(b){b&&b.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Gu.prototype._logoRequired=function(){if(this._map.style){var b=this._map.style.sourceCaches;for(var T in b)if(b[T].getSource().mapbox_logo)return!0;return!1}},Gu.prototype._updateCompact=function(){var b=this._container.children;if(b.length){var T=b[0];this._map.getCanvasContainer().offsetWidth<250?T.classList.add("mapboxgl-compact"):T.classList.remove("mapboxgl-compact")}};var As=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};As.prototype.add=function(b){var T=++this._id;return this._queue.push({callback:b,id:T,cancelled:!1}),T},As.prototype.remove=function(b){for(var T=this._currentlyRunning,C=0,I=T?this._queue.concat(T):this._queue;C<I.length;C+=1){var Z=I[C];if(Z.id===b)return void(Z.cancelled=!0)}},As.prototype.run=function(b){b===void 0&&(b=0);var T=this._currentlyRunning=this._queue;this._queue=[];for(var C=0,I=T;C<I.length;C+=1){var Z=I[C];if(!Z.cancelled&&(Z.callback(b),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},As.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var cc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Df=w.window.HTMLImageElement,ph=w.window.HTMLElement,zo=w.window.ImageBitmap,js={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},bv=function(b){function T(I){var Z=this;if((I=w.extend({},js,I)).minZoom!=null&&I.maxZoom!=null&&I.minZoom>I.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(I.minPitch!=null&&I.maxPitch!=null&&I.minPitch>I.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(I.minPitch!=null&&I.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(I.maxPitch!=null&&I.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var q=new co(I.minZoom,I.maxZoom,I.minPitch,I.maxPitch,I.renderWorldCopies);if(b.call(this,q,I),this._interactive=I.interactive,this._maxTileCacheSize=I.maxTileCacheSize,this._failIfMajorPerformanceCaveat=I.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=I.preserveDrawingBuffer,this._antialias=I.antialias,this._trackResize=I.trackResize,this._bearingSnap=I.bearingSnap,this._refreshExpiredTiles=I.refreshExpiredTiles,this._fadeDuration=I.fadeDuration,this._crossSourceCollisions=I.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=I.collectResourceTiming,this._renderTaskQueue=new As,this._controls=[],this._mapId=w.uniqueId(),this._locale=w.extend({},cc,I.locale),this._clickTolerance=I.clickTolerance,this._requestManager=new w.RequestManager(I.transformRequest,I.accessToken),typeof I.container=="string"){if(this._container=w.window.document.getElementById(I.container),!this._container)throw new Error("Container '"+I.container+"' not found.")}else{if(!(I.container instanceof ph))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=I.container}if(I.maxBounds&&this.setMaxBounds(I.maxBounds),w.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return Z._update(!1)}),this.on("moveend",function(){return Z._update(!1)}),this.on("zoom",function(){return Z._update(!0)}),w.window!==void 0&&(w.window.addEventListener("online",this._onWindowOnline,!1),w.window.addEventListener("resize",this._onWindowResize,!1),w.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Ei(this,I),this._hash=I.hash&&new mo(typeof I.hash=="string"&&I.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:I.center,zoom:I.zoom,bearing:I.bearing,pitch:I.pitch}),I.bounds&&(this.resize(),this.fitBounds(I.bounds,w.extend({},I.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=I.localIdeographFontFamily,I.style&&this.setStyle(I.style,{localIdeographFontFamily:I.localIdeographFontFamily}),I.attributionControl&&this.addControl(new Ju({customAttribution:I.customAttribution})),this.addControl(new Gu,I.logoPosition),this.on("style.load",function(){Z.transform.unmodified&&Z.jumpTo(Z.style.stylesheet)}),this.on("data",function(re){Z._update(re.dataType==="style"),Z.fire(new w.Event(re.dataType+"data",re))}),this.on("dataloading",function(re){Z.fire(new w.Event(re.dataType+"dataloading",re))})}b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T;var C={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return T.prototype._getMapId=function(){return this._mapId},T.prototype.addControl=function(I,Z){if(Z===void 0&&(Z=I.getDefaultPosition?I.getDefaultPosition():"top-right"),!I||!I.onAdd)return this.fire(new w.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var q=I.onAdd(this);this._controls.push(I);var re=this._controlPositions[Z];return Z.indexOf("bottom")!==-1?re.insertBefore(q,re.firstChild):re.appendChild(q),this},T.prototype.removeControl=function(I){if(!I||!I.onRemove)return this.fire(new w.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Z=this._controls.indexOf(I);return Z>-1&&this._controls.splice(Z,1),I.onRemove(this),this},T.prototype.hasControl=function(I){return this._controls.indexOf(I)>-1},T.prototype.resize=function(I){var Z=this._containerDimensions(),q=Z[0],re=Z[1];if(q===this.transform.width&&re===this.transform.height)return this;this._resizeCanvas(q,re),this.transform.resize(q,re),this.painter.resize(q,re);var _e=!this._moving;return _e&&this.fire(new w.Event("movestart",I)).fire(new w.Event("move",I)),this.fire(new w.Event("resize",I)),_e&&this.fire(new w.Event("moveend",I)),this},T.prototype.getBounds=function(){return this.transform.getBounds()},T.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},T.prototype.setMaxBounds=function(I){return this.transform.setMaxBounds(w.LngLatBounds.convert(I)),this._update()},T.prototype.setMinZoom=function(I){if((I=I==null?-2:I)>=-2&&I<=this.transform.maxZoom)return this.transform.minZoom=I,this._update(),this.getZoom()<I&&this.setZoom(I),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},T.prototype.getMinZoom=function(){return this.transform.minZoom},T.prototype.setMaxZoom=function(I){if((I=I==null?22:I)>=this.transform.minZoom)return this.transform.maxZoom=I,this._update(),this.getZoom()>I&&this.setZoom(I),this;throw new Error("maxZoom must be greater than the current minZoom")},T.prototype.getMaxZoom=function(){return this.transform.maxZoom},T.prototype.setMinPitch=function(I){if((I=I==null?0:I)<0)throw new Error("minPitch must be greater than or equal to 0");if(I>=0&&I<=this.transform.maxPitch)return this.transform.minPitch=I,this._update(),this.getPitch()<I&&this.setPitch(I),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},T.prototype.getMinPitch=function(){return this.transform.minPitch},T.prototype.setMaxPitch=function(I){if((I=I==null?60:I)>60)throw new Error("maxPitch must be less than or equal to 60");if(I>=this.transform.minPitch)return this.transform.maxPitch=I,this._update(),this.getPitch()>I&&this.setPitch(I),this;throw new Error("maxPitch must be greater than the current minPitch")},T.prototype.getMaxPitch=function(){return this.transform.maxPitch},T.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},T.prototype.setRenderWorldCopies=function(I){return this.transform.renderWorldCopies=I,this._update()},T.prototype.project=function(I){return this.transform.locationPoint(w.LngLat.convert(I))},T.prototype.unproject=function(I){return this.transform.pointLocation(w.Point.convert(I))},T.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},T.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},T.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},T.prototype._createDelegatedListener=function(I,Z,q){var re,_e=this;if(I==="mouseenter"||I==="mouseover"){var qe=!1;return{layer:Z,listener:q,delegates:{mousemove:function(Ut){var Zt=_e.getLayer(Z)?_e.queryRenderedFeatures(Ut.point,{layers:[Z]}):[];Zt.length?qe||(qe=!0,q.call(_e,new ws(I,_e,Ut.originalEvent,{features:Zt}))):qe=!1},mouseout:function(){qe=!1}}}}if(I==="mouseleave"||I==="mouseout"){var yt=!1;return{layer:Z,listener:q,delegates:{mousemove:function(Ut){(_e.getLayer(Z)?_e.queryRenderedFeatures(Ut.point,{layers:[Z]}):[]).length?yt=!0:yt&&(yt=!1,q.call(_e,new ws(I,_e,Ut.originalEvent)))},mouseout:function(Ut){yt&&(yt=!1,q.call(_e,new ws(I,_e,Ut.originalEvent)))}}}}return{layer:Z,listener:q,delegates:(re={},re[I]=function(Ut){var Zt=_e.getLayer(Z)?_e.queryRenderedFeatures(Ut.point,{layers:[Z]}):[];Zt.length&&(Ut.features=Zt,q.call(_e,Ut),delete Ut.features)},re)}},T.prototype.on=function(I,Z,q){if(q===void 0)return b.prototype.on.call(this,I,Z);var re=this._createDelegatedListener(I,Z,q);for(var _e in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[I]=this._delegatedListeners[I]||[],this._delegatedListeners[I].push(re),re.delegates)this.on(_e,re.delegates[_e]);return this},T.prototype.once=function(I,Z,q){if(q===void 0)return b.prototype.once.call(this,I,Z);var re=this._createDelegatedListener(I,Z,q);for(var _e in re.delegates)this.once(_e,re.delegates[_e]);return this},T.prototype.off=function(I,Z,q){var re=this;return q===void 0?b.prototype.off.call(this,I,Z):(this._delegatedListeners&&this._delegatedListeners[I]&&function(_e){for(var qe=_e[I],yt=0;yt<qe.length;yt++){var Ut=qe[yt];if(Ut.layer===Z&&Ut.listener===q){for(var Zt in Ut.delegates)re.off(Zt,Ut.delegates[Zt]);return qe.splice(yt,1),re}}}(this._delegatedListeners),this)},T.prototype.queryRenderedFeatures=function(I,Z){if(!this.style)return[];var q;if(Z!==void 0||I===void 0||I instanceof w.Point||Array.isArray(I)||(Z=I,I=void 0),Z=Z||{},(I=I||[[0,0],[this.transform.width,this.transform.height]])instanceof w.Point||typeof I[0]=="number")q=[w.Point.convert(I)];else{var re=w.Point.convert(I[0]),_e=w.Point.convert(I[1]);q=[re,new w.Point(_e.x,re.y),_e,new w.Point(re.x,_e.y),re]}return this.style.queryRenderedFeatures(q,Z,this.transform)},T.prototype.querySourceFeatures=function(I,Z){return this.style.querySourceFeatures(I,Z)},T.prototype.setStyle=function(I,Z){return(Z=w.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Z)).diff!==!1&&Z.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&I?(this._diffStyle(I,Z),this):(this._localIdeographFontFamily=Z.localIdeographFontFamily,this._updateStyle(I,Z))},T.prototype._getUIString=function(I){var Z=this._locale[I];if(Z==null)throw new Error("Missing UI string '"+I+"'");return Z},T.prototype._updateStyle=function(I,Z){return this.style&&(this.style.setEventedParent(null),this.style._remove()),I?(this.style=new Es(this,Z||{}),this.style.setEventedParent(this,{style:this.style}),typeof I=="string"?this.style.loadURL(I):this.style.loadJSON(I),this):(delete this.style,this)},T.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Es(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},T.prototype._diffStyle=function(I,Z){var q=this;if(typeof I=="string"){var re=this._requestManager.normalizeStyleURL(I),_e=this._requestManager.transformRequest(re,w.ResourceType.Style);w.getJSON(_e,function(qe,yt){qe?q.fire(new w.ErrorEvent(qe)):yt&&q._updateDiff(yt,Z)})}else typeof I=="object"&&this._updateDiff(I,Z)},T.prototype._updateDiff=function(I,Z){try{this.style.setState(I)&&this._update(!0)}catch(q){w.warnOnce("Unable to perform style diff: "+(q.message||q.error||q)+".  Rebuilding the style from scratch."),this._updateStyle(I,Z)}},T.prototype.getStyle=function(){if(this.style)return this.style.serialize()},T.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():w.warnOnce("There is no style added to the map.")},T.prototype.addSource=function(I,Z){return this._lazyInitEmptyStyle(),this.style.addSource(I,Z),this._update(!0)},T.prototype.isSourceLoaded=function(I){var Z=this.style&&this.style.sourceCaches[I];if(Z!==void 0)return Z.loaded();this.fire(new w.ErrorEvent(new Error("There is no source with ID '"+I+"'")))},T.prototype.areTilesLoaded=function(){var I=this.style&&this.style.sourceCaches;for(var Z in I){var q=I[Z]._tiles;for(var re in q){var _e=q[re];if(_e.state!=="loaded"&&_e.state!=="errored")return!1}}return!0},T.prototype.addSourceType=function(I,Z,q){return this._lazyInitEmptyStyle(),this.style.addSourceType(I,Z,q)},T.prototype.removeSource=function(I){return this.style.removeSource(I),this._update(!0)},T.prototype.getSource=function(I){return this.style.getSource(I)},T.prototype.addImage=function(I,Z,q){q===void 0&&(q={});var re=q.pixelRatio;re===void 0&&(re=1);var _e=q.sdf;_e===void 0&&(_e=!1);var qe=q.stretchX,yt=q.stretchY,Ut=q.content;if(this._lazyInitEmptyStyle(),Z instanceof Df||zo&&Z instanceof zo){var Zt=w.browser.getImageData(Z);this.style.addImage(I,{data:new w.RGBAImage({width:Zt.width,height:Zt.height},Zt.data),pixelRatio:re,stretchX:qe,stretchY:yt,content:Ut,sdf:_e,version:0})}else{if(Z.width===void 0||Z.height===void 0)return this.fire(new w.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Ht=Z;this.style.addImage(I,{data:new w.RGBAImage({width:Z.width,height:Z.height},new Uint8Array(Z.data)),pixelRatio:re,stretchX:qe,stretchY:yt,content:Ut,sdf:_e,version:0,userImage:Ht}),Ht.onAdd&&Ht.onAdd(this,I)}},T.prototype.updateImage=function(I,Z){var q=this.style.getImage(I);if(!q)return this.fire(new w.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var re=Z instanceof Df||zo&&Z instanceof zo?w.browser.getImageData(Z):Z,_e=re.width,qe=re.height,yt=re.data;return _e===void 0||qe===void 0?this.fire(new w.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):_e!==q.data.width||qe!==q.data.height?this.fire(new w.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(q.data.replace(yt,!(Z instanceof Df||zo&&Z instanceof zo)),void this.style.updateImage(I,q))},T.prototype.hasImage=function(I){return I?!!this.style.getImage(I):(this.fire(new w.ErrorEvent(new Error("Missing required image id"))),!1)},T.prototype.removeImage=function(I){this.style.removeImage(I)},T.prototype.loadImage=function(I,Z){w.getImage(this._requestManager.transformRequest(I,w.ResourceType.Image),Z)},T.prototype.listImages=function(){return this.style.listImages()},T.prototype.addLayer=function(I,Z){return this._lazyInitEmptyStyle(),this.style.addLayer(I,Z),this._update(!0)},T.prototype.moveLayer=function(I,Z){return this.style.moveLayer(I,Z),this._update(!0)},T.prototype.removeLayer=function(I){return this.style.removeLayer(I),this._update(!0)},T.prototype.getLayer=function(I){return this.style.getLayer(I)},T.prototype.setLayerZoomRange=function(I,Z,q){return this.style.setLayerZoomRange(I,Z,q),this._update(!0)},T.prototype.setFilter=function(I,Z,q){return q===void 0&&(q={}),this.style.setFilter(I,Z,q),this._update(!0)},T.prototype.getFilter=function(I){return this.style.getFilter(I)},T.prototype.setPaintProperty=function(I,Z,q,re){return re===void 0&&(re={}),this.style.setPaintProperty(I,Z,q,re),this._update(!0)},T.prototype.getPaintProperty=function(I,Z){return this.style.getPaintProperty(I,Z)},T.prototype.setLayoutProperty=function(I,Z,q,re){return re===void 0&&(re={}),this.style.setLayoutProperty(I,Z,q,re),this._update(!0)},T.prototype.getLayoutProperty=function(I,Z){return this.style.getLayoutProperty(I,Z)},T.prototype.setLight=function(I,Z){return Z===void 0&&(Z={}),this._lazyInitEmptyStyle(),this.style.setLight(I,Z),this._update(!0)},T.prototype.getLight=function(){return this.style.getLight()},T.prototype.setFeatureState=function(I,Z){return this.style.setFeatureState(I,Z),this._update()},T.prototype.removeFeatureState=function(I,Z){return this.style.removeFeatureState(I,Z),this._update()},T.prototype.getFeatureState=function(I){return this.style.getFeatureState(I)},T.prototype.getContainer=function(){return this._container},T.prototype.getCanvasContainer=function(){return this._canvasContainer},T.prototype.getCanvas=function(){return this._canvas},T.prototype._containerDimensions=function(){var I=0,Z=0;return this._container&&(I=this._container.clientWidth||400,Z=this._container.clientHeight||300),[I,Z]},T.prototype._detectMissingCSS=function(){w.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&w.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},T.prototype._setupContainer=function(){var I=this._container;I.classList.add("mapboxgl-map"),(this._missingCSSCanary=G.create("div","mapboxgl-canary",I)).style.visibility="hidden",this._detectMissingCSS();var Z=this._canvasContainer=G.create("div","mapboxgl-canvas-container",I);this._interactive&&Z.classList.add("mapboxgl-interactive"),this._canvas=G.create("canvas","mapboxgl-canvas",Z),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var q=this._containerDimensions();this._resizeCanvas(q[0],q[1]);var re=this._controlContainer=G.create("div","mapboxgl-control-container",I),_e=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(qe){_e[qe]=G.create("div","mapboxgl-ctrl-"+qe,re)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},T.prototype._resizeCanvas=function(I,Z){var q=w.browser.devicePixelRatio||1;this._canvas.width=q*I,this._canvas.height=q*Z,this._canvas.style.width=I+"px",this._canvas.style.height=Z+"px"},T.prototype._setupPainter=function(){var I=w.extend({},Y.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Z=this._canvas.getContext("webgl",I)||this._canvas.getContext("experimental-webgl",I);Z?(this.painter=new rs(Z,this.transform),w.webpSupported.testSupport(Z)):this.fire(new w.ErrorEvent(new Error("Failed to initialize WebGL")))},T.prototype._contextLost=function(I){I.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new w.Event("webglcontextlost",{originalEvent:I}))},T.prototype._contextRestored=function(I){this._setupPainter(),this.resize(),this._update(),this.fire(new w.Event("webglcontextrestored",{originalEvent:I}))},T.prototype._onMapScroll=function(I){if(I.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},T.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},T.prototype._update=function(I){return this.style?(this._styleDirty=this._styleDirty||I,this._sourcesDirty=!0,this.triggerRepaint(),this):this},T.prototype._requestRenderFrame=function(I){return this._update(),this._renderTaskQueue.add(I)},T.prototype._cancelRenderFrame=function(I){this._renderTaskQueue.remove(I)},T.prototype._render=function(I){var Z,q=this,re=0,_e=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Z=_e.createQueryEXT(),_e.beginQueryEXT(_e.TIME_ELAPSED_EXT,Z),re=w.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(I),!this._removed){var qe=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var yt=this.transform.zoom,Ut=w.browser.now();this.style.zoomHistory.update(yt,Ut);var Zt=new w.EvaluationParameters(yt,{now:Ut,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ht=Zt.crossFadingFactor();Ht===1&&Ht===this._crossFadingFactor||(qe=!0,this._crossFadingFactor=Ht),this.style.update(Zt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new w.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new w.Event("load"))),this.style&&(this.style.hasTransitions()||qe)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var sr=w.browser.now()-re;_e.endQueryEXT(_e.TIME_ELAPSED_EXT,Z),setTimeout(function(){var rr=_e.getQueryObjectEXT(Z,_e.QUERY_RESULT_EXT)/1e6;_e.deleteQueryEXT(Z),q.fire(new w.Event("gpu-timing-frame",{cpuTime:sr,gpuTime:rr}))},50)}if(this.listens("gpu-timing-layer")){var or=this.painter.collectGpuTimers();setTimeout(function(){var rr=q.painter.queryGpuTimers(or);q.fire(new w.Event("gpu-timing-layer",{layerTimes:rr}))},50)}var Er=this._sourcesDirty||this._styleDirty||this._placementDirty;return Er||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new w.Event("idle")),!this._loaded||this._fullyLoaded||Er||(this._fullyLoaded=!0),this}},T.prototype.remove=function(){this._hash&&this._hash.remove();for(var I=0,Z=this._controls;I<Z.length;I+=1)Z[I].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),w.window!==void 0&&(w.window.removeEventListener("resize",this._onWindowResize,!1),w.window.removeEventListener("orientationchange",this._onWindowResize,!1),w.window.removeEventListener("online",this._onWindowOnline,!1));var q=this.painter.context.gl.getExtension("WEBGL_lose_context");q&&q.loseContext(),dh(this._canvasContainer),dh(this._controlContainer),dh(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new w.Event("remove"))},T.prototype.triggerRepaint=function(){var I=this;this.style&&!this._frame&&(this._frame=w.browser.frame(function(Z){I._frame=null,I._render(Z)}))},T.prototype._onWindowOnline=function(){this._update()},T.prototype._onWindowResize=function(I){this._trackResize&&this.resize({originalEvent:I})._update()},C.showTileBoundaries.get=function(){return!!this._showTileBoundaries},C.showTileBoundaries.set=function(I){this._showTileBoundaries!==I&&(this._showTileBoundaries=I,this._update())},C.showPadding.get=function(){return!!this._showPadding},C.showPadding.set=function(I){this._showPadding!==I&&(this._showPadding=I,this._update())},C.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},C.showCollisionBoxes.set=function(I){this._showCollisionBoxes!==I&&(this._showCollisionBoxes=I,I?this.style._generateCollisionBoxes():this._update())},C.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},C.showOverdrawInspector.set=function(I){this._showOverdrawInspector!==I&&(this._showOverdrawInspector=I,this._update())},C.repaint.get=function(){return!!this._repaint},C.repaint.set=function(I){this._repaint!==I&&(this._repaint=I,this.triggerRepaint())},C.vertices.get=function(){return!!this._vertices},C.vertices.set=function(I){this._vertices=I,this._update()},T.prototype._setCacheLimits=function(I,Z){w.setCacheLimits(I,Z)},C.version.get=function(){return w.version},Object.defineProperties(T.prototype,C),T}(wl);function dh(b){b.parentNode&&b.parentNode.removeChild(b)}var Lf={showCompass:!0,showZoom:!0,visualizePitch:!1},fc=function(b){var T=this;this.options=w.extend({},Lf,b),this._container=G.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(C){return C.preventDefault()}),this.options.showZoom&&(w.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(C){return T._map.zoomIn({},{originalEvent:C})}),G.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(C){return T._map.zoomOut({},{originalEvent:C})}),G.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(w.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(C){T.options.visualizePitch?T._map.resetNorthPitch({},{originalEvent:C}):T._map.resetNorth({},{originalEvent:C})}),this._compassIcon=G.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};fc.prototype._updateZoomButtons=function(){var b=this._map.getZoom(),T=b===this._map.getMaxZoom(),C=b===this._map.getMinZoom();this._zoomInButton.disabled=T,this._zoomOutButton.disabled=C,this._zoomInButton.setAttribute("aria-disabled",T.toString()),this._zoomOutButton.setAttribute("aria-disabled",C.toString())},fc.prototype._rotateCompassArrow=function(){var b=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=b},fc.prototype.onAdd=function(b){return this._map=b,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ra(this._map,this._compass,this.options.visualizePitch)),this._container},fc.prototype.onRemove=function(){G.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},fc.prototype._createButton=function(b,T){var C=G.create("button",b,this._container);return C.type="button",C.addEventListener("click",T),C},fc.prototype._setButtonTitle=function(b,T){var C=this._map._getUIString("NavigationControl."+T);b.title=C,b.setAttribute("aria-label",C)};var Ra=function(b,T,C){C===void 0&&(C=!1),this._clickTolerance=10,this.element=T,this.mouseRotate=new hh({clickTolerance:b.dragRotate._mouseRotate._clickTolerance}),this.map=b,C&&(this.mousePitch=new Oh({clickTolerance:b.dragRotate._mousePitch._clickTolerance})),w.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),G.addEventListener(T,"mousedown",this.mousedown),G.addEventListener(T,"touchstart",this.touchstart,{passive:!1}),G.addEventListener(T,"touchmove",this.touchmove),G.addEventListener(T,"touchend",this.touchend),G.addEventListener(T,"touchcancel",this.reset)};function vh(b,T,C){if(b=new w.LngLat(b.lng,b.lat),T){var I=new w.LngLat(b.lng-360,b.lat),Z=new w.LngLat(b.lng+360,b.lat),q=C.locationPoint(b).distSqr(T);C.locationPoint(I).distSqr(T)<q?b=I:C.locationPoint(Z).distSqr(T)<q&&(b=Z)}for(;Math.abs(b.lng-C.center.lng)>180;){var re=C.locationPoint(b);if(re.x>=0&&re.y>=0&&re.x<=C.width&&re.y<=C.height)break;b.lng>C.center.lng?b.lng-=360:b.lng+=360}return b}Ra.prototype.down=function(b,T){this.mouseRotate.mousedown(b,T),this.mousePitch&&this.mousePitch.mousedown(b,T),G.disableDrag()},Ra.prototype.move=function(b,T){var C=this.map,I=this.mouseRotate.mousemoveWindow(b,T);if(I&&I.bearingDelta&&C.setBearing(C.getBearing()+I.bearingDelta),this.mousePitch){var Z=this.mousePitch.mousemoveWindow(b,T);Z&&Z.pitchDelta&&C.setPitch(C.getPitch()+Z.pitchDelta)}},Ra.prototype.off=function(){var b=this.element;G.removeEventListener(b,"mousedown",this.mousedown),G.removeEventListener(b,"touchstart",this.touchstart,{passive:!1}),G.removeEventListener(b,"touchmove",this.touchmove),G.removeEventListener(b,"touchend",this.touchend),G.removeEventListener(b,"touchcancel",this.reset),this.offTemp()},Ra.prototype.offTemp=function(){G.enableDrag(),G.removeEventListener(w.window,"mousemove",this.mousemove),G.removeEventListener(w.window,"mouseup",this.mouseup)},Ra.prototype.mousedown=function(b){this.down(w.extend({},b,{ctrlKey:!0,preventDefault:function(){return b.preventDefault()}}),G.mousePos(this.element,b)),G.addEventListener(w.window,"mousemove",this.mousemove),G.addEventListener(w.window,"mouseup",this.mouseup)},Ra.prototype.mousemove=function(b){this.move(b,G.mousePos(this.element,b))},Ra.prototype.mouseup=function(b){this.mouseRotate.mouseupWindow(b),this.mousePitch&&this.mousePitch.mouseupWindow(b),this.offTemp()},Ra.prototype.touchstart=function(b){b.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=G.touchPos(this.element,b.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return b.preventDefault()}},this._startPos))},Ra.prototype.touchmove=function(b){b.targetTouches.length!==1?this.reset():(this._lastPos=G.touchPos(this.element,b.targetTouches)[0],this.move({preventDefault:function(){return b.preventDefault()}},this._lastPos))},Ra.prototype.touchend=function(b){b.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Ra.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var $c={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function sd(b,T,C){var I=b.classList;for(var Z in $c)I.remove("mapboxgl-"+C+"-anchor-"+Z);I.add("mapboxgl-"+C+"-anchor-"+T)}var Bf,Lh=function(b){function T(C,I){if(b.call(this),(C instanceof w.window.HTMLElement||I)&&(C=w.extend({element:C},I)),w.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=C&&C.anchor||"center",this._color=C&&C.color||"#3FB1CE",this._scale=C&&C.scale||1,this._draggable=C&&C.draggable||!1,this._clickTolerance=C&&C.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=C&&C.rotation||0,this._rotationAlignment=C&&C.rotationAlignment||"auto",this._pitchAlignment=C&&C.pitchAlignment&&C.pitchAlignment!=="auto"?C.pitchAlignment:this._rotationAlignment,C&&C.element)this._element=C.element,this._offset=w.Point.convert(C&&C.offset||[0,0]);else{this._defaultMarker=!0,this._element=G.create("div"),this._element.setAttribute("aria-label","Map marker");var Z=G.createNS("http://www.w3.org/2000/svg","svg");Z.setAttributeNS(null,"display","block"),Z.setAttributeNS(null,"height","41px"),Z.setAttributeNS(null,"width","27px"),Z.setAttributeNS(null,"viewBox","0 0 27 41");var q=G.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"stroke","none"),q.setAttributeNS(null,"stroke-width","1"),q.setAttributeNS(null,"fill","none"),q.setAttributeNS(null,"fill-rule","evenodd");var re=G.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"fill-rule","nonzero");var _e=G.createNS("http://www.w3.org/2000/svg","g");_e.setAttributeNS(null,"transform","translate(3.0, 29.0)"),_e.setAttributeNS(null,"fill","#000000");for(var qe=0,yt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];qe<yt.length;qe+=1){var Ut=yt[qe],Zt=G.createNS("http://www.w3.org/2000/svg","ellipse");Zt.setAttributeNS(null,"opacity","0.04"),Zt.setAttributeNS(null,"cx","10.5"),Zt.setAttributeNS(null,"cy","5.80029008"),Zt.setAttributeNS(null,"rx",Ut.rx),Zt.setAttributeNS(null,"ry",Ut.ry),_e.appendChild(Zt)}var Ht=G.createNS("http://www.w3.org/2000/svg","g");Ht.setAttributeNS(null,"fill",this._color);var sr=G.createNS("http://www.w3.org/2000/svg","path");sr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ht.appendChild(sr);var or=G.createNS("http://www.w3.org/2000/svg","g");or.setAttributeNS(null,"opacity","0.25"),or.setAttributeNS(null,"fill","#000000");var Er=G.createNS("http://www.w3.org/2000/svg","path");Er.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),or.appendChild(Er);var rr=G.createNS("http://www.w3.org/2000/svg","g");rr.setAttributeNS(null,"transform","translate(6.0, 7.0)"),rr.setAttributeNS(null,"fill","#FFFFFF");var wr=G.createNS("http://www.w3.org/2000/svg","g");wr.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Fr=G.createNS("http://www.w3.org/2000/svg","circle");Fr.setAttributeNS(null,"fill","#000000"),Fr.setAttributeNS(null,"opacity","0.25"),Fr.setAttributeNS(null,"cx","5.5"),Fr.setAttributeNS(null,"cy","5.5"),Fr.setAttributeNS(null,"r","5.4999962");var Wr=G.createNS("http://www.w3.org/2000/svg","circle");Wr.setAttributeNS(null,"fill","#FFFFFF"),Wr.setAttributeNS(null,"cx","5.5"),Wr.setAttributeNS(null,"cy","5.5"),Wr.setAttributeNS(null,"r","5.4999962"),wr.appendChild(Fr),wr.appendChild(Wr),re.appendChild(_e),re.appendChild(Ht),re.appendChild(or),re.appendChild(rr),re.appendChild(wr),Z.appendChild(re),Z.setAttributeNS(null,"height",41*this._scale+"px"),Z.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(Z),this._offset=w.Point.convert(C&&C.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(hn){hn.preventDefault()}),this._element.addEventListener("mousedown",function(hn){hn.preventDefault()}),sd(this._element,this._anchor,"marker"),this._popup=null}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.addTo=function(C){return this.remove(),this._map=C,C.getCanvasContainer().appendChild(this._element),C.on("move",this._update),C.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},T.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),G.remove(this._element),this._popup&&this._popup.remove(),this},T.prototype.getLngLat=function(){return this._lngLat},T.prototype.setLngLat=function(C){return this._lngLat=w.LngLat.convert(C),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},T.prototype.getElement=function(){return this._element},T.prototype.setPopup=function(C){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),C){if(!("offset"in C.options)){var I=Math.sqrt(Math.pow(13.5,2)/2);C.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[I,-1*(24.6+I)],"bottom-right":[-I,-1*(24.6+I)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=C,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},T.prototype._onKeyPress=function(C){var I=C.code,Z=C.charCode||C.keyCode;I!=="Space"&&I!=="Enter"&&Z!==32&&Z!==13||this.togglePopup()},T.prototype._onMapClick=function(C){var I=C.originalEvent.target,Z=this._element;this._popup&&(I===Z||Z.contains(I))&&this.togglePopup()},T.prototype.getPopup=function(){return this._popup},T.prototype.togglePopup=function(){var C=this._popup;return C?(C.isOpen()?C.remove():C.addTo(this._map),this):this},T.prototype._update=function(C){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=vh(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var I="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?I="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(I="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Z="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Z="rotateX(0deg)":this._pitchAlignment==="map"&&(Z="rotateX("+this._map.getPitch()+"deg)"),C&&C.type!=="moveend"||(this._pos=this._pos.round()),G.setTransform(this._element,$c[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Z+" "+I)}},T.prototype.getOffset=function(){return this._offset},T.prototype.setOffset=function(C){return this._offset=w.Point.convert(C),this._update(),this},T.prototype._onMove=function(C){if(!this._isDragging){var I=this._clickTolerance||this._map._clickTolerance;this._isDragging=C.point.dist(this._pointerdownPos)>=I}this._isDragging&&(this._pos=C.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new w.Event("dragstart"))),this.fire(new w.Event("drag")))},T.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new w.Event("dragend")),this._state="inactive"},T.prototype._addDragHandler=function(C){this._element.contains(C.originalEvent.target)&&(C.preventDefault(),this._positionDelta=C.point.sub(this._pos).add(this._offset),this._pointerdownPos=C.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},T.prototype.setDraggable=function(C){return this._draggable=!!C,this._map&&(C?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},T.prototype.isDraggable=function(){return this._draggable},T.prototype.setRotation=function(C){return this._rotation=C||0,this._update(),this},T.prototype.getRotation=function(){return this._rotation},T.prototype.setRotationAlignment=function(C){return this._rotationAlignment=C||"auto",this._update(),this},T.prototype.getRotationAlignment=function(){return this._rotationAlignment},T.prototype.setPitchAlignment=function(C){return this._pitchAlignment=C&&C!=="auto"?C:this._rotationAlignment,this._update(),this},T.prototype.getPitchAlignment=function(){return this._pitchAlignment},T}(w.Evented),Ud={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},fn=0,vr=!1,Fe=function(b){function T(C){b.call(this),this.options=w.extend({},Ud,C),w.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.onAdd=function(C){var I;return this._map=C,this._container=G.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),I=this._setupUI,Bf!==void 0?I(Bf):w.window.navigator.permissions!==void 0?w.window.navigator.permissions.query({name:"geolocation"}).then(function(Z){I(Bf=Z.state!=="denied")}):I(Bf=!!w.window.navigator.geolocation),this._container},T.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(w.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),G.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,fn=0,vr=!1},T.prototype._isOutOfMapMaxBounds=function(C){var I=this._map.getMaxBounds(),Z=C.coords;return I&&(Z.longitude<I.getWest()||Z.longitude>I.getEast()||Z.latitude<I.getSouth()||Z.latitude>I.getNorth())},T.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},T.prototype._onSuccess=function(C){if(this._map){if(this._isOutOfMapMaxBounds(C))return this._setErrorState(),this.fire(new w.Event("outofmaxbounds",C)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=C,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(C),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(C),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new w.Event("geolocate",C)),this._finish()}},T.prototype._updateCamera=function(C){var I=new w.LngLat(C.coords.longitude,C.coords.latitude),Z=C.coords.accuracy,q=this._map.getBearing(),re=w.extend({bearing:q},this.options.fitBoundsOptions);this._map.fitBounds(I.toBounds(Z),re,{geolocateSource:!0})},T.prototype._updateMarker=function(C){if(C){var I=new w.LngLat(C.coords.longitude,C.coords.latitude);this._accuracyCircleMarker.setLngLat(I).addTo(this._map),this._userLocationDotMarker.setLngLat(I).addTo(this._map),this._accuracy=C.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},T.prototype._updateCircleRadius=function(){var C=this._map._container.clientHeight/2,I=this._map.unproject([0,C]),Z=this._map.unproject([1,C]),q=I.distanceTo(Z),re=Math.ceil(2*this._accuracy/q);this._circleElement.style.width=re+"px",this._circleElement.style.height=re+"px"},T.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},T.prototype._onError=function(C){if(this._map){if(this.options.trackUserLocation)if(C.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var I=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=I,this._geolocateButton.setAttribute("aria-label",I),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(C.code===3&&vr)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new w.Event("error",C)),this._finish()}},T.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},T.prototype._setupUI=function(C){var I=this;if(this._container.addEventListener("contextmenu",function(re){return re.preventDefault()}),this._geolocateButton=G.create("button","mapboxgl-ctrl-geolocate",this._container),G.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",C===!1){w.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Z=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Z,this._geolocateButton.setAttribute("aria-label",Z)}else{var q=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=q,this._geolocateButton.setAttribute("aria-label",q)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=G.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Lh(this._dotElement),this._circleElement=G.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Lh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(re){re.geolocateSource||I._watchState!=="ACTIVE_LOCK"||re.originalEvent&&re.originalEvent.type==="resize"||(I._watchState="BACKGROUND",I._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),I._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),I.fire(new w.Event("trackuserlocationend")))})},T.prototype.trigger=function(){if(!this._setup)return w.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new w.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":fn--,vr=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new w.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new w.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var C;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++fn>1?(C={maximumAge:6e5,timeout:0},vr=!0):(C=this.options.positionOptions,vr=!1),this._geolocationWatchID=w.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,C)}}else w.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},T.prototype._clearWatch=function(){w.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},T}(w.Evented),Yc={maxWidth:100,unit:"metric"},$t=function(b){this.options=w.extend({},Yc,b),w.bindAll(["_onMove","setUnit"],this)};function ud(b,T,C){var I=C&&C.maxWidth||100,Z=b._container.clientHeight/2,q=b.unproject([0,Z]),re=b.unproject([I,Z]),_e=q.distanceTo(re);if(C&&C.unit==="imperial"){var qe=3.2808*_e;qe>5280?Ws(T,I,qe/5280,b._getUIString("ScaleControl.Miles")):Ws(T,I,qe,b._getUIString("ScaleControl.Feet"))}else C&&C.unit==="nautical"?Ws(T,I,_e/1852,b._getUIString("ScaleControl.NauticalMiles")):_e>=1e3?Ws(T,I,_e/1e3,b._getUIString("ScaleControl.Kilometers")):Ws(T,I,_e,b._getUIString("ScaleControl.Meters"))}function Ws(b,T,C,I){var Z,q,re,_e=(Z=C,(q=Math.pow(10,(""+Math.floor(Z)).length-1))*(re=(re=Z/q)>=10?10:re>=5?5:re>=3?3:re>=2?2:re>=1?1:function(qe){var yt=Math.pow(10,Math.ceil(-Math.log(qe)/Math.LN10));return Math.round(qe*yt)/yt}(re)));b.style.width=T*(_e/C)+"px",b.innerHTML=_e+"&nbsp;"+I}$t.prototype.getDefaultPosition=function(){return"bottom-left"},$t.prototype._onMove=function(){ud(this._map,this._container,this.options)},$t.prototype.onAdd=function(b){return this._map=b,this._container=G.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",b.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},$t.prototype.onRemove=function(){G.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},$t.prototype.setUnit=function(b){this.options.unit=b,ud(this._map,this._container,this.options)};var Vl=function(b){this._fullscreen=!1,b&&b.container&&(b.container instanceof w.window.HTMLElement?this._container=b.container:w.warnOnce("Full screen control 'container' must be a DOM element.")),w.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in w.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in w.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in w.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in w.window.document&&(this._fullscreenchange="MSFullscreenChange")};Vl.prototype.onAdd=function(b){return this._map=b,this._container||(this._container=this._map.getContainer()),this._controlContainer=G.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",w.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Vl.prototype.onRemove=function(){G.remove(this._controlContainer),this._map=null,w.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Vl.prototype._checkFullscreenSupport=function(){return!!(w.window.document.fullscreenEnabled||w.window.document.mozFullScreenEnabled||w.window.document.msFullscreenEnabled||w.window.document.webkitFullscreenEnabled)},Vl.prototype._setupUI=function(){var b=this._fullscreenButton=G.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);G.create("span","mapboxgl-ctrl-icon",b).setAttribute("aria-hidden",!0),b.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),w.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Vl.prototype._updateTitle=function(){var b=this._getTitle();this._fullscreenButton.setAttribute("aria-label",b),this._fullscreenButton.title=b},Vl.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Vl.prototype._isFullscreen=function(){return this._fullscreen},Vl.prototype._changeIcon=function(){(w.window.document.fullscreenElement||w.window.document.mozFullScreenElement||w.window.document.webkitFullscreenElement||w.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Vl.prototype._onClickFullscreen=function(){this._isFullscreen()?w.window.document.exitFullscreen?w.window.document.exitFullscreen():w.window.document.mozCancelFullScreen?w.window.document.mozCancelFullScreen():w.window.document.msExitFullscreen?w.window.document.msExitFullscreen():w.window.document.webkitCancelFullScreen&&w.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Bh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Cl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),wp=function(b){function T(C){b.call(this),this.options=w.extend(Object.create(Bh),C),w.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return b&&(T.__proto__=b),(T.prototype=Object.create(b&&b.prototype)).constructor=T,T.prototype.addTo=function(C){return this._map&&this.remove(),this._map=C,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new w.Event("open")),this},T.prototype.isOpen=function(){return!!this._map},T.prototype.remove=function(){return this._content&&G.remove(this._content),this._container&&(G.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new w.Event("close")),this},T.prototype.getLngLat=function(){return this._lngLat},T.prototype.setLngLat=function(C){return this._lngLat=w.LngLat.convert(C),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},T.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},T.prototype.getElement=function(){return this._container},T.prototype.setText=function(C){return this.setDOMContent(w.window.document.createTextNode(C))},T.prototype.setHTML=function(C){var I,Z=w.window.document.createDocumentFragment(),q=w.window.document.createElement("body");for(q.innerHTML=C;I=q.firstChild;)Z.appendChild(I);return this.setDOMContent(Z)},T.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},T.prototype.setMaxWidth=function(C){return this.options.maxWidth=C,this._update(),this},T.prototype.setDOMContent=function(C){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=G.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(C),this._createCloseButton(),this._update(),this._focusFirstElement(),this},T.prototype.addClassName=function(C){this._container&&this._container.classList.add(C)},T.prototype.removeClassName=function(C){this._container&&this._container.classList.remove(C)},T.prototype.setOffset=function(C){return this.options.offset=C,this._update(),this},T.prototype.toggleClassName=function(C){if(this._container)return this._container.classList.toggle(C)},T.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=G.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},T.prototype._onMouseUp=function(C){this._update(C.point)},T.prototype._onMouseMove=function(C){this._update(C.point)},T.prototype._onDrag=function(C){this._update(C.point)},T.prototype._update=function(C){var I=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=G.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=G.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Zt){return I._container.classList.add(Zt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=vh(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||C)){var Z=this._pos=this._trackPointer&&C?C:this._map.project(this._lngLat),q=this.options.anchor,re=function Zt(Ht){if(Ht){if(typeof Ht=="number"){var sr=Math.round(Math.sqrt(.5*Math.pow(Ht,2)));return{center:new w.Point(0,0),top:new w.Point(0,Ht),"top-left":new w.Point(sr,sr),"top-right":new w.Point(-sr,sr),bottom:new w.Point(0,-Ht),"bottom-left":new w.Point(sr,-sr),"bottom-right":new w.Point(-sr,-sr),left:new w.Point(Ht,0),right:new w.Point(-Ht,0)}}if(Ht instanceof w.Point||Array.isArray(Ht)){var or=w.Point.convert(Ht);return{center:or,top:or,"top-left":or,"top-right":or,bottom:or,"bottom-left":or,"bottom-right":or,left:or,right:or}}return{center:w.Point.convert(Ht.center||[0,0]),top:w.Point.convert(Ht.top||[0,0]),"top-left":w.Point.convert(Ht["top-left"]||[0,0]),"top-right":w.Point.convert(Ht["top-right"]||[0,0]),bottom:w.Point.convert(Ht.bottom||[0,0]),"bottom-left":w.Point.convert(Ht["bottom-left"]||[0,0]),"bottom-right":w.Point.convert(Ht["bottom-right"]||[0,0]),left:w.Point.convert(Ht.left||[0,0]),right:w.Point.convert(Ht.right||[0,0])}}return Zt(new w.Point(0,0))}(this.options.offset);if(!q){var _e,qe=this._container.offsetWidth,yt=this._container.offsetHeight;_e=Z.y+re.bottom.y<yt?["top"]:Z.y>this._map.transform.height-yt?["bottom"]:[],Z.x<qe/2?_e.push("left"):Z.x>this._map.transform.width-qe/2&&_e.push("right"),q=_e.length===0?"bottom":_e.join("-")}var Ut=Z.add(re[q]).round();G.setTransform(this._container,$c[q]+" translate("+Ut.x+"px,"+Ut.y+"px)"),sd(this._container,q,"popup")}},T.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var C=this._container.querySelector(Cl);C&&C.focus()}},T.prototype._onClose=function(){this.remove()},T}(w.Evented),Cp={version:w.version,supported:Y,setRTLTextPlugin:w.setRTLTextPlugin,getRTLTextPluginStatus:w.getRTLTextPluginStatus,Map:bv,NavigationControl:fc,GeolocateControl:Fe,AttributionControl:Ju,ScaleControl:$t,FullscreenControl:Vl,Popup:wp,Marker:Lh,Style:Es,LngLat:w.LngLat,LngLatBounds:w.LngLatBounds,Point:w.Point,MercatorCoordinate:w.MercatorCoordinate,Evented:w.Evented,config:w.config,prewarm:function(){sn().acquire(Ft)},clearPrewarmedResources:function(){var b=yi;b&&(b.isPreloaded()&&b.numActive()===1?(b.release(Ft),yi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return w.config.ACCESS_TOKEN},set accessToken(b){w.config.ACCESS_TOKEN=b},get baseApiUrl(){return w.config.API_URL},set baseApiUrl(b){w.config.API_URL=b},get workerCount(){return Mn.workerCount},set workerCount(b){Mn.workerCount=b},get maxParallelImageRequests(){return w.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(b){w.config.MAX_PARALLEL_IMAGE_REQUESTS=b},clearStorage:function(b){w.clearTileCache(b)},workerUrl:""};return Cp}),$})},3614:function(xt,N,F){"use strict";xt.exports=X;var $=F(80645);function X(Ae){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(Ae)?Ae:new Uint8Array(Ae||0),this.pos=0,this.type=0,this.length=this.buf.length}X.Varint=0,X.Fixed64=1,X.Bytes=2,X.Fixed32=5;var w=65536*65536,Y=1/w,G=12,K=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");X.prototype={destroy:function(){this.buf=null},readFields:function(Ae,Qe,te){for(te=te||this.length;this.pos<te;){var Ze=this.readVarint(),ie=Ze>>3,Oe=this.pos;this.type=Ze&7,Ae(ie,Qe,this),this.pos===Oe&&this.skip(Ze)}return Qe},readMessage:function(Ae,Qe){return this.readFields(Ae,Qe,this.readVarint()+this.pos)},readFixed32:function(){var Ae=ge(this.buf,this.pos);return this.pos+=4,Ae},readSFixed32:function(){var Ae=Ce(this.buf,this.pos);return this.pos+=4,Ae},readFixed64:function(){var Ae=ge(this.buf,this.pos)+ge(this.buf,this.pos+4)*w;return this.pos+=8,Ae},readSFixed64:function(){var Ae=ge(this.buf,this.pos)+Ce(this.buf,this.pos+4)*w;return this.pos+=8,Ae},readFloat:function(){var Ae=$.read(this.buf,this.pos,!0,23,4);return this.pos+=4,Ae},readDouble:function(){var Ae=$.read(this.buf,this.pos,!0,52,8);return this.pos+=8,Ae},readVarint:function(Ae){var Qe=this.buf,te,Ze;return Ze=Qe[this.pos++],te=Ze&127,Ze<128||(Ze=Qe[this.pos++],te|=(Ze&127)<<7,Ze<128)||(Ze=Qe[this.pos++],te|=(Ze&127)<<14,Ze<128)||(Ze=Qe[this.pos++],te|=(Ze&127)<<21,Ze<128)?te:(Ze=Qe[this.pos],te|=(Ze&15)<<28,Q(te,Ae,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var Ae=this.readVarint();return Ae%2===1?(Ae+1)/-2:Ae/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var Ae=this.readVarint()+this.pos,Qe=this.pos;return this.pos=Ae,Ae-Qe>=G&&K?je(this.buf,Qe,Ae):Ye(this.buf,Qe,Ae)},readBytes:function(){var Ae=this.readVarint()+this.pos,Qe=this.buf.subarray(this.pos,Ae);return this.pos=Ae,Qe},readPackedVarint:function(Ae,Qe){if(this.type!==X.Bytes)return Ae.push(this.readVarint(Qe));var te=oe(this);for(Ae=Ae||[];this.pos<te;)Ae.push(this.readVarint(Qe));return Ae},readPackedSVarint:function(Ae){if(this.type!==X.Bytes)return Ae.push(this.readSVarint());var Qe=oe(this);for(Ae=Ae||[];this.pos<Qe;)Ae.push(this.readSVarint());return Ae},readPackedBoolean:function(Ae){if(this.type!==X.Bytes)return Ae.push(this.readBoolean());var Qe=oe(this);for(Ae=Ae||[];this.pos<Qe;)Ae.push(this.readBoolean());return Ae},readPackedFloat:function(Ae){if(this.type!==X.Bytes)return Ae.push(this.readFloat());var Qe=oe(this);for(Ae=Ae||[];this.pos<Qe;)Ae.push(this.readFloat());return Ae},readPackedDouble:function(Ae){if(this.type!==X.Bytes)return Ae.push(this.readDouble());var Qe=oe(this);for(Ae=Ae||[];this.pos<Qe;)Ae.push(this.readDouble());return Ae},readPackedFixed32:function(Ae){if(this.type!==X.Bytes)return Ae.push(this.readFixed32());var Qe=oe(this);for(Ae=Ae||[];this.pos<Qe;)Ae.push(this.readFixed32());return Ae},readPackedSFixed32:function(Ae){if(this.type!==X.Bytes)return Ae.push(this.readSFixed32());var Qe=oe(this);for(Ae=Ae||[];this.pos<Qe;)Ae.push(this.readSFixed32());return Ae},readPackedFixed64:function(Ae){if(this.type!==X.Bytes)return Ae.push(this.readFixed64());var Qe=oe(this);for(Ae=Ae||[];this.pos<Qe;)Ae.push(this.readFixed64());return Ae},readPackedSFixed64:function(Ae){if(this.type!==X.Bytes)return Ae.push(this.readSFixed64());var Qe=oe(this);for(Ae=Ae||[];this.pos<Qe;)Ae.push(this.readSFixed64());return Ae},skip:function(Ae){var Qe=Ae&7;if(Qe===X.Varint)for(;this.buf[this.pos++]>127;);else if(Qe===X.Bytes)this.pos=this.readVarint()+this.pos;else if(Qe===X.Fixed32)this.pos+=4;else if(Qe===X.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+Qe)},writeTag:function(Ae,Qe){this.writeVarint(Ae<<3|Qe)},realloc:function(Ae){for(var Qe=this.length||16;Qe<this.pos+Ae;)Qe*=2;if(Qe!==this.length){var te=new Uint8Array(Qe);te.set(this.buf),this.buf=te,this.length=Qe}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(Ae){this.realloc(4),be(this.buf,Ae,this.pos),this.pos+=4},writeSFixed32:function(Ae){this.realloc(4),be(this.buf,Ae,this.pos),this.pos+=4},writeFixed64:function(Ae){this.realloc(8),be(this.buf,Ae&-1,this.pos),be(this.buf,Math.floor(Ae*Y),this.pos+4),this.pos+=8},writeSFixed64:function(Ae){this.realloc(8),be(this.buf,Ae&-1,this.pos),be(this.buf,Math.floor(Ae*Y),this.pos+4),this.pos+=8},writeVarint:function(Ae){if(Ae=+Ae||0,Ae>268435455||Ae<0){xe(Ae,this);return}this.realloc(4),this.buf[this.pos++]=Ae&127|(Ae>127?128:0),!(Ae<=127)&&(this.buf[this.pos++]=(Ae>>>=7)&127|(Ae>127?128:0),!(Ae<=127)&&(this.buf[this.pos++]=(Ae>>>=7)&127|(Ae>127?128:0),!(Ae<=127)&&(this.buf[this.pos++]=Ae>>>7&127)))},writeSVarint:function(Ae){this.writeVarint(Ae<0?-Ae*2-1:Ae*2)},writeBoolean:function(Ae){this.writeVarint(!!Ae)},writeString:function(Ae){Ae=String(Ae),this.realloc(Ae.length*4),this.pos++;var Qe=this.pos;this.pos=Et(this.buf,Ae,this.pos);var te=this.pos-Qe;te>=128&&J(Qe,te,this),this.pos=Qe-1,this.writeVarint(te),this.pos+=te},writeFloat:function(Ae){this.realloc(4),$.write(this.buf,Ae,this.pos,!0,23,4),this.pos+=4},writeDouble:function(Ae){this.realloc(8),$.write(this.buf,Ae,this.pos,!0,52,8),this.pos+=8},writeBytes:function(Ae){var Qe=Ae.length;this.writeVarint(Qe),this.realloc(Qe);for(var te=0;te<Qe;te++)this.buf[this.pos++]=Ae[te]},writeRawMessage:function(Ae,Qe){this.pos++;var te=this.pos;Ae(Qe,this);var Ze=this.pos-te;Ze>=128&&J(te,Ze,this),this.pos=te-1,this.writeVarint(Ze),this.pos+=Ze},writeMessage:function(Ae,Qe,te){this.writeTag(Ae,X.Bytes),this.writeRawMessage(Qe,te)},writePackedVarint:function(Ae,Qe){Qe.length&&this.writeMessage(Ae,M,Qe)},writePackedSVarint:function(Ae,Qe){Qe.length&&this.writeMessage(Ae,E,Qe)},writePackedBoolean:function(Ae,Qe){Qe.length&&this.writeMessage(Ae,ke,Qe)},writePackedFloat:function(Ae,Qe){Qe.length&&this.writeMessage(Ae,fe,Qe)},writePackedDouble:function(Ae,Qe){Qe.length&&this.writeMessage(Ae,me,Qe)},writePackedFixed32:function(Ae,Qe){Qe.length&&this.writeMessage(Ae,Pe,Qe)},writePackedSFixed32:function(Ae,Qe){Qe.length&&this.writeMessage(Ae,Le,Qe)},writePackedFixed64:function(Ae,Qe){Qe.length&&this.writeMessage(Ae,tt,Qe)},writePackedSFixed64:function(Ae,Qe){Qe.length&&this.writeMessage(Ae,ft,Qe)},writeBytesField:function(Ae,Qe){this.writeTag(Ae,X.Bytes),this.writeBytes(Qe)},writeFixed32Field:function(Ae,Qe){this.writeTag(Ae,X.Fixed32),this.writeFixed32(Qe)},writeSFixed32Field:function(Ae,Qe){this.writeTag(Ae,X.Fixed32),this.writeSFixed32(Qe)},writeFixed64Field:function(Ae,Qe){this.writeTag(Ae,X.Fixed64),this.writeFixed64(Qe)},writeSFixed64Field:function(Ae,Qe){this.writeTag(Ae,X.Fixed64),this.writeSFixed64(Qe)},writeVarintField:function(Ae,Qe){this.writeTag(Ae,X.Varint),this.writeVarint(Qe)},writeSVarintField:function(Ae,Qe){this.writeTag(Ae,X.Varint),this.writeSVarint(Qe)},writeStringField:function(Ae,Qe){this.writeTag(Ae,X.Bytes),this.writeString(Qe)},writeFloatField:function(Ae,Qe){this.writeTag(Ae,X.Fixed32),this.writeFloat(Qe)},writeDoubleField:function(Ae,Qe){this.writeTag(Ae,X.Fixed64),this.writeDouble(Qe)},writeBooleanField:function(Ae,Qe){this.writeVarintField(Ae,!!Qe)}};function Q(Ae,Qe,te){var Ze=te.buf,ie,Oe;if(Oe=Ze[te.pos++],ie=(Oe&112)>>4,Oe<128||(Oe=Ze[te.pos++],ie|=(Oe&127)<<3,Oe<128)||(Oe=Ze[te.pos++],ie|=(Oe&127)<<10,Oe<128)||(Oe=Ze[te.pos++],ie|=(Oe&127)<<17,Oe<128)||(Oe=Ze[te.pos++],ie|=(Oe&127)<<24,Oe<128)||(Oe=Ze[te.pos++],ie|=(Oe&1)<<31,Oe<128))return ee(Ae,ie,Qe);throw new Error("Expected varint not more than 10 bytes")}function oe(Ae){return Ae.type===X.Bytes?Ae.readVarint()+Ae.pos:Ae.pos+1}function ee(Ae,Qe,te){return te?Qe*4294967296+(Ae>>>0):(Qe>>>0)*4294967296+(Ae>>>0)}function xe(Ae,Qe){var te,Ze;if(Ae>=0?(te=Ae%4294967296|0,Ze=Ae/4294967296|0):(te=~(-Ae%4294967296),Ze=~(-Ae/4294967296),te^4294967295?te=te+1|0:(te=0,Ze=Ze+1|0)),Ae>=18446744073709552e3||Ae<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Qe.realloc(10),ce(te,Ze,Qe),he(Ze,Qe)}function ce(Ae,Qe,te){te.buf[te.pos++]=Ae&127|128,Ae>>>=7,te.buf[te.pos++]=Ae&127|128,Ae>>>=7,te.buf[te.pos++]=Ae&127|128,Ae>>>=7,te.buf[te.pos++]=Ae&127|128,Ae>>>=7,te.buf[te.pos]=Ae&127}function he(Ae,Qe){var te=(Ae&7)<<4;Qe.buf[Qe.pos++]|=te|((Ae>>>=3)?128:0),Ae&&(Qe.buf[Qe.pos++]=Ae&127|((Ae>>>=7)?128:0),Ae&&(Qe.buf[Qe.pos++]=Ae&127|((Ae>>>=7)?128:0),Ae&&(Qe.buf[Qe.pos++]=Ae&127|((Ae>>>=7)?128:0),Ae&&(Qe.buf[Qe.pos++]=Ae&127|((Ae>>>=7)?128:0),Ae&&(Qe.buf[Qe.pos++]=Ae&127)))))}function J(Ae,Qe,te){var Ze=Qe<=16383?1:Qe<=2097151?2:Qe<=268435455?3:Math.floor(Math.log(Qe)/(Math.LN2*7));te.realloc(Ze);for(var ie=te.pos-1;ie>=Ae;ie--)te.buf[ie+Ze]=te.buf[ie]}function M(Ae,Qe){for(var te=0;te<Ae.length;te++)Qe.writeVarint(Ae[te])}function E(Ae,Qe){for(var te=0;te<Ae.length;te++)Qe.writeSVarint(Ae[te])}function fe(Ae,Qe){for(var te=0;te<Ae.length;te++)Qe.writeFloat(Ae[te])}function me(Ae,Qe){for(var te=0;te<Ae.length;te++)Qe.writeDouble(Ae[te])}function ke(Ae,Qe){for(var te=0;te<Ae.length;te++)Qe.writeBoolean(Ae[te])}function Pe(Ae,Qe){for(var te=0;te<Ae.length;te++)Qe.writeFixed32(Ae[te])}function Le(Ae,Qe){for(var te=0;te<Ae.length;te++)Qe.writeSFixed32(Ae[te])}function tt(Ae,Qe){for(var te=0;te<Ae.length;te++)Qe.writeFixed64(Ae[te])}function ft(Ae,Qe){for(var te=0;te<Ae.length;te++)Qe.writeSFixed64(Ae[te])}function ge(Ae,Qe){return(Ae[Qe]|Ae[Qe+1]<<8|Ae[Qe+2]<<16)+Ae[Qe+3]*16777216}function be(Ae,Qe,te){Ae[te]=Qe,Ae[te+1]=Qe>>>8,Ae[te+2]=Qe>>>16,Ae[te+3]=Qe>>>24}function Ce(Ae,Qe){return(Ae[Qe]|Ae[Qe+1]<<8|Ae[Qe+2]<<16)+(Ae[Qe+3]<<24)}function Ye(Ae,Qe,te){for(var Ze="",ie=Qe;ie<te;){var Oe=Ae[ie],nt=null,ye=Oe>239?4:Oe>223?3:Oe>191?2:1;if(ie+ye>te)break;var Te,Je,pe;ye===1?Oe<128&&(nt=Oe):ye===2?(Te=Ae[ie+1],(Te&192)===128&&(nt=(Oe&31)<<6|Te&63,nt<=127&&(nt=null))):ye===3?(Te=Ae[ie+1],Je=Ae[ie+2],(Te&192)===128&&(Je&192)===128&&(nt=(Oe&15)<<12|(Te&63)<<6|Je&63,(nt<=2047||nt>=55296&&nt<=57343)&&(nt=null))):ye===4&&(Te=Ae[ie+1],Je=Ae[ie+2],pe=Ae[ie+3],(Te&192)===128&&(Je&192)===128&&(pe&192)===128&&(nt=(Oe&15)<<18|(Te&63)<<12|(Je&63)<<6|pe&63,(nt<=65535||nt>=1114112)&&(nt=null))),nt===null?(nt=65533,ye=1):nt>65535&&(nt-=65536,Ze+=String.fromCharCode(nt>>>10&1023|55296),nt=56320|nt&1023),Ze+=String.fromCharCode(nt),ie+=ye}return Ze}function je(Ae,Qe,te){return K.decode(Ae.subarray(Qe,te))}function Et(Ae,Qe,te){for(var Ze=0,ie,Oe;Ze<Qe.length;Ze++){if(ie=Qe.charCodeAt(Ze),ie>55295&&ie<57344)if(Oe)if(ie<56320){Ae[te++]=239,Ae[te++]=191,Ae[te++]=189,Oe=ie;continue}else ie=Oe-55296<<10|ie-56320|65536,Oe=null;else{ie>56319||Ze+1===Qe.length?(Ae[te++]=239,Ae[te++]=191,Ae[te++]=189):Oe=ie;continue}else Oe&&(Ae[te++]=239,Ae[te++]=191,Ae[te++]=189,Oe=null);ie<128?Ae[te++]=ie:(ie<2048?Ae[te++]=ie>>6|192:(ie<65536?Ae[te++]=ie>>12|224:(Ae[te++]=ie>>18|240,Ae[te++]=ie>>12&63|128),Ae[te++]=ie>>6&63|128),Ae[te++]=ie&63|128)}return te}},73807:function(xt){"use strict";var N=xt.exports;xt.exports.isNumber=function(F){return typeof F=="number"},xt.exports.findMin=function(F){if(F.length===0)return 1/0;for(var $=F[0],X=1;X<F.length;X++)$=Math.min($,F[X]);return $},xt.exports.findMax=function(F){if(F.length===0)return-1/0;for(var $=F[0],X=1;X<F.length;X++)$=Math.max($,F[X]);return $},xt.exports.findMinMulti=function(F){for(var $=N.findMin(F[0]),X=1;X<F.length;X++)$=Math.min($,N.findMin(F[X]));return $},xt.exports.findMaxMulti=function(F){for(var $=N.findMax(F[0]),X=1;X<F.length;X++)$=Math.max($,N.findMax(F[X]));return $},xt.exports.inside=function(F,$,X){return F<=X&&X<=$}},53843:function(xt,N,F){"use strict";var $=50,X=2,w=Math.log(2),Y=xt.exports,G=F(73807);function K(oe){return 1-Math.abs(oe)}xt.exports.getUnifiedMinMax=function(oe,ee){return Y.getUnifiedMinMaxMulti([oe],ee)},xt.exports.getUnifiedMinMaxMulti=function(oe,ee){ee=ee||{};var xe=!1,ce=!1,he=G.isNumber(ee.width)?ee.width:X,J=G.isNumber(ee.size)?ee.size:$,M=G.isNumber(ee.min)?ee.min:(xe=!0,G.findMinMulti(oe)),E=G.isNumber(ee.max)?ee.max:(ce=!0,G.findMaxMulti(oe)),fe=E-M,me=fe/(J-1);return xe&&(M=M-2*he*me),ce&&(E=E+2*he*me),{min:M,max:E}},xt.exports.create=function(oe,ee){if(ee=ee||{},!oe||oe.length===0)return[];var xe=G.isNumber(ee.size)?ee.size:$,ce=G.isNumber(ee.width)?ee.width:X,he=Y.getUnifiedMinMax(oe,{size:xe,width:ce,min:ee.min,max:ee.max}),J=he.min,M=he.max,E=M-J,fe=E/(xe-1);if(E===0)return[{x:J,y:1}];for(var me=[],ke=0;ke<xe;ke++)me.push({x:J+ke*fe,y:0});var Pe=function(je){return Math.floor((je-J)/fe)},Le=Q(K,ce),tt=Le[ce],ft=Le[ce-1]-Le[ce-2],ge=0;oe.forEach(function(je){var Et=Pe(je);if(!(Et+ce<0||Et-ce>=me.length)){var Ae=Math.max(Et-ce,0),Qe=Et,te=Math.min(Et+ce,me.length-1),Ze=Ae-(Et-ce),ie=Et+ce-te,Oe=Le[-ce-1+Ze]||0,nt=Le[-ce-1+ie]||0,ye=tt/(tt-Oe-nt);Ze>0&&(ge+=ye*(Ze-1)*ft);var Te=Math.max(0,Et-ce+1);G.inside(0,me.length-1,Te)&&(me[Te].y+=ye*1*ft),G.inside(0,me.length-1,Qe+1)&&(me[Qe+1].y-=ye*2*ft),G.inside(0,me.length-1,te+1)&&(me[te+1].y+=ye*1*ft)}});var be=ge,Ce=0,Ye=0;return me.forEach(function(je){Ce+=je.y,be+=Ce,je.y=be,Ye+=be}),Ye>0&&me.forEach(function(je){je.y/=Ye}),me};function Q(oe,ee){for(var xe={},ce=0,he=-ee;he<=ee;he++)ce+=oe(he/ee),xe[he]=ce;return xe}xt.exports.getExpectedValueFromPdf=function(oe){if(!(!oe||oe.length===0)){var ee=0;return oe.forEach(function(xe){ee+=xe.x*xe.y}),ee}},xt.exports.getXWithLeftTailArea=function(oe,ee){if(!(!oe||oe.length===0)){for(var xe=0,ce=0,he=0;he<oe.length&&(ce=he,xe+=oe[he].y,!(xe>=ee));he++);return oe[ce].x}},xt.exports.getPerplexity=function(oe){if(!(!oe||oe.length===0)){var ee=0;return oe.forEach(function(xe){var ce=Math.log(xe.y);isFinite(ce)&&(ee+=xe.y*ce)}),ee=-ee/w,Math.pow(2,ee)}}},32676:function(xt,N,F){var $=F(34155);(function(X,w){xt.exports=w()})(this,function(){"use strict";function X(wt,se){if(!(wt instanceof se))throw new TypeError("Cannot call a class as a function")}function w(wt,se){for(var Ge=0;Ge<se.length;Ge++){var Ke=se[Ge];Ke.enumerable=Ke.enumerable||!1,Ke.configurable=!0,"value"in Ke&&(Ke.writable=!0),Object.defineProperty(wt,Ke.key,Ke)}}function Y(wt,se,Ge){return se&&w(wt.prototype,se),Ge&&w(wt,Ge),wt}var G=function(){function wt(se,Ge){this.next=null,this.key=se,this.data=Ge,this.left=null,this.right=null}return wt}();function K(wt,se){return wt>se?1:wt<se?-1:0}function Q(wt,se,Ge){for(var Ke=new G(null,null),bt=Ke,Be=Ke;;){var pt=Ge(wt,se.key);if(pt<0){if(se.left===null)break;if(Ge(wt,se.left.key)<0){var It=se.left;if(se.left=It.right,It.right=se,se=It,se.left===null)break}Be.left=se,Be=se,se=se.left}else if(pt>0){if(se.right===null)break;if(Ge(wt,se.right.key)>0){var It=se.right;if(se.right=It.left,It.left=se,se=It,se.right===null)break}bt.right=se,bt=se,se=se.right}else break}return bt.right=se.left,Be.left=se.right,se.left=Ke.right,se.right=Ke.left,se}function oe(wt,se,Ge,Ke){var bt=new G(wt,se);if(Ge===null)return bt.left=bt.right=null,bt;Ge=Q(wt,Ge,Ke);var Be=Ke(wt,Ge.key);return Be<0?(bt.left=Ge.left,bt.right=Ge,Ge.left=null):Be>=0&&(bt.right=Ge.right,bt.left=Ge,Ge.right=null),bt}function ee(wt,se,Ge){var Ke=null,bt=null;if(se){se=Q(wt,se,Ge);var Be=Ge(se.key,wt);Be===0?(Ke=se.left,bt=se.right):Be<0?(bt=se.right,se.right=null,Ke=se):(Ke=se.left,se.left=null,bt=se)}return{left:Ke,right:bt}}function xe(wt,se,Ge){return se===null?wt:(wt===null||(se=Q(wt.key,se,Ge),se.left=wt),se)}function ce(wt,se,Ge,Ke,bt){if(wt){Ke(""+se+(Ge?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+bt(wt)+`
`);var Be=se+(Ge?"    ":"\u2502   ");wt.left&&ce(wt.left,Be,!1,Ke,bt),wt.right&&ce(wt.right,Be,!0,Ke,bt)}}var he=function(){function wt(se){se===void 0&&(se=K),this._root=null,this._size=0,this._comparator=se}return wt.prototype.insert=function(se,Ge){return this._size++,this._root=oe(se,Ge,this._root,this._comparator)},wt.prototype.add=function(se,Ge){var Ke=new G(se,Ge);this._root===null&&(Ke.left=Ke.right=null,this._size++,this._root=Ke);var bt=this._comparator,Be=Q(se,this._root,bt),pt=bt(se,Be.key);return pt===0?this._root=Be:(pt<0?(Ke.left=Be.left,Ke.right=Be,Be.left=null):pt>0&&(Ke.right=Be.right,Ke.left=Be,Be.right=null),this._size++,this._root=Ke),this._root},wt.prototype.remove=function(se){this._root=this._remove(se,this._root,this._comparator)},wt.prototype._remove=function(se,Ge,Ke){var bt;if(Ge===null)return null;Ge=Q(se,Ge,Ke);var Be=Ke(se,Ge.key);return Be===0?(Ge.left===null?bt=Ge.right:(bt=Q(se,Ge.left,Ke),bt.right=Ge.right),this._size--,bt):Ge},wt.prototype.pop=function(){var se=this._root;if(se){for(;se.left;)se=se.left;return this._root=Q(se.key,this._root,this._comparator),this._root=this._remove(se.key,this._root,this._comparator),{key:se.key,data:se.data}}return null},wt.prototype.findStatic=function(se){for(var Ge=this._root,Ke=this._comparator;Ge;){var bt=Ke(se,Ge.key);if(bt===0)return Ge;bt<0?Ge=Ge.left:Ge=Ge.right}return null},wt.prototype.find=function(se){return this._root&&(this._root=Q(se,this._root,this._comparator),this._comparator(se,this._root.key)!==0)?null:this._root},wt.prototype.contains=function(se){for(var Ge=this._root,Ke=this._comparator;Ge;){var bt=Ke(se,Ge.key);if(bt===0)return!0;bt<0?Ge=Ge.left:Ge=Ge.right}return!1},wt.prototype.forEach=function(se,Ge){for(var Ke=this._root,bt=[],Be=!1;!Be;)Ke!==null?(bt.push(Ke),Ke=Ke.left):bt.length!==0?(Ke=bt.pop(),se.call(Ge,Ke),Ke=Ke.right):Be=!0;return this},wt.prototype.range=function(se,Ge,Ke,bt){for(var Be=[],pt=this._comparator,It=this._root,ot;Be.length!==0||It;)if(It)Be.push(It),It=It.left;else{if(It=Be.pop(),ot=pt(It.key,Ge),ot>0)break;if(pt(It.key,se)>=0&&Ke.call(bt,It))return this;It=It.right}return this},wt.prototype.keys=function(){var se=[];return this.forEach(function(Ge){var Ke=Ge.key;return se.push(Ke)}),se},wt.prototype.values=function(){var se=[];return this.forEach(function(Ge){var Ke=Ge.data;return se.push(Ke)}),se},wt.prototype.min=function(){return this._root?this.minNode(this._root).key:null},wt.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},wt.prototype.minNode=function(se){if(se===void 0&&(se=this._root),se)for(;se.left;)se=se.left;return se},wt.prototype.maxNode=function(se){if(se===void 0&&(se=this._root),se)for(;se.right;)se=se.right;return se},wt.prototype.at=function(se){for(var Ge=this._root,Ke=!1,bt=0,Be=[];!Ke;)if(Ge)Be.push(Ge),Ge=Ge.left;else if(Be.length>0){if(Ge=Be.pop(),bt===se)return Ge;bt++,Ge=Ge.right}else Ke=!0;return null},wt.prototype.next=function(se){var Ge=this._root,Ke=null;if(se.right){for(Ke=se.right;Ke.left;)Ke=Ke.left;return Ke}for(var bt=this._comparator;Ge;){var Be=bt(se.key,Ge.key);if(Be===0)break;Be<0?(Ke=Ge,Ge=Ge.left):Ge=Ge.right}return Ke},wt.prototype.prev=function(se){var Ge=this._root,Ke=null;if(se.left!==null){for(Ke=se.left;Ke.right;)Ke=Ke.right;return Ke}for(var bt=this._comparator;Ge;){var Be=bt(se.key,Ge.key);if(Be===0)break;Be<0?Ge=Ge.left:(Ke=Ge,Ge=Ge.right)}return Ke},wt.prototype.clear=function(){return this._root=null,this._size=0,this},wt.prototype.toList=function(){return E(this._root)},wt.prototype.load=function(se,Ge,Ke){Ge===void 0&&(Ge=[]),Ke===void 0&&(Ke=!1);var bt=se.length,Be=this._comparator;if(Ke&&ke(se,Ge,0,bt-1,Be),this._root===null)this._root=J(se,Ge,0,bt),this._size=bt;else{var pt=me(this.toList(),M(se,Ge),Be);bt=this._size+bt,this._root=fe({head:pt},0,bt)}return this},wt.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(wt.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(wt.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),wt.prototype.toString=function(se){se===void 0&&(se=function(bt){return String(bt.key)});var Ge=[];return ce(this._root,"",!0,function(Ke){return Ge.push(Ke)},se),Ge.join("")},wt.prototype.update=function(se,Ge,Ke){var bt=this._comparator,Be=ee(se,this._root,bt),pt=Be.left,It=Be.right;bt(se,Ge)<0?It=oe(Ge,Ke,It,bt):pt=oe(Ge,Ke,pt,bt),this._root=xe(pt,It,bt)},wt.prototype.split=function(se){return ee(se,this._root,this._comparator)},wt}();function J(wt,se,Ge,Ke){var bt=Ke-Ge;if(bt>0){var Be=Ge+Math.floor(bt/2),pt=wt[Be],It=se[Be],ot=new G(pt,It);return ot.left=J(wt,se,Ge,Be),ot.right=J(wt,se,Be+1,Ke),ot}return null}function M(wt,se){for(var Ge=new G(null,null),Ke=Ge,bt=0;bt<wt.length;bt++)Ke=Ke.next=new G(wt[bt],se[bt]);return Ke.next=null,Ge.next}function E(wt){for(var se=wt,Ge=[],Ke=!1,bt=new G(null,null),Be=bt;!Ke;)se?(Ge.push(se),se=se.left):Ge.length>0?(se=Be=Be.next=Ge.pop(),se=se.right):Ke=!0;return Be.next=null,bt.next}function fe(wt,se,Ge){var Ke=Ge-se;if(Ke>0){var bt=se+Math.floor(Ke/2),Be=fe(wt,se,bt),pt=wt.head;return pt.left=Be,wt.head=wt.head.next,pt.right=fe(wt,bt+1,Ge),pt}return null}function me(wt,se,Ge){for(var Ke=new G(null,null),bt=Ke,Be=wt,pt=se;Be!==null&&pt!==null;)Ge(Be.key,pt.key)<0?(bt.next=Be,Be=Be.next):(bt.next=pt,pt=pt.next),bt=bt.next;return Be!==null?bt.next=Be:pt!==null&&(bt.next=pt),Ke.next}function ke(wt,se,Ge,Ke,bt){if(!(Ge>=Ke)){for(var Be=wt[Ge+Ke>>1],pt=Ge-1,It=Ke+1;;){do pt++;while(bt(wt[pt],Be)<0);do It--;while(bt(wt[It],Be)>0);if(pt>=It)break;var ot=wt[pt];wt[pt]=wt[It],wt[It]=ot,ot=se[pt],se[pt]=se[It],se[It]=ot}ke(wt,se,Ge,It,bt),ke(wt,se,It+1,Ke,bt)}}var Pe=function(se,Ge){return se.ll.x<=Ge.x&&Ge.x<=se.ur.x&&se.ll.y<=Ge.y&&Ge.y<=se.ur.y},Le=function(se,Ge){if(Ge.ur.x<se.ll.x||se.ur.x<Ge.ll.x||Ge.ur.y<se.ll.y||se.ur.y<Ge.ll.y)return null;var Ke=se.ll.x<Ge.ll.x?Ge.ll.x:se.ll.x,bt=se.ur.x<Ge.ur.x?se.ur.x:Ge.ur.x,Be=se.ll.y<Ge.ll.y?Ge.ll.y:se.ll.y,pt=se.ur.y<Ge.ur.y?se.ur.y:Ge.ur.y;return{ll:{x:Ke,y:Be},ur:{x:bt,y:pt}}},tt=Number.EPSILON;tt===void 0&&(tt=Math.pow(2,-52));var ft=tt*tt,ge=function(se,Ge){if(-tt<se&&se<tt&&-tt<Ge&&Ge<tt)return 0;var Ke=se-Ge;return Ke*Ke<ft*se*Ge?0:se<Ge?-1:1},be=function(){function wt(){X(this,wt),this.reset()}return Y(wt,[{key:"reset",value:function(){this.xRounder=new Ce,this.yRounder=new Ce}},{key:"round",value:function(Ge,Ke){return{x:this.xRounder.round(Ge),y:this.yRounder.round(Ke)}}}]),wt}(),Ce=function(){function wt(){X(this,wt),this.tree=new he,this.round(0)}return Y(wt,[{key:"round",value:function(Ge){var Ke=this.tree.add(Ge),bt=this.tree.prev(Ke);if(bt!==null&&ge(Ke.key,bt.key)===0)return this.tree.remove(Ge),bt.key;var Be=this.tree.next(Ke);return Be!==null&&ge(Ke.key,Be.key)===0?(this.tree.remove(Ge),Be.key):Ge}}]),wt}(),Ye=new be,je=function(se,Ge){return se.x*Ge.y-se.y*Ge.x},Et=function(se,Ge){return se.x*Ge.x+se.y*Ge.y},Ae=function(se,Ge,Ke){var bt={x:Ge.x-se.x,y:Ge.y-se.y},Be={x:Ke.x-se.x,y:Ke.y-se.y},pt=je(bt,Be);return ge(pt,0)},Qe=function(se){return Math.sqrt(Et(se,se))},te=function(se,Ge,Ke){var bt={x:Ge.x-se.x,y:Ge.y-se.y},Be={x:Ke.x-se.x,y:Ke.y-se.y};return je(Be,bt)/Qe(Be)/Qe(bt)},Ze=function(se,Ge,Ke){var bt={x:Ge.x-se.x,y:Ge.y-se.y},Be={x:Ke.x-se.x,y:Ke.y-se.y};return Et(Be,bt)/Qe(Be)/Qe(bt)},ie=function(se,Ge,Ke){return Ge.y===0?null:{x:se.x+Ge.x/Ge.y*(Ke-se.y),y:Ke}},Oe=function(se,Ge,Ke){return Ge.x===0?null:{x:Ke,y:se.y+Ge.y/Ge.x*(Ke-se.x)}},nt=function(se,Ge,Ke,bt){if(Ge.x===0)return Oe(Ke,bt,se.x);if(bt.x===0)return Oe(se,Ge,Ke.x);if(Ge.y===0)return ie(Ke,bt,se.y);if(bt.y===0)return ie(se,Ge,Ke.y);var Be=je(Ge,bt);if(Be==0)return null;var pt={x:Ke.x-se.x,y:Ke.y-se.y},It=je(pt,Ge)/Be,ot=je(pt,bt)/Be,zt=se.x+ot*Ge.x,Jt=Ke.x+It*bt.x,tr=se.y+ot*Ge.y,pr=Ke.y+It*bt.y,br=(zt+Jt)/2,Zr=(tr+pr)/2;return{x:br,y:Zr}},ye=function(){Y(wt,null,[{key:"compare",value:function(Ge,Ke){var bt=wt.comparePoints(Ge.point,Ke.point);return bt!==0?bt:(Ge.point!==Ke.point&&Ge.link(Ke),Ge.isLeft!==Ke.isLeft?Ge.isLeft?1:-1:Je.compare(Ge.segment,Ke.segment))}},{key:"comparePoints",value:function(Ge,Ke){return Ge.x<Ke.x?-1:Ge.x>Ke.x?1:Ge.y<Ke.y?-1:Ge.y>Ke.y?1:0}}]);function wt(se,Ge){X(this,wt),se.events===void 0?se.events=[this]:se.events.push(this),this.point=se,this.isLeft=Ge}return Y(wt,[{key:"link",value:function(Ge){if(Ge.point===this.point)throw new Error("Tried to link already linked events");for(var Ke=Ge.point.events,bt=0,Be=Ke.length;bt<Be;bt++){var pt=Ke[bt];this.point.events.push(pt),pt.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var Ge=this.point.events.length,Ke=0;Ke<Ge;Ke++){var bt=this.point.events[Ke];if(bt.segment.consumedBy===void 0)for(var Be=Ke+1;Be<Ge;Be++){var pt=this.point.events[Be];pt.consumedBy===void 0&&bt.otherSE.point.events===pt.otherSE.point.events&&bt.segment.consume(pt.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var Ge=[],Ke=0,bt=this.point.events.length;Ke<bt;Ke++){var Be=this.point.events[Ke];Be!==this&&!Be.segment.ringOut&&Be.segment.isInResult()&&Ge.push(Be)}return Ge}},{key:"getLeftmostComparator",value:function(Ge){var Ke=this,bt=new Map,Be=function(It){var ot=It.otherSE;bt.set(It,{sine:te(Ke.point,Ge.point,ot.point),cosine:Ze(Ke.point,Ge.point,ot.point)})};return function(pt,It){bt.has(pt)||Be(pt),bt.has(It)||Be(It);var ot=bt.get(pt),zt=ot.sine,Jt=ot.cosine,tr=bt.get(It),pr=tr.sine,br=tr.cosine;return zt>=0&&pr>=0?Jt<br?1:Jt>br?-1:0:zt<0&&pr<0?Jt<br?-1:Jt>br?1:0:pr<zt?-1:pr>zt?1:0}}}]),wt}(),Te=0,Je=function(){Y(wt,null,[{key:"compare",value:function(Ge,Ke){var bt=Ge.leftSE.point.x,Be=Ke.leftSE.point.x,pt=Ge.rightSE.point.x,It=Ke.rightSE.point.x;if(It<bt)return 1;if(pt<Be)return-1;var ot=Ge.leftSE.point.y,zt=Ke.leftSE.point.y,Jt=Ge.rightSE.point.y,tr=Ke.rightSE.point.y;if(bt<Be){if(zt<ot&&zt<Jt)return 1;if(zt>ot&&zt>Jt)return-1;var pr=Ge.comparePoint(Ke.leftSE.point);if(pr<0)return 1;if(pr>0)return-1;var br=Ke.comparePoint(Ge.rightSE.point);return br!==0?br:-1}if(bt>Be){if(ot<zt&&ot<tr)return-1;if(ot>zt&&ot>tr)return 1;var Zr=Ke.comparePoint(Ge.leftSE.point);if(Zr!==0)return Zr;var Nr=Ge.comparePoint(Ke.rightSE.point);return Nr<0?1:Nr>0?-1:1}if(ot<zt)return-1;if(ot>zt)return 1;if(pt<It){var tn=Ke.comparePoint(Ge.rightSE.point);if(tn!==0)return tn}if(pt>It){var Dn=Ge.comparePoint(Ke.rightSE.point);if(Dn<0)return 1;if(Dn>0)return-1}if(pt!==It){var gn=Jt-ot,Vn=pt-bt,Un=tr-zt,mi=It-Be;if(gn>Vn&&Un<mi)return 1;if(gn<Vn&&Un>mi)return-1}return pt>It?1:pt<It||Jt<tr?-1:Jt>tr?1:Ge.id<Ke.id?-1:Ge.id>Ke.id?1:0}}]);function wt(se,Ge,Ke,bt){X(this,wt),this.id=++Te,this.leftSE=se,se.segment=this,se.otherSE=Ge,this.rightSE=Ge,Ge.segment=this,Ge.otherSE=se,this.rings=Ke,this.windings=bt}return Y(wt,[{key:"replaceRightSE",value:function(Ge){this.rightSE=Ge,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var Ge=this.leftSE.point.y,Ke=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:Ge<Ke?Ge:Ke},ur:{x:this.rightSE.point.x,y:Ge>Ke?Ge:Ke}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(Ge){return Ge.x===this.leftSE.point.x&&Ge.y===this.leftSE.point.y||Ge.x===this.rightSE.point.x&&Ge.y===this.rightSE.point.y}},{key:"comparePoint",value:function(Ge){if(this.isAnEndpoint(Ge))return 0;var Ke=this.leftSE.point,bt=this.rightSE.point,Be=this.vector();if(Ke.x===bt.x)return Ge.x===Ke.x?0:Ge.x<Ke.x?1:-1;var pt=(Ge.y-Ke.y)/Be.y,It=Ke.x+pt*Be.x;if(Ge.x===It)return 0;var ot=(Ge.x-Ke.x)/Be.x,zt=Ke.y+ot*Be.y;return Ge.y===zt?0:Ge.y<zt?-1:1}},{key:"getIntersection",value:function(Ge){var Ke=this.bbox(),bt=Ge.bbox(),Be=Le(Ke,bt);if(Be===null)return null;var pt=this.leftSE.point,It=this.rightSE.point,ot=Ge.leftSE.point,zt=Ge.rightSE.point,Jt=Pe(Ke,ot)&&this.comparePoint(ot)===0,tr=Pe(bt,pt)&&Ge.comparePoint(pt)===0,pr=Pe(Ke,zt)&&this.comparePoint(zt)===0,br=Pe(bt,It)&&Ge.comparePoint(It)===0;if(tr&&Jt)return br&&!pr?It:!br&&pr?zt:null;if(tr)return pr&&pt.x===zt.x&&pt.y===zt.y?null:pt;if(Jt)return br&&It.x===ot.x&&It.y===ot.y?null:ot;if(br&&pr)return null;if(br)return It;if(pr)return zt;var Zr=nt(pt,this.vector(),ot,Ge.vector());return Zr===null||!Pe(Be,Zr)?null:Ye.round(Zr.x,Zr.y)}},{key:"split",value:function(Ge){var Ke=[],bt=Ge.events!==void 0,Be=new ye(Ge,!0),pt=new ye(Ge,!1),It=this.rightSE;this.replaceRightSE(pt),Ke.push(pt),Ke.push(Be);var ot=new wt(Be,It,this.rings.slice(),this.windings.slice());return ye.comparePoints(ot.leftSE.point,ot.rightSE.point)>0&&ot.swapEvents(),ye.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),bt&&(Be.checkForConsuming(),pt.checkForConsuming()),Ke}},{key:"swapEvents",value:function(){var Ge=this.rightSE;this.rightSE=this.leftSE,this.leftSE=Ge,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var Ke=0,bt=this.windings.length;Ke<bt;Ke++)this.windings[Ke]*=-1}},{key:"consume",value:function(Ge){for(var Ke=this,bt=Ge;Ke.consumedBy;)Ke=Ke.consumedBy;for(;bt.consumedBy;)bt=bt.consumedBy;var Be=wt.compare(Ke,bt);if(Be!==0){if(Be>0){var pt=Ke;Ke=bt,bt=pt}if(Ke.prev===bt){var It=Ke;Ke=bt,bt=It}for(var ot=0,zt=bt.rings.length;ot<zt;ot++){var Jt=bt.rings[ot],tr=bt.windings[ot],pr=Ke.rings.indexOf(Jt);pr===-1?(Ke.rings.push(Jt),Ke.windings.push(tr)):Ke.windings[pr]+=tr}bt.rings=null,bt.windings=null,bt.consumedBy=Ke,bt.leftSE.consumedBy=Ke.leftSE,bt.rightSE.consumedBy=Ke.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var Ge=this.prev.consumedBy||this.prev;this._beforeState=Ge.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var Ge=this.beforeState();this._afterState={rings:Ge.rings.slice(0),windings:Ge.windings.slice(0),multiPolys:[]};for(var Ke=this._afterState.rings,bt=this._afterState.windings,Be=this._afterState.multiPolys,pt=0,It=this.rings.length;pt<It;pt++){var ot=this.rings[pt],zt=this.windings[pt],Jt=Ke.indexOf(ot);Jt===-1?(Ke.push(ot),bt.push(zt)):bt[Jt]+=zt}for(var tr=[],pr=[],br=0,Zr=Ke.length;br<Zr;br++)if(bt[br]!==0){var Nr=Ke[br],tn=Nr.poly;if(pr.indexOf(tn)===-1)if(Nr.isExterior)tr.push(tn);else{pr.indexOf(tn)===-1&&pr.push(tn);var Dn=tr.indexOf(Nr.poly);Dn!==-1&&tr.splice(Dn,1)}}for(var gn=0,Vn=tr.length;gn<Vn;gn++){var Un=tr[gn].multiPoly;Be.indexOf(Un)===-1&&Be.push(Un)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var Ge=this.beforeState().multiPolys,Ke=this.afterState().multiPolys;switch(st.type){case"union":{var bt=Ge.length===0,Be=Ke.length===0;this._isInResult=bt!==Be;break}case"intersection":{var pt,It;Ge.length<Ke.length?(pt=Ge.length,It=Ke.length):(pt=Ke.length,It=Ge.length),this._isInResult=It===st.numMultiPolys&&pt<It;break}case"xor":{var ot=Math.abs(Ge.length-Ke.length);this._isInResult=ot%2===1;break}case"difference":{var zt=function(tr){return tr.length===1&&tr[0].isSubject};this._isInResult=zt(Ge)!==zt(Ke);break}default:throw new Error("Unrecognized operation type found ".concat(st.type))}return this._isInResult}}],[{key:"fromRing",value:function(Ge,Ke,bt){var Be,pt,It,ot=ye.comparePoints(Ge,Ke);if(ot<0)Be=Ge,pt=Ke,It=1;else if(ot>0)Be=Ke,pt=Ge,It=-1;else throw new Error("Tried to create degenerate segment at [".concat(Ge.x,", ").concat(Ge.y,"]"));var zt=new ye(Be,!0),Jt=new ye(pt,!1);return new wt(zt,Jt,[bt],[It])}}]),wt}(),pe=function(){function wt(se,Ge,Ke){if(X(this,wt),!Array.isArray(se)||se.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=Ge,this.isExterior=Ke,this.segments=[],typeof se[0][0]!="number"||typeof se[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var bt=Ye.round(se[0][0],se[0][1]);this.bbox={ll:{x:bt.x,y:bt.y},ur:{x:bt.x,y:bt.y}};for(var Be=bt,pt=1,It=se.length;pt<It;pt++){if(typeof se[pt][0]!="number"||typeof se[pt][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var ot=Ye.round(se[pt][0],se[pt][1]);ot.x===Be.x&&ot.y===Be.y||(this.segments.push(Je.fromRing(Be,ot,this)),ot.x<this.bbox.ll.x&&(this.bbox.ll.x=ot.x),ot.y<this.bbox.ll.y&&(this.bbox.ll.y=ot.y),ot.x>this.bbox.ur.x&&(this.bbox.ur.x=ot.x),ot.y>this.bbox.ur.y&&(this.bbox.ur.y=ot.y),Be=ot)}(bt.x!==Be.x||bt.y!==Be.y)&&this.segments.push(Je.fromRing(Be,bt,this))}return Y(wt,[{key:"getSweepEvents",value:function(){for(var Ge=[],Ke=0,bt=this.segments.length;Ke<bt;Ke++){var Be=this.segments[Ke];Ge.push(Be.leftSE),Ge.push(Be.rightSE)}return Ge}}]),wt}(),Me=function(){function wt(se,Ge){if(X(this,wt),!Array.isArray(se))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new pe(se[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var Ke=1,bt=se.length;Ke<bt;Ke++){var Be=new pe(se[Ke],this,!1);Be.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Be.bbox.ll.x),Be.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Be.bbox.ll.y),Be.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Be.bbox.ur.x),Be.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Be.bbox.ur.y),this.interiorRings.push(Be)}this.multiPoly=Ge}return Y(wt,[{key:"getSweepEvents",value:function(){for(var Ge=this.exteriorRing.getSweepEvents(),Ke=0,bt=this.interiorRings.length;Ke<bt;Ke++)for(var Be=this.interiorRings[Ke].getSweepEvents(),pt=0,It=Be.length;pt<It;pt++)Ge.push(Be[pt]);return Ge}}]),wt}(),ze=function(){function wt(se,Ge){if(X(this,wt),!Array.isArray(se))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof se[0][0][0]=="number"&&(se=[se])}catch(pt){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var Ke=0,bt=se.length;Ke<bt;Ke++){var Be=new Me(se[Ke],this);Be.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Be.bbox.ll.x),Be.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Be.bbox.ll.y),Be.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Be.bbox.ur.x),Be.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Be.bbox.ur.y),this.polys.push(Be)}this.isSubject=Ge}return Y(wt,[{key:"getSweepEvents",value:function(){for(var Ge=[],Ke=0,bt=this.polys.length;Ke<bt;Ke++)for(var Be=this.polys[Ke].getSweepEvents(),pt=0,It=Be.length;pt<It;pt++)Ge.push(Be[pt]);return Ge}}]),wt}(),De=function(){Y(wt,null,[{key:"factory",value:function(Ge){for(var Ke=[],bt=0,Be=Ge.length;bt<Be;bt++){var pt=Ge[bt];if(!(!pt.isInResult()||pt.ringOut)){for(var It=null,ot=pt.leftSE,zt=pt.rightSE,Jt=[ot],tr=ot.point,pr=[];It=ot,ot=zt,Jt.push(ot),ot.point!==tr;)for(;;){var br=ot.getAvailableLinkedEvents();if(br.length===0){var Zr=Jt[0].point,Nr=Jt[Jt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(Zr.x,",")+" ".concat(Zr.y,"]. Last matching segment found ends at")+" [".concat(Nr.x,", ").concat(Nr.y,"]."))}if(br.length===1){zt=br[0].otherSE;break}for(var tn=null,Dn=0,gn=pr.length;Dn<gn;Dn++)if(pr[Dn].point===ot.point){tn=Dn;break}if(tn!==null){var Vn=pr.splice(tn)[0],Un=Jt.splice(Vn.index);Un.unshift(Un[0].otherSE),Ke.push(new wt(Un.reverse()));continue}pr.push({index:Jt.length,point:ot.point});var mi=ot.getLeftmostComparator(It);zt=br.sort(mi)[0].otherSE;break}Ke.push(new wt(Jt))}}return Ke}}]);function wt(se){X(this,wt),this.events=se;for(var Ge=0,Ke=se.length;Ge<Ke;Ge++)se[Ge].segment.ringOut=this;this.poly=null}return Y(wt,[{key:"getGeom",value:function(){for(var Ge=this.events[0].point,Ke=[Ge],bt=1,Be=this.events.length-1;bt<Be;bt++){var pt=this.events[bt].point,It=this.events[bt+1].point;Ae(pt,Ge,It)!==0&&(Ke.push(pt),Ge=pt)}if(Ke.length===1)return null;var ot=Ke[0],zt=Ke[1];Ae(ot,Ge,zt)===0&&Ke.shift(),Ke.push(Ke[0]);for(var Jt=this.isExteriorRing()?1:-1,tr=this.isExteriorRing()?0:Ke.length-1,pr=this.isExteriorRing()?Ke.length:-1,br=[],Zr=tr;Zr!=pr;Zr+=Jt)br.push([Ke[Zr].x,Ke[Zr].y]);return br}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var Ge=this.enclosingRing();this._isExteriorRing=Ge?!Ge.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var Ge=this.events[0],Ke=1,bt=this.events.length;Ke<bt;Ke++){var Be=this.events[Ke];ye.compare(Ge,Be)>0&&(Ge=Be)}for(var pt=Ge.segment.prevInResult(),It=pt?pt.prevInResult():null;;){if(!pt)return null;if(!It)return pt.ringOut;if(It.ringOut!==pt.ringOut)return It.ringOut.enclosingRing()!==pt.ringOut?pt.ringOut:pt.ringOut.enclosingRing();pt=It.prevInResult(),It=pt?pt.prevInResult():null}}}]),wt}(),Ct=function(){function wt(se){X(this,wt),this.exteriorRing=se,se.poly=this,this.interiorRings=[]}return Y(wt,[{key:"addInterior",value:function(Ge){this.interiorRings.push(Ge),Ge.poly=this}},{key:"getGeom",value:function(){var Ge=[this.exteriorRing.getGeom()];if(Ge[0]===null)return null;for(var Ke=0,bt=this.interiorRings.length;Ke<bt;Ke++){var Be=this.interiorRings[Ke].getGeom();Be!==null&&Ge.push(Be)}return Ge}}]),wt}(),Vt=function(){function wt(se){X(this,wt),this.rings=se,this.polys=this._composePolys(se)}return Y(wt,[{key:"getGeom",value:function(){for(var Ge=[],Ke=0,bt=this.polys.length;Ke<bt;Ke++){var Be=this.polys[Ke].getGeom();Be!==null&&Ge.push(Be)}return Ge}},{key:"_composePolys",value:function(Ge){for(var Ke=[],bt=0,Be=Ge.length;bt<Be;bt++){var pt=Ge[bt];if(!pt.poly)if(pt.isExteriorRing())Ke.push(new Ct(pt));else{var It=pt.enclosingRing();It.poly||Ke.push(new Ct(It)),It.poly.addInterior(pt)}}return Ke}}]),wt}(),Ve=function(){function wt(se){var Ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Je.compare;X(this,wt),this.queue=se,this.tree=new he(Ge),this.segments=[]}return Y(wt,[{key:"process",value:function(Ge){var Ke=Ge.segment,bt=[];if(Ge.consumedBy)return Ge.isLeft?this.queue.remove(Ge.otherSE):this.tree.remove(Ke),bt;var Be=Ge.isLeft?this.tree.insert(Ke):this.tree.find(Ke);if(!Be)throw new Error("Unable to find segment #".concat(Ke.id," ")+"[".concat(Ke.leftSE.point.x,", ").concat(Ke.leftSE.point.y,"] -> ")+"[".concat(Ke.rightSE.point.x,", ").concat(Ke.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var pt=Be,It=Be,ot=void 0,zt=void 0;ot===void 0;)pt=this.tree.prev(pt),pt===null?ot=null:pt.key.consumedBy===void 0&&(ot=pt.key);for(;zt===void 0;)It=this.tree.next(It),It===null?zt=null:It.key.consumedBy===void 0&&(zt=It.key);if(Ge.isLeft){var Jt=null;if(ot){var tr=ot.getIntersection(Ke);if(tr!==null&&(Ke.isAnEndpoint(tr)||(Jt=tr),!ot.isAnEndpoint(tr)))for(var pr=this._splitSafely(ot,tr),br=0,Zr=pr.length;br<Zr;br++)bt.push(pr[br])}var Nr=null;if(zt){var tn=zt.getIntersection(Ke);if(tn!==null&&(Ke.isAnEndpoint(tn)||(Nr=tn),!zt.isAnEndpoint(tn)))for(var Dn=this._splitSafely(zt,tn),gn=0,Vn=Dn.length;gn<Vn;gn++)bt.push(Dn[gn])}if(Jt!==null||Nr!==null){var Un=null;if(Jt===null)Un=Nr;else if(Nr===null)Un=Jt;else{var mi=ye.comparePoints(Jt,Nr);Un=mi<=0?Jt:Nr}this.queue.remove(Ke.rightSE),bt.push(Ke.rightSE);for(var qn=Ke.split(Un),Xn=0,We=qn.length;Xn<We;Xn++)bt.push(qn[Xn])}bt.length>0?(this.tree.remove(Ke),bt.push(Ge)):(this.segments.push(Ke),Ke.prev=ot)}else{if(ot&&zt){var it=ot.getIntersection(zt);if(it!==null){if(!ot.isAnEndpoint(it))for(var _t=this._splitSafely(ot,it),Pt=0,jt=_t.length;Pt<jt;Pt++)bt.push(_t[Pt]);if(!zt.isAnEndpoint(it))for(var gr=this._splitSafely(zt,it),Cr=0,kt=gr.length;Cr<kt;Cr++)bt.push(gr[Cr])}}this.tree.remove(Ke)}return bt}},{key:"_splitSafely",value:function(Ge,Ke){this.tree.remove(Ge);var bt=Ge.rightSE;this.queue.remove(bt);var Be=Ge.split(Ke);return Be.push(bt),Ge.consumedBy===void 0&&this.tree.insert(Ge),Be}}]),wt}(),Ue=typeof $!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Ee=typeof $!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,et=function(){function wt(){X(this,wt)}return Y(wt,[{key:"run",value:function(Ge,Ke,bt){st.type=Ge,Ye.reset();for(var Be=[new ze(Ke,!0)],pt=0,It=bt.length;pt<It;pt++)Be.push(new ze(bt[pt],!1));if(st.numMultiPolys=Be.length,st.type==="difference")for(var ot=Be[0],zt=1;zt<Be.length;)Le(Be[zt].bbox,ot.bbox)!==null?zt++:Be.splice(zt,1);if(st.type==="intersection"){for(var Jt=0,tr=Be.length;Jt<tr;Jt++)for(var pr=Be[Jt],br=Jt+1,Zr=Be.length;br<Zr;br++)if(Le(pr.bbox,Be[br].bbox)===null)return[]}for(var Nr=new he(ye.compare),tn=0,Dn=Be.length;tn<Dn;tn++)for(var gn=Be[tn].getSweepEvents(),Vn=0,Un=gn.length;Vn<Un;Vn++)if(Nr.insert(gn[Vn]),Nr.size>Ue)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var mi=new Ve(Nr),qn=Nr.size,Xn=Nr.pop();Xn;){var We=Xn.key;if(Nr.size===qn){var it=We.segment;throw new Error("Unable to pop() ".concat(We.isLeft?"left":"right"," SweepEvent ")+"[".concat(We.point.x,", ").concat(We.point.y,"] from segment #").concat(it.id," ")+"[".concat(it.leftSE.point.x,", ").concat(it.leftSE.point.y,"] -> ")+"[".concat(it.rightSE.point.x,", ").concat(it.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(Nr.size>Ue)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(mi.segments.length>Ee)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var _t=mi.process(We),Pt=0,jt=_t.length;Pt<jt;Pt++){var gr=_t[Pt];gr.consumedBy===void 0&&Nr.insert(gr)}qn=Nr.size,Xn=Nr.pop()}Ye.reset();var Cr=De.factory(mi.segments),kt=new Vt(Cr);return kt.getGeom()}}]),wt}(),st=new et,Re=function(se){for(var Ge=arguments.length,Ke=new Array(Ge>1?Ge-1:0),bt=1;bt<Ge;bt++)Ke[bt-1]=arguments[bt];return st.run("union",se,Ke)},Ie=function(se){for(var Ge=arguments.length,Ke=new Array(Ge>1?Ge-1:0),bt=1;bt<Ge;bt++)Ke[bt-1]=arguments[bt];return st.run("intersection",se,Ke)},ct=function(se){for(var Ge=arguments.length,Ke=new Array(Ge>1?Ge-1:0),bt=1;bt<Ge;bt++)Ke[bt-1]=arguments[bt];return st.run("xor",se,Ke)},Tt=function(se){for(var Ge=arguments.length,Ke=new Array(Ge>1?Ge-1:0),bt=1;bt<Ge;bt++)Ke[bt-1]=arguments[bt];return st.run("difference",se,Ke)},Qt={union:Re,intersection:Ie,xor:ct,difference:Tt};return Qt})},62273:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var F=N.default={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"}},27590:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var F={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},$=N.default=F},45598:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=Y;var X=$(F(67294)),w=F(11805);function Y(G){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Q=[];return X.default.Children.forEach(G,function(oe){oe==null&&!K.keepEmpty||(Array.isArray(oe)?Q=Q.concat(Y(oe)):(0,w.isFragment)(oe)&&oe.props?Q=Q.concat(Y(oe.props.children,K)):Q.push(oe))}),Q}},3481:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.isStyleSupport=G;var X=$(F(19158)),w=function(Q){if((0,X.default)()&&window.document.documentElement){var oe=Array.isArray(Q)?Q:[Q],ee=window.document.documentElement;return oe.some(function(xe){return xe in ee.style})}return!1},Y=function(Q,oe){if(!w(Q))return!1;var ee=document.createElement("div"),xe=ee.style[Q];return ee.style[Q]=oe,ee.style[Q]!==xe};function G(K,Q){return!Array.isArray(K)&&Q!==void 0?Y(K,Q):w(K)}},27712:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var F={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(w){var Y=w.keyCode;if(w.altKey&&!w.ctrlKey||w.metaKey||Y>=F.F1&&Y<=F.F12)return!1;switch(Y){case F.ALT:case F.CAPS_LOCK:case F.CONTEXT_MENU:case F.CTRL:case F.DOWN:case F.END:case F.ESC:case F.HOME:case F.INSERT:case F.LEFT:case F.MAC_FF_META:case F.META:case F.NUMLOCK:case F.NUM_CENTER:case F.PAGE_DOWN:case F.PAGE_UP:case F.PAUSE:case F.PRINT_SCREEN:case F.RIGHT:case F.SHIFT:case F.UP:case F.WIN_KEY:case F.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(w){if(w>=F.ZERO&&w<=F.NINE||w>=F.NUM_ZERO&&w<=F.NUM_MULTIPLY||w>=F.A&&w<=F.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&w===0)return!0;switch(w){case F.SPACE:case F.QUESTION_MARK:case F.NUM_PLUS:case F.NUM_MINUS:case F.NUM_PERIOD:case F.NUM_DIVISION:case F.SEMICOLON:case F.DASH:case F.EQUALS:case F.COMMA:case F.PERIOD:case F.SLASH:case F.APOSTROPHE:case F.SINGLE_QUOTE:case F.OPEN_SQUARE_BRACKET:case F.BACKSLASH:case F.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},$=N.default=F},18545:function(xt,N,F){"use strict";var $=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=w;var X=$(F(67294));function w(Y){var G=X.useRef();G.current=Y;var K=X.useCallback(function(){for(var Q,oe=arguments.length,ee=new Array(oe),xe=0;xe<oe;xe++)ee[xe]=arguments[xe];return(Q=G.current)===null||Q===void 0?void 0:Q.call.apply(Q,[G].concat(ee))},[]);return K}},82546:function(xt,N,F){"use strict";var $=F(64836).default,X=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.useLayoutUpdateEffect=N.default=void 0;var w=X(F(67294)),Y=$(F(19158)),G=(0,Y.default)()?w.useLayoutEffect:w.useEffect,K=function(xe,ce){var he=w.useRef(!0);G(function(){return xe(he.current)},ce),G(function(){return he.current=!1,function(){he.current=!0}},[])},Q=N.useLayoutUpdateEffect=function(xe,ce){K(function(he){if(!he)return xe()},ce)},oe=N.default=K},67265:function(xt,N,F){"use strict";var $=F(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=w;var X=$(F(67294));function w(Y,G,K){var Q=X.useRef({});return(!("value"in Q.current)||K(Q.current.condition,G))&&(Q.current.value=Y(),Q.current.condition=G),Q.current.value}},60869:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=Q;var X=$(F(27424)),w=$(F(18545)),Y=F(82546),G=$(F(78423));function K(oe){return oe!==void 0}function Q(oe,ee){var xe=ee||{},ce=xe.defaultValue,he=xe.value,J=xe.onChange,M=xe.postState,E=(0,G.default)(function(){return K(he)?he:K(ce)?typeof ce=="function"?ce():ce:typeof oe=="function"?oe():oe}),fe=(0,X.default)(E,2),me=fe[0],ke=fe[1],Pe=he!==void 0?he:me,Le=M?M(Pe):Pe,tt=(0,w.default)(J),ft=(0,G.default)([Pe]),ge=(0,X.default)(ft,2),be=ge[0],Ce=ge[1];(0,Y.useLayoutUpdateEffect)(function(){var je=be[0];me!==je&&tt(me,je)},[be]),(0,Y.useLayoutUpdateEffect)(function(){K(he)||ke(he)},[he]);var Ye=(0,w.default)(function(je,Et){ke(je,Et),Ce([Pe],Et)});return[Le,Ye]}},78423:function(xt,N,F){"use strict";var $=F(75263).default,X=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=G;var w=X(F(27424)),Y=$(F(67294));function G(K){var Q=Y.useRef(!1),oe=Y.useState(K),ee=(0,w.default)(oe,2),xe=ee[0],ce=ee[1];Y.useEffect(function(){return Q.current=!1,function(){Q.current=!0}},[]);function he(J,M){M&&Q.current||ce(J)}return[xe,he]}},11102:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var X=$(F(18698)),w=$(F(45520));function Y(K,Q){var oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,ee=new Set;function xe(ce,he){var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,M=ee.has(ce);if((0,w.default)(!M,"Warning: There may be circular references"),M)return!1;if(ce===he)return!0;if(oe&&J>1)return!1;ee.add(ce);var E=J+1;if(Array.isArray(ce)){if(!Array.isArray(he)||ce.length!==he.length)return!1;for(var fe=0;fe<ce.length;fe++)if(!xe(ce[fe],he[fe],E))return!1;return!0}if(ce&&he&&(0,X.default)(ce)==="object"&&(0,X.default)(he)==="object"){var me=Object.keys(ce);return me.length!==Object.keys(he).length?!1:me.every(function(ke){return xe(ce[ke],he[ke],E)})}return!1}return xe(K,Q)}var G=N.default=Y},18475:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=w;var X=$(F(42122));function w(Y,G){var K=(0,X.default)({},Y);return Array.isArray(G)&&G.forEach(function(Q){delete K[Q]}),K}},75531:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.composeRef=Q,N.fillRef=K,N.supportNodeRef=xe,N.supportRef=ee,N.useComposeRef=oe;var X=$(F(18698)),w=F(67294),Y=F(11805),G=$(F(67265));function K(ce,he){typeof ce=="function"?ce(he):(0,X.default)(ce)==="object"&&ce&&"current"in ce&&(ce.current=he)}function Q(){for(var ce=arguments.length,he=new Array(ce),J=0;J<ce;J++)he[J]=arguments[J];var M=he.filter(function(E){return E});return M.length<=1?M[0]:function(E){he.forEach(function(fe){K(fe,E)})}}function oe(){for(var ce=arguments.length,he=new Array(ce),J=0;J<ce;J++)he[J]=arguments[J];return(0,G.default)(function(){return Q.apply(void 0,he)},he,function(M,E){return M.length!==E.length||M.every(function(fe,me){return fe!==E[me]})})}function ee(ce){var he,J,M=(0,Y.isMemo)(ce)?ce.type.type:ce.type;return!(typeof M=="function"&&!((he=M.prototype)!==null&&he!==void 0&&he.render)||typeof ce=="function"&&!((J=ce.prototype)!==null&&J!==void 0&&J.render))}function xe(ce){return!(0,w.isValidElement)(ce)||(0,Y.isFragment)(ce)?!1:ee(ce)}},94787:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=F;function F($,X){for(var w=$,Y=0;Y<X.length;Y+=1){if(w==null)return;w=w[X[Y]]}return w}},20059:function(xt,N,F){"use strict";var $=F(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=oe,N.merge=he;var X=$(F(18698)),w=$(F(42122)),Y=$(F(861)),G=$(F(51589)),K=$(F(94787));function Q(J,M,E,fe){if(!M.length)return E;var me=(0,G.default)(M),ke=me[0],Pe=me.slice(1),Le;return!J&&typeof ke=="number"?Le=[]:Array.isArray(J)?Le=(0,Y.default)(J):Le=(0,w.default)({},J),fe&&E===void 0&&Pe.length===1?delete Le[ke][Pe[0]]:Le[ke]=Q(Le[ke],Pe,E,fe),Le}function oe(J,M,E){var fe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return M.length&&fe&&E===void 0&&!(0,K.default)(J,M.slice(0,-1))?J:Q(J,M,E,fe)}function ee(J){return(0,X.default)(J)==="object"&&J!==null&&Object.getPrototypeOf(J)===Object.prototype}function xe(J){return Array.isArray(J)?[]:{}}var ce=typeof Reflect=="undefined"?Object.keys:Reflect.ownKeys;function he(){for(var J=arguments.length,M=new Array(J),E=0;E<J;E++)M[E]=arguments[E];var fe=xe(M[0]);return M.forEach(function(me){function ke(Pe,Le){var tt=new Set(Le),ft=(0,K.default)(me,Pe),ge=Array.isArray(ft);if(ge||ee(ft)){if(!tt.has(ft)){tt.add(ft);var be=(0,K.default)(fe,Pe);ge?fe=oe(fe,Pe,[]):(!be||(0,X.default)(be)!=="object")&&(fe=oe(fe,Pe,xe(ft))),ce(ft).forEach(function(Ce){ke([].concat((0,Y.default)(Pe),[Ce]),tt)})}}else fe=oe(fe,Pe,ft)}ke([])}),fe}},24561:function(xt,N,F){"use strict";var $=F(67294);var X=function(){return X=Object.assign||function(J){for(var M,E=1,fe=arguments.length;E<fe;E++){M=arguments[E];for(var me in M)Object.prototype.hasOwnProperty.call(M,me)&&(J[me]=M[me])}return J},X.apply(this,arguments)};function w(he,J){var M={};for(var E in he)Object.prototype.hasOwnProperty.call(he,E)&&J.indexOf(E)<0&&(M[E]=he[E]);if(he!=null&&typeof Object.getOwnPropertySymbols=="function")for(var fe=0,E=Object.getOwnPropertySymbols(he);fe<E.length;fe++)J.indexOf(E[fe])<0&&Object.prototype.propertyIsEnumerable.call(he,E[fe])&&(M[E[fe]]=he[E[fe]]);return M}var Y=function(){return Math.random().toString(36).substring(6)},G=function(he){var J=he.animate,M=he.backgroundColor,E=he.backgroundOpacity,fe=he.baseUrl,me=he.children,ke=he.foregroundColor,Pe=he.foregroundOpacity,Le=he.gradientRatio,tt=he.uniqueKey,ft=he.interval,ge=he.rtl,be=he.speed,Ce=he.style,Ye=he.title,je=w(he,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","speed","style","title"]),Et=tt||Y(),Ae=Et+"-diff",Qe=Et+"-animated-diff",te=Et+"-aria",Ze=ge?{transform:"scaleX(-1)"}:null,ie="0; "+ft+"; 1",Oe=be+"s";return(0,$.createElement)("svg",X({"aria-labelledby":te,role:"img",style:X(X({},Ce),Ze)},je),Ye?(0,$.createElement)("title",{id:te},Ye):null,(0,$.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+fe+"#"+Ae+")",style:{fill:"url("+fe+"#"+Qe+")"}}),(0,$.createElement)("defs",{role:"presentation"},(0,$.createElement)("clipPath",{id:Ae},me),(0,$.createElement)("linearGradient",{id:Qe},(0,$.createElement)("stop",{offset:"0%",stopColor:M,stopOpacity:E},J&&(0,$.createElement)("animate",{attributeName:"offset",values:-Le+"; "+-Le+"; 1",keyTimes:ie,dur:Oe,repeatCount:"indefinite"})),(0,$.createElement)("stop",{offset:"50%",stopColor:ke,stopOpacity:Pe},J&&(0,$.createElement)("animate",{attributeName:"offset",values:-Le/2+"; "+-Le/2+"; "+(1+Le/2),keyTimes:ie,dur:Oe,repeatCount:"indefinite"})),(0,$.createElement)("stop",{offset:"100%",stopColor:M,stopOpacity:E},J&&(0,$.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+Le),keyTimes:ie,dur:Oe,repeatCount:"indefinite"})))))};G.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading..."};var K=function(he){return he.children?(0,$.createElement)(G,X({},he)):(0,$.createElement)(Q,X({},he))},Q=function(he){return(0,$.createElement)(K,X({viewBox:"0 0 476 124"},he),(0,$.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),(0,$.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),(0,$.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),(0,$.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),(0,$.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),(0,$.createElement)("circle",{cx:"20",cy:"20",r:"20"}))},oe=function(he){return createElement(K,X({viewBox:"0 0 400 460"},he),createElement("circle",{cx:"31",cy:"31",r:"15"}),createElement("rect",{x:"58",y:"18",rx:"2",ry:"2",width:"140",height:"10"}),createElement("rect",{x:"58",y:"34",rx:"2",ry:"2",width:"140",height:"10"}),createElement("rect",{x:"0",y:"60",rx:"2",ry:"2",width:"400",height:"400"}))},ee=function(he){return createElement(K,X({viewBox:"0 0 340 84"},he),createElement("rect",{x:"0",y:"0",width:"67",height:"11",rx:"3"}),createElement("rect",{x:"76",y:"0",width:"140",height:"11",rx:"3"}),createElement("rect",{x:"127",y:"48",width:"53",height:"11",rx:"3"}),createElement("rect",{x:"187",y:"48",width:"72",height:"11",rx:"3"}),createElement("rect",{x:"18",y:"48",width:"100",height:"11",rx:"3"}),createElement("rect",{x:"0",y:"71",width:"37",height:"11",rx:"3"}),createElement("rect",{x:"18",y:"23",width:"140",height:"11",rx:"3"}),createElement("rect",{x:"166",y:"23",width:"173",height:"11",rx:"3"}))},xe=function(he){return createElement(K,X({viewBox:"0 0 400 110"},he),createElement("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"250",height:"10"}),createElement("rect",{x:"20",y:"20",rx:"3",ry:"3",width:"220",height:"10"}),createElement("rect",{x:"20",y:"40",rx:"3",ry:"3",width:"170",height:"10"}),createElement("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"250",height:"10"}),createElement("rect",{x:"20",y:"80",rx:"3",ry:"3",width:"200",height:"10"}),createElement("rect",{x:"20",y:"100",rx:"3",ry:"3",width:"80",height:"10"}))},ce=function(he){return createElement(K,X({viewBox:"0 0 245 125"},he),createElement("circle",{cx:"10",cy:"20",r:"8"}),createElement("rect",{x:"25",y:"15",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"50",r:"8"}),createElement("rect",{x:"25",y:"45",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"80",r:"8"}),createElement("rect",{x:"25",y:"75",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"110",r:"8"}),createElement("rect",{x:"25",y:"105",rx:"5",ry:"5",width:"220",height:"10"}))};N.ZP=K},28660:function(xt,N,F){var $=F(34155);var X;(function(w){(function(Y){var G=typeof F.g=="object"?F.g:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),K=Q(w);typeof G.Reflect=="undefined"?G.Reflect=w:K=Q(G.Reflect,K),Y(K);function Q(oe,ee){return function(xe,ce){typeof oe[xe]!="function"&&Object.defineProperty(oe,xe,{configurable:!0,writable:!0,value:ce}),ee&&ee(xe,ce)}}})(function(Y){var G=Object.prototype.hasOwnProperty,K=typeof Symbol=="function",Q=K&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",oe=K&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",ee=typeof Object.create=="function",xe={__proto__:[]}instanceof Array,ce=!ee&&!xe,he={create:ee?function(){return It(Object.create(null))}:xe?function(){return It({__proto__:null})}:function(){return It({})},has:ce?function(ot,zt){return G.call(ot,zt)}:function(ot,zt){return zt in ot},get:ce?function(ot,zt){return G.call(ot,zt)?ot[zt]:void 0}:function(ot,zt){return ot[zt]}},J=Object.getPrototypeOf(Function),M=typeof $=="object"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.REFLECT_METADATA_USE_MAP_POLYFILL==="true",E=!M&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:bt(),fe=!M&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Be(),me=!M&&typeof WeakMap=="function"?WeakMap:pt(),ke=new me;function Pe(ot,zt,Jt,tr){if(Me(Jt)){if(!st(ot))throw new TypeError;if(!Ie(zt))throw new TypeError;return Ae(ot,zt)}else{if(!st(ot))throw new TypeError;if(!Ct(zt))throw new TypeError;if(!Ct(tr)&&!Me(tr)&&!ze(tr))throw new TypeError;return ze(tr)&&(tr=void 0),Jt=et(Jt),Qe(ot,zt,Jt,tr)}}Y("decorate",Pe);function Le(ot,zt){function Jt(tr,pr){if(!Ct(tr))throw new TypeError;if(!Me(pr)&&!ct(pr))throw new TypeError;ye(ot,zt,tr,pr)}return Jt}Y("metadata",Le);function tt(ot,zt,Jt,tr){if(!Ct(Jt))throw new TypeError;return Me(tr)||(tr=et(tr)),ye(ot,zt,Jt,tr)}Y("defineMetadata",tt);function ft(ot,zt,Jt){if(!Ct(zt))throw new TypeError;return Me(Jt)||(Jt=et(Jt)),Ze(ot,zt,Jt)}Y("hasMetadata",ft);function ge(ot,zt,Jt){if(!Ct(zt))throw new TypeError;return Me(Jt)||(Jt=et(Jt)),ie(ot,zt,Jt)}Y("hasOwnMetadata",ge);function be(ot,zt,Jt){if(!Ct(zt))throw new TypeError;return Me(Jt)||(Jt=et(Jt)),Oe(ot,zt,Jt)}Y("getMetadata",be);function Ce(ot,zt,Jt){if(!Ct(zt))throw new TypeError;return Me(Jt)||(Jt=et(Jt)),nt(ot,zt,Jt)}Y("getOwnMetadata",Ce);function Ye(ot,zt){if(!Ct(ot))throw new TypeError;return Me(zt)||(zt=et(zt)),Te(ot,zt)}Y("getMetadataKeys",Ye);function je(ot,zt){if(!Ct(ot))throw new TypeError;return Me(zt)||(zt=et(zt)),Je(ot,zt)}Y("getOwnMetadataKeys",je);function Et(ot,zt,Jt){if(!Ct(zt))throw new TypeError;Me(Jt)||(Jt=et(Jt));var tr=te(zt,Jt,!1);if(Me(tr)||!tr.delete(ot))return!1;if(tr.size>0)return!0;var pr=ke.get(zt);return pr.delete(Jt),pr.size>0||ke.delete(zt),!0}Y("deleteMetadata",Et);function Ae(ot,zt){for(var Jt=ot.length-1;Jt>=0;--Jt){var tr=ot[Jt],pr=tr(zt);if(!Me(pr)&&!ze(pr)){if(!Ie(pr))throw new TypeError;zt=pr}}return zt}function Qe(ot,zt,Jt,tr){for(var pr=ot.length-1;pr>=0;--pr){var br=ot[pr],Zr=br(zt,Jt,tr);if(!Me(Zr)&&!ze(Zr)){if(!Ct(Zr))throw new TypeError;tr=Zr}}return tr}function te(ot,zt,Jt){var tr=ke.get(ot);if(Me(tr)){if(!Jt)return;tr=new E,ke.set(ot,tr)}var pr=tr.get(zt);if(Me(pr)){if(!Jt)return;pr=new E,tr.set(zt,pr)}return pr}function Ze(ot,zt,Jt){var tr=ie(ot,zt,Jt);if(tr)return!0;var pr=Ke(zt);return ze(pr)?!1:Ze(ot,pr,Jt)}function ie(ot,zt,Jt){var tr=te(zt,Jt,!1);return Me(tr)?!1:Ue(tr.has(ot))}function Oe(ot,zt,Jt){var tr=ie(ot,zt,Jt);if(tr)return nt(ot,zt,Jt);var pr=Ke(zt);if(!ze(pr))return Oe(ot,pr,Jt)}function nt(ot,zt,Jt){var tr=te(zt,Jt,!1);if(!Me(tr))return tr.get(ot)}function ye(ot,zt,Jt,tr){var pr=te(Jt,tr,!0);pr.set(ot,zt)}function Te(ot,zt){var Jt=Je(ot,zt),tr=Ke(ot);if(tr===null)return Jt;var pr=Te(tr,zt);if(pr.length<=0)return Jt;if(Jt.length<=0)return pr;for(var br=new fe,Zr=[],Nr=0,tn=Jt;Nr<tn.length;Nr++){var Dn=tn[Nr],gn=br.has(Dn);gn||(br.add(Dn),Zr.push(Dn))}for(var Vn=0,Un=pr;Vn<Un.length;Vn++){var Dn=Un[Vn],gn=br.has(Dn);gn||(br.add(Dn),Zr.push(Dn))}return Zr}function Je(ot,zt){var Jt=[],tr=te(ot,zt,!1);if(Me(tr))return Jt;for(var pr=tr.keys(),br=Qt(pr),Zr=0;;){var Nr=se(br);if(!Nr)return Jt.length=Zr,Jt;var tn=wt(Nr);try{Jt[Zr]=tn}catch(Dn){try{Ge(br)}finally{throw Dn}}Zr++}}function pe(ot){if(ot===null)return 1;switch(typeof ot){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return ot===null?1:6;default:return 6}}function Me(ot){return ot===void 0}function ze(ot){return ot===null}function De(ot){return typeof ot=="symbol"}function Ct(ot){return typeof ot=="object"?ot!==null:typeof ot=="function"}function Vt(ot,zt){switch(pe(ot)){case 0:return ot;case 1:return ot;case 2:return ot;case 3:return ot;case 4:return ot;case 5:return ot}var Jt=zt===3?"string":zt===5?"number":"default",tr=Tt(ot,Q);if(tr!==void 0){var pr=tr.call(ot,Jt);if(Ct(pr))throw new TypeError;return pr}return Ve(ot,Jt==="default"?"number":Jt)}function Ve(ot,zt){if(zt==="string"){var Jt=ot.toString;if(Re(Jt)){var tr=Jt.call(ot);if(!Ct(tr))return tr}var pr=ot.valueOf;if(Re(pr)){var tr=pr.call(ot);if(!Ct(tr))return tr}}else{var pr=ot.valueOf;if(Re(pr)){var tr=pr.call(ot);if(!Ct(tr))return tr}var br=ot.toString;if(Re(br)){var tr=br.call(ot);if(!Ct(tr))return tr}}throw new TypeError}function Ue(ot){return!!ot}function Ee(ot){return""+ot}function et(ot){var zt=Vt(ot,3);return De(zt)?zt:Ee(zt)}function st(ot){return Array.isArray?Array.isArray(ot):ot instanceof Object?ot instanceof Array:Object.prototype.toString.call(ot)==="[object Array]"}function Re(ot){return typeof ot=="function"}function Ie(ot){return typeof ot=="function"}function ct(ot){switch(pe(ot)){case 3:return!0;case 4:return!0;default:return!1}}function Tt(ot,zt){var Jt=ot[zt];if(Jt!=null){if(!Re(Jt))throw new TypeError;return Jt}}function Qt(ot){var zt=Tt(ot,oe);if(!Re(zt))throw new TypeError;var Jt=zt.call(ot);if(!Ct(Jt))throw new TypeError;return Jt}function wt(ot){return ot.value}function se(ot){var zt=ot.next();return zt.done?!1:zt}function Ge(ot){var zt=ot.return;zt&&zt.call(ot)}function Ke(ot){var zt=Object.getPrototypeOf(ot);if(typeof ot!="function"||ot===J||zt!==J)return zt;var Jt=ot.prototype,tr=Jt&&Object.getPrototypeOf(Jt);if(tr==null||tr===Object.prototype)return zt;var pr=tr.constructor;return typeof pr!="function"||pr===ot?zt:pr}function bt(){var ot={},zt=[],Jt=function(){function Zr(Nr,tn,Dn){this._index=0,this._keys=Nr,this._values=tn,this._selector=Dn}return Zr.prototype["@@iterator"]=function(){return this},Zr.prototype[oe]=function(){return this},Zr.prototype.next=function(){var Nr=this._index;if(Nr>=0&&Nr<this._keys.length){var tn=this._selector(this._keys[Nr],this._values[Nr]);return Nr+1>=this._keys.length?(this._index=-1,this._keys=zt,this._values=zt):this._index++,{value:tn,done:!1}}return{value:void 0,done:!0}},Zr.prototype.throw=function(Nr){throw this._index>=0&&(this._index=-1,this._keys=zt,this._values=zt),Nr},Zr.prototype.return=function(Nr){return this._index>=0&&(this._index=-1,this._keys=zt,this._values=zt),{value:Nr,done:!0}},Zr}();return function(){function Zr(){this._keys=[],this._values=[],this._cacheKey=ot,this._cacheIndex=-2}return Object.defineProperty(Zr.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Zr.prototype.has=function(Nr){return this._find(Nr,!1)>=0},Zr.prototype.get=function(Nr){var tn=this._find(Nr,!1);return tn>=0?this._values[tn]:void 0},Zr.prototype.set=function(Nr,tn){var Dn=this._find(Nr,!0);return this._values[Dn]=tn,this},Zr.prototype.delete=function(Nr){var tn=this._find(Nr,!1);if(tn>=0){for(var Dn=this._keys.length,gn=tn+1;gn<Dn;gn++)this._keys[gn-1]=this._keys[gn],this._values[gn-1]=this._values[gn];return this._keys.length--,this._values.length--,Nr===this._cacheKey&&(this._cacheKey=ot,this._cacheIndex=-2),!0}return!1},Zr.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=ot,this._cacheIndex=-2},Zr.prototype.keys=function(){return new Jt(this._keys,this._values,tr)},Zr.prototype.values=function(){return new Jt(this._keys,this._values,pr)},Zr.prototype.entries=function(){return new Jt(this._keys,this._values,br)},Zr.prototype["@@iterator"]=function(){return this.entries()},Zr.prototype[oe]=function(){return this.entries()},Zr.prototype._find=function(Nr,tn){return this._cacheKey!==Nr&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Nr)),this._cacheIndex<0&&tn&&(this._cacheIndex=this._keys.length,this._keys.push(Nr),this._values.push(void 0)),this._cacheIndex},Zr}();function tr(Zr,Nr){return Zr}function pr(Zr,Nr){return Nr}function br(Zr,Nr){return[Zr,Nr]}}function Be(){return function(){function ot(){this._map=new E}return Object.defineProperty(ot.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),ot.prototype.has=function(zt){return this._map.has(zt)},ot.prototype.add=function(zt){return this._map.set(zt,zt),this},ot.prototype.delete=function(zt){return this._map.delete(zt)},ot.prototype.clear=function(){this._map.clear()},ot.prototype.keys=function(){return this._map.keys()},ot.prototype.values=function(){return this._map.values()},ot.prototype.entries=function(){return this._map.entries()},ot.prototype["@@iterator"]=function(){return this.keys()},ot.prototype[oe]=function(){return this.keys()},ot}()}function pt(){var ot=16,zt=he.create(),Jt=tr();return function(){function tn(){this._key=tr()}return tn.prototype.has=function(Dn){var gn=pr(Dn,!1);return gn!==void 0?he.has(gn,this._key):!1},tn.prototype.get=function(Dn){var gn=pr(Dn,!1);return gn!==void 0?he.get(gn,this._key):void 0},tn.prototype.set=function(Dn,gn){var Vn=pr(Dn,!0);return Vn[this._key]=gn,this},tn.prototype.delete=function(Dn){var gn=pr(Dn,!1);return gn!==void 0?delete gn[this._key]:!1},tn.prototype.clear=function(){this._key=tr()},tn}();function tr(){var tn;do tn="@@WeakMap@@"+Nr();while(he.has(zt,tn));return zt[tn]=!0,tn}function pr(tn,Dn){if(!G.call(tn,Jt)){if(!Dn)return;Object.defineProperty(tn,Jt,{value:he.create()})}return tn[Jt]}function br(tn,Dn){for(var gn=0;gn<Dn;++gn)tn[gn]=Math.random()*255|0;return tn}function Zr(tn){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(tn)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(tn)):br(new Uint8Array(tn),tn):br(new Array(tn),tn)}function Nr(){var tn=Zr(ot);tn[6]=tn[6]&79|64,tn[8]=tn[8]&191|128;for(var Dn="",gn=0;gn<ot;++gn){var Vn=tn[gn];(gn===4||gn===6||gn===8)&&(Dn+="-"),Vn<16&&(Dn+="0"),Dn+=Vn.toString(16).toLowerCase()}return Dn}}function It(ot){return ot.__=void 0,delete ot.__,ot}})})(X||(X={}))},55168:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.SizeSensorId=N.SensorTabIndex=N.SensorClassName=void 0;var F="size-sensor-id";N.SizeSensorId=F;var $="size-sensor-object";N.SensorClassName=$;var X="-1";N.SensorTabIndex=X},12177:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var F=function(X){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,Y=null;return function(){for(var G=this,K=arguments.length,Q=new Array(K),oe=0;oe<K;oe++)Q[oe]=arguments[oe];clearTimeout(Y),Y=setTimeout(function(){X.apply(G,Q)},w)}};N.default=F},15378:function(xt,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var F=1,$=function(){return"".concat(F++)};N.default=$},18587:function(xt,N,F){"use strict";var $;$={value:!0},$=$=N.ak=void 0;var X=F(12955),w=function(Q,oe){var ee=(0,X.getSensor)(Q);return ee.bind(oe),function(){ee.unbind(oe)}};N.ak=w;var Y=function(Q){var oe=(0,X.getSensor)(Q);(0,X.removeSensor)(oe)};$=Y;var G="1.0.2";$=G},12955:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.removeSensor=N.getSensor=N.Sensors=void 0;var $=Y(F(15378)),X=F(82578),w=F(55168);function Y(ee){return ee&&ee.__esModule?ee:{default:ee}}var G={};N.Sensors=G;function K(ee){ee&&G[ee]&&delete G[ee]}var Q=function(xe){var ce=xe.getAttribute(w.SizeSensorId);if(ce&&G[ce])return G[ce];var he=(0,$.default)();xe.setAttribute(w.SizeSensorId,he);var J=(0,X.createSensor)(xe,function(){return K(he)});return G[he]=J,J};N.getSensor=Q;var oe=function(xe){var ce=xe.element.getAttribute(w.SizeSensorId);xe.destroy(),K(ce)};N.removeSensor=oe},82578:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.createSensor=void 0;var $=F(27643),X=F(31743),w=typeof ResizeObserver!="undefined"?X.createSensor:$.createSensor;N.createSensor=w},27643:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.createSensor=void 0;var $=w(F(12177)),X=F(55168);function w(G){return G&&G.__esModule?G:{default:G}}var Y=function(K,Q){var oe=void 0,ee=[],xe=function(){getComputedStyle(K).position==="static"&&(K.style.position="relative");var fe=document.createElement("object");return fe.onload=function(){fe.contentDocument.defaultView.addEventListener("resize",ce),ce()},fe.style.display="block",fe.style.position="absolute",fe.style.top="0",fe.style.left="0",fe.style.height="100%",fe.style.width="100%",fe.style.overflow="hidden",fe.style.pointerEvents="none",fe.style.zIndex="-1",fe.style.opacity="0",fe.setAttribute("class",X.SensorClassName),fe.setAttribute("tabindex",X.SensorTabIndex),fe.type="text/html",K.appendChild(fe),fe.data="about:blank",fe},ce=(0,$.default)(function(){ee.forEach(function(E){E(K)})}),he=function(fe){oe||(oe=xe()),ee.indexOf(fe)===-1&&ee.push(fe)},J=function(){oe&&oe.parentNode&&(oe.contentDocument&&oe.contentDocument.defaultView.removeEventListener("resize",ce),oe.parentNode.removeChild(oe),K.removeAttribute(X.SizeSensorId),oe=void 0,ee=[],Q&&Q())},M=function(fe){var me=ee.indexOf(fe);me!==-1&&ee.splice(me,1),ee.length===0&&oe&&J()};return{element:K,bind:he,destroy:J,unbind:M}};N.createSensor=Y},31743:function(xt,N,F){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.createSensor=void 0;var $=F(55168),X=w(F(12177));function w(G){return G&&G.__esModule?G:{default:G}}var Y=function(K,Q){var oe=void 0,ee=[],xe=(0,X.default)(function(){ee.forEach(function(E){E(K)})}),ce=function(){var fe=new ResizeObserver(xe);return fe.observe(K),xe(),fe},he=function(fe){oe||(oe=ce()),ee.indexOf(fe)===-1&&ee.push(fe)},J=function(){oe.disconnect(),ee=[],oe=void 0,K.removeAttribute($.SizeSensorId),Q&&Q()},M=function(fe){var me=ee.indexOf(fe);me!==-1&&ee.splice(me,1),ee.length===0&&oe&&J()};return{element:K,bind:he,destroy:J,unbind:M}};N.createSensor=Y},69848:function(xt){(function(N,F){xt.exports=F()})(this,function(){"use strict";function N(ge,be,Ce,Ye,je,Et){if(!(je-Ye<=Ce)){var Ae=Ye+je>>1;F(ge,be,Ae,Ye,je,Et%2),N(ge,be,Ce,Ye,Ae-1,Et+1),N(ge,be,Ce,Ae+1,je,Et+1)}}function F(ge,be,Ce,Ye,je,Et){for(;je>Ye;){if(je-Ye>600){var Ae=je-Ye+1,Qe=Ce-Ye+1,te=Math.log(Ae),Ze=.5*Math.exp(2*te/3),ie=.5*Math.sqrt(te*Ze*(Ae-Ze)/Ae)*(Qe-Ae/2<0?-1:1),Oe=Math.max(Ye,Math.floor(Ce-Qe*Ze/Ae+ie)),nt=Math.min(je,Math.floor(Ce+(Ae-Qe)*Ze/Ae+ie));F(ge,be,Ce,Oe,nt,Et)}var ye=be[2*Ce+Et],Te=Ye,Je=je;for($(ge,be,Ye,Ce),be[2*je+Et]>ye&&$(ge,be,Ye,je);Te<Je;){for($(ge,be,Te,Je),Te++,Je--;be[2*Te+Et]<ye;)Te++;for(;be[2*Je+Et]>ye;)Je--}be[2*Ye+Et]===ye?$(ge,be,Ye,Je):(Je++,$(ge,be,Je,je)),Je<=Ce&&(Ye=Je+1),Ce<=Je&&(je=Je-1)}}function $(ge,be,Ce,Ye){X(ge,Ce,Ye),X(be,2*Ce,2*Ye),X(be,2*Ce+1,2*Ye+1)}function X(ge,be,Ce){var Ye=ge[be];ge[be]=ge[Ce],ge[Ce]=Ye}function w(ge,be,Ce,Ye,je,Et,Ae){for(var Qe=[0,ge.length-1,0],te=[],Ze,ie;Qe.length;){var Oe=Qe.pop(),nt=Qe.pop(),ye=Qe.pop();if(nt-ye<=Ae){for(var Te=ye;Te<=nt;Te++)Ze=be[2*Te],ie=be[2*Te+1],Ze>=Ce&&Ze<=je&&ie>=Ye&&ie<=Et&&te.push(ge[Te]);continue}var Je=Math.floor((ye+nt)/2);Ze=be[2*Je],ie=be[2*Je+1],Ze>=Ce&&Ze<=je&&ie>=Ye&&ie<=Et&&te.push(ge[Je]);var pe=(Oe+1)%2;(Oe===0?Ce<=Ze:Ye<=ie)&&(Qe.push(ye),Qe.push(Je-1),Qe.push(pe)),(Oe===0?je>=Ze:Et>=ie)&&(Qe.push(Je+1),Qe.push(nt),Qe.push(pe))}return te}function Y(ge,be,Ce,Ye,je,Et){for(var Ae=[0,ge.length-1,0],Qe=[],te=je*je;Ae.length;){var Ze=Ae.pop(),ie=Ae.pop(),Oe=Ae.pop();if(ie-Oe<=Et){for(var nt=Oe;nt<=ie;nt++)G(be[2*nt],be[2*nt+1],Ce,Ye)<=te&&Qe.push(ge[nt]);continue}var ye=Math.floor((Oe+ie)/2),Te=be[2*ye],Je=be[2*ye+1];G(Te,Je,Ce,Ye)<=te&&Qe.push(ge[ye]);var pe=(Ze+1)%2;(Ze===0?Ce-je<=Te:Ye-je<=Je)&&(Ae.push(Oe),Ae.push(ye-1),Ae.push(pe)),(Ze===0?Ce+je>=Te:Ye+je>=Je)&&(Ae.push(ye+1),Ae.push(ie),Ae.push(pe))}return Qe}function G(ge,be,Ce,Ye){var je=ge-Ce,Et=be-Ye;return je*je+Et*Et}var K=function(ge){return ge[0]},Q=function(ge){return ge[1]},oe=function(be,Ce,Ye,je,Et){Ce===void 0&&(Ce=K),Ye===void 0&&(Ye=Q),je===void 0&&(je=64),Et===void 0&&(Et=Float64Array),this.nodeSize=je,this.points=be;for(var Ae=be.length<65536?Uint16Array:Uint32Array,Qe=this.ids=new Ae(be.length),te=this.coords=new Et(be.length*2),Ze=0;Ze<be.length;Ze++)Qe[Ze]=Ze,te[2*Ze]=Ce(be[Ze]),te[2*Ze+1]=Ye(be[Ze]);N(Qe,te,je,0,Qe.length-1,0)};oe.prototype.range=function(be,Ce,Ye,je){return w(this.ids,this.coords,be,Ce,Ye,je,this.nodeSize)},oe.prototype.within=function(be,Ce,Ye){return Y(this.ids,this.coords,be,Ce,Ye,this.nodeSize)};var ee={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(ge){return ge}},xe=Math.fround||function(ge){return function(be){return ge[0]=+be,ge[0]}}(new Float32Array(1)),ce=function(be){this.options=Le(Object.create(ee),be),this.trees=new Array(this.options.maxZoom+1)};ce.prototype.load=function(be){var Ce=this.options,Ye=Ce.log,je=Ce.minZoom,Et=Ce.maxZoom,Ae=Ce.nodeSize;Ye&&console.time("total time");var Qe="prepare "+be.length+" points";Ye&&console.time(Qe),this.points=be;for(var te=[],Ze=0;Ze<be.length;Ze++)be[Ze].geometry&&te.push(J(be[Ze],Ze));this.trees[Et+1]=new oe(te,tt,ft,Ae,Float32Array),Ye&&console.timeEnd(Qe);for(var ie=Et;ie>=je;ie--){var Oe=+Date.now();te=this._cluster(te,ie),this.trees[ie]=new oe(te,tt,ft,Ae,Float32Array),Ye&&console.log("z%d: %d clusters in %dms",ie,te.length,+Date.now()-Oe)}return Ye&&console.timeEnd("total time"),this},ce.prototype.getClusters=function(be,Ce){var Ye=((be[0]+180)%360+360)%360-180,je=Math.max(-90,Math.min(90,be[1])),Et=be[2]===180?180:((be[2]+180)%360+360)%360-180,Ae=Math.max(-90,Math.min(90,be[3]));if(be[2]-be[0]>=360)Ye=-180,Et=180;else if(Ye>Et){var Qe=this.getClusters([Ye,je,180,Ae],Ce),te=this.getClusters([-180,je,Et,Ae],Ce);return Qe.concat(te)}for(var Ze=this.trees[this._limitZoom(Ce)],ie=Ze.range(fe(Ye),me(Ae),fe(Et),me(je)),Oe=[],nt=0,ye=ie;nt<ye.length;nt+=1){var Te=ye[nt],Je=Ze.points[Te];Oe.push(Je.numPoints?M(Je):this.points[Je.index])}return Oe},ce.prototype.getChildren=function(be){var Ce=this._getOriginId(be),Ye=this._getOriginZoom(be),je="No cluster with the specified id.",Et=this.trees[Ye];if(!Et)throw new Error(je);var Ae=Et.points[Ce];if(!Ae)throw new Error(je);for(var Qe=this.options.radius/(this.options.extent*Math.pow(2,Ye-1)),te=Et.within(Ae.x,Ae.y,Qe),Ze=[],ie=0,Oe=te;ie<Oe.length;ie+=1){var nt=Oe[ie],ye=Et.points[nt];ye.parentId===be&&Ze.push(ye.numPoints?M(ye):this.points[ye.index])}if(Ze.length===0)throw new Error(je);return Ze},ce.prototype.getLeaves=function(be,Ce,Ye){Ce=Ce||10,Ye=Ye||0;var je=[];return this._appendLeaves(je,be,Ce,Ye,0),je},ce.prototype.getTile=function(be,Ce,Ye){var je=this.trees[this._limitZoom(be)],Et=Math.pow(2,be),Ae=this.options,Qe=Ae.extent,te=Ae.radius,Ze=te/Qe,ie=(Ye-Ze)/Et,Oe=(Ye+1+Ze)/Et,nt={features:[]};return this._addTileFeatures(je.range((Ce-Ze)/Et,ie,(Ce+1+Ze)/Et,Oe),je.points,Ce,Ye,Et,nt),Ce===0&&this._addTileFeatures(je.range(1-Ze/Et,ie,1,Oe),je.points,Et,Ye,Et,nt),Ce===Et-1&&this._addTileFeatures(je.range(0,ie,Ze/Et,Oe),je.points,-1,Ye,Et,nt),nt.features.length?nt:null},ce.prototype.getClusterExpansionZoom=function(be){for(var Ce=this._getOriginZoom(be)-1;Ce<=this.options.maxZoom;){var Ye=this.getChildren(be);if(Ce++,Ye.length!==1)break;be=Ye[0].properties.cluster_id}return Ce},ce.prototype._appendLeaves=function(be,Ce,Ye,je,Et){for(var Ae=this.getChildren(Ce),Qe=0,te=Ae;Qe<te.length;Qe+=1){var Ze=te[Qe],ie=Ze.properties;if(ie&&ie.cluster?Et+ie.point_count<=je?Et+=ie.point_count:Et=this._appendLeaves(be,ie.cluster_id,Ye,je,Et):Et<je?Et++:be.push(Ze),be.length===Ye)break}return Et},ce.prototype._addTileFeatures=function(be,Ce,Ye,je,Et,Ae){for(var Qe=0,te=be;Qe<te.length;Qe+=1){var Ze=te[Qe],ie=Ce[Ze],Oe=ie.numPoints,nt=void 0,ye=void 0,Te=void 0;if(Oe)nt=E(ie),ye=ie.x,Te=ie.y;else{var Je=this.points[ie.index];nt=Je.properties,ye=fe(Je.geometry.coordinates[0]),Te=me(Je.geometry.coordinates[1])}var pe={type:1,geometry:[[Math.round(this.options.extent*(ye*Et-Ye)),Math.round(this.options.extent*(Te*Et-je))]],tags:nt},Me=void 0;Oe?Me=ie.id:this.options.generateId?Me=ie.index:this.points[ie.index].id&&(Me=this.points[ie.index].id),Me!==void 0&&(pe.id=Me),Ae.features.push(pe)}},ce.prototype._limitZoom=function(be){return Math.max(this.options.minZoom,Math.min(Math.floor(+be),this.options.maxZoom+1))},ce.prototype._cluster=function(be,Ce){for(var Ye=[],je=this.options,Et=je.radius,Ae=je.extent,Qe=je.reduce,te=je.minPoints,Ze=Et/(Ae*Math.pow(2,Ce)),ie=0;ie<be.length;ie++){var Oe=be[ie];if(!(Oe.zoom<=Ce)){Oe.zoom=Ce;for(var nt=this.trees[Ce+1],ye=nt.within(Oe.x,Oe.y,Ze),Te=Oe.numPoints||1,Je=Te,pe=0,Me=ye;pe<Me.length;pe+=1){var ze=Me[pe],De=nt.points[ze];De.zoom>Ce&&(Je+=De.numPoints||1)}if(Je>Te&&Je>=te){for(var Ct=Oe.x*Te,Vt=Oe.y*Te,Ve=Qe&&Te>1?this._map(Oe,!0):null,Ue=(ie<<5)+(Ce+1)+this.points.length,Ee=0,et=ye;Ee<et.length;Ee+=1){var st=et[Ee],Re=nt.points[st];if(!(Re.zoom<=Ce)){Re.zoom=Ce;var Ie=Re.numPoints||1;Ct+=Re.x*Ie,Vt+=Re.y*Ie,Re.parentId=Ue,Qe&&(Ve||(Ve=this._map(Oe,!0)),Qe(Ve,this._map(Re)))}}Oe.parentId=Ue,Ye.push(he(Ct/Je,Vt/Je,Ue,Je,Ve))}else if(Ye.push(Oe),Je>1)for(var ct=0,Tt=ye;ct<Tt.length;ct+=1){var Qt=Tt[ct],wt=nt.points[Qt];wt.zoom<=Ce||(wt.zoom=Ce,Ye.push(wt))}}}return Ye},ce.prototype._getOriginId=function(be){return be-this.points.length>>5},ce.prototype._getOriginZoom=function(be){return(be-this.points.length)%32},ce.prototype._map=function(be,Ce){if(be.numPoints)return Ce?Le({},be.properties):be.properties;var Ye=this.points[be.index].properties,je=this.options.map(Ye);return Ce&&je===Ye?Le({},je):je};function he(ge,be,Ce,Ye,je){return{x:xe(ge),y:xe(be),zoom:1/0,id:Ce,parentId:-1,numPoints:Ye,properties:je}}function J(ge,be){var Ce=ge.geometry.coordinates,Ye=Ce[0],je=Ce[1];return{x:xe(fe(Ye)),y:xe(me(je)),zoom:1/0,index:be,parentId:-1}}function M(ge){return{type:"Feature",id:ge.id,properties:E(ge),geometry:{type:"Point",coordinates:[ke(ge.x),Pe(ge.y)]}}}function E(ge){var be=ge.numPoints,Ce=be>=1e4?Math.round(be/1e3)+"k":be>=1e3?Math.round(be/100)/10+"k":be;return Le(Le({},ge.properties),{cluster:!0,cluster_id:ge.id,point_count:be,point_count_abbreviated:Ce})}function fe(ge){return ge/360+.5}function me(ge){var be=Math.sin(ge*Math.PI/180),Ce=.5-.25*Math.log((1+be)/(1-be))/Math.PI;return Ce<0?0:Ce>1?1:Ce}function ke(ge){return(ge-.5)*360}function Pe(ge){var be=(180-ge*360)*Math.PI/180;return 360*Math.atan(Math.exp(be))/Math.PI-90}function Le(ge,be){for(var Ce in be)ge[Ce]=be[Ce];return ge}function tt(ge){return ge.x}function ft(ge){return ge.y}return ce})},73897:function(xt){function N(F,$){($==null||$>F.length)&&($=F.length);for(var X=0,w=new Array($);X<$;X++)w[X]=F[X];return w}xt.exports=N,xt.exports.__esModule=!0,xt.exports.default=xt.exports},85372:function(xt){function N(F){if(Array.isArray(F))return F}xt.exports=N,xt.exports.__esModule=!0,xt.exports.default=xt.exports},63405:function(xt,N,F){var $=F(73897);function X(w){if(Array.isArray(w))return $(w)}xt.exports=X,xt.exports.__esModule=!0,xt.exports.default=xt.exports},38416:function(xt,N,F){var $=F(64062);function X(w,Y,G){return Y=$(Y),Y in w?Object.defineProperty(w,Y,{value:G,enumerable:!0,configurable:!0,writable:!0}):w[Y]=G,w}xt.exports=X,xt.exports.__esModule=!0,xt.exports.default=xt.exports},75263:function(xt,N,F){var $=F(18698).default;function X(Y){if(typeof WeakMap!="function")return null;var G=new WeakMap,K=new WeakMap;return(X=function(oe){return oe?K:G})(Y)}function w(Y,G){if(!G&&Y&&Y.__esModule)return Y;if(Y===null||$(Y)!="object"&&typeof Y!="function")return{default:Y};var K=X(G);if(K&&K.has(Y))return K.get(Y);var Q={__proto__:null},oe=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ee in Y)if(ee!=="default"&&Object.prototype.hasOwnProperty.call(Y,ee)){var xe=oe?Object.getOwnPropertyDescriptor(Y,ee):null;xe&&(xe.get||xe.set)?Object.defineProperty(Q,ee,xe):Q[ee]=Y[ee]}return Q.default=Y,K&&K.set(Y,Q),Q}xt.exports=w,xt.exports.__esModule=!0,xt.exports.default=xt.exports},79498:function(xt){function N(F){if(typeof Symbol!="undefined"&&F[Symbol.iterator]!=null||F["@@iterator"]!=null)return Array.from(F)}xt.exports=N,xt.exports.__esModule=!0,xt.exports.default=xt.exports},68872:function(xt){function N(F,$){var X=F==null?null:typeof Symbol!="undefined"&&F[Symbol.iterator]||F["@@iterator"];if(X!=null){var w,Y,G,K,Q=[],oe=!0,ee=!1;try{if(G=(X=X.call(F)).next,$===0){if(Object(X)!==X)return;oe=!1}else for(;!(oe=(w=G.call(X)).done)&&(Q.push(w.value),Q.length!==$);oe=!0);}catch(xe){ee=!0,Y=xe}finally{try{if(!oe&&X.return!=null&&(K=X.return(),Object(K)!==K))return}finally{if(ee)throw Y}}return Q}}xt.exports=N,xt.exports.__esModule=!0,xt.exports.default=xt.exports},12218:function(xt){function N(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}xt.exports=N,xt.exports.__esModule=!0,xt.exports.default=xt.exports},42281:function(xt){function N(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}xt.exports=N,xt.exports.__esModule=!0,xt.exports.default=xt.exports},42122:function(xt,N,F){var $=F(38416);function X(Y,G){var K=Object.keys(Y);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(Y);G&&(Q=Q.filter(function(oe){return Object.getOwnPropertyDescriptor(Y,oe).enumerable})),K.push.apply(K,Q)}return K}function w(Y){for(var G=1;G<arguments.length;G++){var K=arguments[G]!=null?arguments[G]:{};G%2?X(Object(K),!0).forEach(function(Q){$(Y,Q,K[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(K)):X(Object(K)).forEach(function(Q){Object.defineProperty(Y,Q,Object.getOwnPropertyDescriptor(K,Q))})}return Y}xt.exports=w,xt.exports.__esModule=!0,xt.exports.default=xt.exports},17061:function(xt,N,F){var $=F(18698).default;function X(){"use strict";xt.exports=X=function(){return Y},xt.exports.__esModule=!0,xt.exports.default=xt.exports;var w,Y={},G=Object.prototype,K=G.hasOwnProperty,Q=Object.defineProperty||function(nt,ye,Te){nt[ye]=Te.value},oe=typeof Symbol=="function"?Symbol:{},ee=oe.iterator||"@@iterator",xe=oe.asyncIterator||"@@asyncIterator",ce=oe.toStringTag||"@@toStringTag";function he(nt,ye,Te){return Object.defineProperty(nt,ye,{value:Te,enumerable:!0,configurable:!0,writable:!0}),nt[ye]}try{he({},"")}catch(nt){he=function(Te,Je,pe){return Te[Je]=pe}}function J(nt,ye,Te,Je){var pe=ye&&ye.prototype instanceof Le?ye:Le,Me=Object.create(pe.prototype),ze=new ie(Je||[]);return Q(Me,"_invoke",{value:Ae(nt,Te,ze)}),Me}function M(nt,ye,Te){try{return{type:"normal",arg:nt.call(ye,Te)}}catch(Je){return{type:"throw",arg:Je}}}Y.wrap=J;var E="suspendedStart",fe="suspendedYield",me="executing",ke="completed",Pe={};function Le(){}function tt(){}function ft(){}var ge={};he(ge,ee,function(){return this});var be=Object.getPrototypeOf,Ce=be&&be(be(Oe([])));Ce&&Ce!==G&&K.call(Ce,ee)&&(ge=Ce);var Ye=ft.prototype=Le.prototype=Object.create(ge);function je(nt){["next","throw","return"].forEach(function(ye){he(nt,ye,function(Te){return this._invoke(ye,Te)})})}function Et(nt,ye){function Te(pe,Me,ze,De){var Ct=M(nt[pe],nt,Me);if(Ct.type!=="throw"){var Vt=Ct.arg,Ve=Vt.value;return Ve&&$(Ve)=="object"&&K.call(Ve,"__await")?ye.resolve(Ve.__await).then(function(Ue){Te("next",Ue,ze,De)},function(Ue){Te("throw",Ue,ze,De)}):ye.resolve(Ve).then(function(Ue){Vt.value=Ue,ze(Vt)},function(Ue){return Te("throw",Ue,ze,De)})}De(Ct.arg)}var Je;Q(this,"_invoke",{value:function(Me,ze){function De(){return new ye(function(Ct,Vt){Te(Me,ze,Ct,Vt)})}return Je=Je?Je.then(De,De):De()}})}function Ae(nt,ye,Te){var Je=E;return function(pe,Me){if(Je===me)throw new Error("Generator is already running");if(Je===ke){if(pe==="throw")throw Me;return{value:w,done:!0}}for(Te.method=pe,Te.arg=Me;;){var ze=Te.delegate;if(ze){var De=Qe(ze,Te);if(De){if(De===Pe)continue;return De}}if(Te.method==="next")Te.sent=Te._sent=Te.arg;else if(Te.method==="throw"){if(Je===E)throw Je=ke,Te.arg;Te.dispatchException(Te.arg)}else Te.method==="return"&&Te.abrupt("return",Te.arg);Je=me;var Ct=M(nt,ye,Te);if(Ct.type==="normal"){if(Je=Te.done?ke:fe,Ct.arg===Pe)continue;return{value:Ct.arg,done:Te.done}}Ct.type==="throw"&&(Je=ke,Te.method="throw",Te.arg=Ct.arg)}}}function Qe(nt,ye){var Te=ye.method,Je=nt.iterator[Te];if(Je===w)return ye.delegate=null,Te==="throw"&&nt.iterator.return&&(ye.method="return",ye.arg=w,Qe(nt,ye),ye.method==="throw")||Te!=="return"&&(ye.method="throw",ye.arg=new TypeError("The iterator does not provide a '"+Te+"' method")),Pe;var pe=M(Je,nt.iterator,ye.arg);if(pe.type==="throw")return ye.method="throw",ye.arg=pe.arg,ye.delegate=null,Pe;var Me=pe.arg;return Me?Me.done?(ye[nt.resultName]=Me.value,ye.next=nt.nextLoc,ye.method!=="return"&&(ye.method="next",ye.arg=w),ye.delegate=null,Pe):Me:(ye.method="throw",ye.arg=new TypeError("iterator result is not an object"),ye.delegate=null,Pe)}function te(nt){var ye={tryLoc:nt[0]};1 in nt&&(ye.catchLoc=nt[1]),2 in nt&&(ye.finallyLoc=nt[2],ye.afterLoc=nt[3]),this.tryEntries.push(ye)}function Ze(nt){var ye=nt.completion||{};ye.type="normal",delete ye.arg,nt.completion=ye}function ie(nt){this.tryEntries=[{tryLoc:"root"}],nt.forEach(te,this),this.reset(!0)}function Oe(nt){if(nt||nt===""){var ye=nt[ee];if(ye)return ye.call(nt);if(typeof nt.next=="function")return nt;if(!isNaN(nt.length)){var Te=-1,Je=function pe(){for(;++Te<nt.length;)if(K.call(nt,Te))return pe.value=nt[Te],pe.done=!1,pe;return pe.value=w,pe.done=!0,pe};return Je.next=Je}}throw new TypeError($(nt)+" is not iterable")}return tt.prototype=ft,Q(Ye,"constructor",{value:ft,configurable:!0}),Q(ft,"constructor",{value:tt,configurable:!0}),tt.displayName=he(ft,ce,"GeneratorFunction"),Y.isGeneratorFunction=function(nt){var ye=typeof nt=="function"&&nt.constructor;return!!ye&&(ye===tt||(ye.displayName||ye.name)==="GeneratorFunction")},Y.mark=function(nt){return Object.setPrototypeOf?Object.setPrototypeOf(nt,ft):(nt.__proto__=ft,he(nt,ce,"GeneratorFunction")),nt.prototype=Object.create(Ye),nt},Y.awrap=function(nt){return{__await:nt}},je(Et.prototype),he(Et.prototype,xe,function(){return this}),Y.AsyncIterator=Et,Y.async=function(nt,ye,Te,Je,pe){pe===void 0&&(pe=Promise);var Me=new Et(J(nt,ye,Te,Je),pe);return Y.isGeneratorFunction(ye)?Me:Me.next().then(function(ze){return ze.done?ze.value:Me.next()})},je(Ye),he(Ye,ce,"Generator"),he(Ye,ee,function(){return this}),he(Ye,"toString",function(){return"[object Generator]"}),Y.keys=function(nt){var ye=Object(nt),Te=[];for(var Je in ye)Te.push(Je);return Te.reverse(),function pe(){for(;Te.length;){var Me=Te.pop();if(Me in ye)return pe.value=Me,pe.done=!1,pe}return pe.done=!0,pe}},Y.values=Oe,ie.prototype={constructor:ie,reset:function(ye){if(this.prev=0,this.next=0,this.sent=this._sent=w,this.done=!1,this.delegate=null,this.method="next",this.arg=w,this.tryEntries.forEach(Ze),!ye)for(var Te in this)Te.charAt(0)==="t"&&K.call(this,Te)&&!isNaN(+Te.slice(1))&&(this[Te]=w)},stop:function(){this.done=!0;var ye=this.tryEntries[0].completion;if(ye.type==="throw")throw ye.arg;return this.rval},dispatchException:function(ye){if(this.done)throw ye;var Te=this;function Je(Vt,Ve){return ze.type="throw",ze.arg=ye,Te.next=Vt,Ve&&(Te.method="next",Te.arg=w),!!Ve}for(var pe=this.tryEntries.length-1;pe>=0;--pe){var Me=this.tryEntries[pe],ze=Me.completion;if(Me.tryLoc==="root")return Je("end");if(Me.tryLoc<=this.prev){var De=K.call(Me,"catchLoc"),Ct=K.call(Me,"finallyLoc");if(De&&Ct){if(this.prev<Me.catchLoc)return Je(Me.catchLoc,!0);if(this.prev<Me.finallyLoc)return Je(Me.finallyLoc)}else if(De){if(this.prev<Me.catchLoc)return Je(Me.catchLoc,!0)}else{if(!Ct)throw new Error("try statement without catch or finally");if(this.prev<Me.finallyLoc)return Je(Me.finallyLoc)}}}},abrupt:function(ye,Te){for(var Je=this.tryEntries.length-1;Je>=0;--Je){var pe=this.tryEntries[Je];if(pe.tryLoc<=this.prev&&K.call(pe,"finallyLoc")&&this.prev<pe.finallyLoc){var Me=pe;break}}Me&&(ye==="break"||ye==="continue")&&Me.tryLoc<=Te&&Te<=Me.finallyLoc&&(Me=null);var ze=Me?Me.completion:{};return ze.type=ye,ze.arg=Te,Me?(this.method="next",this.next=Me.finallyLoc,Pe):this.complete(ze)},complete:function(ye,Te){if(ye.type==="throw")throw ye.arg;return ye.type==="break"||ye.type==="continue"?this.next=ye.arg:ye.type==="return"?(this.rval=this.arg=ye.arg,this.method="return",this.next="end"):ye.type==="normal"&&Te&&(this.next=Te),Pe},finish:function(ye){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var Je=this.tryEntries[Te];if(Je.finallyLoc===ye)return this.complete(Je.completion,Je.afterLoc),Ze(Je),Pe}},catch:function(ye){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var Je=this.tryEntries[Te];if(Je.tryLoc===ye){var pe=Je.completion;if(pe.type==="throw"){var Me=pe.arg;Ze(Je)}return Me}}throw new Error("illegal catch attempt")},delegateYield:function(ye,Te,Je){return this.delegate={iterator:Oe(ye),resultName:Te,nextLoc:Je},this.method==="next"&&(this.arg=w),Pe}},Y}xt.exports=X,xt.exports.__esModule=!0,xt.exports.default=xt.exports},27424:function(xt,N,F){var $=F(85372),X=F(68872),w=F(86116),Y=F(12218);function G(K,Q){return $(K)||X(K,Q)||w(K,Q)||Y()}xt.exports=G,xt.exports.__esModule=!0,xt.exports.default=xt.exports},51589:function(xt,N,F){var $=F(85372),X=F(79498),w=F(86116),Y=F(12218);function G(K){return $(K)||X(K)||w(K)||Y()}xt.exports=G,xt.exports.__esModule=!0,xt.exports.default=xt.exports},861:function(xt,N,F){var $=F(63405),X=F(79498),w=F(86116),Y=F(42281);function G(K){return $(K)||X(K)||w(K)||Y()}xt.exports=G,xt.exports.__esModule=!0,xt.exports.default=xt.exports},95036:function(xt,N,F){var $=F(18698).default;function X(w,Y){if($(w)!=="object"||w===null)return w;var G=w[Symbol.toPrimitive];if(G!==void 0){var K=G.call(w,Y||"default");if($(K)!=="object")return K;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Y==="string"?String:Number)(w)}xt.exports=X,xt.exports.__esModule=!0,xt.exports.default=xt.exports},64062:function(xt,N,F){var $=F(18698).default,X=F(95036);function w(Y){var G=X(Y,"string");return $(G)==="symbol"?G:String(G)}xt.exports=w,xt.exports.__esModule=!0,xt.exports.default=xt.exports},18698:function(xt){function N(F){"@babel/helpers - typeof";return xt.exports=N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},xt.exports.__esModule=!0,xt.exports.default=xt.exports,N(F)}xt.exports=N,xt.exports.__esModule=!0,xt.exports.default=xt.exports},86116:function(xt,N,F){var $=F(73897);function X(w,Y){if(w){if(typeof w=="string")return $(w,Y);var G=Object.prototype.toString.call(w).slice(8,-1);if(G==="Object"&&w.constructor&&(G=w.constructor.name),G==="Map"||G==="Set")return Array.from(w);if(G==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G))return $(w,Y)}}xt.exports=X,xt.exports.__esModule=!0,xt.exports.default=xt.exports},64687:function(xt,N,F){var $=F(17061)();xt.exports=$;try{regeneratorRuntime=$}catch(X){typeof globalThis=="object"?globalThis.regeneratorRuntime=$:Function("r","regeneratorRuntime = r")($)}},96695:function(xt,N,F){var $=F(96263);function X(w,Y){var G=typeof Symbol!="undefined"&&w[Symbol.iterator]||w["@@iterator"];if(!G){if(Array.isArray(w)||(G=$(w))||Y&&w&&typeof w.length=="number"){G&&(w=G);var K=0,Q=function(){};return{s:Q,n:function(){return K>=w.length?{done:!0}:{done:!1,value:w[K++]}},e:function(he){throw he},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var oe=!0,ee=!1,xe;return{s:function(){G=G.call(w)},n:function(){var he=G.next();return oe=he.done,he},e:function(he){ee=!0,xe=he},f:function(){try{!oe&&G.return!=null&&G.return()}finally{if(ee)throw xe}}}}xt.exports=X,xt.exports.__esModule=!0,xt.exports.default=xt.exports},27771:function(xt,N){"use strict";var F=Array.isArray;N.Z=F},97582:function(xt,N,F){"use strict";F.d(N,{CR:function(){return me},Jh:function(){return J},XA:function(){return fe},ZT:function(){return X},_T:function(){return Y},ev:function(){return Le},mG:function(){return he},pi:function(){return w},pr:function(){return Pe}});var $=function(ye,Te){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Je,pe){Je.__proto__=pe}||function(Je,pe){for(var Me in pe)Object.prototype.hasOwnProperty.call(pe,Me)&&(Je[Me]=pe[Me])},$(ye,Te)};function X(ye,Te){if(typeof Te!="function"&&Te!==null)throw new TypeError("Class extends value "+String(Te)+" is not a constructor or null");$(ye,Te);function Je(){this.constructor=ye}ye.prototype=Te===null?Object.create(Te):(Je.prototype=Te.prototype,new Je)}var w=function(){return w=Object.assign||function(Te){for(var Je,pe=1,Me=arguments.length;pe<Me;pe++){Je=arguments[pe];for(var ze in Je)Object.prototype.hasOwnProperty.call(Je,ze)&&(Te[ze]=Je[ze])}return Te},w.apply(this,arguments)};function Y(ye,Te){var Je={};for(var pe in ye)Object.prototype.hasOwnProperty.call(ye,pe)&&Te.indexOf(pe)<0&&(Je[pe]=ye[pe]);if(ye!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Me=0,pe=Object.getOwnPropertySymbols(ye);Me<pe.length;Me++)Te.indexOf(pe[Me])<0&&Object.prototype.propertyIsEnumerable.call(ye,pe[Me])&&(Je[pe[Me]]=ye[pe[Me]]);return Je}function G(ye,Te,Je,pe){var Me=arguments.length,ze=Me<3?Te:pe===null?pe=Object.getOwnPropertyDescriptor(Te,Je):pe,De;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ze=Reflect.decorate(ye,Te,Je,pe);else for(var Ct=ye.length-1;Ct>=0;Ct--)(De=ye[Ct])&&(ze=(Me<3?De(ze):Me>3?De(Te,Je,ze):De(Te,Je))||ze);return Me>3&&ze&&Object.defineProperty(Te,Je,ze),ze}function K(ye,Te){return function(Je,pe){Te(Je,pe,ye)}}function Q(ye,Te,Je,pe,Me,ze){function De(Tt){if(Tt!==void 0&&typeof Tt!="function")throw new TypeError("Function expected");return Tt}for(var Ct=pe.kind,Vt=Ct==="getter"?"get":Ct==="setter"?"set":"value",Ve=!Te&&ye?pe.static?ye:ye.prototype:null,Ue=Te||(Ve?Object.getOwnPropertyDescriptor(Ve,pe.name):{}),Ee,et=!1,st=Je.length-1;st>=0;st--){var Re={};for(var Ie in pe)Re[Ie]=Ie==="access"?{}:pe[Ie];for(var Ie in pe.access)Re.access[Ie]=pe.access[Ie];Re.addInitializer=function(Tt){if(et)throw new TypeError("Cannot add initializers after decoration has completed");ze.push(De(Tt||null))};var ct=(0,Je[st])(Ct==="accessor"?{get:Ue.get,set:Ue.set}:Ue[Vt],Re);if(Ct==="accessor"){if(ct===void 0)continue;if(ct===null||typeof ct!="object")throw new TypeError("Object expected");(Ee=De(ct.get))&&(Ue.get=Ee),(Ee=De(ct.set))&&(Ue.set=Ee),(Ee=De(ct.init))&&Me.unshift(Ee)}else(Ee=De(ct))&&(Ct==="field"?Me.unshift(Ee):Ue[Vt]=Ee)}Ve&&Object.defineProperty(Ve,pe.name,Ue),et=!0}function oe(ye,Te,Je){for(var pe=arguments.length>2,Me=0;Me<Te.length;Me++)Je=pe?Te[Me].call(ye,Je):Te[Me].call(ye);return pe?Je:void 0}function ee(ye){return typeof ye=="symbol"?ye:"".concat(ye)}function xe(ye,Te,Je){return typeof Te=="symbol"&&(Te=Te.description?"[".concat(Te.description,"]"):""),Object.defineProperty(ye,"name",{configurable:!0,value:Je?"".concat(Je," ",Te):Te})}function ce(ye,Te){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(ye,Te)}function he(ye,Te,Je,pe){function Me(ze){return ze instanceof Je?ze:new Je(function(De){De(ze)})}return new(Je||(Je=Promise))(function(ze,De){function Ct(Ue){try{Ve(pe.next(Ue))}catch(Ee){De(Ee)}}function Vt(Ue){try{Ve(pe.throw(Ue))}catch(Ee){De(Ee)}}function Ve(Ue){Ue.done?ze(Ue.value):Me(Ue.value).then(Ct,Vt)}Ve((pe=pe.apply(ye,Te||[])).next())})}function J(ye,Te){var Je={label:0,sent:function(){if(ze[0]&1)throw ze[1];return ze[1]},trys:[],ops:[]},pe,Me,ze,De;return De={next:Ct(0),throw:Ct(1),return:Ct(2)},typeof Symbol=="function"&&(De[Symbol.iterator]=function(){return this}),De;function Ct(Ve){return function(Ue){return Vt([Ve,Ue])}}function Vt(Ve){if(pe)throw new TypeError("Generator is already executing.");for(;De&&(De=0,Ve[0]&&(Je=0)),Je;)try{if(pe=1,Me&&(ze=Ve[0]&2?Me.return:Ve[0]?Me.throw||((ze=Me.return)&&ze.call(Me),0):Me.next)&&!(ze=ze.call(Me,Ve[1])).done)return ze;switch(Me=0,ze&&(Ve=[Ve[0]&2,ze.value]),Ve[0]){case 0:case 1:ze=Ve;break;case 4:return Je.label++,{value:Ve[1],done:!1};case 5:Je.label++,Me=Ve[1],Ve=[0];continue;case 7:Ve=Je.ops.pop(),Je.trys.pop();continue;default:if(ze=Je.trys,!(ze=ze.length>0&&ze[ze.length-1])&&(Ve[0]===6||Ve[0]===2)){Je=0;continue}if(Ve[0]===3&&(!ze||Ve[1]>ze[0]&&Ve[1]<ze[3])){Je.label=Ve[1];break}if(Ve[0]===6&&Je.label<ze[1]){Je.label=ze[1],ze=Ve;break}if(ze&&Je.label<ze[2]){Je.label=ze[2],Je.ops.push(Ve);break}ze[2]&&Je.ops.pop(),Je.trys.pop();continue}Ve=Te.call(ye,Je)}catch(Ue){Ve=[6,Ue],Me=0}finally{pe=ze=0}if(Ve[0]&5)throw Ve[1];return{value:Ve[0]?Ve[1]:void 0,done:!0}}}var M=Object.create?function(ye,Te,Je,pe){pe===void 0&&(pe=Je);var Me=Object.getOwnPropertyDescriptor(Te,Je);(!Me||("get"in Me?!Te.__esModule:Me.writable||Me.configurable))&&(Me={enumerable:!0,get:function(){return Te[Je]}}),Object.defineProperty(ye,pe,Me)}:function(ye,Te,Je,pe){pe===void 0&&(pe=Je),ye[pe]=Te[Je]};function E(ye,Te){for(var Je in ye)Je!=="default"&&!Object.prototype.hasOwnProperty.call(Te,Je)&&M(Te,ye,Je)}function fe(ye){var Te=typeof Symbol=="function"&&Symbol.iterator,Je=Te&&ye[Te],pe=0;if(Je)return Je.call(ye);if(ye&&typeof ye.length=="number")return{next:function(){return ye&&pe>=ye.length&&(ye=void 0),{value:ye&&ye[pe++],done:!ye}}};throw new TypeError(Te?"Object is not iterable.":"Symbol.iterator is not defined.")}function me(ye,Te){var Je=typeof Symbol=="function"&&ye[Symbol.iterator];if(!Je)return ye;var pe=Je.call(ye),Me,ze=[],De;try{for(;(Te===void 0||Te-- >0)&&!(Me=pe.next()).done;)ze.push(Me.value)}catch(Ct){De={error:Ct}}finally{try{Me&&!Me.done&&(Je=pe.return)&&Je.call(pe)}finally{if(De)throw De.error}}return ze}function ke(){for(var ye=[],Te=0;Te<arguments.length;Te++)ye=ye.concat(me(arguments[Te]));return ye}function Pe(){for(var ye=0,Te=0,Je=arguments.length;Te<Je;Te++)ye+=arguments[Te].length;for(var pe=Array(ye),Me=0,Te=0;Te<Je;Te++)for(var ze=arguments[Te],De=0,Ct=ze.length;De<Ct;De++,Me++)pe[Me]=ze[De];return pe}function Le(ye,Te,Je){if(Je||arguments.length===2)for(var pe=0,Me=Te.length,ze;pe<Me;pe++)(ze||!(pe in Te))&&(ze||(ze=Array.prototype.slice.call(Te,0,pe)),ze[pe]=Te[pe]);return ye.concat(ze||Array.prototype.slice.call(Te))}function tt(ye){return this instanceof tt?(this.v=ye,this):new tt(ye)}function ft(ye,Te,Je){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe=Je.apply(ye,Te||[]),Me,ze=[];return Me={},De("next"),De("throw"),De("return"),Me[Symbol.asyncIterator]=function(){return this},Me;function De(et){pe[et]&&(Me[et]=function(st){return new Promise(function(Re,Ie){ze.push([et,st,Re,Ie])>1||Ct(et,st)})})}function Ct(et,st){try{Vt(pe[et](st))}catch(Re){Ee(ze[0][3],Re)}}function Vt(et){et.value instanceof tt?Promise.resolve(et.value.v).then(Ve,Ue):Ee(ze[0][2],et)}function Ve(et){Ct("next",et)}function Ue(et){Ct("throw",et)}function Ee(et,st){et(st),ze.shift(),ze.length&&Ct(ze[0][0],ze[0][1])}}function ge(ye){var Te,Je;return Te={},pe("next"),pe("throw",function(Me){throw Me}),pe("return"),Te[Symbol.iterator]=function(){return this},Te;function pe(Me,ze){Te[Me]=ye[Me]?function(De){return(Je=!Je)?{value:tt(ye[Me](De)),done:!1}:ze?ze(De):De}:ze}}function be(ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Te=ye[Symbol.asyncIterator],Je;return Te?Te.call(ye):(ye=typeof fe=="function"?fe(ye):ye[Symbol.iterator](),Je={},pe("next"),pe("throw"),pe("return"),Je[Symbol.asyncIterator]=function(){return this},Je);function pe(ze){Je[ze]=ye[ze]&&function(De){return new Promise(function(Ct,Vt){De=ye[ze](De),Me(Ct,Vt,De.done,De.value)})}}function Me(ze,De,Ct,Vt){Promise.resolve(Vt).then(function(Ve){ze({value:Ve,done:Ct})},De)}}function Ce(ye,Te){return Object.defineProperty?Object.defineProperty(ye,"raw",{value:Te}):ye.raw=Te,ye}var Ye=Object.create?function(ye,Te){Object.defineProperty(ye,"default",{enumerable:!0,value:Te})}:function(ye,Te){ye.default=Te};function je(ye){if(ye&&ye.__esModule)return ye;var Te={};if(ye!=null)for(var Je in ye)Je!=="default"&&Object.prototype.hasOwnProperty.call(ye,Je)&&M(Te,ye,Je);return Ye(Te,ye),Te}function Et(ye){return ye&&ye.__esModule?ye:{default:ye}}function Ae(ye,Te,Je,pe){if(Je==="a"&&!pe)throw new TypeError("Private accessor was defined without a getter");if(typeof Te=="function"?ye!==Te||!pe:!Te.has(ye))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Je==="m"?pe:Je==="a"?pe.call(ye):pe?pe.value:Te.get(ye)}function Qe(ye,Te,Je,pe,Me){if(pe==="m")throw new TypeError("Private method is not writable");if(pe==="a"&&!Me)throw new TypeError("Private accessor was defined without a setter");if(typeof Te=="function"?ye!==Te||!Me:!Te.has(ye))throw new TypeError("Cannot write private member to an object whose class did not declare it");return pe==="a"?Me.call(ye,Je):Me?Me.value=Je:Te.set(ye,Je),Je}function te(ye,Te){if(Te===null||typeof Te!="object"&&typeof Te!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof ye=="function"?Te===ye:ye.has(Te)}function Ze(ye,Te,Je){if(Te!=null){if(typeof Te!="object"&&typeof Te!="function")throw new TypeError("Object expected.");var pe;if(Je){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");pe=Te[Symbol.asyncDispose]}if(pe===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");pe=Te[Symbol.dispose]}if(typeof pe!="function")throw new TypeError("Object not disposable.");ye.stack.push({value:Te,dispose:pe,async:Je})}else Je&&ye.stack.push({async:!0});return Te}var ie=typeof SuppressedError=="function"?SuppressedError:function(ye,Te,Je){var pe=new Error(Je);return pe.name="SuppressedError",pe.error=ye,pe.suppressed=Te,pe};function Oe(ye){function Te(pe){ye.error=ye.hasError?new ie(pe,ye.error,"An error was suppressed during disposal."):pe,ye.hasError=!0}function Je(){for(;ye.stack.length;){var pe=ye.stack.pop();try{var Me=pe.dispose&&pe.dispose.call(pe.value);if(pe.async)return Promise.resolve(Me).then(Je,function(ze){return Te(ze),Je()})}catch(ze){Te(ze)}}if(ye.hasError)throw ye.error}return Je()}var nt={__extends:X,__assign:w,__rest:Y,__decorate:G,__param:K,__metadata:ce,__awaiter:he,__generator:J,__createBinding:M,__exportStar:E,__values:fe,__read:me,__spread:ke,__spreadArrays:Pe,__spreadArray:Le,__await:tt,__asyncGenerator:ft,__asyncDelegator:ge,__asyncValues:be,__makeTemplateObject:Ce,__importStar:je,__importDefault:Et,__classPrivateFieldGet:Ae,__classPrivateFieldSet:Qe,__classPrivateFieldIn:te,__addDisposableResource:Ze,__disposeResources:Oe}}}]);
}());